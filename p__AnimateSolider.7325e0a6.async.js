(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{fZzo:function(Ve,ae,m){"use strict";m.r(ae);var de=m("tGGB"),se=m("NUIj"),oe=m.n(se),te=m("1QO0"),Le=m.n(te),le=m("tWIW"),ve=m("EAa4"),a=m("8GEk"),ce=m("4DJe"),fe=m("YTEE"),A=m("Pmag"),N=m("t12N"),Oe=m.n(N),me=function(){var ke={exposure:0,bloomStrength:0,bloomThreshold:0,bloomRadius:0},l,w,h,je,g,O,x,re,Y,Re,f,z,C,J,k,u,H,j,y,Z,R,c=[],Q=new a.Qb,p,S,b,X,M,D,F,T,Ie,Be,I,Ue,Ke,Ge,V,r,$,L=!1,q=0,P,_=10*1e3,ee,ue=function(){var e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),o=/(iPad|iPhone|Android)/i.test(e)?" is-mobile":" is-desktop";P=document.getElementById("container"),h=new a.nb(45,P.offsetWidth/window.innerHeight,1,1e3),h.position.set(1,3,-10),h.lookAt(0,1,0),re=new a.p,l=new a.zb,l.background=new a.q(10526880),l.fog=new a.B(10526880,10,50);var n=new a.E(16777215,4473924);n.position.set(0,20,0);var d=new a.f(20);l.add(d);var i=new a.v(16777215);i.position.set(-3,5,-10),i.castShadow=!0,i.shadow.camera.top=80,i.shadow.camera.bottom=-20,i.shadow.camera.left=-80,i.shadow.camera.right=25,i.shadow.mapSize.width=3e4,i.shadow.mapSize.height=36e3,l.add(i);var v=new a.Y(new a.ob(100,100),new a.bb({color:10066329,depthWrite:!1}));v.rotation.x=-Math.PI/2,v.receiveShadow=!0,v.castShadow=!0,l.add(v),T=new a.Ib("rgb(242, 242, 242)"),T.position.set(3,3,-3),T.castShadow=!0,T.angle=Math.PI/8,T.shadow.mapSize.width=1024,T.shadow.mapSize.height=1024,l.add(T),Y=new a.pb(16777215),Y.position.set(400,200,300),l.add(Y);var W=new le.a;W.load("./img/Soldier.glb",function(s){console.log(s),g=s.scene,l.add(g),console.log(g),g.traverse(function(G){G.isMesh&&(G.castShadow=!0)}),O=new a.Cb(g),O.visiable=!1,l.add(O),Ce();var K=s.animations;x=new a.d(g),p=x.clipAction(K[0]),S=x.clipAction(K[3]),b=x.clipAction(K[1]),X=x.clipAction(K[2]),console.log("\u52A8\u753B",p),V=[p,S,b,X],ne(),pe();var Je=new ce.a(h,w.domElement);z=new fe.a(h,w.domElement),w.domElement.addEventListener("click",function(G){_e(G)},!1)}),w=new a.Wb({antialias:!0}),w.setPixelRatio(window.devicePixelRatio),w.setSize(P.offsetWidth,window.innerHeight),w.outputEncoding=a.Xb,w.shadowMap.enabled=!0,P.appendChild(w.domElement),window.addEventListener("resize",Fe)};function Ne(){var t=["varying vec3	vVertexWorldPosition;","varying vec3	vVertexNormal;","varying vec4	vFragColor;","void main(){","	vVertexNormal	= normalize(normalMatrix * normal);","	vVertexWorldPosition	= (modelMatrix * vec4(position, 1)).xyz;","	// set gl_Position","	gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1);","}"].join(`
`),e={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:.5},glowColor:{type:"c",value:new a.q("#51AEF4")}},vertexShader:t,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},o={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:1},glowColor:{type:"c",value:new a.q("#336AAC")}},vertexShader:t,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},n={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:.2},glowColor:{type:"c",value:new a.q("red")}},vertexShader:t,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},d=new a.Ab({uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:a.ib,transparent:!0,depthWrite:!1}),i=new a.Ab({uniforms:o.uniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:a.ib,transparent:!0,depthWrite:!1}),v=new a.Ab({extends:a.Z,uniforms:n.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,blending:a.ib,transparent:!0,depthWrite:!0});return{material1:d,material2:i,material3:v}}var we=function(){var e=[{x:5,y:2,z:-3},{x:5,y:1,z:5},{x:-5,y:1,z:5},{x:-5,y:1,z:-3}],o=function(i){var v=new a.j(.1,.1,.1),W=new a.Z(13434777),s=new a.Y(v,W);return s.position.copy(i),s.castShadow=!0,l.add(s),s};$=e.map(function(d){return o(d)}),f=new a.n($.map(function(d){return d.position})),f.curveType="chordal",f.closed=!0,f.castShadow=!0;var n=f.getPoints(50);I=new a.N(new a.m().setFromPoints(n),new a.M({color:65280,opacity:0})),I.castShadow=!0,l.add(I),xe()},he=function(e,o){var n=f.getPointAt(1-e);g.position.copy(n);var d=f.getPointAt(Math.abs(1-o)),i=d.add(new a.Rb(2,5,1))},ge=function(e){var o=f.getTangentAt(1-e),n=o.add(g.position);g.lookAt(n),h.lookAt(n.add(new a.Rb(0,1,0)))},pe=function t(){ee=Date.now();var e=ee%_/_,o=(ee-1e3)%_/_;he(e,o),ge(e),requestAnimationFrame(t),M=p.getEffectiveWeight(),D=S.getEffectiveWeight(),F=b.getEffectiveWeight(),De();var n=re.getDelta();L&&(n=q,q=0),x.update(n),w.render(l,h)},_e=function(e){Q.x=(e.clientX-P.getBoundingClientRect().left)/P.offsetWidth*2-1,Q.y=-((e.clientY-P.getBoundingClientRect().top)/P.offsetHeight)*2+1;var o=new a.xb;o.setFromCamera(Q,h);var n=o.intersectObjects($);if(n.length){var d=n[0].object;z.attach(d),l.add(z)}z.addEventListener("dragging-changed",function(i){if(!i.value){var v=f.getPoints(50);I.geometry.setFromPoints(v),C.geometry.setFromPoints(v),k=new A.a(f,1500),C=new a.Y(k,J),C.castShadow=!0,C.receiveShadow=!0,l.add(C),u.geometry.setFromPoints(v),j=new A.b(f,100),u=new a.Y(j,H),u.castShadow=!0,u.receiveShadow=!0,u.position.y=.1,l.add(u),y.geometry.setFromPoints(v),R=new A.c(f,100),y=new a.Y(R,Z),y.castShadow=!0,y.receiveShadow=!0,y.position.y=.1,l.add(y)}})},xe=function(){k=new A.a(f,1500),J=new a.bb({vertexColors:!0}),C=new a.Y(k,J),C.castShadow=!0,C.receiveShadow=!0,l.add(C),j=new A.b(f,100),H=new a.bb,u=new a.Y(j,H),u.castShadow=!0,u.receiveShadow=!0,u.position.y=.1,l.add(u),R=new A.c(f,500),Z=new a.Z({color:3166208,depthWrite:!1,transparent:!0}),y=new a.Y(R,Z),u.castShadow=!0,u.receiveShadow=!0,y.position.y=.1,l.add(y)},Ce=function(){var e=new ve.a({width:310}),o=e.addFolder("Visibility"),n=e.addFolder("Activation/Deactivation"),d=e.addFolder("Pausing/Stepping"),i=e.addFolder("Crossfading"),v=e.addFolder("Blend Weights"),W=e.addFolder("General Speed");r={"show model":!0,"show skeleton":!1,"deactivate all":Pe,"activate all":ne,"pause/continue":Ee,"make single step":Ae,"modify step size":.05,"from walk to idle":function(){U(S,p,1)},"from idle to walk":function(){U(p,S,.5)},"from walk to run":function(){U(S,b,2.5)},"from run to walk":function(){U(b,S,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":0,"modify run weight":1,"modify time scale":1},o.add(r,"show model").onChange(ye),o.add(r,"show skeleton").onChange(Se),n.add(r,"deactivate all"),n.add(r,"activate all"),d.add(r,"pause/continue"),d.add(r,"make single step"),d.add(r,"modify step size",.01,.1,.001),c.push(i.add(r,"from walk to idle")),c.push(i.add(r,"from idle to walk")),c.push(i.add(r,"from walk to run")),c.push(i.add(r,"from run to walk")),i.add(r,"use default duration"),i.add(r,"set custom duration",0,10,.01),v.add(r,"modify idle weight",0,1,.01).listen().onChange(function(s){E(p,s)}),v.add(r,"modify walk weight",0,1,.01).listen().onChange(function(s){s===0?_=Date.now():_=(2.5-s+1e-4)*10*1e3,E(S,s)}),v.add(r,"modify run weight",0,1,.01).listen().onChange(function(s){s===0?_=Date.now():_=(2-s+1e-4)*10*1e3,E(b,s)}),W.add(r,"modify time scale",0,1.5,.01).onChange(be),o.open(),n.open(),d.open(),i.open(),v.open(),W.open()},ye=function(e){g.visiable=e},Se=function(e){console.log(e),O.visiable=e},be=function(e){x.timeScale=e},Pe=function(){_=.1,V.forEach(function(e){e.stop()})},ne=function(){_=10*1e3,E(p,r["modify idle weight"]),E(S,r["modify walk weight"]),E(b,r["modify run weight"]),E(X,r["modify tpos weight"]),console.log("\u52A8\u753B\u5DE5\u4F5C",b),V.forEach(function(e){console.log(e),e.play()})},Ee=function(){L?(L=!1,B()):p.paused?B():Te()},Te=function(){V.forEach(function(e){e.paused=!0})};function B(){V.forEach(function(t){t.paused=!1})}var Ae=function(){B(),L=!0,q=r["modify step size"]},U=function(e,o,n){var d=We(n);L=!1,B(),e===p?ie(e,o,d):Me(e,o,d)},We=function(e){return r["use default duration"]?e:r["set custom duration"]},Me=function(e,o,n){x.addEventListener("loop",d);function d(i){i.action===e&&(x.removeEventListener("loop",d),ie(e,o,n))}},ie=function(e,o,n){E(o,1),o.time=0,e.crossFadeTo(o,n,!0)},E=function(e,o){e.enabled=!0,e.setEffectiveTimeScale(1),e.setEffectiveWeight(o)},De=function(){r["modify idle weight"]=M,r["modify walk weight"]=D,r["modify run weight"]=F},Ye=function(){M===1&&D===0&&F===0&&(c[0].disable(),c[1].enable(),c[2].disable(),c[3].disable()),M===0&&D===1&&F===0&&(c[0].enable(),c[1].disable(),c[2].enable(),c[3].disable()),M===0&&D===0&&F===1&&(c[0].disable(),c[1].disable(),c[2].disable(),c[3].enable())},Fe=function(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)};return Object(te.useEffect)(Object(de.a)(oe.a.mark(function t(){return oe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ue();case 2:return o.next=4,we();case 4:case"end":return o.stop()}},t)})),[]),Object(N.jsx)("div",{children:Object(N.jsx)("div",{id:"container",style:{height:"100vh",width:"100%"}})})};ae.default=me}}]);
