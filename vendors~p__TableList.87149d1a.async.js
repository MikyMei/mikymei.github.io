(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+3sx":function(A,v){function a(l){return function(){return l}}A.exports=a},"+Pqg":function(A,v){function a(l,o){if(!(l instanceof o))throw new TypeError("Cannot call a class as a function")}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},"+em5":function(A,v,a){"use strict";a.d(v,"a",function(){return Q});var l=a("yG8O"),o=a.n(l),m=a("lwsE"),g=a.n(m),p=a("W8MJ"),y=a.n(p),b=a("lSNA"),I=a.n(b),P=a("U+yc"),M=a.n(P),z=a("1ABj"),oe=a.n(z),G=a("Gk2g"),ee=a.n(G),pe=a("jcz1"),J=a.n(pe),se=a("wDAd"),fe=a.n(se),X=a("4cb6"),Oe=a.n(X),D=a("mNvP"),De=a.n(D),ot=a("o+pz"),Ke=a("bB6j"),Le=a("bPkA"),W,He,C,Ze,rt;function At(te,Fe){var ze=Object.keys(te);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(te);Fe&&(St=St.filter(function(ut){return Object.getOwnPropertyDescriptor(te,ut).enumerable})),ze.push.apply(ze,St)}return ze}function Et(te){for(var Fe=1;Fe<arguments.length;Fe++){var ze=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?At(Object(ze),!0).forEach(function(St){I()(te,St,ze[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(ze)):At(Object(ze)).forEach(function(St){Object.defineProperty(te,St,Object.getOwnPropertyDescriptor(ze,St))})}return te}var ne=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Q=(W=Object(X.injectable)(),He=Object(X.inject)(Ke.a.IShaderModuleService),W(C=(Ze=function(){function te(){g()(this,te),o()(this,"shaderModuleService",rt,this),I()(this,"rendererService",void 0),I()(this,"config",void 0),I()(this,"quad",ne),I()(this,"enabled",!0),I()(this,"renderToScreen",!1),I()(this,"model",void 0),I()(this,"name",void 0),I()(this,"optionsToUpdate",{})}return y()(te,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(ze){this.name=ze}},{key:"getType",value:function(){return Le.a.PostProcessing}},{key:"init",value:function(ze,St){this.config=St,this.rendererService=ze.getContainer().get(Ke.a.IRendererService);var ut=this.rendererService,Qt=ut.createAttribute,vr=ut.createBuffer,tt=ut.createModel,Pe=this.setupShaders(),Ne=Pe.vs,ke=Pe.fs,et=Pe.uniforms;this.model=tt({vs:Ne,fs:ke,attributes:{a_Position:Qt({buffer:vr({data:[-4,-4,4,-4,0,4],type:ot.a.FLOAT}),size:2})},uniforms:Et(Et({u_Texture:null},et),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(ze){var St=this,ut=ze.multiPassRenderer.getPostProcessor(),Qt=this.rendererService,vr=Qt.useFramebuffer,tt=Qt.getViewportSize,Pe=Qt.clear,Ne=tt(),ke=Ne.width,et=Ne.height;vr(this.renderToScreen?null:ut.getWriteFBO(),function(){Pe({framebuffer:ut.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),St.model.draw({uniforms:Et({u_Texture:ut.getReadFBO(),u_ViewportSize:[ke,et]},St.convertOptionsToUniforms(St.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(ze){this.enabled=ze}},{key:"setRenderToScreen",value:function(ze){this.renderToScreen=ze}},{key:"updateOptions",value:function(ze){this.optionsToUpdate=Et(Et({},this.optionsToUpdate),ze)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(ze){var St={};return Object.keys(ze).forEach(function(ut){J()(ze[ut])||(St["u_".concat(ee()(fe()(ut)))]=ze[ut])}),St}}]),te}(),rt=M()(Ze.prototype,"shaderModuleService",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze))||C)},"+mJv":function(A,v,a){"use strict";var l=this&&this.__awaiter||function(se,fe,X,Oe){function D(De){return De instanceof X?De:new X(function(ot){ot(De)})}return new(X||(X=Promise))(function(De,ot){function Ke(He){try{W(Oe.next(He))}catch(C){ot(C)}}function Le(He){try{W(Oe.throw(He))}catch(C){ot(C)}}function W(He){He.done?De(He.value):D(He.value).then(Ke,Le)}W((Oe=Oe.apply(se,fe||[])).next())})},o=this&&this.__generator||function(se,fe){var X={label:0,sent:function(){if(De[0]&1)throw De[1];return De[1]},trys:[],ops:[]},Oe,D,De,ot;return ot={next:Ke(0),throw:Ke(1),return:Ke(2)},typeof Symbol=="function"&&(ot[Symbol.iterator]=function(){return this}),ot;function Ke(W){return function(He){return Le([W,He])}}function Le(W){if(Oe)throw new TypeError("Generator is already executing.");for(;X;)try{if(Oe=1,D&&(De=W[0]&2?D.return:W[0]?D.throw||((De=D.return)&&De.call(D),0):D.next)&&!(De=De.call(D,W[1])).done)return De;switch(D=0,De&&(W=[W[0]&2,De.value]),W[0]){case 0:case 1:De=W;break;case 4:return X.label++,{value:W[1],done:!1};case 5:X.label++,D=W[1],W=[0];continue;case 7:W=X.ops.pop(),X.trys.pop();continue;default:if(De=X.trys,!(De=De.length>0&&De[De.length-1])&&(W[0]===6||W[0]===2)){X=0;continue}if(W[0]===3&&(!De||W[1]>De[0]&&W[1]<De[3])){X.label=W[1];break}if(W[0]===6&&X.label<De[1]){X.label=De[1],De=W;break}if(De&&X.label<De[2]){X.label=De[2],X.ops.push(W);break}De[2]&&X.ops.pop(),X.trys.pop();continue}W=fe.call(se,X)}catch(He){W=[6,He],D=0}finally{Oe=De=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},m=this&&this.__spreadArray||function(se,fe){for(var X=0,Oe=fe.length,D=se.length;X<Oe;X++,D++)se[D]=fe[X];return se};Object.defineProperty(v,"__esModule",{value:!0}),v.Container=void 0;var g=a("zk7k"),p=a("Z6CD"),y=a("BU00"),b=a("jHQc"),I=a("tWLo"),P=a("C/0V"),M=a("AvsN"),z=a("wrK5"),oe=a("gbO8"),G=a("qbsE"),ee=a("9yrr"),pe=a("9Ece"),J=function(){function se(fe){this._appliedMiddleware=[];var X=fe||{};if(typeof X!="object")throw new Error(""+p.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(X.defaultScope===void 0)X.defaultScope=y.BindingScopeEnum.Transient;else if(X.defaultScope!==y.BindingScopeEnum.Singleton&&X.defaultScope!==y.BindingScopeEnum.Transient&&X.defaultScope!==y.BindingScopeEnum.Request)throw new Error(""+p.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(X.autoBindInjectable===void 0)X.autoBindInjectable=!1;else if(typeof X.autoBindInjectable!="boolean")throw new Error(""+p.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(X.skipBaseClassChecks===void 0)X.skipBaseClassChecks=!1;else if(typeof X.skipBaseClassChecks!="boolean")throw new Error(""+p.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:X.autoBindInjectable,defaultScope:X.defaultScope,skipBaseClassChecks:X.skipBaseClassChecks},this.id=oe.id(),this._bindingDictionary=new pe.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new I.MetadataReader}return se.merge=function(fe,X){for(var Oe=[],D=2;D<arguments.length;D++)Oe[D-2]=arguments[D];var De=new se,ot=m([fe,X],Oe).map(function(W){return P.getBindingDictionary(W)}),Ke=P.getBindingDictionary(De);function Le(W,He){W.traverse(function(C,Ze){Ze.forEach(function(rt){He.add(rt.serviceIdentifier,rt.clone())})})}return ot.forEach(function(W){Le(W,Ke)}),De},se.prototype.load=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];for(var Oe=this._getContainerModuleHelpersFactory(),D=0,De=fe;D<De.length;D++){var ot=De[D],Ke=Oe(ot.id);ot.registry(Ke.bindFunction,Ke.unbindFunction,Ke.isboundFunction,Ke.rebindFunction)}},se.prototype.loadAsync=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];return l(this,void 0,void 0,function(){var Oe,D,De,ot,Ke;return o(this,function(Le){switch(Le.label){case 0:Oe=this._getContainerModuleHelpersFactory(),D=0,De=fe,Le.label=1;case 1:return D<De.length?(ot=De[D],Ke=Oe(ot.id),[4,ot.registry(Ke.bindFunction,Ke.unbindFunction,Ke.isboundFunction,Ke.rebindFunction)]):[3,4];case 2:Le.sent(),Le.label=3;case 3:return D++,[3,1];case 4:return[2]}})})},se.prototype.unload=function(){for(var fe=this,X=[],Oe=0;Oe<arguments.length;Oe++)X[Oe]=arguments[Oe];var D=function(De){return function(ot){return ot.moduleId===De}};X.forEach(function(De){var ot=D(De.id);fe._bindingDictionary.removeByCondition(ot)})},se.prototype.bind=function(fe){var X=this.options.defaultScope||y.BindingScopeEnum.Transient,Oe=new g.Binding(fe,X);return this._bindingDictionary.add(fe,Oe),new z.BindingToSyntax(Oe)},se.prototype.rebind=function(fe){return this.unbind(fe),this.bind(fe)},se.prototype.unbind=function(fe){try{this._bindingDictionary.remove(fe)}catch(X){throw new Error(p.CANNOT_UNBIND+" "+G.getServiceIdentifierAsString(fe))}},se.prototype.unbindAll=function(){this._bindingDictionary=new pe.Lookup},se.prototype.isBound=function(fe){var X=this._bindingDictionary.hasKey(fe);return!X&&this.parent&&(X=this.parent.isBound(fe)),X},se.prototype.isBoundNamed=function(fe,X){return this.isBoundTagged(fe,b.NAMED_TAG,X)},se.prototype.isBoundTagged=function(fe,X,Oe){var D=!1;if(this._bindingDictionary.hasKey(fe)){var De=this._bindingDictionary.get(fe),ot=P.createMockRequest(this,fe,X,Oe);D=De.some(function(Ke){return Ke.constraint(ot)})}return!D&&this.parent&&(D=this.parent.isBoundTagged(fe,X,Oe)),D},se.prototype.snapshot=function(){this._snapshots.push(ee.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},se.prototype.restore=function(){var fe=this._snapshots.pop();if(fe===void 0)throw new Error(p.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=fe.bindings,this._middleware=fe.middleware},se.prototype.createChild=function(fe){var X=new se(fe||this.options);return X.parent=this,X},se.prototype.applyMiddleware=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];this._appliedMiddleware=this._appliedMiddleware.concat(fe);var Oe=this._middleware?this._middleware:this._planAndResolve();this._middleware=fe.reduce(function(D,De){return De(D)},Oe)},se.prototype.applyCustomMetadataReader=function(fe){this._metadataReader=fe},se.prototype.get=function(fe){return this._get(!1,!1,y.TargetTypeEnum.Variable,fe)},se.prototype.getTagged=function(fe,X,Oe){return this._get(!1,!1,y.TargetTypeEnum.Variable,fe,X,Oe)},se.prototype.getNamed=function(fe,X){return this.getTagged(fe,b.NAMED_TAG,X)},se.prototype.getAll=function(fe){return this._get(!0,!0,y.TargetTypeEnum.Variable,fe)},se.prototype.getAllTagged=function(fe,X,Oe){return this._get(!1,!0,y.TargetTypeEnum.Variable,fe,X,Oe)},se.prototype.getAllNamed=function(fe,X){return this.getAllTagged(fe,b.NAMED_TAG,X)},se.prototype.resolve=function(fe){var X=this.createChild();return X.bind(fe).toSelf(),this._appliedMiddleware.forEach(function(Oe){X.applyMiddleware(Oe)}),X.get(fe)},se.prototype._getContainerModuleHelpersFactory=function(){var fe=this,X=function(Ke,Le){Ke._binding.moduleId=Le},Oe=function(Ke){return function(Le){var W=fe.bind.bind(fe),He=W(Le);return X(He,Ke),He}},D=function(Ke){return function(Le){var W=fe.unbind.bind(fe);W(Le)}},De=function(Ke){return function(Le){var W=fe.isBound.bind(fe);return W(Le)}},ot=function(Ke){return function(Le){var W=fe.rebind.bind(fe),He=W(Le);return X(He,Ke),He}};return function(Ke){return{bindFunction:Oe(Ke),isboundFunction:De(Ke),rebindFunction:ot(Ke),unbindFunction:D(Ke)}}},se.prototype._get=function(fe,X,Oe,D,De,ot){var Ke=null,Le={avoidConstraints:fe,contextInterceptor:function(W){return W},isMultiInject:X,key:De,serviceIdentifier:D,targetType:Oe,value:ot};if(this._middleware){if(Ke=this._middleware(Le),Ke==null)throw new Error(p.INVALID_MIDDLEWARE_RETURN)}else Ke=this._planAndResolve()(Le);return Ke},se.prototype._planAndResolve=function(){var fe=this;return function(X){var Oe=P.plan(fe._metadataReader,fe,X.isMultiInject,X.targetType,X.serviceIdentifier,X.key,X.value,X.avoidConstraints);Oe=X.contextInterceptor(Oe);var D=M.resolve(Oe);return D}},se}();v.Container=J},"/2ht":function(A,v,a){var l=a("BMKy"),o=Object.prototype,m=o.hasOwnProperty,g=o.toString,p=l?l.toStringTag:void 0;function y(b){var I=m.call(b,p),P=b[p];try{b[p]=void 0;var M=!0}catch(oe){}var z=g.call(b);return M&&(I?b[p]=P:delete b[p]),z}A.exports=y},"/33/":function(A,v){},"/Onj":function(A,v,a){var l=a("eRDX"),o=a("z6AL"),m=o(function(g,p,y){l(g,p,y)});A.exports=m},"/PHc":function(A,v,a){"use strict";(function(l){a.d(v,"a",function(){return ze}),a.d(v,"b",function(){return vr}),a.d(v,"c",function(){return ne}),a.d(v,"d",function(){return Qt});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(tt,Pe,Ne,ke){function et(Ge){return Ge instanceof Ne?Ge:new Ne(function(Ot){Ot(Ge)})}return new(Ne||(Ne=Promise))(function(Ge,Ot){function Bt(Lt){try{ge(ke.next(Lt))}catch(qt){Ot(qt)}}function gt(Lt){try{ge(ke.throw(Lt))}catch(qt){Ot(qt)}}function ge(Lt){Lt.done?Ge(Lt.value):et(Lt.value).then(Bt,gt)}ge((ke=ke.apply(tt,Pe||[])).next())})}function m(tt,Pe){var Ne={label:0,sent:function(){if(Ge[0]&1)throw Ge[1];return Ge[1]},trys:[],ops:[]},ke,et,Ge,Ot;return Ot={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ot[Symbol.iterator]=function(){return this}),Ot;function Bt(ge){return function(Lt){return gt([ge,Lt])}}function gt(ge){if(ke)throw new TypeError("Generator is already executing.");for(;Ne;)try{if(ke=1,et&&(Ge=ge[0]&2?et.return:ge[0]?et.throw||((Ge=et.return)&&Ge.call(et),0):et.next)&&!(Ge=Ge.call(et,ge[1])).done)return Ge;switch(et=0,Ge&&(ge=[ge[0]&2,Ge.value]),ge[0]){case 0:case 1:Ge=ge;break;case 4:return Ne.label++,{value:ge[1],done:!1};case 5:Ne.label++,et=ge[1],ge=[0];continue;case 7:ge=Ne.ops.pop(),Ne.trys.pop();continue;default:if(Ge=Ne.trys,!(Ge=Ge.length>0&&Ge[Ge.length-1])&&(ge[0]===6||ge[0]===2)){Ne=0;continue}if(ge[0]===3&&(!Ge||ge[1]>Ge[0]&&ge[1]<Ge[3])){Ne.label=ge[1];break}if(ge[0]===6&&Ne.label<Ge[1]){Ne.label=Ge[1],Ge=ge;break}if(Ge&&Ne.label<Ge[2]){Ne.label=Ge[2],Ne.ops.push(ge);break}Ge[2]&&Ne.ops.pop(),Ne.trys.pop();continue}ge=Pe.call(tt,Ne)}catch(Lt){ge=[6,Lt],et=0}finally{ke=Ge=0}if(ge[0]&5)throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}}function g(tt,Pe){var Ne=typeof Symbol=="function"&&tt[Symbol.iterator];if(!Ne)return tt;var ke=Ne.call(tt),et,Ge=[],Ot;try{for(;(Pe===void 0||Pe-- >0)&&!(et=ke.next()).done;)Ge.push(et.value)}catch(Bt){Ot={error:Bt}}finally{try{et&&!et.done&&(Ne=ke.return)&&Ne.call(ke)}finally{if(Ot)throw Ot.error}}return Ge}function p(){for(var tt=[],Pe=0;Pe<arguments.length;Pe++)tt=tt.concat(g(arguments[Pe]));return tt}function y(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}function b(tt,Pe){return Pe={exports:{}},tt(Pe,Pe.exports),Pe.exports}var I=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){return ke&&typeof ke.length=="number"&&ke.length>=0&&ke.length%1==0}tt.exports=Pe.default});y(I);var P=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=function(Ne){return function(){for(var ke=[],et=arguments.length;et--;)ke[et]=arguments[et];var Ge=ke.pop();return Ne.call(this,ke,Ge)}},tt.exports=Pe.default});y(P);var M=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.fallback=et,Pe.wrap=Ge;var Ne=Pe.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,ke=Pe.hasNextTick=typeof l=="object"&&typeof l.nextTick=="function";function et(Bt){setTimeout(Bt,0)}function Ge(Bt){return function(gt){for(var ge=[],Lt=arguments.length-1;Lt-- >0;)ge[Lt]=arguments[Lt+1];return Bt(function(){return gt.apply(void 0,ge)})}}var Ot;Ne?Ot=setImmediate:ke?Ot=l.nextTick:Ot=et,Pe.default=Ge(Ot)});y(M);var z=M.fallback,oe=M.wrap,G=M.hasSetImmediate,ee=M.hasNextTick,pe=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(P),ke=et(M);function et(gt){return gt&&gt.__esModule?gt:{default:gt}}function Ge(gt){return(0,J.isAsync)(gt)?function(){for(var ge=[],Lt=arguments.length;Lt--;)ge[Lt]=arguments[Lt];var qt=ge.pop(),xr=gt.apply(this,ge);return Ot(xr,qt)}:(0,Ne.default)(function(ge,Lt){var qt;try{qt=gt.apply(this,ge)}catch(xr){return Lt(xr)}if(qt&&typeof qt.then=="function")return Ot(qt,Lt);Lt(null,qt)})}function Ot(gt,ge){return gt.then(function(Lt){Bt(ge,null,Lt)},function(Lt){Bt(ge,Lt&&Lt.message?Lt:new Error(Lt))})}function Bt(gt,ge,Lt){try{gt(ge,Lt)}catch(qt){(0,ke.default)(function(xr){throw xr},qt)}}tt.exports=Pe.default});y(pe);var J=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.isAsyncIterable=Pe.isAsyncGenerator=Pe.isAsync=void 0;var Ne=ke(pe);function ke(gt){return gt&&gt.__esModule?gt:{default:gt}}function et(gt){return gt[Symbol.toStringTag]==="AsyncFunction"}function Ge(gt){return gt[Symbol.toStringTag]==="AsyncGenerator"}function Ot(gt){return typeof gt[Symbol.asyncIterator]=="function"}function Bt(gt){if(typeof gt!="function")throw new Error("expected a function");return et(gt)?(0,Ne.default)(gt):gt}Pe.default=Bt,Pe.isAsync=et,Pe.isAsyncGenerator=Ge,Pe.isAsyncIterable=Ot});y(J);var se=J.isAsyncIterable,fe=J.isAsyncGenerator,X=J.isAsync,Oe=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke,et){if(et===void 0&&(et=ke.length),!et)throw new Error("arity is undefined");function Ge(){for(var Ot=this,Bt=[],gt=arguments.length;gt--;)Bt[gt]=arguments[gt];return typeof Bt[et-1]=="function"?ke.apply(this,Bt):new Promise(function(ge,Lt){Bt[et-1]=function(qt){for(var xr=[],tr=arguments.length-1;tr-- >0;)xr[tr]=arguments[tr+1];if(qt)return Lt(qt);ge(xr.length>1?xr:xr[0])},ke.apply(Ot,Bt)})}return Object.defineProperty(Ge,"name",{configurable:!0,value:"awaitable("+ke.name+")"}),Ge}tt.exports=Pe.default});y(Oe);var D=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ge(I),ke=Ge(J),et=Ge(Oe);function Ge(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}Pe.default=(0,et.default)(function(Ot,Bt,gt){var ge=(0,Ne.default)(Bt)?[]:{};Ot(Bt,function(Lt,qt,xr){(0,ke.default)(Lt)(function(tr){for(var Xr,rr=[],bn=arguments.length-1;bn-- >0;)rr[bn]=arguments[bn+1];rr.length<2&&(Xr=rr,rr=Xr[0]),ge[qt]=rr,xr(tr)})},function(Lt){return gt(Lt,ge)})},3),tt.exports=Pe.default});y(D);var De=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){function et(){for(var Ge=[],Ot=arguments.length;Ot--;)Ge[Ot]=arguments[Ot];if(ke!==null){var Bt=ke;ke=null,Bt.apply(this,Ge)}}return Object.assign(et,ke),et}tt.exports=Pe.default});y(De);var ot=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=function(Ne){return Ne[Symbol.iterator]&&Ne[Symbol.iterator]()},tt.exports=Pe.default});y(ot);var Ke=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=gt;var Ne=et(I),ke=et(ot);function et(ge){return ge&&ge.__esModule?ge:{default:ge}}function Ge(ge){var Lt=-1,qt=ge.length;return function(){return++Lt<qt?{value:ge[Lt],key:Lt}:null}}function Ot(ge){var Lt=-1;return function(){var xr=ge.next();return xr.done?null:(Lt++,{value:xr.value,key:Lt})}}function Bt(ge){var Lt=ge?Object.keys(ge):[],qt=-1,xr=Lt.length;return function(){var Xr=Lt[++qt];return qt<xr?{value:ge[Xr],key:Xr}:null}}function gt(ge){if((0,Ne.default)(ge))return Ge(ge);var Lt=(0,ke.default)(ge);return Lt?Ot(Lt):Bt(ge)}tt.exports=Pe.default});y(Ke);var Le=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){return function(){for(var et=[],Ge=arguments.length;Ge--;)et[Ge]=arguments[Ge];if(ke===null)throw new Error("Callback was already called.");var Ot=ke;ke=null,Ot.apply(this,et)}}tt.exports=Pe.default});y(Le);var W=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne={};Pe.default=Ne,tt.exports=Pe.default});y(W);var He=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=et;var Ne=ke(W);function ke(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function et(Ge,Ot,Bt,gt){var ge=!1,Lt=!1,qt=!1,xr=0,tr=0;function Xr(){xr>=Ot||qt||ge||(qt=!0,Ge.next().then(function(ue){var tn=ue.value,Fn=ue.done;if(!(Lt||ge)){if(qt=!1,Fn){ge=!0,xr<=0&&gt(null);return}xr++,Bt(tn,tr,rr),tr++,Xr()}}).catch(bn))}function rr(ue,tn){if(xr-=1,!Lt){if(ue)return bn(ue);if(ue===!1){ge=!0,Lt=!0;return}if(tn===Ne.default||ge&&xr<=0)return ge=!0,gt(null);Xr()}}function bn(ue){Lt||(qt=!1,ge=!0,gt(ue))}Xr()}tt.exports=Pe.default});y(He);var C=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Bt(De),ke=Bt(Ke),et=Bt(Le),Ge=Bt(He),Ot=Bt(W);function Bt(gt){return gt&&gt.__esModule?gt:{default:gt}}Pe.default=function(gt){return function(ge,Lt,qt){if(qt=(0,Ne.default)(qt),gt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ge)return qt(null);if((0,J.isAsyncGenerator)(ge))return(0,Ge.default)(ge,gt,Lt,qt);if((0,J.isAsyncIterable)(ge))return(0,Ge.default)(ge[Symbol.asyncIterator](),gt,Lt,qt);var xr=(0,ke.default)(ge),tr=!1,Xr=!1,rr=0,bn=!1;function ue(Fn,Fi){if(!Xr)if(rr-=1,Fn)tr=!0,qt(Fn);else if(Fn===!1)tr=!0,Xr=!0;else{if(Fi===Ot.default||tr&&rr<=0)return tr=!0,qt(null);bn||tn()}}function tn(){for(bn=!0;rr<gt&&!tr;){var Fn=xr();if(Fn===null){tr=!0,rr<=0&&qt(null);return}rr+=1,Lt(Fn.value,Fn.key,(0,et.default)(ue))}bn=!1}tn()}},tt.exports=Pe.default});y(C);var Ze=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ge(C),ke=Ge(J),et=Ge(Oe);function Ge(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Ot(Bt,gt,ge,Lt){return(0,Ne.default)(gt)(Bt,(0,ke.default)(ge),Lt)}Pe.default=(0,et.default)(Ot,4),tt.exports=Pe.default});y(Ze);var rt=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=et(Ze),ke=et(Oe);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt,gt){return(0,Ne.default)(Ot,1,Bt,gt)}Pe.default=(0,ke.default)(Ge,3),tt.exports=Pe.default});y(rt);var At=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(D),ke=et(rt);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt){return(0,Ne.default)(ke.default,Ot,Bt)}tt.exports=Pe.default}),Et=y(At),ne=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.args=[],this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return this.args=Ne,Et(this.tasks)},tt.prototype.tap=function(Pe,Ne){var ke=this;this.tasks.push(function(et){Ne.apply(void 0,p(ke.args)),et(null,Pe)})},tt}(),Q=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=ge(I),ke=ge(W),et=ge(Ze),Ge=ge(De),Ot=ge(Le),Bt=ge(J),gt=ge(Oe);function ge(tr){return tr&&tr.__esModule?tr:{default:tr}}function Lt(tr,Xr,rr){rr=(0,Ge.default)(rr);var bn=0,ue=0,tn=tr.length,Fn=!1;tn===0&&rr(null);function Fi(ki,ve){ki===!1&&(Fn=!0),Fn!==!0&&(ki?rr(ki):(++ue===tn||ve===ke.default)&&rr(null))}for(;bn<tn;bn++)Xr(tr[bn],bn,(0,Ot.default)(Fi))}function qt(tr,Xr,rr){return(0,et.default)(tr,Infinity,Xr,rr)}function xr(tr,Xr,rr){var bn=(0,Ne.default)(tr)?Lt:qt;return bn(tr,(0,Bt.default)(Xr),rr)}Pe.default=(0,gt.default)(xr,3),tt.exports=Pe.default});y(Q);var te=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(Q),ke=et(D);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt){return(0,ke.default)(Ne.default,Ot,Bt)}tt.exports=Pe.default}),Fe=y(te),ze=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.promise=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return Fe(this.tasks)},tt.prototype.tapPromise=function(Pe,Ne){var ke=this;this.tasks.push(function(et){return o(ke,void 0,void 0,function(){return m(this,function(Ge){switch(Ge.label){case 0:return[4,Ne()];case 1:return Ge.sent(),et(null,Pe),[2]}})})})},tt}(),St=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ot(De),ke=Ot(Le),et=Ot(J),Ge=Ot(Oe);function Ot(gt){return gt&&gt.__esModule?gt:{default:gt}}function Bt(gt,ge){if(ge=(0,Ne.default)(ge),!Array.isArray(gt))return ge(new Error("First argument to waterfall must be an array of functions"));if(!gt.length)return ge();var Lt=0;function qt(tr){var Xr=(0,et.default)(gt[Lt++]);Xr.apply(void 0,tr.concat([(0,ke.default)(xr)]))}function xr(tr){for(var Xr=[],rr=arguments.length-1;rr-- >0;)Xr[rr]=arguments[rr+1];if(tr!==!1){if(tr||Lt===gt.length)return ge.apply(void 0,[tr].concat(Xr));qt(Xr)}}qt([])}Pe.default=(0,Ge.default)(Bt),tt.exports=Pe.default}),ut=y(St),Qt=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return ut(this.tasks)},tt.prototype.tap=function(Pe,Ne){this.tasks.length===0?this.tasks.push(function(ke){var et=Ne();ke(et?null:!1,et)}):this.tasks.push(function(ke,et){var Ge=Ne();et(Ge?null:!1,Pe)})},tt}(),vr=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return Et(this.tasks)},tt.prototype.tap=function(Pe,Ne){this.tasks.push(function(ke){var et=Ne();ke(et,Pe)})},tt}()}).call(this,a("BBhR"))},"/SR7":function(A,v){A.exports.RADIUS=6378137,A.exports.FLATTENING=1/298.257223563,A.exports.POLAR_RADIUS=63567523142e-4},"/Uc5":function(A,v){},"/rul":function(A,v,a){var l=a("eTwl"),o=a("4xPW"),m=a("HZ3+"),g=200;function p(y,b){var I=this.__data__;if(I instanceof l){var P=I.__data__;if(!o||P.length<g-1)return P.push([y,b]),this.size=++I.size,this;I=this.__data__=new m(P)}return I.set(y,b),this.size=I.size,this}A.exports=p},"0D+y":function(A,v,a){var l=a("dG/y");function o(m,g){var p=m==null?0:m.length;return!!p&&l(m,g,0)>-1}A.exports=o},"0Qmp":function(A,v){function a(l,o,m){var g=-1,p=l.length;o<0&&(o=-o>p?0:p+o),m=m>p?p:m,m<0&&(m+=p),p=o>m?0:m-o>>>0,o>>>=0;for(var y=Array(p);++g<p;)y[g]=l[g+o];return y}A.exports=a},"0TsE":function(A,v,a){var l=a("SHe9").default,o=a("lGGA");function m(g,p){if(p&&(l(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(g)}A.exports=m,A.exports.__esModule=!0,A.exports.default=A.exports},"0eqD":function(A,v){},"0gSV":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.tagged=void 0;var l=a("GXnB"),o=a("Ztfv");function m(g,p){return function(y,b,I){var P=new l.Metadata(g,p);typeof I=="number"?o.tagParameter(y,b,I,P):o.tagProperty(y,b,P)}}v.tagged=m},"0kiv":function(A,v){function a(l){return function(o){return l==null?void 0:l[o]}}A.exports=a},"0uRJ":function(A,v){function a(l,o,m){return l===l&&(m!==void 0&&(l=l<=m?l:m),o!==void 0&&(l=l>=o?l:o)),l}A.exports=a},"1+Yy":function(A,v,a){var l=a("2l+f"),o=a("O0HO"),m=o(l);A.exports=m},"1ABj":function(A,v){function a(l,o){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},"1jvM":function(A,v){},"22n8":function(A,v,a){var l=a("hYDp"),o=a("Cm6F"),m=a("HPdX");function g(p){return typeof p.constructor=="function"&&!m(p)?l(o(p)):{}}A.exports=g},"24UC":function(A,v,a){var l=a("2QD8");A.exports=o;function o(I,P){switch(I&&I.type||null){case"FeatureCollection":return I.features=I.features.map(m(o,P)),I;case"GeometryCollection":return I.geometries=I.geometries.map(m(o,P)),I;case"Feature":return I.geometry=o(I.geometry,P),I;case"Polygon":case"MultiPolygon":return g(I,P);default:return I}}function m(I,P){return function(M){return I(M,P)}}function g(I,P){return I.type==="Polygon"?I.coordinates=p(I.coordinates,P):I.type==="MultiPolygon"&&(I.coordinates=I.coordinates.map(m(p,P))),I}function p(I,P){P=!!P,I[0]=y(I[0],P);for(var M=1;M<I.length;M++)I[M]=y(I[M],!P);return I}function y(I,P){return b(I)===P?I:I.reverse()}function b(I){return l.ring(I)>=0}},"2CCf":function(A,v,a){var l=a("qHbu"),o=l(Object,"create");A.exports=o},"2CY4":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiBindToService=v.getServiceIdentifierAsString=v.typeConstraint=v.namedConstraint=v.taggedConstraint=v.traverseAncerstors=v.decorate=v.id=v.MetadataReader=v.postConstruct=v.targetName=v.multiInject=v.unmanaged=v.optional=v.LazyServiceIdentifer=v.inject=v.named=v.tagged=v.injectable=v.ContainerModule=v.AsyncContainerModule=v.TargetTypeEnum=v.BindingTypeEnum=v.BindingScopeEnum=v.Container=v.METADATA_KEY=void 0;var l=a("jHQc");v.METADATA_KEY=l;var o=a("+mJv");Object.defineProperty(v,"Container",{enumerable:!0,get:function(){return o.Container}});var m=a("BU00");Object.defineProperty(v,"BindingScopeEnum",{enumerable:!0,get:function(){return m.BindingScopeEnum}}),Object.defineProperty(v,"BindingTypeEnum",{enumerable:!0,get:function(){return m.BindingTypeEnum}}),Object.defineProperty(v,"TargetTypeEnum",{enumerable:!0,get:function(){return m.TargetTypeEnum}});var g=a("AaJI");Object.defineProperty(v,"AsyncContainerModule",{enumerable:!0,get:function(){return g.AsyncContainerModule}}),Object.defineProperty(v,"ContainerModule",{enumerable:!0,get:function(){return g.ContainerModule}});var p=a("3puX");Object.defineProperty(v,"injectable",{enumerable:!0,get:function(){return p.injectable}});var y=a("YKQ/");Object.defineProperty(v,"tagged",{enumerable:!0,get:function(){return y.tagged}});var b=a("qLt1");Object.defineProperty(v,"named",{enumerable:!0,get:function(){return b.named}});var I=a("bs4i");Object.defineProperty(v,"inject",{enumerable:!0,get:function(){return I.inject}}),Object.defineProperty(v,"LazyServiceIdentifer",{enumerable:!0,get:function(){return I.LazyServiceIdentifer}});var P=a("Wrqe");Object.defineProperty(v,"optional",{enumerable:!0,get:function(){return P.optional}});var M=a("eySa");Object.defineProperty(v,"unmanaged",{enumerable:!0,get:function(){return M.unmanaged}});var z=a("Rp6z");Object.defineProperty(v,"multiInject",{enumerable:!0,get:function(){return z.multiInject}});var oe=a("dFqT");Object.defineProperty(v,"targetName",{enumerable:!0,get:function(){return oe.targetName}});var G=a("GShg");Object.defineProperty(v,"postConstruct",{enumerable:!0,get:function(){return G.postConstruct}});var ee=a("tWLo");Object.defineProperty(v,"MetadataReader",{enumerable:!0,get:function(){return ee.MetadataReader}});var pe=a("gbO8");Object.defineProperty(v,"id",{enumerable:!0,get:function(){return pe.id}});var J=a("Z23J");Object.defineProperty(v,"decorate",{enumerable:!0,get:function(){return J.decorate}});var se=a("fwlV");Object.defineProperty(v,"traverseAncerstors",{enumerable:!0,get:function(){return se.traverseAncerstors}}),Object.defineProperty(v,"taggedConstraint",{enumerable:!0,get:function(){return se.taggedConstraint}}),Object.defineProperty(v,"namedConstraint",{enumerable:!0,get:function(){return se.namedConstraint}}),Object.defineProperty(v,"typeConstraint",{enumerable:!0,get:function(){return se.typeConstraint}});var fe=a("qbsE");Object.defineProperty(v,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return fe.getServiceIdentifierAsString}});var X=a("ZWZa");Object.defineProperty(v,"multiBindToService",{enumerable:!0,get:function(){return X.multiBindToService}})},"2EVJ":function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\ufe0e\\ufe0f",y="\\u200d",b=RegExp("["+y+a+g+p+"]");function I(P){return b.test(P)}A.exports=I},"2GQb":function(A,v,a){var l=a("r/u4");function o(m){return m&&m.length?l(m):[]}A.exports=o},"2QD8":function(A,v,a){var l=a("/SR7");A.exports.geometry=o,A.exports.ring=g;function o(y){var b=0,I;switch(y.type){case"Polygon":return m(y.coordinates);case"MultiPolygon":for(I=0;I<y.coordinates.length;I++)b+=m(y.coordinates[I]);return b;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(I=0;I<y.geometries.length;I++)b+=o(y.geometries[I]);return b}}function m(y){var b=0;if(y&&y.length>0){b+=Math.abs(g(y[0]));for(var I=1;I<y.length;I++)b-=Math.abs(g(y[I]))}return b}function g(y){var b,I,P,M,z,oe,G,ee=0,pe=y.length;if(pe>2){for(G=0;G<pe;G++)G===pe-2?(M=pe-2,z=pe-1,oe=0):G===pe-1?(M=pe-1,z=0,oe=1):(M=G,z=G+1,oe=G+2),b=y[M],I=y[z],P=y[oe],ee+=(p(P[0])-p(b[0]))*Math.sin(p(I[1]));ee=ee*l.RADIUS*l.RADIUS/2}return ee}function p(y){return y*Math.PI/180}},"2i9f":function(A,v){function a(l,o){for(var m=-1,g=Array(l);++m<l;)g[m]=o(m);return g}A.exports=a},"2l+f":function(A,v,a){var l=a("ENOr"),o=a("Mn8k"),m=a("TNLb"),g=o?function(p,y){return o(p,"toString",{configurable:!0,enumerable:!1,value:l(y),writable:!0})}:m;A.exports=g},"2lNu":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l=Symbol.for("INJECTION");function o(b,I,P,M){function z(){return M&&!Reflect.hasMetadata(l,this,I)&&Reflect.defineMetadata(l,P(),this,I),Reflect.hasMetadata(l,this,I)?Reflect.getMetadata(l,this,I):P()}function oe(G){Reflect.defineMetadata(l,G,this,I)}Object.defineProperty(b,I,{configurable:!0,enumerable:!0,get:z,set:oe})}function m(b,I){return function(P){return function(M,z){var oe=function(){return b.get(P)};o(M,z,oe,I)}}}v.makePropertyInjectDecorator=m;function g(b,I){return function(P,M){return function(z,oe){var G=function(){return b.getNamed(P,M)};o(z,oe,G,I)}}}v.makePropertyInjectNamedDecorator=g;function p(b,I){return function(P,M,z){return function(oe,G){var ee=function(){return b.getTagged(P,M,z)};o(oe,G,ee,I)}}}v.makePropertyInjectTaggedDecorator=p;function y(b,I){return function(P){return function(M,z){var oe=function(){return b.getAll(P)};o(M,z,oe,I)}}}v.makePropertyMultiInjectDecorator=y},"2mg7":function(A,v){function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},"2uKD":function(A,v,a){var l=a("iThR"),o=a("0D+y"),m=a("idnf"),g=a("JYqP"),p=a("gzRe"),y=a("7+V3"),b=200;function I(P,M,z){var oe=-1,G=o,ee=P.length,pe=!0,J=[],se=J;if(z)pe=!1,G=m;else if(ee>=b){var fe=M?null:p(P);if(fe)return y(fe);pe=!1,G=g,se=new l}else se=M?[]:J;e:for(;++oe<ee;){var X=P[oe],Oe=M?M(X):X;if(X=z||X!==0?X:0,pe&&Oe===Oe){for(var D=se.length;D--;)if(se[D]===Oe)continue e;M&&se.push(Oe),J.push(X)}else G(se,Oe,z)||(se!==J&&se.push(Oe),J.push(X))}return J}A.exports=I},"31ZN":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.isStackOverflowExeption=void 0;var l=a("Z6CD");function o(m){return m instanceof RangeError||m.message===l.STACK_OVERFLOW}v.isStackOverflowExeption=o},"3DLV":function(A,v){function a(l,o,m){for(var g=m-1,p=l.length;++g<p;)if(l[g]===o)return g;return-1}A.exports=a},"3QtL":function(A,v){function a(l,o,m){switch(m.length){case 0:return l.call(o);case 1:return l.call(o,m[0]);case 2:return l.call(o,m[0],m[1]);case 3:return l.call(o,m[0],m[1],m[2])}return l.apply(o,m)}A.exports=a},"3fbM":function(A,v,a){var l;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(o,m,g,p){"use strict";var y=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,b=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),I=y||b,P=["","webkit","Moz","MS","ms","o"],M=I?"":m.createElement("div"),z="function",oe=Math.round,G=Math.abs,ee=Date.now;function pe(U,K,Me){return setTimeout(ot(U,Me),K)}function J(U,K,Me){return Array.isArray(U)?(se(U,Me[K],Me),!0):!1}function se(U,K,Me){var ct;if(!!U)if(U.forEach)U.forEach(K,Me);else if(U.length!==p)for(ct=0;ct<U.length;)K.call(Me,U[ct],ct,U),ct++;else for(ct in U)U.hasOwnProperty(ct)&&K.call(Me,U[ct],ct,U)}function fe(U,K,Me){var ct="DEPRECATED METHOD: "+K+`
`+Me+` AT 
`;return function(){var lr=new Error("get-stack-trace"),Ur=lr&&lr.stack?lr.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Un=o.console&&(o.console.warn||o.console.log);return Un&&Un.call(o.console,ct,Ur),U.apply(this,arguments)}}var X;typeof Object.assign!="function"?X=function(K){if(K===p||K===null)throw new TypeError("Cannot convert undefined or null to object");for(var Me=Object(K),ct=1;ct<arguments.length;ct++){var lr=arguments[ct];if(lr!==p&&lr!==null)for(var Ur in lr)lr.hasOwnProperty(Ur)&&(Me[Ur]=lr[Ur])}return Me}:X=Object.assign;var Oe=fe(function(K,Me,ct){for(var lr=Object.keys(Me),Ur=0;Ur<lr.length;)(!ct||ct&&K[lr[Ur]]===p)&&(K[lr[Ur]]=Me[lr[Ur]]),Ur++;return K},"extend","Use `assign`."),D=fe(function(K,Me){return Oe(K,Me,!0)},"merge","Use `assign`.");function De(U,K,Me){var ct=K.prototype,lr;lr=U.prototype=Object.create(ct),lr.constructor=U,lr._super=ct,Me&&X(lr,Me)}function ot(U,K){return function(){return U.apply(K,arguments)}}function Ke(U,K){return typeof U==z?U.apply(K&&K[0]||p,K):U}function Le(U,K){return U===p?K:U}function W(U,K,Me){se(rt(K),function(ct){U.addEventListener(ct,Me,!1)})}function He(U,K,Me){se(rt(K),function(ct){U.removeEventListener(ct,Me,!1)})}function C(U,K){for(;U;){if(U==K)return!0;U=U.parentNode}return!1}function Ze(U,K){return U.indexOf(K)>-1}function rt(U){return U.trim().split(/\s+/g)}function At(U,K,Me){if(U.indexOf&&!Me)return U.indexOf(K);for(var ct=0;ct<U.length;){if(Me&&U[ct][Me]==K||!Me&&U[ct]===K)return ct;ct++}return-1}function Et(U){return Array.prototype.slice.call(U,0)}function ne(U,K,Me){for(var ct=[],lr=[],Ur=0;Ur<U.length;){var Un=K?U[Ur][K]:U[Ur];At(lr,Un)<0&&ct.push(U[Ur]),lr[Ur]=Un,Ur++}return Me&&(K?ct=ct.sort(function(Xi,Li){return Xi[K]>Li[K]}):ct=ct.sort()),ct}function Q(U,K){for(var Me,ct,lr=K[0].toUpperCase()+K.slice(1),Ur=0;Ur<P.length;){if(Me=P[Ur],ct=Me?Me+lr:K,ct in U)return ct;Ur++}return p}var te=1;function Fe(){return te++}function ze(U){var K=U.ownerDocument||U;return K.defaultView||K.parentWindow||o}var St=/mobile|tablet|ip(ad|hone|od)|android/i,ut="ontouchstart"in o,Qt=Q(o,"PointerEvent")!==p,vr=ut&&St.test(navigator.userAgent),tt="touch",Pe="pen",Ne="mouse",ke="kinect",et=25,Ge=1,Ot=2,Bt=4,gt=8,ge=1,Lt=2,qt=4,xr=8,tr=16,Xr=Lt|qt,rr=xr|tr,bn=Xr|rr,ue=["x","y"],tn=["clientX","clientY"];function Fn(U,K){var Me=this;this.manager=U,this.callback=K,this.element=U.element,this.target=U.options.inputTarget,this.domHandler=function(ct){Ke(U.options.enable,[U])&&Me.handler(ct)},this.init()}Fn.prototype={handler:function(){},init:function(){this.evEl&&W(this.element,this.evEl,this.domHandler),this.evTarget&&W(this.target,this.evTarget,this.domHandler),this.evWin&&W(ze(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&He(this.element,this.evEl,this.domHandler),this.evTarget&&He(this.target,this.evTarget,this.domHandler),this.evWin&&He(ze(this.element),this.evWin,this.domHandler)}};function Fi(U){var K,Me=U.options.inputClass;return Me?K=Me:Qt?K=Wr:vr?K=Ci:ut?K=si:K=hi,new K(U,ki)}function ki(U,K,Me){var ct=Me.pointers.length,lr=Me.changedPointers.length,Ur=K&Ge&&ct-lr==0,Un=K&(Bt|gt)&&ct-lr==0;Me.isFirst=!!Ur,Me.isFinal=!!Un,Ur&&(U.session={}),Me.eventType=K,ve(U,Me),U.emit("hammer.input",Me),U.recognize(Me),U.session.prevInput=Me}function ve(U,K){var Me=U.session,ct=K.pointers,lr=ct.length;Me.firstInput||(Me.firstInput=wt(K)),lr>1&&!Me.firstMultiple?Me.firstMultiple=wt(K):lr===1&&(Me.firstMultiple=!1);var Ur=Me.firstInput,Un=Me.firstMultiple,cr=Un?Un.center:Ur.center,Xi=K.center=me(ct);K.timeStamp=ee(),K.deltaTime=K.timeStamp-Ur.timeStamp,K.angle=it(cr,Xi),K.distance=Nt(cr,Xi),Ye(Me,K),K.offsetDirection=Cr(K.deltaX,K.deltaY);var Li=Pn(K.deltaTime,K.deltaX,K.deltaY);K.overallVelocityX=Li.x,K.overallVelocityY=Li.y,K.overallVelocity=G(Li.x)>G(Li.y)?Li.x:Li.y,K.scale=Un?Rt(Un.pointers,ct):1,K.rotation=Un?Ce(Un.pointers,ct):0,K.maxPointers=Me.prevInput?K.pointers.length>Me.prevInput.maxPointers?K.pointers.length:Me.prevInput.maxPointers:K.pointers.length,vt(Me,K);var Gt=U.element;C(K.srcEvent.target,Gt)&&(Gt=K.srcEvent.target),K.target=Gt}function Ye(U,K){var Me=K.center,ct=U.offsetDelta||{},lr=U.prevDelta||{},Ur=U.prevInput||{};(K.eventType===Ge||Ur.eventType===Bt)&&(lr=U.prevDelta={x:Ur.deltaX||0,y:Ur.deltaY||0},ct=U.offsetDelta={x:Me.x,y:Me.y}),K.deltaX=lr.x+(Me.x-ct.x),K.deltaY=lr.y+(Me.y-ct.y)}function vt(U,K){var Me=U.lastInterval||K,ct=K.timeStamp-Me.timeStamp,lr,Ur,Un,cr;if(K.eventType!=gt&&(ct>et||Me.velocity===p)){var Xi=K.deltaX-Me.deltaX,Li=K.deltaY-Me.deltaY,Gt=Pn(ct,Xi,Li);Ur=Gt.x,Un=Gt.y,lr=G(Gt.x)>G(Gt.y)?Gt.x:Gt.y,cr=Cr(Xi,Li),U.lastInterval=K}else lr=Me.velocity,Ur=Me.velocityX,Un=Me.velocityY,cr=Me.direction;K.velocity=lr,K.velocityX=Ur,K.velocityY=Un,K.direction=cr}function wt(U){for(var K=[],Me=0;Me<U.pointers.length;)K[Me]={clientX:oe(U.pointers[Me].clientX),clientY:oe(U.pointers[Me].clientY)},Me++;return{timeStamp:ee(),pointers:K,center:me(K),deltaX:U.deltaX,deltaY:U.deltaY}}function me(U){var K=U.length;if(K===1)return{x:oe(U[0].clientX),y:oe(U[0].clientY)};for(var Me=0,ct=0,lr=0;lr<K;)Me+=U[lr].clientX,ct+=U[lr].clientY,lr++;return{x:oe(Me/K),y:oe(ct/K)}}function Pn(U,K,Me){return{x:K/U||0,y:Me/U||0}}function Cr(U,K){return U===K?ge:G(U)>=G(K)?U<0?Lt:qt:K<0?xr:tr}function Nt(U,K,Me){Me||(Me=ue);var ct=K[Me[0]]-U[Me[0]],lr=K[Me[1]]-U[Me[1]];return Math.sqrt(ct*ct+lr*lr)}function it(U,K,Me){Me||(Me=ue);var ct=K[Me[0]]-U[Me[0]],lr=K[Me[1]]-U[Me[1]];return Math.atan2(lr,ct)*180/Math.PI}function Ce(U,K){return it(K[1],K[0],tn)+it(U[1],U[0],tn)}function Rt(U,K){return Nt(K[0],K[1],tn)/Nt(U[0],U[1],tn)}var _t={mousedown:Ge,mousemove:Ot,mouseup:Bt},Tn="mousedown",Ve="mousemove mouseup";function hi(){this.evEl=Tn,this.evWin=Ve,this.pressed=!1,Fn.apply(this,arguments)}De(hi,Fn,{handler:function(K){var Me=_t[K.type];Me&Ge&&K.button===0&&(this.pressed=!0),Me&Ot&&K.which!==1&&(Me=Bt),!!this.pressed&&(Me&Bt&&(this.pressed=!1),this.callback(this.manager,Me,{pointers:[K],changedPointers:[K],pointerType:Ne,srcEvent:K}))}});var An={pointerdown:Ge,pointermove:Ot,pointerup:Bt,pointercancel:gt,pointerout:gt},xi={2:tt,3:Pe,4:Ne,5:ke},Bn="pointerdown",yi="pointermove pointerup pointercancel";!I&&o.MSPointerEvent&&!o.PointerEvent&&(Bn="MSPointerDown",yi="MSPointerMove MSPointerUp MSPointerCancel");function Wr(){this.evEl=Bn,this.evWin=yi,Fn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}De(Wr,Fn,{handler:function(K){var Me=this.store,ct=!1,lr=K.type.toLowerCase().replace("ms",""),Ur=An[lr],Un=xi[K.pointerType]||K.pointerType,cr=Un==tt,Xi=At(Me,K.pointerId,"pointerId");Ur&Ge&&(K.button===0||cr)?Xi<0&&(Me.push(K),Xi=Me.length-1):Ur&(Bt|gt)&&(ct=!0),!(Xi<0)&&(Me[Xi]=K,this.callback(this.manager,Ur,{pointers:Me,changedPointers:[K],pointerType:Un,srcEvent:K}),ct&&Me.splice(Xi,1))}});var Oi={touchstart:Ge,touchmove:Ot,touchend:Bt,touchcancel:gt},Oa="touchstart",Aa="touchstart touchmove touchend touchcancel";function Ui(){this.evTarget=Oa,this.evWin=Aa,this.started=!1,Fn.apply(this,arguments)}De(Ui,Fn,{handler:function(K){var Me=Oi[K.type];if(Me===Ge&&(this.started=!0),!!this.started){var ct=ea.call(this,K,Me);Me&(Bt|gt)&&ct[0].length-ct[1].length==0&&(this.started=!1),this.callback(this.manager,Me,{pointers:ct[0],changedPointers:ct[1],pointerType:tt,srcEvent:K})}}});function ea(U,K){var Me=Et(U.touches),ct=Et(U.changedTouches);return K&(Bt|gt)&&(Me=ne(Me.concat(ct),"identifier",!0)),[Me,ct]}var Ti={touchstart:Ge,touchmove:Ot,touchend:Bt,touchcancel:gt},_n="touchstart touchmove touchend touchcancel";function Ci(){this.evTarget=_n,this.targetIds={},Fn.apply(this,arguments)}De(Ci,Fn,{handler:function(K){var Me=Ti[K.type],ct=qn.call(this,K,Me);!ct||this.callback(this.manager,Me,{pointers:ct[0],changedPointers:ct[1],pointerType:tt,srcEvent:K})}});function qn(U,K){var Me=Et(U.touches),ct=this.targetIds;if(K&(Ge|Ot)&&Me.length===1)return ct[Me[0].identifier]=!0,[Me,Me];var lr,Ur,Un=Et(U.changedTouches),cr=[],Xi=this.target;if(Ur=Me.filter(function(Li){return C(Li.target,Xi)}),K===Ge)for(lr=0;lr<Ur.length;)ct[Ur[lr].identifier]=!0,lr++;for(lr=0;lr<Un.length;)ct[Un[lr].identifier]&&cr.push(Un[lr]),K&(Bt|gt)&&delete ct[Un[lr].identifier],lr++;if(!!cr.length)return[ne(Ur.concat(cr),"identifier",!0),cr]}var Wi=2500,ta=25;function si(){Fn.apply(this,arguments);var U=ot(this.handler,this);this.touch=new Ci(this.manager,U),this.mouse=new hi(this.manager,U),this.primaryTouch=null,this.lastTouches=[]}De(si,Fn,{handler:function(K,Me,ct){var lr=ct.pointerType==tt,Ur=ct.pointerType==Ne;if(!(Ur&&ct.sourceCapabilities&&ct.sourceCapabilities.firesTouchEvents)){if(lr)li.call(this,Me,ct);else if(Ur&&di.call(this,ct))return;this.callback(K,Me,ct)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function li(U,K){U&Ge?(this.primaryTouch=K.changedPointers[0].identifier,Za.call(this,K)):U&(Bt|gt)&&Za.call(this,K)}function Za(U){var K=U.changedPointers[0];if(K.identifier===this.primaryTouch){var Me={x:K.clientX,y:K.clientY};this.lastTouches.push(Me);var ct=this.lastTouches,lr=function(){var Ur=ct.indexOf(Me);Ur>-1&&ct.splice(Ur,1)};setTimeout(lr,Wi)}}function di(U){for(var K=U.srcEvent.clientX,Me=U.srcEvent.clientY,ct=0;ct<this.lastTouches.length;ct++){var lr=this.lastTouches[ct],Ur=Math.abs(K-lr.x),Un=Math.abs(Me-lr.y);if(Ur<=ta&&Un<=ta)return!0}return!1}var Ha=I?p:Q(M.style,"touchAction"),Va=Ha!==p,ra="compute",xa="auto",va="manipulation",Vi="none",ia="pan-x",kn="pan-y",Ka=Ia();function Pa(U,K){this.manager=U,this.set(K)}Pa.prototype={set:function(U){U==ra&&(U=this.compute()),Va&&this.manager.element.style&&Ka[U]&&(this.manager.element.style[Ha]=U),this.actions=U.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var U=[];return se(this.manager.recognizers,function(K){Ke(K.options.enable,[K])&&(U=U.concat(K.getTouchAction()))}),Qi(U.join(" "))},preventDefaults:function(U){var K=U.srcEvent,Me=U.offsetDirection;if(this.manager.session.prevented){K.preventDefault();return}var ct=this.actions,lr=Ze(ct,Vi)&&!Ka[Vi],Ur=Ze(ct,kn)&&!Ka[kn],Un=Ze(ct,ia)&&!Ka[ia];if(lr){var cr=U.pointers.length===1,Xi=U.distance<2,Li=U.deltaTime<250;if(cr&&Xi&&Li)return}if(!(Un&&Ur)&&(lr||Ur&&Me&Xr||Un&&Me&rr))return this.preventSrc(K)},preventSrc:function(U){this.manager.session.prevented=!0,U.preventDefault()}};function Qi(U){if(Ze(U,Vi))return Vi;var K=Ze(U,ia),Me=Ze(U,kn);return K&&Me?Vi:K||Me?K?ia:kn:Ze(U,va)?va:xa}function Ia(){if(!Va)return!1;var U={};if(I)return U;var K=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Me){U[Me]=K?o.CSS.supports("touch-action",Me):!0}),U}var Ma=1,ji=2,aa=4,vi=8,ei=vi,oa=16,$i=32;function Gi(U){this.options=X({},this.defaults,U||{}),this.id=Fe(),this.manager=null,this.options.enable=Le(this.options.enable,!0),this.state=Ma,this.simultaneous={},this.requireFail=[]}Gi.prototype={defaults:{},set:function(U){return X(this.options,U),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(U){if(J(U,"recognizeWith",this))return this;var K=this.simultaneous;return U=ka(U,this),K[U.id]||(K[U.id]=U,U.recognizeWith(this)),this},dropRecognizeWith:function(U){return J(U,"dropRecognizeWith",this)?this:(U=ka(U,this),delete this.simultaneous[U.id],this)},requireFailure:function(U){if(J(U,"requireFailure",this))return this;var K=this.requireFail;return U=ka(U,this),At(K,U)===-1&&(K.push(U),U.requireFailure(this)),this},dropRequireFailure:function(U){if(J(U,"dropRequireFailure",this))return this;U=ka(U,this);var K=At(this.requireFail,U);return K>-1&&this.requireFail.splice(K,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(U){return!!this.simultaneous[U.id]},emit:function(U){var K=this,Me=this.state;function ct(lr){K.manager.emit(lr,U)}Me<vi&&ct(K.options.event+Ji(Me)),ct(K.options.event),U.additionalEvent&&ct(U.additionalEvent),Me>=vi&&ct(K.options.event+Ji(Me))},tryEmit:function(U){if(this.canEmit())return this.emit(U);this.state=$i},canEmit:function(){for(var U=0;U<this.requireFail.length;){if(!(this.requireFail[U].state&($i|Ma)))return!1;U++}return!0},recognize:function(U){var K=X({},U);if(!Ke(this.options.enable,[this,K])){this.reset(),this.state=$i;return}this.state&(ei|oa|$i)&&(this.state=Ma),this.state=this.process(K),this.state&(ji|aa|vi|oa)&&this.tryEmit(K)},process:function(U){},getTouchAction:function(){},reset:function(){}};function Ji(U){return U&oa?"cancel":U&vi?"end":U&aa?"move":U&ji?"start":""}function pa(U){return U==tr?"down":U==xr?"up":U==Lt?"left":U==qt?"right":""}function ka(U,K){var Me=K.manager;return Me?Me.get(U):U}function ma(){Gi.apply(this,arguments)}De(ma,Gi,{defaults:{pointers:1},attrTest:function(U){var K=this.options.pointers;return K===0||U.pointers.length===K},process:function(U){var K=this.state,Me=U.eventType,ct=K&(ji|aa),lr=this.attrTest(U);return ct&&(Me&gt||!lr)?K|oa:ct||lr?Me&Bt?K|vi:K&ji?K|aa:ji:$i}});function Bi(){ma.apply(this,arguments),this.pX=null,this.pY=null}De(Bi,ma,{defaults:{event:"pan",threshold:10,pointers:1,direction:bn},getTouchAction:function(){var U=this.options.direction,K=[];return U&Xr&&K.push(kn),U&rr&&K.push(ia),K},directionTest:function(U){var K=this.options,Me=!0,ct=U.distance,lr=U.direction,Ur=U.deltaX,Un=U.deltaY;return lr&K.direction||(K.direction&Xr?(lr=Ur===0?ge:Ur<0?Lt:qt,Me=Ur!=this.pX,ct=Math.abs(U.deltaX)):(lr=Un===0?ge:Un<0?xr:tr,Me=Un!=this.pY,ct=Math.abs(U.deltaY))),U.direction=lr,Me&&ct>K.threshold&&lr&K.direction},attrTest:function(U){return ma.prototype.attrTest.call(this,U)&&(this.state&ji||!(this.state&ji)&&this.directionTest(U))},emit:function(U){this.pX=U.deltaX,this.pY=U.deltaY;var K=pa(U.direction);K&&(U.additionalEvent=this.options.event+K),this._super.emit.call(this,U)}});function Na(){ma.apply(this,arguments)}De(Na,ma,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Vi]},attrTest:function(U){return this._super.attrTest.call(this,U)&&(Math.abs(U.scale-1)>this.options.threshold||this.state&ji)},emit:function(U){if(U.scale!==1){var K=U.scale<1?"in":"out";U.additionalEvent=this.options.event+K}this._super.emit.call(this,U)}});function pi(){Gi.apply(this,arguments),this._timer=null,this._input=null}De(pi,Gi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xa]},process:function(U){var K=this.options,Me=U.pointers.length===K.pointers,ct=U.distance<K.threshold,lr=U.deltaTime>K.time;if(this._input=U,!ct||!Me||U.eventType&(Bt|gt)&&!lr)this.reset();else if(U.eventType&Ge)this.reset(),this._timer=pe(function(){this.state=ei,this.tryEmit()},K.time,this);else if(U.eventType&Bt)return ei;return $i},reset:function(){clearTimeout(this._timer)},emit:function(U){this.state===ei&&(U&&U.eventType&Bt?this.manager.emit(this.options.event+"up",U):(this._input.timeStamp=ee(),this.manager.emit(this.options.event,this._input)))}});function zi(){ma.apply(this,arguments)}De(zi,ma,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Vi]},attrTest:function(U){return this._super.attrTest.call(this,U)&&(Math.abs(U.rotation)>this.options.threshold||this.state&ji)}});function Mi(){ma.apply(this,arguments)}De(Mi,ma,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Xr|rr,pointers:1},getTouchAction:function(){return Bi.prototype.getTouchAction.call(this)},attrTest:function(U){var K=this.options.direction,Me;return K&(Xr|rr)?Me=U.overallVelocity:K&Xr?Me=U.overallVelocityX:K&rr&&(Me=U.overallVelocityY),this._super.attrTest.call(this,U)&&K&U.offsetDirection&&U.distance>this.options.threshold&&U.maxPointers==this.options.pointers&&G(Me)>this.options.velocity&&U.eventType&Bt},emit:function(U){var K=pa(U.offsetDirection);K&&this.manager.emit(this.options.event+K,U),this.manager.emit(this.options.event,U)}});function Yn(){Gi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}De(Yn,Gi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[va]},process:function(U){var K=this.options,Me=U.pointers.length===K.pointers,ct=U.distance<K.threshold,lr=U.deltaTime<K.time;if(this.reset(),U.eventType&Ge&&this.count===0)return this.failTimeout();if(ct&&lr&&Me){if(U.eventType!=Bt)return this.failTimeout();var Ur=this.pTime?U.timeStamp-this.pTime<K.interval:!0,Un=!this.pCenter||Nt(this.pCenter,U.center)<K.posThreshold;this.pTime=U.timeStamp,this.pCenter=U.center,!Un||!Ur?this.count=1:this.count+=1,this._input=U;var cr=this.count%K.taps;if(cr===0)return this.hasRequireFailures()?(this._timer=pe(function(){this.state=ei,this.tryEmit()},K.interval,this),ji):ei}return $i},failTimeout:function(){return this._timer=pe(function(){this.state=$i},this.options.interval,this),$i},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ei&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function bi(U,K){return K=K||{},K.recognizers=Le(K.recognizers,bi.defaults.preset),new Qa(U,K)}bi.VERSION="2.0.7",bi.defaults={domEvents:!1,touchAction:ra,enable:!0,inputTarget:null,inputClass:null,preset:[[zi,{enable:!1}],[Na,{enable:!1},["rotate"]],[Mi,{direction:Xr}],[Bi,{direction:Xr},["swipe"]],[Yn],[Yn,{event:"doubletap",taps:2},["tap"]],[pi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var sa=1,Ra=2;function Qa(U,K){this.options=X({},bi.defaults,K||{}),this.options.inputTarget=this.options.inputTarget||U,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=U,this.input=Fi(this),this.touchAction=new Pa(this,this.options.touchAction),ce(this,!0),se(this.options.recognizers,function(Me){var ct=this.add(new Me[0](Me[1]));Me[2]&&ct.recognizeWith(Me[2]),Me[3]&&ct.requireFailure(Me[3])},this)}Qa.prototype={set:function(U){return X(this.options,U),U.touchAction&&this.touchAction.update(),U.inputTarget&&(this.input.destroy(),this.input.target=U.inputTarget,this.input.init()),this},stop:function(U){this.session.stopped=U?Ra:sa},recognize:function(U){var K=this.session;if(!K.stopped){this.touchAction.preventDefaults(U);var Me,ct=this.recognizers,lr=K.curRecognizer;(!lr||lr&&lr.state&ei)&&(lr=K.curRecognizer=null);for(var Ur=0;Ur<ct.length;)Me=ct[Ur],K.stopped!==Ra&&(!lr||Me==lr||Me.canRecognizeWith(lr))?Me.recognize(U):Me.reset(),!lr&&Me.state&(ji|aa|vi)&&(lr=K.curRecognizer=Me),Ur++}},get:function(U){if(U instanceof Gi)return U;for(var K=this.recognizers,Me=0;Me<K.length;Me++)if(K[Me].options.event==U)return K[Me];return null},add:function(U){if(J(U,"add",this))return this;var K=this.get(U.options.event);return K&&this.remove(K),this.recognizers.push(U),U.manager=this,this.touchAction.update(),U},remove:function(U){if(J(U,"remove",this))return this;if(U=this.get(U),U){var K=this.recognizers,Me=At(K,U);Me!==-1&&(K.splice(Me,1),this.touchAction.update())}return this},on:function(U,K){if(U!==p&&K!==p){var Me=this.handlers;return se(rt(U),function(ct){Me[ct]=Me[ct]||[],Me[ct].push(K)}),this}},off:function(U,K){if(U!==p){var Me=this.handlers;return se(rt(U),function(ct){K?Me[ct]&&Me[ct].splice(At(Me[ct],K),1):delete Me[ct]}),this}},emit:function(U,K){this.options.domEvents&&be(U,K);var Me=this.handlers[U]&&this.handlers[U].slice();if(!(!Me||!Me.length)){K.type=U,K.preventDefault=function(){K.srcEvent.preventDefault()};for(var ct=0;ct<Me.length;)Me[ct](K),ct++}},destroy:function(){this.element&&ce(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ce(U,K){var Me=U.element;if(!!Me.style){var ct;se(U.options.cssProps,function(lr,Ur){ct=Q(Me.style,Ur),K?(U.oldCssProps[ct]=Me.style[ct],Me.style[ct]=lr):Me.style[ct]=U.oldCssProps[ct]||""}),K||(U.oldCssProps={})}}function be(U,K){if(!I){var Me=m.createEvent("Event");Me.initEvent(U,!0,!0),Me.gesture=K,K.target.dispatchEvent(Me)}}if(!I){X(bi,{INPUT_START:Ge,INPUT_MOVE:Ot,INPUT_END:Bt,INPUT_CANCEL:gt,STATE_POSSIBLE:Ma,STATE_BEGAN:ji,STATE_CHANGED:aa,STATE_ENDED:vi,STATE_RECOGNIZED:ei,STATE_CANCELLED:oa,STATE_FAILED:$i,DIRECTION_NONE:ge,DIRECTION_LEFT:Lt,DIRECTION_RIGHT:qt,DIRECTION_UP:xr,DIRECTION_DOWN:tr,DIRECTION_HORIZONTAL:Xr,DIRECTION_VERTICAL:rr,DIRECTION_ALL:bn,Manager:Qa,Input:Fn,TouchAction:Pa,TouchInput:Ci,MouseInput:hi,PointerEventInput:Wr,TouchMouseInput:si,SingleTouchInput:Ui,Recognizer:Gi,AttrRecognizer:ma,Tap:Yn,Pan:Bi,Swipe:Mi,Pinch:Na,Rotate:zi,Press:pi,on:W,off:He,each:se,merge:D,extend:Oe,assign:X,inherit:De,bindFn:ot,prefixed:Q});var Qe=typeof window!="undefined"?window:typeof self!="undefined"?self:{};Qe.Hammer=bi,l=function(){return bi}.call(v,a,v,A),l!==p&&(A.exports=l)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},"3m6h":function(A,v,a){var l=a("j2Pk"),o=a("Pfvu"),m=Object.prototype,g=m.hasOwnProperty,p=m.propertyIsEnumerable,y=l(function(){return arguments}())?l:function(b){return o(b)&&g.call(b,"callee")&&!p.call(b,"callee")};A.exports=y},"3puX":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.injectable=void 0;var l=a("Z6CD"),o=a("jHQc");function m(){return function(g){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,g))throw new Error(l.DUPLICATED_INJECTABLE_DECORATOR);var p=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,g)||[];return Reflect.defineMetadata(o.PARAM_TYPES,p,g),g}}v.injectable=m},"3y02":function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\ufe0e\\ufe0f",y="["+a+"]",b="["+g+"]",I="\\ud83c[\\udffb-\\udfff]",P="(?:"+b+"|"+I+")",M="[^"+a+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",oe="[\\ud800-\\udbff][\\udc00-\\udfff]",G="\\u200d",ee=P+"?",pe="["+p+"]?",J="(?:"+G+"(?:"+[M,z,oe].join("|")+")"+pe+ee+")*",se=pe+ee+J,fe="(?:"+[M+b+"?",b,z,oe,y].join("|")+")",X=RegExp(I+"(?="+I+")|"+fe+se,"g");function Oe(D){return D.match(X)||[]}A.exports=Oe},"406g":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingOnSyntax=void 0;var l=a("z4Hk"),o=function(){function m(g){this._binding=g}return m.prototype.onActivation=function(g){return this._binding.onActivation=g,new l.BindingWhenSyntax(this._binding)},m}();v.BindingOnSyntax=o},"49Qw":function(A,v){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function l(o){return a.test(o)}A.exports=l},"4cb6":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiBindToService=v.getServiceIdentifierAsString=v.typeConstraint=v.namedConstraint=v.taggedConstraint=v.traverseAncerstors=v.decorate=v.id=v.MetadataReader=v.postConstruct=v.targetName=v.multiInject=v.unmanaged=v.optional=v.LazyServiceIdentifer=v.inject=v.named=v.tagged=v.injectable=v.ContainerModule=v.AsyncContainerModule=v.TargetTypeEnum=v.BindingTypeEnum=v.BindingScopeEnum=v.Container=v.METADATA_KEY=void 0;var l=a("xfSm");v.METADATA_KEY=l;var o=a("9Fde");Object.defineProperty(v,"Container",{enumerable:!0,get:function(){return o.Container}});var m=a("FV85");Object.defineProperty(v,"BindingScopeEnum",{enumerable:!0,get:function(){return m.BindingScopeEnum}}),Object.defineProperty(v,"BindingTypeEnum",{enumerable:!0,get:function(){return m.BindingTypeEnum}}),Object.defineProperty(v,"TargetTypeEnum",{enumerable:!0,get:function(){return m.TargetTypeEnum}});var g=a("dxzI");Object.defineProperty(v,"AsyncContainerModule",{enumerable:!0,get:function(){return g.AsyncContainerModule}}),Object.defineProperty(v,"ContainerModule",{enumerable:!0,get:function(){return g.ContainerModule}});var p=a("cZ5Q");Object.defineProperty(v,"injectable",{enumerable:!0,get:function(){return p.injectable}});var y=a("0gSV");Object.defineProperty(v,"tagged",{enumerable:!0,get:function(){return y.tagged}});var b=a("ZzCi");Object.defineProperty(v,"named",{enumerable:!0,get:function(){return b.named}});var I=a("Yk9n");Object.defineProperty(v,"inject",{enumerable:!0,get:function(){return I.inject}}),Object.defineProperty(v,"LazyServiceIdentifer",{enumerable:!0,get:function(){return I.LazyServiceIdentifer}});var P=a("jYx5");Object.defineProperty(v,"optional",{enumerable:!0,get:function(){return P.optional}});var M=a("n2J3");Object.defineProperty(v,"unmanaged",{enumerable:!0,get:function(){return M.unmanaged}});var z=a("jIg/");Object.defineProperty(v,"multiInject",{enumerable:!0,get:function(){return z.multiInject}});var oe=a("oaX6");Object.defineProperty(v,"targetName",{enumerable:!0,get:function(){return oe.targetName}});var G=a("Sk89");Object.defineProperty(v,"postConstruct",{enumerable:!0,get:function(){return G.postConstruct}});var ee=a("wnjb");Object.defineProperty(v,"MetadataReader",{enumerable:!0,get:function(){return ee.MetadataReader}});var pe=a("d9O0");Object.defineProperty(v,"id",{enumerable:!0,get:function(){return pe.id}});var J=a("Ztfv");Object.defineProperty(v,"decorate",{enumerable:!0,get:function(){return J.decorate}});var se=a("RR/i");Object.defineProperty(v,"traverseAncerstors",{enumerable:!0,get:function(){return se.traverseAncerstors}}),Object.defineProperty(v,"taggedConstraint",{enumerable:!0,get:function(){return se.taggedConstraint}}),Object.defineProperty(v,"namedConstraint",{enumerable:!0,get:function(){return se.namedConstraint}}),Object.defineProperty(v,"typeConstraint",{enumerable:!0,get:function(){return se.typeConstraint}});var fe=a("ujMp");Object.defineProperty(v,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return fe.getServiceIdentifierAsString}});var X=a("78VC");Object.defineProperty(v,"multiBindToService",{enumerable:!0,get:function(){return X.multiBindToService}})},"4kj+":function(A,v){},"4xPW":function(A,v,a){var l=a("qHbu"),o=a("7zvB"),m=l(o,"Map");A.exports=m},"5/ob":function(A,v){function a(l,o,m){var g=-1,p=l.length;o<0&&(o=-o>p?0:p+o),m=m>p?p:m,m<0&&(m+=p),p=o>m?0:m-o>>>0,o>>>=0;for(var y=Array(p);++g<p;)y[g]=l[g+o];return y}A.exports=a},"55HP":function(A,v){function a(l,o){return l==null?void 0:l[o]}A.exports=a},"5EPH":function(A,v,a){var l=a("eTwl");function o(){this.__data__=new l,this.size=0}A.exports=o},"5OUF":function(A,v,a){var l=a("2i9f"),o=a("3m6h"),m=a("sHph"),g=a("cyxd"),p=a("8yjT"),y=a("UXsw"),b=Object.prototype,I=b.hasOwnProperty;function P(M,z){var oe=m(M),G=!oe&&o(M),ee=!oe&&!G&&g(M),pe=!oe&&!G&&!ee&&y(M),J=oe||G||ee||pe,se=J?l(M.length,String):[],fe=se.length;for(var X in M)(z||I.call(M,X))&&!(J&&(X=="length"||ee&&(X=="offset"||X=="parent")||pe&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||p(X,fe)))&&se.push(X);return se}A.exports=P},"5Yrg":function(A,v,a){var l=a("tpVm"),o=a("xT0P"),m=o(function(g,p,y){l(g,p,y)});A.exports=m},"623A":function(A,v,a){"use strict";(function(l,o){A.exports=o()})(this,function(){function l(M){var z=[];return M.AMapUI&&z.push(o(M.AMapUI)),M.Loca&&z.push(m(M.Loca)),Promise.all(z)}function o(M){return new Promise(function(z,oe){var G=[];if(M.plugins)for(var ee=0;ee<M.plugins.length;ee+=1)p.AMapUI.plugins.indexOf(M.plugins[ee])==-1&&G.push(M.plugins[ee]);if(y.AMapUI===g.failed)oe("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(y.AMapUI===g.notload){y.AMapUI=g.loading,p.AMapUI.version=M.version||p.AMapUI.version,ee=p.AMapUI.version;var pe=document.body||document.head,J=document.createElement("script");J.type="text/javascript",J.src="https://webapi.amap.com/ui/"+ee+"/main.js",J.onerror=function(se){y.AMapUI=g.failed,oe("\u8BF7\u6C42 AMapUI \u5931\u8D25")},J.onload=function(){if(y.AMapUI=g.loaded,G.length)window.AMapUI.loadUI(G,function(){for(var se=0,fe=G.length;se<fe;se++){var X=G[se].split("/").slice(-1)[0];window.AMapUI[X]=arguments[se]}for(z();b.AMapUI.length;)b.AMapUI.splice(0,1)[0]()});else for(z();b.AMapUI.length;)b.AMapUI.splice(0,1)[0]()},pe.appendChild(J)}else y.AMapUI===g.loaded?M.version&&M.version!==p.AMapUI.version?oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):G.length?window.AMapUI.loadUI(G,function(){for(var se=0,fe=G.length;se<fe;se++){var X=G[se].split("/").slice(-1)[0];window.AMapUI[X]=arguments[se]}z()}):z():M.version&&M.version!==p.AMapUI.version?oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):b.AMapUI.push(function(se){se?oe(se):G.length?window.AMapUI.loadUI(G,function(){for(var fe=0,X=G.length;fe<X;fe++){var Oe=G[fe].split("/").slice(-1)[0];window.AMapUI[Oe]=arguments[fe]}z()}):z()})})}function m(M){return new Promise(function(z,oe){if(p.AMap.version.startsWith("2.0"))oe("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(y.Loca===g.failed)oe("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(y.Loca===g.notload){y.Loca=g.loading,p.Loca.version=M.version||p.Loca.version;var G=p.Loca.version,ee=p.key,pe=document.body||document.head,J=document.createElement("script");J.type="text/javascript",J.src="https://webapi.amap.com/loca?v="+G+"&key="+ee,J.onerror=function(se){y.Loca=g.failed,oe("\u8BF7\u6C42 AMapUI \u5931\u8D25")},J.onload=function(){for(y.Loca=g.loaded,z();b.Loca.length;)b.Loca.splice(0,1)[0]()},pe.appendChild(J)}else y.Loca===g.loaded?M.version&&M.version!==p.Loca.version?oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):z():M.version&&M.version!==p.Loca.version?oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):b.Loca.push(function(se){se?oe(se):oe()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var g;(function(M){M.notload="notload",M.loading="loading",M.loaded="loaded",M.failed="failed"})(g||(g={}));var p={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},y={AMap:g.notload,AMapUI:g.notload,Loca:g.notload},b={AMap:[],AMapUI:[],Loca:[]},I=[],P=function(M){typeof M=="function"&&(y.AMap===g.loaded?M(window.AMap):I.push(M))};return{load:function(M){return new Promise(function(z,oe){if(y.AMap==g.failed)oe("");else if(y.AMap==g.notload){var G=M.key,ee=M.version,pe=M.plugins;G?(window.AMap&&location.host!=="lbs.amap.com"&&oe("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),p.key=G,p.AMap.version=ee||p.AMap.version,p.AMap.plugins=pe||p.AMap.plugins,y.AMap=g.loading,ee=document.body||document.head,window.___onAPILoaded=function(se){if(delete window.___onAPILoaded,se)y.AMap=g.failed,oe(se);else for(y.AMap=g.loaded,l(M).then(function(){z(window.AMap)}).catch(oe);I.length;)I.splice(0,1)[0]()},pe=document.createElement("script"),pe.type="text/javascript",pe.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+p.AMap.version+"&key="+G+"&plugin="+p.AMap.plugins.join(","),pe.onerror=function(se){y.AMap=g.failed,oe(se)},ee.appendChild(pe)):oe("\u8BF7\u586B\u5199key")}else if(y.AMap==g.loaded)if(M.key&&M.key!==p.key)oe("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(M.version&&M.version!==p.AMap.version)oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(G=[],M.plugins)for(ee=0;ee<M.plugins.length;ee+=1)p.AMap.plugins.indexOf(M.plugins[ee])==-1&&G.push(M.plugins[ee]);G.length?window.AMap.plugin(G,function(){l(M).then(function(){z(window.AMap)}).catch(oe)}):l(M).then(function(){z(window.AMap)}).catch(oe)}else if(M.key&&M.key!==p.key)oe("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(M.version&&M.version!==p.AMap.version)oe("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var J=[];if(M.plugins)for(ee=0;ee<M.plugins.length;ee+=1)p.AMap.plugins.indexOf(M.plugins[ee])==-1&&J.push(M.plugins[ee]);P(function(){J.length?window.AMap.plugin(J,function(){l(M).then(function(){z(window.AMap)}).catch(oe)}):l(M).then(function(){z(window.AMap)}).catch(oe)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,p={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},y={AMap:g.notload,AMapUI:g.notload,Loca:g.notload},b={AMap:[],AMapUI:[],Loca:[]}}}})},"67RC":function(A,v,a){var l=a("rSfh"),o=a("JXFl");function m(g,p,y){(y!==void 0&&!o(g[p],y)||y===void 0&&!(p in g))&&l(g,p,y)}A.exports=m},"681X":function(A,v){function a(l){return this.__data__.get(l)}A.exports=a},"6AGu":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingInSyntax=void 0;var l=a("FV85"),o=a("LKzl"),m=function(){function g(p){this._binding=p}return g.prototype.inRequestScope=function(){return this._binding.scope=l.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},g.prototype.inSingletonScope=function(){return this._binding.scope=l.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},g.prototype.inTransientScope=function(){return this._binding.scope=l.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},g}();v.BindingInSyntax=m},"6NqC":function(A,v){},"6a/L":function(A,v,a){var l=a("Pir4");function o(m,g){var p=this.__data__,y=l(p,m);return y<0?(++this.size,p.push([m,g])):p[y][1]=g,this}A.exports=o},"7+V3":function(A,v){function a(l){var o=-1,m=Array(l.size);return l.forEach(function(g){m[++o]=g}),m}A.exports=a},"78VC":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiBindToService=void 0;var l=function(o){return function(m){return function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];return g.forEach(function(y){return o.bind(y).toService(m)})}}};v.multiBindToService=l},"7JgH":function(A,v,a){var l=a("elp8"),o=a("8Dog"),m="[object AsyncFunction]",g="[object Function]",p="[object GeneratorFunction]",y="[object Proxy]";function b(I){if(!o(I))return!1;var P=l(I);return P==g||P==p||P==m||P==y}A.exports=b},"7W2i":function(A,v,a){var l=a("SksO");function o(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&l(m,g)}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},"7om2":function(A,v,a){var l=a("+3sx"),o=a("tdAR"),m=a("eHdO"),g=o?function(p,y){return o(p,"toString",{configurable:!0,enumerable:!1,value:l(y),writable:!0})}:m;A.exports=g},"7tSx":function(A,v){function a(l,o,m,g){!m||Object.defineProperty(l,o,{enumerable:m.enumerable,configurable:m.configurable,writable:m.writable,value:m.initializer?m.initializer.call(g):void 0})}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},"7zvB":function(A,v,a){var l=a("zsLF"),o=typeof self=="object"&&self&&self.Object===Object&&self,m=l||o||Function("return this")();A.exports=m},"8/Fi":function(A,v,a){"use strict";var l=a("J4zp"),o=a.n(l),m=a("zxI2"),g=a.n(m),p=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function y(Ze){return p.indexOf(Ze)}var b=2,I=4,P=64,M=128,z=256,oe=512,G=8192,ee=16384,pe=32768,J=32768*2,se=131072,fe=262144,X=524288,Oe=1048576,D=2097152,De=4194304,ot=8388608,Ke=16777216,Le=16777216*2;function W(Ze,rt){return Ze=g()(Math.floor(Ze),0,255),rt=g()(Math.floor(rt),0,255),256*Ze+rt}function He(Ze){var rt=Ze.color,At=Ze.radius,Et=Ze.tileX,ne=Ze.tileY,Q=Ze.shape,te=Ze.opacity,Fe=Ze.stroke,ze=Ze.strokeWidth,St=Ze.strokeOpacity,ut=[],Qt=[],vr=[],tt=[W(rt[0],rt[1]),W(rt[2],rt[3])],Pe=[W(Fe[0],Fe[1]),W(Fe[2],Fe[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Ne){var ke=o()(Ne,2),et=ke[0],Ge=ke[1];ut.push([].concat(tt,[(et+1)*ot+(Ge+1)*D+y(Q)*se+At,(Et+512)*X+(ne+512)*P])),Qt.push([].concat(Pe,[ze,St])),vr.push([te,0,0,0])}),{packedBuffer:ut,packedBuffer2:Qt,packedBuffer3:vr}}function C(Ze,rt){if(Ze===0&&!rt)return 0;if(Ze===1&&rt)return 4294967295;var At=rt?1:0,Et=Math.floor(Ze*127);return Et*Le+At*Ke+Et*se+At*J+Et*oe+At*z+Et*b+At}},"84Z5":function(A,v,a){var l=a("sY7M");function o(m){var g=new m.constructor(m.byteLength);return new l(g).set(new l(m)),g}A.exports=o},"8Dog":function(A,v){function a(l){var o=typeof l;return l!=null&&(o=="object"||o=="function")}A.exports=a},"8GQc":function(A,v,a){var l=a("Pir4");function o(m){return l(this.__data__,m)>-1}A.exports=o},"8OQS":function(A,v){function a(l,o){if(l==null)return{};var m={},g=Object.keys(l),p,y;for(y=0;y<g.length;y++)p=g[y],!(o.indexOf(p)>=0)&&(m[p]=l[p]);return m}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},"8uyu":function(A,v){},"8yjT":function(A,v){var a=9007199254740991,l=/^(?:0|[1-9]\d*)$/;function o(m,g){var p=typeof m;return g=g==null?a:g,!!g&&(p=="number"||p!="symbol"&&l.test(m))&&m>-1&&m%1==0&&m<g}A.exports=o},"95ij":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingInSyntax=void 0;var l=a("BU00"),o=a("FNCk"),m=function(){function g(p){this._binding=p}return g.prototype.inRequestScope=function(){return this._binding.scope=l.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},g.prototype.inSingletonScope=function(){return this._binding.scope=l.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},g.prototype.inTransientScope=function(){return this._binding.scope=l.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},g}();v.BindingInSyntax=m},"9Ece":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Lookup=void 0;var l=a("Z6CD"),o=function(){function m(){this._map=new Map}return m.prototype.getMap=function(){return this._map},m.prototype.add=function(g,p){if(g==null)throw new Error(l.NULL_ARGUMENT);if(p==null)throw new Error(l.NULL_ARGUMENT);var y=this._map.get(g);y!==void 0?(y.push(p),this._map.set(g,y)):this._map.set(g,[p])},m.prototype.get=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);var p=this._map.get(g);if(p!==void 0)return p;throw new Error(l.KEY_NOT_FOUND)},m.prototype.remove=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);if(!this._map.delete(g))throw new Error(l.KEY_NOT_FOUND)},m.prototype.removeByCondition=function(g){var p=this;this._map.forEach(function(y,b){var I=y.filter(function(P){return!g(P)});I.length>0?p._map.set(b,I):p._map.delete(b)})},m.prototype.hasKey=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);return this._map.has(g)},m.prototype.clone=function(){var g=new m;return this._map.forEach(function(p,y){p.forEach(function(b){return g.add(y,b.clone())})}),g},m.prototype.traverse=function(g){this._map.forEach(function(p,y){g(y,p)})},m}();v.Lookup=o},"9Emb":function(A,v,a){var l=a("AsPh"),o=a("49Qw"),m=a("WsPr"),g=a("F1nq");function p(y,b,I){return y=m(y),b=I?void 0:b,b===void 0?o(y)?g(y):l(y):y.match(b)||[]}A.exports=p},"9Fde":function(A,v,a){"use strict";var l=this&&this.__awaiter||function(se,fe,X,Oe){function D(De){return De instanceof X?De:new X(function(ot){ot(De)})}return new(X||(X=Promise))(function(De,ot){function Ke(He){try{W(Oe.next(He))}catch(C){ot(C)}}function Le(He){try{W(Oe.throw(He))}catch(C){ot(C)}}function W(He){He.done?De(He.value):D(He.value).then(Ke,Le)}W((Oe=Oe.apply(se,fe||[])).next())})},o=this&&this.__generator||function(se,fe){var X={label:0,sent:function(){if(De[0]&1)throw De[1];return De[1]},trys:[],ops:[]},Oe,D,De,ot;return ot={next:Ke(0),throw:Ke(1),return:Ke(2)},typeof Symbol=="function"&&(ot[Symbol.iterator]=function(){return this}),ot;function Ke(W){return function(He){return Le([W,He])}}function Le(W){if(Oe)throw new TypeError("Generator is already executing.");for(;X;)try{if(Oe=1,D&&(De=W[0]&2?D.return:W[0]?D.throw||((De=D.return)&&De.call(D),0):D.next)&&!(De=De.call(D,W[1])).done)return De;switch(D=0,De&&(W=[W[0]&2,De.value]),W[0]){case 0:case 1:De=W;break;case 4:return X.label++,{value:W[1],done:!1};case 5:X.label++,D=W[1],W=[0];continue;case 7:W=X.ops.pop(),X.trys.pop();continue;default:if(De=X.trys,!(De=De.length>0&&De[De.length-1])&&(W[0]===6||W[0]===2)){X=0;continue}if(W[0]===3&&(!De||W[1]>De[0]&&W[1]<De[3])){X.label=W[1];break}if(W[0]===6&&X.label<De[1]){X.label=De[1],De=W;break}if(De&&X.label<De[2]){X.label=De[2],X.ops.push(W);break}De[2]&&X.ops.pop(),X.trys.pop();continue}W=fe.call(se,X)}catch(He){W=[6,He],D=0}finally{Oe=De=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},m=this&&this.__spreadArray||function(se,fe){for(var X=0,Oe=fe.length,D=se.length;X<Oe;X++,D++)se[D]=fe[X];return se};Object.defineProperty(v,"__esModule",{value:!0}),v.Container=void 0;var g=a("LgvC"),p=a("MON2"),y=a("FV85"),b=a("xfSm"),I=a("wnjb"),P=a("h7MG"),M=a("aPG5"),z=a("gzZq"),oe=a("d9O0"),G=a("ujMp"),ee=a("HpQ9"),pe=a("AwBQ"),J=function(){function se(fe){this._appliedMiddleware=[];var X=fe||{};if(typeof X!="object")throw new Error(""+p.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(X.defaultScope===void 0)X.defaultScope=y.BindingScopeEnum.Transient;else if(X.defaultScope!==y.BindingScopeEnum.Singleton&&X.defaultScope!==y.BindingScopeEnum.Transient&&X.defaultScope!==y.BindingScopeEnum.Request)throw new Error(""+p.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(X.autoBindInjectable===void 0)X.autoBindInjectable=!1;else if(typeof X.autoBindInjectable!="boolean")throw new Error(""+p.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(X.skipBaseClassChecks===void 0)X.skipBaseClassChecks=!1;else if(typeof X.skipBaseClassChecks!="boolean")throw new Error(""+p.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:X.autoBindInjectable,defaultScope:X.defaultScope,skipBaseClassChecks:X.skipBaseClassChecks},this.id=oe.id(),this._bindingDictionary=new pe.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new I.MetadataReader}return se.merge=function(fe,X){for(var Oe=[],D=2;D<arguments.length;D++)Oe[D-2]=arguments[D];var De=new se,ot=m([fe,X],Oe).map(function(W){return P.getBindingDictionary(W)}),Ke=P.getBindingDictionary(De);function Le(W,He){W.traverse(function(C,Ze){Ze.forEach(function(rt){He.add(rt.serviceIdentifier,rt.clone())})})}return ot.forEach(function(W){Le(W,Ke)}),De},se.prototype.load=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];for(var Oe=this._getContainerModuleHelpersFactory(),D=0,De=fe;D<De.length;D++){var ot=De[D],Ke=Oe(ot.id);ot.registry(Ke.bindFunction,Ke.unbindFunction,Ke.isboundFunction,Ke.rebindFunction)}},se.prototype.loadAsync=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];return l(this,void 0,void 0,function(){var Oe,D,De,ot,Ke;return o(this,function(Le){switch(Le.label){case 0:Oe=this._getContainerModuleHelpersFactory(),D=0,De=fe,Le.label=1;case 1:return D<De.length?(ot=De[D],Ke=Oe(ot.id),[4,ot.registry(Ke.bindFunction,Ke.unbindFunction,Ke.isboundFunction,Ke.rebindFunction)]):[3,4];case 2:Le.sent(),Le.label=3;case 3:return D++,[3,1];case 4:return[2]}})})},se.prototype.unload=function(){for(var fe=this,X=[],Oe=0;Oe<arguments.length;Oe++)X[Oe]=arguments[Oe];var D=function(De){return function(ot){return ot.moduleId===De}};X.forEach(function(De){var ot=D(De.id);fe._bindingDictionary.removeByCondition(ot)})},se.prototype.bind=function(fe){var X=this.options.defaultScope||y.BindingScopeEnum.Transient,Oe=new g.Binding(fe,X);return this._bindingDictionary.add(fe,Oe),new z.BindingToSyntax(Oe)},se.prototype.rebind=function(fe){return this.unbind(fe),this.bind(fe)},se.prototype.unbind=function(fe){try{this._bindingDictionary.remove(fe)}catch(X){throw new Error(p.CANNOT_UNBIND+" "+G.getServiceIdentifierAsString(fe))}},se.prototype.unbindAll=function(){this._bindingDictionary=new pe.Lookup},se.prototype.isBound=function(fe){var X=this._bindingDictionary.hasKey(fe);return!X&&this.parent&&(X=this.parent.isBound(fe)),X},se.prototype.isBoundNamed=function(fe,X){return this.isBoundTagged(fe,b.NAMED_TAG,X)},se.prototype.isBoundTagged=function(fe,X,Oe){var D=!1;if(this._bindingDictionary.hasKey(fe)){var De=this._bindingDictionary.get(fe),ot=P.createMockRequest(this,fe,X,Oe);D=De.some(function(Ke){return Ke.constraint(ot)})}return!D&&this.parent&&(D=this.parent.isBoundTagged(fe,X,Oe)),D},se.prototype.snapshot=function(){this._snapshots.push(ee.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},se.prototype.restore=function(){var fe=this._snapshots.pop();if(fe===void 0)throw new Error(p.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=fe.bindings,this._middleware=fe.middleware},se.prototype.createChild=function(fe){var X=new se(fe||this.options);return X.parent=this,X},se.prototype.applyMiddleware=function(){for(var fe=[],X=0;X<arguments.length;X++)fe[X]=arguments[X];this._appliedMiddleware=this._appliedMiddleware.concat(fe);var Oe=this._middleware?this._middleware:this._planAndResolve();this._middleware=fe.reduce(function(D,De){return De(D)},Oe)},se.prototype.applyCustomMetadataReader=function(fe){this._metadataReader=fe},se.prototype.get=function(fe){return this._get(!1,!1,y.TargetTypeEnum.Variable,fe)},se.prototype.getTagged=function(fe,X,Oe){return this._get(!1,!1,y.TargetTypeEnum.Variable,fe,X,Oe)},se.prototype.getNamed=function(fe,X){return this.getTagged(fe,b.NAMED_TAG,X)},se.prototype.getAll=function(fe){return this._get(!0,!0,y.TargetTypeEnum.Variable,fe)},se.prototype.getAllTagged=function(fe,X,Oe){return this._get(!1,!0,y.TargetTypeEnum.Variable,fe,X,Oe)},se.prototype.getAllNamed=function(fe,X){return this.getAllTagged(fe,b.NAMED_TAG,X)},se.prototype.resolve=function(fe){var X=this.createChild();return X.bind(fe).toSelf(),this._appliedMiddleware.forEach(function(Oe){X.applyMiddleware(Oe)}),X.get(fe)},se.prototype._getContainerModuleHelpersFactory=function(){var fe=this,X=function(Ke,Le){Ke._binding.moduleId=Le},Oe=function(Ke){return function(Le){var W=fe.bind.bind(fe),He=W(Le);return X(He,Ke),He}},D=function(Ke){return function(Le){var W=fe.unbind.bind(fe);W(Le)}},De=function(Ke){return function(Le){var W=fe.isBound.bind(fe);return W(Le)}},ot=function(Ke){return function(Le){var W=fe.rebind.bind(fe),He=W(Le);return X(He,Ke),He}};return function(Ke){return{bindFunction:Oe(Ke),isboundFunction:De(Ke),rebindFunction:ot(Ke),unbindFunction:D(Ke)}}},se.prototype._get=function(fe,X,Oe,D,De,ot){var Ke=null,Le={avoidConstraints:fe,contextInterceptor:function(W){return W},isMultiInject:X,key:De,serviceIdentifier:D,targetType:Oe,value:ot};if(this._middleware){if(Ke=this._middleware(Le),Ke==null)throw new Error(p.INVALID_MIDDLEWARE_RETURN)}else Ke=this._planAndResolve()(Le);return Ke},se.prototype._planAndResolve=function(){var fe=this;return function(X){var Oe=P.plan(fe._metadataReader,fe,X.isMultiInject,X.targetType,X.serviceIdentifier,X.key,X.value,X.avoidConstraints);Oe=X.contextInterceptor(Oe);var D=M.resolve(Oe);return D}},se}();v.Container=J},"9Mg7":function(A,v,a){"use strict";a.d(v,"a",function(){return Cr});var l=a("lwsE"),o=a.n(l),m=a("W8MJ"),g=a.n(m),p=a("7W2i"),y=a.n(p),b=a("a1gu"),I=a.n(b),P=a("Nsbk"),M=a.n(P),z=a("yG8O"),oe=a.n(z),G=a("lSNA"),ee=a.n(G),pe=a("U+yc"),J=a.n(pe),se=a("1ABj"),fe=a("h1nZ"),X,Oe,D;function De(Nt,it){var Ce=Object.keys(Nt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(Nt);it&&(Rt=Rt.filter(function(_t){return Object.getOwnPropertyDescriptor(Nt,_t).enumerable})),Ce.push.apply(Ce,Rt)}return Ce}function ot(Nt){for(var it=1;it<arguments.length;it++){var Ce=arguments[it]!=null?arguments[it]:{};it%2?De(Object(Ce),!0).forEach(function(Rt){ee()(Nt,Rt,Ce[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nt,Object.getOwnPropertyDescriptors(Ce)):De(Object(Ce)).forEach(function(Rt){Object.defineProperty(Nt,Rt,Object.getOwnPropertyDescriptor(Ce,Rt))})}return Nt}var Ke=(X=Object(fe.lazyInject)(fe.TYPES.IGlobalConfigService),Oe=function(){function Nt(it){o()(this,Nt),oe()(this,"configService",D,this),ee()(this,"config",void 0),this.config=it}return g()(Nt,[{key:"setContainer",value:function(Ce,Rt){Ce.bind(fe.TYPES.MapConfig).toConstantValue(ot(ot({},this.config),{},{id:Rt})),Ce.bind(fe.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),Nt}(),D=J()(Oe.prototype,"configService",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe),Le=a("QILm"),W=a.n(Le),He=a("yXPU"),C=a.n(He),Ze=a("J4zp"),rt=a.n(Ze),At=a("o0o1"),Et=a.n(At),ne=a("623A"),Q=a.n(ne),te=a("Hel2"),Fe=a("IOcx"),ze=a("4cb6"),St=a("mNvP");function ut(Nt,it){var Ce=Object.keys(Nt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(Nt);it&&(Rt=Rt.filter(function(_t){return Object.getOwnPropertyDescriptor(Nt,_t).enumerable})),Ce.push.apply(Ce,Rt)}return Ce}function Qt(Nt){for(var it=1;it<arguments.length;it++){var Ce=arguments[it]!=null?arguments[it]:{};it%2?ut(Object(Ce),!0).forEach(function(Rt){ee()(Nt,Rt,Ce[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nt,Object.getOwnPropertyDescriptors(Ce)):ut(Object(Ce)).forEach(function(Rt){Object.defineProperty(Nt,Rt,Object.getOwnPropertyDescriptor(Ce,Rt))})}return Nt}function vr(){var Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},it={top:0,right:0,bottom:0,left:0};if(typeof Nt=="number")return{top:Nt,right:Nt,bottom:Nt,left:Nt};if(Array.isArray(Nt)){if(Nt.length===4)return{top:Nt[0],right:Nt[1],bottom:Nt[2],left:Nt[3]};if(Nt.length===2)return{top:Nt[0],right:Nt[1],bottom:Nt[0],left:Nt[1]}}return Qt(Qt({},it),Nt)}var tt;(function(Nt){Nt["GAODE1.x"]="GAODE1.x",Nt["GAODE2.x"]="GAODE2.x",Nt.MAPBOX="MAPBOX",Nt.L7MAP="L7MAP"})(tt||(tt={}));var Pe={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},Ne=Math.PI/180,ke=function(){function Nt(){o()(this,Nt),ee()(this,"projectionMatrix",Fe.a.create()),ee()(this,"viewMatrix",Fe.a.create()),ee()(this,"viewProjectionMatrix",Fe.a.create()),ee()(this,"ViewProjectionMatrixUncentered",Fe.a.create()),ee()(this,"viewUncenteredMatrix",Fe.a.create()),ee()(this,"zoom",void 0),ee()(this,"center",void 0)}return g()(Nt,[{key:"syncWithMapCamera",value:function(Ce){var Rt=Ce.zoom,_t=Rt===void 0?1:Rt,Tn=Ce.pitch,Ve=Tn===void 0?0:Tn,hi=Ce.bearing,An=hi===void 0?0:hi,xi=Ce.center,Bn=xi===void 0?[0,0]:xi,yi=Ce.offsetOrigin,Wr=yi===void 0?[0,0]:yi,Oi=Ce.cameraHeight,Oa=Oi===void 0?1:Oi,Aa=Ce.aspect,Ui=Aa===void 0?1:Aa,ea=Ce.near,Ti=ea===void 0?.1:ea,_n=Ce.far,Ci=_n===void 0?1e3:_n,qn=Ce.fov,Wi=qn===void 0?0:qn;this.zoom=_t,this.center=Bn;var ta=Ve*Ne,si=(360-An)*Ne;Fe.a.perspective(this.projectionMatrix,Wi,Ui,Ti,Ci);var li=Fe.b.fromValues(Oa*Math.sin(ta)*Math.sin(si),-Oa*Math.sin(ta)*Math.cos(si),Oa*Math.cos(ta)),Za=Fe.b.fromValues(-Math.cos(ta)*Math.sin(si),Math.cos(ta)*Math.cos(si),Math.sin(ta));Fe.a.lookAt(this.viewMatrix,li,Fe.b.fromValues(0,0,0),Za),this.viewUncenteredMatrix=Fe.a.clone(this.viewMatrix),Fe.a.translate(this.viewMatrix,this.viewMatrix,Fe.b.fromValues(-Wr[0],Wr[1],0)),Fe.a.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Fe.a.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var Ce=rt()(this.center,2),Rt=Ce[0],_t=Ce[1];return[Rt,_t]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(Ce,Rt){var _t=85.0511287798,Tn=Math.max(Math.min(_t,Ce[1]),-_t),Ve=256<<20,hi=Math.PI/180,An=Ce[0]*hi,xi=Tn*hi;xi=Math.log(Math.tan(Math.PI/4+xi/2));var Bn=.5/Math.PI,yi=.5,Wr=-.5/Math.PI;return hi=.5,An=Ve*(Bn*An+yi)-215440491,xi=-(Ve*(Wr*xi+hi)-106744817),[An,xi]}}]),Nt}(),et,Ge,Ot,Bt,gt,ge,Lt,qt,xr,tr,Xr;function rr(Nt,it){var Ce=Object.keys(Nt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(Nt);it&&(Rt=Rt.filter(function(_t){return Object.getOwnPropertyDescriptor(Nt,_t).enumerable})),Ce.push.apply(Ce,Rt)}return Ce}function bn(Nt){for(var it=1;it<arguments.length;it++){var Ce=arguments[it]!=null?arguments[it]:{};it%2?rr(Object(Ce),!0).forEach(function(Rt){ee()(Nt,Rt,Ce[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Nt,Object.getOwnPropertyDescriptors(Ce)):rr(Object(Ce)).forEach(function(Rt){Object.defineProperty(Nt,Rt,Object.getOwnPropertyDescriptor(Ce,Rt))})}return Nt}function ue(Nt,it){if(it||(it=document),!!it){var Ce=it.head||it.getElementsByTagName("head")[0];if(!Ce){Ce=it.createElement("head");var Rt=it.body||it.getElementsByTagName("body")[0];Rt?Rt.parentNode.insertBefore(Ce,Rt):it.documentElement.appendChild(Ce)}var _t=it.createElement("style");return _t.type="text/css",_t.styleSheet?_t.styleSheet.cssText=Nt:_t.appendChild(it.createTextNode(Nt)),Ce.appendChild(_t),_t}}ue(`.amap-logo{
 display: none !important;
}
`);var tn=0;window.forceWebGL=!0;var Fn="15cd8a57710d40c9b7c0e3cc120f1200",Fi="1.4.15",ki="amap-script",ve=!1,Ye=[],vt=12,wt=(et=Object(ze.injectable)(),Ge=Object(ze.inject)(fe.TYPES.IGlobalConfigService),Ot=Object(ze.inject)(fe.TYPES.MapConfig),Bt=Object(ze.inject)(fe.TYPES.ICoordinateSystemService),gt=Object(ze.inject)(fe.TYPES.IEventEmitter),et(ge=(Lt=function(){function Nt(){var it=this;o()(this,Nt),ee()(this,"version",tt["GAODE1.x"]),ee()(this,"map",void 0),oe()(this,"configService",qt,this),oe()(this,"config",xr,this),oe()(this,"coordinateSystemService",tr,this),oe()(this,"eventEmitter",Xr,this),ee()(this,"markerContainer",void 0),ee()(this,"$mapContainer",void 0),ee()(this,"viewport",void 0),ee()(this,"cameraChangedCallback",void 0),ee()(this,"handleCameraChanged",function(Ce){var Rt=Ce.camera,_t=Rt.fov,Tn=Rt.near,Ve=Rt.far,hi=Rt.height,An=Rt.pitch,xi=Rt.rotation,Bn=Rt.aspect,yi=Rt.position,Wr=it.getCenter(),Oi=Wr.lng,Oa=Wr.lat;if(it.cameraChangedCallback){it.viewport.syncWithMapCamera({aspect:Bn,bearing:360-xi,far:Ve,fov:_t,cameraHeight:hi,near:Tn,pitch:An,zoom:it.map.getZoom()-1,center:[Oi,Oa],offsetOrigin:[yi.x,yi.y]});var Aa=it.config.offsetZoom,Ui=Aa===void 0?vt:Aa;it.viewport.getZoom()>Ui?it.coordinateSystemService.setCoordinateSystem(fe.CoordinateSystem.P20_OFFSET):it.coordinateSystemService.setCoordinateSystem(fe.CoordinateSystem.P20),it.cameraChangedCallback(it.viewport)}})}return g()(Nt,[{key:"addMarkerContainer",value:function(){var Ce=this.map.getContainer();if(Ce!==null){var Rt=Ce.getElementsByClassName("amap-maps")[0];this.markerContainer=te.a.create("div","l7-marker-container",Rt)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(Ce,Rt){fe.MapServiceEvent.indexOf(Ce)!==-1?this.eventEmitter.on(Ce,Rt):this.map.on(Ce,Rt)}},{key:"off",value:function(Ce,Rt){fe.MapServiceEvent.indexOf(Ce)!==-1?this.eventEmitter.off(Ce,Rt):this.map.off(Ce,Rt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var Ce;return(Ce=this.map.getContainer())===null||Ce===void 0?void 0:Ce.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var Ce=this.map.getSize();return[Ce.getWidth(),Ce.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(Ce){return this.map.setZoom(Ce)}},{key:"getCenter",value:function(Ce){if(Ce!=null&&Ce.padding){var Rt=this.getCenter(),_t=this.getSize(),Tn=rt()(_t,2),Ve=Tn[0],hi=Tn[1],An=vr(Ce.padding),xi=this.lngLatToPixel([Rt.lng,Rt.lat]),Bn=[(An.right-An.left)/2,(An.bottom-An.top)/2],yi=this.pixelToLngLat([xi.x-Bn[0],xi.y-Bn[1]]);return yi}var Wr=this.map.getCenter();return{lng:Wr.getLng(),lat:Wr.getLat()}}},{key:"setCenter",value:function(Ce,Rt){if(Rt!=null&&Rt.padding){var _t=vr(Rt.padding),Tn=this.lngLatToPixel(Ce),Ve=[(_t.right-_t.left)/2,(_t.bottom-_t.top)/2],hi=this.pixelToLngLat([Tn.x+Ve[0],Tn.y+Ve[1]]);this.map.setCenter([hi.lng,hi.lat])}else this.map.setCenter(Ce)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var Ce=this.map.getBounds().toBounds(),Rt=Ce.getNorthEast(),_t=Ce.getSouthWest(),Tn=this.getCenter(),Ve=Tn.lng>Rt.getLng()||Tn.lng<_t.getLng()?180-Rt.getLng():Rt.getLng(),hi=Tn.lng<_t.getLng()?_t.getLng()-180:_t.getLng();return[[hi,_t.getLat()],[Ve,Rt.getLat()]]}},{key:"getMinZoom",value:function(){var Ce=this.map.get("zooms");return Ce[0]-1}},{key:"getMaxZoom",value:function(){var Ce=this.map.get("zooms");return Ce[1]-1}},{key:"setRotation",value:function(Ce){return this.map.setRotation(Ce)}},{key:"setPitch",value:function(Ce){return this.map.setPitch(Ce)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(Ce){this.map.panTo(Ce)}},{key:"panBy",value:function(Ce){this.map.panTo(Ce)}},{key:"fitBounds",value:function(Ce){this.map.setBounds(new AMap.Bounds([Ce[0][0],Ce[0][1],Ce[1][0],Ce[1][1]]))}},{key:"setZoomAndCenter",value:function(Ce,Rt){this.map.setZoomAndCenter(Ce,Rt)}},{key:"setMapStyle",value:function(Ce){this.map.setMapStyle(this.getMapStyle(Ce))}},{key:"setMapStatus",value:function(Ce){this.map.setStatus(Ce)}},{key:"pixelToLngLat",value:function(Ce){var Rt=this.map.pixelToLngLat(new AMap.Pixel(Ce[0],Ce[1]));return{lng:Rt.getLng(),lat:Rt.getLat()}}},{key:"lngLatToPixel",value:function(Ce){var Rt=this.map.lnglatToPixel(new AMap.LngLat(Ce[0],Ce[1]));return{x:Rt.getX(),y:Rt.getY()}}},{key:"containerToLngLat",value:function(Ce){var Rt=new AMap.Pixel(Ce[0],Ce[1]),_t=this.map.containerToLngLat(Rt);return{lng:_t==null?void 0:_t.getLng(),lat:_t==null?void 0:_t.getLat()}}},{key:"lngLatToContainer",value:function(Ce){var Rt=new AMap.LngLat(Ce[0],Ce[1]),_t=this.map.lngLatToContainer(Rt);return{x:_t.getX(),y:_t.getY()}}},{key:"lngLatToMercator",value:function(Ce,Rt){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(Ce,Rt,_t){var Tn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],Ve=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},hi=this.viewport.projectFlat(Ce),An=Fe.a.create();return Fe.a.translate(An,An,Fe.b.fromValues(hi[0],hi[1],Rt)),Fe.a.scale(An,An,Fe.b.fromValues(Tn[0],Tn[1],Tn[2])),Fe.a.rotateX(An,An,_t[0]),Fe.a.rotateY(An,An,_t[1]),Fe.a.rotateZ(An,An,_t[2]),An}},{key:"init",value:function(){var it=C()(Et.a.mark(function Rt(){var _t=this,Tn,Ve,hi,An,xi,Bn,yi,Wr,Oi,Oa,Aa,Ui,ea,Ti;return Et.a.wrap(function(Ci){for(;;)switch(Ci.prev=Ci.next){case 0:return Tn=this.config,Ve=Tn.id,hi=Tn.style,An=hi===void 0?"light":hi,xi=Tn.minZoom,Bn=xi===void 0?0:xi,yi=Tn.maxZoom,Wr=yi===void 0?18:yi,Oi=Tn.token,Oa=Oi===void 0?Fn:Oi,Aa=Tn.mapInstance,Ui=Tn.plugin,ea=Ui===void 0?[]:Ui,Ti=W()(Tn,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),Ci.next=3,new Promise(function(qn){var Wi=function(){if(Aa)_t.map=Aa,_t.$mapContainer=_t.map.getContainer(),setTimeout(function(){_t.map.on("camerachange",_t.handleCameraChanged),qn()},30);else{_t.$mapContainer=_t.creatAmapContainer(Ve);var si=new AMap.Map(_t.$mapContainer,bn({mapStyle:_t.getMapStyle(An),zooms:[Bn,Wr],viewMode:"3D"},Ti));si.on("camerachange",_t.handleCameraChanged),_t.map=si,setTimeout(function(){qn()},10)}};!ve&&!Aa?(Oa===Fn&&console.warn(_t.configService.getSceneWarninfo("MapToken")),ve=!0,ea.push("Map3D"),Q.a.load({key:Oa,version:Fi,plugins:ea}).then(function(ta){Wi(),Ye.length&&(Ye.forEach(function(si){return si()}),Ye=[])}).catch(function(ta){throw new Error(ta)})):ve&&window.AMap||Aa?Wi():Ye.push(Wi)});case 3:this.viewport=new ke;case 4:case"end":return Ci.stop()}},Rt,this)}));function Ce(){return it.apply(this,arguments)}return Ce}()},{key:"exportMap",value:function(Ce){var Rt,_t=(Rt=this.getContainer())===null||Rt===void 0?void 0:Rt.getElementsByClassName("amap-layer")[0],Tn=Ce==="jpg"?_t==null?void 0:_t.toDataURL("image/jpeg"):_t==null?void 0:_t.toDataURL("image/png");return Tn}},{key:"emit",value:function(Ce){for(var Rt,_t=arguments.length,Tn=new Array(_t>1?_t-1:0),Ve=1;Ve<_t;Ve++)Tn[Ve-1]=arguments[Ve];(Rt=this.eventEmitter).emit.apply(Rt,[Ce].concat(Tn))}},{key:"once",value:function(Ce){for(var Rt,_t=arguments.length,Tn=new Array(_t>1?_t-1:0),Ve=1;Ve<_t;Ve++)Tn[Ve-1]=arguments[Ve];(Rt=this.eventEmitter).once.apply(Rt,[Ce].concat(Tn))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var Ce=document.getElementById(ki);Ce&&document.head.removeChild(Ce)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(Ce){this.cameraChangedCallback=Ce}},{key:"getMapStyle",value:function(Ce){return Pe[Ce]?Pe[Ce]:Ce}},{key:"creatAmapContainer",value:function(Ce){var Rt=Ce;typeof Ce=="string"&&(Rt=document.getElementById(Ce));var _t=document.createElement("div");return _t.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,_t.id="l7_amap_div"+tn++,Rt.appendChild(_t),_t}}]),Nt}(),qt=J()(Lt.prototype,"configService",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=J()(Lt.prototype,"config",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr=J()(Lt.prototype,"coordinateSystemService",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=J()(Lt.prototype,"eventEmitter",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt))||ge);function me(Nt){var it=Pn();return function(){var Rt=M()(Nt),_t;if(it){var Tn=M()(this).constructor;_t=Reflect.construct(Rt,arguments,Tn)}else _t=Rt.apply(this,arguments);return I()(this,_t)}}function Pn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}var Cr=function(Nt){y()(Ce,Nt);var it=me(Ce);function Ce(){return o()(this,Ce),it.apply(this,arguments)}return g()(Ce,[{key:"getServiceConstructor",value:function(){return wt}}]),Ce}(Ke)},"9fil":function(A,v,a){var l=a("CkNm"),o=function(){var g=/[^.]+$/.exec(l&&l.keys&&l.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function m(g){return!!o&&o in g}A.exports=m},"9iqA":function(A,v,a){var l=a("Pir4");function o(m){var g=this.__data__,p=l(g,m);return p<0?void 0:g[p][1]}A.exports=o},"9yH6":function(A,v){function a(l){return this.__data__.has(l)}A.exports=a},"9yVo":function(A,v,a){var l=a("TBoU"),o=a("j0b5"),m=a("URwZ"),g=a("x22w"),p=a("3sUJ"),y=a("1Grl"),b=a("eoSM"),I=a("tMak"),P=a("Zsrj"),M=a("+U9+"),z=a("PWyJ"),oe=a("pNQ9"),G=a("GC0I"),ee=a("GuSE"),pe=a("aBeV");function J(se,fe,X,Oe,D,De,ot){var Ke=ee(se,X),Le=ee(fe,X),W=ot.get(Le);if(W){l(se,X,W);return}var He=De?De(Ke,Le,X+"",se,fe,ot):void 0,C=He===void 0;if(C){var Ze=b(Le),rt=!Ze&&P(Le),At=!Ze&&!rt&&G(Le);He=Le,Ze||rt||At?b(Ke)?He=Ke:I(Ke)?He=g(Ke):rt?(C=!1,He=o(Le,!0)):At?(C=!1,He=m(Le,!0)):He=[]:oe(Le)||y(Le)?(He=Ke,y(Ke)?He=pe(Ke):(!z(Ke)||M(Ke))&&(He=p(Le))):C=!1}C&&(ot.set(Le,He),D(He,Le,Oe,De,ot),ot.delete(Le)),l(se,X,He)}A.exports=J},"9yrr":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.ContainerSnapshot=void 0;var l=function(){function o(){}return o.of=function(m,g){var p=new o;return p.bindings=m,p.middleware=g,p},o}();v.ContainerSnapshot=l},AFH1:function(A,v,a){"use strict";var l;(function(o){o.TOPRIGHT="topright",o.TOPLEFT="topleft",o.BOTTOMRIGHT="bottomright",o.BOTTOMLEFT="bottomleft"})(l||(l={}))},APxj:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l=a("Ucsi");function o(m,g){g===void 0&&(g=!0);var p=l.makePropertyInjectDecorator(m,g),y=l.makePropertyInjectNamedDecorator(m,g),b=l.makePropertyInjectTaggedDecorator(m,g),I=l.makePropertyMultiInjectDecorator(m,g);return{lazyInject:p,lazyInjectNamed:y,lazyInjectTagged:b,lazyMultiInject:I}}v.default=o},AaJI:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.AsyncContainerModule=v.ContainerModule=void 0;var l=a("gbO8"),o=function(){function g(p){this.id=l.id(),this.registry=p}return g}();v.ContainerModule=o;var m=function(){function g(p){this.id=l.id(),this.registry=p}return g}();v.AsyncContainerModule=m},AsPh:function(A,v){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function l(o){return o.match(a)||[]}A.exports=l},AvsN:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.resolve=void 0;var l=a("Z6CD"),o=a("BU00"),m=a("31ZN"),g=a("qbsE"),p=a("an+Q"),y=function(P,M,z){try{return z()}catch(oe){throw m.isStackOverflowExeption(oe)?new Error(l.CIRCULAR_DEPENDENCY_IN_FACTORY(P,M.toString())):oe}},b=function(P){return function(M){M.parentContext.setCurrentRequest(M);var z=M.bindings,oe=M.childRequests,G=M.target&&M.target.isArray(),ee=!M.parentRequest||!M.parentRequest.target||!M.target||!M.parentRequest.target.matchesArray(M.target.serviceIdentifier);if(G&&ee)return oe.map(function(Oe){var D=b(P);return D(Oe)});var pe=null;if(M.target.isOptional()&&z.length===0)return;var J=z[0],se=J.scope===o.BindingScopeEnum.Singleton,fe=J.scope===o.BindingScopeEnum.Request;if(se&&J.activated)return J.cache;if(fe&&P!==null&&P.has(J.id))return P.get(J.id);if(J.type===o.BindingTypeEnum.ConstantValue)pe=J.cache,J.activated=!0;else if(J.type===o.BindingTypeEnum.Function)pe=J.cache,J.activated=!0;else if(J.type===o.BindingTypeEnum.Constructor)pe=J.implementationType;else if(J.type===o.BindingTypeEnum.DynamicValue&&J.dynamicValue!==null)pe=y("toDynamicValue",J.serviceIdentifier,function(){return J.dynamicValue(M.parentContext)});else if(J.type===o.BindingTypeEnum.Factory&&J.factory!==null)pe=y("toFactory",J.serviceIdentifier,function(){return J.factory(M.parentContext)});else if(J.type===o.BindingTypeEnum.Provider&&J.provider!==null)pe=y("toProvider",J.serviceIdentifier,function(){return J.provider(M.parentContext)});else if(J.type===o.BindingTypeEnum.Instance&&J.implementationType!==null)pe=p.resolveInstance(J.implementationType,oe,b(P));else{var X=g.getServiceIdentifierAsString(M.serviceIdentifier);throw new Error(l.INVALID_BINDING_TYPE+" "+X)}return typeof J.onActivation=="function"&&(pe=J.onActivation(M.parentContext,pe)),se&&(J.cache=pe,J.activated=!0),fe&&P!==null&&!P.has(J.id)&&P.set(J.id,pe),pe}};function I(P){var M=b(P.plan.rootRequest.requestScope);return M(P.plan.rootRequest)}v.resolve=I},AwBQ:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Lookup=void 0;var l=a("MON2"),o=function(){function m(){this._map=new Map}return m.prototype.getMap=function(){return this._map},m.prototype.add=function(g,p){if(g==null)throw new Error(l.NULL_ARGUMENT);if(p==null)throw new Error(l.NULL_ARGUMENT);var y=this._map.get(g);y!==void 0?(y.push(p),this._map.set(g,y)):this._map.set(g,[p])},m.prototype.get=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);var p=this._map.get(g);if(p!==void 0)return p;throw new Error(l.KEY_NOT_FOUND)},m.prototype.remove=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);if(!this._map.delete(g))throw new Error(l.KEY_NOT_FOUND)},m.prototype.removeByCondition=function(g){var p=this;this._map.forEach(function(y,b){var I=y.filter(function(P){return!g(P)});I.length>0?p._map.set(b,I):p._map.delete(b)})},m.prototype.hasKey=function(g){if(g==null)throw new Error(l.NULL_ARGUMENT);return this._map.has(g)},m.prototype.clone=function(){var g=new m;return this._map.forEach(function(p,y){p.forEach(function(b){return g.add(y,b.clone())})}),g},m.prototype.traverse=function(g){this._map.forEach(function(p,y){g(y,p)})},m}();v.Lookup=o},B9V7:function(A,v,a){var l=a("mIFG"),o=a("Pfvu");function m(g){return o(g)&&l(g)}A.exports=m},BMKy:function(A,v,a){var l=a("7zvB"),o=l.Symbol;A.exports=o},BU00:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.TargetTypeEnum=v.BindingTypeEnum=v.BindingScopeEnum=void 0;var l={Request:"Request",Singleton:"Singleton",Transient:"Transient"};v.BindingScopeEnum=l;var o={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};v.BindingTypeEnum=o;var m={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};v.TargetTypeEnum=m},BUXl:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Target=void 0;var l=a("jHQc"),o=a("gbO8"),m=a("uYCe"),g=a("GHZi"),p=function(){function y(b,I,P,M){this.id=o.id(),this.type=b,this.serviceIdentifier=P,this.name=new g.QueryableString(I||""),this.metadata=new Array;var z=null;typeof M=="string"?z=new m.Metadata(l.NAMED_TAG,M):M instanceof m.Metadata&&(z=M),z!==null&&this.metadata.push(z)}return y.prototype.hasTag=function(b){for(var I=0,P=this.metadata;I<P.length;I++){var M=P[I];if(M.key===b)return!0}return!1},y.prototype.isArray=function(){return this.hasTag(l.MULTI_INJECT_TAG)},y.prototype.matchesArray=function(b){return this.matchesTag(l.MULTI_INJECT_TAG)(b)},y.prototype.isNamed=function(){return this.hasTag(l.NAMED_TAG)},y.prototype.isTagged=function(){return this.metadata.some(function(b){return l.NON_CUSTOM_TAG_KEYS.every(function(I){return b.key!==I})})},y.prototype.isOptional=function(){return this.matchesTag(l.OPTIONAL_TAG)(!0)},y.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(b){return b.key===l.NAMED_TAG})[0]:null},y.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(b){return l.NON_CUSTOM_TAG_KEYS.every(function(I){return b.key!==I})}):null},y.prototype.matchesNamedTag=function(b){return this.matchesTag(l.NAMED_TAG)(b)},y.prototype.matchesTag=function(b){var I=this;return function(P){for(var M=0,z=I.metadata;M<z.length;M++){var oe=z[M];if(oe.key===b&&oe.value===P)return!0}return!1}},y}();v.Target=p},BXlA:function(A,v,a){var l=a("goqI");function o(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),g&&l(m,g)}A.exports=o,A.exports.__esModule=!0,A.exports.default=A.exports},BfLh:function(A,v,a){"use strict";A.exports=l,A.exports.default=l;function l(ne,Q,te){te=te||2;var Fe=Q&&Q.length,ze=Fe?Q[0]*te:ne.length,St=o(ne,0,ze,te,!0),ut=[];if(!St||St.next===St.prev)return ut;var Qt,vr,tt,Pe,Ne,ke,et;if(Fe&&(St=P(ne,Q,St,te)),ne.length>80*te){Qt=tt=ne[0],vr=Pe=ne[1];for(var Ge=te;Ge<ze;Ge+=te)Ne=ne[Ge],ke=ne[Ge+1],Ne<Qt&&(Qt=Ne),ke<vr&&(vr=ke),Ne>tt&&(tt=Ne),ke>Pe&&(Pe=ke);et=Math.max(tt-Qt,Pe-vr),et=et!==0?1/et:0}return g(St,ut,te,Qt,vr,et),ut}function o(ne,Q,te,Fe,ze){var St,ut;if(ze===Et(ne,Q,te,Fe)>0)for(St=Q;St<te;St+=Fe)ut=Ze(St,ne[St],ne[St+1],ut);else for(St=te-Fe;St>=Q;St-=Fe)ut=Ze(St,ne[St],ne[St+1],ut);return ut&&D(ut,ut.next)&&(rt(ut),ut=ut.next),ut}function m(ne,Q){if(!ne)return ne;Q||(Q=ne);var te=ne,Fe;do if(Fe=!1,!te.steiner&&(D(te,te.next)||Oe(te.prev,te,te.next)===0)){if(rt(te),te=Q=te.prev,te===te.next)break;Fe=!0}else te=te.next;while(Fe||te!==Q);return Q}function g(ne,Q,te,Fe,ze,St,ut){if(!!ne){!ut&&St&&ee(ne,Fe,ze,St);for(var Qt=ne,vr,tt;ne.prev!==ne.next;){if(vr=ne.prev,tt=ne.next,St?y(ne,Fe,ze,St):p(ne)){Q.push(vr.i/te),Q.push(ne.i/te),Q.push(tt.i/te),rt(ne),ne=tt.next,Qt=tt.next;continue}if(ne=tt,ne===Qt){ut?ut===1?(ne=b(m(ne),Q,te),g(ne,Q,te,Fe,ze,St,2)):ut===2&&I(ne,Q,te,Fe,ze,St):g(m(ne),Q,te,Fe,ze,St,1);break}}}}function p(ne){var Q=ne.prev,te=ne,Fe=ne.next;if(Oe(Q,te,Fe)>=0)return!1;for(var ze=ne.next.next;ze!==ne.prev;){if(fe(Q.x,Q.y,te.x,te.y,Fe.x,Fe.y,ze.x,ze.y)&&Oe(ze.prev,ze,ze.next)>=0)return!1;ze=ze.next}return!0}function y(ne,Q,te,Fe){var ze=ne.prev,St=ne,ut=ne.next;if(Oe(ze,St,ut)>=0)return!1;for(var Qt=ze.x<St.x?ze.x<ut.x?ze.x:ut.x:St.x<ut.x?St.x:ut.x,vr=ze.y<St.y?ze.y<ut.y?ze.y:ut.y:St.y<ut.y?St.y:ut.y,tt=ze.x>St.x?ze.x>ut.x?ze.x:ut.x:St.x>ut.x?St.x:ut.x,Pe=ze.y>St.y?ze.y>ut.y?ze.y:ut.y:St.y>ut.y?St.y:ut.y,Ne=J(Qt,vr,Q,te,Fe),ke=J(tt,Pe,Q,te,Fe),et=ne.prevZ,Ge=ne.nextZ;et&&et.z>=Ne&&Ge&&Ge.z<=ke;){if(et!==ne.prev&&et!==ne.next&&fe(ze.x,ze.y,St.x,St.y,ut.x,ut.y,et.x,et.y)&&Oe(et.prev,et,et.next)>=0||(et=et.prevZ,Ge!==ne.prev&&Ge!==ne.next&&fe(ze.x,ze.y,St.x,St.y,ut.x,ut.y,Ge.x,Ge.y)&&Oe(Ge.prev,Ge,Ge.next)>=0))return!1;Ge=Ge.nextZ}for(;et&&et.z>=Ne;){if(et!==ne.prev&&et!==ne.next&&fe(ze.x,ze.y,St.x,St.y,ut.x,ut.y,et.x,et.y)&&Oe(et.prev,et,et.next)>=0)return!1;et=et.prevZ}for(;Ge&&Ge.z<=ke;){if(Ge!==ne.prev&&Ge!==ne.next&&fe(ze.x,ze.y,St.x,St.y,ut.x,ut.y,Ge.x,Ge.y)&&Oe(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.nextZ}return!0}function b(ne,Q,te){var Fe=ne;do{var ze=Fe.prev,St=Fe.next.next;!D(ze,St)&&De(ze,Fe,Fe.next,St)&&W(ze,St)&&W(St,ze)&&(Q.push(ze.i/te),Q.push(Fe.i/te),Q.push(St.i/te),rt(Fe),rt(Fe.next),Fe=ne=St),Fe=Fe.next}while(Fe!==ne);return m(Fe)}function I(ne,Q,te,Fe,ze,St){var ut=ne;do{for(var Qt=ut.next.next;Qt!==ut.prev;){if(ut.i!==Qt.i&&X(ut,Qt)){var vr=C(ut,Qt);ut=m(ut,ut.next),vr=m(vr,vr.next),g(ut,Q,te,Fe,ze,St),g(vr,Q,te,Fe,ze,St);return}Qt=Qt.next}ut=ut.next}while(ut!==ne)}function P(ne,Q,te,Fe){var ze=[],St,ut,Qt,vr,tt;for(St=0,ut=Q.length;St<ut;St++)Qt=Q[St]*Fe,vr=St<ut-1?Q[St+1]*Fe:ne.length,tt=o(ne,Qt,vr,Fe,!1),tt===tt.next&&(tt.steiner=!0),ze.push(se(tt));for(ze.sort(M),St=0;St<ze.length;St++)te=z(ze[St],te),te=m(te,te.next);return te}function M(ne,Q){return ne.x-Q.x}function z(ne,Q){var te=oe(ne,Q);if(!te)return Q;var Fe=C(te,ne),ze=m(te,te.next);return m(Fe,Fe.next),Q===te?ze:Q}function oe(ne,Q){var te=Q,Fe=ne.x,ze=ne.y,St=-Infinity,ut;do{if(ze<=te.y&&ze>=te.next.y&&te.next.y!==te.y){var Qt=te.x+(ze-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(Qt<=Fe&&Qt>St){if(St=Qt,Qt===Fe){if(ze===te.y)return te;if(ze===te.next.y)return te.next}ut=te.x<te.next.x?te:te.next}}te=te.next}while(te!==Q);if(!ut)return null;if(Fe===St)return ut;var vr=ut,tt=ut.x,Pe=ut.y,Ne=Infinity,ke;te=ut;do Fe>=te.x&&te.x>=tt&&Fe!==te.x&&fe(ze<Pe?Fe:St,ze,tt,Pe,ze<Pe?St:Fe,ze,te.x,te.y)&&(ke=Math.abs(ze-te.y)/(Fe-te.x),W(te,ne)&&(ke<Ne||ke===Ne&&(te.x>ut.x||te.x===ut.x&&G(ut,te)))&&(ut=te,Ne=ke)),te=te.next;while(te!==vr);return ut}function G(ne,Q){return Oe(ne.prev,ne,Q.prev)<0&&Oe(Q.next,ne,ne.next)<0}function ee(ne,Q,te,Fe){var ze=ne;do ze.z===null&&(ze.z=J(ze.x,ze.y,Q,te,Fe)),ze.prevZ=ze.prev,ze.nextZ=ze.next,ze=ze.next;while(ze!==ne);ze.prevZ.nextZ=null,ze.prevZ=null,pe(ze)}function pe(ne){var Q,te,Fe,ze,St,ut,Qt,vr,tt=1;do{for(te=ne,ne=null,St=null,ut=0;te;){for(ut++,Fe=te,Qt=0,Q=0;Q<tt&&(Qt++,Fe=Fe.nextZ,!!Fe);Q++);for(vr=tt;Qt>0||vr>0&&Fe;)Qt!==0&&(vr===0||!Fe||te.z<=Fe.z)?(ze=te,te=te.nextZ,Qt--):(ze=Fe,Fe=Fe.nextZ,vr--),St?St.nextZ=ze:ne=ze,ze.prevZ=St,St=ze;te=Fe}St.nextZ=null,tt*=2}while(ut>1);return ne}function J(ne,Q,te,Fe,ze){return ne=32767*(ne-te)*ze,Q=32767*(Q-Fe)*ze,ne=(ne|ne<<8)&16711935,ne=(ne|ne<<4)&252645135,ne=(ne|ne<<2)&858993459,ne=(ne|ne<<1)&1431655765,Q=(Q|Q<<8)&16711935,Q=(Q|Q<<4)&252645135,Q=(Q|Q<<2)&858993459,Q=(Q|Q<<1)&1431655765,ne|Q<<1}function se(ne){var Q=ne,te=ne;do(Q.x<te.x||Q.x===te.x&&Q.y<te.y)&&(te=Q),Q=Q.next;while(Q!==ne);return te}function fe(ne,Q,te,Fe,ze,St,ut,Qt){return(ze-ut)*(Q-Qt)-(ne-ut)*(St-Qt)>=0&&(ne-ut)*(Fe-Qt)-(te-ut)*(Q-Qt)>=0&&(te-ut)*(St-Qt)-(ze-ut)*(Fe-Qt)>=0}function X(ne,Q){return ne.next.i!==Q.i&&ne.prev.i!==Q.i&&!Le(ne,Q)&&(W(ne,Q)&&W(Q,ne)&&He(ne,Q)&&(Oe(ne.prev,ne,Q.prev)||Oe(ne,Q.prev,Q))||D(ne,Q)&&Oe(ne.prev,ne,ne.next)>0&&Oe(Q.prev,Q,Q.next)>0)}function Oe(ne,Q,te){return(Q.y-ne.y)*(te.x-Q.x)-(Q.x-ne.x)*(te.y-Q.y)}function D(ne,Q){return ne.x===Q.x&&ne.y===Q.y}function De(ne,Q,te,Fe){var ze=Ke(Oe(ne,Q,te)),St=Ke(Oe(ne,Q,Fe)),ut=Ke(Oe(te,Fe,ne)),Qt=Ke(Oe(te,Fe,Q));return!!(ze!==St&&ut!==Qt||ze===0&&ot(ne,te,Q)||St===0&&ot(ne,Fe,Q)||ut===0&&ot(te,ne,Fe)||Qt===0&&ot(te,Q,Fe))}function ot(ne,Q,te){return Q.x<=Math.max(ne.x,te.x)&&Q.x>=Math.min(ne.x,te.x)&&Q.y<=Math.max(ne.y,te.y)&&Q.y>=Math.min(ne.y,te.y)}function Ke(ne){return ne>0?1:ne<0?-1:0}function Le(ne,Q){var te=ne;do{if(te.i!==ne.i&&te.next.i!==ne.i&&te.i!==Q.i&&te.next.i!==Q.i&&De(te,te.next,ne,Q))return!0;te=te.next}while(te!==ne);return!1}function W(ne,Q){return Oe(ne.prev,ne,ne.next)<0?Oe(ne,Q,ne.next)>=0&&Oe(ne,ne.prev,Q)>=0:Oe(ne,Q,ne.prev)<0||Oe(ne,ne.next,Q)<0}function He(ne,Q){var te=ne,Fe=!1,ze=(ne.x+Q.x)/2,St=(ne.y+Q.y)/2;do te.y>St!=te.next.y>St&&te.next.y!==te.y&&ze<(te.next.x-te.x)*(St-te.y)/(te.next.y-te.y)+te.x&&(Fe=!Fe),te=te.next;while(te!==ne);return Fe}function C(ne,Q){var te=new At(ne.i,ne.x,ne.y),Fe=new At(Q.i,Q.x,Q.y),ze=ne.next,St=Q.prev;return ne.next=Q,Q.prev=ne,te.next=ze,ze.prev=te,Fe.next=te,te.prev=Fe,St.next=Fe,Fe.prev=St,Fe}function Ze(ne,Q,te,Fe){var ze=new At(ne,Q,te);return Fe?(ze.next=Fe.next,ze.prev=Fe,Fe.next.prev=ze,Fe.next=ze):(ze.prev=ze,ze.next=ze),ze}function rt(ne){ne.next.prev=ne.prev,ne.prev.next=ne.next,ne.prevZ&&(ne.prevZ.nextZ=ne.nextZ),ne.nextZ&&(ne.nextZ.prevZ=ne.prevZ)}function At(ne,Q,te){this.i=ne,this.x=Q,this.y=te,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}l.deviation=function(ne,Q,te,Fe){var ze=Q&&Q.length,St=ze?Q[0]*te:ne.length,ut=Math.abs(Et(ne,0,St,te));if(ze)for(var Qt=0,vr=Q.length;Qt<vr;Qt++){var tt=Q[Qt]*te,Pe=Qt<vr-1?Q[Qt+1]*te:ne.length;ut-=Math.abs(Et(ne,tt,Pe,te))}var Ne=0;for(Qt=0;Qt<Fe.length;Qt+=3){var ke=Fe[Qt]*te,et=Fe[Qt+1]*te,Ge=Fe[Qt+2]*te;Ne+=Math.abs((ne[ke]-ne[Ge])*(ne[et+1]-ne[ke+1])-(ne[ke]-ne[et])*(ne[Ge+1]-ne[ke+1]))}return ut===0&&Ne===0?0:Math.abs((Ne-ut)/ut)};function Et(ne,Q,te,Fe){for(var ze=0,St=Q,ut=te-Fe;St<te;St+=Fe)ze+=(ne[ut]-ne[St])*(ne[St+1]+ne[ut+1]),ut=St;return ze}l.flatten=function(ne){for(var Q=ne[0][0].length,te={vertices:[],holes:[],dimensions:Q},Fe=0,ze=0;ze<ne.length;ze++){for(var St=0;St<ne[ze].length;St++)for(var ut=0;ut<Q;ut++)te.vertices.push(ne[ze][St][ut]);ze>0&&(Fe+=ne[ze-1].length,te.holes.push(Fe))}return te}},BjoM:function(A,v){function a(l){return function(o){return l(o)}}A.exports=a},Bnag:function(A,v){function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},BwJN:function(A,v,a){var l=a("m/tl"),o=Math.max;function m(g,p,y){return p=o(p===void 0?g.length-1:p,0),function(){for(var b=arguments,I=-1,P=o(b.length-p,0),M=Array(P);++I<P;)M[I]=b[p+I];I=-1;for(var z=Array(p+1);++I<p;)z[I]=b[I];return z[p]=y(M),l(g,this,z)}}A.exports=m},"C/0V":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.getBindingDictionary=v.createMockRequest=v.plan=void 0;var l=a("o4Ii"),o=a("Z6CD"),m=a("BU00"),g=a("jHQc"),p=a("31ZN"),y=a("qbsE"),b=a("lmQL"),I=a("uYCe"),P=a("aD3b"),M=a("uhIQ"),z=a("mXAs"),oe=a("BUXl");function G(D){return D._bindingDictionary}v.getBindingDictionary=G;function ee(D,De,ot,Ke,Le,W){var He=D?g.MULTI_INJECT_TAG:g.INJECT_TAG,C=new I.Metadata(He,ot),Ze=new oe.Target(De,Ke,ot,C);if(Le!==void 0){var rt=new I.Metadata(Le,W);Ze.metadata.push(rt)}return Ze}function pe(D,De,ot,Ke,Le){var W=fe(ot.container,Le.serviceIdentifier),He=[];return W.length===l.BindingCount.NoBindingsAvailable&&ot.container.options.autoBindInjectable&&typeof Le.serviceIdentifier=="function"&&D.getConstructorMetadata(Le.serviceIdentifier).compilerGeneratedMetadata&&(ot.container.bind(Le.serviceIdentifier).toSelf(),W=fe(ot.container,Le.serviceIdentifier)),De?He=W:He=W.filter(function(C){var Ze=new z.Request(C.serviceIdentifier,ot,Ke,C,Le);return C.constraint(Ze)}),J(Le.serviceIdentifier,He,Le,ot.container),He}function J(D,De,ot,Ke){switch(De.length){case l.BindingCount.NoBindingsAvailable:if(ot.isOptional())return De;var Le=y.getServiceIdentifierAsString(D),W=o.NOT_REGISTERED;throw W+=y.listMetadataForTarget(Le,ot),W+=y.listRegisteredBindingsForServiceIdentifier(Ke,Le,fe),new Error(W);case l.BindingCount.OnlyOneBindingAvailable:if(!ot.isArray())return De;case l.BindingCount.MultipleBindingsAvailable:default:if(ot.isArray())return De;var Le=y.getServiceIdentifierAsString(D),W=o.AMBIGUOUS_MATCH+" "+Le;throw W+=y.listRegisteredBindingsForServiceIdentifier(Ke,Le,fe),new Error(W)}}function se(D,De,ot,Ke,Le,W){var He,C;if(Le===null){He=pe(D,De,Ke,null,W),C=new z.Request(ot,Ke,null,He,W);var Ze=new P.Plan(Ke,C);Ke.addPlan(Ze)}else He=pe(D,De,Ke,Le,W),C=Le.addChildRequest(W.serviceIdentifier,He,W);He.forEach(function(rt){var At=null;if(W.isArray())At=C.addChildRequest(rt.serviceIdentifier,rt,W);else{if(rt.cache)return;At=C}if(rt.type===m.BindingTypeEnum.Instance&&rt.implementationType!==null){var Et=M.getDependencies(D,rt.implementationType);if(!Ke.container.options.skipBaseClassChecks){var ne=M.getBaseClassDependencyCount(D,rt.implementationType);if(Et.length<ne){var Q=o.ARGUMENTS_LENGTH_MISMATCH(M.getFunctionName(rt.implementationType));throw new Error(Q)}}Et.forEach(function(te){se(D,!1,te.serviceIdentifier,Ke,At,te)})}})}function fe(D,De){var ot=[],Ke=G(D);return Ke.hasKey(De)?ot=Ke.get(De):D.parent!==null&&(ot=fe(D.parent,De)),ot}function X(D,De,ot,Ke,Le,W,He,C){C===void 0&&(C=!1);var Ze=new b.Context(De),rt=ee(ot,Ke,Le,"",W,He);try{return se(D,C,Le,Ze,null,rt),Ze}catch(At){throw p.isStackOverflowExeption(At)&&Ze.plan&&y.circularDependencyToException(Ze.plan.rootRequest),At}}v.plan=X;function Oe(D,De,ot,Ke){var Le=new oe.Target(m.TargetTypeEnum.Variable,"",De,new I.Metadata(ot,Ke)),W=new b.Context(D),He=new z.Request(De,W,null,[],Le);return He}v.createMockRequest=Oe},CHUC:function(A,v,a){var l=a("eTwl"),o=a("5EPH"),m=a("KEWC"),g=a("681X"),p=a("9yH6"),y=a("/rul");function b(I){var P=this.__data__=new l(I);this.size=P.size}b.prototype.clear=o,b.prototype.delete=m,b.prototype.get=g,b.prototype.has=p,b.prototype.set=y,A.exports=b},"Ck+x":function(A,v,a){var l=a("eHdO"),o=a("BwJN"),m=a("UUZ0");function g(p,y){return m(o(p,y,l),p+"")}A.exports=g},CkNm:function(A,v,a){var l=a("7zvB"),o=l["__core-js_shared__"];A.exports=o},Cm6F:function(A,v,a){var l=a("h6x2"),o=l(Object.getPrototypeOf,Object);A.exports=o},"D+ow":function(A,v){},D9lx:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingInWhenOnSyntax=void 0;var l=a("6AGu"),o=a("406g"),m=a("z4Hk"),g=function(){function p(y){this._binding=y,this._bindingWhenSyntax=new m.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new l.BindingInSyntax(y)}return p.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},p.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},p.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},p.prototype.when=function(y){return this._bindingWhenSyntax.when(y)},p.prototype.whenTargetNamed=function(y){return this._bindingWhenSyntax.whenTargetNamed(y)},p.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},p.prototype.whenTargetTagged=function(y,b){return this._bindingWhenSyntax.whenTargetTagged(y,b)},p.prototype.whenInjectedInto=function(y){return this._bindingWhenSyntax.whenInjectedInto(y)},p.prototype.whenParentNamed=function(y){return this._bindingWhenSyntax.whenParentNamed(y)},p.prototype.whenParentTagged=function(y,b){return this._bindingWhenSyntax.whenParentTagged(y,b)},p.prototype.whenAnyAncestorIs=function(y){return this._bindingWhenSyntax.whenAnyAncestorIs(y)},p.prototype.whenNoAncestorIs=function(y){return this._bindingWhenSyntax.whenNoAncestorIs(y)},p.prototype.whenAnyAncestorNamed=function(y){return this._bindingWhenSyntax.whenAnyAncestorNamed(y)},p.prototype.whenAnyAncestorTagged=function(y,b){return this._bindingWhenSyntax.whenAnyAncestorTagged(y,b)},p.prototype.whenNoAncestorNamed=function(y){return this._bindingWhenSyntax.whenNoAncestorNamed(y)},p.prototype.whenNoAncestorTagged=function(y,b){return this._bindingWhenSyntax.whenNoAncestorTagged(y,b)},p.prototype.whenAnyAncestorMatches=function(y){return this._bindingWhenSyntax.whenAnyAncestorMatches(y)},p.prototype.whenNoAncestorMatches=function(y){return this._bindingWhenSyntax.whenNoAncestorMatches(y)},p.prototype.onActivation=function(y){return this._bindingOnSyntax.onActivation(y)},p}();v.BindingInWhenOnSyntax=g},DNrJ:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingInWhenOnSyntax=void 0;var l=a("95ij"),o=a("HgGm"),m=a("mvr4"),g=function(){function p(y){this._binding=y,this._bindingWhenSyntax=new m.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new l.BindingInSyntax(y)}return p.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},p.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},p.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},p.prototype.when=function(y){return this._bindingWhenSyntax.when(y)},p.prototype.whenTargetNamed=function(y){return this._bindingWhenSyntax.whenTargetNamed(y)},p.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},p.prototype.whenTargetTagged=function(y,b){return this._bindingWhenSyntax.whenTargetTagged(y,b)},p.prototype.whenInjectedInto=function(y){return this._bindingWhenSyntax.whenInjectedInto(y)},p.prototype.whenParentNamed=function(y){return this._bindingWhenSyntax.whenParentNamed(y)},p.prototype.whenParentTagged=function(y,b){return this._bindingWhenSyntax.whenParentTagged(y,b)},p.prototype.whenAnyAncestorIs=function(y){return this._bindingWhenSyntax.whenAnyAncestorIs(y)},p.prototype.whenNoAncestorIs=function(y){return this._bindingWhenSyntax.whenNoAncestorIs(y)},p.prototype.whenAnyAncestorNamed=function(y){return this._bindingWhenSyntax.whenAnyAncestorNamed(y)},p.prototype.whenAnyAncestorTagged=function(y,b){return this._bindingWhenSyntax.whenAnyAncestorTagged(y,b)},p.prototype.whenNoAncestorNamed=function(y){return this._bindingWhenSyntax.whenNoAncestorNamed(y)},p.prototype.whenNoAncestorTagged=function(y,b){return this._bindingWhenSyntax.whenNoAncestorTagged(y,b)},p.prototype.whenAnyAncestorMatches=function(y){return this._bindingWhenSyntax.whenAnyAncestorMatches(y)},p.prototype.whenNoAncestorMatches=function(y){return this._bindingWhenSyntax.whenNoAncestorMatches(y)},p.prototype.onActivation=function(y){return this._bindingOnSyntax.onActivation(y)},p}();v.BindingInWhenOnSyntax=g},DUB7:function(A,v,a){var l=a("gmeq"),o=a("msMk"),m=a("3y02");function g(p){return o(p)?m(p):l(p)}A.exports=g},DmdW:function(A,v,a){var l=a("wU1a"),o=a("tNaB"),m=a("XwJk");function g(p,y,b){return y===y?m(p,y,b):l(p,o,b)}A.exports=g},DxzV:function(A,v){function a(){}A.exports=a},EN1L:function(A,v,a){var l=a("T2Ds"),o=a("aTWO"),m=a("xs0j"),g="['\u2019]",p=RegExp(g,"g");function y(b){return function(I){return l(m(o(I).replace(p,"")),b,"")}}A.exports=y},ENOr:function(A,v){function a(l){return function(){return l}}A.exports=a},EbDI:function(A,v){function a(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},EfZ0:function(A,v,a){"use strict";var l={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},F06p:function(A,v,a){var l=a("5OUF"),o=a("ioZ4"),m=a("mIFG");function g(p){return m(p)?l(p,!0):o(p)}A.exports=g},F1nq:function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\u2700-\\u27bf",y="a-z\\xdf-\\xf6\\xf8-\\xff",b="\\xac\\xb1\\xd7\\xf7",I="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",P="\\u2000-\\u206f",M=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z="A-Z\\xc0-\\xd6\\xd8-\\xde",oe="\\ufe0e\\ufe0f",G=b+I+P+M,ee="['\u2019]",pe="["+G+"]",J="["+g+"]",se="\\d+",fe="["+p+"]",X="["+y+"]",Oe="[^"+a+G+se+p+y+z+"]",D="\\ud83c[\\udffb-\\udfff]",De="(?:"+J+"|"+D+")",ot="[^"+a+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",W="["+z+"]",He="\\u200d",C="(?:"+X+"|"+Oe+")",Ze="(?:"+W+"|"+Oe+")",rt="(?:"+ee+"(?:d|ll|m|re|s|t|ve))?",At="(?:"+ee+"(?:D|LL|M|RE|S|T|VE))?",Et=De+"?",ne="["+oe+"]?",Q="(?:"+He+"(?:"+[ot,Ke,Le].join("|")+")"+ne+Et+")*",te="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ze=ne+Et+Q,St="(?:"+[fe,Ke,Le].join("|")+")"+ze,ut=RegExp([W+"?"+X+"+"+rt+"(?="+[pe,W,"$"].join("|")+")",Ze+"+"+At+"(?="+[pe,W+C,"$"].join("|")+")",W+"?"+C+"+"+rt,W+"+"+At,Fe,te,se,St].join("|"),"g");function Qt(vr){return vr.match(ut)||[]}A.exports=Qt},FI6e:function(A,v){},FNCk:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingWhenOnSyntax=void 0;var l=a("HgGm"),o=a("mvr4"),m=function(){function g(p){this._binding=p,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new l.BindingOnSyntax(this._binding)}return g.prototype.when=function(p){return this._bindingWhenSyntax.when(p)},g.prototype.whenTargetNamed=function(p){return this._bindingWhenSyntax.whenTargetNamed(p)},g.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},g.prototype.whenTargetTagged=function(p,y){return this._bindingWhenSyntax.whenTargetTagged(p,y)},g.prototype.whenInjectedInto=function(p){return this._bindingWhenSyntax.whenInjectedInto(p)},g.prototype.whenParentNamed=function(p){return this._bindingWhenSyntax.whenParentNamed(p)},g.prototype.whenParentTagged=function(p,y){return this._bindingWhenSyntax.whenParentTagged(p,y)},g.prototype.whenAnyAncestorIs=function(p){return this._bindingWhenSyntax.whenAnyAncestorIs(p)},g.prototype.whenNoAncestorIs=function(p){return this._bindingWhenSyntax.whenNoAncestorIs(p)},g.prototype.whenAnyAncestorNamed=function(p){return this._bindingWhenSyntax.whenAnyAncestorNamed(p)},g.prototype.whenAnyAncestorTagged=function(p,y){return this._bindingWhenSyntax.whenAnyAncestorTagged(p,y)},g.prototype.whenNoAncestorNamed=function(p){return this._bindingWhenSyntax.whenNoAncestorNamed(p)},g.prototype.whenNoAncestorTagged=function(p,y){return this._bindingWhenSyntax.whenNoAncestorTagged(p,y)},g.prototype.whenAnyAncestorMatches=function(p){return this._bindingWhenSyntax.whenAnyAncestorMatches(p)},g.prototype.whenNoAncestorMatches=function(p){return this._bindingWhenSyntax.whenNoAncestorMatches(p)},g.prototype.onActivation=function(p){return this._bindingOnSyntax.onActivation(p)},g}();v.BindingWhenOnSyntax=m},FV85:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.TargetTypeEnum=v.BindingTypeEnum=v.BindingScopeEnum=void 0;var l={Request:"Request",Singleton:"Singleton",Transient:"Transient"};v.BindingScopeEnum=l;var o={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};v.BindingTypeEnum=o;var m={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};v.TargetTypeEnum=m},FZ3y:function(A,v){var a=Object.prototype,l=a.toString;function o(m){return l.call(m)}A.exports=o},G5jF:function(A,v){function a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},GHZi:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.QueryableString=void 0;var l=function(){function o(m){this.str=m}return o.prototype.startsWith=function(m){return this.str.indexOf(m)===0},o.prototype.endsWith=function(m){var g="",p=m.split("").reverse().join("");return g=this.str.split("").reverse().join(""),this.startsWith.call({str:g},p)},o.prototype.contains=function(m){return this.str.indexOf(m)!==-1},o.prototype.equals=function(m){return this.str===m},o.prototype.value=function(){return this.str},o}();v.QueryableString=l},GShg:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.postConstruct=void 0;var l=a("Z6CD"),o=a("jHQc"),m=a("uYCe");function g(){return function(p,y,b){var I=new m.Metadata(o.POST_CONSTRUCT,y);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,p.constructor))throw new Error(l.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,I,p.constructor)}}v.postConstruct=g},GV3H:function(A,v,a){"use strict";a.d(v,"a",function(){return l}),a.d(v,"b",function(){return o}),a.d(v,"c",function(){return m}),a.d(v,"d",function(){return g});var l={};a.r(l),a.d(l,"create",function(){return oe}),a.d(l,"clone",function(){return G}),a.d(l,"copy",function(){return ee}),a.d(l,"fromValues",function(){return pe}),a.d(l,"set",function(){return J}),a.d(l,"identity",function(){return se}),a.d(l,"transpose",function(){return fe}),a.d(l,"invert",function(){return X}),a.d(l,"adjoint",function(){return Oe}),a.d(l,"determinant",function(){return D}),a.d(l,"multiply",function(){return De}),a.d(l,"translate",function(){return ot}),a.d(l,"scale",function(){return Ke}),a.d(l,"rotate",function(){return Le}),a.d(l,"rotateX",function(){return W}),a.d(l,"rotateY",function(){return He}),a.d(l,"rotateZ",function(){return C}),a.d(l,"fromTranslation",function(){return Ze}),a.d(l,"fromScaling",function(){return rt}),a.d(l,"fromRotation",function(){return At}),a.d(l,"fromXRotation",function(){return Et}),a.d(l,"fromYRotation",function(){return ne}),a.d(l,"fromZRotation",function(){return Q}),a.d(l,"fromRotationTranslation",function(){return te}),a.d(l,"fromQuat2",function(){return Fe}),a.d(l,"getTranslation",function(){return ze}),a.d(l,"getScaling",function(){return St}),a.d(l,"getRotation",function(){return ut}),a.d(l,"fromRotationTranslationScale",function(){return Qt}),a.d(l,"fromRotationTranslationScaleOrigin",function(){return vr}),a.d(l,"fromQuat",function(){return tt}),a.d(l,"frustum",function(){return Pe}),a.d(l,"perspectiveNO",function(){return Ne}),a.d(l,"perspective",function(){return ke}),a.d(l,"perspectiveZO",function(){return et}),a.d(l,"perspectiveFromFieldOfView",function(){return Ge}),a.d(l,"orthoNO",function(){return Ot}),a.d(l,"ortho",function(){return Bt}),a.d(l,"orthoZO",function(){return gt}),a.d(l,"lookAt",function(){return ge}),a.d(l,"targetTo",function(){return Lt}),a.d(l,"str",function(){return qt}),a.d(l,"frob",function(){return xr}),a.d(l,"add",function(){return tr}),a.d(l,"subtract",function(){return Xr}),a.d(l,"multiplyScalar",function(){return rr}),a.d(l,"multiplyScalarAndAdd",function(){return bn}),a.d(l,"exactEquals",function(){return ue}),a.d(l,"equals",function(){return tn}),a.d(l,"mul",function(){return Fn}),a.d(l,"sub",function(){return Fi});var o={};a.r(o),a.d(o,"create",function(){return ki}),a.d(o,"clone",function(){return ve}),a.d(o,"fromValues",function(){return Ye}),a.d(o,"copy",function(){return vt}),a.d(o,"set",function(){return wt}),a.d(o,"add",function(){return me}),a.d(o,"subtract",function(){return Pn}),a.d(o,"multiply",function(){return Cr}),a.d(o,"divide",function(){return Nt}),a.d(o,"ceil",function(){return it}),a.d(o,"floor",function(){return Ce}),a.d(o,"min",function(){return Rt}),a.d(o,"max",function(){return _t}),a.d(o,"round",function(){return Tn}),a.d(o,"scale",function(){return Ve}),a.d(o,"scaleAndAdd",function(){return hi}),a.d(o,"distance",function(){return An}),a.d(o,"squaredDistance",function(){return xi}),a.d(o,"length",function(){return Bn}),a.d(o,"squaredLength",function(){return yi}),a.d(o,"negate",function(){return Wr}),a.d(o,"inverse",function(){return Oi}),a.d(o,"normalize",function(){return Oa}),a.d(o,"dot",function(){return Aa}),a.d(o,"cross",function(){return Ui}),a.d(o,"lerp",function(){return ea}),a.d(o,"random",function(){return Ti}),a.d(o,"transformMat2",function(){return _n}),a.d(o,"transformMat2d",function(){return Ci}),a.d(o,"transformMat3",function(){return qn}),a.d(o,"transformMat4",function(){return Wi}),a.d(o,"rotate",function(){return ta}),a.d(o,"angle",function(){return si}),a.d(o,"zero",function(){return li}),a.d(o,"str",function(){return Za}),a.d(o,"exactEquals",function(){return di}),a.d(o,"equals",function(){return Ha}),a.d(o,"len",function(){return Va}),a.d(o,"sub",function(){return ra}),a.d(o,"mul",function(){return xa}),a.d(o,"div",function(){return va}),a.d(o,"dist",function(){return Vi}),a.d(o,"sqrDist",function(){return ia}),a.d(o,"sqrLen",function(){return kn}),a.d(o,"forEach",function(){return Ka});var m={};a.r(m),a.d(m,"create",function(){return Pa}),a.d(m,"clone",function(){return Qi}),a.d(m,"length",function(){return Ia}),a.d(m,"fromValues",function(){return Ma}),a.d(m,"copy",function(){return ji}),a.d(m,"set",function(){return aa}),a.d(m,"add",function(){return vi}),a.d(m,"subtract",function(){return ei}),a.d(m,"multiply",function(){return oa}),a.d(m,"divide",function(){return $i}),a.d(m,"ceil",function(){return Gi}),a.d(m,"floor",function(){return Ji}),a.d(m,"min",function(){return pa}),a.d(m,"max",function(){return ka}),a.d(m,"round",function(){return ma}),a.d(m,"scale",function(){return Bi}),a.d(m,"scaleAndAdd",function(){return Na}),a.d(m,"distance",function(){return pi}),a.d(m,"squaredDistance",function(){return zi}),a.d(m,"squaredLength",function(){return Mi}),a.d(m,"negate",function(){return Yn}),a.d(m,"inverse",function(){return bi}),a.d(m,"normalize",function(){return sa}),a.d(m,"dot",function(){return Ra}),a.d(m,"cross",function(){return Qa}),a.d(m,"lerp",function(){return ce}),a.d(m,"hermite",function(){return be}),a.d(m,"bezier",function(){return Qe}),a.d(m,"random",function(){return U}),a.d(m,"transformMat4",function(){return K}),a.d(m,"transformMat3",function(){return Me}),a.d(m,"transformQuat",function(){return ct}),a.d(m,"rotateX",function(){return lr}),a.d(m,"rotateY",function(){return Ur}),a.d(m,"rotateZ",function(){return Un}),a.d(m,"angle",function(){return cr}),a.d(m,"zero",function(){return Xi}),a.d(m,"str",function(){return Li}),a.d(m,"exactEquals",function(){return Gt}),a.d(m,"equals",function(){return s}),a.d(m,"sub",function(){return d}),a.d(m,"mul",function(){return O}),a.d(m,"div",function(){return j}),a.d(m,"dist",function(){return ae}),a.d(m,"sqrDist",function(){return Ee}),a.d(m,"len",function(){return Ue}),a.d(m,"sqrLen",function(){return st}),a.d(m,"forEach",function(){return Mt});var g={};a.r(g),a.d(g,"create",function(){return Ut}),a.d(g,"clone",function(){return Jt}),a.d(g,"fromValues",function(){return hr}),a.d(g,"copy",function(){return dr}),a.d(g,"set",function(){return Ar}),a.d(g,"add",function(){return rn}),a.d(g,"subtract",function(){return $r}),a.d(g,"multiply",function(){return sr}),a.d(g,"divide",function(){return On}),a.d(g,"ceil",function(){return c}),a.d(g,"floor",function(){return E}),a.d(g,"min",function(){return w}),a.d(g,"max",function(){return _}),a.d(g,"round",function(){return H}),a.d(g,"scale",function(){return Se}),a.d(g,"scaleAndAdd",function(){return We}),a.d(g,"distance",function(){return ht}),a.d(g,"squaredDistance",function(){return pt}),a.d(g,"length",function(){return Kt}),a.d(g,"squaredLength",function(){return ir}),a.d(g,"negate",function(){return qr}),a.d(g,"inverse",function(){return ln}),a.d(g,"normalize",function(){return Mn}),a.d(g,"dot",function(){return ui}),a.d(g,"cross",function(){return mi}),a.d(g,"lerp",function(){return Ri}),a.d(g,"random",function(){return $a}),a.d(g,"transformMat4",function(){return Ua}),a.d(g,"transformQuat",function(){return _o}),a.d(g,"zero",function(){return ho}),a.d(g,"str",function(){return Bo}),a.d(g,"exactEquals",function(){return Co}),a.d(g,"equals",function(){return To}),a.d(g,"sub",function(){return ns}),a.d(g,"mul",function(){return Rr}),a.d(g,"div",function(){return Go}),a.d(g,"dist",function(){return ua}),a.d(g,"sqrDist",function(){return ja}),a.d(g,"len",function(){return ys}),a.d(g,"sqrLen",function(){return vo}),a.d(g,"forEach",function(){return is});var p=1e-6,y=typeof Float32Array!="undefined"?Float32Array:Array,b=Math.random;function I(f){y=f}var P=Math.PI/180;function M(f){return f*P}function z(f,T){return Math.abs(f-T)<=p*Math.max(1,Math.abs(f),Math.abs(T))}Math.hypot||(Math.hypot=function(){for(var f=0,T=arguments.length;T--;)f+=arguments[T]*arguments[T];return Math.sqrt(f)});function oe(){var f=new y(16);return y!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f}function G(f){var T=new y(16);return T[0]=f[0],T[1]=f[1],T[2]=f[2],T[3]=f[3],T[4]=f[4],T[5]=f[5],T[6]=f[6],T[7]=f[7],T[8]=f[8],T[9]=f[9],T[10]=f[10],T[11]=f[11],T[12]=f[12],T[13]=f[13],T[14]=f[14],T[15]=f[15],T}function ee(f,T){return f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3],f[4]=T[4],f[5]=T[5],f[6]=T[6],f[7]=T[7],f[8]=T[8],f[9]=T[9],f[10]=T[10],f[11]=T[11],f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15],f}function pe(f,T,k,ie,de,Be,ft,Tt,Vt,Yt,or,Tr,Or,br,dn,un){var Sr=new y(16);return Sr[0]=f,Sr[1]=T,Sr[2]=k,Sr[3]=ie,Sr[4]=de,Sr[5]=Be,Sr[6]=ft,Sr[7]=Tt,Sr[8]=Vt,Sr[9]=Yt,Sr[10]=or,Sr[11]=Tr,Sr[12]=Or,Sr[13]=br,Sr[14]=dn,Sr[15]=un,Sr}function J(f,T,k,ie,de,Be,ft,Tt,Vt,Yt,or,Tr,Or,br,dn,un,Sr){return f[0]=T,f[1]=k,f[2]=ie,f[3]=de,f[4]=Be,f[5]=ft,f[6]=Tt,f[7]=Vt,f[8]=Yt,f[9]=or,f[10]=Tr,f[11]=Or,f[12]=br,f[13]=dn,f[14]=un,f[15]=Sr,f}function se(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function fe(f,T){if(f===T){var k=T[1],ie=T[2],de=T[3],Be=T[6],ft=T[7],Tt=T[11];f[1]=T[4],f[2]=T[8],f[3]=T[12],f[4]=k,f[6]=T[9],f[7]=T[13],f[8]=ie,f[9]=Be,f[11]=T[14],f[12]=de,f[13]=ft,f[14]=Tt}else f[0]=T[0],f[1]=T[4],f[2]=T[8],f[3]=T[12],f[4]=T[1],f[5]=T[5],f[6]=T[9],f[7]=T[13],f[8]=T[2],f[9]=T[6],f[10]=T[10],f[11]=T[14],f[12]=T[3],f[13]=T[7],f[14]=T[11],f[15]=T[15];return f}function X(f,T){var k=T[0],ie=T[1],de=T[2],Be=T[3],ft=T[4],Tt=T[5],Vt=T[6],Yt=T[7],or=T[8],Tr=T[9],Or=T[10],br=T[11],dn=T[12],un=T[13],Sr=T[14],wn=T[15],Ii=k*Tt-ie*ft,ti=k*Vt-de*ft,$n=k*Yt-Be*ft,Yr=ie*Vt-de*Tt,Zn=ie*Yt-Be*Tt,In=de*Yt-Be*Vt,ba=or*un-Tr*dn,na=or*Sr-Or*dn,ga=or*wn-br*dn,ya=Tr*Sr-Or*un,_a=Tr*wn-br*un,ca=Or*wn-br*Sr,ci=Ii*ca-ti*_a+$n*ya+Yr*ga-Zn*na+In*ba;return ci?(ci=1/ci,f[0]=(Tt*ca-Vt*_a+Yt*ya)*ci,f[1]=(de*_a-ie*ca-Be*ya)*ci,f[2]=(un*In-Sr*Zn+wn*Yr)*ci,f[3]=(Or*Zn-Tr*In-br*Yr)*ci,f[4]=(Vt*ga-ft*ca-Yt*na)*ci,f[5]=(k*ca-de*ga+Be*na)*ci,f[6]=(Sr*$n-dn*In-wn*ti)*ci,f[7]=(or*In-Or*$n+br*ti)*ci,f[8]=(ft*_a-Tt*ga+Yt*ba)*ci,f[9]=(ie*ga-k*_a-Be*ba)*ci,f[10]=(dn*Zn-un*$n+wn*Ii)*ci,f[11]=(Tr*$n-or*Zn-br*Ii)*ci,f[12]=(Tt*na-ft*ya-Vt*ba)*ci,f[13]=(k*ya-ie*na+de*ba)*ci,f[14]=(un*ti-dn*Yr-Sr*Ii)*ci,f[15]=(or*Yr-Tr*ti+Or*Ii)*ci,f):null}function Oe(f,T){var k=T[0],ie=T[1],de=T[2],Be=T[3],ft=T[4],Tt=T[5],Vt=T[6],Yt=T[7],or=T[8],Tr=T[9],Or=T[10],br=T[11],dn=T[12],un=T[13],Sr=T[14],wn=T[15];return f[0]=Tt*(Or*wn-br*Sr)-Tr*(Vt*wn-Yt*Sr)+un*(Vt*br-Yt*Or),f[1]=-(ie*(Or*wn-br*Sr)-Tr*(de*wn-Be*Sr)+un*(de*br-Be*Or)),f[2]=ie*(Vt*wn-Yt*Sr)-Tt*(de*wn-Be*Sr)+un*(de*Yt-Be*Vt),f[3]=-(ie*(Vt*br-Yt*Or)-Tt*(de*br-Be*Or)+Tr*(de*Yt-Be*Vt)),f[4]=-(ft*(Or*wn-br*Sr)-or*(Vt*wn-Yt*Sr)+dn*(Vt*br-Yt*Or)),f[5]=k*(Or*wn-br*Sr)-or*(de*wn-Be*Sr)+dn*(de*br-Be*Or),f[6]=-(k*(Vt*wn-Yt*Sr)-ft*(de*wn-Be*Sr)+dn*(de*Yt-Be*Vt)),f[7]=k*(Vt*br-Yt*Or)-ft*(de*br-Be*Or)+or*(de*Yt-Be*Vt),f[8]=ft*(Tr*wn-br*un)-or*(Tt*wn-Yt*un)+dn*(Tt*br-Yt*Tr),f[9]=-(k*(Tr*wn-br*un)-or*(ie*wn-Be*un)+dn*(ie*br-Be*Tr)),f[10]=k*(Tt*wn-Yt*un)-ft*(ie*wn-Be*un)+dn*(ie*Yt-Be*Tt),f[11]=-(k*(Tt*br-Yt*Tr)-ft*(ie*br-Be*Tr)+or*(ie*Yt-Be*Tt)),f[12]=-(ft*(Tr*Sr-Or*un)-or*(Tt*Sr-Vt*un)+dn*(Tt*Or-Vt*Tr)),f[13]=k*(Tr*Sr-Or*un)-or*(ie*Sr-de*un)+dn*(ie*Or-de*Tr),f[14]=-(k*(Tt*Sr-Vt*un)-ft*(ie*Sr-de*un)+dn*(ie*Vt-de*Tt)),f[15]=k*(Tt*Or-Vt*Tr)-ft*(ie*Or-de*Tr)+or*(ie*Vt-de*Tt),f}function D(f){var T=f[0],k=f[1],ie=f[2],de=f[3],Be=f[4],ft=f[5],Tt=f[6],Vt=f[7],Yt=f[8],or=f[9],Tr=f[10],Or=f[11],br=f[12],dn=f[13],un=f[14],Sr=f[15],wn=T*ft-k*Be,Ii=T*Tt-ie*Be,ti=T*Vt-de*Be,$n=k*Tt-ie*ft,Yr=k*Vt-de*ft,Zn=ie*Vt-de*Tt,In=Yt*dn-or*br,ba=Yt*un-Tr*br,na=Yt*Sr-Or*br,ga=or*un-Tr*dn,ya=or*Sr-Or*dn,_a=Tr*Sr-Or*un;return wn*_a-Ii*ya+ti*ga+$n*na-Yr*ba+Zn*In}function De(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=T[3],Tt=T[4],Vt=T[5],Yt=T[6],or=T[7],Tr=T[8],Or=T[9],br=T[10],dn=T[11],un=T[12],Sr=T[13],wn=T[14],Ii=T[15],ti=k[0],$n=k[1],Yr=k[2],Zn=k[3];return f[0]=ti*ie+$n*Tt+Yr*Tr+Zn*un,f[1]=ti*de+$n*Vt+Yr*Or+Zn*Sr,f[2]=ti*Be+$n*Yt+Yr*br+Zn*wn,f[3]=ti*ft+$n*or+Yr*dn+Zn*Ii,ti=k[4],$n=k[5],Yr=k[6],Zn=k[7],f[4]=ti*ie+$n*Tt+Yr*Tr+Zn*un,f[5]=ti*de+$n*Vt+Yr*Or+Zn*Sr,f[6]=ti*Be+$n*Yt+Yr*br+Zn*wn,f[7]=ti*ft+$n*or+Yr*dn+Zn*Ii,ti=k[8],$n=k[9],Yr=k[10],Zn=k[11],f[8]=ti*ie+$n*Tt+Yr*Tr+Zn*un,f[9]=ti*de+$n*Vt+Yr*Or+Zn*Sr,f[10]=ti*Be+$n*Yt+Yr*br+Zn*wn,f[11]=ti*ft+$n*or+Yr*dn+Zn*Ii,ti=k[12],$n=k[13],Yr=k[14],Zn=k[15],f[12]=ti*ie+$n*Tt+Yr*Tr+Zn*un,f[13]=ti*de+$n*Vt+Yr*Or+Zn*Sr,f[14]=ti*Be+$n*Yt+Yr*br+Zn*wn,f[15]=ti*ft+$n*or+Yr*dn+Zn*Ii,f}function ot(f,T,k){var ie=k[0],de=k[1],Be=k[2],ft,Tt,Vt,Yt,or,Tr,Or,br,dn,un,Sr,wn;return T===f?(f[12]=T[0]*ie+T[4]*de+T[8]*Be+T[12],f[13]=T[1]*ie+T[5]*de+T[9]*Be+T[13],f[14]=T[2]*ie+T[6]*de+T[10]*Be+T[14],f[15]=T[3]*ie+T[7]*de+T[11]*Be+T[15]):(ft=T[0],Tt=T[1],Vt=T[2],Yt=T[3],or=T[4],Tr=T[5],Or=T[6],br=T[7],dn=T[8],un=T[9],Sr=T[10],wn=T[11],f[0]=ft,f[1]=Tt,f[2]=Vt,f[3]=Yt,f[4]=or,f[5]=Tr,f[6]=Or,f[7]=br,f[8]=dn,f[9]=un,f[10]=Sr,f[11]=wn,f[12]=ft*ie+or*de+dn*Be+T[12],f[13]=Tt*ie+Tr*de+un*Be+T[13],f[14]=Vt*ie+Or*de+Sr*Be+T[14],f[15]=Yt*ie+br*de+wn*Be+T[15]),f}function Ke(f,T,k){var ie=k[0],de=k[1],Be=k[2];return f[0]=T[0]*ie,f[1]=T[1]*ie,f[2]=T[2]*ie,f[3]=T[3]*ie,f[4]=T[4]*de,f[5]=T[5]*de,f[6]=T[6]*de,f[7]=T[7]*de,f[8]=T[8]*Be,f[9]=T[9]*Be,f[10]=T[10]*Be,f[11]=T[11]*Be,f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15],f}function Le(f,T,k,ie){var de=ie[0],Be=ie[1],ft=ie[2],Tt=Math.hypot(de,Be,ft),Vt,Yt,or,Tr,Or,br,dn,un,Sr,wn,Ii,ti,$n,Yr,Zn,In,ba,na,ga,ya,_a,ca,ci,no;return Tt<p?null:(Tt=1/Tt,de*=Tt,Be*=Tt,ft*=Tt,Vt=Math.sin(k),Yt=Math.cos(k),or=1-Yt,Tr=T[0],Or=T[1],br=T[2],dn=T[3],un=T[4],Sr=T[5],wn=T[6],Ii=T[7],ti=T[8],$n=T[9],Yr=T[10],Zn=T[11],In=de*de*or+Yt,ba=Be*de*or+ft*Vt,na=ft*de*or-Be*Vt,ga=de*Be*or-ft*Vt,ya=Be*Be*or+Yt,_a=ft*Be*or+de*Vt,ca=de*ft*or+Be*Vt,ci=Be*ft*or-de*Vt,no=ft*ft*or+Yt,f[0]=Tr*In+un*ba+ti*na,f[1]=Or*In+Sr*ba+$n*na,f[2]=br*In+wn*ba+Yr*na,f[3]=dn*In+Ii*ba+Zn*na,f[4]=Tr*ga+un*ya+ti*_a,f[5]=Or*ga+Sr*ya+$n*_a,f[6]=br*ga+wn*ya+Yr*_a,f[7]=dn*ga+Ii*ya+Zn*_a,f[8]=Tr*ca+un*ci+ti*no,f[9]=Or*ca+Sr*ci+$n*no,f[10]=br*ca+wn*ci+Yr*no,f[11]=dn*ca+Ii*ci+Zn*no,T!==f&&(f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15]),f)}function W(f,T,k){var ie=Math.sin(k),de=Math.cos(k),Be=T[4],ft=T[5],Tt=T[6],Vt=T[7],Yt=T[8],or=T[9],Tr=T[10],Or=T[11];return T!==f&&(f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3],f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15]),f[4]=Be*de+Yt*ie,f[5]=ft*de+or*ie,f[6]=Tt*de+Tr*ie,f[7]=Vt*de+Or*ie,f[8]=Yt*de-Be*ie,f[9]=or*de-ft*ie,f[10]=Tr*de-Tt*ie,f[11]=Or*de-Vt*ie,f}function He(f,T,k){var ie=Math.sin(k),de=Math.cos(k),Be=T[0],ft=T[1],Tt=T[2],Vt=T[3],Yt=T[8],or=T[9],Tr=T[10],Or=T[11];return T!==f&&(f[4]=T[4],f[5]=T[5],f[6]=T[6],f[7]=T[7],f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15]),f[0]=Be*de-Yt*ie,f[1]=ft*de-or*ie,f[2]=Tt*de-Tr*ie,f[3]=Vt*de-Or*ie,f[8]=Be*ie+Yt*de,f[9]=ft*ie+or*de,f[10]=Tt*ie+Tr*de,f[11]=Vt*ie+Or*de,f}function C(f,T,k){var ie=Math.sin(k),de=Math.cos(k),Be=T[0],ft=T[1],Tt=T[2],Vt=T[3],Yt=T[4],or=T[5],Tr=T[6],Or=T[7];return T!==f&&(f[8]=T[8],f[9]=T[9],f[10]=T[10],f[11]=T[11],f[12]=T[12],f[13]=T[13],f[14]=T[14],f[15]=T[15]),f[0]=Be*de+Yt*ie,f[1]=ft*de+or*ie,f[2]=Tt*de+Tr*ie,f[3]=Vt*de+Or*ie,f[4]=Yt*de-Be*ie,f[5]=or*de-ft*ie,f[6]=Tr*de-Tt*ie,f[7]=Or*de-Vt*ie,f}function Ze(f,T){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=T[0],f[13]=T[1],f[14]=T[2],f[15]=1,f}function rt(f,T){return f[0]=T[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=T[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function At(f,T,k){var ie=k[0],de=k[1],Be=k[2],ft=Math.hypot(ie,de,Be),Tt,Vt,Yt;return ft<p?null:(ft=1/ft,ie*=ft,de*=ft,Be*=ft,Tt=Math.sin(T),Vt=Math.cos(T),Yt=1-Vt,f[0]=ie*ie*Yt+Vt,f[1]=de*ie*Yt+Be*Tt,f[2]=Be*ie*Yt-de*Tt,f[3]=0,f[4]=ie*de*Yt-Be*Tt,f[5]=de*de*Yt+Vt,f[6]=Be*de*Yt+ie*Tt,f[7]=0,f[8]=ie*Be*Yt+de*Tt,f[9]=de*Be*Yt-ie*Tt,f[10]=Be*Be*Yt+Vt,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f)}function Et(f,T){var k=Math.sin(T),ie=Math.cos(T);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=ie,f[6]=k,f[7]=0,f[8]=0,f[9]=-k,f[10]=ie,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function ne(f,T){var k=Math.sin(T),ie=Math.cos(T);return f[0]=ie,f[1]=0,f[2]=-k,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=k,f[9]=0,f[10]=ie,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Q(f,T){var k=Math.sin(T),ie=Math.cos(T);return f[0]=ie,f[1]=k,f[2]=0,f[3]=0,f[4]=-k,f[5]=ie,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function te(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=T[3],Tt=ie+ie,Vt=de+de,Yt=Be+Be,or=ie*Tt,Tr=ie*Vt,Or=ie*Yt,br=de*Vt,dn=de*Yt,un=Be*Yt,Sr=ft*Tt,wn=ft*Vt,Ii=ft*Yt;return f[0]=1-(br+un),f[1]=Tr+Ii,f[2]=Or-wn,f[3]=0,f[4]=Tr-Ii,f[5]=1-(or+un),f[6]=dn+Sr,f[7]=0,f[8]=Or+wn,f[9]=dn-Sr,f[10]=1-(or+br),f[11]=0,f[12]=k[0],f[13]=k[1],f[14]=k[2],f[15]=1,f}function Fe(f,T){var k=new y(3),ie=-T[0],de=-T[1],Be=-T[2],ft=T[3],Tt=T[4],Vt=T[5],Yt=T[6],or=T[7],Tr=ie*ie+de*de+Be*Be+ft*ft;return Tr>0?(k[0]=(Tt*ft+or*ie+Vt*Be-Yt*de)*2/Tr,k[1]=(Vt*ft+or*de+Yt*ie-Tt*Be)*2/Tr,k[2]=(Yt*ft+or*Be+Tt*de-Vt*ie)*2/Tr):(k[0]=(Tt*ft+or*ie+Vt*Be-Yt*de)*2,k[1]=(Vt*ft+or*de+Yt*ie-Tt*Be)*2,k[2]=(Yt*ft+or*Be+Tt*de-Vt*ie)*2),te(f,T,k),f}function ze(f,T){return f[0]=T[12],f[1]=T[13],f[2]=T[14],f}function St(f,T){var k=T[0],ie=T[1],de=T[2],Be=T[4],ft=T[5],Tt=T[6],Vt=T[8],Yt=T[9],or=T[10];return f[0]=Math.hypot(k,ie,de),f[1]=Math.hypot(Be,ft,Tt),f[2]=Math.hypot(Vt,Yt,or),f}function ut(f,T){var k=new y(3);St(k,T);var ie=1/k[0],de=1/k[1],Be=1/k[2],ft=T[0]*ie,Tt=T[1]*de,Vt=T[2]*Be,Yt=T[4]*ie,or=T[5]*de,Tr=T[6]*Be,Or=T[8]*ie,br=T[9]*de,dn=T[10]*Be,un=ft+or+dn,Sr=0;return un>0?(Sr=Math.sqrt(un+1)*2,f[3]=.25*Sr,f[0]=(Tr-br)/Sr,f[1]=(Or-Vt)/Sr,f[2]=(Tt-Yt)/Sr):ft>or&&ft>dn?(Sr=Math.sqrt(1+ft-or-dn)*2,f[3]=(Tr-br)/Sr,f[0]=.25*Sr,f[1]=(Tt+Yt)/Sr,f[2]=(Or+Vt)/Sr):or>dn?(Sr=Math.sqrt(1+or-ft-dn)*2,f[3]=(Or-Vt)/Sr,f[0]=(Tt+Yt)/Sr,f[1]=.25*Sr,f[2]=(Tr+br)/Sr):(Sr=Math.sqrt(1+dn-ft-or)*2,f[3]=(Tt-Yt)/Sr,f[0]=(Or+Vt)/Sr,f[1]=(Tr+br)/Sr,f[2]=.25*Sr),f}function Qt(f,T,k,ie){var de=T[0],Be=T[1],ft=T[2],Tt=T[3],Vt=de+de,Yt=Be+Be,or=ft+ft,Tr=de*Vt,Or=de*Yt,br=de*or,dn=Be*Yt,un=Be*or,Sr=ft*or,wn=Tt*Vt,Ii=Tt*Yt,ti=Tt*or,$n=ie[0],Yr=ie[1],Zn=ie[2];return f[0]=(1-(dn+Sr))*$n,f[1]=(Or+ti)*$n,f[2]=(br-Ii)*$n,f[3]=0,f[4]=(Or-ti)*Yr,f[5]=(1-(Tr+Sr))*Yr,f[6]=(un+wn)*Yr,f[7]=0,f[8]=(br+Ii)*Zn,f[9]=(un-wn)*Zn,f[10]=(1-(Tr+dn))*Zn,f[11]=0,f[12]=k[0],f[13]=k[1],f[14]=k[2],f[15]=1,f}function vr(f,T,k,ie,de){var Be=T[0],ft=T[1],Tt=T[2],Vt=T[3],Yt=Be+Be,or=ft+ft,Tr=Tt+Tt,Or=Be*Yt,br=Be*or,dn=Be*Tr,un=ft*or,Sr=ft*Tr,wn=Tt*Tr,Ii=Vt*Yt,ti=Vt*or,$n=Vt*Tr,Yr=ie[0],Zn=ie[1],In=ie[2],ba=de[0],na=de[1],ga=de[2],ya=(1-(un+wn))*Yr,_a=(br+$n)*Yr,ca=(dn-ti)*Yr,ci=(br-$n)*Zn,no=(1-(Or+wn))*Zn,No=(Sr+Ii)*Zn,F=(dn+ti)*In,re=(Sr-Ii)*In,Te=(1-(Or+un))*In;return f[0]=ya,f[1]=_a,f[2]=ca,f[3]=0,f[4]=ci,f[5]=no,f[6]=No,f[7]=0,f[8]=F,f[9]=re,f[10]=Te,f[11]=0,f[12]=k[0]+ba-(ya*ba+ci*na+F*ga),f[13]=k[1]+na-(_a*ba+no*na+re*ga),f[14]=k[2]+ga-(ca*ba+No*na+Te*ga),f[15]=1,f}function tt(f,T){var k=T[0],ie=T[1],de=T[2],Be=T[3],ft=k+k,Tt=ie+ie,Vt=de+de,Yt=k*ft,or=ie*ft,Tr=ie*Tt,Or=de*ft,br=de*Tt,dn=de*Vt,un=Be*ft,Sr=Be*Tt,wn=Be*Vt;return f[0]=1-Tr-dn,f[1]=or+wn,f[2]=Or-Sr,f[3]=0,f[4]=or-wn,f[5]=1-Yt-dn,f[6]=br+un,f[7]=0,f[8]=Or+Sr,f[9]=br-un,f[10]=1-Yt-Tr,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function Pe(f,T,k,ie,de,Be,ft){var Tt=1/(k-T),Vt=1/(de-ie),Yt=1/(Be-ft);return f[0]=Be*2*Tt,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=Be*2*Vt,f[6]=0,f[7]=0,f[8]=(k+T)*Tt,f[9]=(de+ie)*Vt,f[10]=(ft+Be)*Yt,f[11]=-1,f[12]=0,f[13]=0,f[14]=ft*Be*2*Yt,f[15]=0,f}function Ne(f,T,k,ie,de){var Be=1/Math.tan(T/2),ft;return f[0]=Be/k,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=Be,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,de!=null&&de!==Infinity?(ft=1/(ie-de),f[10]=(de+ie)*ft,f[14]=2*de*ie*ft):(f[10]=-1,f[14]=-2*ie),f}var ke=Ne;function et(f,T,k,ie,de){var Be=1/Math.tan(T/2),ft;return f[0]=Be/k,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=Be,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,de!=null&&de!==Infinity?(ft=1/(ie-de),f[10]=de*ft,f[14]=de*ie*ft):(f[10]=-1,f[14]=-ie),f}function Ge(f,T,k,ie){var de=Math.tan(T.upDegrees*Math.PI/180),Be=Math.tan(T.downDegrees*Math.PI/180),ft=Math.tan(T.leftDegrees*Math.PI/180),Tt=Math.tan(T.rightDegrees*Math.PI/180),Vt=2/(ft+Tt),Yt=2/(de+Be);return f[0]=Vt,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=Yt,f[6]=0,f[7]=0,f[8]=-((ft-Tt)*Vt*.5),f[9]=(de-Be)*Yt*.5,f[10]=ie/(k-ie),f[11]=-1,f[12]=0,f[13]=0,f[14]=ie*k/(k-ie),f[15]=0,f}function Ot(f,T,k,ie,de,Be,ft){var Tt=1/(T-k),Vt=1/(ie-de),Yt=1/(Be-ft);return f[0]=-2*Tt,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Vt,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*Yt,f[11]=0,f[12]=(T+k)*Tt,f[13]=(de+ie)*Vt,f[14]=(ft+Be)*Yt,f[15]=1,f}var Bt=Ot;function gt(f,T,k,ie,de,Be,ft){var Tt=1/(T-k),Vt=1/(ie-de),Yt=1/(Be-ft);return f[0]=-2*Tt,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Vt,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=Yt,f[11]=0,f[12]=(T+k)*Tt,f[13]=(de+ie)*Vt,f[14]=Be*Yt,f[15]=1,f}function ge(f,T,k,ie){var de,Be,ft,Tt,Vt,Yt,or,Tr,Or,br,dn=T[0],un=T[1],Sr=T[2],wn=ie[0],Ii=ie[1],ti=ie[2],$n=k[0],Yr=k[1],Zn=k[2];return Math.abs(dn-$n)<p&&Math.abs(un-Yr)<p&&Math.abs(Sr-Zn)<p?se(f):(or=dn-$n,Tr=un-Yr,Or=Sr-Zn,br=1/Math.hypot(or,Tr,Or),or*=br,Tr*=br,Or*=br,de=Ii*Or-ti*Tr,Be=ti*or-wn*Or,ft=wn*Tr-Ii*or,br=Math.hypot(de,Be,ft),br?(br=1/br,de*=br,Be*=br,ft*=br):(de=0,Be=0,ft=0),Tt=Tr*ft-Or*Be,Vt=Or*de-or*ft,Yt=or*Be-Tr*de,br=Math.hypot(Tt,Vt,Yt),br?(br=1/br,Tt*=br,Vt*=br,Yt*=br):(Tt=0,Vt=0,Yt=0),f[0]=de,f[1]=Tt,f[2]=or,f[3]=0,f[4]=Be,f[5]=Vt,f[6]=Tr,f[7]=0,f[8]=ft,f[9]=Yt,f[10]=Or,f[11]=0,f[12]=-(de*dn+Be*un+ft*Sr),f[13]=-(Tt*dn+Vt*un+Yt*Sr),f[14]=-(or*dn+Tr*un+Or*Sr),f[15]=1,f)}function Lt(f,T,k,ie){var de=T[0],Be=T[1],ft=T[2],Tt=ie[0],Vt=ie[1],Yt=ie[2],or=de-k[0],Tr=Be-k[1],Or=ft-k[2],br=or*or+Tr*Tr+Or*Or;br>0&&(br=1/Math.sqrt(br),or*=br,Tr*=br,Or*=br);var dn=Vt*Or-Yt*Tr,un=Yt*or-Tt*Or,Sr=Tt*Tr-Vt*or;return br=dn*dn+un*un+Sr*Sr,br>0&&(br=1/Math.sqrt(br),dn*=br,un*=br,Sr*=br),f[0]=dn,f[1]=un,f[2]=Sr,f[3]=0,f[4]=Tr*Sr-Or*un,f[5]=Or*dn-or*Sr,f[6]=or*un-Tr*dn,f[7]=0,f[8]=or,f[9]=Tr,f[10]=Or,f[11]=0,f[12]=de,f[13]=Be,f[14]=ft,f[15]=1,f}function qt(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}function xr(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])}function tr(f,T,k){return f[0]=T[0]+k[0],f[1]=T[1]+k[1],f[2]=T[2]+k[2],f[3]=T[3]+k[3],f[4]=T[4]+k[4],f[5]=T[5]+k[5],f[6]=T[6]+k[6],f[7]=T[7]+k[7],f[8]=T[8]+k[8],f[9]=T[9]+k[9],f[10]=T[10]+k[10],f[11]=T[11]+k[11],f[12]=T[12]+k[12],f[13]=T[13]+k[13],f[14]=T[14]+k[14],f[15]=T[15]+k[15],f}function Xr(f,T,k){return f[0]=T[0]-k[0],f[1]=T[1]-k[1],f[2]=T[2]-k[2],f[3]=T[3]-k[3],f[4]=T[4]-k[4],f[5]=T[5]-k[5],f[6]=T[6]-k[6],f[7]=T[7]-k[7],f[8]=T[8]-k[8],f[9]=T[9]-k[9],f[10]=T[10]-k[10],f[11]=T[11]-k[11],f[12]=T[12]-k[12],f[13]=T[13]-k[13],f[14]=T[14]-k[14],f[15]=T[15]-k[15],f}function rr(f,T,k){return f[0]=T[0]*k,f[1]=T[1]*k,f[2]=T[2]*k,f[3]=T[3]*k,f[4]=T[4]*k,f[5]=T[5]*k,f[6]=T[6]*k,f[7]=T[7]*k,f[8]=T[8]*k,f[9]=T[9]*k,f[10]=T[10]*k,f[11]=T[11]*k,f[12]=T[12]*k,f[13]=T[13]*k,f[14]=T[14]*k,f[15]=T[15]*k,f}function bn(f,T,k,ie){return f[0]=T[0]+k[0]*ie,f[1]=T[1]+k[1]*ie,f[2]=T[2]+k[2]*ie,f[3]=T[3]+k[3]*ie,f[4]=T[4]+k[4]*ie,f[5]=T[5]+k[5]*ie,f[6]=T[6]+k[6]*ie,f[7]=T[7]+k[7]*ie,f[8]=T[8]+k[8]*ie,f[9]=T[9]+k[9]*ie,f[10]=T[10]+k[10]*ie,f[11]=T[11]+k[11]*ie,f[12]=T[12]+k[12]*ie,f[13]=T[13]+k[13]*ie,f[14]=T[14]+k[14]*ie,f[15]=T[15]+k[15]*ie,f}function ue(f,T){return f[0]===T[0]&&f[1]===T[1]&&f[2]===T[2]&&f[3]===T[3]&&f[4]===T[4]&&f[5]===T[5]&&f[6]===T[6]&&f[7]===T[7]&&f[8]===T[8]&&f[9]===T[9]&&f[10]===T[10]&&f[11]===T[11]&&f[12]===T[12]&&f[13]===T[13]&&f[14]===T[14]&&f[15]===T[15]}function tn(f,T){var k=f[0],ie=f[1],de=f[2],Be=f[3],ft=f[4],Tt=f[5],Vt=f[6],Yt=f[7],or=f[8],Tr=f[9],Or=f[10],br=f[11],dn=f[12],un=f[13],Sr=f[14],wn=f[15],Ii=T[0],ti=T[1],$n=T[2],Yr=T[3],Zn=T[4],In=T[5],ba=T[6],na=T[7],ga=T[8],ya=T[9],_a=T[10],ca=T[11],ci=T[12],no=T[13],No=T[14],F=T[15];return Math.abs(k-Ii)<=p*Math.max(1,Math.abs(k),Math.abs(Ii))&&Math.abs(ie-ti)<=p*Math.max(1,Math.abs(ie),Math.abs(ti))&&Math.abs(de-$n)<=p*Math.max(1,Math.abs(de),Math.abs($n))&&Math.abs(Be-Yr)<=p*Math.max(1,Math.abs(Be),Math.abs(Yr))&&Math.abs(ft-Zn)<=p*Math.max(1,Math.abs(ft),Math.abs(Zn))&&Math.abs(Tt-In)<=p*Math.max(1,Math.abs(Tt),Math.abs(In))&&Math.abs(Vt-ba)<=p*Math.max(1,Math.abs(Vt),Math.abs(ba))&&Math.abs(Yt-na)<=p*Math.max(1,Math.abs(Yt),Math.abs(na))&&Math.abs(or-ga)<=p*Math.max(1,Math.abs(or),Math.abs(ga))&&Math.abs(Tr-ya)<=p*Math.max(1,Math.abs(Tr),Math.abs(ya))&&Math.abs(Or-_a)<=p*Math.max(1,Math.abs(Or),Math.abs(_a))&&Math.abs(br-ca)<=p*Math.max(1,Math.abs(br),Math.abs(ca))&&Math.abs(dn-ci)<=p*Math.max(1,Math.abs(dn),Math.abs(ci))&&Math.abs(un-no)<=p*Math.max(1,Math.abs(un),Math.abs(no))&&Math.abs(Sr-No)<=p*Math.max(1,Math.abs(Sr),Math.abs(No))&&Math.abs(wn-F)<=p*Math.max(1,Math.abs(wn),Math.abs(F))}var Fn=De,Fi=Xr;function ki(){var f=new y(2);return y!=Float32Array&&(f[0]=0,f[1]=0),f}function ve(f){var T=new y(2);return T[0]=f[0],T[1]=f[1],T}function Ye(f,T){var k=new y(2);return k[0]=f,k[1]=T,k}function vt(f,T){return f[0]=T[0],f[1]=T[1],f}function wt(f,T,k){return f[0]=T,f[1]=k,f}function me(f,T,k){return f[0]=T[0]+k[0],f[1]=T[1]+k[1],f}function Pn(f,T,k){return f[0]=T[0]-k[0],f[1]=T[1]-k[1],f}function Cr(f,T,k){return f[0]=T[0]*k[0],f[1]=T[1]*k[1],f}function Nt(f,T,k){return f[0]=T[0]/k[0],f[1]=T[1]/k[1],f}function it(f,T){return f[0]=Math.ceil(T[0]),f[1]=Math.ceil(T[1]),f}function Ce(f,T){return f[0]=Math.floor(T[0]),f[1]=Math.floor(T[1]),f}function Rt(f,T,k){return f[0]=Math.min(T[0],k[0]),f[1]=Math.min(T[1],k[1]),f}function _t(f,T,k){return f[0]=Math.max(T[0],k[0]),f[1]=Math.max(T[1],k[1]),f}function Tn(f,T){return f[0]=Math.round(T[0]),f[1]=Math.round(T[1]),f}function Ve(f,T,k){return f[0]=T[0]*k,f[1]=T[1]*k,f}function hi(f,T,k,ie){return f[0]=T[0]+k[0]*ie,f[1]=T[1]+k[1]*ie,f}function An(f,T){var k=T[0]-f[0],ie=T[1]-f[1];return Math.hypot(k,ie)}function xi(f,T){var k=T[0]-f[0],ie=T[1]-f[1];return k*k+ie*ie}function Bn(f){var T=f[0],k=f[1];return Math.hypot(T,k)}function yi(f){var T=f[0],k=f[1];return T*T+k*k}function Wr(f,T){return f[0]=-T[0],f[1]=-T[1],f}function Oi(f,T){return f[0]=1/T[0],f[1]=1/T[1],f}function Oa(f,T){var k=T[0],ie=T[1],de=k*k+ie*ie;return de>0&&(de=1/Math.sqrt(de)),f[0]=T[0]*de,f[1]=T[1]*de,f}function Aa(f,T){return f[0]*T[0]+f[1]*T[1]}function Ui(f,T,k){var ie=T[0]*k[1]-T[1]*k[0];return f[0]=f[1]=0,f[2]=ie,f}function ea(f,T,k,ie){var de=T[0],Be=T[1];return f[0]=de+ie*(k[0]-de),f[1]=Be+ie*(k[1]-Be),f}function Ti(f,T){T=T||1;var k=b()*2*Math.PI;return f[0]=Math.cos(k)*T,f[1]=Math.sin(k)*T,f}function _n(f,T,k){var ie=T[0],de=T[1];return f[0]=k[0]*ie+k[2]*de,f[1]=k[1]*ie+k[3]*de,f}function Ci(f,T,k){var ie=T[0],de=T[1];return f[0]=k[0]*ie+k[2]*de+k[4],f[1]=k[1]*ie+k[3]*de+k[5],f}function qn(f,T,k){var ie=T[0],de=T[1];return f[0]=k[0]*ie+k[3]*de+k[6],f[1]=k[1]*ie+k[4]*de+k[7],f}function Wi(f,T,k){var ie=T[0],de=T[1];return f[0]=k[0]*ie+k[4]*de+k[12],f[1]=k[1]*ie+k[5]*de+k[13],f}function ta(f,T,k,ie){var de=T[0]-k[0],Be=T[1]-k[1],ft=Math.sin(ie),Tt=Math.cos(ie);return f[0]=de*Tt-Be*ft+k[0],f[1]=de*ft+Be*Tt+k[1],f}function si(f,T){var k=f[0],ie=f[1],de=T[0],Be=T[1],ft=Math.sqrt(k*k+ie*ie)*Math.sqrt(de*de+Be*Be),Tt=ft&&(k*de+ie*Be)/ft;return Math.acos(Math.min(Math.max(Tt,-1),1))}function li(f){return f[0]=0,f[1]=0,f}function Za(f){return"vec2("+f[0]+", "+f[1]+")"}function di(f,T){return f[0]===T[0]&&f[1]===T[1]}function Ha(f,T){var k=f[0],ie=f[1],de=T[0],Be=T[1];return Math.abs(k-de)<=p*Math.max(1,Math.abs(k),Math.abs(de))&&Math.abs(ie-Be)<=p*Math.max(1,Math.abs(ie),Math.abs(Be))}var Va=Bn,ra=Pn,xa=Cr,va=Nt,Vi=An,ia=xi,kn=yi,Ka=function(){var f=ki();return function(T,k,ie,de,Be,ft){var Tt,Vt;for(k||(k=2),ie||(ie=0),de?Vt=Math.min(de*k+ie,T.length):Vt=T.length,Tt=ie;Tt<Vt;Tt+=k)f[0]=T[Tt],f[1]=T[Tt+1],Be(f,f,ft),T[Tt]=f[0],T[Tt+1]=f[1];return T}}();function Pa(){var f=new y(3);return y!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function Qi(f){var T=new y(3);return T[0]=f[0],T[1]=f[1],T[2]=f[2],T}function Ia(f){var T=f[0],k=f[1],ie=f[2];return Math.hypot(T,k,ie)}function Ma(f,T,k){var ie=new y(3);return ie[0]=f,ie[1]=T,ie[2]=k,ie}function ji(f,T){return f[0]=T[0],f[1]=T[1],f[2]=T[2],f}function aa(f,T,k,ie){return f[0]=T,f[1]=k,f[2]=ie,f}function vi(f,T,k){return f[0]=T[0]+k[0],f[1]=T[1]+k[1],f[2]=T[2]+k[2],f}function ei(f,T,k){return f[0]=T[0]-k[0],f[1]=T[1]-k[1],f[2]=T[2]-k[2],f}function oa(f,T,k){return f[0]=T[0]*k[0],f[1]=T[1]*k[1],f[2]=T[2]*k[2],f}function $i(f,T,k){return f[0]=T[0]/k[0],f[1]=T[1]/k[1],f[2]=T[2]/k[2],f}function Gi(f,T){return f[0]=Math.ceil(T[0]),f[1]=Math.ceil(T[1]),f[2]=Math.ceil(T[2]),f}function Ji(f,T){return f[0]=Math.floor(T[0]),f[1]=Math.floor(T[1]),f[2]=Math.floor(T[2]),f}function pa(f,T,k){return f[0]=Math.min(T[0],k[0]),f[1]=Math.min(T[1],k[1]),f[2]=Math.min(T[2],k[2]),f}function ka(f,T,k){return f[0]=Math.max(T[0],k[0]),f[1]=Math.max(T[1],k[1]),f[2]=Math.max(T[2],k[2]),f}function ma(f,T){return f[0]=Math.round(T[0]),f[1]=Math.round(T[1]),f[2]=Math.round(T[2]),f}function Bi(f,T,k){return f[0]=T[0]*k,f[1]=T[1]*k,f[2]=T[2]*k,f}function Na(f,T,k,ie){return f[0]=T[0]+k[0]*ie,f[1]=T[1]+k[1]*ie,f[2]=T[2]+k[2]*ie,f}function pi(f,T){var k=T[0]-f[0],ie=T[1]-f[1],de=T[2]-f[2];return Math.hypot(k,ie,de)}function zi(f,T){var k=T[0]-f[0],ie=T[1]-f[1],de=T[2]-f[2];return k*k+ie*ie+de*de}function Mi(f){var T=f[0],k=f[1],ie=f[2];return T*T+k*k+ie*ie}function Yn(f,T){return f[0]=-T[0],f[1]=-T[1],f[2]=-T[2],f}function bi(f,T){return f[0]=1/T[0],f[1]=1/T[1],f[2]=1/T[2],f}function sa(f,T){var k=T[0],ie=T[1],de=T[2],Be=k*k+ie*ie+de*de;return Be>0&&(Be=1/Math.sqrt(Be)),f[0]=T[0]*Be,f[1]=T[1]*Be,f[2]=T[2]*Be,f}function Ra(f,T){return f[0]*T[0]+f[1]*T[1]+f[2]*T[2]}function Qa(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=k[0],Tt=k[1],Vt=k[2];return f[0]=de*Vt-Be*Tt,f[1]=Be*ft-ie*Vt,f[2]=ie*Tt-de*ft,f}function ce(f,T,k,ie){var de=T[0],Be=T[1],ft=T[2];return f[0]=de+ie*(k[0]-de),f[1]=Be+ie*(k[1]-Be),f[2]=ft+ie*(k[2]-ft),f}function be(f,T,k,ie,de,Be){var ft=Be*Be,Tt=ft*(2*Be-3)+1,Vt=ft*(Be-2)+Be,Yt=ft*(Be-1),or=ft*(3-2*Be);return f[0]=T[0]*Tt+k[0]*Vt+ie[0]*Yt+de[0]*or,f[1]=T[1]*Tt+k[1]*Vt+ie[1]*Yt+de[1]*or,f[2]=T[2]*Tt+k[2]*Vt+ie[2]*Yt+de[2]*or,f}function Qe(f,T,k,ie,de,Be){var ft=1-Be,Tt=ft*ft,Vt=Be*Be,Yt=Tt*ft,or=3*Be*Tt,Tr=3*Vt*ft,Or=Vt*Be;return f[0]=T[0]*Yt+k[0]*or+ie[0]*Tr+de[0]*Or,f[1]=T[1]*Yt+k[1]*or+ie[1]*Tr+de[1]*Or,f[2]=T[2]*Yt+k[2]*or+ie[2]*Tr+de[2]*Or,f}function U(f,T){T=T||1;var k=b()*2*Math.PI,ie=b()*2-1,de=Math.sqrt(1-ie*ie)*T;return f[0]=Math.cos(k)*de,f[1]=Math.sin(k)*de,f[2]=ie*T,f}function K(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=k[3]*ie+k[7]*de+k[11]*Be+k[15];return ft=ft||1,f[0]=(k[0]*ie+k[4]*de+k[8]*Be+k[12])/ft,f[1]=(k[1]*ie+k[5]*de+k[9]*Be+k[13])/ft,f[2]=(k[2]*ie+k[6]*de+k[10]*Be+k[14])/ft,f}function Me(f,T,k){var ie=T[0],de=T[1],Be=T[2];return f[0]=ie*k[0]+de*k[3]+Be*k[6],f[1]=ie*k[1]+de*k[4]+Be*k[7],f[2]=ie*k[2]+de*k[5]+Be*k[8],f}function ct(f,T,k){var ie=k[0],de=k[1],Be=k[2],ft=k[3],Tt=T[0],Vt=T[1],Yt=T[2],or=de*Yt-Be*Vt,Tr=Be*Tt-ie*Yt,Or=ie*Vt-de*Tt,br=de*Or-Be*Tr,dn=Be*or-ie*Or,un=ie*Tr-de*or,Sr=ft*2;return or*=Sr,Tr*=Sr,Or*=Sr,br*=2,dn*=2,un*=2,f[0]=Tt+or+br,f[1]=Vt+Tr+dn,f[2]=Yt+Or+un,f}function lr(f,T,k,ie){var de=[],Be=[];return de[0]=T[0]-k[0],de[1]=T[1]-k[1],de[2]=T[2]-k[2],Be[0]=de[0],Be[1]=de[1]*Math.cos(ie)-de[2]*Math.sin(ie),Be[2]=de[1]*Math.sin(ie)+de[2]*Math.cos(ie),f[0]=Be[0]+k[0],f[1]=Be[1]+k[1],f[2]=Be[2]+k[2],f}function Ur(f,T,k,ie){var de=[],Be=[];return de[0]=T[0]-k[0],de[1]=T[1]-k[1],de[2]=T[2]-k[2],Be[0]=de[2]*Math.sin(ie)+de[0]*Math.cos(ie),Be[1]=de[1],Be[2]=de[2]*Math.cos(ie)-de[0]*Math.sin(ie),f[0]=Be[0]+k[0],f[1]=Be[1]+k[1],f[2]=Be[2]+k[2],f}function Un(f,T,k,ie){var de=[],Be=[];return de[0]=T[0]-k[0],de[1]=T[1]-k[1],de[2]=T[2]-k[2],Be[0]=de[0]*Math.cos(ie)-de[1]*Math.sin(ie),Be[1]=de[0]*Math.sin(ie)+de[1]*Math.cos(ie),Be[2]=de[2],f[0]=Be[0]+k[0],f[1]=Be[1]+k[1],f[2]=Be[2]+k[2],f}function cr(f,T){var k=f[0],ie=f[1],de=f[2],Be=T[0],ft=T[1],Tt=T[2],Vt=Math.sqrt(k*k+ie*ie+de*de),Yt=Math.sqrt(Be*Be+ft*ft+Tt*Tt),or=Vt*Yt,Tr=or&&Ra(f,T)/or;return Math.acos(Math.min(Math.max(Tr,-1),1))}function Xi(f){return f[0]=0,f[1]=0,f[2]=0,f}function Li(f){return"vec3("+f[0]+", "+f[1]+", "+f[2]+")"}function Gt(f,T){return f[0]===T[0]&&f[1]===T[1]&&f[2]===T[2]}function s(f,T){var k=f[0],ie=f[1],de=f[2],Be=T[0],ft=T[1],Tt=T[2];return Math.abs(k-Be)<=p*Math.max(1,Math.abs(k),Math.abs(Be))&&Math.abs(ie-ft)<=p*Math.max(1,Math.abs(ie),Math.abs(ft))&&Math.abs(de-Tt)<=p*Math.max(1,Math.abs(de),Math.abs(Tt))}var d=ei,O=oa,j=$i,ae=pi,Ee=zi,Ue=Ia,st=Mi,Mt=function(){var f=Pa();return function(T,k,ie,de,Be,ft){var Tt,Vt;for(k||(k=3),ie||(ie=0),de?Vt=Math.min(de*k+ie,T.length):Vt=T.length,Tt=ie;Tt<Vt;Tt+=k)f[0]=T[Tt],f[1]=T[Tt+1],f[2]=T[Tt+2],Be(f,f,ft),T[Tt]=f[0],T[Tt+1]=f[1],T[Tt+2]=f[2];return T}}();function Ut(){var f=new y(4);return y!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0,f[3]=0),f}function Jt(f){var T=new y(4);return T[0]=f[0],T[1]=f[1],T[2]=f[2],T[3]=f[3],T}function hr(f,T,k,ie){var de=new y(4);return de[0]=f,de[1]=T,de[2]=k,de[3]=ie,de}function dr(f,T){return f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3],f}function Ar(f,T,k,ie,de){return f[0]=T,f[1]=k,f[2]=ie,f[3]=de,f}function rn(f,T,k){return f[0]=T[0]+k[0],f[1]=T[1]+k[1],f[2]=T[2]+k[2],f[3]=T[3]+k[3],f}function $r(f,T,k){return f[0]=T[0]-k[0],f[1]=T[1]-k[1],f[2]=T[2]-k[2],f[3]=T[3]-k[3],f}function sr(f,T,k){return f[0]=T[0]*k[0],f[1]=T[1]*k[1],f[2]=T[2]*k[2],f[3]=T[3]*k[3],f}function On(f,T,k){return f[0]=T[0]/k[0],f[1]=T[1]/k[1],f[2]=T[2]/k[2],f[3]=T[3]/k[3],f}function c(f,T){return f[0]=Math.ceil(T[0]),f[1]=Math.ceil(T[1]),f[2]=Math.ceil(T[2]),f[3]=Math.ceil(T[3]),f}function E(f,T){return f[0]=Math.floor(T[0]),f[1]=Math.floor(T[1]),f[2]=Math.floor(T[2]),f[3]=Math.floor(T[3]),f}function w(f,T,k){return f[0]=Math.min(T[0],k[0]),f[1]=Math.min(T[1],k[1]),f[2]=Math.min(T[2],k[2]),f[3]=Math.min(T[3],k[3]),f}function _(f,T,k){return f[0]=Math.max(T[0],k[0]),f[1]=Math.max(T[1],k[1]),f[2]=Math.max(T[2],k[2]),f[3]=Math.max(T[3],k[3]),f}function H(f,T){return f[0]=Math.round(T[0]),f[1]=Math.round(T[1]),f[2]=Math.round(T[2]),f[3]=Math.round(T[3]),f}function Se(f,T,k){return f[0]=T[0]*k,f[1]=T[1]*k,f[2]=T[2]*k,f[3]=T[3]*k,f}function We(f,T,k,ie){return f[0]=T[0]+k[0]*ie,f[1]=T[1]+k[1]*ie,f[2]=T[2]+k[2]*ie,f[3]=T[3]+k[3]*ie,f}function ht(f,T){var k=T[0]-f[0],ie=T[1]-f[1],de=T[2]-f[2],Be=T[3]-f[3];return Math.hypot(k,ie,de,Be)}function pt(f,T){var k=T[0]-f[0],ie=T[1]-f[1],de=T[2]-f[2],Be=T[3]-f[3];return k*k+ie*ie+de*de+Be*Be}function Kt(f){var T=f[0],k=f[1],ie=f[2],de=f[3];return Math.hypot(T,k,ie,de)}function ir(f){var T=f[0],k=f[1],ie=f[2],de=f[3];return T*T+k*k+ie*ie+de*de}function qr(f,T){return f[0]=-T[0],f[1]=-T[1],f[2]=-T[2],f[3]=-T[3],f}function ln(f,T){return f[0]=1/T[0],f[1]=1/T[1],f[2]=1/T[2],f[3]=1/T[3],f}function Mn(f,T){var k=T[0],ie=T[1],de=T[2],Be=T[3],ft=k*k+ie*ie+de*de+Be*Be;return ft>0&&(ft=1/Math.sqrt(ft)),f[0]=k*ft,f[1]=ie*ft,f[2]=de*ft,f[3]=Be*ft,f}function ui(f,T){return f[0]*T[0]+f[1]*T[1]+f[2]*T[2]+f[3]*T[3]}function mi(f,T,k,ie){var de=k[0]*ie[1]-k[1]*ie[0],Be=k[0]*ie[2]-k[2]*ie[0],ft=k[0]*ie[3]-k[3]*ie[0],Tt=k[1]*ie[2]-k[2]*ie[1],Vt=k[1]*ie[3]-k[3]*ie[1],Yt=k[2]*ie[3]-k[3]*ie[2],or=T[0],Tr=T[1],Or=T[2],br=T[3];return f[0]=Tr*Yt-Or*Vt+br*Tt,f[1]=-(or*Yt)+Or*ft-br*Be,f[2]=or*Vt-Tr*ft+br*de,f[3]=-(or*Tt)+Tr*Be-Or*de,f}function Ri(f,T,k,ie){var de=T[0],Be=T[1],ft=T[2],Tt=T[3];return f[0]=de+ie*(k[0]-de),f[1]=Be+ie*(k[1]-Be),f[2]=ft+ie*(k[2]-ft),f[3]=Tt+ie*(k[3]-Tt),f}function $a(f,T){T=T||1;var k,ie,de,Be,ft,Tt;do k=b()*2-1,ie=b()*2-1,ft=k*k+ie*ie;while(ft>=1);do de=b()*2-1,Be=b()*2-1,Tt=de*de+Be*Be;while(Tt>=1);var Vt=Math.sqrt((1-ft)/Tt);return f[0]=T*k,f[1]=T*ie,f[2]=T*de*Vt,f[3]=T*Be*Vt,f}function Ua(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=T[3];return f[0]=k[0]*ie+k[4]*de+k[8]*Be+k[12]*ft,f[1]=k[1]*ie+k[5]*de+k[9]*Be+k[13]*ft,f[2]=k[2]*ie+k[6]*de+k[10]*Be+k[14]*ft,f[3]=k[3]*ie+k[7]*de+k[11]*Be+k[15]*ft,f}function _o(f,T,k){var ie=T[0],de=T[1],Be=T[2],ft=k[0],Tt=k[1],Vt=k[2],Yt=k[3],or=Yt*ie+Tt*Be-Vt*de,Tr=Yt*de+Vt*ie-ft*Be,Or=Yt*Be+ft*de-Tt*ie,br=-ft*ie-Tt*de-Vt*Be;return f[0]=or*Yt+br*-ft+Tr*-Vt-Or*-Tt,f[1]=Tr*Yt+br*-Tt+Or*-ft-or*-Vt,f[2]=Or*Yt+br*-Vt+or*-Tt-Tr*-ft,f[3]=T[3],f}function ho(f){return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f}function Bo(f){return"vec4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"}function Co(f,T){return f[0]===T[0]&&f[1]===T[1]&&f[2]===T[2]&&f[3]===T[3]}function To(f,T){var k=f[0],ie=f[1],de=f[2],Be=f[3],ft=T[0],Tt=T[1],Vt=T[2],Yt=T[3];return Math.abs(k-ft)<=p*Math.max(1,Math.abs(k),Math.abs(ft))&&Math.abs(ie-Tt)<=p*Math.max(1,Math.abs(ie),Math.abs(Tt))&&Math.abs(de-Vt)<=p*Math.max(1,Math.abs(de),Math.abs(Vt))&&Math.abs(Be-Yt)<=p*Math.max(1,Math.abs(Be),Math.abs(Yt))}var ns=$r,Rr=sr,Go=On,ua=ht,ja=pt,ys=Kt,vo=ir,is=function(){var f=Ut();return function(T,k,ie,de,Be,ft){var Tt,Vt;for(k||(k=4),ie||(ie=0),de?Vt=Math.min(de*k+ie,T.length):Vt=T.length,Tt=ie;Tt<Vt;Tt+=k)f[0]=T[Tt],f[1]=T[Tt+1],f[2]=T[Tt+2],f[3]=T[Tt+3],Be(f,f,ft),T[Tt]=f[0],T[Tt+1]=f[1],T[Tt+2]=f[2],T[Tt+3]=f[3];return T}}()},GXnB:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Metadata=void 0;var l=a("xfSm"),o=function(){function m(g,p){this.key=g,this.value=p}return m.prototype.toString=function(){return this.key===l.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},m}();v.Metadata=o},Gk2g:function(A,v,a){var l=a("MSJP"),o=l("toUpperCase");A.exports=o},GuSE:function(A,v){function a(l,o){if(!(o==="constructor"&&typeof l[o]=="function")&&o!="__proto__")return l[o]}A.exports=a},HPdX:function(A,v){var a=Object.prototype;function l(o){var m=o&&o.constructor,g=typeof m=="function"&&m.prototype||a;return o===g}A.exports=l},HW2u:function(A,v,a){var l=a("gTTJ"),o={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},m=l(o);A.exports=m},"HZ3+":function(A,v,a){var l=a("ZM/t"),o=a("etFO"),m=a("v1a6"),g=a("klvw"),p=a("alBN");function y(b){var I=-1,P=b==null?0:b.length;for(this.clear();++I<P;){var M=b[I];this.set(M[0],M[1])}}y.prototype.clear=l,y.prototype.delete=o,y.prototype.get=m,y.prototype.has=g,y.prototype.set=p,A.exports=y},Hel2:function(A,v,a){"use strict";a.d(v,"b",function(){return Za}),a.d(v,"c",function(){return ce}),a.d(v,"d",function(){return be}),a.d(v,"a",function(){return l});var l={};a.r(l),a.d(l,"getContainer",function(){return b}),a.d(l,"trim",function(){return I}),a.d(l,"splitWords",function(){return P}),a.d(l,"create",function(){return z}),a.d(l,"remove",function(){return oe}),a.d(l,"addClass",function(){return G}),a.d(l,"removeClass",function(){return ee}),a.d(l,"hasClass",function(){return pe}),a.d(l,"setClass",function(){return J}),a.d(l,"getClass",function(){return se}),a.d(l,"empty",function(){return fe}),a.d(l,"setTransform",function(){return Oe}),a.d(l,"triggerResize",function(){return D}),a.d(l,"printCanvas",function(){return De}),a.d(l,"getViewPortScale",function(){return ot}),a.d(l,"DPR",function(){return Ke});function o(s){var d=131,O=137,j=0;s+="x";for(var ae=Math.floor(9007199254740991/O),Ee=0;Ee<s.length;Ee++)j>ae&&(j=Math.floor(j/O)),j=j*d+s.charCodeAt(Ee);return j}function m(s){s=s.toString();for(var d=5381,O=s.length;O;)d=d*33^s.charCodeAt(--O);return d>>>0}var g=a("J4zp"),p=a.n(g),y=window.document.documentElement.style;function b(s){var d=s;return typeof s=="string"&&(d=document.getElementById(s)),d}function I(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function P(s){return I(s).split(/\s+/)}function M(s){if(!y)return s[0];for(var d in s)if(s[d]&&s[d]in y)return s[d];return s[0]}function z(s,d,O){var j=document.createElement(s);return j.className=d||"",O&&O.appendChild(j),j}function oe(s){var d=s.parentNode;d&&d.removeChild(s)}function G(s,d){if(s.classList!==void 0)for(var O=P(d),j=0,ae=O.length;j<ae;j++)s.classList.add(O[j]);else if(!pe(s,d)){var Ee=se(s);J(s,(Ee?Ee+" ":"")+d)}}function ee(s,d){s.classList!==void 0?s.classList.remove(d):J(s,I((" "+se(s)+" ").replace(" "+d+" "," ")))}function pe(s,d){if(s.classList!==void 0)return s.classList.contains(d);var O=se(s);return O.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(O)}function J(s,d){s instanceof HTMLElement?s.className=d:s.className.baseVal=d}function se(s){return s instanceof SVGElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function fe(s){for(;s&&s.firstChild;)s.removeChild(s.firstChild)}var X=M(["transform","WebkitTransform"]);function Oe(s,d){s.style[X]=d}function D(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var s=window.document.createEvent("UIEvents");s.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(s)}}function De(s){var d=["padding: "+(s.height/2-8)+"px "+s.width/2+"px;","line-height: "+s.height+"px;","background-image: url("+s.toDataURL()+");"];console.log(`%c
`,d.join(""))}function ot(){var s,d=document.querySelector('meta[name="viewport"]');if(!d)return 1;var O=(s=d.content)===null||s===void 0?void 0:s.split(","),j=O.find(function(ae){var Ee=ae.split("="),Ue=p()(Ee,2),st=Ue[0],Mt=Ue[1];return st==="initial-scale"});return j?j.split("=")[1]*1:1}var Ke=ot()<1?1:window.devicePixelRatio,Le=a("lwsE"),W=a.n(Le),He=a("W8MJ"),C=a.n(He),Ze=a("PJYZ"),rt=a.n(Ze),At=a("7W2i"),Et=a.n(At),ne=a("a1gu"),Q=a.n(ne),te=a("Nsbk"),Fe=a.n(te),ze=a("oShl"),St=a.n(ze),ut=a("lSNA"),Qt=a.n(ut);function vr(s){var d=tt();return function(){var j=Fe()(s),ae;if(d){var Ee=Fe()(this).constructor;ae=Reflect.construct(j,arguments,Ee)}else ae=j.apply(this,arguments);return Q()(this,ae)}}function tt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}var Pe=function(s){Et()(O,s);var d=vr(O);function O(j,ae,Ee){var Ue;return W()(this,O),Ue=d.call(this,j),Qt()(rt()(Ue),"status",void 0),Qt()(rt()(Ue),"url",void 0),Ue.status=ae,Ue.url=Ee,Ue.name=Ue.constructor.name,Ue.message=j,Ue}return C()(O,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),O}(St()(Error));function Ne(s){var d=new XMLHttpRequest;d.open("GET",s.url,!0);for(var O in s.headers)s.headers.hasOwnProperty(O)&&d.setRequestHeader(O,s.headers[O]);return d.withCredentials=s.credentials==="include",d}var ke=function(d,O){var j=Ne(d);return j.setRequestHeader("Accept","application/json"),j.onerror=function(){O(new Error(j.statusText))},j.onload=function(){if(j.status>=200&&j.status<300&&j.response){var ae;try{ae=JSON.parse(j.response)}catch(Ee){return O(Ee)}O(null,ae)}else j.status===401?O(new Pe("".concat(j.statusText),j.status,d.url)):O(new Pe(j.statusText,j.status,d.url))},j.send(),j},et=function(d,O){var j=Ne(d);return j.responseType="arraybuffer",j.onerror=function(){O(new Error(j.statusText))},j.onload=function(){var ae=j.response;if(ae.byteLength===0&&j.status===200)return O(new Error("http status 200 returned without content."));j.status>=200&&j.status<300&&j.response?O(null,{data:ae,cacheControl:j.getResponseHeader("Cache-Control"),expires:j.getResponseHeader("Expires")}):O(new Pe(j.statusText,j.status,d.url))},j.send(),j};function Ge(s){var d=window.document.createElement("a");return d.href=s,d.protocol===window.document.location.protocol&&d.host===window.document.location.host}var Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",Bt=function(d,O){return et(d,function(j,ae){if(j)O(j);else if(ae){var Ee=new window.Image;Ee.crossOrigin="anonymous";var Ue=window.URL||window.webkitURL;Ee.onload=function(){O(null,Ee),Ue.revokeObjectURL(Ee.src)};var st=new window.Blob([new Uint8Array(ae.data)],{type:"image/png"});Ee.src=ae.data.byteLength?Ue.createObjectURL(st):Ot}})},gt=63710088e-1,ge={centimeters:gt*100,centimetres:gt*100,degrees:gt/111325,feet:gt*3.28084,inches:gt*39.37,kilometers:gt/1e3,kilometres:gt/1e3,meters:gt,metres:gt,miles:gt/1609.344,millimeters:gt*1e3,millimetres:gt*1e3,nauticalmiles:gt/1852,radians:1,yards:gt*1.0936},Lt={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/gt,yards:1.0936133},qt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function xr(s,d,O){O===void 0&&(O={});var j={type:"Feature"};return(O.id===0||O.id)&&(j.id=O.id),O.bbox&&(j.bbox=O.bbox),j.properties=d||{},j.geometry=s,j}function tr(s,d,O){switch(O===void 0&&(O={}),s){case"Point":return Xr(d).geometry;case"LineString":return tn(d).geometry;case"Polygon":return bn(d).geometry;case"MultiPoint":return ve(d).geometry;case"MultiLineString":return ki(d).geometry;case"MultiPolygon":return Ye(d).geometry;default:throw new Error(s+" is invalid")}}function Xr(s,d,O){if(O===void 0&&(O={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tn(s[0])||!Tn(s[1]))throw new Error("coordinates must contain numbers");var j={type:"Point",coordinates:s};return xr(j,d,O)}function rr(s,d,O){return O===void 0&&(O={}),Fi(s.map(function(j){return Xr(j,d)}),O)}function bn(s,d,O){O===void 0&&(O={});for(var j=0,ae=s;j<ae.length;j++){var Ee=ae[j];if(Ee.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ue=0;Ue<Ee[Ee.length-1].length;Ue++)if(Ee[Ee.length-1][Ue]!==Ee[0][Ue])throw new Error("First and last Position are not equivalent.")}var st={type:"Polygon",coordinates:s};return xr(st,d,O)}function ue(s,d,O){return O===void 0&&(O={}),Fi(s.map(function(j){return bn(j,d)}),O)}function tn(s,d,O){if(O===void 0&&(O={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var j={type:"LineString",coordinates:s};return xr(j,d,O)}function Fn(s,d,O){return O===void 0&&(O={}),Fi(s.map(function(j){return tn(j,d)}),O)}function Fi(s,d){d===void 0&&(d={});var O={type:"FeatureCollection"};return d.id&&(O.id=d.id),d.bbox&&(O.bbox=d.bbox),O.features=s,O}function ki(s,d,O){O===void 0&&(O={});var j={type:"MultiLineString",coordinates:s};return xr(j,d,O)}function ve(s,d,O){O===void 0&&(O={});var j={type:"MultiPoint",coordinates:s};return xr(j,d,O)}function Ye(s,d,O){O===void 0&&(O={});var j={type:"MultiPolygon",coordinates:s};return xr(j,d,O)}function vt(s,d,O){O===void 0&&(O={});var j={type:"GeometryCollection",geometries:s};return xr(j,d,O)}function wt(s,d){if(d===void 0&&(d=0),d&&!(d>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,d||0);return Math.round(s*O)/O}function me(s,d){d===void 0&&(d="kilometers");var O=ge[d];if(!O)throw new Error(d+" units is invalid");return s*O}function Pn(s,d){d===void 0&&(d="kilometers");var O=ge[d];if(!O)throw new Error(d+" units is invalid");return s/O}function Cr(s,d){return it(Pn(s,d))}function Nt(s){var d=s%360;return d<0&&(d+=360),d}function it(s){var d=s%(2*Math.PI);return d*180/Math.PI}function Ce(s){var d=s%360;return d*Math.PI/180}function Rt(s,d,O){if(d===void 0&&(d="kilometers"),O===void 0&&(O="kilometers"),!(s>=0))throw new Error("length must be a positive number");return me(Pn(s,d),O)}function _t(s,d,O){if(d===void 0&&(d="meters"),O===void 0&&(O="kilometers"),!(s>=0))throw new Error("area must be a positive number");var j=qt[d];if(!j)throw new Error("invalid original units");var ae=qt[O];if(!ae)throw new Error("invalid final units");return s/j*ae}function Tn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Ve(s){return!!s&&s.constructor===Object}function hi(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(d){if(!Tn(d))throw new Error("bbox must only contain numbers")})}function An(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}var xi=2*Math.PI*6378137/2;function Bn(s){var d=[Infinity,Infinity,-Infinity,-Infinity];return s.forEach(function(O){var j=O.coordinates;yi(d,j)}),d}function yi(s,d){return Array.isArray(d[0])?d.forEach(function(O){yi(s,O)}):(s[0]>d[0]&&(s[0]=d[0]),s[1]>d[1]&&(s[1]=d[1]),s[2]<d[0]&&(s[2]=d[0]),s[3]<d[1]&&(s[3]=d[1])),s}function Wr(s,d){return Oi(s,d)}function Oi(s,d){return Array.isArray(s[0])?s.map(function(O){return Oi(O,d)}):d(s)}function Oa(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};s=Ti(s,d);var j=s[0],ae=s[1],Ee=j*xi/180,Ue=Math.log(Math.tan((90+ae)*Math.PI/360))/(Math.PI/180);return Ue=Ue*xi/180,O.enable&&(Ee=Number(Ee.toFixed(O.decimal)),Ue=Number(Ue.toFixed(O.decimal))),s.length===3?[Ee,Ue,s[2]]:[Ee,Ue]}function Aa(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,O=s[0],j=s[1],ae=O/xi*180,Ee=j/xi*180;return Ee=180/Math.PI*(2*Math.atan(Math.exp(Ee*Math.PI/180))-Math.PI/2),d!=null&&(ae=Number(ae.toFixed(d)),Ee=Number(Ee.toFixed(d))),s.length===3?[ae,Ee,s[2]]:[ae,Ee]}function Ui(s){if(s==null)throw new Error("lng is required");return(s>180||s<-180)&&(s=s%360,s>180&&(s=-360+s),s<-180&&(s=360+s),s===0&&(s=0)),s}function ea(s){if(s==null)throw new Error("lat is required");return(s>90||s<-90)&&(s=s%180,s>90&&(s=-180+s),s<-90&&(s=180+s),s===0&&(s=0)),s}function Ti(s,d){if(d===!1)return s;var O=Ui(s[0]),j=ea(s[1]);return j>85&&(j=85),j<-85&&(j=-85),s.length===3?[O,j,s[2]]:[O,j]}function _n(s){var d=85.0511287798,O=Math.max(Math.min(d,s[1]),-d),j=256<<20,ae=Math.PI/180,Ee=s[0]*ae,Ue=O*ae;Ue=Math.log(Math.tan(Math.PI/4+Ue/2));var st=.5/Math.PI,Mt=.5,Ut=-.5/Math.PI;return ae=.5,Ee=j*(st*Ee+Mt),Ue=j*(Ut*Ue+ae),[Math.floor(Ee),Math.floor(Ue)]}function Ci(s){var d=.5/Math.PI,O=.5,j=-.5/Math.PI,ae=.5,Ee=256<<20,Ue=p()(s,2),st=Ue[0],Mt=Ue[1];st=(st/Ee-O)/d,Mt=(Mt/Ee-ae)/j,Mt=(Math.atan(Math.pow(Math.E,Mt))-Math.PI/4)*2,ae=Math.PI/180;var Ut=Mt/ae,Jt=st/ae;return[Jt,Ut]}function qn(s,d,O){var j=Ce(d[1]-s[1]),ae=Ce(d[0]-s[0]),Ee=Ce(s[1]),Ue=Ce(d[1]),st=Math.pow(Math.sin(j/2),2)+Math.pow(Math.sin(ae/2),2)*Math.cos(Ee)*Math.cos(Ue);return me(2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st)),O="meters")}function Wi(s){var d=Math.PI/180,O=85.0511287798,j=6378137,ae=Math.max(Math.min(O,s[1]),-O),Ee=Math.sin(ae*d),Ue=j*s[0]*d,st=j*Math.log((1+Ee)/(1-Ee))/2;return[Ue,st]}function ta(s,d){var O=Math.abs(s[1][1]-s[0][1])*d,j=Math.abs(s[1][0]-s[0][0])*d;return[[s[0][0]-j,s[0][1]-O],[s[1][0]+j,s[1][1]+O]]}function si(s,d){return s[0][0]<=d[0][0]&&s[0][1]<=d[0][1]&&s[1][0]>=d[1][0]&&s[1][1]>=d[1][1]}function li(s){return[[s[0],s[1]],[s[2],s[3]]]}var Za=function(){function s(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,O=arguments.length>1?arguments[1]:void 0;W()(this,s),Qt()(this,"limit",void 0),Qt()(this,"cache",void 0),Qt()(this,"destroy",void 0),Qt()(this,"order",void 0),this.limit=d,this.destroy=O||this.defaultDestroy,this.order=[],this.clear()}return C()(s,[{key:"clear",value:function(){var O=this;this.order.forEach(function(j){O.delete(j)}),this.cache={},this.order=[]}},{key:"get",value:function(O){var j=this.cache[O];return j&&(this.deleteOrder(O),this.appendOrder(O)),j}},{key:"set",value:function(O,j){this.cache[O]?(this.delete(O),this.cache[O]=j,this.appendOrder(O)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[O]=j,this.appendOrder(O))}},{key:"delete",value:function(O){var j=this.cache[O];j&&(this.deleteCache(O),this.deleteOrder(O),this.destroy(j,O))}},{key:"deleteCache",value:function(O){delete this.cache[O]}},{key:"deleteOrder",value:function(O){var j=this.order.findIndex(function(ae){return ae===O});j>=0&&this.order.splice(j,1)}},{key:"appendOrder",value:function(O){this.order.push(O)}},{key:"defaultDestroy",value:function(O,j){return null}}]),s}();function di(s,d){s.forEach(function(O){!d[O]||(d[O]=d[O].bind(d))})}var Ha=function(s,d,O){s.prototype=d.prototype=O,O.constructor=s};function Va(s,d){var O=Object.create(s.prototype);for(var j in d)O[j]=d[j];return O}function ra(){}var xa=.7,va=1/xa,Vi="\\s*([+-]?\\d+)\\s*",ia="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ka=/^#([0-9a-f]{3,8})$/,Pa=new RegExp("^rgb\\("+[Vi,Vi,Vi]+"\\)$"),Qi=new RegExp("^rgb\\("+[kn,kn,kn]+"\\)$"),Ia=new RegExp("^rgba\\("+[Vi,Vi,Vi,ia]+"\\)$"),Ma=new RegExp("^rgba\\("+[kn,kn,kn,ia]+"\\)$"),ji=new RegExp("^hsl\\("+[ia,kn,kn]+"\\)$"),aa=new RegExp("^hsla\\("+[ia,kn,kn,ia]+"\\)$"),vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ha(ra,Gi,{copy:function(s){return Object.assign(new this.constructor,this,s)},displayable:function(){return this.rgb().displayable()},hex:ei,formatHex:ei,formatHsl:oa,formatRgb:$i,toString:$i});function ei(){return this.rgb().formatHex()}function oa(){return Yn(this).formatHsl()}function $i(){return this.rgb().formatRgb()}function Gi(s){var d,O;return s=(s+"").trim().toLowerCase(),(d=Ka.exec(s))?(O=d[1].length,d=parseInt(d[1],16),O===6?Ji(d):O===3?new Bi(d>>8&15|d>>4&240,d>>4&15|d&240,(d&15)<<4|d&15,1):O===8?pa(d>>24&255,d>>16&255,d>>8&255,(d&255)/255):O===4?pa(d>>12&15|d>>8&240,d>>8&15|d>>4&240,d>>4&15|d&240,((d&15)<<4|d&15)/255):null):(d=Pa.exec(s))?new Bi(d[1],d[2],d[3],1):(d=Qi.exec(s))?new Bi(d[1]*255/100,d[2]*255/100,d[3]*255/100,1):(d=Ia.exec(s))?pa(d[1],d[2],d[3],d[4]):(d=Ma.exec(s))?pa(d[1]*255/100,d[2]*255/100,d[3]*255/100,d[4]):(d=ji.exec(s))?Mi(d[1],d[2]/100,d[3]/100,1):(d=aa.exec(s))?Mi(d[1],d[2]/100,d[3]/100,d[4]):vi.hasOwnProperty(s)?Ji(vi[s]):s==="transparent"?new Bi(NaN,NaN,NaN,0):null}function Ji(s){return new Bi(s>>16&255,s>>8&255,s&255,1)}function pa(s,d,O,j){return j<=0&&(s=d=O=NaN),new Bi(s,d,O,j)}function ka(s){return s instanceof ra||(s=Gi(s)),s?(s=s.rgb(),new Bi(s.r,s.g,s.b,s.opacity)):new Bi}function ma(s,d,O,j){return arguments.length===1?ka(s):new Bi(s,d,O,j==null?1:j)}function Bi(s,d,O,j){this.r=+s,this.g=+d,this.b=+O,this.opacity=+j}Ha(Bi,ma,Va(ra,{brighter:function(s){return s=s==null?va:Math.pow(va,s),new Bi(this.r*s,this.g*s,this.b*s,this.opacity)},darker:function(s){return s=s==null?xa:Math.pow(xa,s),new Bi(this.r*s,this.g*s,this.b*s,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Na,formatHex:Na,formatRgb:pi,toString:pi}));function Na(){return"#"+zi(this.r)+zi(this.g)+zi(this.b)}function pi(){var s=this.opacity;return s=isNaN(s)?1:Math.max(0,Math.min(1,s)),(s===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(s===1?")":", "+s+")")}function zi(s){return s=Math.max(0,Math.min(255,Math.round(s)||0)),(s<16?"0":"")+s.toString(16)}function Mi(s,d,O,j){return j<=0?s=d=O=NaN:O<=0||O>=1?s=d=NaN:d<=0&&(s=NaN),new sa(s,d,O,j)}function Yn(s){if(s instanceof sa)return new sa(s.h,s.s,s.l,s.opacity);if(s instanceof ra||(s=Gi(s)),!s)return new sa;if(s instanceof sa)return s;s=s.rgb();var d=s.r/255,O=s.g/255,j=s.b/255,ae=Math.min(d,O,j),Ee=Math.max(d,O,j),Ue=NaN,st=Ee-ae,Mt=(Ee+ae)/2;return st?(d===Ee?Ue=(O-j)/st+(O<j)*6:O===Ee?Ue=(j-d)/st+2:Ue=(d-O)/st+4,st/=Mt<.5?Ee+ae:2-Ee-ae,Ue*=60):st=Mt>0&&Mt<1?0:Ue,new sa(Ue,st,Mt,s.opacity)}function bi(s,d,O,j){return arguments.length===1?Yn(s):new sa(s,d,O,j==null?1:j)}function sa(s,d,O,j){this.h=+s,this.s=+d,this.l=+O,this.opacity=+j}Ha(sa,bi,Va(ra,{brighter:function(s){return s=s==null?va:Math.pow(va,s),new sa(this.h,this.s,this.l*s,this.opacity)},darker:function(s){return s=s==null?xa:Math.pow(xa,s),new sa(this.h,this.s,this.l*s,this.opacity)},rgb:function(){var s=this.h%360+(this.h<0)*360,d=isNaN(s)||isNaN(this.s)?0:this.s,O=this.l,j=O+(O<.5?O:1-O)*d,ae=2*O-j;return new Bi(Ra(s>=240?s-240:s+120,ae,j),Ra(s,ae,j),Ra(s<120?s+240:s-120,ae,j),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var s=this.opacity;return s=isNaN(s)?1:Math.max(0,Math.min(1,s)),(s===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(s===1?")":", "+s+")")}}));function Ra(s,d,O){return(s<60?d+(O-d)*s/60:s<180?O:s<240?d+(O-d)*(240-s)/60:d)*255}function Qa(s){var d=Gi(s),O=[0,0,0,0];return d!=null&&(O[0]=d.r/255,O[1]=d.g/255,O[2]=d.b/255,O[3]=d.opacity),O}function ce(s){var d=s&&s[0],O=s&&s[1],j=s&&s[2],ae=d+O*256+j*65536-1;return ae}function be(s){return[s+1&255,s+1>>8&255,s+1>>8>>8&255]}function Qe(s){var d=document.createElement("canvas"),O=d.getContext("2d");d.width=256,d.height=1;for(var j=O.createLinearGradient(0,0,256,1),ae=null,Ee=s.positions[0],Ue=s.positions[s.positions.length-1],st=0;st<s.colors.length;++st){var Mt=(s.positions[st]-Ee)/(Ue-Ee);j.addColorStop(Mt,s.colors[st])}return O.fillStyle=j,O.fillRect(0,0,256,1),ae=new Uint8ClampedArray(O.getImageData(0,0,256,1).data),new ImageData(ae,256,1)}var U;(function(s){s.CENTER="center",s.TOP="top",s["TOP-LEFT"]="top-left",s["TOP-RIGHT"]="top-right",s.BOTTOM="bottom",s["BOTTOM-LEFT"]="bottom-left",s.LEFT="left",s.RIGHT="right"})(U||(U={}));var K={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Me(s,d,O){var j=s.classList;for(var ae in K)K.hasOwnProperty(ae)&&j.remove("l7-".concat(O,"-anchor-").concat(ae));j.add("l7-".concat(O,"-anchor-").concat(d))}function ct(s){if(s.length===0)throw new Error("max requires at least one data point");for(var d=s[0],O=1;O<s.length;O++)s[O]>d&&(d=s[O]);return d*1}function lr(s){if(s.length===0)throw new Error("min requires at least one data point");for(var d=s[0],O=1;O<s.length;O++)s[O]<d&&(d=s[O]);return d*1}function Ur(s){if(s.length===0)return 0;for(var d=s[0]*1,O=1;O<s.length;O++)d+=s[O]*1;return d}function Un(s){if(s.length===0)throw new Error("mean requires at least one data point");return Ur(s)/s.length}function cr(s){if(s.length===0)throw new Error("mean requires at least one data point");if(s.length<3)return s[0];s.sort();for(var d=s[0],O=NaN,j=0,ae=1,Ee=1;Ee<s.length+1;Ee++)s[Ee]!==d?(ae>j&&(j=ae,O=d),ae=1,d=s[Ee]):ae++;return O*1}var Xi={min:lr,max:ct,mean:Un,sum:Ur,mode:cr};function Li(s,d){return s.map(function(O){return O[d]})}function Gt(s,d){return Xi[s](d)}},HgGm:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingOnSyntax=void 0;var l=a("mvr4"),o=function(){function m(g){this._binding=g}return m.prototype.onActivation=function(g){return this._binding.onActivation=g,new l.BindingWhenSyntax(this._binding)},m}();v.BindingOnSyntax=o},HpQ9:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.ContainerSnapshot=void 0;var l=function(){function o(){}return o.of=function(m,g){var p=new o;return p.bindings=m,p.middleware=g,p},o}();v.ContainerSnapshot=l},HthE:function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l;(function(m){m[m.LNGLAT=1]="LNGLAT",m[m.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",m[m.VECTOR_TILE=3]="VECTOR_TILE",m[m.IDENTITY=4]="IDENTITY",m[m.P20=5]="P20",m[m.P20_OFFSET=6]="P20_OFFSET",m[m.METER_OFFSET=7]="METER_OFFSET",m[m.P20_2=8]="P20_2"})(l||(l={}));var o={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"}},IMpv:function(A,v,a){var l=a("2CCf"),o="__lodash_hash_undefined__";function m(g,p){var y=this.__data__;return this.size+=this.has(g)?0:1,y[g]=l&&p===void 0?o:p,this}A.exports=m},IOcx:function(A,v,a){"use strict";a.d(v,"a",function(){return l}),a.d(v,"b",function(){return o}),a.d(v,"c",function(){return m});var l={};a.r(l),a.d(l,"create",function(){return z}),a.d(l,"clone",function(){return oe}),a.d(l,"copy",function(){return G}),a.d(l,"fromValues",function(){return ee}),a.d(l,"set",function(){return pe}),a.d(l,"identity",function(){return J}),a.d(l,"transpose",function(){return se}),a.d(l,"invert",function(){return fe}),a.d(l,"adjoint",function(){return X}),a.d(l,"determinant",function(){return Oe}),a.d(l,"multiply",function(){return D}),a.d(l,"translate",function(){return De}),a.d(l,"scale",function(){return ot}),a.d(l,"rotate",function(){return Ke}),a.d(l,"rotateX",function(){return Le}),a.d(l,"rotateY",function(){return W}),a.d(l,"rotateZ",function(){return He}),a.d(l,"fromTranslation",function(){return C}),a.d(l,"fromScaling",function(){return Ze}),a.d(l,"fromRotation",function(){return rt}),a.d(l,"fromXRotation",function(){return At}),a.d(l,"fromYRotation",function(){return Et}),a.d(l,"fromZRotation",function(){return ne}),a.d(l,"fromRotationTranslation",function(){return Q}),a.d(l,"fromQuat2",function(){return te}),a.d(l,"getTranslation",function(){return Fe}),a.d(l,"getScaling",function(){return ze}),a.d(l,"getRotation",function(){return St}),a.d(l,"fromRotationTranslationScale",function(){return ut}),a.d(l,"fromRotationTranslationScaleOrigin",function(){return Qt}),a.d(l,"fromQuat",function(){return vr}),a.d(l,"frustum",function(){return tt}),a.d(l,"perspective",function(){return Pe}),a.d(l,"perspectiveFromFieldOfView",function(){return Ne}),a.d(l,"ortho",function(){return ke}),a.d(l,"lookAt",function(){return et}),a.d(l,"targetTo",function(){return Ge}),a.d(l,"str",function(){return Ot}),a.d(l,"frob",function(){return Bt}),a.d(l,"add",function(){return gt}),a.d(l,"subtract",function(){return ge}),a.d(l,"multiplyScalar",function(){return Lt}),a.d(l,"multiplyScalarAndAdd",function(){return qt}),a.d(l,"exactEquals",function(){return xr}),a.d(l,"equals",function(){return tr}),a.d(l,"mul",function(){return Xr}),a.d(l,"sub",function(){return rr});var o={};a.r(o),a.d(o,"create",function(){return bn}),a.d(o,"clone",function(){return ue}),a.d(o,"length",function(){return tn}),a.d(o,"fromValues",function(){return Fn}),a.d(o,"copy",function(){return Fi}),a.d(o,"set",function(){return ki}),a.d(o,"add",function(){return ve}),a.d(o,"subtract",function(){return Ye}),a.d(o,"multiply",function(){return vt}),a.d(o,"divide",function(){return wt}),a.d(o,"ceil",function(){return me}),a.d(o,"floor",function(){return Pn}),a.d(o,"min",function(){return Cr}),a.d(o,"max",function(){return Nt}),a.d(o,"round",function(){return it}),a.d(o,"scale",function(){return Ce}),a.d(o,"scaleAndAdd",function(){return Rt}),a.d(o,"distance",function(){return _t}),a.d(o,"squaredDistance",function(){return Tn}),a.d(o,"squaredLength",function(){return Ve}),a.d(o,"negate",function(){return hi}),a.d(o,"inverse",function(){return An}),a.d(o,"normalize",function(){return xi}),a.d(o,"dot",function(){return Bn}),a.d(o,"cross",function(){return yi}),a.d(o,"lerp",function(){return Wr}),a.d(o,"hermite",function(){return Oi}),a.d(o,"bezier",function(){return Oa}),a.d(o,"random",function(){return Aa}),a.d(o,"transformMat4",function(){return Ui}),a.d(o,"transformMat3",function(){return ea}),a.d(o,"transformQuat",function(){return Ti}),a.d(o,"rotateX",function(){return _n}),a.d(o,"rotateY",function(){return Ci}),a.d(o,"rotateZ",function(){return qn}),a.d(o,"angle",function(){return Wi}),a.d(o,"zero",function(){return ta}),a.d(o,"str",function(){return si}),a.d(o,"exactEquals",function(){return li}),a.d(o,"equals",function(){return Za}),a.d(o,"sub",function(){return di}),a.d(o,"mul",function(){return Ha}),a.d(o,"div",function(){return Va}),a.d(o,"dist",function(){return ra}),a.d(o,"sqrDist",function(){return xa}),a.d(o,"len",function(){return va}),a.d(o,"sqrLen",function(){return Vi}),a.d(o,"forEach",function(){return ia});var m={};a.r(m),a.d(m,"create",function(){return kn}),a.d(m,"clone",function(){return Ka}),a.d(m,"fromValues",function(){return Pa}),a.d(m,"copy",function(){return Qi}),a.d(m,"set",function(){return Ia}),a.d(m,"add",function(){return Ma}),a.d(m,"subtract",function(){return ji}),a.d(m,"multiply",function(){return aa}),a.d(m,"divide",function(){return vi}),a.d(m,"ceil",function(){return ei}),a.d(m,"floor",function(){return oa}),a.d(m,"min",function(){return $i}),a.d(m,"max",function(){return Gi}),a.d(m,"round",function(){return Ji}),a.d(m,"scale",function(){return pa}),a.d(m,"scaleAndAdd",function(){return ka}),a.d(m,"distance",function(){return ma}),a.d(m,"squaredDistance",function(){return Bi}),a.d(m,"length",function(){return Na}),a.d(m,"squaredLength",function(){return pi}),a.d(m,"negate",function(){return zi}),a.d(m,"inverse",function(){return Mi}),a.d(m,"normalize",function(){return Yn}),a.d(m,"dot",function(){return bi}),a.d(m,"cross",function(){return sa}),a.d(m,"lerp",function(){return Ra}),a.d(m,"random",function(){return Qa}),a.d(m,"transformMat4",function(){return ce}),a.d(m,"transformQuat",function(){return be}),a.d(m,"zero",function(){return Qe}),a.d(m,"str",function(){return U}),a.d(m,"exactEquals",function(){return K}),a.d(m,"equals",function(){return Me}),a.d(m,"sub",function(){return ct}),a.d(m,"mul",function(){return lr}),a.d(m,"div",function(){return Ur}),a.d(m,"dist",function(){return Un}),a.d(m,"sqrDist",function(){return cr}),a.d(m,"len",function(){return Xi}),a.d(m,"sqrLen",function(){return Li}),a.d(m,"forEach",function(){return Gt});var g=1e-6,p=typeof Float32Array!="undefined"?Float32Array:Array,y=Math.random;function b(s){p=s}var I=Math.PI/180;function P(s){return s*I}function M(s,d){return Math.abs(s-d)<=g*Math.max(1,Math.abs(s),Math.abs(d))}Math.hypot||(Math.hypot=function(){for(var s=0,d=arguments.length;d--;)s+=arguments[d]*arguments[d];return Math.sqrt(s)});function z(){var s=new p(16);return p!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s}function oe(s){var d=new p(16);return d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[4]=s[4],d[5]=s[5],d[6]=s[6],d[7]=s[7],d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d}function G(s,d){return s[0]=d[0],s[1]=d[1],s[2]=d[2],s[3]=d[3],s[4]=d[4],s[5]=d[5],s[6]=d[6],s[7]=d[7],s[8]=d[8],s[9]=d[9],s[10]=d[10],s[11]=d[11],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15],s}function ee(s,d,O,j,ae,Ee,Ue,st,Mt,Ut,Jt,hr,dr,Ar,rn,$r){var sr=new p(16);return sr[0]=s,sr[1]=d,sr[2]=O,sr[3]=j,sr[4]=ae,sr[5]=Ee,sr[6]=Ue,sr[7]=st,sr[8]=Mt,sr[9]=Ut,sr[10]=Jt,sr[11]=hr,sr[12]=dr,sr[13]=Ar,sr[14]=rn,sr[15]=$r,sr}function pe(s,d,O,j,ae,Ee,Ue,st,Mt,Ut,Jt,hr,dr,Ar,rn,$r,sr){return s[0]=d,s[1]=O,s[2]=j,s[3]=ae,s[4]=Ee,s[5]=Ue,s[6]=st,s[7]=Mt,s[8]=Ut,s[9]=Jt,s[10]=hr,s[11]=dr,s[12]=Ar,s[13]=rn,s[14]=$r,s[15]=sr,s}function J(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function se(s,d){if(s===d){var O=d[1],j=d[2],ae=d[3],Ee=d[6],Ue=d[7],st=d[11];s[1]=d[4],s[2]=d[8],s[3]=d[12],s[4]=O,s[6]=d[9],s[7]=d[13],s[8]=j,s[9]=Ee,s[11]=d[14],s[12]=ae,s[13]=Ue,s[14]=st}else s[0]=d[0],s[1]=d[4],s[2]=d[8],s[3]=d[12],s[4]=d[1],s[5]=d[5],s[6]=d[9],s[7]=d[13],s[8]=d[2],s[9]=d[6],s[10]=d[10],s[11]=d[14],s[12]=d[3],s[13]=d[7],s[14]=d[11],s[15]=d[15];return s}function fe(s,d){var O=d[0],j=d[1],ae=d[2],Ee=d[3],Ue=d[4],st=d[5],Mt=d[6],Ut=d[7],Jt=d[8],hr=d[9],dr=d[10],Ar=d[11],rn=d[12],$r=d[13],sr=d[14],On=d[15],c=O*st-j*Ue,E=O*Mt-ae*Ue,w=O*Ut-Ee*Ue,_=j*Mt-ae*st,H=j*Ut-Ee*st,Se=ae*Ut-Ee*Mt,We=Jt*$r-hr*rn,ht=Jt*sr-dr*rn,pt=Jt*On-Ar*rn,Kt=hr*sr-dr*$r,ir=hr*On-Ar*$r,qr=dr*On-Ar*sr,ln=c*qr-E*ir+w*Kt+_*pt-H*ht+Se*We;return ln?(ln=1/ln,s[0]=(st*qr-Mt*ir+Ut*Kt)*ln,s[1]=(ae*ir-j*qr-Ee*Kt)*ln,s[2]=($r*Se-sr*H+On*_)*ln,s[3]=(dr*H-hr*Se-Ar*_)*ln,s[4]=(Mt*pt-Ue*qr-Ut*ht)*ln,s[5]=(O*qr-ae*pt+Ee*ht)*ln,s[6]=(sr*w-rn*Se-On*E)*ln,s[7]=(Jt*Se-dr*w+Ar*E)*ln,s[8]=(Ue*ir-st*pt+Ut*We)*ln,s[9]=(j*pt-O*ir-Ee*We)*ln,s[10]=(rn*H-$r*w+On*c)*ln,s[11]=(hr*w-Jt*H-Ar*c)*ln,s[12]=(st*ht-Ue*Kt-Mt*We)*ln,s[13]=(O*Kt-j*ht+ae*We)*ln,s[14]=($r*E-rn*_-sr*c)*ln,s[15]=(Jt*_-hr*E+dr*c)*ln,s):null}function X(s,d){var O=d[0],j=d[1],ae=d[2],Ee=d[3],Ue=d[4],st=d[5],Mt=d[6],Ut=d[7],Jt=d[8],hr=d[9],dr=d[10],Ar=d[11],rn=d[12],$r=d[13],sr=d[14],On=d[15];return s[0]=st*(dr*On-Ar*sr)-hr*(Mt*On-Ut*sr)+$r*(Mt*Ar-Ut*dr),s[1]=-(j*(dr*On-Ar*sr)-hr*(ae*On-Ee*sr)+$r*(ae*Ar-Ee*dr)),s[2]=j*(Mt*On-Ut*sr)-st*(ae*On-Ee*sr)+$r*(ae*Ut-Ee*Mt),s[3]=-(j*(Mt*Ar-Ut*dr)-st*(ae*Ar-Ee*dr)+hr*(ae*Ut-Ee*Mt)),s[4]=-(Ue*(dr*On-Ar*sr)-Jt*(Mt*On-Ut*sr)+rn*(Mt*Ar-Ut*dr)),s[5]=O*(dr*On-Ar*sr)-Jt*(ae*On-Ee*sr)+rn*(ae*Ar-Ee*dr),s[6]=-(O*(Mt*On-Ut*sr)-Ue*(ae*On-Ee*sr)+rn*(ae*Ut-Ee*Mt)),s[7]=O*(Mt*Ar-Ut*dr)-Ue*(ae*Ar-Ee*dr)+Jt*(ae*Ut-Ee*Mt),s[8]=Ue*(hr*On-Ar*$r)-Jt*(st*On-Ut*$r)+rn*(st*Ar-Ut*hr),s[9]=-(O*(hr*On-Ar*$r)-Jt*(j*On-Ee*$r)+rn*(j*Ar-Ee*hr)),s[10]=O*(st*On-Ut*$r)-Ue*(j*On-Ee*$r)+rn*(j*Ut-Ee*st),s[11]=-(O*(st*Ar-Ut*hr)-Ue*(j*Ar-Ee*hr)+Jt*(j*Ut-Ee*st)),s[12]=-(Ue*(hr*sr-dr*$r)-Jt*(st*sr-Mt*$r)+rn*(st*dr-Mt*hr)),s[13]=O*(hr*sr-dr*$r)-Jt*(j*sr-ae*$r)+rn*(j*dr-ae*hr),s[14]=-(O*(st*sr-Mt*$r)-Ue*(j*sr-ae*$r)+rn*(j*Mt-ae*st)),s[15]=O*(st*dr-Mt*hr)-Ue*(j*dr-ae*hr)+Jt*(j*Mt-ae*st),s}function Oe(s){var d=s[0],O=s[1],j=s[2],ae=s[3],Ee=s[4],Ue=s[5],st=s[6],Mt=s[7],Ut=s[8],Jt=s[9],hr=s[10],dr=s[11],Ar=s[12],rn=s[13],$r=s[14],sr=s[15],On=d*Ue-O*Ee,c=d*st-j*Ee,E=d*Mt-ae*Ee,w=O*st-j*Ue,_=O*Mt-ae*Ue,H=j*Mt-ae*st,Se=Ut*rn-Jt*Ar,We=Ut*$r-hr*Ar,ht=Ut*sr-dr*Ar,pt=Jt*$r-hr*rn,Kt=Jt*sr-dr*rn,ir=hr*sr-dr*$r;return On*ir-c*Kt+E*pt+w*ht-_*We+H*Se}function D(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=d[3],st=d[4],Mt=d[5],Ut=d[6],Jt=d[7],hr=d[8],dr=d[9],Ar=d[10],rn=d[11],$r=d[12],sr=d[13],On=d[14],c=d[15],E=O[0],w=O[1],_=O[2],H=O[3];return s[0]=E*j+w*st+_*hr+H*$r,s[1]=E*ae+w*Mt+_*dr+H*sr,s[2]=E*Ee+w*Ut+_*Ar+H*On,s[3]=E*Ue+w*Jt+_*rn+H*c,E=O[4],w=O[5],_=O[6],H=O[7],s[4]=E*j+w*st+_*hr+H*$r,s[5]=E*ae+w*Mt+_*dr+H*sr,s[6]=E*Ee+w*Ut+_*Ar+H*On,s[7]=E*Ue+w*Jt+_*rn+H*c,E=O[8],w=O[9],_=O[10],H=O[11],s[8]=E*j+w*st+_*hr+H*$r,s[9]=E*ae+w*Mt+_*dr+H*sr,s[10]=E*Ee+w*Ut+_*Ar+H*On,s[11]=E*Ue+w*Jt+_*rn+H*c,E=O[12],w=O[13],_=O[14],H=O[15],s[12]=E*j+w*st+_*hr+H*$r,s[13]=E*ae+w*Mt+_*dr+H*sr,s[14]=E*Ee+w*Ut+_*Ar+H*On,s[15]=E*Ue+w*Jt+_*rn+H*c,s}function De(s,d,O){var j=O[0],ae=O[1],Ee=O[2],Ue,st,Mt,Ut,Jt,hr,dr,Ar,rn,$r,sr,On;return d===s?(s[12]=d[0]*j+d[4]*ae+d[8]*Ee+d[12],s[13]=d[1]*j+d[5]*ae+d[9]*Ee+d[13],s[14]=d[2]*j+d[6]*ae+d[10]*Ee+d[14],s[15]=d[3]*j+d[7]*ae+d[11]*Ee+d[15]):(Ue=d[0],st=d[1],Mt=d[2],Ut=d[3],Jt=d[4],hr=d[5],dr=d[6],Ar=d[7],rn=d[8],$r=d[9],sr=d[10],On=d[11],s[0]=Ue,s[1]=st,s[2]=Mt,s[3]=Ut,s[4]=Jt,s[5]=hr,s[6]=dr,s[7]=Ar,s[8]=rn,s[9]=$r,s[10]=sr,s[11]=On,s[12]=Ue*j+Jt*ae+rn*Ee+d[12],s[13]=st*j+hr*ae+$r*Ee+d[13],s[14]=Mt*j+dr*ae+sr*Ee+d[14],s[15]=Ut*j+Ar*ae+On*Ee+d[15]),s}function ot(s,d,O){var j=O[0],ae=O[1],Ee=O[2];return s[0]=d[0]*j,s[1]=d[1]*j,s[2]=d[2]*j,s[3]=d[3]*j,s[4]=d[4]*ae,s[5]=d[5]*ae,s[6]=d[6]*ae,s[7]=d[7]*ae,s[8]=d[8]*Ee,s[9]=d[9]*Ee,s[10]=d[10]*Ee,s[11]=d[11]*Ee,s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15],s}function Ke(s,d,O,j){var ae=j[0],Ee=j[1],Ue=j[2],st=Math.hypot(ae,Ee,Ue),Mt,Ut,Jt,hr,dr,Ar,rn,$r,sr,On,c,E,w,_,H,Se,We,ht,pt,Kt,ir,qr,ln,Mn;return st<g?null:(st=1/st,ae*=st,Ee*=st,Ue*=st,Mt=Math.sin(O),Ut=Math.cos(O),Jt=1-Ut,hr=d[0],dr=d[1],Ar=d[2],rn=d[3],$r=d[4],sr=d[5],On=d[6],c=d[7],E=d[8],w=d[9],_=d[10],H=d[11],Se=ae*ae*Jt+Ut,We=Ee*ae*Jt+Ue*Mt,ht=Ue*ae*Jt-Ee*Mt,pt=ae*Ee*Jt-Ue*Mt,Kt=Ee*Ee*Jt+Ut,ir=Ue*Ee*Jt+ae*Mt,qr=ae*Ue*Jt+Ee*Mt,ln=Ee*Ue*Jt-ae*Mt,Mn=Ue*Ue*Jt+Ut,s[0]=hr*Se+$r*We+E*ht,s[1]=dr*Se+sr*We+w*ht,s[2]=Ar*Se+On*We+_*ht,s[3]=rn*Se+c*We+H*ht,s[4]=hr*pt+$r*Kt+E*ir,s[5]=dr*pt+sr*Kt+w*ir,s[6]=Ar*pt+On*Kt+_*ir,s[7]=rn*pt+c*Kt+H*ir,s[8]=hr*qr+$r*ln+E*Mn,s[9]=dr*qr+sr*ln+w*Mn,s[10]=Ar*qr+On*ln+_*Mn,s[11]=rn*qr+c*ln+H*Mn,d!==s&&(s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15]),s)}function Le(s,d,O){var j=Math.sin(O),ae=Math.cos(O),Ee=d[4],Ue=d[5],st=d[6],Mt=d[7],Ut=d[8],Jt=d[9],hr=d[10],dr=d[11];return d!==s&&(s[0]=d[0],s[1]=d[1],s[2]=d[2],s[3]=d[3],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15]),s[4]=Ee*ae+Ut*j,s[5]=Ue*ae+Jt*j,s[6]=st*ae+hr*j,s[7]=Mt*ae+dr*j,s[8]=Ut*ae-Ee*j,s[9]=Jt*ae-Ue*j,s[10]=hr*ae-st*j,s[11]=dr*ae-Mt*j,s}function W(s,d,O){var j=Math.sin(O),ae=Math.cos(O),Ee=d[0],Ue=d[1],st=d[2],Mt=d[3],Ut=d[8],Jt=d[9],hr=d[10],dr=d[11];return d!==s&&(s[4]=d[4],s[5]=d[5],s[6]=d[6],s[7]=d[7],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15]),s[0]=Ee*ae-Ut*j,s[1]=Ue*ae-Jt*j,s[2]=st*ae-hr*j,s[3]=Mt*ae-dr*j,s[8]=Ee*j+Ut*ae,s[9]=Ue*j+Jt*ae,s[10]=st*j+hr*ae,s[11]=Mt*j+dr*ae,s}function He(s,d,O){var j=Math.sin(O),ae=Math.cos(O),Ee=d[0],Ue=d[1],st=d[2],Mt=d[3],Ut=d[4],Jt=d[5],hr=d[6],dr=d[7];return d!==s&&(s[8]=d[8],s[9]=d[9],s[10]=d[10],s[11]=d[11],s[12]=d[12],s[13]=d[13],s[14]=d[14],s[15]=d[15]),s[0]=Ee*ae+Ut*j,s[1]=Ue*ae+Jt*j,s[2]=st*ae+hr*j,s[3]=Mt*ae+dr*j,s[4]=Ut*ae-Ee*j,s[5]=Jt*ae-Ue*j,s[6]=hr*ae-st*j,s[7]=dr*ae-Mt*j,s}function C(s,d){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=d[0],s[13]=d[1],s[14]=d[2],s[15]=1,s}function Ze(s,d){return s[0]=d[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=d[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=d[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function rt(s,d,O){var j=O[0],ae=O[1],Ee=O[2],Ue=Math.hypot(j,ae,Ee),st,Mt,Ut;return Ue<g?null:(Ue=1/Ue,j*=Ue,ae*=Ue,Ee*=Ue,st=Math.sin(d),Mt=Math.cos(d),Ut=1-Mt,s[0]=j*j*Ut+Mt,s[1]=ae*j*Ut+Ee*st,s[2]=Ee*j*Ut-ae*st,s[3]=0,s[4]=j*ae*Ut-Ee*st,s[5]=ae*ae*Ut+Mt,s[6]=Ee*ae*Ut+j*st,s[7]=0,s[8]=j*Ee*Ut+ae*st,s[9]=ae*Ee*Ut-j*st,s[10]=Ee*Ee*Ut+Mt,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}function At(s,d){var O=Math.sin(d),j=Math.cos(d);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=j,s[6]=O,s[7]=0,s[8]=0,s[9]=-O,s[10]=j,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Et(s,d){var O=Math.sin(d),j=Math.cos(d);return s[0]=j,s[1]=0,s[2]=-O,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=O,s[9]=0,s[10]=j,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function ne(s,d){var O=Math.sin(d),j=Math.cos(d);return s[0]=j,s[1]=O,s[2]=0,s[3]=0,s[4]=-O,s[5]=j,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Q(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=d[3],st=j+j,Mt=ae+ae,Ut=Ee+Ee,Jt=j*st,hr=j*Mt,dr=j*Ut,Ar=ae*Mt,rn=ae*Ut,$r=Ee*Ut,sr=Ue*st,On=Ue*Mt,c=Ue*Ut;return s[0]=1-(Ar+$r),s[1]=hr+c,s[2]=dr-On,s[3]=0,s[4]=hr-c,s[5]=1-(Jt+$r),s[6]=rn+sr,s[7]=0,s[8]=dr+On,s[9]=rn-sr,s[10]=1-(Jt+Ar),s[11]=0,s[12]=O[0],s[13]=O[1],s[14]=O[2],s[15]=1,s}function te(s,d){var O=new p(3),j=-d[0],ae=-d[1],Ee=-d[2],Ue=d[3],st=d[4],Mt=d[5],Ut=d[6],Jt=d[7],hr=j*j+ae*ae+Ee*Ee+Ue*Ue;return hr>0?(O[0]=(st*Ue+Jt*j+Mt*Ee-Ut*ae)*2/hr,O[1]=(Mt*Ue+Jt*ae+Ut*j-st*Ee)*2/hr,O[2]=(Ut*Ue+Jt*Ee+st*ae-Mt*j)*2/hr):(O[0]=(st*Ue+Jt*j+Mt*Ee-Ut*ae)*2,O[1]=(Mt*Ue+Jt*ae+Ut*j-st*Ee)*2,O[2]=(Ut*Ue+Jt*Ee+st*ae-Mt*j)*2),Q(s,d,O),s}function Fe(s,d){return s[0]=d[12],s[1]=d[13],s[2]=d[14],s}function ze(s,d){var O=d[0],j=d[1],ae=d[2],Ee=d[4],Ue=d[5],st=d[6],Mt=d[8],Ut=d[9],Jt=d[10];return s[0]=Math.hypot(O,j,ae),s[1]=Math.hypot(Ee,Ue,st),s[2]=Math.hypot(Mt,Ut,Jt),s}function St(s,d){var O=new p(3);ze(O,d);var j=1/O[0],ae=1/O[1],Ee=1/O[2],Ue=d[0]*j,st=d[1]*ae,Mt=d[2]*Ee,Ut=d[4]*j,Jt=d[5]*ae,hr=d[6]*Ee,dr=d[8]*j,Ar=d[9]*ae,rn=d[10]*Ee,$r=Ue+Jt+rn,sr=0;return $r>0?(sr=Math.sqrt($r+1)*2,s[3]=.25*sr,s[0]=(hr-Ar)/sr,s[1]=(dr-Mt)/sr,s[2]=(st-Ut)/sr):Ue>Jt&&Ue>rn?(sr=Math.sqrt(1+Ue-Jt-rn)*2,s[3]=(hr-Ar)/sr,s[0]=.25*sr,s[1]=(st+Ut)/sr,s[2]=(dr+Mt)/sr):Jt>rn?(sr=Math.sqrt(1+Jt-Ue-rn)*2,s[3]=(dr-Mt)/sr,s[0]=(st+Ut)/sr,s[1]=.25*sr,s[2]=(hr+Ar)/sr):(sr=Math.sqrt(1+rn-Ue-Jt)*2,s[3]=(st-Ut)/sr,s[0]=(dr+Mt)/sr,s[1]=(hr+Ar)/sr,s[2]=.25*sr),s}function ut(s,d,O,j){var ae=d[0],Ee=d[1],Ue=d[2],st=d[3],Mt=ae+ae,Ut=Ee+Ee,Jt=Ue+Ue,hr=ae*Mt,dr=ae*Ut,Ar=ae*Jt,rn=Ee*Ut,$r=Ee*Jt,sr=Ue*Jt,On=st*Mt,c=st*Ut,E=st*Jt,w=j[0],_=j[1],H=j[2];return s[0]=(1-(rn+sr))*w,s[1]=(dr+E)*w,s[2]=(Ar-c)*w,s[3]=0,s[4]=(dr-E)*_,s[5]=(1-(hr+sr))*_,s[6]=($r+On)*_,s[7]=0,s[8]=(Ar+c)*H,s[9]=($r-On)*H,s[10]=(1-(hr+rn))*H,s[11]=0,s[12]=O[0],s[13]=O[1],s[14]=O[2],s[15]=1,s}function Qt(s,d,O,j,ae){var Ee=d[0],Ue=d[1],st=d[2],Mt=d[3],Ut=Ee+Ee,Jt=Ue+Ue,hr=st+st,dr=Ee*Ut,Ar=Ee*Jt,rn=Ee*hr,$r=Ue*Jt,sr=Ue*hr,On=st*hr,c=Mt*Ut,E=Mt*Jt,w=Mt*hr,_=j[0],H=j[1],Se=j[2],We=ae[0],ht=ae[1],pt=ae[2],Kt=(1-($r+On))*_,ir=(Ar+w)*_,qr=(rn-E)*_,ln=(Ar-w)*H,Mn=(1-(dr+On))*H,ui=(sr+c)*H,mi=(rn+E)*Se,Ri=(sr-c)*Se,$a=(1-(dr+$r))*Se;return s[0]=Kt,s[1]=ir,s[2]=qr,s[3]=0,s[4]=ln,s[5]=Mn,s[6]=ui,s[7]=0,s[8]=mi,s[9]=Ri,s[10]=$a,s[11]=0,s[12]=O[0]+We-(Kt*We+ln*ht+mi*pt),s[13]=O[1]+ht-(ir*We+Mn*ht+Ri*pt),s[14]=O[2]+pt-(qr*We+ui*ht+$a*pt),s[15]=1,s}function vr(s,d){var O=d[0],j=d[1],ae=d[2],Ee=d[3],Ue=O+O,st=j+j,Mt=ae+ae,Ut=O*Ue,Jt=j*Ue,hr=j*st,dr=ae*Ue,Ar=ae*st,rn=ae*Mt,$r=Ee*Ue,sr=Ee*st,On=Ee*Mt;return s[0]=1-hr-rn,s[1]=Jt+On,s[2]=dr-sr,s[3]=0,s[4]=Jt-On,s[5]=1-Ut-rn,s[6]=Ar+$r,s[7]=0,s[8]=dr+sr,s[9]=Ar-$r,s[10]=1-Ut-hr,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function tt(s,d,O,j,ae,Ee,Ue){var st=1/(O-d),Mt=1/(ae-j),Ut=1/(Ee-Ue);return s[0]=Ee*2*st,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=Ee*2*Mt,s[6]=0,s[7]=0,s[8]=(O+d)*st,s[9]=(ae+j)*Mt,s[10]=(Ue+Ee)*Ut,s[11]=-1,s[12]=0,s[13]=0,s[14]=Ue*Ee*2*Ut,s[15]=0,s}function Pe(s,d,O,j,ae){var Ee=1/Math.tan(d/2),Ue;return s[0]=Ee/O,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=Ee,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,ae!=null&&ae!==Infinity?(Ue=1/(j-ae),s[10]=(ae+j)*Ue,s[14]=2*ae*j*Ue):(s[10]=-1,s[14]=-2*j),s}function Ne(s,d,O,j){var ae=Math.tan(d.upDegrees*Math.PI/180),Ee=Math.tan(d.downDegrees*Math.PI/180),Ue=Math.tan(d.leftDegrees*Math.PI/180),st=Math.tan(d.rightDegrees*Math.PI/180),Mt=2/(Ue+st),Ut=2/(ae+Ee);return s[0]=Mt,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=Ut,s[6]=0,s[7]=0,s[8]=-((Ue-st)*Mt*.5),s[9]=(ae-Ee)*Ut*.5,s[10]=j/(O-j),s[11]=-1,s[12]=0,s[13]=0,s[14]=j*O/(O-j),s[15]=0,s}function ke(s,d,O,j,ae,Ee,Ue){var st=1/(d-O),Mt=1/(j-ae),Ut=1/(Ee-Ue);return s[0]=-2*st,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*Mt,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*Ut,s[11]=0,s[12]=(d+O)*st,s[13]=(ae+j)*Mt,s[14]=(Ue+Ee)*Ut,s[15]=1,s}function et(s,d,O,j){var ae,Ee,Ue,st,Mt,Ut,Jt,hr,dr,Ar,rn=d[0],$r=d[1],sr=d[2],On=j[0],c=j[1],E=j[2],w=O[0],_=O[1],H=O[2];return Math.abs(rn-w)<g&&Math.abs($r-_)<g&&Math.abs(sr-H)<g?J(s):(Jt=rn-w,hr=$r-_,dr=sr-H,Ar=1/Math.hypot(Jt,hr,dr),Jt*=Ar,hr*=Ar,dr*=Ar,ae=c*dr-E*hr,Ee=E*Jt-On*dr,Ue=On*hr-c*Jt,Ar=Math.hypot(ae,Ee,Ue),Ar?(Ar=1/Ar,ae*=Ar,Ee*=Ar,Ue*=Ar):(ae=0,Ee=0,Ue=0),st=hr*Ue-dr*Ee,Mt=dr*ae-Jt*Ue,Ut=Jt*Ee-hr*ae,Ar=Math.hypot(st,Mt,Ut),Ar?(Ar=1/Ar,st*=Ar,Mt*=Ar,Ut*=Ar):(st=0,Mt=0,Ut=0),s[0]=ae,s[1]=st,s[2]=Jt,s[3]=0,s[4]=Ee,s[5]=Mt,s[6]=hr,s[7]=0,s[8]=Ue,s[9]=Ut,s[10]=dr,s[11]=0,s[12]=-(ae*rn+Ee*$r+Ue*sr),s[13]=-(st*rn+Mt*$r+Ut*sr),s[14]=-(Jt*rn+hr*$r+dr*sr),s[15]=1,s)}function Ge(s,d,O,j){var ae=d[0],Ee=d[1],Ue=d[2],st=j[0],Mt=j[1],Ut=j[2],Jt=ae-O[0],hr=Ee-O[1],dr=Ue-O[2],Ar=Jt*Jt+hr*hr+dr*dr;Ar>0&&(Ar=1/Math.sqrt(Ar),Jt*=Ar,hr*=Ar,dr*=Ar);var rn=Mt*dr-Ut*hr,$r=Ut*Jt-st*dr,sr=st*hr-Mt*Jt;return Ar=rn*rn+$r*$r+sr*sr,Ar>0&&(Ar=1/Math.sqrt(Ar),rn*=Ar,$r*=Ar,sr*=Ar),s[0]=rn,s[1]=$r,s[2]=sr,s[3]=0,s[4]=hr*sr-dr*$r,s[5]=dr*rn-Jt*sr,s[6]=Jt*$r-hr*rn,s[7]=0,s[8]=Jt,s[9]=hr,s[10]=dr,s[11]=0,s[12]=ae,s[13]=Ee,s[14]=Ue,s[15]=1,s}function Ot(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}function Bt(s){return Math.hypot(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15])}function gt(s,d,O){return s[0]=d[0]+O[0],s[1]=d[1]+O[1],s[2]=d[2]+O[2],s[3]=d[3]+O[3],s[4]=d[4]+O[4],s[5]=d[5]+O[5],s[6]=d[6]+O[6],s[7]=d[7]+O[7],s[8]=d[8]+O[8],s[9]=d[9]+O[9],s[10]=d[10]+O[10],s[11]=d[11]+O[11],s[12]=d[12]+O[12],s[13]=d[13]+O[13],s[14]=d[14]+O[14],s[15]=d[15]+O[15],s}function ge(s,d,O){return s[0]=d[0]-O[0],s[1]=d[1]-O[1],s[2]=d[2]-O[2],s[3]=d[3]-O[3],s[4]=d[4]-O[4],s[5]=d[5]-O[5],s[6]=d[6]-O[6],s[7]=d[7]-O[7],s[8]=d[8]-O[8],s[9]=d[9]-O[9],s[10]=d[10]-O[10],s[11]=d[11]-O[11],s[12]=d[12]-O[12],s[13]=d[13]-O[13],s[14]=d[14]-O[14],s[15]=d[15]-O[15],s}function Lt(s,d,O){return s[0]=d[0]*O,s[1]=d[1]*O,s[2]=d[2]*O,s[3]=d[3]*O,s[4]=d[4]*O,s[5]=d[5]*O,s[6]=d[6]*O,s[7]=d[7]*O,s[8]=d[8]*O,s[9]=d[9]*O,s[10]=d[10]*O,s[11]=d[11]*O,s[12]=d[12]*O,s[13]=d[13]*O,s[14]=d[14]*O,s[15]=d[15]*O,s}function qt(s,d,O,j){return s[0]=d[0]+O[0]*j,s[1]=d[1]+O[1]*j,s[2]=d[2]+O[2]*j,s[3]=d[3]+O[3]*j,s[4]=d[4]+O[4]*j,s[5]=d[5]+O[5]*j,s[6]=d[6]+O[6]*j,s[7]=d[7]+O[7]*j,s[8]=d[8]+O[8]*j,s[9]=d[9]+O[9]*j,s[10]=d[10]+O[10]*j,s[11]=d[11]+O[11]*j,s[12]=d[12]+O[12]*j,s[13]=d[13]+O[13]*j,s[14]=d[14]+O[14]*j,s[15]=d[15]+O[15]*j,s}function xr(s,d){return s[0]===d[0]&&s[1]===d[1]&&s[2]===d[2]&&s[3]===d[3]&&s[4]===d[4]&&s[5]===d[5]&&s[6]===d[6]&&s[7]===d[7]&&s[8]===d[8]&&s[9]===d[9]&&s[10]===d[10]&&s[11]===d[11]&&s[12]===d[12]&&s[13]===d[13]&&s[14]===d[14]&&s[15]===d[15]}function tr(s,d){var O=s[0],j=s[1],ae=s[2],Ee=s[3],Ue=s[4],st=s[5],Mt=s[6],Ut=s[7],Jt=s[8],hr=s[9],dr=s[10],Ar=s[11],rn=s[12],$r=s[13],sr=s[14],On=s[15],c=d[0],E=d[1],w=d[2],_=d[3],H=d[4],Se=d[5],We=d[6],ht=d[7],pt=d[8],Kt=d[9],ir=d[10],qr=d[11],ln=d[12],Mn=d[13],ui=d[14],mi=d[15];return Math.abs(O-c)<=g*Math.max(1,Math.abs(O),Math.abs(c))&&Math.abs(j-E)<=g*Math.max(1,Math.abs(j),Math.abs(E))&&Math.abs(ae-w)<=g*Math.max(1,Math.abs(ae),Math.abs(w))&&Math.abs(Ee-_)<=g*Math.max(1,Math.abs(Ee),Math.abs(_))&&Math.abs(Ue-H)<=g*Math.max(1,Math.abs(Ue),Math.abs(H))&&Math.abs(st-Se)<=g*Math.max(1,Math.abs(st),Math.abs(Se))&&Math.abs(Mt-We)<=g*Math.max(1,Math.abs(Mt),Math.abs(We))&&Math.abs(Ut-ht)<=g*Math.max(1,Math.abs(Ut),Math.abs(ht))&&Math.abs(Jt-pt)<=g*Math.max(1,Math.abs(Jt),Math.abs(pt))&&Math.abs(hr-Kt)<=g*Math.max(1,Math.abs(hr),Math.abs(Kt))&&Math.abs(dr-ir)<=g*Math.max(1,Math.abs(dr),Math.abs(ir))&&Math.abs(Ar-qr)<=g*Math.max(1,Math.abs(Ar),Math.abs(qr))&&Math.abs(rn-ln)<=g*Math.max(1,Math.abs(rn),Math.abs(ln))&&Math.abs($r-Mn)<=g*Math.max(1,Math.abs($r),Math.abs(Mn))&&Math.abs(sr-ui)<=g*Math.max(1,Math.abs(sr),Math.abs(ui))&&Math.abs(On-mi)<=g*Math.max(1,Math.abs(On),Math.abs(mi))}var Xr=D,rr=ge;function bn(){var s=new p(3);return p!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function ue(s){var d=new p(3);return d[0]=s[0],d[1]=s[1],d[2]=s[2],d}function tn(s){var d=s[0],O=s[1],j=s[2];return Math.hypot(d,O,j)}function Fn(s,d,O){var j=new p(3);return j[0]=s,j[1]=d,j[2]=O,j}function Fi(s,d){return s[0]=d[0],s[1]=d[1],s[2]=d[2],s}function ki(s,d,O,j){return s[0]=d,s[1]=O,s[2]=j,s}function ve(s,d,O){return s[0]=d[0]+O[0],s[1]=d[1]+O[1],s[2]=d[2]+O[2],s}function Ye(s,d,O){return s[0]=d[0]-O[0],s[1]=d[1]-O[1],s[2]=d[2]-O[2],s}function vt(s,d,O){return s[0]=d[0]*O[0],s[1]=d[1]*O[1],s[2]=d[2]*O[2],s}function wt(s,d,O){return s[0]=d[0]/O[0],s[1]=d[1]/O[1],s[2]=d[2]/O[2],s}function me(s,d){return s[0]=Math.ceil(d[0]),s[1]=Math.ceil(d[1]),s[2]=Math.ceil(d[2]),s}function Pn(s,d){return s[0]=Math.floor(d[0]),s[1]=Math.floor(d[1]),s[2]=Math.floor(d[2]),s}function Cr(s,d,O){return s[0]=Math.min(d[0],O[0]),s[1]=Math.min(d[1],O[1]),s[2]=Math.min(d[2],O[2]),s}function Nt(s,d,O){return s[0]=Math.max(d[0],O[0]),s[1]=Math.max(d[1],O[1]),s[2]=Math.max(d[2],O[2]),s}function it(s,d){return s[0]=Math.round(d[0]),s[1]=Math.round(d[1]),s[2]=Math.round(d[2]),s}function Ce(s,d,O){return s[0]=d[0]*O,s[1]=d[1]*O,s[2]=d[2]*O,s}function Rt(s,d,O,j){return s[0]=d[0]+O[0]*j,s[1]=d[1]+O[1]*j,s[2]=d[2]+O[2]*j,s}function _t(s,d){var O=d[0]-s[0],j=d[1]-s[1],ae=d[2]-s[2];return Math.hypot(O,j,ae)}function Tn(s,d){var O=d[0]-s[0],j=d[1]-s[1],ae=d[2]-s[2];return O*O+j*j+ae*ae}function Ve(s){var d=s[0],O=s[1],j=s[2];return d*d+O*O+j*j}function hi(s,d){return s[0]=-d[0],s[1]=-d[1],s[2]=-d[2],s}function An(s,d){return s[0]=1/d[0],s[1]=1/d[1],s[2]=1/d[2],s}function xi(s,d){var O=d[0],j=d[1],ae=d[2],Ee=O*O+j*j+ae*ae;return Ee>0&&(Ee=1/Math.sqrt(Ee)),s[0]=d[0]*Ee,s[1]=d[1]*Ee,s[2]=d[2]*Ee,s}function Bn(s,d){return s[0]*d[0]+s[1]*d[1]+s[2]*d[2]}function yi(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=O[0],st=O[1],Mt=O[2];return s[0]=ae*Mt-Ee*st,s[1]=Ee*Ue-j*Mt,s[2]=j*st-ae*Ue,s}function Wr(s,d,O,j){var ae=d[0],Ee=d[1],Ue=d[2];return s[0]=ae+j*(O[0]-ae),s[1]=Ee+j*(O[1]-Ee),s[2]=Ue+j*(O[2]-Ue),s}function Oi(s,d,O,j,ae,Ee){var Ue=Ee*Ee,st=Ue*(2*Ee-3)+1,Mt=Ue*(Ee-2)+Ee,Ut=Ue*(Ee-1),Jt=Ue*(3-2*Ee);return s[0]=d[0]*st+O[0]*Mt+j[0]*Ut+ae[0]*Jt,s[1]=d[1]*st+O[1]*Mt+j[1]*Ut+ae[1]*Jt,s[2]=d[2]*st+O[2]*Mt+j[2]*Ut+ae[2]*Jt,s}function Oa(s,d,O,j,ae,Ee){var Ue=1-Ee,st=Ue*Ue,Mt=Ee*Ee,Ut=st*Ue,Jt=3*Ee*st,hr=3*Mt*Ue,dr=Mt*Ee;return s[0]=d[0]*Ut+O[0]*Jt+j[0]*hr+ae[0]*dr,s[1]=d[1]*Ut+O[1]*Jt+j[1]*hr+ae[1]*dr,s[2]=d[2]*Ut+O[2]*Jt+j[2]*hr+ae[2]*dr,s}function Aa(s,d){d=d||1;var O=y()*2*Math.PI,j=y()*2-1,ae=Math.sqrt(1-j*j)*d;return s[0]=Math.cos(O)*ae,s[1]=Math.sin(O)*ae,s[2]=j*d,s}function Ui(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=O[3]*j+O[7]*ae+O[11]*Ee+O[15];return Ue=Ue||1,s[0]=(O[0]*j+O[4]*ae+O[8]*Ee+O[12])/Ue,s[1]=(O[1]*j+O[5]*ae+O[9]*Ee+O[13])/Ue,s[2]=(O[2]*j+O[6]*ae+O[10]*Ee+O[14])/Ue,s}function ea(s,d,O){var j=d[0],ae=d[1],Ee=d[2];return s[0]=j*O[0]+ae*O[3]+Ee*O[6],s[1]=j*O[1]+ae*O[4]+Ee*O[7],s[2]=j*O[2]+ae*O[5]+Ee*O[8],s}function Ti(s,d,O){var j=O[0],ae=O[1],Ee=O[2],Ue=O[3],st=d[0],Mt=d[1],Ut=d[2],Jt=ae*Ut-Ee*Mt,hr=Ee*st-j*Ut,dr=j*Mt-ae*st,Ar=ae*dr-Ee*hr,rn=Ee*Jt-j*dr,$r=j*hr-ae*Jt,sr=Ue*2;return Jt*=sr,hr*=sr,dr*=sr,Ar*=2,rn*=2,$r*=2,s[0]=st+Jt+Ar,s[1]=Mt+hr+rn,s[2]=Ut+dr+$r,s}function _n(s,d,O,j){var ae=[],Ee=[];return ae[0]=d[0]-O[0],ae[1]=d[1]-O[1],ae[2]=d[2]-O[2],Ee[0]=ae[0],Ee[1]=ae[1]*Math.cos(j)-ae[2]*Math.sin(j),Ee[2]=ae[1]*Math.sin(j)+ae[2]*Math.cos(j),s[0]=Ee[0]+O[0],s[1]=Ee[1]+O[1],s[2]=Ee[2]+O[2],s}function Ci(s,d,O,j){var ae=[],Ee=[];return ae[0]=d[0]-O[0],ae[1]=d[1]-O[1],ae[2]=d[2]-O[2],Ee[0]=ae[2]*Math.sin(j)+ae[0]*Math.cos(j),Ee[1]=ae[1],Ee[2]=ae[2]*Math.cos(j)-ae[0]*Math.sin(j),s[0]=Ee[0]+O[0],s[1]=Ee[1]+O[1],s[2]=Ee[2]+O[2],s}function qn(s,d,O,j){var ae=[],Ee=[];return ae[0]=d[0]-O[0],ae[1]=d[1]-O[1],ae[2]=d[2]-O[2],Ee[0]=ae[0]*Math.cos(j)-ae[1]*Math.sin(j),Ee[1]=ae[0]*Math.sin(j)+ae[1]*Math.cos(j),Ee[2]=ae[2],s[0]=Ee[0]+O[0],s[1]=Ee[1]+O[1],s[2]=Ee[2]+O[2],s}function Wi(s,d){var O=s[0],j=s[1],ae=s[2],Ee=d[0],Ue=d[1],st=d[2],Mt=Math.sqrt(O*O+j*j+ae*ae),Ut=Math.sqrt(Ee*Ee+Ue*Ue+st*st),Jt=Mt*Ut,hr=Jt&&Bn(s,d)/Jt;return Math.acos(Math.min(Math.max(hr,-1),1))}function ta(s){return s[0]=0,s[1]=0,s[2]=0,s}function si(s){return"vec3("+s[0]+", "+s[1]+", "+s[2]+")"}function li(s,d){return s[0]===d[0]&&s[1]===d[1]&&s[2]===d[2]}function Za(s,d){var O=s[0],j=s[1],ae=s[2],Ee=d[0],Ue=d[1],st=d[2];return Math.abs(O-Ee)<=g*Math.max(1,Math.abs(O),Math.abs(Ee))&&Math.abs(j-Ue)<=g*Math.max(1,Math.abs(j),Math.abs(Ue))&&Math.abs(ae-st)<=g*Math.max(1,Math.abs(ae),Math.abs(st))}var di=Ye,Ha=vt,Va=wt,ra=_t,xa=Tn,va=tn,Vi=Ve,ia=function(){var s=bn();return function(d,O,j,ae,Ee,Ue){var st,Mt;for(O||(O=3),j||(j=0),ae?Mt=Math.min(ae*O+j,d.length):Mt=d.length,st=j;st<Mt;st+=O)s[0]=d[st],s[1]=d[st+1],s[2]=d[st+2],Ee(s,s,Ue),d[st]=s[0],d[st+1]=s[1],d[st+2]=s[2];return d}}();function kn(){var s=new p(4);return p!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0),s}function Ka(s){var d=new p(4);return d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d}function Pa(s,d,O,j){var ae=new p(4);return ae[0]=s,ae[1]=d,ae[2]=O,ae[3]=j,ae}function Qi(s,d){return s[0]=d[0],s[1]=d[1],s[2]=d[2],s[3]=d[3],s}function Ia(s,d,O,j,ae){return s[0]=d,s[1]=O,s[2]=j,s[3]=ae,s}function Ma(s,d,O){return s[0]=d[0]+O[0],s[1]=d[1]+O[1],s[2]=d[2]+O[2],s[3]=d[3]+O[3],s}function ji(s,d,O){return s[0]=d[0]-O[0],s[1]=d[1]-O[1],s[2]=d[2]-O[2],s[3]=d[3]-O[3],s}function aa(s,d,O){return s[0]=d[0]*O[0],s[1]=d[1]*O[1],s[2]=d[2]*O[2],s[3]=d[3]*O[3],s}function vi(s,d,O){return s[0]=d[0]/O[0],s[1]=d[1]/O[1],s[2]=d[2]/O[2],s[3]=d[3]/O[3],s}function ei(s,d){return s[0]=Math.ceil(d[0]),s[1]=Math.ceil(d[1]),s[2]=Math.ceil(d[2]),s[3]=Math.ceil(d[3]),s}function oa(s,d){return s[0]=Math.floor(d[0]),s[1]=Math.floor(d[1]),s[2]=Math.floor(d[2]),s[3]=Math.floor(d[3]),s}function $i(s,d,O){return s[0]=Math.min(d[0],O[0]),s[1]=Math.min(d[1],O[1]),s[2]=Math.min(d[2],O[2]),s[3]=Math.min(d[3],O[3]),s}function Gi(s,d,O){return s[0]=Math.max(d[0],O[0]),s[1]=Math.max(d[1],O[1]),s[2]=Math.max(d[2],O[2]),s[3]=Math.max(d[3],O[3]),s}function Ji(s,d){return s[0]=Math.round(d[0]),s[1]=Math.round(d[1]),s[2]=Math.round(d[2]),s[3]=Math.round(d[3]),s}function pa(s,d,O){return s[0]=d[0]*O,s[1]=d[1]*O,s[2]=d[2]*O,s[3]=d[3]*O,s}function ka(s,d,O,j){return s[0]=d[0]+O[0]*j,s[1]=d[1]+O[1]*j,s[2]=d[2]+O[2]*j,s[3]=d[3]+O[3]*j,s}function ma(s,d){var O=d[0]-s[0],j=d[1]-s[1],ae=d[2]-s[2],Ee=d[3]-s[3];return Math.hypot(O,j,ae,Ee)}function Bi(s,d){var O=d[0]-s[0],j=d[1]-s[1],ae=d[2]-s[2],Ee=d[3]-s[3];return O*O+j*j+ae*ae+Ee*Ee}function Na(s){var d=s[0],O=s[1],j=s[2],ae=s[3];return Math.hypot(d,O,j,ae)}function pi(s){var d=s[0],O=s[1],j=s[2],ae=s[3];return d*d+O*O+j*j+ae*ae}function zi(s,d){return s[0]=-d[0],s[1]=-d[1],s[2]=-d[2],s[3]=-d[3],s}function Mi(s,d){return s[0]=1/d[0],s[1]=1/d[1],s[2]=1/d[2],s[3]=1/d[3],s}function Yn(s,d){var O=d[0],j=d[1],ae=d[2],Ee=d[3],Ue=O*O+j*j+ae*ae+Ee*Ee;return Ue>0&&(Ue=1/Math.sqrt(Ue)),s[0]=O*Ue,s[1]=j*Ue,s[2]=ae*Ue,s[3]=Ee*Ue,s}function bi(s,d){return s[0]*d[0]+s[1]*d[1]+s[2]*d[2]+s[3]*d[3]}function sa(s,d,O,j){var ae=O[0]*j[1]-O[1]*j[0],Ee=O[0]*j[2]-O[2]*j[0],Ue=O[0]*j[3]-O[3]*j[0],st=O[1]*j[2]-O[2]*j[1],Mt=O[1]*j[3]-O[3]*j[1],Ut=O[2]*j[3]-O[3]*j[2],Jt=d[0],hr=d[1],dr=d[2],Ar=d[3];return s[0]=hr*Ut-dr*Mt+Ar*st,s[1]=-(Jt*Ut)+dr*Ue-Ar*Ee,s[2]=Jt*Mt-hr*Ue+Ar*ae,s[3]=-(Jt*st)+hr*Ee-dr*ae,s}function Ra(s,d,O,j){var ae=d[0],Ee=d[1],Ue=d[2],st=d[3];return s[0]=ae+j*(O[0]-ae),s[1]=Ee+j*(O[1]-Ee),s[2]=Ue+j*(O[2]-Ue),s[3]=st+j*(O[3]-st),s}function Qa(s,d){d=d||1;var O,j,ae,Ee,Ue,st;do O=y()*2-1,j=y()*2-1,Ue=O*O+j*j;while(Ue>=1);do ae=y()*2-1,Ee=y()*2-1,st=ae*ae+Ee*Ee;while(st>=1);var Mt=Math.sqrt((1-Ue)/st);return s[0]=d*O,s[1]=d*j,s[2]=d*ae*Mt,s[3]=d*Ee*Mt,s}function ce(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=d[3];return s[0]=O[0]*j+O[4]*ae+O[8]*Ee+O[12]*Ue,s[1]=O[1]*j+O[5]*ae+O[9]*Ee+O[13]*Ue,s[2]=O[2]*j+O[6]*ae+O[10]*Ee+O[14]*Ue,s[3]=O[3]*j+O[7]*ae+O[11]*Ee+O[15]*Ue,s}function be(s,d,O){var j=d[0],ae=d[1],Ee=d[2],Ue=O[0],st=O[1],Mt=O[2],Ut=O[3],Jt=Ut*j+st*Ee-Mt*ae,hr=Ut*ae+Mt*j-Ue*Ee,dr=Ut*Ee+Ue*ae-st*j,Ar=-Ue*j-st*ae-Mt*Ee;return s[0]=Jt*Ut+Ar*-Ue+hr*-Mt-dr*-st,s[1]=hr*Ut+Ar*-st+dr*-Ue-Jt*-Mt,s[2]=dr*Ut+Ar*-Mt+Jt*-st-hr*-Ue,s[3]=d[3],s}function Qe(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}function U(s){return"vec4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+")"}function K(s,d){return s[0]===d[0]&&s[1]===d[1]&&s[2]===d[2]&&s[3]===d[3]}function Me(s,d){var O=s[0],j=s[1],ae=s[2],Ee=s[3],Ue=d[0],st=d[1],Mt=d[2],Ut=d[3];return Math.abs(O-Ue)<=g*Math.max(1,Math.abs(O),Math.abs(Ue))&&Math.abs(j-st)<=g*Math.max(1,Math.abs(j),Math.abs(st))&&Math.abs(ae-Mt)<=g*Math.max(1,Math.abs(ae),Math.abs(Mt))&&Math.abs(Ee-Ut)<=g*Math.max(1,Math.abs(Ee),Math.abs(Ut))}var ct=ji,lr=aa,Ur=vi,Un=ma,cr=Bi,Xi=Na,Li=pi,Gt=function(){var s=kn();return function(d,O,j,ae,Ee,Ue){var st,Mt;for(O||(O=4),j||(j=0),ae?Mt=Math.min(ae*O+j,d.length):Mt=d.length,st=j;st<Mt;st+=O)s[0]=d[st],s[1]=d[st+1],s[2]=d[st+2],s[3]=d[st+3],Ee(s,s,Ue),d[st]=s[0],d[st+1]=s[1],d[st+2]=s[2],d[st+3]=s[3];return d}}()},ISzh:function(A,v,a){var l=a("PORw"),o=a("lf6h"),m="[object Number]";function g(p){return typeof p=="number"||o(p)&&l(p)==m}A.exports=g},IYlO:function(A,v,a){var l=a("elp8"),o=a("Cm6F"),m=a("Pfvu"),g="[object Object]",p=Function.prototype,y=Object.prototype,b=p.toString,I=y.hasOwnProperty,P=b.call(Object);function M(z){if(!m(z)||l(z)!=g)return!1;var oe=o(z);if(oe===null)return!0;var G=I.call(oe,"constructor")&&oe.constructor;return typeof G=="function"&&G instanceof G&&b.call(G)==P}A.exports=M},Ijbi:function(A,v,a){var l=a("WkPL");function o(m){if(Array.isArray(m))return l(m)}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},J4zp:function(A,v,a){var l=a("wTVA"),o=a("m0LI"),m=a("ZhPi"),g=a("wkBT");function p(y,b){return l(y)||o(y,b)||m(y,b)||g()}A.exports=p,A.exports.default=A.exports,A.exports.__esModule=!0},J7lC:function(A,v){},JXFl:function(A,v){function a(l,o){return l===o||l!==l&&o!==o}A.exports=a},JYqP:function(A,v){function a(l,o){return l.has(o)}A.exports=a},JaNU:function(A,v){function a(l){var o=typeof l;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?l!=="__proto__":l===null}A.exports=a},Jj6M:function(A,v,a){var l=a("0uRJ"),o=a("D2QY");function m(g,p,y){return y===void 0&&(y=p,p=void 0),y!==void 0&&(y=o(y),y=y===y?y:0),p!==void 0&&(p=o(p),p=p===p?p:0),l(o(g),p,y)}A.exports=m},Jzvz:function(A,v,a){var l=a("2uKD");function o(m){return m&&m.length?l(m):[]}A.exports=o},KEWC:function(A,v){function a(l){var o=this.__data__,m=o.delete(l);return this.size=o.size,m}A.exports=a},L56e:function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l=["mapload"]},LKzl:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingWhenOnSyntax=void 0;var l=a("406g"),o=a("z4Hk"),m=function(){function g(p){this._binding=p,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new l.BindingOnSyntax(this._binding)}return g.prototype.when=function(p){return this._bindingWhenSyntax.when(p)},g.prototype.whenTargetNamed=function(p){return this._bindingWhenSyntax.whenTargetNamed(p)},g.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},g.prototype.whenTargetTagged=function(p,y){return this._bindingWhenSyntax.whenTargetTagged(p,y)},g.prototype.whenInjectedInto=function(p){return this._bindingWhenSyntax.whenInjectedInto(p)},g.prototype.whenParentNamed=function(p){return this._bindingWhenSyntax.whenParentNamed(p)},g.prototype.whenParentTagged=function(p,y){return this._bindingWhenSyntax.whenParentTagged(p,y)},g.prototype.whenAnyAncestorIs=function(p){return this._bindingWhenSyntax.whenAnyAncestorIs(p)},g.prototype.whenNoAncestorIs=function(p){return this._bindingWhenSyntax.whenNoAncestorIs(p)},g.prototype.whenAnyAncestorNamed=function(p){return this._bindingWhenSyntax.whenAnyAncestorNamed(p)},g.prototype.whenAnyAncestorTagged=function(p,y){return this._bindingWhenSyntax.whenAnyAncestorTagged(p,y)},g.prototype.whenNoAncestorNamed=function(p){return this._bindingWhenSyntax.whenNoAncestorNamed(p)},g.prototype.whenNoAncestorTagged=function(p,y){return this._bindingWhenSyntax.whenNoAncestorTagged(p,y)},g.prototype.whenAnyAncestorMatches=function(p){return this._bindingWhenSyntax.whenAnyAncestorMatches(p)},g.prototype.whenNoAncestorMatches=function(p){return this._bindingWhenSyntax.whenNoAncestorMatches(p)},g.prototype.onActivation=function(p){return this._bindingOnSyntax.onActivation(p)},g}();v.BindingWhenOnSyntax=m},LUbI:function(A,v,a){var l=a("NSh6"),o=a("DxzV"),m=a("9rFP"),g=1/0,p=l&&1/m(new l([,-0]))[1]==g?function(y){return new l(y)}:o;A.exports=p},LgvC:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Binding=void 0;var l=a("FV85"),o=a("d9O0"),m=function(){function g(p,y){this.id=o.id(),this.activated=!1,this.serviceIdentifier=p,this.scope=y,this.type=l.BindingTypeEnum.Invalid,this.constraint=function(b){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return g.prototype.clone=function(){var p=new g(this.serviceIdentifier,this.scope);return p.activated=p.scope===l.BindingScopeEnum.Singleton?this.activated:!1,p.implementationType=this.implementationType,p.dynamicValue=this.dynamicValue,p.scope=this.scope,p.type=this.type,p.factory=this.factory,p.provider=this.provider,p.constraint=this.constraint,p.onActivation=this.onActivation,p.cache=this.cache,p},g}();v.Binding=m},Lu5u:function(A,v,a){var l=a("DmdW");function o(m,g){var p=m==null?0:m.length;return!!p&&l(m,g,0)>-1}A.exports=o},MC81:function(A,v,a){var l=a("0Qmp");function o(m,g,p){var y=m.length;return p=p===void 0?y:p,!g&&p>=y?m:l(m,g,p)}A.exports=o},MON2:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.STACK_OVERFLOW=v.CIRCULAR_DEPENDENCY_IN_FACTORY=v.POST_CONSTRUCT_ERROR=v.MULTIPLE_POST_CONSTRUCT_METHODS=v.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=v.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=v.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=v.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=v.ARGUMENTS_LENGTH_MISMATCH=v.INVALID_DECORATOR_OPERATION=v.INVALID_TO_SELF_VALUE=v.INVALID_FUNCTION_BINDING=v.INVALID_MIDDLEWARE_RETURN=v.NO_MORE_SNAPSHOTS_AVAILABLE=v.INVALID_BINDING_TYPE=v.NOT_IMPLEMENTED=v.CIRCULAR_DEPENDENCY=v.UNDEFINED_INJECT_ANNOTATION=v.MISSING_INJECT_ANNOTATION=v.MISSING_INJECTABLE_ANNOTATION=v.NOT_REGISTERED=v.CANNOT_UNBIND=v.AMBIGUOUS_MATCH=v.KEY_NOT_FOUND=v.NULL_ARGUMENT=v.DUPLICATED_METADATA=v.DUPLICATED_INJECTABLE_DECORATOR=void 0,v.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",v.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",v.NULL_ARGUMENT="NULL argument",v.KEY_NOT_FOUND="Key Not Found",v.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",v.CANNOT_UNBIND="Could not unbind serviceIdentifier:",v.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",v.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",v.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var l=function(p){return"@inject called with undefined this could mean that the class "+p+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};v.UNDEFINED_INJECT_ANNOTATION=l,v.CIRCULAR_DEPENDENCY="Circular dependency found:",v.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",v.INVALID_BINDING_TYPE="Invalid binding type:",v.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",v.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",v.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",v.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",v.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var o=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"The number of constructor arguments in the derived class "+(p[0]+" must be >= than the number of constructor arguments of its base class.")};v.ARGUMENTS_LENGTH_MISMATCH=o,v.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",v.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",v.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",v.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",v.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var m=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"@postConstruct error in class "+p[0]+": "+p[1]};v.POST_CONSTRUCT_ERROR=m;var g=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"It looks like there is a circular dependency "+("in one of the '"+p[0]+"' bindings. Please investigate bindings with")+("service identifier '"+p[1]+"'.")};v.CIRCULAR_DEPENDENCY_IN_FACTORY=g,v.STACK_OVERFLOW="Maximum call stack size exceeded"},MSJP:function(A,v,a){var l=a("nY2M"),o=a("2EVJ"),m=a("d0W2"),g=a("lxDN");function p(y){return function(b){b=g(b);var I=o(b)?m(b):void 0,P=I?I[0]:b.charAt(0),M=I?l(I,1).join(""):b.slice(1);return P[y]()+M}}A.exports=p},MbTZ:function(A,v,a){var l=a("84Z5");function o(m,g){var p=g?l(m.buffer):m.buffer;return new m.constructor(p,m.byteOffset,m.length)}A.exports=o},Mn8k:function(A,v,a){var l=a("qHbu"),o=function(){try{var m=l(Object,"defineProperty");return m({},"",{}),m}catch(g){}}();A.exports=o},MsYU:function(A,v,a){var l=a("lW+E"),o=/^\s+/;function m(g){return g&&g.slice(0,l(g)+1).replace(o,"")}A.exports=m},"N+Uj":function(A,v,a){var l=a("fkhx"),o=a("Zjj6"),m=a("Txlo"),g=a("PWyJ");function p(y,b,I){if(!g(I))return!1;var P=typeof b;return(P=="number"?o(I)&&m(b,I.length):P=="string"&&b in I)?l(I[b],y):!1}A.exports=p},N6Zc:function(A,v){function a(l,o,m){for(var g=-1,p=l==null?0:l.length;++g<p;)if(m(o,l[g]))return!0;return!1}A.exports=a},Nsbk:function(A,v){function a(l){return A.exports=a=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},A.exports.default=A.exports,A.exports.__esModule=!0,a(l)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},O0HO:function(A,v){var a=800,l=16,o=Date.now;function m(g){var p=0,y=0;return function(){var b=o(),I=l-(b-y);if(y=b,I>0){if(++p>=a)return arguments[0]}else p=0;return g.apply(void 0,arguments)}}A.exports=m},O1je:function(A,v){},O3or:function(A,v,a){"use strict";var l=Object.prototype.hasOwnProperty,o="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(o=!1));function g(I,P,M){this.fn=I,this.context=P,this.once=M||!1}function p(I,P,M,z,oe){if(typeof M!="function")throw new TypeError("The listener must be a function");var G=new g(M,z||I,oe),ee=o?o+P:P;return I._events[ee]?I._events[ee].fn?I._events[ee]=[I._events[ee],G]:I._events[ee].push(G):(I._events[ee]=G,I._eventsCount++),I}function y(I,P){--I._eventsCount==0?I._events=new m:delete I._events[P]}function b(){this._events=new m,this._eventsCount=0}b.prototype.eventNames=function(){var P=[],M,z;if(this._eventsCount===0)return P;for(z in M=this._events)l.call(M,z)&&P.push(o?z.slice(1):z);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(M)):P},b.prototype.listeners=function(P){var M=o?o+P:P,z=this._events[M];if(!z)return[];if(z.fn)return[z.fn];for(var oe=0,G=z.length,ee=new Array(G);oe<G;oe++)ee[oe]=z[oe].fn;return ee},b.prototype.listenerCount=function(P){var M=o?o+P:P,z=this._events[M];return z?z.fn?1:z.length:0},b.prototype.emit=function(P,M,z,oe,G,ee){var pe=o?o+P:P;if(!this._events[pe])return!1;var J=this._events[pe],se=arguments.length,fe,X;if(J.fn){switch(J.once&&this.removeListener(P,J.fn,void 0,!0),se){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,M),!0;case 3:return J.fn.call(J.context,M,z),!0;case 4:return J.fn.call(J.context,M,z,oe),!0;case 5:return J.fn.call(J.context,M,z,oe,G),!0;case 6:return J.fn.call(J.context,M,z,oe,G,ee),!0}for(X=1,fe=new Array(se-1);X<se;X++)fe[X-1]=arguments[X];J.fn.apply(J.context,fe)}else{var Oe=J.length,D;for(X=0;X<Oe;X++)switch(J[X].once&&this.removeListener(P,J[X].fn,void 0,!0),se){case 1:J[X].fn.call(J[X].context);break;case 2:J[X].fn.call(J[X].context,M);break;case 3:J[X].fn.call(J[X].context,M,z);break;case 4:J[X].fn.call(J[X].context,M,z,oe);break;default:if(!fe)for(D=1,fe=new Array(se-1);D<se;D++)fe[D-1]=arguments[D];J[X].fn.apply(J[X].context,fe)}}return!0},b.prototype.on=function(P,M,z){return p(this,P,M,z,!1)},b.prototype.once=function(P,M,z){return p(this,P,M,z,!0)},b.prototype.removeListener=function(P,M,z,oe){var G=o?o+P:P;if(!this._events[G])return this;if(!M)return y(this,G),this;var ee=this._events[G];if(ee.fn)ee.fn===M&&(!oe||ee.once)&&(!z||ee.context===z)&&y(this,G);else{for(var pe=0,J=[],se=ee.length;pe<se;pe++)(ee[pe].fn!==M||oe&&!ee[pe].once||z&&ee[pe].context!==z)&&J.push(ee[pe]);J.length?this._events[G]=J.length===1?J[0]:J:y(this,G)}return this},b.prototype.removeAllListeners=function(P){var M;return P?(M=o?o+P:P,this._events[M]&&y(this,M)):(this._events=new m,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=o,b.EventEmitter=b,A.exports=b},OObD:function(A,v,a){(function(l){var o=a("7zvB"),m=v&&!v.nodeType&&v,g=m&&typeof l=="object"&&l&&!l.nodeType&&l,p=g&&g.exports===m,y=p?o.Buffer:void 0,b=y?y.allocUnsafe:void 0;function I(P,M){if(M)return P.slice();var z=P.length,oe=b?b(z):new P.constructor(z);return P.copy(oe),oe}l.exports=I}).call(this,a("jV5f")(A))},OeSu:function(A,v,a){"use strict";a.d(v,"b",function(){return p}),a.d(v,"f",function(){return b}),a.d(v,"e",function(){return z}),a.d(v,"g",function(){return X}),a.d(v,"a",function(){return Ke}),a.d(v,"c",function(){return He}),a.d(v,"d",function(){return C});var l=63710088e-1,o={centimeters:l*100,centimetres:l*100,degrees:l/111325,feet:l*3.28084,inches:l*39.37,kilometers:l/1e3,kilometres:l/1e3,meters:l,metres:l,miles:l/1609.344,millimeters:l*1e3,millimetres:l*1e3,nauticalmiles:l/1852,radians:1,yards:l*1.0936},m={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l,yards:1.0936133},g={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function p(At,Et,ne){ne===void 0&&(ne={});var Q={type:"Feature"};return(ne.id===0||ne.id)&&(Q.id=ne.id),ne.bbox&&(Q.bbox=ne.bbox),Q.properties=Et||{},Q.geometry=At,Q}function y(At,Et,ne){switch(ne===void 0&&(ne={}),At){case"Point":return b(Et).geometry;case"LineString":return z(Et).geometry;case"Polygon":return P(Et).geometry;case"MultiPoint":return pe(Et).geometry;case"MultiLineString":return ee(Et).geometry;case"MultiPolygon":return J(Et).geometry;default:throw new Error(At+" is invalid")}}function b(At,Et,ne){if(ne===void 0&&(ne={}),!At)throw new Error("coordinates is required");if(!Array.isArray(At))throw new Error("coordinates must be an Array");if(At.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!He(At[0])||!He(At[1]))throw new Error("coordinates must contain numbers");var Q={type:"Point",coordinates:At};return p(Q,Et,ne)}function I(At,Et,ne){return ne===void 0&&(ne={}),G(At.map(function(Q){return b(Q,Et)}),ne)}function P(At,Et,ne){ne===void 0&&(ne={});for(var Q=0,te=At;Q<te.length;Q++){var Fe=te[Q];if(Fe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ze=0;ze<Fe[Fe.length-1].length;ze++)if(Fe[Fe.length-1][ze]!==Fe[0][ze])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:At};return p(St,Et,ne)}function M(At,Et,ne){return ne===void 0&&(ne={}),G(At.map(function(Q){return P(Q,Et)}),ne)}function z(At,Et,ne){if(ne===void 0&&(ne={}),At.length<2)throw new Error("coordinates must be an array of two or more positions");var Q={type:"LineString",coordinates:At};return p(Q,Et,ne)}function oe(At,Et,ne){return ne===void 0&&(ne={}),G(At.map(function(Q){return z(Q,Et)}),ne)}function G(At,Et){Et===void 0&&(Et={});var ne={type:"FeatureCollection"};return Et.id&&(ne.id=Et.id),Et.bbox&&(ne.bbox=Et.bbox),ne.features=At,ne}function ee(At,Et,ne){ne===void 0&&(ne={});var Q={type:"MultiLineString",coordinates:At};return p(Q,Et,ne)}function pe(At,Et,ne){ne===void 0&&(ne={});var Q={type:"MultiPoint",coordinates:At};return p(Q,Et,ne)}function J(At,Et,ne){ne===void 0&&(ne={});var Q={type:"MultiPolygon",coordinates:At};return p(Q,Et,ne)}function se(At,Et,ne){ne===void 0&&(ne={});var Q={type:"GeometryCollection",geometries:At};return p(Q,Et,ne)}function fe(At,Et){if(Et===void 0&&(Et=0),Et&&!(Et>=0))throw new Error("precision must be a positive number");var ne=Math.pow(10,Et||0);return Math.round(At*ne)/ne}function X(At,Et){Et===void 0&&(Et="kilometers");var ne=o[Et];if(!ne)throw new Error(Et+" units is invalid");return At*ne}function Oe(At,Et){Et===void 0&&(Et="kilometers");var ne=o[Et];if(!ne)throw new Error(Et+" units is invalid");return At/ne}function D(At,Et){return ot(Oe(At,Et))}function De(At){var Et=At%360;return Et<0&&(Et+=360),Et}function ot(At){var Et=At%(2*Math.PI);return Et*180/Math.PI}function Ke(At){var Et=At%360;return Et*Math.PI/180}function Le(At,Et,ne){if(Et===void 0&&(Et="kilometers"),ne===void 0&&(ne="kilometers"),!(At>=0))throw new Error("length must be a positive number");return X(Oe(At,Et),ne)}function W(At,Et,ne){if(Et===void 0&&(Et="meters"),ne===void 0&&(ne="kilometers"),!(At>=0))throw new Error("area must be a positive number");var Q=g[Et];if(!Q)throw new Error("invalid original units");var te=g[ne];if(!te)throw new Error("invalid final units");return At/Q*te}function He(At){return!isNaN(At)&&At!==null&&!Array.isArray(At)}function C(At){return!!At&&At.constructor===Object}function Ze(At){if(!At)throw new Error("bbox is required");if(!Array.isArray(At))throw new Error("bbox must be an Array");if(At.length!==4&&At.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");At.forEach(function(Et){if(!He(Et))throw new Error("bbox must only contain numbers")})}function rt(At){if(!At)throw new Error("id is required");if(["string","number"].indexOf(typeof At)===-1)throw new Error("id must be a number or a string")}},OoN2:function(A,v,a){"use strict";a.d(v,"b",function(){return j0}),a.d(v,"a",function(){return Wm});var l={},o={},m=function(i){return o[i]},g=function(i,t){o[i]=t},p=function(i){return l[i]},y=function(i,t){l[i]=t},b={},I={},P=34,M=10,z=13;function oe(e){return new Function("d","return {"+e.map(function(i,t){return JSON.stringify(i)+": d["+t+'] || ""'}).join(",")+"}")}function G(e,i){var t=oe(e);return function(r,n){return i(t(r),n,e)}}function ee(e){var i=Object.create(null),t=[];return e.forEach(function(r){for(var n in r)n in i||t.push(i[n]=n)}),t}function pe(e,i){var t=e+"",r=t.length;return r<i?new Array(i-r+1).join(0)+t:t}function J(e){return e<0?"-"+pe(-e,6):e>9999?"+"+pe(e,6):pe(e,4)}function se(e){var i=e.getUTCHours(),t=e.getUTCMinutes(),r=e.getUTCSeconds(),n=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":J(e.getUTCFullYear(),4)+"-"+pe(e.getUTCMonth()+1,2)+"-"+pe(e.getUTCDate(),2)+(n?"T"+pe(i,2)+":"+pe(t,2)+":"+pe(r,2)+"."+pe(n,3)+"Z":r?"T"+pe(i,2)+":"+pe(t,2)+":"+pe(r,2)+"Z":t||i?"T"+pe(i,2)+":"+pe(t,2)+"Z":"")}var fe=function(e){var i=new RegExp('["'+e+`
\r]`),t=e.charCodeAt(0);function r(V,_e){var je,yt,kt=n(V,function(nr,gr){if(je)return je(nr,gr-1);yt=nr,je=_e?G(nr,_e):oe(nr)});return kt.columns=yt||[],kt}function n(V,_e){var je=[],yt=V.length,kt=0,nr=0,gr,yr=yt<=0,Vr=!1;V.charCodeAt(yt-1)===M&&--yt,V.charCodeAt(yt-1)===z&&--yt;function hn(){if(yr)return I;if(Vr)return Vr=!1,b;var Rn,en=kt,Ln;if(V.charCodeAt(en)===P){for(;kt++<yt&&V.charCodeAt(kt)!==P||V.charCodeAt(++kt)===P;);return(Rn=kt)>=yt?yr=!0:(Ln=V.charCodeAt(kt++))===M?Vr=!0:Ln===z&&(Vr=!0,V.charCodeAt(kt)===M&&++kt),V.slice(en+1,Rn-1).replace(/""/g,'"')}for(;kt<yt;){if((Ln=V.charCodeAt(Rn=kt++))===M)Vr=!0;else if(Ln===z)Vr=!0,V.charCodeAt(kt)===M&&++kt;else if(Ln!==t)continue;return V.slice(en,Rn)}return yr=!0,V.slice(en,yt)}for(;(gr=hn())!==I;){for(var Dn=[];gr!==b&&gr!==I;)Dn.push(gr),gr=hn();_e&&(Dn=_e(Dn,nr++))==null||je.push(Dn)}return je}function u(V,_e){return V.map(function(je){return _e.map(function(yt){return Y(je[yt])}).join(e)})}function h(V,_e){return _e==null&&(_e=ee(V)),[_e.map(Y).join(e)].concat(u(V,_e)).join(`
`)}function S(V,_e){return _e==null&&(_e=ee(V)),u(V,_e).join(`
`)}function x(V){return V.map(N).join(`
`)}function N(V){return V.map(Y).join(e)}function Y(V){return V==null?"":V instanceof Date?se(V):i.test(V+="")?'"'+V.replace(/"/g,'""')+'"':V}return{parse:r,parseRows:n,format:h,formatBody:S,formatRows:x,formatRow:N,formatValue:Y}},X=fe(","),Oe=X.parse,D=X.parseRows,De=X.format,ot=X.formatBody,Ke=X.formatRows,Le=X.formatRow,W=X.formatValue,He=a("KeqO"),C=a.n(He),Ze=a("ugFK"),rt=a.n(Ze),At=a("24UC"),Et=a.n(At);function ne(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?ne(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function te(e,i){var t=i.x,r=i.y,n=i.x1,u=i.y1,h=i.coordinates,S=[];return e.forEach(function(x,N){var Y=[];if(t&&r&&(Y=[parseFloat(x[t]),parseFloat(x[r])]),t&&r&&n&&u){var V=[parseFloat(x[t]),parseFloat(x[r])],_e=[parseFloat(x[n]),parseFloat(x[u])];Y=[V,_e]}if(h){var je="Polygon";Array.isArray(h[0])||(je="Point"),Array.isArray(h[0])&&!Array.isArray(h[0][0])&&(je="LineString");var yt={type:je,coordinates:rt()(x[h])};Et()(yt,!0),Y=yt.coordinates}var kt=Q(Q({},x),{},{_id:N,coordinates:Y});S.push(kt)}),{dataArray:S}}var Fe=[{lng1:100,lat1:30,lng2:130,lat2:30}],ze={parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}};function St(e,i){var t=Oe(e);return te(t,i)}var ut=a("OeSu");function Qt(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function vr(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(e){if(e.length>1&&Object(ut.c)(e[0])&&Object(ut.c)(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return tt(e[0]);throw new Error("coordinates must only contain numbers")}function Pe(e,i,t){if(!i||!t)throw new Error("type and name required");if(!e||e.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+e.type)}function Ne(e,i,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+e.geometry.type)}function ke(e,i,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(var r=0,n=e.features;r<n.length;r++){var u=n[r];if(!u||u.type!=="Feature"||!u.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!u.geometry||u.geometry.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+u.geometry.type)}}function et(e){return e.type==="Feature"?e.geometry:e}function Ge(e,i){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function Ot(e,i,t){if(e!==null)for(var r,n,u,h,S,x,N,Y=0,V=0,_e,je=e.type,yt=je==="FeatureCollection",kt=je==="Feature",nr=yt?e.features.length:1,gr=0;gr<nr;gr++){N=yt?e.features[gr].geometry:kt?e.geometry:e,_e=N?N.type==="GeometryCollection":!1,S=_e?N.geometries.length:1;for(var yr=0;yr<S;yr++){var Vr=0,hn=0;if(h=_e?N.geometries[yr]:N,h!==null){x=h.coordinates;var Dn=h.type;switch(Y=t&&(Dn==="Polygon"||Dn==="MultiPolygon")?1:0,Dn){case null:break;case"Point":if(i(x,V,gr,Vr,hn)===!1)return!1;V++,Vr++;break;case"LineString":case"MultiPoint":for(r=0;r<x.length;r++){if(i(x[r],V,gr,Vr,hn)===!1)return!1;V++,Dn==="MultiPoint"&&Vr++}Dn==="LineString"&&Vr++;break;case"Polygon":case"MultiLineString":for(r=0;r<x.length;r++){for(n=0;n<x[r].length-Y;n++){if(i(x[r][n],V,gr,Vr,hn)===!1)return!1;V++}Dn==="MultiLineString"&&Vr++,Dn==="Polygon"&&hn++}Dn==="Polygon"&&Vr++;break;case"MultiPolygon":for(r=0;r<x.length;r++){for(hn=0,n=0;n<x[r].length;n++){for(u=0;u<x[r][n].length-Y;u++){if(i(x[r][n][u],V,gr,Vr,hn)===!1)return!1;V++}hn++}Vr++}break;case"GeometryCollection":for(r=0;r<h.geometries.length;r++)if(Ot(h.geometries[r],i,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Bt(e,i,t,r){var n=t;return Ot(e,function(u,h,S,x,N){h===0&&t===void 0?n=u:n=i(n,u,h,S,x,N)},r),n}function gt(e,i){var t;switch(e.type){case"FeatureCollection":for(t=0;t<e.features.length&&i(e.features[t].properties,t)!==!1;t++);break;case"Feature":i(e.properties,0);break}}function ge(e,i,t){var r=t;return gt(e,function(n,u){u===0&&t===void 0?r=n:r=i(r,n,u)}),r}function Lt(e,i){if(e.type==="Feature")i(e,0);else if(e.type==="FeatureCollection")for(var t=0;t<e.features.length&&i(e.features[t],t)!==!1;t++);}function qt(e,i,t){var r=t;return Lt(e,function(n,u){u===0&&t===void 0?r=n:r=i(r,n,u)}),r}function xr(e){var i=[];return Ot(e,function(t){i.push(t)}),i}function tr(e,i){var t,r,n,u,h,S,x,N,Y,V,_e=0,je=e.type==="FeatureCollection",yt=e.type==="Feature",kt=je?e.features.length:1;for(t=0;t<kt;t++){for(S=je?e.features[t].geometry:yt?e.geometry:e,N=je?e.features[t].properties:yt?e.properties:{},Y=je?e.features[t].bbox:yt?e.bbox:void 0,V=je?e.features[t].id:yt?e.id:void 0,x=S?S.type==="GeometryCollection":!1,h=x?S.geometries.length:1,n=0;n<h;n++){if(u=x?S.geometries[n]:S,u===null){if(i(null,_e,N,Y,V)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(u,_e,N,Y,V)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<u.geometries.length;r++)if(i(u.geometries[r],_e,N,Y,V)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_e++}}function Xr(e,i,t){var r=t;return tr(e,function(n,u,h,S,x){u===0&&t===void 0?r=n:r=i(r,n,u,h,S,x)}),r}function rr(e,i){tr(e,function(t,r,n,u,h){var S=t===null?null:t.type;switch(S){case null:case"Point":case"LineString":case"Polygon":return i(Object(ut.b)(t,n,{bbox:u,id:h}),r,0)===!1?!1:void 0}var x;switch(S){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon";break}for(var N=0;N<t.coordinates.length;N++){var Y=t.coordinates[N],V={type:x,coordinates:Y};if(i(Object(ut.b)(V,n),r,N)===!1)return!1}})}function bn(e,i,t){var r=t;return rr(e,function(n,u,h){u===0&&h===0&&t===void 0?r=n:r=i(r,n,u,h)}),r}function ue(e,i){rr(e,function(t,r,n){var u=0;if(!!t.geometry){var h=t.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var S,x=0,N=0,Y=0;if(Ot(t,function(V,_e,je,yt,kt){if(S===void 0||r>x||yt>N||kt>Y){S=V,x=r,N=yt,Y=kt,u=0;return}var nr=Object(ut.e)([S,V],t.properties);if(i(nr,r,n,kt,u)===!1)return!1;u++,S=V})===!1)return!1}}})}function tn(e,i,t){var r=t,n=!1;return ue(e,function(u,h,S,x,N){n===!1&&t===void 0?r=u:r=i(r,u,h,S,x,N),n=!0}),r}function Fn(e,i){if(!e)throw new Error("geojson is required");rr(e,function(t,r,n){if(t.geometry!==null){var u=t.geometry.type,h=t.geometry.coordinates;switch(u){case"LineString":if(i(t,r,n,0,0)===!1)return!1;break;case"Polygon":for(var S=0;S<h.length;S++)if(i(Object(ut.e)(h[S],t.properties),r,n,S)===!1)return!1;break}}})}function Fi(e,i,t){var r=t;return Fn(e,function(n,u,h,S){u===0&&t===void 0?r=n:r=i(r,n,u,h,S)}),r}function ki(e,i){if(i=i||{},!Object(ut.d)(i))throw new Error("options is invalid");var t=i.featureIndex||0,r=i.multiFeatureIndex||0,n=i.geometryIndex||0,u=i.segmentIndex||0,h=i.properties,S;switch(e.type){case"FeatureCollection":t<0&&(t=e.features.length+t),h=h||e.features[t].properties,S=e.features[t].geometry;break;case"Feature":h=h||e.properties,S=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=e;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var x=S.coordinates;switch(S.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=x.length+u-1),Object(ut.e)([x[u],x[u+1]],h,i);case"Polygon":return n<0&&(n=x.length+n),u<0&&(u=x[n].length+u-1),Object(ut.e)([x[n][u],x[n][u+1]],h,i);case"MultiLineString":return r<0&&(r=x.length+r),u<0&&(u=x[r].length+u-1),Object(ut.e)([x[r][u],x[r][u+1]],h,i);case"MultiPolygon":return r<0&&(r=x.length+r),n<0&&(n=x[r].length+n),u<0&&(u=x[r][n].length-u-1),Object(ut.e)([x[r][n][u],x[r][n][u+1]],h,i)}throw new Error("geojson is invalid")}function ve(e,i){if(i=i||{},!Object(ut.d)(i))throw new Error("options is invalid");var t=i.featureIndex||0,r=i.multiFeatureIndex||0,n=i.geometryIndex||0,u=i.coordIndex||0,h=i.properties,S;switch(e.type){case"FeatureCollection":t<0&&(t=e.features.length+t),h=h||e.features[t].properties,S=e.features[t].geometry;break;case"Feature":h=h||e.properties,S=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=e;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var x=S.coordinates;switch(S.type){case"Point":return Object(ut.f)(x,h,i);case"MultiPoint":return r<0&&(r=x.length+r),Object(ut.f)(x[r],h,i);case"LineString":return u<0&&(u=x.length+u),Object(ut.f)(x[u],h,i);case"Polygon":return n<0&&(n=x.length+n),u<0&&(u=x[n].length+u),Object(ut.f)(x[n][u],h,i);case"MultiLineString":return r<0&&(r=x.length+r),u<0&&(u=x[r].length+u),Object(ut.f)(x[r][u],h,i);case"MultiPolygon":return r<0&&(r=x.length+r),n<0&&(n=x[r].length+n),u<0&&(u=x[r][n].length-u),Object(ut.f)(x[r][n][u],h,i)}throw new Error("geojson is invalid")}function Ye(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function vt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ye(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function wt(e,i){var t=[],r={};if(e.features=e.features.filter(function(u){var h=u.geometry;return u!=null&&h&&h.type&&h.coordinates&&h.coordinates.length>0}),Et()(e,!0),e.features.length===0)return{dataArray:[],featureKeys:r};var n=0;return rr(e,function(u,h){var S=vr(u),x=h,N=vt(vt({},u.properties),{},{coordinates:S,_id:x});t.push(N)}),{dataArray:t,featureKeys:r}}var me=a("tmK8");function Pn(e,i){var t=i.extent,r=t===void 0?[121.168,30.2828,121.384,30.4219]:t,n=new Promise(function(h){Cr(e,function(S){h(S)})}),u={originData:e,images:n,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return u}function Cr(e,i){var t=e,r=[];if(typeof t=="string")Object(me.p)({url:t},function(h,S){r.push(S),i(r)});else{var n=t.length,u=0;t.forEach(function(h){Object(me.p)({url:h},function(S,x){u++,r.push(x),u===n&&i(r)})})}return Pn}function Nt(e,i){var t=i.extent,r=i.width,n=i.height,u=i.min,h=i.max,S={_id:1,dataArray:[{_id:1,data:Array.from(e),width:r,height:n,min:u,max:h,coordinates:[[t[0],t[1]],[t[2],t[3]]]}]};return S}var it=a("+Pqg"),Ce=a.n(it),Rt=a("uBqp"),_t=a.n(Rt),Tn=a("lGGA"),Ve=a.n(Tn),hi=a("BXlA"),An=a.n(hi),xi=a("0TsE"),Bn=a.n(xi),yi=a("P4zC"),Wr=a.n(yi),Oi=a("wjPw"),Oa=a.n(Oi),Aa=a("7e3l"),Ui=a.n(Aa),ea=a("+U9+"),Ti=a.n(ea),_n=a("oZ31"),Ci=a.n(_n),qn=a("/PHc"),Wi=a("O3or"),ta=a.n(Wi),si=a("r4N0"),li=a.n(si);function Za(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function di(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Za(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Za(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Ha(e,i){var t=i.radius,r=t===void 0?40:t,n=i.maxZoom,u=n===void 0?18:n,h=i.minZoom,S=h===void 0?0:h,x=i.zoom,N=x===void 0?2:x;if(e.pointIndex){var Y=e.pointIndex.getClusters(e.extent,Math.floor(N));return e.dataArray=Va(Y),e}var V=new li.a({radius:r,minZoom:S,maxZoom:u}),_e={type:"FeatureCollection",features:[]};return _e.features=e.dataArray.map(function(je){return{type:"Feature",geometry:{type:"Point",coordinates:je.coordinates},properties:di({},je)}}),V.load(_e.features),V}function Va(e){return e.map(function(i,t){return di({coordinates:i.geometry.coordinates,_id:t+1},i.properties)})}function ra(e){if(e.length===0)throw new Error("max requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]>i&&(i=e[t]);return i}function xa(e){if(e.length===0)throw new Error("min requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]<i&&(i=e[t]);return i}function va(e){if(e.length===0)return 0;for(var i=e[0],t=0,r,n=1;n<e.length;n++)r=i+e[n]*1,Math.abs(i)>=Math.abs(e[n])?t+=i-r+e[n]:t+=e[n]-r+i,i=r;return i+t*1}function Vi(e){if(e.length===0)throw new Error("mean requires at least one data point");return va(e)/e.length}var ia={min:xa,max:ra,mean:Vi,sum:va};function kn(e,i){return e.map(function(t){return t[i]*1})}function Ka(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Pa(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ka(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ka(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Qi(e){var i=Ia();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ia(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Ma(e,i){if(Array.isArray(i))return i}var ji=function(e){An()(t,e);var i=Qi(t);function t(r,n){var u;return Ce()(this,t),u=i.call(this),C()(Ve()(u),"data",void 0),C()(Ve()(u),"extent",void 0),C()(Ve()(u),"hooks",{init:new qn.c}),C()(Ve()(u),"parser",{type:"geojson"}),C()(Ve()(u),"transforms",[]),C()(Ve()(u),"cluster",!1),C()(Ve()(u),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),C()(Ve()(u),"mapService",void 0),C()(Ve()(u),"invalidExtent",!1),C()(Ve()(u),"originData",void 0),C()(Ve()(u),"rawData",void 0),C()(Ve()(u),"cfg",{}),C()(Ve()(u),"clusterIndex",void 0),u.originData=r,u.initCfg(n),u.hooks.init.tap("parser",function(){u.excuteParser()}),u.hooks.init.tap("cluster",function(){u.initCluster()}),u.hooks.init.tap("transform",function(){u.executeTrans()}),u.init(),u}return _t()(t,[{key:"setData",value:function(n,u){this.rawData=n,this.originData=n,this.initCfg(u),this.init(),this.emit("update")}},{key:"getClusters",value:function(n){return this.clusterIndex.getClusters(this.caculClusterExtent(2),n)}},{key:"getClustersLeaves",value:function(n){return this.clusterIndex.getLeaves(n,Infinity)}},{key:"updateClusterData",value:function(n){var u=this,h=this.clusterOptions,S=h.method,x=S===void 0?"sum":S,N=h.field,Y=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(n));this.clusterOptions.zoom=n,Y.forEach(function(V){V.id||(V.properties.point_count=1)}),(N||Ti()(x))&&(Y=Y.map(function(V){var _e=V.id;if(_e){var je=u.clusterIndex.getLeaves(_e,Infinity),yt=je.map(function(gr){return gr.properties}),kt;if(Ui()(x)&&N){var nr=kn(yt,N);kt=ia[x](nr)}Ti()(x)&&(kt=x(yt)),V.properties.stat=kt}else V.properties.point_count=1;return V})),this.data=m("geojson")({type:"FeatureCollection",features:Y}),this.executeTrans()}},{key:"getFeatureById",value:function(n){var u=this.parser.type,h=u===void 0?"geojson":u;if(h==="geojson"&&!this.cluster){var S=n<this.originData.features.length?this.originData.features[n]:"null",x=Ci()(S);if(this.transforms.length!==0){var N=this.data.dataArray.find(function(Y){return Y._id===n});x.properties=N}return x}else return n<this.data.dataArray.length?this.data.dataArray[n]:"null"}},{key:"getFeatureId",value:function(n,u){var h=this.data.dataArray.find(function(S){return S[n]===name});return h==null?void 0:h._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(n){var u=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(u=Object(me.v)(Object(me.i)(this.extent),n)),u[0].concat(u[1])}},{key:"initCfg",value:function(n){this.cfg=Oa()(this.cfg,n,Ma);var u=this.cfg;u&&(u.parser&&(this.parser=u.parser),u.transforms&&(this.transforms=u.transforms),this.cluster=u.cluster||!1,u.clusterOptions&&(this.cluster=!0,this.clusterOptions=Pa(Pa({},this.clusterOptions),u.clusterOptions)))}},{key:"excuteParser",value:function(){var n=this.parser,u=n.type||"geojson";if(u==="imagetile"){this.data={tileurl:this.originData,dataArray:[]};return}var h=m(u);this.data=h(this.originData,n),this.extent=Object(me.n)(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var n=this,u=this.transforms;u.forEach(function(h){var S=h.type,x=p(S)(n.data,h);Object.assign(n.data,x)})}},{key:"initCluster",value:function(){if(!!this.cluster){var n=this.clusterOptions||{};this.clusterIndex=Ha(this.data,n)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),t}(Wi.EventEmitter);function aa(e,i){var t=i.callback;return t&&(e.dataArray=e.dataArray.filter(t)),e}function vi(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ei(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function ei(e,i){if(!!e){if(typeof e=="string")return oa(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oa(e,i)}}function oa(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var $i=6378e3;function Gi(e,i){var t=e.dataArray,r=i.size,n=r===void 0?10:r,u=n/(2*Math.PI*$i)*(256<<20)/2,h=Ji(t,n),S=h.gridHash,x=h.gridOffset,N=Bi(S,x,i);return{yOffset:u,xOffset:u,radius:u,type:"grid",dataArray:N}}function Ji(e,i){var t=Infinity,r=-Infinity,n,u=vi(e),h;try{for(u.s();!(h=u.n()).done;){var S=h.value;n=S.coordinates[1],Number.isFinite(n)&&(t=n<t?n:t,r=n>r?n:r)}}catch(Vr){u.e(Vr)}finally{u.f()}var x=(t+r)/2,N=pa(i,x);if(N.xOffset<=0||N.yOffset<=0)return{gridHash:{},gridOffset:N};var Y={},V=vi(e),_e;try{for(V.s();!(_e=V.n()).done;){var je=_e.value,yt=je.coordinates[1],kt=je.coordinates[0];if(Number.isFinite(yt)&&Number.isFinite(kt)){var nr=Math.floor((yt+90)/N.yOffset),gr=Math.floor((kt+180)/N.xOffset),yr="".concat(nr,"-").concat(gr);Y[yr]=Y[yr]||{count:0,points:[]},Y[yr].count+=1,Y[yr].points.push(je)}}}catch(Vr){V.e(Vr)}finally{V.f()}return{gridHash:Y,gridOffset:N}}function pa(e,i){var t=ka(e),r=ma(i,e);return{yOffset:t,xOffset:r}}function ka(e){return e/$i*(180/Math.PI)}function ma(e,i){return i/$i*(180/Math.PI)/Math.cos(e*Math.PI/180)}function Bi(e,i,t){return Object.keys(e).reduce(function(r,n,u){var h=n.split("-"),S=parseInt(h[0],10),x=parseInt(h[1],10),N={};if(t.field&&t.method){var Y=me.d.getColumn(e[n].points,t.field);N[t.method]=me.d.statMap[t.method](Y)}return Object.assign(N,{_id:u,coordinates:Object(me.e)([-180+i.xOffset*(x+.5),-90+i.yOffset*(S+.5)]),rawData:e[n].points,count:e[n].count}),r.push(N),r},[])}var Na=a("eX8u"),pi=a.n(Na),zi=Math.PI/3,Mi=[0,zi,2*zi,3*zi,4*zi,5*zi];function Yn(e){return e[0]}function bi(e){return e[1]}var sa=function(){var e=0,i=0,t=1,r=1,n=Yn,u=bi,h,S,x;function N(V){var _e={},je=[],yt,kt=V.length;for(yt=0;yt<kt;++yt)if(!(isNaN(gr=+n.call(null,nr=V[yt],yt,V))||isNaN(yr=+u.call(null,nr,yt,V)))){var nr,gr,yr,Vr=Math.round(yr=yr/x),hn=Math.round(gr=gr/S-(Vr&1)/2),Dn=yr-Vr;if(Math.abs(Dn)*3>1){var Rn=gr-hn,en=hn+(gr<hn?-1:1)/2,Ln=Vr+(yr<Vr?-1:1),ii=gr-en,oi=yr-Ln;Rn*Rn+Dn*Dn>ii*ii+oi*oi&&(hn=en+(Vr&1?1:-1)/2,Vr=Ln)}var Sn=hn+"-"+Vr,fi=_e[Sn];fi?fi.push(nr):(je.push(fi=_e[Sn]=[nr]),fi.x=(hn+(Vr&1)/2)*S,fi.y=Vr*x)}return je}function Y(V){var _e=0,je=0;return Mi.map(function(yt){var kt=Math.sin(yt)*V,nr=-Math.cos(yt)*V,gr=kt-_e,yr=nr-je;return _e=kt,je=nr,[gr,yr]})}return N.hexagon=function(V){return"m"+Y(V==null?h:+V).join("l")+"z"},N.centers=function(){for(var V=[],_e=Math.round(i/x),je=Math.round(e/S),yt=_e*x;yt<r+h;yt+=x,++_e)for(var kt=je*S+(_e&1)*S/2;kt<t+S/2;kt+=S)V.push([kt,yt]);return V},N.mesh=function(){var V=Y(h).slice(0,4).join("l");return N.centers().map(function(_e){return"M"+_e+"m"+V}).join("")},N.x=function(V){return arguments.length?(n=V,N):n},N.y=function(V){return arguments.length?(u=V,N):u},N.radius=function(V){return arguments.length?(h=+V,S=h*2*Math.sin(zi),x=h*1.5,N):h},N.size=function(V){return arguments.length?(e=i=0,t=+V[0],r=+V[1],N):[t-e,r-i]},N.extent=function(V){return arguments.length?(e=+V[0][0],i=+V[0][1],t=+V[1][0],r=+V[1][1],N):[[e,i],[t,r]]},N.radius(1)};function Ra(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Qa(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ra(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ra(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var ce=6378e3;function be(e,i){var t=e.dataArray,r=i.size,n=r===void 0?10:r,u=i.method,h=u===void 0?"sum":u,S=n/(2*Math.PI*ce)*(256<<20)/2,x=t.map(function(_e){var je=Object(me.e)(_e.coordinates),yt=pi()(je,2),kt=yt[0],nr=yt[1];return Qa(Qa({},_e),{},{coordinates:[kt,nr]})}),N=sa().radius(S).x(function(_e){return _e.coordinates[0]}).y(function(_e){return _e.coordinates[1]}),Y=N(x),V={dataArray:Y.map(function(_e,je){var yt;if(i.field&&h){var kt=me.d.getColumn(_e,i.field);_e[h]=me.d.statMap[h](kt)}return yt={},C()(yt,i.method,_e[h]),C()(yt,"count",_e.length),C()(yt,"rawData",_e),C()(yt,"coordinates",[_e.x,_e.y]),C()(yt,"_id",je),yt}),radius:S,xOffset:S,yOffset:S,type:"hexagon"};return V}function Qe(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function U(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Qe(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function K(e,i){var t=i.sourceField,r=i.targetField,n=i.data,u={};return n.forEach(function(h){u[h[t]]=h}),e.dataArray=e.dataArray.map(function(h){var S=h[r];return U(U({},h),u[S])}),e}function Me(e,i){var t=i.callback;return t&&(e.dataArray=e.dataArray.map(t)),e}g("geojson",wt),g("image",Pn),g("csv",St),g("json",te),g("raster",Nt),y("cluster",Ha),y("filter",aa),y("join",K),y("map",Me),y("grid",Gi),y("hexagon",be);var ct=Fe,lr=ze,Ur=ji,Un=a("inLv"),cr=a("2CY4"),Xi=a("nq+A"),Li=a.n(Xi),Gt={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},s=a("yDU5"),d=a.n(s);function O(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function j(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?O(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ae(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ee(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function Ee(e,i){if(!!e){if(typeof e=="string")return Ue(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ue(e,i)}}function Ue(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var st=30;function Mt(e){var i=e.characterSet,t=e.getFontWidth,r=e.fontHeight,n=e.buffer,u=e.maxCanvasWidth,h=e.mapping,S=h===void 0?{}:h,x=e.xOffset,N=x===void 0?0:x,Y=e.yOffset,V=Y===void 0?0:Y,_e=0,je=N;Array.from(i).forEach(function(kt,nr){if(!S[kt]){var gr=t(kt,nr);je+st>u&&(je=0,_e++),S[kt]={x:je,y:V+_e*st,width:st,height:st,advance:gr},je+=st}});var yt=r+n*2;return{mapping:S,xOffset:je,yOffset:V+_e*yt,canvasHeight:hr(V+(_e+1)*yt)}}function Ut(e,i,t){var r=0,n=0,u=0,h=[],S={},x=ae(e),N;try{for(x.s();!(N=x.n()).done;){var Y=N.value;if(!S[Y.id]){var V=Y.size;r+V+i>t&&(Jt(S,h,n),r=0,n=u+n+i,u=0,h=[]),h.push({icon:Y,xOffset:r}),r=r+V+i,u=Math.max(u,V)}}}catch(je){x.e(je)}finally{x.f()}h.length>0&&Jt(S,h,n);var _e=hr(u+n+i);return{mapping:S,canvasHeight:_e}}function Jt(e,i,t){var r=ae(i),n;try{for(r.s();!(n=r.n()).done;){var u=n.value,h=u.icon,S=u.xOffset;e[h.id]=j(j({},h),{},{x:S,y:t,image:h.image,width:h.width,height:h.height})}}catch(x){r.e(x)}finally{r.f()}}function hr(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var dr,Ar;function rn(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=$r(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function $r(e,i){if(!!e){if(typeof e=="string")return sr(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sr(e,i)}}function sr(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}function On(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?On(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):On(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var E=Mn(),w="sans-serif",_="normal",H=24,Se=3,We=.25,ht=8,pt=1024,Kt=1,ir=1,qr=3,ln=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function Mn(){for(var e=[],i=32;i<128;i++)e.push(String.fromCharCode(i));return e}function ui(e,i,t,r){e.font="".concat(r," ").concat(t,"px ").concat(i),e.fillStyle="black",e.textBaseline="middle"}function mi(e,i){for(var t=0;t<e.length;t++)i.data[4*t+3]=e[t]}var Ri=(dr=Object(cr.injectable)(),dr(Ar=function(){function e(){Ce()(this,e),C()(this,"fontAtlas",void 0),C()(this,"iconFontMap",void 0),C()(this,"iconFontGlyphs",{}),C()(this,"fontOptions",void 0),C()(this,"key",void 0),C()(this,"cache",new me.c(qr))}return _t()(e,[{key:"scale",get:function(){return ir}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:w,fontWeight:_,characterSet:E,fontSize:H,buffer:Se,sdf:!0,cutoff:We,radius:ht,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(t){var r=this;t.forEach(function(n){r.iconFontGlyphs[n.name]=n.unicode})}},{key:"addIconFont",value:function(t,r){this.iconFontMap.set(t,r)}},{key:"getIconFontKey",value:function(t){return this.iconFontMap.get(t)||t}},{key:"getGlyph",value:function(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}},{key:"setFontOptions",value:function(t){this.fontOptions=c(c({},this.fontOptions),t),this.key=this.getKey();var r=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!(n&&r.length===0)){var u=this.generateFontAtlas(this.key,r,n);this.fontAtlas=u,this.cache.set(this.key,u)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(t,r,n){var u=this.fontOptions,h=u.fontFamily,S=u.fontWeight,x=u.fontSize,N=u.buffer,Y=u.sdf,V=u.radius,_e=u.cutoff,je=u.iconfont,yt=n&&n.data;yt||(yt=me.a.document.createElement("canvas"),yt.width=pt);var kt=yt.getContext("2d");ui(kt,h,x,S);var nr=Mt(c({getFontWidth:function(Is){return kt.measureText(Is).width},fontHeight:x*ir,buffer:N,characterSet:r,maxCanvasWidth:pt},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),gr=nr.mapping,yr=nr.canvasHeight,Vr=nr.xOffset,hn=nr.yOffset,Dn=kt.getImageData(0,0,yt.width,yt.height);if(yt.height=yr,kt.putImageData(Dn,0,0),ui(kt,h,x,S),Y){var Rn=new d.a(x,N,V,_e,h,S),en=kt.getImageData(0,0,Rn.size,Rn.size),Ln=rn(r),ii;try{for(Ln.s();!(ii=Ln.n()).done;){var oi=ii.value;if(je){var Sn=String.fromCharCode(parseInt(oi.replace("&#x","").replace(";",""),16)),fi=Rn.draw(Sn);mi(fi,en)}else mi(Rn.draw(oi),en);kt.putImageData(en,gr[oi].x,gr[oi].y)}}catch(So){Ln.e(So)}finally{Ln.f()}}else{var _i=rn(r),bo;try{for(_i.s();!(bo=_i.n()).done;){var ms=bo.value;kt.fillText(ms,gr[ms].x,gr[ms].y+x*Kt)}}catch(So){_i.e(So)}finally{_i.f()}}return{xOffset:Vr,yOffset:hn,mapping:gr,data:yt,width:yt.width,height:yt.height}}},{key:"getKey",value:function(){return"key";var t,r,n,u,h,S,x,N}},{key:"getNewChars",value:function(t,r){var n=this.cache.get(t);if(!n)return r;var u=[],h=n.mapping,S=new Set(Object.keys(h)),x=new Set(r);return x.forEach(function(N){S.has(N)||u.push(N)}),u}}]),e}())||Ar),$a,Ua;function _o(e){var i=ho();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function ho(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Bo=3,Co=1024,To=64,ns=($a=Object(cr.injectable)(),$a(Ua=function(e){An()(t,e);var i=_o(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),C()(Ve()(r),"canvasHeight",128),C()(Ve()(r),"texture",void 0),C()(Ve()(r),"canvas",void 0),C()(Ve()(r),"iconData",void 0),C()(Ve()(r),"iconMap",void 0),C()(Ve()(r),"ctx",void 0),C()(Ve()(r),"loadingImageCount",0),r}return _t()(t,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=me.a.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(n,u){var h=this,S=new Image;if(this.loadingImageCount++,this.hasImage(n))throw new Error("Image Id already exists");this.iconData.push({id:n,size:To}),this.updateIconMap(),this.loadImage(u).then(function(x){S=x;var N=h.iconData.find(function(Y){return Y.id===n});N&&(N.image=S,N.width=S.width,N.height=S.height),h.update()})}},{key:"addImageMini",value:function(n,u,h){var S=this,x=h.getSceneConfig().canvas,N=x.createImage();if(this.loadingImageCount++,this.hasImage(n))throw new Error("Image Id already exists");this.iconData.push({id:n,size:To}),this.updateIconMap(),this.loadImageMini(u,x).then(function(Y){N=Y;var V=S.iconData.find(function(_e){return _e.id===n});V&&(V.image=N,V.width=N.width,V.height=N.height),S.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(n){return this.iconMap.hasOwnProperty(n)}},{key:"removeImage",value:function(n){this.hasImage(n)&&(this.iconData=this.iconData.filter(function(u){return u.id!==n}),delete this.iconMap[n],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var n=this;this.canvas.width=Co,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(u){var h=n.iconMap[u],S=h.x,x=h.y,N=h.image,Y=h.width,V=Y===void 0?64:Y,_e=h.height,je=_e===void 0?64:_e,yt=Math.max(V,je),kt=yt/To,nr=je/kt,gr=V/kt;N&&n.ctx.drawImage(N,S+(To-gr)/2,x+(To-nr)/2,gr,nr)})}},{key:"updateIconMap",value:function(){var n=Ut(this.iconData,Bo,Co),u=n.mapping,h=n.canvasHeight;this.iconMap=u,this.canvasHeight=h}},{key:"loadImage",value:function(n){return new Promise(function(u,h){if(n instanceof HTMLImageElement){u(n);return}var S=new Image;S.crossOrigin="anonymous",S.onload=function(){u(S)},S.onerror=function(){h(new Error("Could not load image at "+n))},S.src=n instanceof File?URL.createObjectURL(n):n})}},{key:"loadImageMini",value:function(n,u){return new Promise(function(h,S){var x=u.createImage();x.crossOrigin="anonymous",x.onload=function(){h(x)},x.onerror=function(){S(new Error("Could not load image at "+n))},x.src=n})}}]),t}(Wi.EventEmitter))||Ua),Rr=a("GV3H"),Go,ua,ja=(Go=Object(cr.injectable)(),Go(ua=function(){function e(){Ce()(this,e),C()(this,"viewport",void 0),C()(this,"overridedViewProjectionMatrix",void 0),C()(this,"jitteredViewProjectionMatrix",void 0),C()(this,"jitteredProjectionMatrix",void 0),C()(this,"viewMatrixInverse",void 0),C()(this,"cameraPosition",void 0)}return _t()(e,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=Rr.a.create(),Rr.a.invert(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),r=pi()(t,2),n=r[0],u=r[1];return[n,u]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,r){return this.viewport.projectFlat(t,r)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,r){var n=Rr.a.fromTranslation(Rr.a.create(),[t,r,0]);this.jitteredProjectionMatrix=Rr.a.multiply(Rr.a.create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Rr.a.multiply(Rr.a.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||ua),ys,vo;function is(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=f(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function f(e,i){if(!!e){if(typeof e=="string")return T(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,i)}}function T(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var k=(ys=Object(cr.injectable)(),ys(vo=function(){function e(){Ce()(this,e),C()(this,"container",void 0),C()(this,"controlCorners",void 0),C()(this,"controlContainer",void 0),C()(this,"scene",void 0),C()(this,"mapsService",void 0),C()(this,"controls",[]),C()(this,"unAddControls",[])}return _t()(e,[{key:"init",value:function(t,r){this.container=t.container,this.scene=r,this.mapsService=r.get(Gt.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,r){var n=r.get(Gt.IMapService);n.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find(function(r){return r.controlOption.name===t})}},{key:"removeControl",value:function(t){var r=this.controls.indexOf(t);return r>-1&&this.controls.splice(r,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach(function(r){r.addTo(t.scene),t.controls.push(r)}),this.unAddControls=[]}},{key:"destroy",value:function(){var t=is(this.controls),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.remove()}}catch(u){t.e(u)}finally{t.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var t=this.controlCorners={},r="l7-",n=this.controlContainer=me.b.create("div",r+"control-container",this.container);function u(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=h.map(function(x){return r+x}).join(" ");t[h.join("")]=me.b.create("div",S,n)}u(["top","left"]),u(["top","right"]),u(["bottom","left"]),u(["bottom","right"]),u(["top","center"]),u(["right","center"]),u(["left","center"]),u(["bottom","center"])}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&me.b.remove(this.controlCorners[t]);this.controlContainer&&me.b.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),e}())||vo),ie,de,Be=(ie=Object(cr.injectable)(),ie(de=function(){function e(){Ce()(this,e),C()(this,"container",void 0),C()(this,"scene",void 0),C()(this,"mapsService",void 0),C()(this,"markers",[]),C()(this,"markerLayers",[]),C()(this,"unAddMarkers",[]),C()(this,"unAddMarkerLayers",[])}return _t()(e,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var r=this.markerLayers.indexOf(t);r>-1&&this.markerLayers.splice(r,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach(function(r){r.addTo(t.scene),t.markers.push(r)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach(function(r){t.markerLayers.push(r),r.addTo(t.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var r=this.markers.indexOf(t);r>-1&&this.markers.splice(r,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Gt.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(t){t.remove()}),this.markers=[],this.markerLayers.forEach(function(t){t.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),e}())||de),ft,Tt,Vt=(ft=Object(cr.injectable)(),ft(Tt=function(){function e(){Ce()(this,e),C()(this,"scene",void 0),C()(this,"popup",void 0),C()(this,"mapsService",void 0),C()(this,"unAddPopup",void 0)}return _t()(e,[{key:"removePopup",value:function(t){t.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(t){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(t.addTo(this.scene),this.popup=t):this.unAddPopup=t}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Gt.IMapService)}}]),e}())||Tt),Yt=a("5Yrg"),or=a.n(Yt),Tr={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Or=Tr,br,dn;function un(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Sr(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?un(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):un(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var wn={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Ii={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},ti=(br=Object(cr.injectable)(),br(dn=function(){function e(){Ce()(this,e),C()(this,"sceneConfigCache",{}),C()(this,"layerConfigCache",{})}return _t()(e,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return Or[t]}},{key:"setSceneConfig",value:function(t,r){this.sceneConfigCache[t]=Sr(Sr({},wn),r)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,r,n){this.layerConfigCache[r]=Sr({},or()({},this.sceneConfigCache[t],Ii,n))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||dn),$n=a("7tSx"),Yr=a.n($n),Zn=a("t4RQ"),In=a.n(Zn),ba=a("RDz9"),na=Math.PI/180,ga=512,ya=4003e4;function _a(e){var i=e.latitude,t=i===void 0?0:i,r=e.zoom,n=r===void 0?0:r,u=e.scale,h=e.highPrecision,S=h===void 0?!1:h,x=e.flipY,N=x===void 0?!1:x;u=u!==void 0?u:Math.pow(2,n);var Y={},V=ga*u,_e=Math.cos(t*na),je=V/360,yt=je/_e,kt=V/ya/_e;if(Y.pixelsPerMeter=[kt,-kt,kt],Y.metersPerPixel=[1/kt,-1/kt,1/kt],Y.pixelsPerDegree=[je,-yt,kt],Y.degreesPerPixel=[1/je,-1/yt,1/kt],S){var nr=na*Math.tan(t*na)/_e,gr=je*nr/2,yr=V/ya*nr,Vr=yr/yt*kt;Y.pixelsPerDegree2=[0,-gr,yr],Y.pixelsPerMeter2=[Vr,0,Vr],N&&(Y.pixelsPerDegree2[1]=-Y.pixelsPerDegree2[1],Y.pixelsPerMeter2[1]=-Y.pixelsPerMeter2[1])}return N&&(Y.pixelsPerMeter[1]=-Y.pixelsPerMeter[1],Y.metersPerPixel[1]=-Y.metersPerPixel[1],Y.pixelsPerDegree[1]=-Y.pixelsPerDegree[1],Y.degreesPerPixel[1]=-Y.degreesPerPixel[1]),Y}var ca;(function(e){e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2"})(ca||(ca={}));var ci={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},no,No,F,re,Te,he=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],qe=(no=Object(cr.injectable)(),No=Object(cr.inject)(Gt.ICameraService),no(F=(re=function(){function e(){Ce()(this,e),C()(this,"needRefresh",!0),Yr()(this,"cameraService",Te,this),C()(this,"coordinateSystem",void 0),C()(this,"viewportCenter",void 0),C()(this,"viewportCenterProjection",void 0),C()(this,"pixelsPerDegree",void 0),C()(this,"pixelsPerDegree2",void 0),C()(this,"pixelsPerMeter",void 0)}return _t()(e,[{key:"refresh",value:function(){var t=this.cameraService.getZoom(),r=this.cameraService.getZoomScale(),n=this.cameraService.getCenter(),u=_a({latitude:n[1],zoom:t}),h=u.pixelsPerMeter,S=u.pixelsPerDegree;this.viewportCenter=n,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=h,this.pixelsPerDegree=S,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===ca.LNGLAT||this.coordinateSystem===ca.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===ca.LNGLAT_OFFSET?this.calculateLnglatOffset(n,t):this.coordinateSystem===ca.P20_OFFSET&&this.calculateLnglatOffset(n,t,r,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,r,n,u){var h=_a({latitude:t[1],zoom:r,scale:n,flipY:u,highPrecision:!0}),S=h.pixelsPerMeter,x=h.pixelsPerDegree,N=h.pixelsPerDegree2,Y=this.cameraService.getViewMatrix(),V=this.cameraService.getProjectionMatrix(),_e=Rr.a.multiply([],V,Y),je=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,r));this.viewportCenterProjection=Rr.d.transformMat4([],[je[0],je[1],0,1],_e),Y=this.cameraService.getViewMatrixUncentered()||Y,_e=Rr.a.multiply([],V,Y),_e=Rr.a.multiply([],_e,he),this.cameraService.setViewProjectionMatrix(_e),this.pixelsPerMeter=S,this.pixelsPerDegree=x,this.pixelsPerDegree2=N}}]),e}(),Te=In()(re.prototype,"cameraService",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re))||F),er=a("3fbM"),vn=a.n(er),Gn;(function(e){e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag"})(Gn||(Gn={}));var fa,Ja,po,as,Es;function ou(e){var i=Gu();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Gu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ws={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},su=(fa=Object(cr.injectable)(),Ja=Object(cr.inject)(Gt.IMapService),fa(po=(as=function(e){An()(t,e);var i=ou(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),Yr()(Ve()(r),"mapService",Es,Ve()(r)),C()(Ve()(r),"hammertime",void 0),C()(Ve()(r),"lastClickTime",0),C()(Ve()(r),"lastClickXY",[-1,-1]),C()(Ve()(r),"clickTimer",void 0),C()(Ve()(r),"$containter",void 0),C()(Ve()(r),"onDrag",function(S){var x=r.interactionEvent(S);x.type=Ws[x.type],r.emit(Gn.Drag,x)}),C()(Ve()(r),"onHammer",function(S){S.srcEvent.stopPropagation();var x=r.interactionEvent(S);r.emit(Gn.Hover,x)}),C()(Ve()(r),"onTouch",function(S){var x=S.touches[0];r.onHover({x:x.pageX,y:x.pageY,type:"touch"})}),C()(Ve()(r),"onHover",function(S){var x=S.clientX,N=S.clientY,Y=x,V=N,_e=S.type,je=r.mapService.getMapContainer();if(je)if(me.s)Y=Y-je.left-0,V=V-je.top-0;else{var yt=je.getBoundingClientRect(),kt=yt.top,nr=yt.left;Y=Y-nr-je.clientLeft,V=V-kt-je.clientTop}var gr=r.mapService.containerToLngLat([Y,V]);if(_e==="click"){if(!me.s&&"ontouchstart"in document.documentElement)return;r.isDoubleTap(Y,V,gr);return}if(_e==="touch"){r.isDoubleTap(Y,V,gr);return}_e!=="click"&&_e!=="dblclick"&&r.emit(Gn.Hover,{x:Y,y:V,lngLat:gr,type:_e,target:S})}),r}return _t()(t,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Gn.Hover)}},{key:"triggerHover",value:function(n){var u=n.x,h=n.y;this.emit(Gn.Hover,{x:u,y:h})}},{key:"triggerSelect",value:function(n){this.emit(Gn.Select,{featureId:n})}},{key:"triggerActive",value:function(n){this.emit(Gn.Active,{featureId:n})}},{key:"handleMiniEvent",value:function(n){this.onHover({clientX:n.touches[0].pageX,clientY:n.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var n=this.mapService.getMapContainer();if(n)if(me.s)me.a.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var u=new vn.a.Manager(n);u.add(new vn.a.Tap({event:"dblclick",taps:2})),u.add(new vn.a.Tap({event:"click"})),u.add(new vn.a.Pan({threshold:0,pointers:0})),u.add(new vn.a.Press({})),u.on("dblclick click",this.onHammer),u.on("panstart panmove panend pancancel",this.onDrag),n.addEventListener("mousemove",this.onHover),n.addEventListener("mousedown",this.onHover,!0),n.addEventListener("mouseup",this.onHover),n.addEventListener("contextmenu",this.onHover),this.hammertime=u}}},{key:"removeEventListenerOnMap",value:function(){if(me.s)me.a.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var n=this.mapService.getMapContainer();n&&(n.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),n.removeEventListener("mousedown",this.onHover),n.removeEventListener("mouseup",this.onHover),n.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(n){var u=n.type,h=n.pointerType,S,x;h==="touch"?(x=Math.floor(n.pointers[0].clientY),S=Math.floor(n.pointers[0].clientX)):(x=Math.floor(n.srcEvent.y),S=Math.floor(n.srcEvent.x));var N=this.mapService.getMapContainer();if(N){var Y=N.getBoundingClientRect(),V=Y.top,_e=Y.left;S-=_e,x-=V}var je=this.mapService.containerToLngLat([S,x]);return{x:S,y:x,lngLat:je,type:u,target:n.srcEvent}}},{key:"isDoubleTap",value:function(n,u,h){var S=this,x=new Date().getTime(),N="click";x-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-n)<10&&Math.abs(this.lastClickXY[1]-u)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),N="dblclick",this.emit(Gn.Hover,{x:n,y:u,lngLat:h,type:N})):(this.lastClickTime=x,this.lastClickXY=[n,u],this.clickTimer=setTimeout(function(){N="click",S.emit(Gn.Hover,{x:n,y:u,lngLat:h,type:N})},400))}}]),t}(ta.a),Es=In()(as.prototype,"mapService",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),as))||po),wc=a("uKiR"),so=a.n(wc),kf=a("MO/0"),Yi=a.n(kf),Uf=0;function Dc(e){if(me.s)return null;var i=e;if(typeof e=="string"&&(i=document.getElementById(e)),i){var t=document.createElement("div");return t.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,t.id="l7-scene-".concat(Uf++),t.classList.add("l7-scene"),i.appendChild(t),t}return null}function Hu(e){var i,t,r=!0;return e==null||(i=e.target)===null||i===void 0||(t=i.path)===null||t===void 0||t.map(function(n){if(n!=null&&n.classList){var u;n==null||(u=n.classList)===null||u===void 0||u.forEach(function(h){(h==="l7-marker"||h==="l7-popup")&&(r=!1)})}}),r}var mt;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(mt||(mt={}));var uu,Ns,Oo,Ss,cu,Vu,os,fu,lu,hu,Fc;function Ts(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function za(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ts(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ts(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var zo=(uu=Object(cr.injectable)(),Ns=Object(cr.inject)(Gt.IRendererService),Oo=Object(cr.inject)(Gt.IGlobalConfigService),Ss=Object(cr.inject)(Gt.IInteractionService),cu=Object(cr.inject)(Gt.ILayerService),uu(Vu=(os=function(){function e(){var i=this;Ce()(this,e),Yr()(this,"rendererService",fu,this),Yr()(this,"configService",lu,this),Yr()(this,"interactionService",hu,this),Yr()(this,"layerService",Fc,this),C()(this,"pickingFBO",void 0),C()(this,"width",0),C()(this,"height",0),C()(this,"alreadyInPicking",!1),C()(this,"pickBufferScale",1),C()(this,"lastPickTime",new Date().getTime()),C()(this,"pickFromPickingFBO",function(t,r){var n,u=r.x,h=r.y,S=r.lngLat,x=r.type,N=r.target,Y=!1,V=i.rendererService,_e=V.getViewportSize,je=V.readPixels,yt=V.getContainer,kt=i.getContainerSize(yt()),nr=kt.width,gr=kt.height;nr*=me.b.DPR,gr*=me.b.DPR;var yr=t.getLayerConfig(),Vr=yr.enableHighlight,hn=yr.enableSelect,Dn=u*me.b.DPR,Rn=h*me.b.DPR;if(Dn>nr-1*me.b.DPR||Dn<0||Rn>gr-1*me.b.DPR||Rn<0)return!1;var en;if(en=je({x:Math.floor(Dn/i.pickBufferScale),y:Math.floor((gr-(h+1)*me.b.DPR)/i.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:i.pickingFBO}),en[0]!==0||en[1]!==0||en[2]!==0){var Ln=Object(me.l)(en),ii=t.getSource().getFeatureById(Ln);Ln!==t.getCurrentPickId()&&x==="mousemove"&&(x="mouseenter");var oi={x:u,y:h,type:x,lngLat:S,featureId:Ln,feature:ii,target:N};ii&&(Y=!0,t.setCurrentPickId(Ln),i.triggerHoverOnLayer(t,oi))}else{var Sn={x:u,y:h,lngLat:S,type:t.getCurrentPickId()!==null&&x==="mousemove"?"mouseout":"un"+x,featureId:null,target:N,feature:null};i.triggerHoverOnLayer(t,za(za({},Sn),{},{type:"unpick"})),i.triggerHoverOnLayer(t,Sn),t.setCurrentPickId(null)}if(Vr&&i.highlightPickedFeature(t,en),hn&&x==="click"&&((n=en)===null||n===void 0?void 0:n.toString())!==[0,0,0,0].toString()){var fi=Object(me.l)(en);t.getCurrentSelectedId()===null||fi!==t.getCurrentSelectedId()?(i.selectFeature(t,en),t.setCurrentSelectedId(fi)):(i.selectFeature(t,new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return Y})}return _t()(e,[{key:"init",value:function(t){var r=this.rendererService,n=r.createTexture2D,u=r.createFramebuffer,h=r.getViewportSize,S=r.getContainer,x=this.getContainerSize(S()),N=x.width,Y=x.height;N*=me.b.DPR,Y*=me.b.DPR,this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=u({color:n({width:Math.round(N/this.pickBufferScale),height:Math.round(Y/this.pickBufferScale),wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.interactionService.on(Gn.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var i=so()(Yi.a.mark(function r(n,u,h){var S=this,x,N,Y,V;return Yi.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:x=this.rendererService,N=x.useFramebuffer,Y=x.clear,V=x.getContainer,this.resizePickingFBO(),N(this.pickingFBO,function(){Y({framebuffer:S.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),n.hooks.beforePickingEncode.call(),n.renderModels(),n.hooks.afterPickingEncode.call();var yt=S.pickBox(n,u);h(yt)});case 3:case"end":return je.stop()}},r,this)}));function t(r,n,u){return i.apply(this,arguments)}return t}()},{key:"pickBox",value:function(t,r){var n=this,u=r.map(function(Sn){var fi=Sn<0?0:Sn;return Math.floor(fi*me.b.DPR/n.pickBufferScale)}),h=pi()(u,4),S=h[0],x=h[1],N=h[2],Y=h[3],V=this.rendererService,_e=V.getViewportSize,je=V.readPixels,yt=V.getContainer,kt=this.getContainerSize(yt()),nr=kt.width,gr=kt.height;if(nr*=me.b.DPR,gr*=me.b.DPR,S>(nr-1)*me.b.DPR/this.pickBufferScale||N<0||x>(gr-1)*me.b.DPR/this.pickBufferScale||Y<0)return[];var yr,Vr=Math.min(nr/this.pickBufferScale,N)-S,hn=Math.min(gr/this.pickBufferScale,Y)-x;yr=je({x:S,y:Math.floor(gr/this.pickBufferScale-(Y+1)),width:Vr,height:hn,data:new Uint8Array(Vr*hn*4),framebuffer:this.pickingFBO});for(var Dn=[],Rn={},en=0;en<yr.length/4;en=en+1){var Ln=yr.slice(en*4,en*4+4),ii=Object(me.l)(Ln);if(ii!==-1&&!Rn[ii]){var oi=t.getSource().getFeatureById(ii);Dn.push(za(za({},oi),{},{pickedFeatureIdx:ii})),Rn[ii]=!0}}return Dn}},{key:"getContainerSize",value:function(t){return t.getContext?{width:t.width/me.b.DPR,height:t.height/me.b.DPR}:t.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var i=so()(Yi.a.mark(function r(n){var u;return Yi.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.layerService.isMapDragging()||!this.layerService.getShaderPickStat())){S.next=2;break}return S.abrupt("return");case 2:if(this.alreadyInPicking=!0,u=new Date().getTime(),!(u-this.lastPickTime>10||n.type==="contextmenu"||n.type==="click")){S.next=7;break}return S.next=7,this.pickingLayers(n);case 7:this.lastPickTime=u,this.layerService.renderLayers(),this.alreadyInPicking=!1;case 10:case"end":return S.stop()}},r,this)}));function t(r){return i.apply(this,arguments)}return t}()},{key:"resizePickingFBO",value:function(){var t=this.rendererService.getContainer,r=this.getContainerSize(t()),n=r.width,u=r.height;n*=me.b.DPR,u*=me.b.DPR,(this.width!==n||this.height!==u)&&(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(u/this.pickBufferScale)}),this.width=n,this.height=u)}},{key:"pickingLayers",value:function(){var i=so()(Yi.a.mark(function r(n){var u=this,h,S,x,N,Y;return Yi.a.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:h=this.rendererService,S=h.getViewportSize,x=h.useFramebuffer,N=h.clear,Y=h.getContainer,this.resizePickingFBO(),x(this.pickingFBO,function(){var je=u.layerService.getRenderList();je.filter(function(yt){return yt.needPick(n.type)}).reverse().some(function(yt){N({framebuffer:u.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),yt.hooks.beforePickingEncode.call(),yt.renderModels(!0),yt.hooks.afterPickingEncode.call();var kt=u.pickFromPickingFBO(yt,n);return kt&&!yt.getLayerConfig().enablePropagation})});case 3:case"end":return _e.stop()}},r,this)}));function t(r){return i.apply(this,arguments)}return t}()},{key:"triggerHoverOnLayer",value:function(t,r){Hu(r)&&t.emit(r.type,r)}},{key:"highlightPickedFeature",value:function(t,r){var n=pi()(r,3),u=n[0],h=n[1],S=n[2];t.hooks.beforeHighlight.call([u,h,S])}},{key:"selectFeature",value:function(t,r){var n=pi()(r,3),u=n[0],h=n[1],S=n[2];t.hooks.beforeSelect.call([u,h,S])}}]),e}(),fu=In()(os.prototype,"rendererService",[Ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lu=In()(os.prototype,"configService",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu=In()(os.prototype,"interactionService",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fc=In()(os.prototype,"layerService",[cu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),os))||Vu),zu=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ce()(this,e),C()(this,"autoStart",void 0),C()(this,"startTime",0),C()(this,"oldTime",0),C()(this,"running",!1),C()(this,"elapsedTime",0),this.autoStart=i}return _t()(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=(typeof performance=="undefined"?Date:performance).now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}]),e}(),Xo,du,vu,Bc,kc,Ys,Uc,pu,mu;function gu(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Xu(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function Xu(e,i){if(!!e){if(typeof e=="string")return Wu(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wu(e,i)}}function Wu(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var jc=(Xo=Object(cr.injectable)(),du=Object(cr.inject)(Gt.IRendererService),vu=Object(cr.inject)(Gt.IMapService),Bc=Object(cr.inject)(Gt.IGlobalConfigService),Xo(kc=(Ys=function(){function e(){Ce()(this,e),C()(this,"clock",new zu),C()(this,"alreadyInRendering",!1),C()(this,"layers",[]),C()(this,"layerList",[]),C()(this,"layerRenderID",void 0),C()(this,"sceneInited",!1),C()(this,"animateInstanceCount",0),C()(this,"shaderPicking",!0),C()(this,"enableRender",!0),Yr()(this,"renderService",Uc,this),Yr()(this,"mapService",pu,this),Yr()(this,"configService",mu,this)}return _t()(e,[{key:"add",value:function(t){this.sceneInited&&t.init(),this.layers.push(t),this.updateLayerRenderList()}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(t){t.inited||t.init()}),this.updateLayerRenderList()}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(t){return this.layers.find(function(r){return r.id===t})}},{key:"getLayerByName",value:function(t){return this.layers.find(function(r){return r.name===t})}},{key:"cleanRemove",value:function(t,r){if(r){var n=r.layerChildren.indexOf(t);n>-1&&r.layerChildren.splice(n,1)}else{var u=this.layers.indexOf(t);u>-1&&this.layers.splice(u,1)}this.updateLayerRenderList(),this.renderLayers()}},{key:"remove",value:function(t,r){if(r){var n=r.layerChildren.indexOf(t);n>-1&&r.layerChildren.splice(n,1)}else{var u=this.layers.indexOf(t);u>-1&&this.layers.splice(u,1)}this.updateLayerRenderList(),t.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"setEnableRender",value:function(t){this.enableRender=t}},{key:"renderLayers",value:function(){var i=so()(Yi.a.mark(function r(){var n,u,h;return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){x.next=2;break}return x.abrupt("return");case 2:this.alreadyInRendering=!0,this.clear(),n=gu(this.layerList),x.prev=5,n.s();case 7:if((u=n.n()).done){x.next=20;break}if(h=u.value,h.hooks.beforeRenderData.call(),h.hooks.beforeRender.call(),!h.getLayerConfig().enableMultiPassRenderer){x.next=16;break}return x.next=14,h.renderMultiPass();case 14:x.next=17;break;case 16:h.render();case 17:h.hooks.afterRender.call();case 18:x.next=7;break;case 20:x.next=25;break;case 22:x.prev=22,x.t0=x.catch(5),n.e(x.t0);case 25:return x.prev=25,n.f(),x.finish(25);case 28:this.alreadyInRendering=!1;case 29:case"end":return x.stop()}},r,this,[[5,22,25,28]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"updateLayerRenderList",value:function(){var t=this;this.layerList=[],this.layers.filter(function(r){return r.inited}).filter(function(r){return r.isVisible()}).forEach(function(r){t.layerList.push(r),r.layerChildren.filter(function(n){return n.inited}).filter(function(n){return n.isVisible()}).forEach(function(n){t.layerList.push(n)})}),this.layerList.sort(function(r,n){return r.zIndex-n.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(t){t.layerChildren&&(t.layerChildren.forEach(function(r){return r.destroy()}),t.layerChildren=[]),t.destroy()}),this.layers=[],this.layerList=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"isMapDragging",value:function(){return this.mapService.dragging}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=me.a.requestAnimationFrame(this.runRender.bind(this))}},{key:"clear",value:function(){var t=Object(me.w)(this.mapService.bgColor);this.renderService.clear({color:t,depth:1,stencil:0,framebuffer:null})}},{key:"stopRender",value:function(){me.a.cancelAnimationFrame(this.layerRenderID)}}]),e}(),Uc=In()(Ys.prototype,"renderService",[du],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pu=In()(Ys.prototype,"mapService",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=In()(Ys.prototype,"configService",[Bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ys))||kc),Gc=a("HPai"),yu=a.n(Gc),Eu=a("pY0a"),Wo=a.n(Eu),Yo=function(){function e(i){var t=this;Ce()(this,e),C()(this,"name",void 0),C()(this,"type",void 0),C()(this,"scale",void 0),C()(this,"descriptor",void 0),C()(this,"featureBufferLayout",[]),C()(this,"needRescale",!1),C()(this,"needRemapping",!1),C()(this,"needRegenerateVertices",!1),C()(this,"featureRange",{startIndex:0,endIndex:Infinity}),C()(this,"vertexAttribute",void 0),C()(this,"defaultCallback",function(r){if(r.length===0){var n;return((n=t.scale)===null||n===void 0?void 0:n.defaultValues)||[]}return r.map(function(u,h){var S,x=(S=t.scale)===null||S===void 0?void 0:S.scalers[h].func,N=x(u);return N})}),this.setProps(i)}return _t()(e,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var r;if((r=this.scale)!==null&&r!==void 0&&r.callback){var n,u=(n=this.scale)===null||n===void 0?void 0:n.callback.apply(n,rt()(t));if(!Wo()(u))return[u]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),Zs=["buffer","update","name"],As,Su,Yu,Zu,Tu,Ku;function Qu(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ks(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Qu(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Hc(e){return new Promise(function(i){return setTimeout(i,e)})}var ko=(As={},C()(As,mt.FLOAT,4),C()(As,mt.UNSIGNED_BYTE,1),C()(As,mt.UNSIGNED_SHORT,2),As),Vc=(Su=Object(cr.injectable)(),Yu=Object(cr.inject)(Gt.IRendererService),Su(Zu=(Tu=function(){function e(){Ce()(this,e),C()(this,"attributesAndIndices",void 0),Yr()(this,"rendererService",Ku,this),C()(this,"attributes",[]),C()(this,"triangulation",void 0),C()(this,"featureLayout",{sizePerElement:0,elements:[]})}return _t()(e,[{key:"registerStyleAttribute",value:function(t){var r=this.getLayerStyleAttribute(t.name||"");return r?r.setProps(t):(r=new Yo(t),this.attributes.push(r)),r}},{key:"updateStyleAttribute",value:function(t,r,n){var u=this.getLayerStyleAttribute(t);u||(u=this.registerStyleAttribute(Ks(Ks({},r),{},{name:t})));var h=r.scale;h&&u&&(u.scale=h,u.needRescale=!0,u.needRemapping=!0,u.needRegenerateVertices=!0,n&&n.featureRange&&(u.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find(function(r){return r.name===t})}},{key:"getLayerAttributeScale",value:function(t){var r,n=this.getLayerStyleAttribute(t),u=n==null||(r=n.scale)===null||r===void 0?void 0:r.scalers;return u&&u[0]?u[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3?arguments[3]:void 0,h=this.attributes.find(function(hn){return hn.name===t});if(h&&h.descriptor){var S=h.descriptor,x=S.update,N=S.buffer,Y=S.size,V=Y===void 0?0:Y,_e=ko[N.type||mt.FLOAT];if(x){var je=this.featureLayout,yt=je.elements,kt=je.sizePerElement,nr=yt.slice(n,u);if(!nr.length)return;var gr=nr[0].offset,yr=gr*V*_e,Vr=nr.map(function(hn,Dn){for(var Rn=hn.featureIdx,en=hn.vertices,Ln=hn.normals,ii=en.length/kt,oi=[],Sn=0;Sn<ii;Sn++){var fi=Ln?Ln.slice(Sn*3,Sn*3+3):[];oi.push.apply(oi,rt()(x(r[Rn],Rn,en.slice(Sn*kt,Sn*kt+kt),Dn,fi)))}return oi}).reduce(function(hn,Dn){return hn.push.apply(hn,rt()(Dn)),hn},[]);h.vertexAttribute.updateBuffer({data:Vr,offset:yr})}}}},{key:"createAttributesAndIndices",value:function(t,r,n){var u=this;this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);var h=this.attributes.map(function(yr){return yr.resetDescriptor(),yr.descriptor}),S=0,x=[],N=[],Y=[],V=3;t.forEach(function(yr,Vr){var hn=u.triangulation(yr,n),Dn=hn.indices,Rn=hn.vertices,en=hn.normals,Ln=hn.size;Dn.forEach(function(fi){N.push(fi+S)}),V=Ln;var ii=Rn.length/Ln;u.featureLayout.sizePerElement=V,u.featureLayout.elements.push({featureIdx:Vr,vertices:Rn,normals:en,offset:S}),S+=ii;for(var oi=function(_i){var bo=(en==null?void 0:en.slice(_i*3,_i*3+3))||[],ms=Rn.slice(_i*Ln,_i*Ln+Ln);h.forEach(function(So,Is){if(So&&So.update){var gs;(gs=So.buffer.data).push.apply(gs,rt()(So.update(yr,Vr,ms,_i,bo)))}})},Sn=0;Sn<ii;Sn++)oi(Sn)});var _e=this.rendererService,je=_e.createAttribute,yt=_e.createBuffer,kt=_e.createElements,nr={};h.forEach(function(yr,Vr){if(yr){var hn=yr.buffer,Dn=yr.update,Rn=yr.name,en=yu()(yr,Zs),Ln=je(Ks({buffer:yt(hn)},en));nr[yr.name||""]=Ln,u.attributes[Vr].vertexAttribute=Ln}});var gr=kt({data:N,type:mt.UNSIGNED_INT,count:N.length});return this.attributesAndIndices={attributes:nr,elements:gr},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var t;this.attributes.forEach(function(r){r.vertexAttribute&&r.vertexAttribute.destroy()}),(t=this.attributesAndIndices)===null||t===void 0||t.elements.destroy(),this.attributes=[]}}]),e}(),Ku=In()(Tu.prototype,"rendererService",[Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tu))||Zu),zc=a("rLCn"),Zo=a.n(zc),Au,Ko,Ls,xu,bu,$u,Ju,qu,Xc,Wc,ec,tc,rc,nc,Yc,ic,ac,uo,Zc,Qs,ws,Kc,Qc,$c,Jc,qc,_u,oc,ef,tf,rf,nf,xs;function af(e){var i=of();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function of(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sc=(Au=Object(cr.injectable)(),Ko=Object(cr.inject)(Gt.SceneID),Ls=Object(cr.inject)(Gt.IIconService),xu=Object(cr.inject)(Gt.IFontService),bu=Object(cr.inject)(Gt.IControlService),$u=Object(cr.inject)(Gt.IGlobalConfigService),Ju=Object(cr.inject)(Gt.IMapService),qu=Object(cr.inject)(Gt.ICoordinateSystemService),Xc=Object(cr.inject)(Gt.IRendererService),Wc=Object(cr.inject)(Gt.ILayerService),ec=Object(cr.inject)(Gt.ICameraService),tc=Object(cr.inject)(Gt.IInteractionService),rc=Object(cr.inject)(Gt.IPickingService),nc=Object(cr.inject)(Gt.IShaderModuleService),Yc=Object(cr.inject)(Gt.IMarkerService),ic=Object(cr.inject)(Gt.IPopupService),Au(ac=(uo=function(e){An()(t,e);var i=af(t);function t(){var r;return Ce()(this,t),r=i.call(this),C()(Ve()(r),"destroyed",!1),C()(Ve()(r),"loaded",!1),C()(Ve()(r),"loadFont",!1),C()(Ve()(r),"fontFamily",""),Yr()(Ve()(r),"id",Zc,Ve()(r)),Yr()(Ve()(r),"iconService",Qs,Ve()(r)),Yr()(Ve()(r),"fontService",ws,Ve()(r)),Yr()(Ve()(r),"controlService",Kc,Ve()(r)),Yr()(Ve()(r),"configService",Qc,Ve()(r)),Yr()(Ve()(r),"map",$c,Ve()(r)),Yr()(Ve()(r),"coordinateSystemService",Jc,Ve()(r)),Yr()(Ve()(r),"rendererService",qc,Ve()(r)),Yr()(Ve()(r),"layerService",_u,Ve()(r)),Yr()(Ve()(r),"cameraService",oc,Ve()(r)),Yr()(Ve()(r),"interactionService",ef,Ve()(r)),Yr()(Ve()(r),"pickingService",tf,Ve()(r)),Yr()(Ve()(r),"shaderModuleService",rf,Ve()(r)),Yr()(Ve()(r),"markerService",nf,Ve()(r)),Yr()(Ve()(r),"popupService",xs,Ve()(r)),C()(Ve()(r),"inited",!1),C()(Ve()(r),"initPromise",void 0),C()(Ve()(r),"rendering",!1),C()(Ve()(r),"$container",void 0),C()(Ve()(r),"canvas",void 0),C()(Ve()(r),"markerContainer",void 0),C()(Ve()(r),"hooks",void 0),C()(Ve()(r),"handleWindowResized",function(){r.emit("resize"),r.$container&&(r.initContainer(),me.b.triggerResize(),r.coordinateSystemService.needRefresh=!0,r.render())}),C()(Ve()(r),"handleMapCameraChanged",function(n){r.cameraService.update(n),r.render()}),r.hooks={init:new qn.a},r}return _t()(t,[{key:"init",value:function(n){var u=this;this.configService.setSceneConfig(this.id,n),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return u.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",so()(Yi.a.mark(function h(){return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,new Promise(function(N){u.map.onCameraChanged(function(Y){u.cameraService.init(),u.cameraService.update(Y),u.map.version!=="GAODE2.x"&&N()}),u.map.version!=="GAODE2.x"?u.map.init():N()});case 2:if(!(u.map.version==="GAODE2.x"&&u.map.initViewPort)){x.next=6;break}return x.next=5,u.map.init();case 5:u.map.initViewPort();case 6:u.map.onCameraChanged(u.handleMapCameraChanged),u.map.addMarkerContainer(),u.markerService.addMarkers(),u.markerService.addMarkerLayers(),u.popupService.initPopup(),u.interactionService.init(),u.interactionService.on(Gn.Drag,u.addSceneEvent.bind(u));case 13:case"end":return x.stop()}},h)}))),this.hooks.init.tapPromise("initRenderer",so()(Yi.a.mark(function h(){var S,x;return Yi.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(S=Dc(u.configService.getSceneConfig(u.id).id||""),u.$container=S,!S){Y.next=11;break}return u.canvas=me.b.create("canvas","",S),u.setCanvas(),Y.next=7,u.rendererService.init(u.canvas,u.configService.getSceneConfig(u.id));case 7:Zo()(u.$container,u.handleWindowResized),me.a.matchMedia&&((x=me.a.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||x===void 0||x.addListener(u.handleWindowResized)),Y.next=12;break;case 11:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:u.pickingService.init(u.id);case 13:case"end":return Y.stop()}},h)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"initMiniScene",value:function(n){var u=this;this.configService.setSceneConfig(this.id,n),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return u.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",so()(Yi.a.mark(function h(){return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,new Promise(function(N){u.map.onCameraChanged(function(Y){u.cameraService.init(),u.cameraService.update(Y),u.map.version!=="GAODE2.x"&&N()}),u.map.initMiniMap()});case 2:u.map.onCameraChanged(u.handleMapCameraChanged),u.interactionService.init(),u.interactionService.on(Gn.Drag,u.addSceneEvent.bind(u));case 5:case"end":return x.stop()}},h)}))),this.hooks.init.tapPromise("initRenderer",so()(Yi.a.mark(function h(){var S;return Yi.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(S=n.canvas,u.$container=S||null,!u.$container){N.next=7;break}return N.next=5,u.rendererService.init(n.canvas,u.configService.getSceneConfig(u.id));case 5:N.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:u.pickingService.init(u.id);case 9:case"end":return N.stop()}},h)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(n){this.layerService.sceneService=this,this.layerService.add(n),this.render()}},{key:"render",value:function(){var r=so()(Yi.a.mark(function u(){return Yi.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(this.rendering||this.destroyed)){S.next=2;break}return S.abrupt("return");case 2:if(this.rendering=!0,this.inited){S.next=15;break}return S.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){S.next=10;break}return S.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 15:this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this.rendering=!1;case 18:case"end":return S.stop()}},u,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"addFontFace",value:function(n,u){this.fontFamily=n;var h=document.createElement("style");h.type="text/css",h.innerText=`
        @font-face{
            font-family: '`.concat(n,`';
            src: url('`).concat(u,`') format('woff2'),
            url('`).concat(u,`') format('woff'),
            url('`).concat(u,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(h),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(n){var u,h=(u=this.$container)===null||u===void 0?void 0:u.getElementsByTagName("canvas")[0];this.render();var S=n==="jpg"?h==null?void 0:h.toDataURL("image/jpeg"):h==null?void 0:h.toDataURL("image/png");return S}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var n=this.$container.parentElement;n!==null&&(this.markerContainer=me.b.create("div","l7-marker-container",n))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var n=this,u,h;if(!this.inited){this.destroyed=!0;return}if(this.emit("destroy"),this.layerService.destroy(),setTimeout(function(){n.rendererService.destroy()}),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),(u=this.$container)===null||u===void 0||(h=u.parentNode)===null||h===void 0||h.removeChild(this.$container),this.removeAllListeners(),this.inited=!1,Object(zc.unbind)(this.$container,this.handleWindowResized),me.a.matchMedia){var S;(S=me.a.matchMedia("screen and (min-resolution: 2dppx)"))===null||S===void 0||S.removeListener(this.handleWindowResized)}}},{key:"initContainer",value:function(){var n,u,h=me.b.DPR,S=((n=this.$container)===null||n===void 0?void 0:n.clientWidth)||400,x=((u=this.$container)===null||u===void 0?void 0:u.clientHeight)||300,N=this.canvas;N&&(N.width=S*h,N.height=x*h),this.rendererService.viewport({x:0,y:0,width:h*S,height:h*x})}},{key:"setCanvas",value:function(){var n,u,h=me.b.DPR,S=((n=this.$container)===null||n===void 0?void 0:n.clientWidth)||400,x=((u=this.$container)===null||u===void 0?void 0:u.clientHeight)||300,N=this.canvas;N.width=S*h,N.height=x*h,N.style.width="100%",N.style.height="100%"}},{key:"addSceneEvent",value:function(n){this.emit(n.type,n)}}]),t}(Wi.EventEmitter),Zc=In()(uo.prototype,"id",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs=In()(uo.prototype,"iconService",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ws=In()(uo.prototype,"fontService",[xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=In()(uo.prototype,"controlService",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qc=In()(uo.prototype,"configService",[$u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$c=In()(uo.prototype,"map",[Ju],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=In()(uo.prototype,"coordinateSystemService",[qu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qc=In()(uo.prototype,"rendererService",[Xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_u=In()(uo.prototype,"layerService",[Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=In()(uo.prototype,"cameraService",[ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ef=In()(uo.prototype,"interactionService",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=In()(uo.prototype,"pickingService",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=In()(uo.prototype,"shaderModuleService",[nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=In()(uo.prototype,"markerService",[Yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xs=In()(uo.prototype,"popupService",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo))||ac),$s=a("2GQb"),ss=a.n($s);function Cu(e){var i=0;switch(e){case"vec2":case"ivec2":i=2;break;case"vec3":case"ivec3":i=3;break;case"vec4":case"ivec4":case"mat2":i=4;break;case"mat3":i=9;break;case"mat4":i=16;break;default:}return i}var jf=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Ou(e){var i={};return e=e.replace(jf,function(t,r,n){var u=n.split(":"),h=u[0].trim(),S="";switch(u.length>1&&(S=u[1].trim()),r){case"bool":S=S==="true";break;case"float":case"int":S=Number(S);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":S?S=S.replace("[","").replace("]","").split(",").reduce(function(x,N){return x.push(Number(N.trim())),x},[]):S=new Array(Cu(r)).fill(0);break;default:}return i[h]=S,"uniform ".concat(r," ").concat(h,`;
`)}),{content:e,uniforms:i}}var uc,sf;function uf(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Js(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?uf(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uf(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var cc="#define PI 3.14159265359",Ds=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,cf=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Fs=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,ff=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

// TODO: \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
vec4 filterColorAnimate(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, color.a));
  }
}

vec4 filterColorWithLight(vec4 color, float lightWeight) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, lightWeight));
  }
}

`,bs=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,_s=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Gf=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom));
  }
  return pixel * 2.0;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,Bs=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,lf=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,Cs=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,fc=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,Pu=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,lc=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,hc=/precision\s+(high|low|medium)p\s+float/,us=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,qs=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,hf=(uc=Object(cr.injectable)(),uc(sf=function(){function e(){Ce()(this,e),C()(this,"moduleCache",{}),C()(this,"rawContentCache",{})}return _t()(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:cc,fs:cc}),this.registerModule("decode",{vs:Ds,fs:""}),this.registerModule("projection",{vs:Gf,fs:""}),this.registerModule("project",{vs:_s,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Bs}),this.registerModule("lighting",{vs:Fs,fs:""}),this.registerModule("light",{vs:cf,fs:""}),this.registerModule("picking",{vs:bs,fs:ff}),this.registerModule("styleMapping",{vs:lf,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:lc,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:Cs,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:fc,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Pu,fs:""})}},{key:"registerModule",value:function(t,r){if(!this.rawContentCache[t]){var n=r.vs,u=r.fs,h=r.uniforms,S=Ou(n),x=S.content,N=S.uniforms,Y=Ou(u),V=Y.content,_e=Y.uniforms;this.rawContentCache[t]={fs:V,uniforms:Js(Js(Js({},N),_e),h),vs:x}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var r=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,u=this.rawContentCache[t].fs,h=this.processModule(n,[],"vs"),S=h.content,x=h.includeList,N=this.processModule(u,[],"fs"),Y=N.content,V=N.includeList,_e=Y,je=ss()(x.concat(V).concat(t)).reduce(function(yt,kt){return Js(Js({},yt),r.rawContentCache[kt].uniforms)},{});return hc.test(Y)||(_e=us+Y),this.moduleCache[t]={fs:_e.trim(),uniforms:je,vs:S.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,r,n){var u=this,h=t.replace(qs,function(S,x){var N=x.split(" "),Y=N[0].replace(/"/g,"");if(r.indexOf(Y)>-1)return"";var V=u.rawContentCache[Y][n];r.push(Y);var _e=u.processModule(V,r,n),je=_e.content;return je});return{content:h,includeList:r}}}]),e}())||sf),Hf=a("dHNX"),Mu=a.n(Hf),Qo;(function(e){e.Normal="normal",e.PostProcessing="post-processing"})(Qo||(Qo={}));var df,dc,Z=(df=Object(cr.injectable)(),df(dc=function(){function e(){Ce()(this,e),C()(this,"shaderModuleService",void 0),C()(this,"rendererService",void 0),C()(this,"cameraService",void 0),C()(this,"mapService",void 0),C()(this,"interactionService",void 0),C()(this,"layerService",void 0),C()(this,"config",void 0)}return _t()(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Qo.Normal}},{key:"init",value:function(t,r){this.config=r,this.rendererService=t.getContainer().get(Gt.IRendererService),this.cameraService=t.getContainer().get(Gt.ICameraService),this.mapService=t.getContainer().get(Gt.IMapService),this.interactionService=t.getContainer().get(Gt.IInteractionService),this.layerService=t.getContainer().get(Gt.ILayerService),this.shaderModuleService=t.getContainer().get(Gt.IShaderModuleService)}},{key:"render",value:function(t){}}]),e}())||dc),$,R;function L(e){var i=q();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ae=($=Object(cr.injectable)(),$(R=function(e){An()(t,e);var i=L(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(n,u){Mu()(Wr()(t.prototype),"init",this).call(this,n,u)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),t}(Z))||R),dt,It,Pt,Zt,wr;function Cn(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Nn(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function Nn(e,i){if(!!e){if(typeof e=="string")return Hn(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hn(e,i)}}function Hn(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var Kn=(dt=Object(cr.injectable)(),It=Object(cr.inject)(Gt.IPostProcessor),dt(Pt=(Zt=function(){function e(){Ce()(this,e),C()(this,"passes",[]),Yr()(this,"postProcessor",wr,this),C()(this,"layer",void 0),C()(this,"renderFlag",void 0),C()(this,"width",0),C()(this,"height",0)}return _t()(e,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var i=so()(Yi.a.mark(function r(){var n,u,h;return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:n=Cn(this.passes),x.prev=1,n.s();case 3:if((u=n.n()).done){x.next=9;break}return h=u.value,x.next=7,h.render(this.layer);case 7:x.next=3;break;case 9:x.next=14;break;case 11:x.prev=11,x.t0=x.catch(1),n.e(x.t0);case 14:return x.prev=14,n.f(),x.finish(14);case 17:return x.next=19,this.postProcessor.render(this.layer);case 19:case"end":return x.stop()}},r,this,[[1,11,14,17]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"resize",value:function(t,r){(this.width!==t||this.height!==r)&&(this.postProcessor.resize(t,r),this.width=t,this.height=r)}},{key:"add",value:function(t,r){t.getType()===Qo.PostProcessing?this.postProcessor.add(t,this.layer,r):(t.init(this.layer,r),this.passes.push(t))}},{key:"insert",value:function(t,r,n){t.init(this.layer,r),this.passes.splice(n,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),wr=In()(Zt.prototype,"postProcessor",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt))||Pt),Qn,Pi;function wi(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Hi(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?wi(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wi(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function La(e){var i=Ca();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ca(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qa=(Qn=Object(cr.injectable)(),Qn(Pi=function(e){An()(t,e);var i=La(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),C()(Ve()(r),"pickingFBO",void 0),C()(Ve()(r),"layer",void 0),C()(Ve()(r),"width",0),C()(Ve()(r),"height",0),C()(Ve()(r),"alreadyInRendering",!1),C()(Ve()(r),"pickFromPickingFBO",function(S){var x=S.x,N=S.y,Y=S.lngLat,V=S.type;if(!(!r.layer.isVisible()||!r.layer.needPick(V))){var _e=r.rendererService,je=_e.getViewportSize,yt=_e.readPixels,kt=_e.useFramebuffer,nr=je(),gr=nr.width,yr=nr.height,Vr=r.layer.getLayerConfig(),hn=Vr.enableHighlight,Dn=Vr.enableSelect,Rn=x*me.b.DPR,en=N*me.b.DPR;if(!(Rn>gr||Rn<0||en>yr||en<0)){var Ln;kt(r.pickingFBO,function(){var ii;if(Ln=yt({x:Math.round(Rn),y:Math.round(yr-(N+1)*me.b.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),Ln[0]!==0||Ln[1]!==0||Ln[2]!==0){var oi=Object(me.l)(Ln),Sn=r.layer.getSource().getFeatureById(oi),fi={x,y:N,type:V,lngLat:Y,featureId:oi,feature:Sn};Sn&&(r.layer.setCurrentPickId(oi),r.triggerHoverOnLayer(fi))}else{var _i={x,y:N,lngLat:Y,type:r.layer.getCurrentPickId()===null?"un"+V:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(Hi(Hi({},_i),{},{type:"unpick"})),r.triggerHoverOnLayer(_i),r.layer.setCurrentPickId(null)}hn&&r.highlightPickedFeature(Ln),Dn&&V==="click"&&((ii=Ln)===null||ii===void 0?void 0:ii.toString())!==[0,0,0,0].toString()&&r.selectFeature(Ln)})}}}),r}return _t()(t,[{key:"getType",value:function(){return Qo.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(n,u){Mu()(Wr()(t.prototype),"init",this).call(this,n,u),this.layer=n;var h=this.rendererService,S=h.createTexture2D,x=h.createFramebuffer,N=h.getViewportSize,Y=N(),V=Y.width,_e=Y.height;this.pickingFBO=x({color:S({width:V,height:_e,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.interactionService.on(Gn.Hover,this.pickFromPickingFBO),this.interactionService.on(Gn.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Gn.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(n){var u=this;if(!this.alreadyInRendering){var h=this.rendererService,S=h.getViewportSize,x=h.useFramebuffer,N=h.clear,Y=S(),V=Y.width,_e=Y.height;this.alreadyInRendering=!0,(this.width!==V||this.height!==_e)&&(this.pickingFBO.resize({width:V,height:_e}),this.width=V,this.height=_e),x(this.pickingFBO,function(){N({framebuffer:u.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var je=u.layer.multiPassRenderer.getRenderFlag();u.layer.multiPassRenderer.setRenderFlag(!1),n.hooks.beforePickingEncode.call(),n.render(),n.hooks.afterPickingEncode.call(),u.layer.multiPassRenderer.setRenderFlag(je),u.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(n){this.layer.emit(n.type,n)}},{key:"highlightPickedFeature",value:function(n){var u=pi()(n,3),h=u[0],S=u[1],x=u[2];this.layer.hooks.beforeHighlight.call([h,S,x]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(n){var u=pi()(n,3),h=u[0],S=u[1],x=u[2];this.layer.hooks.beforeSelect.call([h,S,x]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(n){var u=n.featureId,h=Object(me.m)(u);this.selectFeature(new Uint8Array(h))}},{key:"highlightFeatureHandle",value:function(n){var u=n.featureId,h=Object(me.m)(u);this.highlightPickedFeature(new Uint8Array(h))}}]),t}(Z))||Pi),qi=a("tIjD"),Di=a.n(qi),Ni=a("qsIO"),wa=a.n(Ni),Da,la,eo,Xa,cs;function $o(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function co(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?$o(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var Ru=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Lo=(Da=Object(cr.injectable)(),la=Object(cr.inject)(Gt.IShaderModuleService),Da(eo=(Xa=function(){function e(){Ce()(this,e),Yr()(this,"shaderModuleService",cs,this),C()(this,"rendererService",void 0),C()(this,"config",void 0),C()(this,"quad",Ru),C()(this,"enabled",!0),C()(this,"renderToScreen",!1),C()(this,"model",void 0),C()(this,"name",void 0),C()(this,"optionsToUpdate",{})}return _t()(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return Qo.PostProcessing}},{key:"init",value:function(t,r){this.config=r,this.rendererService=t.getContainer().get(Gt.IRendererService),this.shaderModuleService=t.getContainer().get(Gt.IShaderModuleService);var n=this.rendererService,u=n.createAttribute,h=n.createBuffer,S=n.createModel,x=this.setupShaders(),N=x.vs,Y=x.fs,V=x.uniforms;this.model=S({vs:N,fs:Y,attributes:{a_Position:u({buffer:h({data:[-4,-4,4,-4,0,4],type:mt.FLOAT}),size:2})},uniforms:co(co({u_Texture:null},V),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(t,r){var n=this,u=t.multiPassRenderer.getPostProcessor(),h=this.rendererService,S=h.useFramebuffer,x=h.getViewportSize,N=h.clear,Y=x(),V=Y.width,_e=Y.height;S(this.renderToScreen?null:u.getWriteFBO(),function(){N({framebuffer:u.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var je=co({u_BloomFinal:0,u_Texture:u.getReadFBO(),u_ViewportSize:[V,_e]},n.convertOptionsToUniforms(n.optionsToUpdate));r&&(je.u_BloomFinal=1,je.u_Texture2=r),n.model.draw({uniforms:je})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=co(co({},this.optionsToUpdate),t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var r={};return Object.keys(t).forEach(function(n){Wo()(t[n])||(r["u_".concat(Di()(wa()(n)))]=t[n])}),r}}]),e}(),cs=In()(Xa.prototype,"shaderModuleService",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xa))||eo),eu,tu;function ml(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function gl(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?ml(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ml(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function yl(e){var i=El();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function El(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sl=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);
  // float lum = luminance(baseColor);
  // baseColor.a *= lum;

  // gl_FragColor = baseColor;

  // if(u_BloomFinal > 0.0) { // 
  //   gl_FragColor = baseColor; //-- 
  // }

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    // float lum = luminance(inbloomColor);
    // vec4 bloom = vec4(lum);
    // inbloomColor.a *= lum;
    // gl_FragColor = inbloomColor * u_intensity + texture2D(u_Texture2, v_UV);
    // gl_FragColor = inbloomColor * 0.5 + texture2D(u_Texture2, v_UV);
    // gl_FragColor = baseColor;
    // gl_FragColor = inbloomColor;
    // vec4 mixColor = mix(baseColor, inbloomColor, max(u_intensity - 0.3, 0.0));
    // mixColor.a = max(baseColor.a, mixColor.a);
    gl_FragColor = mix(inbloomColor, baseColor, max(1.0 - u_intensity, u_baseRadio));
    // gl_FragColor = mixColor;
    // gl_FragColor = baseColor;
    
    if(baselum <= 0.0) {
      // float lum = luminance(inbloomColor);
      // inbloomColor.rgb *= lum;
      gl_FragColor += inbloomColor * u_intensity;
    }
    // gl_FragColor = inbloomColor * baseColor + baseColor;
    // gl_FragColor = baseColor + bloom * 0.5;
  } else {
    gl_FragColor = inbloomColor;
  }
  // gl_FragColor = inbloomColor;

  // float h = 0.01;
  
  // vec4 color11 = texture2D( u_Texture, vec2( v_UV.x - 1.0 * h, v_UV.y + 1.0 * h) );
  // vec4 color12 = texture2D( u_Texture, vec2( v_UV.x - 0.0 * h, v_UV.y + 1.0 * h) );
  // vec4 color13 = texture2D( u_Texture, vec2( v_UV.x + 1.0 * h, v_UV.y + 1.0 * h) );

  // vec4 color21 = texture2D( u_Texture, vec2( v_UV.x - 1.0 * h, v_UV.y) );
  // vec4 color23 = texture2D( u_Texture, vec2( v_UV.x + 1.0 * h, v_UV.y) );

  // vec4 color31 = texture2D( u_Texture, vec2( v_UV.x - 1.0 * h, v_UV.y-1.0*h) );
  // vec4 color32 = texture2D( u_Texture, vec2( v_UV.x - 0.0 * h, v_UV.y-1.0*h) );
  // vec4 color33 = texture2D( u_Texture, vec2( v_UV.x + 1.0 * h, v_UV.y-1.0*h) );

  // vec4 bloomColor =
  //   color11 + 
  //   color12 + 
  //   color13 + 
  //   color21 + 
  //   color21 + 
  //   color23 + 
  //   color31 + 
  //   color32 + 
  //   color33;

  //   if(baseColor.a > 0.0) {
      
  //     gl_FragColor.r = min(bloomColor.r, baseColor.r);
  //     gl_FragColor.g = min(bloomColor.g, baseColor.g);
  //     gl_FragColor.b = min(bloomColor.b, baseColor.b);
  //     gl_FragColor.a = min(bloomColor.a, baseColor.a);

  //     gl_FragColor = mix(inbloomColor, gl_FragColor, 0.7);
  //   } else {
  //     gl_FragColor = bloomColor/9.0;
  //   } 
}`,Th=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Iu=(eu=Object(cr.injectable)(),eu(tu=function(e){An()(t,e);var i=yl(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Th,fs:Sl});var n=this.shaderModuleService.getModule("blur-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:gl(gl({},S),{},{u_ViewportSize:[N,Y]})}}},{key:"convertOptionsToUniforms",value:function(n){var u={};return Wo()(n.bloomRadius)||(u.u_radius=n.bloomRadius),Wo()(n.bloomIntensity)||(u.u_intensity=n.bloomIntensity),Wo()(n.bloomBaseRadio)||(u.u_baseRadio=n.bloomBaseRadio),u}}]),t}(Lo))||tu),vf,Tl;function Al(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Vf(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Al(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Al(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Ah(e){var i=xh();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function xh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,_h=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ch=(vf=Object(cr.injectable)(),vf(Tl=function(e){An()(t,e);var i=Ah(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:_h,fs:bh});var n=this.shaderModuleService.getModule("blur-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:Vf(Vf({},S),{},{u_ViewportSize:[N,Y]})}}},{key:"convertOptionsToUniforms",value:function(n){var u={};return Wo()(n.blurRadius)||(u.u_BlurDir=[n.blurRadius,0]),u}}]),t}(Lo))||Tl),xl,bl;function _l(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Cl(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?_l(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Oh(e){var i=zf();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function zf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,mf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gf=(xl=Object(cr.injectable)(),xl(bl=function(e){An()(t,e);var i=Oh(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:mf,fs:pf});var n=this.shaderModuleService.getModule("blur-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:Cl(Cl({},S),{},{u_ViewportSize:[N,Y]})}}},{key:"convertOptionsToUniforms",value:function(n){var u={};return Wo()(n.blurRadius)||(u.u_BlurDir=[0,n.blurRadius]),u}}]),t}(Lo))||bl),yf,vc;function pc(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function mc(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?pc(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pc(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Xf(e){var i=Ef();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ef(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Tf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gc=(yf=Object(cr.injectable)(),yf(vc=function(e){An()(t,e);var i=Xf(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Tf,fs:Sf});var n=this.shaderModuleService.getModule("colorhalftone-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:mc(mc({},S),{},{u_ViewportSize:[N,Y]})}}}]),t}(Lo))||vc),Nu,Lu;function yc(e){var i=Ec();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ec(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Wf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Sc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ru=(Nu=Object(cr.injectable)(),Nu(Lu=function(e){An()(t,e);var i=yc(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Sc,fs:Wf}),this.shaderModuleService.getModule("copy-pass")}}]),t}(Lo))||Lu),Yf,Af;function Ol(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Pl(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ol(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ol(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Ph(e){var i=ks();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function ks(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ml=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Rl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Il=(Yf=Object(cr.injectable)(),Yf(Af=function(e){An()(t,e);var i=Ph(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Rl,fs:Ml});var n=this.shaderModuleService.getModule("hexagonalpixelate-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:Pl(Pl({},S),{},{u_ViewportSize:[N,Y]})}}}]),t}(Lo))||Af),Nl,Zf;function Ll(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Jo(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Ll(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ll(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function wl(e){var i=wu();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function wu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Us=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Dl=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Kf=(Nl=Object(cr.injectable)(),Nl(Zf=function(e){An()(t,e);var i=wl(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Dl,fs:Us});var n=this.shaderModuleService.getModule("ink-pass"),u=n.vs,h=n.fs,S=n.uniforms,x=this.rendererService.getViewportSize(),N=x.width,Y=x.height;return{vs:u,fs:h,uniforms:Jo(Jo({},S),{},{u_ViewportSize:[N,Y]})}}}]),t}(Lo))||Zf),Tc,Qf;function io(e){var i=js();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function js(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var to=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,wo=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Fl=(Tc=Object(cr.injectable)(),Tc(Qf=function(e){An()(t,e);var i=io(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:wo,fs:to}),this.shaderModuleService.getModule("noise-pass")}}]),t}(Lo))||Qf),Bl,kl;function Mh(e){var i=Rh();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Rh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ul=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ih=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Nh=(Bl=Object(cr.injectable)(),Bl(kl=function(e){An()(t,e);var i=Mh(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Ul,fs:Ih}),this.shaderModuleService.getModule("sepia-pass")}}]),t}(Lo))||kl),jl,Gl,Hl,$f,nu,Jf,Lh=(jl=Object(cr.injectable)(),Gl=Object(cr.inject)(Gt.IRendererService),Hl=Object(cr.postConstruct)(),jl($f=(nu=function(){function e(){Ce()(this,e),Yr()(this,"rendererService",Jf,this),C()(this,"passes",[]),C()(this,"readFBO",void 0),C()(this,"writeFBO",void 0)}return _t()(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var t=this.rendererService,r=t.getViewportSize,n=t.createTexture2D,u=r(),h=u.width,S=u.height;return n({x:0,y:0,width:h,height:S,copy:!0})}},{key:"getReadFBOTex",value:function(){var t=this,r=this.rendererService.useFramebuffer;return new Promise(function(n,u){r(t.readFBO,so()(Yi.a.mark(function h(){return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:n(t.getCurrentFBOTex());case 1:case"end":return x.stop()}},h)})))})}},{key:"renderBloomPass",value:function(){var i=so()(Yi.a.mark(function r(n,u){var h,S;return Yi.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.getReadFBOTex();case 2:h=N.sent,S=0;case 4:if(!(S<4)){N.next=11;break}return N.next=7,u.render(n,h);case 7:this.swap(),S++,N.next=4;break;case 11:case"end":return N.stop()}},r,this)}));function t(r,n){return i.apply(this,arguments)}return t}()},{key:"render",value:function(){var i=so()(Yi.a.mark(function r(n){var u,h;return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:u=0;case 1:if(!(u<this.passes.length)){x.next=15;break}if(h=this.passes[u],h.setRenderToScreen(this.isLastEnabledPass(u)),h.getName()!=="bloom"){x.next=9;break}return x.next=7,this.renderBloomPass(n,h);case 7:x.next=12;break;case 9:return x.next=11,h.render(n);case 11:u!==this.passes.length-1&&this.swap();case 12:u++,x.next=1;break;case 15:case"end":return x.stop()}},r,this)}));function t(r){return i.apply(this,arguments)}return t}()},{key:"resize",value:function(t,r){this.readFBO.resize({width:t,height:r}),this.writeFBO.resize({width:t,height:r})}},{key:"add",value:function(t,r,n){t.init(r,n),this.passes.push(t)}},{key:"insert",value:function(t,r,n,u){t.init(n,u),this.passes.splice(r,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find(function(r){return r.getName()===t})}},{key:"init",value:function(){var t=this.rendererService,r=t.createFramebuffer,n=t.createTexture2D;this.readFBO=r({color:n({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.writeFBO=r({color:n({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(t){for(var r=t+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),e}(),Jf=In()(nu.prototype,"rendererService",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In()(nu.prototype,"init",[Hl],Object.getOwnPropertyDescriptor(nu.prototype,"init"),nu.prototype),nu))||$f),Vl,qf;function wh(e){var i=B();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function B(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ye=(Vl=Object(cr.injectable)(),Vl(qf=function(e){An()(t,e);var i=wh(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getType",value:function(){return Qo.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(n,u){Mu()(Wr()(t.prototype),"init",this).call(this,n,u)}},{key:"render",value:function(n){var u=this.rendererService,h=u.useFramebuffer,S=u.clear,x=n.multiPassRenderer.getPostProcessor().getReadFBO();h(x,function(){S({color:[0,0,0,0],depth:1,stencil:0,framebuffer:x}),n.multiPassRenderer.setRenderFlag(!1),n.models.forEach(function(N){N.draw({uniforms:n.layerModel.getUninforms()})}),n.multiPassRenderer.setRenderFlag(!0)})}}]),t}(Z))||qf),Xe,zt,ur,jt,$t;function pr(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _r(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?pr(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Nr(e){var i=Dr();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Dr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Fr=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Gr=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Pr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Lr(e,i){for(var t=0,r=1/i,n=e;n>0;)t=t+r*(n%i),n=Math.floor(n/i),r=r/i;return t}var xt=1,Wt=(Xe=Object(cr.injectable)(),zt=Object(cr.inject)(Gt.IShaderModuleService),Xe(ur=(jt=function(e){An()(t,e);var i=Nr(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),Yr()(Ve()(r),"shaderModuleService",$t,Ve()(r)),C()(Ve()(r),"haltonSequence",[]),C()(Ve()(r),"accumulatingId",0),C()(Ve()(r),"frame",0),C()(Ve()(r),"timer",void 0),C()(Ve()(r),"sampleRenderTarget",void 0),C()(Ve()(r),"prevRenderTarget",void 0),C()(Ve()(r),"outputRenderTarget",void 0),C()(Ve()(r),"copyRenderTarget",void 0),C()(Ve()(r),"blendModel",void 0),C()(Ve()(r),"outputModel",void 0),C()(Ve()(r),"copyModel",void 0),r}return _t()(t,[{key:"getType",value:function(){return Qo.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(n,u){Mu()(Wr()(t.prototype),"init",this).call(this,n,u);var h=this.rendererService,S=h.createFramebuffer,x=h.createTexture2D;this.sampleRenderTarget=S({color:x({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.prevRenderTarget=S({color:x({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.outputRenderTarget=S({color:x({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})}),this.copyRenderTarget=S({color:x({width:1,height:1,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE})});for(var N=0;N<30;N++)this.haltonSequence.push([Lr(N,2),Lr(N,3)]);this.blendModel=this.createTriangleModel("blend-pass",Fr),this.outputModel=this.createTriangleModel("copy-pass",Gr,{blend:{enable:!0,func:{srcRGB:mt.ONE,dstRGB:mt.ONE_MINUS_SRC_ALPHA,srcAlpha:mt.ONE,dstAlpha:mt.ONE_MINUS_SRC_ALPHA},equation:{rgb:mt.FUNC_ADD,alpha:mt.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Gr)}},{key:"render",value:function(n){var u=this,h=this.rendererService,S=h.clear,x=h.getViewportSize,N=h.useFramebuffer,Y=x(),V=Y.width,_e=Y.height;this.sampleRenderTarget.resize({width:V,height:_e}),this.prevRenderTarget.resize({width:V,height:_e}),this.outputRenderTarget.resize({width:V,height:_e}),this.copyRenderTarget.resize({width:V,height:_e}),this.resetFrame(),this.stopAccumulating();var je=n.multiPassRenderer.getPostProcessor().getReadFBO();N(je,function(){S({color:[0,0,0,0],depth:1,stencil:0,framebuffer:je}),n.multiPassRenderer.setRenderFlag(!1),n.render(),n.multiPassRenderer.setRenderFlag(!0)});var yt=function kt(nr){!u.accumulatingId||nr!==u.accumulatingId||u.isFinished()||(u.doRender(n),me.a.requestAnimationFrame(function(){kt(nr)}))};this.accumulatingId=xt++,this.timer=me.a.setTimeout(function(){yt(u.accumulatingId)},50)}},{key:"doRender",value:function(n){var u=this,h=this.rendererService,S=h.clear,x=h.getViewportSize,N=h.useFramebuffer,Y=x(),V=Y.width,_e=Y.height,je=n.getLayerConfig(),yt=je.jitterScale,kt=yt===void 0?1:yt,nr=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((nr[0]*2-1)/V*kt,(nr[1]*2-1)/_e*kt),n.multiPassRenderer.setRenderFlag(!1),n.hooks.beforeRender.call(),N(this.sampleRenderTarget,function(){S({color:[0,0,0,0],depth:1,stencil:0,framebuffer:u.sampleRenderTarget}),n.render()}),n.hooks.afterRender.call(),n.multiPassRenderer.setRenderFlag(!0);var gr=n.getLayerConfig();N(this.outputRenderTarget,function(){u.blendModel.draw({uniforms:{u_opacity:gr.opacity||1,u_MixRatio:u.frame===0?1:.9,u_Diffuse1:u.sampleRenderTarget,u_Diffuse2:u.frame===0?n.multiPassRenderer.getPostProcessor().getReadFBO():u.prevRenderTarget}})}),this.frame===0&&S({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(N(this.copyRenderTarget,function(){u.outputModel.draw({uniforms:{u_Texture:u.outputRenderTarget}})}),N(n.multiPassRenderer.getPostProcessor().getReadFBO(),function(){u.copyModel.draw({uniforms:{u_Texture:u.copyRenderTarget}})}),n.multiPassRenderer.getPostProcessor().render(n));var yr=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=yr,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,me.a.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(n,u,h){this.shaderModuleService.registerModule(n,{vs:Pr,fs:u});var S=this.shaderModuleService.getModule(n),x=S.vs,N=S.fs,Y=S.uniforms,V=this.rendererService,_e=V.createAttribute,je=V.createBuffer,yt=V.createModel;return yt(_r({vs:x,fs:N,attributes:{a_Position:_e({buffer:je({data:[-4,-4,4,-4,0,4],type:mt.FLOAT}),size:2})},uniforms:_r({},Y),depth:{enable:!1},count:3},h))}}]),t}(Z),$t=In()(jt.prototype,"shaderModuleService",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt))||ur),Mr=new cr.Container;Mr.bind(Gt.IGlobalConfigService).to(ti).inSingletonScope(),Object(cr.decorate)(Object(cr.injectable)(),Wi.EventEmitter),Mr.bind(Gt.IEventEmitter).to(Wi.EventEmitter);var nn=Li()(Mr,!1),Er=function(i){var t=nn.lazyInject(i);return function(r,n,u){t.call(this,r,n),u&&(u.initializer=function(){return r[n]})}},an=function(i){var t=nn.lazyMultiInject(i);return function(r,n,u){t.call(this,r,n),u&&(u.initializer=function(){return r[n]})}},Br=Mr,jn=0;function fr(){var e=new cr.Container;return e.parent=Mr,e.bind(Gt.SceneID).toConstantValue("".concat(jn++)),e.bind(Gt.IShaderModuleService).to(hf).inSingletonScope(),e.bind(Gt.ILayerService).to(jc).inSingletonScope(),e.bind(Gt.ISceneService).to(sc).inSingletonScope(),e.bind(Gt.ICameraService).to(ja).inSingletonScope(),e.bind(Gt.ICoordinateSystemService).to(qe).inSingletonScope(),e.bind(Gt.IInteractionService).to(su).inSingletonScope(),e.bind(Gt.IPickingService).to(zo).inSingletonScope(),e.bind(Gt.IControlService).to(k).inSingletonScope(),e.bind(Gt.IMarkerService).to(Be).inSingletonScope(),e.bind(Gt.IIconService).to(ns).inSingletonScope(),e.bind(Gt.IFontService).to(Ri).inSingletonScope(),e.bind(Gt.IPopupService).to(Vt).inSingletonScope(),e.bind(Gt.INormalPass).to(Ae).whenTargetNamed("clear"),e.bind(Gt.INormalPass).to(qa).whenTargetNamed("pixelPicking"),e.bind(Gt.INormalPass).to(ye).whenTargetNamed("render"),e.bind(Gt.INormalPass).to(Wt).whenTargetNamed("taa"),e.bind(Gt.IFactoryNormalPass).toFactory(function(i){return function(t){return i.container.getNamed(Gt.INormalPass,t)}}),e.bind(Gt.IPostProcessingPass).to(ru).whenTargetNamed("copy"),e.bind(Gt.IPostProcessingPass).to(Iu).whenTargetNamed("bloom"),e.bind(Gt.IPostProcessingPass).to(Ch).whenTargetNamed("blurH"),e.bind(Gt.IPostProcessingPass).to(gf).whenTargetNamed("blurV"),e.bind(Gt.IPostProcessingPass).to(Fl).whenTargetNamed("noise"),e.bind(Gt.IPostProcessingPass).to(Nh).whenTargetNamed("sepia"),e.bind(Gt.IPostProcessingPass).to(gc).whenTargetNamed("colorHalftone"),e.bind(Gt.IPostProcessingPass).to(Il).whenTargetNamed("hexagonalPixelate"),e.bind(Gt.IPostProcessingPass).to(Kf).whenTargetNamed("ink"),e.bind(Gt.IFactoryPostProcessingPass).toFactory(function(i){return function(t){var r=i.container.getNamed(Gt.IPostProcessingPass,t);return r.setName(t),r}}),e}function ar(e){var i=new cr.Container;return i.parent=e,i.bind(Gt.IStyleAttributeService).to(Vc).inSingletonScope(),i.bind(Gt.IMultiPassRenderer).to(Kn).inSingletonScope(),i.bind(Gt.IPostProcessor).to(Lh).inSingletonScope(),i}var mn=a("Jj6M"),zr=a.n(mn),Ir=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function Zr(e){return Ir.indexOf(e)}var Kr=2,ai=4,Wn=64,Jr=128,on=256,Vn=512,Jn=8192,Ai=16384,Fa=32768,Ba=32768*2,gi=131072,mo=262144,Ea=524288,ao=1048576,Wa=2097152,fo=4194304,lo=8388608,go=16777216,Ya=16777216*2;function ri(e,i){return e=zr()(Math.floor(e),0,255),i=zr()(Math.floor(i),0,255),256*e+i}function yo(e){var i=e.color,t=e.radius,r=e.tileX,n=e.tileY,u=e.shape,h=e.opacity,S=e.stroke,x=e.strokeWidth,N=e.strokeOpacity,Y=[],V=[],_e=[],je=[ri(i[0],i[1]),ri(i[2],i[3])],yt=[ri(S[0],S[1]),ri(S[2],S[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(kt){var nr=pi()(kt,2),gr=nr[0],yr=nr[1];Y.push([].concat(je,[(gr+1)*lo+(yr+1)*Wa+Zr(u)*gi+t,(r+512)*Ea+(n+512)*Wn])),V.push([].concat(yt,[x,N])),_e.push([h,0,0,0])}),{packedBuffer:Y,packedBuffer2:V,packedBuffer3:_e}}function Zi(e,i){if(e===0&&!i)return 0;if(e===1&&i)return 4294967295;var t=i?1:0,r=Math.floor(e*127);return r*Ya+t*go+r*gi+t*Ba+r*Vn+t*on+r*Kr+t}var Sa;(function(e){e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none"})(Sa||(Sa={}));var xn;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(xn||(xn={}));var ni;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(ni||(ni={}));var Ei;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(Ei||(Ei={}));var ro=["mapload","mapchange"],Po={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},we=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Ht;(function(e){e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter"})(Ht||(Ht={}));function Dt(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function cn(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Dt(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Si(e){var i=Re();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Re(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var le=0,$e=function(e){An()(t,e);var i=Si(t);function t(r){var n;return Ce()(this,t),n=i.call(this),C()(Ve()(n),"controlOption",void 0),C()(Ve()(n),"container",void 0),C()(Ve()(n),"sceneContainer",void 0),C()(Ve()(n),"mapsService",void 0),C()(Ve()(n),"renderService",void 0),C()(Ve()(n),"layerService",void 0),C()(Ve()(n),"controlService",void 0),C()(Ve()(n),"isShow",void 0),n.controlOption=cn(cn({},n.getDefault()),r||{}),n}return _t()(t,[{key:"getDefault",value:function(){return{position:Ht.TOPRIGHT,name:"".concat(le++)}}},{key:"setPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ht.BOTTOMRIGHT,u=this.controlService;return u&&u.removeControl(this),this.controlOption.position=n,u&&u.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(n){this.mapsService=n.get(Gt.IMapService),this.renderService=n.get(Gt.IRendererService),this.layerService=n.get(Gt.ILayerService),this.controlService=n.get(Gt.IControlService),this.sceneContainer=n,this.isShow=!0,this.container=this.onAdd();var u=this.container,h=this.controlOption.position,S=this.controlService.controlCorners[h];return me.b.addClass(u,"l7-control"),h.indexOf("bottom")!==-1?S.insertBefore(u,S.firstChild):S.appendChild(u),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var n=this.container;me.b.addClass(n,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var n=this.container;me.b.removeClass(n,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;me.b.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(n){if(this.mapsService&&n&&n.screenX>0&&n.screenY>0){var u=this.mapsService.getContainer();u!==null&&u.focus()}}}]),t}(Wi.EventEmitter);function bt(e){var i=Xt();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Xt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var at=function(e){An()(t,e);var i=bt(t);function t(r){var n;return Ce()(this,t),n=i.call(this,r),C()(Ve()(n),"layerControlInputs",void 0),C()(Ve()(n),"layers",void 0),C()(Ve()(n),"lastZIndex",void 0),C()(Ve()(n),"handlingClick",void 0),C()(Ve()(n),"layersLink",void 0),C()(Ve()(n),"baseLayersList",void 0),C()(Ve()(n),"separator",void 0),C()(Ve()(n),"overlaysList",void 0),C()(Ve()(n),"form",void 0),n.layerControlInputs=[],n.layers=[],n.lastZIndex=0,n.handlingClick=!1,n.initLayers(),Object(me.j)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],Ve()(n)),n}return _t()(t,[{key:"getDefault",value:function(){return{collapsed:!0,position:Ht.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var n=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(u){u.layer.on("remove",n.onLayerChange),u.layer.on("add",n.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(n,u){return this.addLayer(n,u,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var n=this.renderService.getViewportSize(),u=n.height;me.b.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var h=u-(this.container.offsetTop+50);return h<this.form.clientHeight?(me.b.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=h+"px"):me.b.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return me.b.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var n=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(u){u.layer.off("remove",n.onLayerChange),u.layer.off("add",n.onLayerChange)}))}},{key:"initLayout",value:function(){var n="l7-control-layers",u=this.container=me.b.create("div",n),h=this.controlOption.collapsed;u.setAttribute("aria-haspopup","true");var S=this.form=me.b.create("form",n+"-list");h&&(this.mapsService.on("click",this.collapse),u.addEventListener("mouseenter",this.expand),u.addEventListener("mouseleave",this.collapse)),this.layersLink=me.b.create("a",n+"-toggle",u);var x=this.layersLink;x.title="Layers",h||this.expand(),this.baseLayersList=me.b.create("div",n+"-base",S),this.separator=me.b.create("div",n+"-separator",S),this.overlaysList=me.b.create("div",n+"-overlays",S),u.appendChild(S)}},{key:"initLayers",value:function(){var n=this,u=this.controlOption,h=u.baseLayers,S=h===void 0?{}:h,x=u.overlayers,N=x===void 0?{}:x;Object.keys(S).forEach(function(Y,V){n.addLayer(S[Y],Y,!1)}),Object.keys(N).forEach(function(Y,V){n.addLayer(N[Y],Y,!0)})}},{key:"update",value:function(){if(!this.container)return this;me.b.empty(this.baseLayersList),me.b.empty(this.overlaysList),this.layerControlInputs=[];var n,u,h,S,x=0;for(h=0;h<this.layers.length;h++)S=this.layers[h],this.addItem(S),u=u||S.overlay,n=n||!S.overlay,x+=S.overlay?0:1;return this.controlOption.hideSingleBase&&(n=n&&x>1,this.baseLayersList.style.display=n?"":"none"),this.separator.style.display=u&&n?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var n=this.layerControlInputs,u,h,S=this.mapsService.getZoom(),x=n.length-1;x>=0;x--)if(u=n[x],h=this.layerService.getLayer(u.layerId),h&&h.inited){var N=h.getMinZoom(),Y=h.getMaxZoom();u.disabled=S<N||S>Y}}},{key:"addLayer",value:function(n,u,h){this.mapsService&&(n.on("add",this.onLayerChange),n.on("remove",this.onLayerChange)),this.layers.push({layer:n,name:u,overlay:h});var S=this.controlOption,x=S.sortLayers,N=S.sortFunction,Y=S.autoZIndex;x&&this.layers.sort(function(V,_e){return N(V.layer,_e.layer,V.name,_e.name)}),Y&&n.setZIndex&&(this.lastZIndex++,n.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(n){this.handlingClick||this.update();var u=this.layerService.getLayer(n.target.layerId),h=u!=null&&u.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;h&&this.emit(h,u)}},{key:"createRadioElement",value:function(n,u){var h='<input type="radio" class="l7-control-layers-selector" name="'+n+'"'+(u?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=h,S.firstChild}},{key:"addItem",value:function(n){var u=document.createElement("label"),h=this.layerService.getLayer(n.layer.id),S=h&&h.inited&&n.layer.isVisible(),x;n.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="l7-control-layers-selector",x.defaultChecked=S):x=this.createRadioElement("l7-base-layers",S),this.layerControlInputs.push(x),x.layerId=n.layer.id,x.addEventListener("click",this.onInputClick);var N=document.createElement("span");N.innerHTML=" "+n.name;var Y=document.createElement("div");u.appendChild(Y),Y.appendChild(x),Y.appendChild(N);var V=n.overlay?this.overlaysList:this.baseLayersList;return V.appendChild(u),this.checkDisabledLayers(),u}},{key:"onInputClick",value:function(){var n=this.layerControlInputs,u,h,S=[],x=[];this.handlingClick=!0;for(var N=n.length-1;N>=0;N--)u=n[N],h=this.layerService.getLayer(u.layerId),u.checked?S.push(h):u.checked||x.push(h);x.forEach(function(Y){Y.hide()}),S.forEach(function(Y){Y.show()}),this.handlingClick=!1}}]),t}($e);function nt(e){var i=lt();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function lt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xe=function(e){An()(t,e);var i=nt(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getDefault",value:function(){return{position:Ht.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var n="l7-control-logo",u=me.b.create("div",n),h=me.b.create("a","l7-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://antv.alipay.com/l7",h.setAttribute("aria-label","AntV logo"),h.setAttribute("rel","noopener nofollow"),u.appendChild(h),u}},{key:"onRemove",value:function(){return null}}]),t}($e);function Je(e){var i=Ie();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ct=function(e){An()(t,e);var i=Je(t);function t(r){var n;return Ce()(this,t),n=i.call(this,r),C()(Ve()(n),"mScale",void 0),C()(Ve()(n),"iScale",void 0),Object(me.j)(["update"],Ve()(n)),n}return _t()(t,[{key:"getDefault",value:function(){return{position:Ht.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var n="l7-control-scale",u=me.b.create("div",n);this.addScales(n+"-line",u);var h=this.controlOption.updateWhenIdle;return this.mapsService.on(h?"moveend":"mapmove",this.update),this.mapsService.on(h?"zoomend":"zoomchange",this.update),this.update(),u}},{key:"onRemove",value:function(){var n=this.controlOption.updateWhenIdle;this.mapsService.off(n?"zoomend":"zoomchange",this.update),this.mapsService.off(n?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var n=this.mapsService,u=this.controlOption.maxWidth,h=n.getSize()[1]/2,S=n.containerToLngLat([0,h]),x=n.containerToLngLat([u,h]),N=Object(me.u)([S.lng,S.lat],[x.lng,x.lat]);this.updateScales(N)}},{key:"updateScales",value:function(n){var u=this.controlOption,h=u.metric,S=u.imperial;h&&n&&this.updateMetric(n),S&&n&&this.updateImperial(n)}},{key:"updateMetric",value:function(n){var u=this.getRoundNum(n),h=u<1e3?u+" m":u/1e3+" km";this.updateScale(this.mScale,h,u/n)}},{key:"updateImperial",value:function(n){var u=n*3.2808399,h,S,x;u>5280?(h=u/5280,S=this.getRoundNum(h),this.updateScale(this.iScale,S+" mi",S/h)):(x=this.getRoundNum(u),this.updateScale(this.iScale,x+" ft",x/u))}},{key:"updateScale",value:function(n,u,h){var S=this.controlOption.maxWidth;n.style.width=Math.round(S*h)+"px",n.innerHTML=u}},{key:"getRoundNum",value:function(n){var u=Math.pow(10,(Math.floor(n)+"").length-1),h=n/u;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,u*h}},{key:"addScales",value:function(n,u){var h=this.controlOption,S=h.metric,x=h.imperial;S&&(this.mScale=me.b.create("div",n,u)),x&&(this.iScale=me.b.create("div",n,u))}}]),t}($e);function Ft(e){var i=mr();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function mr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Hr=function(e){An()(t,e);var i=Ft(t);function t(r){var n;return Ce()(this,t),n=i.call(this,r),C()(Ve()(n),"disabled",void 0),C()(Ve()(n),"zoomInButton",void 0),C()(Ve()(n),"zoomOutButton",void 0),Object(me.j)(["updateDisabled","zoomIn","zoomOut"],Ve()(n)),n}return _t()(t,[{key:"getDefault",value:function(){return{position:Ht.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var n="l7-control-zoom",u=me.b.create("div",n+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,n+"-in",u,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,n+"-out",u,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),u}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(n,u,h,S,x){var N=me.b.create("a",h,S);return N.innerHTML=n,N.title=u,N.href="javascript:void(0)",N.addEventListener("click",x),N}},{key:"updateDisabled",value:function(){var n=this.mapsService,u="l7-disabled";me.b.removeClass(this.zoomInButton,u),me.b.removeClass(this.zoomOutButton,u),(this.disabled||n.getZoom()<=n.getMinZoom())&&me.b.addClass(this.zoomOutButton,u),(this.disabled||n.getZoom()>=n.getMaxZoom())&&me.b.addClass(this.zoomInButton,u)}}]),t}($e);function jr(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Qr(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?jr(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function kr(e){var i=yn();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function yn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sn=function(e){An()(t,e);var i=kr(t);function t(r){var n;return Ce()(this,t),n=i.call(this),C()(Ve()(n),"markerOption",void 0),C()(Ve()(n),"defaultMarker",void 0),C()(Ve()(n),"popup",void 0),C()(Ve()(n),"mapsService",void 0),C()(Ve()(n),"sceneSerive",void 0),C()(Ve()(n),"lngLat",void 0),C()(Ve()(n),"scene",void 0),C()(Ve()(n),"added",!1),C()(Ve()(n),"eventHandle",function(u){n.emit(u.type,{target:u,data:n.markerOption.extData,lngLat:n.lngLat})}),n.markerOption=Qr(Qr({},n.getDefault()),r),Object(me.j)(["update","onMove","onUp","addDragHandler","onMapClick"],Ve()(n)),n.init(),n}return _t()(t,[{key:"getDefault",value:function(){return{element:void 0,anchor:me.g.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(n){this.scene=n,this.mapsService=n.get(Gt.IMapService),this.sceneSerive=n.get(Gt.ISceneService);var u=this.markerOption,h=u.element,S=u.draggable;return this.mapsService.getMarkerContainer().appendChild(h),this.registerMarkerEvent(h),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var n=this.markerOption.element;return n&&me.b.remove(n),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(n){return this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(n){var u=this;if(!this.added)return this.once("added",function(){u.setElement(n)}),this;var h=this.markerOption.element;return h&&me.b.remove(h),this.markerOption.element=n,this.init(),this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.update(),this}},{key:"openPopup",value:function(){var n=this;if(!this.added)return this.once("added",function(){n.openPopup()}),this;var u=this.popup;return u?(u.isOpen()||u.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var n=this;this.added||this.once("added",function(){n.closePopup()});var u=this.popup;return u&&u.remove(),this}},{key:"setPopup",value:function(n){return this.popup=n,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var n=this.popup;if(n)n.isOpen()?n.remove():n.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(n){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(n){this.markerOption.extData=n}},{key:"update",value:function(){if(!!this.mapsService){var n=this.markerOption,u=n.element,h=n.anchor;this.updatePosition(),me.b.setTransform(u,"".concat(me.f[h]))}}},{key:"onMapClick",value:function(n){var u=this.markerOption.element;this.popup&&u&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var n=this.markerOption,u=n.element,h=n.offsets,S=this.lngLat,x=S.lng,N=S.lat,Y=this.mapsService.getBounds(),V=this.mapsService.lngLatToContainer([x,N]);if(u){u.style.display="block",u.style.whiteSpace="nowrap";var _e=this.mapsService.getContainer(),je=0,yt=0;if(_e&&(je=_e.scrollWidth,yt=_e.scrollHeight),Math.abs(Y[0][0])>180||Math.abs(Y[1][0])>180){if(V.x>je){var kt=this.mapsService.lngLatToContainer([x-360,N]);V.x=kt.x}if(V.x<0){var nr=this.mapsService.lngLatToContainer([x+360,N]);V.x=nr.x}}(V.x>je||V.x<0||V.y>yt||V.y<0)&&(u.style.display="none"),u.style.left=V.x+h[0]+"px",u.style.top=V.y-h[1]+"px"}}}},{key:"init",value:function(){var n=this,u=this.markerOption.element,h=this.markerOption,S=h.color,x=h.anchor;if(!u){this.defaultMarker=!0,u=me.b.create("div"),this.markerOption.element=u;var N=document.createElementNS("http://www.w3.org/2000/svg","svg");N.setAttributeNS(null,"display","block"),N.setAttributeNS(null,"height","48px"),N.setAttributeNS(null,"width","48px"),N.setAttributeNS(null,"viewBox","0 0 1024 1024");var Y=document.createElementNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),Y.setAttributeNS(null,"fill",S),N.appendChild(Y),u.appendChild(N)}me.b.addClass(u,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(V){var _e,je,yt=((_e=n.markerOption)===null||_e===void 0?void 0:_e.style)&&((je=n.markerOption)===null||je===void 0?void 0:je.style[V]);u&&(u.style[V]=yt)}),u.addEventListener("click",function(V){n.onMapClick(V)}),u.addEventListener("click",this.eventHandle),Object(me.h)(u,x,"marker")}},{key:"registerMarkerEvent",value:function(n){n.addEventListener("mousemove",this.eventHandle),n.addEventListener("click",this.eventHandle),n.addEventListener("mousedown",this.eventHandle),n.addEventListener("mouseup",this.eventHandle),n.addEventListener("dblclick",this.eventHandle),n.addEventListener("contextmenu",this.eventHandle),n.addEventListener("mouseover",this.eventHandle),n.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var n=this.getElement();n.removeEventListener("mousemove",this.eventHandle),n.removeEventListener("click",this.eventHandle),n.removeEventListener("mousedown",this.eventHandle),n.removeEventListener("mouseup",this.eventHandle),n.removeEventListener("dblclick",this.eventHandle),n.removeEventListener("contextmenu",this.eventHandle),n.removeEventListener("mouseover",this.eventHandle),n.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(n){throw new Error("Method not implemented.")}},{key:"onUp",value:function(n){throw new Error("Method not implemented.")}}]),t}(Wi.EventEmitter);function pn(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function gn(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?pn(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function En(e){var i=zn();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function zn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ta=function(e){An()(t,e);var i=En(t);function t(r){var n,u;return Ce()(this,t),u=i.call(this),C()(Ve()(u),"markers",[]),C()(Ve()(u),"markerLayerOption",void 0),C()(Ve()(u),"clusterIndex",void 0),C()(Ve()(u),"points",[]),C()(Ve()(u),"clusterMarkers",[]),C()(Ve()(u),"mapsService",void 0),C()(Ve()(u),"scene",void 0),C()(Ve()(u),"zoom",void 0),C()(Ve()(u),"bbox",void 0),u.markerLayerOption=or()(u.getDefault(),r),Object(me.j)(["update"],Ve()(u)),u.zoom=((n=u.markerLayerOption.clusterOption)===null||n===void 0?void 0:n.zoom)||-99,u}return _t()(t,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(n){return this.scene=n,this.mapsService=n.get(Gt.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(n){var u=this.markerLayerOption.cluster;u&&this.addPoint(n,this.markers.length),this.markers.push(n)}},{key:"removeMarker",value:function(n){this.markers.indexOf(n);var u=this.markers.indexOf(n);u>-1&&this.markers.splice(u,1)}},{key:"hide",value:function(){this.markers.map(function(n){n.getElement().style.opacity="0"}),this.clusterMarkers.map(function(n){n.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(n){n.getElement().style.opacity="1"}),this.clusterMarkers.map(function(n){n.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var n=this.markerLayerOption.cluster;return n?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var n=this;this.getMarkers().forEach(function(u){u.addTo(n.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(n){n.remove()}),this.clusterMarkers.forEach(function(n){n.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(n,u){var h=n.getLnglat(),S=h.lng,x=h.lat,N={geometry:{type:"Point",coordinates:[S,x]},properties:gn(gn({},n.getExtData()),{},{marker_id:u})};this.points.push(N)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var n=this.markerLayerOption.clusterOption,u=n.radius,h=n.minZoom,S=h===void 0?0:h,x=n.maxZoom;this.clusterIndex=new li.a({radius:u,minZoom:S,maxZoom:x}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(n,u){var h=this,S=n[0].concat(n[1]),x=this.clusterIndex.getClusters(S,u);this.clusterMarkers.forEach(function(N){N.remove()}),this.clusterMarkers=[],x.forEach(function(N){var Y,V=h.markerLayerOption.clusterOption,_e=V.field,je=V.method;if(N.properties&&(Y=N.properties)!==null&&Y!==void 0&&Y.cluster_id){var yt,kt=h.getLeaves((yt=N.properties)===null||yt===void 0?void 0:yt.cluster_id);if(N.properties.clusterData=kt,_e&&je){var nr=kt==null?void 0:kt.map(function(Dn){var Rn=C()({},_e,Dn.properties[_e]);return Rn}),gr=me.d.getColumn(nr,_e),yr=me.d.getSatByColumn(je,gr),Vr="point_"+je;N.properties[Vr]=yr.toFixed(2)}}var hn=h.clusterMarker(N);h.clusterMarkers.push(hn),hn.addTo(h.scene)})}},{key:"getLeaves",value:function(n){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return n?this.clusterIndex.getLeaves(n,u,h):null}},{key:"clusterMarker",value:function(n){var u=this.markerLayerOption.clusterOption,h=u,S=h.element,x=S===void 0?this.generateElement.bind(this):S,N=new sn({element:x(n)}).setLnglat({lng:n.geometry.coordinates[0],lat:n.geometry.coordinates[1]});return N}},{key:"normalMarker",value:function(n){var u=n.properties.marker_id;return this.markers[u]}},{key:"update",value:function(){var n=this.mapsService.getZoom(),u=this.mapsService.getBounds();(!this.bbox||Math.abs(n-this.zoom)>=1||!Object(me.k)(this.bbox,u))&&(this.bbox=Object(me.v)(u,.5),this.zoom=Math.floor(n),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(n){var u=me.b.create("div","l7-marker-cluster"),h=me.b.create("div","",u),S=me.b.create("span","",h),x=this.markerLayerOption.clusterOption,N=x.field,Y=x.method;n.properties.point_count=n.properties.point_count||1;var V=N&&Y?n.properties["point_"+Y]||n.properties[N]:n.properties.point_count;return S.textContent=V,u}}]),t}(Wi.EventEmitter);function oo(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function fs(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?oo(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Os(e){var i=Ps();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Ps(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Mo=function(e){An()(t,e);var i=Os(t);function t(r){var n;return Ce()(this,t),n=i.call(this),C()(Ve()(n),"popupOption",void 0),C()(Ve()(n),"mapsService",void 0),C()(Ve()(n),"sceneSerive",void 0),C()(Ve()(n),"lngLat",void 0),C()(Ve()(n),"content",void 0),C()(Ve()(n),"closeButton",void 0),C()(Ve()(n),"timeoutInstance",void 0),C()(Ve()(n),"container",void 0),C()(Ve()(n),"tip",void 0),C()(Ve()(n),"scene",void 0),n.popupOption=fs(fs({},n.getdefault()),r),Object(me.j)(["update","onClickClose","remove"],Ve()(n)),n}return _t()(t,[{key:"addTo",value:function(n){var u=this;return this.mapsService=n.get(Gt.IMapService),this.sceneSerive=n.get(Gt.ISceneService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=n,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){u.mapsService.on("click",u.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(n){var u=window.document.createDocumentFragment(),h=window.document.createElement("body"),S;for(h.innerHTML=n;S=h.firstChild,!!S;)u.appendChild(S);return this.setDOMContent(u)}},{key:"setLnglat",value:function(n){return this.lngLat=n,Array.isArray(n)&&(this.lngLat={lng:n[0],lat:n[1]}),this.mapsService&&(this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(n){return this.setDOMContent(window.document.createTextNode(n))}},{key:"setMaxWidth",value:function(n){return this.popupOption.maxWidth=n,this.update(),this}},{key:"setDOMContent",value:function(n){return this.createContent(),this.content.appendChild(n),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&me.b.remove(this.content),this.content=me.b.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=me.b.create("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(n,u,h){var S=window.document.createElement(n);return u!==void 0&&(S.className=u),h&&h.appendChild(S),S}},{key:"removeDom",value:function(n){n.parentNode&&n.parentNode.removeChild(n)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:me.g.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(n){n.stopPropagation&&n.stopPropagation(),this.remove()}},{key:"update",value:function(){var n=this,u=this.lngLat,h=this.popupOption,S=h.className,x=h.maxWidth,N=h.anchor;if(!(!this.mapsService||!u||!this.content)){var Y=this.mapsService.getMarkerContainer();if(!this.container&&Y){this.container=this.creatDom("div","l7-popup",Y),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),S&&S.split(" ").forEach(function(_e){return n.container.classList.add(_e)});var V=this.popupOption.stopPropagation;V&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(_e){n.container.addEventListener(_e,function(je){je.stopPropagation()})}),this.container.style.whiteSpace="nowrap"}x&&this.container.style.maxWidth!==x&&(this.container.style.maxWidth=x),this.updatePosition(),me.b.setTransform(this.container,"".concat(me.f[N])),Object(me.h)(this.container,N,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var n=this.lngLat,u=n.lng,h=n.lat,S=this.popupOption.offsets,x=this.mapsService.lngLatToContainer([u,h]);this.container.style.left=x.x+S[0]+"px",this.container.style.top=x.y-S[1]+"px"}}}]),t}(Wi.EventEmitter);function ls(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||r)&&(i||(i=document),!!i)){var n=i.head||i.getElementsByTagName("head")[0];if(!n){n=i.createElement("head");var u=i.body||i.getElementsByTagName("body")[0];u?u.parentNode.insertBefore(n,u):i.documentElement.appendChild(n)}var h=i.createElement("style");return h.type="text/css",h.styleSheet?h.styleSheet.cssText=e:h.appendChild(i.createTextNode(e)),n.appendChild(h),h}}ls(`.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
}

.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 5px;
}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}

.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-left: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-bottom: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-bottom: none;
  border-left: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-bottom: none;
  border-right: none;
  border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-left: none;
  border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  padding: 0;
  font-size: 25px;
  line-height: 20px;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
  display: none;
}

.l7-popup-track-pointer * {
  pointer-events: none;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

.l7-map:active .l7-popup-track-pointer {
  display: none;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.65);
  border-radius: 4px;
}
.l7-bar a,
.l7-bar a:hover {
  background-color: #fff;
  width: 30px;
  height: 30px;
  font-size: 20px;
  display: block;
  text-align: center;
  text-decoration: none;
  color: #8e9dab;
}
.l7-bar a,
.l7-control-layers-toggle {
  background-position: 50% 50%;
  background-repeat: no-repeat;
  display: block;
}
.l7-bar a:hover {
  background-color: #f4f4f4;
}
.l7-bar a:first-child {
  border-top-left-radius: 2px;
  border-top-right-radius: 2px;
}
.l7-bar a:last-child {
  border-bottom-left-radius: 2px;
  border-bottom-right-radius: 2px;
  border-bottom: none;
}
.l7-bar a.l7-disabled {
  cursor: default;
  background-color: #f4f4f4;
  color: #bbb;
}

/* control positioning */

.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-hide {
  display: none;
}
.l7-control {
  position: relative;
  z-index: 800;
  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control {
  float: left;
  clear: both;
}
.l7-top,
.l7-bottom {
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-top {
  top: 0;
}
.l7-right {
  right: 0;
}
.l7-bottom {
  bottom: 0;
}
.l7-left {
  left: 0;
}
.l7-center {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-bottom.l7-center,
.l7-top.l7-center {
  width: 100%;
}
.l7-right.l7-center,
.l7-left.l7-center {
  height: 100%;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-top.l7-center,
.l7-left.l7-center {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}

.l7-bottom.l7-center,
.l7-right.l7-center {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}

.l7-center .l7-control {
  margin-right: 10px;
  margin-bottom: 10px;
}

.l7-control {
  float: left;
  clear: both;
}
.l7-right .l7-control {
  float: right;
}
.l7-top .l7-control {
  margin-top: 10px;
}
.l7-bottom .l7-control {
  margin-bottom: 10px;
}
.l7-left .l7-control {
  margin-left: 10px;
}
.l7-right .l7-control {
  margin-right: 10px;
}

/* attribution and scale controls */

.l7-control-container .l7-control-attribution {
  background: #fff;
  background: rgba(255, 255, 255, 0.7);
  margin: 0;
}
.l7-control-attribution,
.l7-control-scale-line {
  padding: 0 5px;
  color: #333;
}
.l7-control-attribution a {
  text-decoration: none;
}
.l7-control-attribution a:hover {
  text-decoration: underline;
}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
}
.l7-left .l7-control-scale {
  margin-left: 5px;
}
.l7-bottom .l7-control-scale {
  margin-bottom: 5px;
}
.l7-control-scale-line {
  border: 2px solid #000;
  border-top: none;
  color: #000;
  line-height: 1.1;
  padding: 2px 5px 1px;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;

  background: #fff;
}
.l7-control-scale-line:not(:first-child) {
  border-top: 2px solid #777;
  border-bottom: none;
  margin-top: -2px;
}
.l7-control-scale-line:not(:first-child):not(:last-child) {
  border-bottom: 2px solid #777;
}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  border: 2px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}
/*logo */

.l7-ctrl-logo {
  background-size: 100% 100%;
  width: 89px;
  height: 16px;
  margin: 0 0 -3px -3px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  background-repeat: no-repeat;
  cursor: pointer;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 2px;
}
.l7-control-layers-toggle {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
  width: 30px;
  height: 30px;
  background-size: 20px 20px;
}

.l7-touch .l7-control-layers-toggle {
  width: 44px;
  height: 44px;
}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
  display: none;
}
.l7-control-layers-expanded .l7-control-layers-list {
  display: block;
  position: relative;
}
.l7-control-layers-expanded {
  padding: 6px 10px 6px 6px;
  color: #59626b;
  background: #fff;
}
.l7-control-layers-scrollbar {
  overflow-y: scroll;
  overflow-x: hidden;
  padding-right: 5px;
}
.l7-control-layers-selector {
  margin-top: 2px;
  position: relative;
  top: 1px;
}
.l7-control-layers label {
  display: block;
  padding: 8px;
}
.l7-control-layers label input[type='radio'],
.l7-control-layers label input[type='checkbox'] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
  height: 0;
  border-top: 1px solid #d8d8d8;
  margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
}
.amap-logo {
  display: none !important;
}
`);var Ho=a("hoy9"),zl=a.n(Ho),qo=function(){function e(i,t){Ce()(this,e),C()(this,"attribute",void 0),C()(this,"buffer",void 0);var r=t.buffer,n=t.offset,u=t.stride,h=t.normalized,S=t.size,x=t.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:n||0,stride:u||0,normalized:h||!1,divisor:x||0},S&&(this.attribute.size=S)}return _t()(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),hs,el,iu,ds,tl,Du,rl,Xl,Gs,Ac,Ro,Hs,Vs,Wl,T0=(hs={},C()(hs,mt.POINTS,"points"),C()(hs,mt.LINES,"lines"),C()(hs,mt.LINE_LOOP,"line loop"),C()(hs,mt.LINE_STRIP,"line strip"),C()(hs,mt.TRIANGLES,"triangles"),C()(hs,mt.TRIANGLE_FAN,"triangle fan"),C()(hs,mt.TRIANGLE_STRIP,"triangle strip"),hs),md=(el={},C()(el,mt.STATIC_DRAW,"static"),C()(el,mt.DYNAMIC_DRAW,"dynamic"),C()(el,mt.STREAM_DRAW,"stream"),el),Dh=(iu={},C()(iu,mt.BYTE,"int8"),C()(iu,mt.UNSIGNED_INT,"int16"),C()(iu,mt.INT,"int32"),C()(iu,mt.UNSIGNED_BYTE,"uint8"),C()(iu,mt.UNSIGNED_SHORT,"uint16"),C()(iu,mt.UNSIGNED_INT,"uint32"),C()(iu,mt.FLOAT,"float"),iu),A0=(ds={},C()(ds,mt.ALPHA,"alpha"),C()(ds,mt.LUMINANCE,"luminance"),C()(ds,mt.LUMINANCE_ALPHA,"luminance alpha"),C()(ds,mt.RGB,"rgb"),C()(ds,mt.RGBA,"rgba"),C()(ds,mt.RGBA4,"rgba4"),C()(ds,mt.RGB5_A1,"rgb5 a1"),C()(ds,mt.RGB565,"rgb565"),C()(ds,mt.DEPTH_COMPONENT,"depth"),C()(ds,mt.DEPTH_STENCIL,"depth stencil"),ds),x0=(tl={},C()(tl,mt.DONT_CARE,"dont care"),C()(tl,mt.NICEST,"nice"),C()(tl,mt.FASTEST,"fast"),tl),gd=(Du={},C()(Du,mt.NEAREST,"nearest"),C()(Du,mt.LINEAR,"linear"),C()(Du,mt.LINEAR_MIPMAP_LINEAR,"mipmap"),C()(Du,mt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),C()(Du,mt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),C()(Du,mt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Du),yd=(rl={},C()(rl,mt.REPEAT,"repeat"),C()(rl,mt.CLAMP_TO_EDGE,"clamp"),C()(rl,mt.MIRRORED_REPEAT,"mirror"),rl),b0=(Xl={},C()(Xl,mt.NONE,"none"),C()(Xl,mt.BROWSER_DEFAULT_WEBGL,"browser"),Xl),_0=(Gs={},C()(Gs,mt.NEVER,"never"),C()(Gs,mt.ALWAYS,"always"),C()(Gs,mt.LESS,"less"),C()(Gs,mt.LEQUAL,"lequal"),C()(Gs,mt.GREATER,"greater"),C()(Gs,mt.GEQUAL,"gequal"),C()(Gs,mt.EQUAL,"equal"),C()(Gs,mt.NOTEQUAL,"notequal"),Gs),Ed=(Ac={},C()(Ac,mt.FUNC_ADD,"add"),C()(Ac,mt.MIN_EXT,"min"),C()(Ac,mt.MAX_EXT,"max"),C()(Ac,mt.FUNC_SUBTRACT,"subtract"),C()(Ac,mt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ac),Yl=(Ro={},C()(Ro,mt.ZERO,"zero"),C()(Ro,mt.ONE,"one"),C()(Ro,mt.SRC_COLOR,"src color"),C()(Ro,mt.ONE_MINUS_SRC_COLOR,"one minus src color"),C()(Ro,mt.SRC_ALPHA,"src alpha"),C()(Ro,mt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),C()(Ro,mt.DST_COLOR,"dst color"),C()(Ro,mt.ONE_MINUS_DST_COLOR,"one minus dst color"),C()(Ro,mt.DST_ALPHA,"dst alpha"),C()(Ro,mt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),C()(Ro,mt.CONSTANT_COLOR,"constant color"),C()(Ro,mt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),C()(Ro,mt.CONSTANT_ALPHA,"constant alpha"),C()(Ro,mt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),C()(Ro,mt.SRC_ALPHA_SATURATE,"src alpha saturate"),Ro),C0=(Hs={},C()(Hs,mt.NEVER,"never"),C()(Hs,mt.ALWAYS,"always"),C()(Hs,mt.LESS,"less"),C()(Hs,mt.LEQUAL,"lequal"),C()(Hs,mt.GREATER,"greater"),C()(Hs,mt.GEQUAL,"gequal"),C()(Hs,mt.EQUAL,"equal"),C()(Hs,mt.NOTEQUAL,"notequal"),Hs),xf=(Vs={},C()(Vs,mt.ZERO,"zero"),C()(Vs,mt.KEEP,"keep"),C()(Vs,mt.REPLACE,"replace"),C()(Vs,mt.INVERT,"invert"),C()(Vs,mt.INCR,"increment"),C()(Vs,mt.DECR,"decrement"),C()(Vs,mt.INCR_WRAP,"increment wrap"),C()(Vs,mt.DECR_WRAP,"decrement wrap"),Vs),O0=(Wl={},C()(Wl,mt.FRONT,"front"),C()(Wl,mt.BACK,"back"),Wl),P0=function(){function e(i,t){Ce()(this,e),C()(this,"buffer",void 0);var r=t.data,n=t.usage,u=t.type;this.buffer=i.buffer({data:r,usage:md[n||mt.STATIC_DRAW],type:Dh[u||mt.UNSIGNED_BYTE]})}return _t()(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var r=t.data,n=t.offset;this.buffer.subdata(r,n)}}]),e}(),M0=function(){function e(i,t){Ce()(this,e),C()(this,"elements",void 0);var r=t.data,n=t.usage,u=t.type,h=t.count;this.elements=i.elements({data:r,usage:md[n||mt.STATIC_DRAW],type:Dh[u||mt.UNSIGNED_BYTE],count:h})}return _t()(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var r=t.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),e}(),R0=function(){function e(i,t){Ce()(this,e),C()(this,"framebuffer",void 0);var r=t.width,n=t.height,u=t.color,h=t.colors,S=t.depth,x=t.stencil,N={width:r,height:n};Array.isArray(h)&&(N.colors=h.map(function(Y){return Y.get()})),u&&typeof u!="boolean"&&(N.color=u.get()),this.framebuffer=i.framebuffer(N)}return _t()(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var r=t.width,n=t.height;this.framebuffer.resize(r,n)}}]),e}(),I0=a("SHe9"),N0=a.n(I0),L0=a("GC0I"),w0=a.n(L0),D0=a("pNQ9"),F0=a.n(D0);function Sd(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function zs(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Sd(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var B0=function(){function e(i,t){Ce()(this,e),C()(this,"reGl",void 0),C()(this,"destroyed",!1),C()(this,"drawCommand",void 0),C()(this,"drawPickCommand",void 0),C()(this,"drawParams",void 0),C()(this,"options",void 0),C()(this,"uniforms",{}),this.reGl=i;var r=t.vs,n=t.fs,u=t.attributes,h=t.uniforms,S=t.primitive,x=t.count,N=t.elements,Y=t.depth,V=t.blend,_e=t.stencil,je=t.cull,yt=t.instances,kt={};this.options=t,h&&(this.uniforms=this.extractUniforms(h),Object.keys(h).forEach(function(Vr){kt[Vr]=i.prop(Vr)}));var nr={};Object.keys(u).forEach(function(Vr){nr[Vr]=u[Vr].get()});var gr={attributes:nr,frag:n,uniforms:kt,vert:r,blend:{},primitive:T0[S===void 0?mt.TRIANGLES:S]};yt&&(gr.instances=yt),x&&(gr.count=x),N&&(gr.elements=N.get()),this.initDepthDrawParams({depth:Y},gr),this.initBlendDrawParams({blend:V},gr),this.initStencilDrawParams({stencil:_e},gr),this.initCullDrawParams({cull:je},gr),this.drawCommand=i(gr);var yr=Ci()(gr);yr.blend=zs(zs({},yr.blend),{},{enable:!1}),yr.stencil=zs(zs({},yr.stencil),{},{enable:!1}),this.drawPickCommand=i(yr),this.drawParams=gr}return _t()(e,[{key:"addUniforms",value:function(t){this.uniforms=zs(zs({},this.uniforms),this.extractUniforms(t))}},{key:"draw",value:function(t,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var n=zs(zs({},this.uniforms),this.extractUniforms(t.uniforms||{})),u={};Object.keys(n).forEach(function(h){var S=N0()(n[h]);S==="boolean"||S==="number"||Array.isArray(n[h])||n[h].BYTES_PER_ELEMENT?u[h]=n[h]:u[h]=n[h].get()}),r?this.drawPickCommand(u):this.drawCommand(u)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(t){t.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(t,r){var n=t.depth;n&&(r.depth={enable:n.enable===void 0?!0:!!n.enable,mask:n.mask===void 0?!0:!!n.mask,func:_0[n.func||mt.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,r){var n=t.blend;if(n){var u=n.enable,h=n.func,S=n.equation,x=n.color,N=x===void 0?[0,0,0,0]:x;r.blend={enable:!!u,func:{srcRGB:Yl[h&&h.srcRGB||mt.SRC_ALPHA],srcAlpha:Yl[h&&h.srcAlpha||mt.SRC_ALPHA],dstRGB:Yl[h&&h.dstRGB||mt.ONE_MINUS_SRC_ALPHA],dstAlpha:Yl[h&&h.dstAlpha||mt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ed[S&&S.rgb||mt.FUNC_ADD],alpha:Ed[S&&S.alpha||mt.FUNC_ADD]},color:N}}}},{key:"initStencilDrawParams",value:function(t,r){var n=t.stencil;if(n){var u=n.enable,h=n.mask,S=h===void 0?-1:h,x=n.func,N=x===void 0?{cmp:mt.ALWAYS,ref:0,mask:-1}:x,Y=n.opFront,V=Y===void 0?{fail:mt.KEEP,zfail:mt.KEEP,zpass:mt.KEEP}:Y,_e=n.opBack,je=_e===void 0?{fail:mt.KEEP,zfail:mt.KEEP,zpass:mt.KEEP}:_e;r.stencil={enable:!!u,mask:S,func:zs(zs({},N),{},{cmp:C0[N.cmp]}),opFront:{fail:xf[V.fail],zfail:xf[V.zfail],zpass:xf[V.zpass]},opBack:{fail:xf[je.fail],zfail:xf[je.zfail],zpass:xf[je.zpass]}}}}},{key:"initCullDrawParams",value:function(t,r){var n=t.cull;if(n){var u=n.enable,h=n.face,S=h===void 0?mt.BACK:h;r.cull={enable:!!u,face:O0[S]}}}},{key:"extractUniforms",value:function(t){var r=this,n={};return Object.keys(t).forEach(function(u){r.extractUniformsRecursively(u,t[u],n,"")}),n}},{key:"extractUniformsRecursively",value:function(t,r,n,u){var h=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||w0()(r)||r===""||"resize"in r){n["".concat(u&&u+".").concat(t)]=r;return}F0()(r)&&Object.keys(r).forEach(function(S){h.extractUniformsRecursively(S,r[S],n,"".concat(u&&u+".").concat(t))}),Array.isArray(r)&&r.forEach(function(S,x){Object.keys(S).forEach(function(N){h.extractUniformsRecursively(N,S[N],n,"".concat(u&&u+".").concat(t,"[").concat(x,"]"))})})}}]),e}(),k0=function(){function e(i,t){Ce()(this,e),C()(this,"texture",void 0),C()(this,"width",void 0),C()(this,"height",void 0),C()(this,"isDistroy",!1);var r=t.data,n=t.type,u=n===void 0?mt.UNSIGNED_BYTE:n,h=t.width,S=t.height,x=t.flipY,N=x===void 0?!1:x,Y=t.format,V=Y===void 0?mt.RGBA:Y,_e=t.mipmap,je=_e===void 0?!1:_e,yt=t.wrapS,kt=yt===void 0?mt.CLAMP_TO_EDGE:yt,nr=t.wrapT,gr=nr===void 0?mt.CLAMP_TO_EDGE:nr,yr=t.aniso,Vr=yr===void 0?0:yr,hn=t.alignment,Dn=hn===void 0?1:hn,Rn=t.premultiplyAlpha,en=Rn===void 0?!1:Rn,Ln=t.mag,ii=Ln===void 0?mt.NEAREST:Ln,oi=t.min,Sn=oi===void 0?mt.NEAREST:oi,fi=t.colorSpace,_i=fi===void 0?mt.BROWSER_DEFAULT_WEBGL:fi,bo=t.x,ms=bo===void 0?0:bo,So=t.y,Is=So===void 0?0:So,gs=t.copy,es=gs===void 0?!1:gs;this.width=h,this.height=S;var Bf={width:h,height:S,type:Dh[u],format:A0[V],wrapS:yd[kt],wrapT:yd[gr],mag:gd[ii],min:gd[Sn],alignment:Dn,flipY:N,colorSpace:b0[_i],premultiplyAlpha:en,aniso:Vr,x:ms,y:Is,copy:es};r&&(Bf.data=r),typeof je=="number"?Bf.mipmap=x0[je]:typeof je=="boolean"&&(Bf.mipmap=je),this.texture=i.texture(Bf)}return _t()(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(t)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var r=t.width,n=t.height;this.texture.resize(r,n),this.width=r,this.height=n}},{key:"destroy",value:function(){this.isDistroy||this.texture.destroy(),this.isDistroy=!0}}]),e}(),Td,Ad,U0=(Td=Object(cr.injectable)(),Td(Ad=function(){function e(){var i=this;Ce()(this,e),C()(this,"extensionObject",void 0),C()(this,"gl",void 0),C()(this,"$container",void 0),C()(this,"canvas",void 0),C()(this,"width",void 0),C()(this,"height",void 0),C()(this,"isDirty",void 0),C()(this,"createModel",function(t){return new B0(i.gl,t)}),C()(this,"createAttribute",function(t){return new qo(i.gl,t)}),C()(this,"createBuffer",function(t){return new P0(i.gl,t)}),C()(this,"createElements",function(t){return new M0(i.gl,t)}),C()(this,"createTexture2D",function(t){return new k0(i.gl,t)}),C()(this,"createFramebuffer",function(t){return new R0(i.gl,t)}),C()(this,"useFramebuffer",function(t,r){i.gl({framebuffer:t?t.get():null})(r)}),C()(this,"clear",function(t){var r=t.color,n=t.depth,u=t.stencil,h=t.framebuffer,S=h===void 0?null:h,x={color:r,depth:n,stencil:u};x.framebuffer=S===null?S:S.get(),i.gl.clear(x)}),C()(this,"viewport",function(t){var r=t.x,n=t.y,u=t.width,h=t.height;i.gl._gl.viewport(r,n,u,h),i.width=u,i.height=h,i.gl._refresh()}),C()(this,"readPixels",function(t){var r=t.framebuffer,n=t.x,u=t.y,h=t.width,S=t.height,x={x:n,y:u,width:h,height:S};return r&&(x.framebuffer=r.get()),i.gl.read(x)}),C()(this,"getViewportSize",function(){return{width:i.gl._gl.drawingBufferWidth,height:i.gl._gl.drawingBufferHeight}}),C()(this,"getContainer",function(){if(me.s)return i.canvas;var t;return(t=i.canvas)===null||t===void 0?void 0:t.parentElement}),C()(this,"getCanvas",function(){return i.canvas}),C()(this,"getGLContext",function(){return i.gl._gl}),C()(this,"destroy",function(){i.gl.destroy()})}return _t()(e,[{key:"init",value:function(){var i=so()(Yi.a.mark(function r(n,u){var h=this;return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return this.canvas=n,x.next=3,new Promise(function(N,Y){zl()({canvas:h.canvas,attributes:{alpha:!0,antialias:u.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:u.preserveDrawingBuffer,stencil:u.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(_e,je){(_e||!je)&&Y(_e),N(je)}})});case 3:this.gl=x.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return x.stop()}},r,this)}));function t(r,n){return i.apply(this,arguments)}return t}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(t){return!!this.getGLContext().getExtension(t)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var t=this.getGLContext();t.disable(t.CULL_FACE)}},{key:"setDirty",value:function(t){this.isDirty=t}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||Ad);function xd(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function bd(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?xd(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var j0=function(){function e(i){Ce()(this,e),C()(this,"sceneService",void 0),C()(this,"mapService",void 0),C()(this,"controlService",void 0),C()(this,"layerService",void 0),C()(this,"iconService",void 0),C()(this,"markerService",void 0),C()(this,"popupService",void 0),C()(this,"fontService",void 0),C()(this,"interactionService",void 0),C()(this,"container",void 0);var t=i.id,r=i.map,n=i.canvas,u=i.hasBaseMap,h=fr();this.container=h,r.setContainer(h,t,n,u),h.bind(Gt.IRendererService).to(U0).inSingletonScope(),this.sceneService=h.get(Gt.ISceneService),this.mapService=h.get(Gt.IMapService),this.iconService=h.get(Gt.IIconService),this.fontService=h.get(Gt.IFontService),this.controlService=h.get(Gt.IControlService),this.layerService=h.get(Gt.ILayerService),this.markerService=h.get(Gt.IMarkerService),this.interactionService=h.get(Gt.IInteractionService),this.popupService=h.get(Gt.IPopupService),me.s?this.sceneService.initMiniScene(i):(this.initComponent(t),this.sceneService.init(i),this.initControl())}return _t()(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(t){return this.sceneService.exportPng(t)}},{key:"exportMap",value:function(t){return this.sceneService.exportPng(t)}},{key:"registerRenderService",value:function(t){var r=this;if(this.sceneService.loaded){var n=new t(this);n.init()}else this.on("loaded",function(){var u=new t(r);u.init()})}},{key:"setBgColor",value:function(t){this.mapService.setBgColor(t)}},{key:"addLayer",value:function(t){var r=ar(this.container);t.setContainer(r,this.container),this.sceneService.addLayer(t)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(t,r){this.layerService.remove(t,r)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(t){this.layerService.setEnableRender(t)}},{key:"addIconFont",value:function(t,r){this.fontService.addIconFont(t,r)}},{key:"addIconFonts",value:function(t){var r=this;t.forEach(function(n){var u=pi()(n,2),h=u[0],S=u[1];r.fontService.addIconFont(h,S)})}},{key:"addFontFace",value:function(t,r){this.sceneService.addFontFace(t,r)}},{key:"addImage",value:function(t,r){me.s?this.iconService.addImageMini(t,r,this.sceneService):this.iconService.addImage(t,r)}},{key:"hasImage",value:function(t){return this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"on",value:function(t,r){we.indexOf(t)===-1?this.mapService.on(t,r):this.sceneService.on(t,r)}},{key:"once",value:function(t,r){we.indexOf(t)===-1?this.mapService.once(t,r):this.sceneService.once(t,r)}},{key:"off",value:function(t,r){we.indexOf(t)===-1?this.mapService.off(t,r):this.sceneService.off(t,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(t){return this.mapService.getCenter(t)}},{key:"setCenter",value:function(t,r){return this.mapService.setCenter(t,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t,r){this.mapService.panBy(t,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,r){var n=this.sceneService.getSceneConfig(),u=n.fitBoundsOptions,h=n.animate;this.mapService.fitBounds(t,r||bd(bd({},u),{},{animate:h}))}},{key:"setZoomAndCenter",value:function(t,r){this.mapService.setZoomAndCenter(t,r)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,r){this.container.bind(Gt.IPostProcessingPass).to(t).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(t){this.controlService.init({container:me.b.getContainer(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),r=t.logoVisible,n=t.logoPosition;r&&this.addControl(new xe({position:n}))}}]),e}(),G0=a("PWyJ"),Do=a.n(G0),_d,Cd,Od,Fh,Pd;function Md(e){return e.map(function(i){return typeof i=="string"&&(i=[i,{}]),i})}var H0=(_d=Object(cr.injectable)(),Cd=Object(cr.inject)(Gt.IGlobalConfigService),_d(Od=(Fh=function(){function e(){Ce()(this,e),Yr()(this,"configService",Pd,this),C()(this,"enabled",void 0)}return _t()(e,[{key:"apply",value:function(t,r){var n=this,u=r.rendererService,h=r.postProcessingPassFactory,S=r.normalPassFactory;t.hooks.init.tap("MultiPassRendererPlugin",function(){var x=t.getLayerConfig(),N=x.enableMultiPassRenderer,Y=x.passes,V=Y===void 0?[]:Y;n.enabled=!!N&&t.getLayerConfig().enableMultiPassRenderer!==!1,n.enabled&&(t.multiPassRenderer=n.createMultiPassRenderer(t,V,h,S),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(n.enabled){var x=u.getViewportSize(),N=x.width,Y=x.height;t.multiPassRenderer.resize(N,Y)}})}},{key:"createMultiPassRenderer",value:function(t,r,n,u){var h=t.multiPassRenderer,S=t.getLayerConfig(),x=S.enablePicking,N=S.enableTAA;return N?h.add(u("taa")):h.add(u("render")),Md(r).forEach(function(Y){var V=pi()(Y,2),_e=V[0],je=V[1];h.add(n(_e),je)}),h.add(n("copy")),h}}]),e}(),Pd=In()(Fh.prototype,"configService",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fh))||Od),Fu,Rd=(Fu={},C()(Fu,Sa.additive,{enable:!0,func:{srcRGB:mt.ONE,dstRGB:mt.ONE,srcAlpha:1,dstAlpha:1}}),C()(Fu,Sa.none,{enable:!1}),C()(Fu,Sa.normal,{enable:!0,func:{srcRGB:mt.SRC_ALPHA,dstRGB:mt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),C()(Fu,Sa.subtractive,{enable:!0,func:{srcRGB:mt.ONE,dstRGB:mt.ONE,srcAlpha:mt.ZERO,dstAlpha:mt.ONE_MINUS_SRC_COLOR},equation:{rgb:mt.FUNC_SUBTRACT,alpha:mt.FUNC_SUBTRACT}}),C()(Fu,Sa.max,{enable:!0,func:{srcRGB:mt.ONE,dstRGB:mt.ONE},equation:{rgb:mt.MAX_EXT}}),C()(Fu,Sa.min,{enable:!0,func:{srcRGB:mt.ONE,dstRGB:mt.ONE},equation:{rgb:mt.MIN_EXT}}),Fu),V0=a("ISzh"),Uo=a.n(V0),z0=a("eoSM"),xc=a.n(z0),VE=1024;function jo(e,i,t,r,n){i.updateStyleAttribute(e,t,r,n)}function X0(e,i){e.opacity&&Zl("opacity",i,e.opacity),e.strokeWidth&&Zl("strokeWidth",i,e.strokeWidth),e.strokeOpacity&&Zl("strokeOpacity",i,e.strokeOpacity),e.stroke&&W0("stroke",i,e.stroke),e.offsets&&Id("offsets",i,e.offsets),e.textOffset&&Id("textOffset",i,e.textOffset),e.thetaOffset&&Zl("thetaOffset",i,e.thetaOffset)}function Zl(e,i,t){Ui()(t)?jo(e,i,t,function(r){return r}):Uo()(t)?jo(e,i,[t],void 0):xc()(t)&&t.length===2?Ui()(t[0])&&Ti()(t[1])||Ui()(t[0])&&xc()(t[1])&&Uo()(t[1][0])&&Uo()(t[1][1])?jo(e,i,t[0],t[1]):jo(e,i,[1],void 0):jo(e,i,[1],void 0)}function Id(e,i,t){Ui()(t)?jo(e,i,t,function(r){return r}):xc()(t)&&t.length===2&&Ui()(t[0])&&Ti()(t[1])?jo(e,i,t[0],t[1]):xc()(t)&&t.length===2&&Uo()(t[0])&&Uo()(t[1])?jo(e,i,t,void 0):jo(e,i,[0,0],void 0)}function W0(e,i,t){Ui()(t)?jo(e,i,t,void 0):xc()(t)&&t.length===2&&(Ui()(t[0])&&Ti()(t[1])||Ui()(t[0])&&xc()(t[1])&&t[1].length>0)?jo(e,i,t[0],t[1]):jo(e,i,"#fff",void 0)}var Y0=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function Z0(e,i,t){typeof i=="string"&&typeof t=="string"&&i!==t&&Y0.map(function(r){r.includes(i)&&r.includes(t)&&(e.dataState.dataSourceNeedUpdate=!0)})}var K0=["passes"],Q0=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber"],Nd,Bh,Ld;function $0(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=J0(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function J0(e,i){if(!!e){if(typeof e=="string")return wd(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wd(e,i)}}function wd(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}function Dd(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Fo(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Dd(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function q0(e){var i=em();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function em(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Fd=0,tm=(Nd=Er(Gt.IGlobalConfigService),Bh=function(e){An()(t,e);var i=q0(t);function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ce()(this,t),r=i.call(this),C()(Ve()(r),"id","".concat(Fd++)),C()(Ve()(r),"name","".concat(Fd)),C()(Ve()(r),"type",void 0),C()(Ve()(r),"visible",!0),C()(Ve()(r),"zIndex",0),C()(Ve()(r),"minZoom",void 0),C()(Ve()(r),"maxZoom",void 0),C()(Ve()(r),"inited",!1),C()(Ve()(r),"layerModelNeedUpdate",!1),C()(Ve()(r),"pickedFeatureID",null),C()(Ve()(r),"selectedFeatureID",null),C()(Ve()(r),"styleNeedUpdate",!1),C()(Ve()(r),"rendering",void 0),C()(Ve()(r),"clusterZoom",0),C()(Ve()(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),C()(Ve()(r),"hooks",{init:new qn.b,afterInit:new qn.b,beforeRender:new qn.b,beforeRenderData:new qn.d,afterRender:new qn.c,beforePickingEncode:new qn.c,afterPickingEncode:new qn.c,beforeHighlight:new qn.c(["pickedColor"]),afterHighlight:new qn.c,beforeSelect:new qn.c(["pickedColor"]),afterSelect:new qn.c,beforeDestroy:new qn.c,afterDestroy:new qn.c}),C()(Ve()(r),"models",[]),C()(Ve()(r),"multiPassRenderer",void 0),C()(Ve()(r),"plugins",void 0),C()(Ve()(r),"sourceOption",void 0),C()(Ve()(r),"layerModel",void 0),C()(Ve()(r),"sceneContainer",void 0),C()(Ve()(r),"layerChildren",[]),Yr()(Ve()(r),"configService",Ld,Ve()(r)),C()(Ve()(r),"shaderModuleService",void 0),C()(Ve()(r),"cameraService",void 0),C()(Ve()(r),"coordinateService",void 0),C()(Ve()(r),"iconService",void 0),C()(Ve()(r),"fontService",void 0),C()(Ve()(r),"pickingService",void 0),C()(Ve()(r),"rendererService",void 0),C()(Ve()(r),"layerService",void 0),C()(Ve()(r),"interactionService",void 0),C()(Ve()(r),"mapService",void 0),C()(Ve()(r),"styleAttributeService",void 0),C()(Ve()(r),"layerSource",void 0),C()(Ve()(r),"postProcessingPassFactory",void 0),C()(Ve()(r),"normalPassFactory",void 0),C()(Ve()(r),"animateOptions",{enable:!1}),C()(Ve()(r),"container",void 0),C()(Ve()(r),"encodedData",void 0),C()(Ve()(r),"configSchema",void 0),C()(Ve()(r),"currentPickId",null),C()(Ve()(r),"rawConfig",void 0),C()(Ve()(r),"needUpdateConfig",void 0),C()(Ve()(r),"pendingStyleAttributes",[]),C()(Ve()(r),"scaleOptions",{}),C()(Ve()(r),"animateStartTime",void 0),C()(Ve()(r),"aniamateStatus",!1),C()(Ve()(r),"bottomColor","rgba(0, 0, 0, 0)"),C()(Ve()(r),"isDestroied",!1),C()(Ve()(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var u=r.getLayerConfig(),h=u.autoFit,S=u.fitBoundsOptions;h&&r.fitBounds(S),r.emit("dataUpdate"),r.reRender()}),r.name=n.name||r.id,r.zIndex=n.zIndex||0,r.rawConfig=n,r}return _t()(t,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(n){if(!this.inited)this.needUpdateConfig=Fo(Fo({},this.needUpdateConfig),n);else{var u=this.container.get(Gt.SceneID);X0(n,this),this.configService.setLayerConfig(u,this.id,Fo(Fo(Fo({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),n)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(n,u){this.container=n,this.sceneContainer=u}},{key:"getContainer",value:function(){return this.container}},{key:"setBottomColor",value:function(n){this.bottomColor=n}},{key:"getBottomColor",value:function(){return this.bottomColor}},{key:"addPlugin",value:function(n){return this.plugins.push(n),this}},{key:"init",value:function(){var n=this,u=this.container.get(Gt.SceneID);this.configService.setLayerConfig(u,this.id,this.rawConfig),this.iconService=this.container.get(Gt.IIconService),this.fontService=this.container.get(Gt.IFontService),this.rendererService=this.container.get(Gt.IRendererService),this.layerService=this.container.get(Gt.ILayerService),this.interactionService=this.container.get(Gt.IInteractionService),this.pickingService=this.container.get(Gt.IPickingService),this.mapService=this.container.get(Gt.IMapService),this.cameraService=this.container.get(Gt.ICameraService),this.coordinateService=this.container.get(Gt.ICoordinateSystemService),this.shaderModuleService=this.container.get(Gt.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Gt.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Gt.IFactoryNormalPass),this.styleAttributeService=this.container.get(Gt.IStyleAttributeService),this.multiPassRenderer=this.container.get(Gt.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(N){var Y=N.attributeName,V=N.attributeField,_e=N.attributeValues,je=N.updateOptions;n.styleAttributeService.updateStyleAttribute(Y,{scale:Fo({field:V},n.splitValuesAndCallbackInAttribute(_e,n.getLayerConfig()[Y]))},je)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Gt.ILayerPlugin);var h=$0(this.plugins),S;try{for(h.s();!(S=h.n()).done;){var x=S.value;x.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(N){h.e(N)}finally{h.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(Fo(Fo({},this.getDefaultConfig()),this.rawConfig));var n=this.getLayerConfig(),u=n.animateOption;u!=null&&u.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(n,u,h){return this.updateStyleAttribute("color",n,u,h),this}},{key:"texture",value:function(n,u,h){return this.updateStyleAttribute("texture",n,u,h),this}},{key:"rotate",value:function(n,u,h){return this.updateStyleAttribute("rotate",n,u,h),this}},{key:"size",value:function(n,u,h){return this.updateStyleAttribute("size",n,u,h),this}},{key:"filter",value:function(n,u,h){return this.updateStyleAttribute("filter",n,u,h),this}},{key:"shape",value:function(n,u,h){var S,x,N,Y=(S=this.styleAttributeService)===null||S===void 0||(x=S.getLayerStyleAttribute("shape"))===null||x===void 0||(N=x.scale)===null||N===void 0?void 0:N.field,V=n;return this.updateStyleAttribute("shape",n,u,h),Z0(this,Y,V),this}},{key:"label",value:function(n,u,h){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:n,attributeValues:u,updateOptions:h}),this}},{key:"animate",value:function(n){var u={};return Do()(n)?(u.enable=!0,u=Fo(Fo({},u),n)):u.enable=n,this.updateLayerConfig({animateOption:u}),this}},{key:"source",value:function(n,u){return n!=null&&n.data?(this.setSource(n),this):(this.sourceOption={data:n,options:u},this.clusterZoom=0,this)}},{key:"setData",value:function(n,u){var h=this;return this.inited?this.layerSource.setData(n,u):this.on("inited",function(){h.layerSource.setData(n,u)}),this}},{key:"style",value:function(n){var u=this,h=n.passes,S=yu()(n,K0);return h&&Md(h).forEach(function(x){var N=u.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(x[0]);N&&N.updateOptions(x[1])}),this.rawConfig=Fo(Fo({},this.rawConfig),S),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(n,u){return Do()(n)?this.scaleOptions=Fo(Fo({},this.scaleOptions),n):this.scaleOptions[n]=u,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.getEncodedData().length!==0&&this.renderModels(),this}},{key:"renderMultiPass",value:function(){var r=so()(Yi.a.mark(function u(){return Yi.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.getEncodedData().length===0){S.next=7;break}if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){S.next=6;break}return S.next=4,this.multiPassRenderer.render();case 4:S.next=7;break;case 6:this.multiPassRenderer?this.renderModels():this.renderModels();case 7:case"end":return S.stop()}},u,this)}));function n(){return r.apply(this,arguments)}return n}()},{key:"active",value:function(n){var u={};return u.enableHighlight=Do()(n)?!0:n,Do()(n)?(u.enableHighlight=!0,n.color&&(u.highlightColor=n.color),n.mix&&(u.activeMix=n.mix)):u.enableHighlight=!!n,this.updateLayerConfig(u),this}},{key:"setActive",value:function(n,u){var h=this;if(Do()(n)){var S=n.x,x=S===void 0?0:S,N=n.y,Y=N===void 0?0:N;this.updateLayerConfig({highlightColor:Do()(u)?u.color:this.getLayerConfig().highlightColor,activeMix:Do()(u)?u.mix:this.getLayerConfig().activeMix}),this.pick({x,y:Y})}else this.updateLayerConfig({pickedFeatureID:n,highlightColor:Do()(u)?u.color:this.getLayerConfig().highlightColor,activeMix:Do()(u)?u.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(Object(me.m)(n)).then(function(){setTimeout(function(){h.reRender()},1)})}},{key:"select",value:function(n){var u={};return u.enableSelect=Do()(n)?!0:n,Do()(n)?(u.enableSelect=!0,n.color&&(u.selectColor=n.color),n.mix&&(u.selectMix=n.mix)):u.enableSelect=!!n,this.updateLayerConfig(u),this}},{key:"setSelect",value:function(n,u){var h=this;if(Do()(n)){var S=n.x,x=S===void 0?0:S,N=n.y,Y=N===void 0?0:N;this.updateLayerConfig({selectColor:Do()(u)?u.color:this.getLayerConfig().selectColor,selectMix:Do()(u)?u.mix:this.getLayerConfig().selectMix}),this.pick({x,y:Y})}else this.updateLayerConfig({pickedFeatureID:n,selectColor:Do()(u)?u.color:this.getLayerConfig().selectColor,selectMix:Do()(u)?u.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Object(me.m)(n)).then(function(){setTimeout(function(){h.reRender()},1)})}},{key:"setBlend",value:function(n){this.updateLayerConfig({blend:n}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(n){return this.zIndex=n,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(n){this.currentPickId=n}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(n){this.selectedFeatureID=n}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var n=this.mapService.getZoom(),u=this.getLayerConfig(),h=u.visible,S=u.minZoom,x=S===void 0?-Infinity:S,N=u.maxZoom,Y=N===void 0?Infinity:N;return!!h&&n>=x&&n<=Y}},{key:"setMinZoom",value:function(n){return this.updateLayerConfig({minZoom:n}),this}},{key:"getMinZoom",value:function(){var n=this.getLayerConfig(),u=n.minZoom;return u}},{key:"getMaxZoom",value:function(){var n=this.getLayerConfig(),u=n.maxZoom;return u}},{key:"get",value:function(n){var u=this.getLayerConfig();return u[n]}},{key:"setMaxZoom",value:function(n){return this.updateLayerConfig({maxZoom:n}),this}},{key:"fitBounds",value:function(n){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var u=this.getSource(),h=u.extent,S=h.some(function(x){return Math.abs(x)===Infinity});return S?this:(this.mapService.fitBounds([[h[0],h[1]],[h[2],h[3]]],n),this)}},{key:"destroy",value:function(){this.isDestroied||(this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.models=[],this.layerService.cleanRemove(this),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroied=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(n){return n.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(n){return n.needRescale||n.needRemapping||n.needRegenerateVertices}).length}},{key:"setSource",value:function(n){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=n,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var u=this.mapService.getZoom();this.layerSource.updateClusterData(u)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(n){this.encodedData=n}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(n){return this.styleAttributeService.getLayerAttributeScale(n)}},{key:"getLegendItems",value:function(n){var u=this.styleAttributeService.getLayerAttributeScale(n);if(u){if(u.ticks){var h=u.ticks().map(function(N){return C()({value:N},n,u(N))});return h}else if(u.invertExtent){var S=u.range().map(function(N){return C()({value:u.invertExtent(N)},n,N)});return S}else if(u!=null&&u.domain){var x=u.domain().map(function(N){return{value:N||"\u65E0",color:u(N)}});return x}}else return[]}},{key:"pick",value:function(n){var u=n.x,h=n.y;this.interactionService.triggerHover({x:u,y:h})}},{key:"boxSelect",value:function(n,u){this.pickingService.boxPickLayer(this,n,u)}},{key:"buildLayerModel",value:function(n){var u=n.moduleName,h=n.vertexShader,S=n.fragmentShader,x=n.triangulation,N=n.segmentNumber,Y=yu()(n,Q0);this.shaderModuleService.registerModule(u,{vs:h,fs:S});var V=this.shaderModuleService.getModule(u),_e=V.vs,je=V.fs,yt=V.uniforms,kt=this.rendererService.createModel,nr=this.styleAttributeService.createAttributesAndIndices(this.encodedData,x,N),gr=nr.attributes,yr=nr.elements;return kt(Fo({attributes:gr,uniforms:yt,fs:je,vs:_e,elements:yr,blend:Rd[Sa.normal]},Y))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(n){var u=this.getLayerConfig(),h=u.enableHighlight,S=h===void 0?!0:h,x=u.enableSelect,N=x===void 0?!0:x,Y=this.eventNames().indexOf(n)!==-1||this.eventNames().indexOf("un"+n)!==-1;return(n==="click"||n==="dblclick")&&N&&(Y=!0),n==="mousemove"&&(S||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(Y=!0),this.isVisible()&&Y}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderMulPass",value:function(){var r=so()(Yi.a.mark(function u(h){return Yi.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,h.render();case 2:case"end":return x.stop()}},u)}));function n(u){return r.apply(this,arguments)}return n}()},{key:"renderModels",value:function(n){var u=this;return this.getEncodedData().length>0&&(this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(h){h.draw({uniforms:u.layerModel.getUninforms()},n)})),this}},{key:"updateStyleAttribute",value:function(n,u,h,S){this.inited?this.styleAttributeService.updateStyleAttribute(n,{scale:Fo({field:u},this.splitValuesAndCallbackInAttribute(h,this.getLayerConfig()[u]))},S):this.pendingStyleAttributes.push({attributeName:n,attributeField:u,attributeValues:h,updateOptions:S})}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(n){console.warn("empty fn")}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&(this.layerService.updateLayerRenderList(),this.layerService.renderLayers())}},{key:"splitValuesAndCallbackInAttribute",value:function(n,u){return{values:Ti()(n)?void 0:n||u,callback:Ti()(n)?n:void 0}}}]),t}(Wi.EventEmitter),Ld=In()(Bh.prototype,"configService",[Nd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bh),rm=a("rDMZ"),bf=a.n(rm),_f=a("P5yM"),Bd,kh,kd;function nm(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=im(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(N){throw N},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,S;return{s:function(){t=t.call(e)},n:function(){var N=t.next();return u=N.done,N},e:function(N){h=!0,S=N},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw S}}}}function im(e,i){if(!!e){if(typeof e=="string")return Ud(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ud(e,i)}}function Ud(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}var Kl=(Bd=Er(Gt.IGlobalConfigService),kh=function(){function e(i){Ce()(this,e),C()(this,"triangulation",void 0),C()(this,"createTexture2D",void 0),C()(this,"layer",void 0),C()(this,"dataTexture",void 0),C()(this,"DATA_TEXTURE_WIDTH",void 0),C()(this,"rowCount",void 0),C()(this,"cacheStyleProperties",void 0),C()(this,"cellLength",void 0),C()(this,"cellProperties",void 0),C()(this,"cellTypeLayout",void 0),C()(this,"stylePropertyesExist",void 0),C()(this,"dataTextureTest",void 0),Yr()(this,"configService",kd,this),C()(this,"shaderModuleService",void 0),C()(this,"rendererService",void 0),C()(this,"iconService",void 0),C()(this,"fontService",void 0),C()(this,"styleAttributeService",void 0),C()(this,"mapService",void 0),C()(this,"cameraService",void 0),C()(this,"layerService",void 0),this.layer=i,this.rendererService=i.getContainer().get(Gt.IRendererService),this.shaderModuleService=i.getContainer().get(Gt.IShaderModuleService),this.styleAttributeService=i.getContainer().get(Gt.IStyleAttributeService),this.mapService=i.getContainer().get(Gt.IMapService),this.iconService=i.getContainer().get(Gt.IIconService),this.fontService=i.getContainer().get(Gt.IFontService),this.cameraService=i.getContainer().get(Gt.ICameraService),this.layerService=i.getContainer().get(Gt.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var t=this.rendererService.createTexture2D;this.createTexture2D=t,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8ClampedArray(4),mag:mt.NEAREST,min:mt.NEAREST,width:1,height:1}))}return _t()(e,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertyesExist.hasOpacity,this.stylePropertyesExist.hasStrokeOpacity,this.stylePropertyesExist.hasStrokeWidth,this.stylePropertyesExist.hasStroke,this.stylePropertyesExist.hasOffsets,this.stylePropertyesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(t){var r=!1;return bf()(t.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=t.thetaOffset),bf()(t.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=t.opacity),bf()(t.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=t.strokeOpacity),bf()(t.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=t.strokeWidth),bf()(t.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=t.stroke),bf()(t.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=t.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(t){this.clearLastCalRes(),t.opacity!==void 0&&!Uo()(t.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertyesExist.hasOpacity=1,this.cellLength+=1),t.strokeOpacity!==void 0&&!Uo()(t.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertyesExist.hasStrokeOpacity=1,this.cellLength+=1),t.strokeWidth!==void 0&&!Uo()(t.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertyesExist.hasStrokeWidth=1,this.cellLength+=1),t.stroke!==void 0&&!this.isStaticColor(t.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertyesExist.hasStroke=1,this.cellLength+=4),t.offsets!==void 0&&!this.isOffsetStatic(t.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertyesExist.hasOffsets=1,this.cellLength+=2),t.thetaOffset!==void 0&&!Uo()(t.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertyesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(t){return Ui()(t)?!!Object(_f.a)(t):!1}},{key:"getStrokeColor",value:function(t){if(this.isStaticColor(t)){var r=Object(me.w)(t);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(t){return!!(xc()(t)&&t.length===2&&Uo()(t[0])&&Uo()(t[1]))}},{key:"patchMod",value:function(t,r){for(var n=0;n<r;n++)t.push(-1)}},{key:"patchData",value:function(t,r,n){var u=nm(n),h;try{for(u.s();!(h=u.n()).done;){var S=h.value,x=S.attr,N=S.count,Y=r[x];Y!==void 0?x==="stroke"?t.push.apply(t,rt()(Object(me.w)(Y))):x==="offsets"?this.isOffsetStatic(Y)?t.push(-Y[0],Y[1]):t.push(0,0):t.push(Uo()(Y)?Y:1):this.patchMod(t,N)}}catch(V){u.e(V)}finally{u.f()}}},{key:"calDataFrame",value:function(t,r,n){for(var u=r.length,h=Math.ceil(u*t/this.DATA_TEXTURE_WIDTH),S=h*this.DATA_TEXTURE_WIDTH,x=[],N=0;N<u;N++){var Y=r[N];this.patchData(x,Y,n)}for(var V=x.length;V<S;V++)x.push(-1);return{data:x,width:this.DATA_TEXTURE_WIDTH,height:h}}},{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),r=t.blend,n=r===void 0?"normal":r;return Rd[Sa[n]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){var t=this.layer.getLayerConfig(),r=t.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),e}(),kd=In()(kh.prototype,"configService",[Bd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kh),am=a("BfLh"),Xs=a.n(am),Uh=100,jd=36,om=40;function Gd(e){return e/180*Math.acos(-1)}function sm(e){var i=Gd(e[0])+Math.PI/2,t=Gd(e[1]),r=Uh+Math.random()*.4,n=r*Math.cos(t)*Math.cos(i),u=r*Math.cos(t)*Math.sin(i),h=r*Math.sin(t);return[u,h,n]}function Hd(e,i){var t=Rr.a.create(),r=Rr.a.create(),n=Rr.c.fromValues(0,1,0),u=Rr.c.fromValues(0,0,0);i=i||{},e=typeof e!="undefined"?e:1;for(var h=typeof i.segments!="undefined"?i.segments:32,S=2+h,x=2*S,N=[],Y=[],V=[],_e=[],je=[],yt=[],kt=0;kt<=S;kt++){for(var nr=kt/S,gr=nr*Math.PI,yr=0;yr<=x;yr++){var Vr=yr/x,hn=Vr*Math.PI*2;Rr.a.identity(r),Rr.a.rotateZ(r,r,-gr),Rr.a.identity(t),Rr.a.rotateY(t,t,hn),Rr.c.transformMat4(u,n,r),Rr.c.transformMat4(u,u,t),Rr.c.scale(u,u,-e),V.push(u.slice()),_e.push.apply(_e,rt()(u.slice())),Rr.c.normalize(u,u),je.push.apply(je,rt()(u.slice())),yt.push([Vr,1-nr]),_e.push(Vr,1-nr)}if(kt>0)for(var Dn=V.length,Rn=Dn-2*(x+1);Rn+x+2<Dn;Rn++)N.push([Rn,Rn+1,Rn+x+1]),Y.push(Rn,Rn+1,Rn+x+1),N.push([Rn+x+1,Rn+1,Rn+x+2]),Y.push(Rn+x+1,Rn+1,Rn+x+2)}return{cells:N,positions:V,uvs:yt,positionsArr:_e,indicesArr:Y,normalArr:je}}var Ql=Rr.b.create(),zE=Rr.b.create(),Eo=Rr.b.create(),Bu=Rr.b.create(),Cf=Rr.b.create();function jh(e,i,t,r,n){Rr.b.add(e,t,r),Rr.b.normalize(e,e),i=Rr.b.fromValues(-e[1],e[0]);var u=Rr.b.fromValues(-t[1],t[0]);return[n/Rr.b.dot(i,u),i]}function ku(e,i){return Rr.b.set(e,-i[1],i[0])}function Of(e,i,t){return Rr.b.sub(e,i,t),Rr.b.normalize(e,e),e}function Gh(e,i){return e[0]===i[0]&&e[1]===i[1]}function XE(e){for(var i=new Map,t=0;t<e.length;t++){var r=e[0].toString()+"-"+e[1].toString();i.get(r)?(e.splice(t,1),t++):i.set(r,r)}return e}var Vd=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ce()(this,e),C()(this,"complex",void 0),C()(this,"join",void 0),C()(this,"cap",void 0),C()(this,"miterLimit",void 0),C()(this,"thickness",void 0),C()(this,"normal",void 0),C()(this,"lastFlip",-1),C()(this,"miter",Rr.b.fromValues(0,0)),C()(this,"started",!1),C()(this,"dash",!1),C()(this,"totalDistance",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return _t()(e,[{key:"extrude_gaode2",value:function(t,r){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=t.length,h=n.startIndex,S=1;S<u;S++){var x,N,Y,V=t[S-1];V.push((x=r[S-1][2])!==null&&x!==void 0?x:0);var _e=r[S-1],je=t[S];je.push((N=r[S][2])!==null&&N!==void 0?N:0);var yt=r[S],kt=S<t.length-1?[].concat(rt()(t[S+1]),[(Y=r[S+1][2])!==null&&Y!==void 0?Y:0]):null,nr=S<r.length-1?r[S+1]:null,gr=this.segment_gaode2(n,h,V,je,kt,_e,yt,nr);h+=gr}if(this.dash)for(var yr=0;yr<n.positions.length/6;yr++)n.positions[yr*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude_gaode2",value:function(t,r){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=t.length,h=n.startIndex,S=1;S<u;S++){var x,N,Y,V=t[S-1];V.push((x=r[S-1][2])!==null&&x!==void 0?x:0);var _e=r[S-1],je=t[S];je.push((N=r[S][2])!==null&&N!==void 0?N:0);var yt=r[S],kt=S<t.length-1?[].concat(rt()(t[S+1]),[(Y=r[S+1][2])!==null&&Y!==void 0?Y:0]):null,nr=S<r.length-1?r[S+1]:null,gr=this.simpleSegment(n,h,V,je,kt,_e,yt,nr);h+=gr}if(this.dash)for(var yr=0;yr<n.positions.length/6;yr++)n.positions[yr*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,u=r.startIndex,h=1;h<n;h++){var S=t[h-1],x=t[h],N=h<t.length-1?t[h+1]:null,Y=this.segment(r,u,S,x,N);u+=Y}if(this.dash)for(var V=0;V<r.positions.length/6;V++)r.positions[V*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude",value:function(t){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,u=r.startIndex,h=1;h<n;h++){var S=t[h-1],x=t[h],N=h<t.length-1?t[h+1]:null,Y=this.simpleSegment(r,u,S,x,N);u+=Y}if(this.dash)for(var V=0;V<r.positions.length/6;V++)r.positions[V*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"segment_gaode2",value:function(t,r,n,u,h,S,x,N){var Y=0,V=t.indices,_e=t.positions,je=t.normals,yt=this.cap==="square",kt=this.join==="bevel",nr=Object(me.e)([x[0],x[1]]),gr=Object(me.e)([S[0],S[1]]);Of(Eo,u,n);var yr=0;if(this.dash&&(yr=this.lineSegmentDistance(nr,gr),this.totalDistance+=yr),this.normal||(this.normal=Rr.b.create(),ku(this.normal,Eo)),!this.started)if(this.started=!0,yt){var Vr=Rr.b.create(),hn=Rr.b.create();Rr.b.add(Vr,this.normal,Eo),Rr.b.add(hn,this.normal,Eo),je.push(hn[0],hn[1],0),je.push(Vr[0],Vr[1],0),_e.push(n[0],n[1],n[2]|0,this.totalDistance-yr,-this.thickness,n[2]|0),_e.push(n[0],n[1],n[2]|0,this.totalDistance-yr,this.thickness,n[2]|0)}else this.extrusions(_e,je,n,this.normal,this.thickness,this.totalDistance-yr);if(V.push(r+0,r+1,r+2),h){Gh(u,h)&&Rr.b.add(h,u,Rr.b.normalize(h,Rr.b.subtract(h,u,n))),Of(Bu,h,u);var en=jh(Cf,Rr.b.create(),Eo,Bu,this.thickness),Ln=pi()(en,2),ii=Ln[0],oi=Ln[1],Sn=Rr.b.dot(Cf,this.normal)<0?-1:1,fi=kt;if(!fi&&this.join==="miter"){var _i=ii;_i>this.miterLimit&&(fi=!0)}fi?(je.push(this.normal[0],this.normal[1],0),je.push(oi[0],oi[1],0),_e.push(u[0],u[1],u[2]|0,this.totalDistance,-this.thickness*Sn,u[2]|0),_e.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness*Sn,u[2]|0),V.push.apply(V,rt()(this.lastFlip!==-Sn?[r,r+2,r+3]:[r+2,r+1,r+3])),V.push(r+2,r+3,r+4),ku(Ql,Bu),Rr.b.copy(this.normal,Ql),je.push(this.normal[0],this.normal[1],0),_e.push(u[0],u[1],u[2]|0,this.totalDistance,-this.thickness*Sn,u[2]|0),Y+=3):(this.extrusions(_e,je,u,oi,ii,this.totalDistance),V.push.apply(V,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Sn=-1,Rr.b.copy(this.normal,oi),Y+=2),this.lastFlip=Sn}else{if(ku(this.normal,Eo),yt){var Dn=Rr.b.create(),Rn=Rr.b.create();Rr.b.sub(Rn,Eo,this.normal),Rr.b.add(Dn,Eo,this.normal),je.push(Rn[0],Rn[1],0),je.push(Dn[0],Dn[1],0),_e.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness,u[2]|0),_e.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness,u[2]|0)}else this.extrusions(_e,je,u,this.normal,this.thickness,this.totalDistance);V.push.apply(V,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Y+=2}return Y}},{key:"simpleSegment",value:function(t,r,n,u,h){var S=0,x=t.indices,N=t.positions,Y=t.normals,V=Object(me.e)([u[0],u[1]]),_e=Object(me.e)([n[0],n[1]]);Of(Eo,V,_e);var je=0;if(this.dash&&(je=this.lineSegmentDistance(V,_e),this.totalDistance+=je),this.normal||(this.normal=Rr.b.create(),ku(this.normal,Eo)),this.started||(this.started=!0,this.extrusions(N,Y,n,this.normal,this.thickness,this.totalDistance-je)),x.push(r+0,r+1,r+2),!h)ku(this.normal,Eo),this.extrusions(N,Y,u,this.normal,this.thickness,this.totalDistance),x.push.apply(x,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),S+=2;else{var yt=Object(me.e)([h[0],h[1]]);Gh(V,yt)&&Rr.b.add(yt,V,Rr.b.normalize(yt,Rr.b.subtract(yt,V,_e))),Of(Bu,yt,V);var kt=jh(Cf,Rr.b.create(),Eo,Bu,this.thickness),nr=pi()(kt,2),gr=nr[0],yr=nr[1],Vr=Rr.b.dot(Cf,this.normal)<0?-1:1;this.extrusions(N,Y,u,yr,gr,this.totalDistance),x.push.apply(x,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),Vr=-1,Rr.b.copy(this.normal,yr),S+=2,this.lastFlip=Vr}return S}},{key:"segment",value:function(t,r,n,u,h){var S=0,x=t.indices,N=t.positions,Y=t.normals,V=this.cap==="square",_e=this.join==="bevel",je=Object(me.e)([u[0],u[1]]),yt=Object(me.e)([n[0],n[1]]);Of(Eo,je,yt);var kt=0;if(this.dash&&(kt=this.lineSegmentDistance(je,yt),this.totalDistance+=kt),this.normal||(this.normal=Rr.b.create(),ku(this.normal,Eo)),!this.started)if(this.started=!0,V){var nr=Rr.b.create(),gr=Rr.b.create();Rr.b.add(nr,this.normal,Eo),Rr.b.add(gr,this.normal,Eo),Y.push(gr[0],gr[1],0),Y.push(nr[0],nr[1],0),N.push(n[0],n[1],n[2]|0,this.totalDistance-kt,-this.thickness,n[2]|0),N.push(n[0],n[1],n[2]|0,this.totalDistance-kt,this.thickness,n[2]|0)}else this.extrusions(N,Y,n,this.normal,this.thickness,this.totalDistance-kt);if(x.push(r+0,r+1,r+2),h){var hn=Object(me.e)([h[0],h[1]]);Gh(je,hn)&&Rr.b.add(hn,je,Rr.b.normalize(hn,Rr.b.subtract(hn,je,yt))),Of(Bu,hn,je);var Dn=jh(Cf,Rr.b.create(),Eo,Bu,this.thickness),Rn=pi()(Dn,2),en=Rn[0],Ln=Rn[1],ii=Rr.b.dot(Cf,this.normal)<0?-1:1,oi=_e;if(!oi&&this.join==="miter"){var Sn=en;Sn>this.miterLimit&&(oi=!0)}oi?(Y.push(this.normal[0],this.normal[1],0),Y.push(Ln[0],Ln[1],0),N.push(u[0],u[1],u[2]|0,this.totalDistance,-this.thickness*ii,u[2]|0),N.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness*ii,u[2]|0),x.push.apply(x,rt()(this.lastFlip!==-ii?[r,r+2,r+3]:[r+2,r+1,r+3])),x.push(r+2,r+3,r+4),ku(Ql,Bu),Rr.b.copy(this.normal,Ql),Y.push(this.normal[0],this.normal[1],0),N.push(u[0],u[1],u[2]|0,this.totalDistance,-this.thickness*ii,u[2]|0),S+=3):(this.extrusions(N,Y,u,Ln,en,this.totalDistance),x.push.apply(x,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),ii=-1,Rr.b.copy(this.normal,Ln),S+=2),this.lastFlip=ii}else{if(ku(this.normal,Eo),V){var yr=Rr.b.create(),Vr=Rr.b.create();Rr.b.sub(Vr,Eo,this.normal),Rr.b.add(yr,Eo,this.normal),Y.push(Vr[0],Vr[1],0),Y.push(yr[0],yr[1],0),N.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness,u[2]|0),N.push(u[0],u[1],u[2]|0,this.totalDistance,this.thickness,u[2]|0)}else this.extrusions(N,Y,u,this.normal,this.thickness,this.totalDistance);x.push.apply(x,rt()(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),S+=2}return S}},{key:"extrusions",value:function(t,r,n,u,h,S){r.push(u[0],u[1],0),r.push(u[0],u[1],0),t.push(n[0],n[1],n[2]|0,S,-h,n[2]|0),t.push(n[0],n[1],n[2]|0,S,h,n[2]|0)}},{key:"lineSegmentDistance",value:function(t,r){var n=r[0]-t[0],u=r[1]-t[1];return Math.sqrt(n*n+u*u)}}]),e}();function Hh(e){if(Uo()(e[0]))return e;if(Uo()(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Uo()(e[0][0][0])){var i=e,t=0,r=0,n=0;return i.forEach(function(u){u.forEach(function(h){t+=h[0],r+=h[1],n++})}),[t/n,r/n,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function um(e){for(var i=e[0],t=e[1],r=e[0],n=e[1],u=0,h=0,S=0,x=0;x<e.length;x+=2){var N=e[x],Y=e[x+1];N&&Y&&(i=Math.max(N,i),t=Math.max(Y,t),r=Math.min(N,r),n=Math.min(Y,n),u+=N,h+=Y,S++)}return{center:[u/S,h/S],radius:Math.sqrt(Math.pow(i-r,2)+Math.pow(t-n,2))/2}}function cm(e){var i=e[0][0],t=e[0][e[0].length-1];i[0]===t[0]&&i[1]===t[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var r=e[0].length,n=Xs.a.flatten(e),u=n.vertices,h=n.dimensions,S=[],x=[],N=0;N<u.length/h;N++)h===2?S.push(u[N*2],u[N*2+1],1):S.push(u[N*3],u[N*3+1],1);var Y=Xs()(n.vertices,n.holes,n.dimensions);x.push.apply(x,rt()(Y));for(var V=function(yt){var kt=n.vertices.slice(yt*h,(yt+1)*h),nr=n.vertices.slice((yt+1)*h,(yt+2)*h);nr.length===0&&(nr=n.vertices.slice(0,h));var gr=S.length/3;S.push(kt[0],kt[1],1,nr[0],nr[1],1,kt[0],kt[1],0,nr[0],nr[1],0),x.push.apply(x,rt()([0,2,1,2,3,1].map(function(yr){return yr+gr})))},_e=0;_e<r;_e++)V(_e);return{positions:S,index:x}}function fm(e){var i=Xs.a.flatten(e),t=Xs()(i.vertices,i.holes,i.dimensions);return{positions:i.vertices,index:t}}function zd(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e[0][0],r=e[0][e[0].length-1];t[0]===r[0]&&t[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var n=e[0].length,u=Xs.a.flatten(e),h=u.vertices,S=u.dimensions,x=[],N=[],Y=[],V=0;V<h.length/S;V++)S===2?x.push(h[V*2],h[V*2+1],1,-1,-1):x.push(h[V*3],h[V*3+1],1,-1,-1),Y.push(0,0,1);var _e=Xs()(u.vertices,u.holes,u.dimensions);N.push.apply(N,rt()(_e));for(var je=function(nr){var gr=u.vertices.slice(nr*S,(nr+1)*S),yr=u.vertices.slice((nr+1)*S,(nr+2)*S);yr.length===0&&(yr=u.vertices.slice(0,S));var Vr=x.length/5;x.push(gr[0],gr[1],1,0,0,yr[0],yr[1],1,.1,0,gr[0],gr[1],0,0,.8,yr[0],yr[1],0,.1,.8);var hn=lm([yr[0],yr[1],1],[gr[0],gr[1],0],[gr[0],gr[1],1],i);Y.push.apply(Y,rt()(hn).concat(rt()(hn),rt()(hn),rt()(hn))),N.push.apply(N,rt()([1,2,0,3,2,1].map(function(Dn){return Dn+Vr})))},yt=0;yt<n;yt++)je(yt);return{positions:x,index:N,normals:Y}}function lm(e,i,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=Rr.c.create(),u=Rr.c.create(),h=Rr.c.create();r&&(e=Object(me.t)(e),i=Object(me.t)(i),t=Object(me.t)(t));var S=Rr.c.fromValues.apply(Rr.c,rt()(e)),x=Rr.c.fromValues.apply(Rr.c,rt()(i)),N=Rr.c.fromValues.apply(Rr.c,rt()(t));Rr.c.sub(n,N,x),Rr.c.sub(u,S,x),Rr.c.cross(h,n,u);var Y=Rr.c.create();return Rr.c.normalize(Y,h),Y}var vs,bc;(function(e){e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn"})(bc||(bc={}));var _c;(function(e){e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon"})(_c||(_c={}));function nl(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=Math.PI*2/e,r=[],n=0;n<e;n++)r.push(t*n+i*Math.PI/12);var u=r.map(function(h){var S=Math.sin(h+Math.PI/4),x=Math.cos(h+Math.PI/4);return[S,x,0]});return u}function Xd(){return nl(30)}function Wd(){return nl(4)}function Yd(){return nl(3)}function Zd(){return nl(6,1)}function Kd(){return nl(5)}var Pf=(vs={},C()(vs,_c.CIRCLE,Xd),C()(vs,_c.HEXAGON,Zd),C()(vs,_c.TRIANGLE,Yd),C()(vs,_c.SQUARE,Wd),C()(vs,_c.PENTAGON,Kd),C()(vs,bc.CYLINDER,Xd),C()(vs,bc.HEXAGONCOLUMN,Zd),C()(vs,bc.TRIANGLECOLUMN,Yd),C()(vs,bc.SQUARECOLUMN,Wd),C()(vs,bc.PENTAGONCOLUMN,Kd),vs),$l={};function WE(e){var i=Hh(e.coordinates);return{vertices:[].concat(rt()(i),rt()(i),rt()(i),rt()(i)),indices:[0,1,2,2,3,0],size:i.length}}function YE(e){var i=Hh(e.coordinates),t=sm(i);return{vertices:[].concat(rt()(t),rt()(t),rt()(t),rt()(t)),indices:[0,1,2,2,3,0],size:t.length}}function hm(e){var i=e.shape,t=pm(i,!1),r=t.positions,n=t.index,u=t.normals;return{vertices:r,indices:n,normals:u,size:5}}function ZE(e){var i=Hh(e.coordinates);return{vertices:rt()(i),indices:[0],size:i.length}}function KE(e){var i=e.coordinates,t=e.originCoordinates,r=e.version,n=new Vd({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var u=i;Array.isArray(u[0][0])||(u=[i]);var h=t;Array.isArray(h[0][0])||(h=[t]);for(var S=0;S<u.length;S++){var x=u[S],N=h[S];n.extrude_gaode2(x,N)}}else{var Y=i;Array.isArray(Y[0][0])||(Y=[i]),Y.forEach(function(_e){n.extrude(_e)})}var V=n.complex;return{vertices:V.positions,indices:V.indices,normals:V.normals,size:6}}function QE(e){var i=e.coordinates,t=e.originCoordinates,r=e.version,n=new Vd({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var u=i;Array.isArray(u[0][0])||(u=[i]);var h=t;Array.isArray(h[0][0])||(h=[t]);for(var S=0;S<u.length;S++){var x=u[S],N=h[S];n.simpleExtrude_gaode2(x,N)}}else{var Y=i;Array.isArray(Y[0][0])||(Y=[i]),Y.forEach(function(_e){n.simpleExtrude(_e)})}var V=n.complex;return{vertices:V.positions,indices:V.indices,normals:V.normals,size:6}}function $E(e){var i=e.coordinates,t=Xs.a.flatten(i),r=t.vertices,n=t.dimensions,u=t.holes;return{indices:Xs()(r,u,n),vertices:r,size:n}}function JE(e){var i=e.coordinates,t=Xs.a.flatten(i),r=t.vertices,n=t.dimensions,u=t.holes;return{indices:Xs()(r,u,n),vertices:dm(r),size:n+4}}function dm(e){for(var i=[],t=um(e),r=t.center,n=t.radius,u=0;u<e.length;u+=2){var h=e[u],S=e[u+1];i.push.apply(i,[h,S,0].concat(rt()(r),[n]))}return i}function qE(e){var i=e.coordinates,t=zd(i,!0),r=t.positions,n=t.index,u=t.normals;return{vertices:r,indices:n,normals:u,size:5}}function Qd(e){var i=e.shape,t=gm(i),r=t.positions,n=t.index;return{vertices:r,indices:n,size:3}}function e1(e){var i=e.coordinates,t=[].concat(rt()(i[0]),[0,0,1,i[1][0],i[0][1],0,1,1],rt()(i[1]),[0,1,0],rt()(i[0]),[0,0,1],rt()(i[1]),[0,1,0,i[0][0],i[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:t,indices:r,size:5}}function t1(e,i){for(var t=i||30,r=e.coordinates,n=[],u=[],h=function(N){n.push(N,1,N,r[0][0],r[0][1],r[1][0],r[1][1],N,-1,N,r[0][0],r[0][1],r[1][0],r[1][1]),N!==t-1&&u.push.apply(u,rt()([0,1,2,1,3,2].map(function(Y){return N*2+Y})))},S=0;S<t;S++)h(S);return{vertices:n,indices:u,size:7}}function vm(e){var i=e.coordinates;i.length===2&&i.push(0);var t=e.size,r=Jl(-1,1),n=Jl(1,1),u=Jl(-1,-1),h=Jl(1,-1),S=[].concat(rt()(i),rt()(r),rt()(i),rt()(u),rt()(i),rt()(h),rt()(i),rt()(n)),x=[0,1,2,3,0,2];return{vertices:S,indices:x,size:5}}function pm(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($l&&$l[e])return $l[e];var t=Pf[e]?Pf[e]():Pf.cylinder(),r=zd([t],i);return $l[e]=r,r}function r1(e,i){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=new Float32Array(e.length/t*3),u,h,S,x=Rr.c.create(),N=Rr.c.create(),Y=Rr.c.create(),V=0,_e=i.length;V<_e;V+=3){u=i[V+0]*3,h=i[V+1]*3,S=i[V+2]*3;var je=[e[u],e[u+1]],yt=[e[h],e[h+1]],kt=[e[S],e[S+1]];r&&(je=Object(me.t)(je),yt=Object(me.t)(yt),kt=Object(me.t)(kt));var nr=je,gr=pi()(nr,2),yr=gr[0],Vr=gr[1],hn=Rr.c.fromValues(yr,Vr,e[u+2]),Dn=yt,Rn=pi()(Dn,2),en=Rn[0],Ln=Rn[1],ii=Rr.c.fromValues(en,Ln,e[h+2]),oi=kt,Sn=pi()(oi,2),fi=Sn[0],_i=Sn[1],bo=Rr.c.fromValues(fi,_i,e[S+2]);Rr.c.sub(x,bo,ii),Rr.c.sub(N,hn,ii),Rr.c.cross(Y,x,N),n[u]+=x[0],n[u+1]+=x[1],n[u+2]+=x[2],n[h]+=x[0],n[h+1]+=x[1],n[h+2]+=x[2],n[S]+=x[0],n[S+1]+=x[1],n[S+2]+=x[2]}return mm(n),n}function mm(e){for(var i=0,t=e.length;i<t;i+=3){var r=Rr.c.fromValues(e[i],e[i+1],e[i+2]),n=Rr.c.create();Rr.c.normalize(n,r),e.set(n,i)}}function n1(e){var i=e[0][0],t=e[0][e[0].length-1];return i[0]===t[0]&&i[1]===t[1]}function gm(e){var i=["cylinder","triangleColumn","hexagonColumn","squareColumn"],t=Pf[e]?Pf[e]():Pf.circle(),r=i.indexOf(e)===-1?fm([t]):cm([t]);return r}function Jl(e,i){var t=(e+1)/2,r=(i+1)/2;return[t,r]}function i1(){var e=Hd(Uh,{segments:jd}),i=e.positionsArr,t=e.indicesArr,r=e.normalArr;return{vertices:i,indices:t,size:5,normals:r}}function a1(){var e=Hd(Uh+om,{segments:jd}),i=e.positionsArr,t=e.indicesArr,r=e.normalArr;return{vertices:i,indices:t,size:5,normals:r}}function ym(e){var i=Em();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Em(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sm=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
uniform mat4 u_Mvp;\r
varying vec4 v_color;\r
\r
uniform vec2 u_SceneCenterMKT;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  // gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807\r
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r
    gl_Position = u_Mvp * (project_pos);\r
  } else {\r
     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
    gl_Position = project_common_position_to_clipspace(project_pos);\r
  }\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,Tm=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Am=function(e){An()(t,e);var i=ym(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity,h=n.coverage,S=n.angle;return{u_opacity:u||1,u_coverage:h||.9,u_angle:S||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var n=this.layer.getLayerConfig(),u=n.mask,h=u===void 0?!1:u,S=n.maskInside,x=S===void 0?!0:S;return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:Sm,fragmentShader:Tm,triangulation:Qd,depth:{enable:!1},primitive:mt.TRIANGLES,blend:this.getBlend(),stencil:Object(me.q)(h,x)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ei.Attribute,descriptor:{name:"a_Pos",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:3,update:function(u,h){var S=u.version==="GAODE2.x"?u.originCoordinates:u.coordinates;return[S[0],S[1],0]}}})}}]),t}(Kl);function xm(e){var i=bm();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function bm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var _m=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"


void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
  // vec2 lnglat = (a_Pos.xy + offset); 
  // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  // gl_Position = project_common_position_to_clipspace(project_pos);
  // float lightWeight = calc_lighting(project_pos);
  // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 lnglat = (a_Pos.xy + offset); 
    // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));

    // float lightWeight = calc_lighting(project_pos);
    // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    // gl_Position = u_Mvp * vec4(lnglat , a_Position.z * a_Size, 1.0);
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ECF\u7EAC\u5EA6
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5C06\u7ECF\u7EAC\u5EA6\u8F6C\u6362\u4E3A\u9AD8\u5FB72.0\u9700\u8981\u7684\u5E73\u9762\u5750\u6807
    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));

    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
  
    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);
  } else {
    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5B9E\u9645\u7684\u7ECF\u7EAC\u5EA6
    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
    
    float lightWeight = calc_lighting(project_pos);
    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);
    
    gl_Position = project_common_position_to_clipspace(project_pos);
  }



  setPickingColor(a_PickingColor);
}
`,Cm=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Om=function(e){An()(t,e);var i=xm(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity,h=n.coverage,S=n.angle;return{u_opacity:u||1,u_coverage:h||1,u_angle:S||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var n=this.layer.getLayerConfig(),u=n.mask,h=u===void 0?!1:u,S=n.maskInside,x=S===void 0?!0:S;return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:_m,fragmentShader:Cm,triangulation:hm,depth:{enable:!0},blend:this.getBlend(),stencil:Object(me.q)(h,x)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Ei.Attribute,descriptor:{name:"a_Size",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:1,update:function(u,h,S,x){var N=u.size;return Array.isArray(N)?[N[0]]:[N]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Ei.Attribute,descriptor:{name:"a_Normal",buffer:{usage:mt.STATIC_DRAW,data:[],type:mt.FLOAT},size:3,update:function(u,h,S,x,N){return N}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ei.Attribute,descriptor:{name:"a_Pos",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:3,update:function(u,h){var S=u.version==="GAODE2.x"?u.originCoordinates:u.coordinates;return[S[0],S[1],0]}}})}}]),t}(Kl);function Pm(e,i){for(var t=[],r=[],n=[],u=e+1,h=i+1,S=e/2,x=i/2,N=0;N<h;N++)for(var Y=N-x,V=0;V<u;V++){var _e=V-S;r.push(_e/S,-Y/x,0),n.push(V/e),n.push(1-N/i)}for(var je=0;je<i;je++)for(var yt=0;yt<e;yt++){var kt=yt+u*je,nr=yt+u*(je+1),gr=yt+1+u*(je+1),yr=yt+1+u*je;t.push(kt,nr,yr),t.push(nr,gr,yr)}return{vertices:r,indices:t,uvs:n}}var $d,Jd;function qd(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ev(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?qd(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Mm(e){var i=Rm();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Rm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Im=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;
}
`,Nm=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;


vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5C06\u539F\u672C 0 -> 1 \u7684 uv \u8F6C\u6362\u4E3A -1 -> 1 \u7684\u6807\u51C6\u5750\u6807\u7A7A\u95F4\uFF08NDC\uFF09

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5E73\u9762\u4E0A\u7684\u70B9\uFF08z == 0\uFF09\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E09\u7EF4\u4E0A\u7684\u70B9\u88AB\u6295\u5F71\u5230\u5E73\u9762\u540E\u7684\u70B9
	vec4 p2 = vec4(pos, 1.0, 1.0); // \u5E73\u884C\u4E8Ex/y\u5E73\u9762\u3001z==1 \u7684\u5E73\u9762\u4E0A\u7684\u70B9

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636E\u89C6\u56FE\u6295\u5F71\u77E9\u9635\u7684\u9006\u77E9\u9635\u5E73\u9762\u4E0A\u7684\u53CD\u7B97\u51FA\u4E09\u7EF4\u7A7A\u95F4\u4E2D\u7684\u70B9\uFF08p1\u5E73\u9762\u4E0A\u7684\u70B9\uFF09
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // \u5F52\u4E00\u5316\u64CD\u4F5C\uFF08\u5F52\u4E00\u5316\u540E\u4E3A\u4E16\u754C\u5750\u6807\uFF09
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);
 
}
`,Lm=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,wm=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,Dm=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
}
`,Fm=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,tv=($d=Object(cr.injectable)(),$d(Jd=function(e){An()(t,e);var i=Mm(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),C()(Ve()(r),"texture",void 0),C()(Ve()(r),"colorTexture",void 0),C()(Ve()(r),"heatmapFramerBuffer",void 0),C()(Ve()(r),"intensityModel",void 0),C()(Ve()(r),"colorModel",void 0),C()(Ve()(r),"shapeType",void 0),r}return _t()(t,[{key:"render",value:function(){var n=this,u=this.rendererService,h=u.clear,S=u.useFramebuffer;S(this.heatmapFramerBuffer,function(){h({color:[0,0,0,0],depth:1,stencil:0,framebuffer:n.heatmapFramerBuffer}),n.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var n,u=this.rendererService,h=u.createFramebuffer,S=u.clear,x=u.getViewportSize,N=u.createTexture2D,Y=u.useFramebuffer,V=this.styleAttributeService.getLayerStyleAttribute("shape"),_e=(V==null||(n=V.scale)===null||n===void 0?void 0:n.field)||"heatmap";this.shapeType=_e,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=_e==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var je=x(),yt=je.width,kt=je.height;return this.heatmapFramerBuffer=h({color:N({width:Math.floor(yt/4),height:Math.floor(kt/4),wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE,min:mt.LINEAR,mag:mt.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:Ei.Attribute,descriptor:{name:"a_Dir",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:2,update:function(u,h,S,x){return[S[3],S[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Ei.Attribute,descriptor:{name:"a_Size",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:1,update:function(u,h,S,x){var N=u.size,Y=N===void 0?1:N;return[Y]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:Dm,fragmentShader:wm,triangulation:vm,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:mt.ONE,srcAlpha:1,dstRGB:mt.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){var n=this.layer.getLayerConfig(),u=n.mask,h=u===void 0?!1:u,S=n.maskInside,x=S===void 0?!0:S;this.shaderModuleService.registerModule("heatmapColor",{vs:Fm,fs:Lm});var N=this.shaderModuleService.getModule("heatmapColor"),Y=N.vs,V=N.fs,_e=N.uniforms,je=this.rendererService,yt=je.createAttribute,kt=je.createElements,nr=je.createBuffer,gr=je.createModel;return gr({vs:Y,fs:V,attributes:{a_Position:yt({buffer:nr({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:mt.FLOAT}),size:3}),a_Uv:yt({buffer:nr({data:[0,1,1,1,0,0,1,0],type:mt.FLOAT}),size:2})},uniforms:ev({},_e),depth:{enable:!1},blend:this.getBlend(),count:6,elements:kt({data:[0,2,1,2,3,1],type:mt.UNSIGNED_INT,count:6}),stencil:Object(me.q)(h,x)})}},{key:"drawIntensityMode",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity,h=n.intensity,S=h===void 0?10:h,x=n.radius,N=x===void 0?5:x;this.intensityModel.draw({uniforms:{u_opacity:u||1,u_radius:N,u_intensity:S}})}},{key:"drawColorMode",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity;this.colorModel.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity,h=Rr.a.create();Rr.a.invert(h,this.cameraService.getViewProjectionMatrixUncentered()),this.colorModel.draw({uniforms:{u_opacity:u||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:rt()(h)}})}},{key:"build3dHeatMap",value:function(){var n=this.layer.getLayerConfig(),u=n.mask,h=u===void 0?!1:u,S=n.maskInside,x=S===void 0?!0:S,N=this.rendererService.getViewportSize,Y=N(),V=Y.width,_e=Y.height,je=Pm(V/4,_e/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Nm,fs:Im});var yt=this.shaderModuleService.getModule("heatmap3dColor"),kt=yt.vs,nr=yt.fs,gr=yt.uniforms,yr=this.rendererService,Vr=yr.createAttribute,hn=yr.createElements,Dn=yr.createBuffer,Rn=yr.createModel;return Rn({vs:kt,fs:nr,attributes:{a_Position:Vr({buffer:Dn({data:je.vertices,type:mt.FLOAT}),size:3}),a_Uv:Vr({buffer:Dn({data:je.uvs,type:mt.FLOAT}),size:2})},primitive:mt.TRIANGLES,uniforms:ev({},gr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:mt.SRC_ALPHA,srcAlpha:1,dstRGB:mt.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:hn({data:je.indices,type:mt.UNSIGNED_INT,count:je.indices.length}),stencil:Object(me.q)(h,x)})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var n=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var u=this.layer.getLayerConfig(),h=u.rampColors,S=Object(me.o)(h);this.colorTexture=n({data:new Uint8Array(S.data),width:S.width,height:S.height,wrapS:mt.CLAMP_TO_EDGE,wrapT:mt.CLAMP_TO_EDGE,min:mt.NEAREST,mag:mt.NEAREST,flipY:!1})}}]),t}(Kl))||Jd);function Bm(e){var i=km();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function km(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Um=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,jm=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform vec2 u_SceneCenterMKT;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
 
  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));
    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));
    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;
    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));
    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,Gm=function(e){An()(t,e);var i=Bm(t);function t(){return Ce()(this,t),i.apply(this,arguments)}return _t()(t,[{key:"getUninforms",value:function(){var n=this.layer.getLayerConfig(),u=n.opacity,h=n.coverage,S=n.angle;return{u_opacity:u||1,u_coverage:h||.9,u_angle:S||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var n=this.layer.getLayerConfig(),u=n.mask,h=u===void 0?!1:u,S=n.maskInside,x=S===void 0?!0:S;return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:jm,fragmentShader:Um,triangulation:Qd,depth:{enable:!1},primitive:mt.TRIANGLES,blend:this.getBlend(),stencil:Object(me.q)(h,x)})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:Ei.Attribute,descriptor:{name:"a_Pos",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:3,update:function(u,h){var S=u.version==="GAODE2.x"?u.originCoordinates:u.coordinates;return[S[0],S[1],0]}}})}}]),t}(Kl),Hm={heatmap:tv,heatmap3d:tv,grid:Am,grid3d:Om,hexagon:Gm},Vm=Hm;function zm(e){var i=Xm();return function(){var r=Wr()(e),n;if(i){var u=Wr()(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return Bn()(this,n)}}function Xm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Wm=function(e){An()(t,e);var i=zm(t);function t(){var r;Ce()(this,t);for(var n=arguments.length,u=new Array(n),h=0;h<n;h++)u[h]=arguments[h];return r=i.call.apply(i,[this].concat(u)),C()(Ve()(r),"type","HeatMapLayer"),r}return _t()(t,[{key:"buildModels",value:function(){var n=this.getModelType();this.layerModel=new Vm[n](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var n=this,u=this.getModelType();return u==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(h){return h.draw({uniforms:n.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var n,u=this.styleAttributeService.getLayerStyleAttribute("shape"),h=this.getLayerConfig(),S=h.shape3d,x=this.getSource(),N=x.data.type,Y=(u==null||(n=u.scale)===null||n===void 0?void 0:n.field)||"heatmap";return Y==="heatmap"||Y==="heatmap3d"?"heatmap":N==="hexagon"?(S==null?void 0:S.indexOf(Y))===-1?"hexagon":"grid3d":N==="grid"?(S==null?void 0:S.indexOf(Y))===-1?"grid":"grid3d":"heatmap"}}]),t}(tm),rv,nv,iv,av,ov,il,sv,uv,cv;function fv(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Ym(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?fv(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fv(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var Zm=(rv=Object(cr.injectable)(),nv=Object(cr.inject)(Gt.IGlobalConfigService),iv=Object(cr.inject)(Gt.IMapService),av=Object(cr.inject)(Gt.IFontService),rv(ov=(il=function(){function e(){Ce()(this,e),Yr()(this,"configService",sv,this),Yr()(this,"mapService",uv,this),Yr()(this,"fontService",cv,this)}return _t()(e,[{key:"apply",value:function(t,r){var n=this,u=r.styleAttributeService;t.hooks.init.tap("DataMappingPlugin",function(){n.generateMaping(t,{styleAttributeService:u})}),t.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return t.dataState.dataMappingNeedUpdate=!1,n.generateMaping(t,{styleAttributeService:u}),!0}),t.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!t.layerModelNeedUpdate){var h=t.getBottomColor(),S=u.getLayerStyleAttributes()||[],x=u.getLayerStyleAttribute("filter"),N=t.getSource().data.dataArray,Y=S.filter(function(_e){return _e.needRemapping}),V=N;x!=null&&x.needRemapping&&x!==null&&x!==void 0&&x.scale&&(V=N.filter(function(_e){return n.applyAttributeMapping(x,_e,h)[0]})),Y.length&&(x!=null&&x.needRemapping?(t.setEncodedData(n.mapping(S,V,void 0,h)),x.needRemapping=!1):t.setEncodedData(n.mapping(Y,V,t.getEncodedData(),h)),t.emit("remapping",null))}})}},{key:"generateMaping",value:function(t,r){var n=this,u=r.styleAttributeService,h=t.getBottomColor(),S=u.getLayerStyleAttributes()||[],x=u.getLayerStyleAttribute("filter"),N=t.getSource().data.dataArray,Y=N;x!=null&&x.scale&&(Y=N.filter(function(V){return n.applyAttributeMapping(x,V,h)[0]})),t.setEncodedData(this.mapping(S,Y,void 0,h))}},{key:"mapping",value:function(t,r,n,u){var h=this,S=r.map(function(x,N){var Y=n?n[N]:{},V=Ym({id:x._id,coordinates:x.coordinates},Y);return t.filter(function(_e){return _e.scale!==void 0}).forEach(function(_e){var je=h.applyAttributeMapping(_e,x,u);_e.needRemapping=!1,_e.name==="color"&&(je=je.map(function(yt){return Object(me.w)(yt)})),V[_e.name]=Array.isArray(je)&&je.length===1?je[0]:je,_e.name==="shape"&&(V.shape=h.fontService.getIconFontKey(V[_e.name]))}),V});return S.length>0&&this.mapService.version==="GAODE2.x"&&(typeof S[0].coordinates[0]=="number"?S.filter(function(x){return!x.originCoordinates}).map(function(x){x.version="GAODE2.x",x.originCoordinates=Ci()(x.coordinates),x.coordinates=h.mapService.lngLatToCoord(x.coordinates)}):S.filter(function(x){return!x.originCoordinates}).map(function(x){x.version="GAODE2.x",x.originCoordinates=Ci()(x.coordinates),x.coordinates=h.mapService.lngLatToCoords(x.coordinates)})),S}},{key:"applyAttributeMapping",value:function(t,r,n){var u;if(!t.scale)return[];var h=(t==null||(u=t.scale)===null||u===void 0?void 0:u.scalers)||[],S=[];h.forEach(function(N){var Y,V=N.field;(r.hasOwnProperty(V)||((Y=t.scale)===null||Y===void 0?void 0:Y.type)==="variable")&&S.push(r[V])});var x=t.mapping?t.mapping(S):[];return t.name==="color"&&!Object(me.r)(x[0])?[n]:x}}]),e}(),sv=In()(il.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uv=In()(il.prototype,"mapService",[iv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cv=In()(il.prototype,"fontService",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il))||ov),lv,hv,Km=(lv=Object(cr.injectable)(),lv(hv=function(){function e(){Ce()(this,e),C()(this,"mapService",void 0)}return _t()(e,[{key:"apply",value:function(t){var r=this;this.mapService=t.getContainer().get(Gt.IMapService),t.hooks.init.tap("DataSourcePlugin",function(){var n=t.getSource();if(!n){var u=t.sourceOption||{data:ct,options:lr},h=u.data,S=u.options;t.setSource(new Ur(h,S))}r.updateClusterData(t)}),t.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var n=r.updateClusterData(t),u=t.dataState.dataSourceNeedUpdate;return t.dataState.dataSourceNeedUpdate=!1,n||u})}},{key:"updateClusterData",value:function(t){var r=t.getSource(),n=r.cluster,u=r.clusterOptions,h=u.zoom,S=h===void 0?0:h,x=u.maxZoom,N=x===void 0?16:x,Y=this.mapService.getZoom()-1,V=t.dataState.dataSourceNeedUpdate;return n&&(V||Math.abs(t.clusterZoom-Y)>=1)?(S!==Math.floor(Y)&&r.updateClusterData(Math.floor(Y)),t.clusterZoom=Y,!0):!1}}]),e}())||hv),Cc=function(e,i){return e<i?-1:e>i?1:e>=i?0:NaN},dv=function(e){return e.length===1&&(e=Qm(e)),{left:function(i,t,r,n){for(r==null&&(r=0),n==null&&(n=i.length);r<n;){var u=r+n>>>1;e(i[u],t)<0?r=u+1:n=u}return r},right:function(i,t,r,n){for(r==null&&(r=0),n==null&&(n=i.length);r<n;){var u=r+n>>>1;e(i[u],t)>0?n=u:r=u+1}return r}}};function Qm(e){return function(i,t){return Cc(e(i),t)}}var vv=dv(Cc),$m=vv.right,o1=vv.left,Mf=$m,s1=function(e,i){i==null&&(i=pv);for(var t=0,r=e.length-1,n=e[0],u=new Array(r<0?0:r);t<r;)u[t]=i(n,n=e[++t]);return u};function pv(e,i){return[e,i]}var u1=function(e,i,t){var r=e.length,n=i.length,u=new Array(r*n),h,S,x,N;for(t==null&&(t=pv),h=x=0;h<r;++h)for(N=e[h],S=0;S<n;++S,++x)u[x]=t(N,i[S]);return u},c1=function(e,i){return i<e?-1:i>e?1:i>=e?0:NaN},Uu=function(e){return e===null?NaN:+e},Jm=function(e,i){var t=e.length,r=0,n=-1,u=0,h,S,x=0;if(i==null)for(;++n<t;)isNaN(h=Uu(e[n]))||(S=h-u,u+=S/++r,x+=S*(h-u));else for(;++n<t;)isNaN(h=Uu(i(e[n],n,e)))||(S=h-u,u+=S/++r,x+=S*(h-u));if(r>1)return x/(r-1)},qm=function(e,i){var t=Jm(e,i);return t&&Math.sqrt(t)},mv=function(e,i){var t=e.length,r=-1,n,u,h;if(i==null){for(;++r<t;)if((n=e[r])!=null&&n>=n)for(u=h=n;++r<t;)(n=e[r])!=null&&(u>n&&(u=n),h<n&&(h=n))}else for(;++r<t;)if((n=i(e[r],r,e))!=null&&n>=n)for(u=h=n;++r<t;)(n=i(e[r],r,e))!=null&&(u>n&&(u=n),h<n&&(h=n));return[u,h]},gv=Array.prototype,eg=gv.slice,tg=gv.map,ql=function(e){return function(){return e}},rg=function(e){return e},yv=function(e,i,t){e=+e,i=+i,t=(n=arguments.length)<2?(i=e,e=0,1):n<3?1:+t;for(var r=-1,n=Math.max(0,Math.ceil((i-e)/t))|0,u=new Array(n);++r<n;)u[r]=e+r*t;return u},Vh=Math.sqrt(50),zh=Math.sqrt(10),Xh=Math.sqrt(2),Ev=function(e,i,t){var r,n=-1,u,h,S;if(i=+i,e=+e,t=+t,e===i&&t>0)return[e];if((r=i<e)&&(u=e,e=i,i=u),(S=eh(e,i,t))===0||!isFinite(S))return[];if(S>0)for(e=Math.ceil(e/S),i=Math.floor(i/S),h=new Array(u=Math.ceil(i-e+1));++n<u;)h[n]=(e+n)*S;else for(e=Math.floor(e*S),i=Math.ceil(i*S),h=new Array(u=Math.ceil(e-i+1));++n<u;)h[n]=(e-n)/S;return r&&h.reverse(),h};function eh(e,i,t){var r=(i-e)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,n);return n>=0?(u>=Vh?10:u>=zh?5:u>=Xh?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(u>=Vh?10:u>=zh?5:u>=Xh?2:1)}function th(e,i,t){var r=Math.abs(i-e)/Math.max(0,t),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/n;return u>=Vh?n*=10:u>=zh?n*=5:u>=Xh&&(n*=2),i<e?-n:n}var ng=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},f1=function(){var e=rg,i=mv,t=ng;function r(n){var u,h=n.length,S,x=new Array(h);for(u=0;u<h;++u)x[u]=e(n[u],u,n);var N=i(x),Y=N[0],V=N[1],_e=t(x,Y,V);Array.isArray(_e)||(_e=th(Y,V,_e),_e=yv(Math.ceil(Y/_e)*_e,V,_e));for(var je=_e.length;_e[0]<=Y;)_e.shift(),--je;for(;_e[je-1]>V;)_e.pop(),--je;var yt=new Array(je+1),kt;for(u=0;u<=je;++u)kt=yt[u]=[],kt.x0=u>0?_e[u-1]:Y,kt.x1=u<je?_e[u]:V;for(u=0;u<h;++u)S=x[u],Y<=S&&S<=V&&yt[Mf(_e,S,0,je)].push(n[u]);return yt}return r.value=function(n){return arguments.length?(e=typeof n=="function"?n:ql(n),r):e},r.domain=function(n){return arguments.length?(i=typeof n=="function"?n:ql([n[0],n[1]]),r):i},r.thresholds=function(n){return arguments.length?(t=typeof n=="function"?n:Array.isArray(n)?ql(eg.call(n)):ql(n),r):t},r},rh=function(e,i,t){if(t==null&&(t=Uu),!!(r=e.length)){if((i=+i)<=0||r<2)return+t(e[0],0,e);if(i>=1)return+t(e[r-1],r-1,e);var r,n=(r-1)*i,u=Math.floor(n),h=+t(e[u],u,e),S=+t(e[u+1],u+1,e);return h+(S-h)*(n-u)}},l1=function(e,i,t){return e=tg.call(e,Uu).sort(Cc),Math.ceil((t-i)/(2*(rh(e,.75)-rh(e,.25))*Math.pow(e.length,-1/3)))},h1=function(e,i,t){return Math.ceil((t-i)/(3.5*qm(e)*Math.pow(e.length,-1/3)))},d1=function(e,i){var t=e.length,r=-1,n,u;if(i==null){for(;++r<t;)if((n=e[r])!=null&&n>=n)for(u=n;++r<t;)(n=e[r])!=null&&n>u&&(u=n)}else for(;++r<t;)if((n=i(e[r],r,e))!=null&&n>=n)for(u=n;++r<t;)(n=i(e[r],r,e))!=null&&n>u&&(u=n);return u},v1=function(e,i){var t=e.length,r=t,n=-1,u,h=0;if(i==null)for(;++n<t;)isNaN(u=Uu(e[n]))?--r:h+=u;else for(;++n<t;)isNaN(u=Uu(i(e[n],n,e)))?--r:h+=u;if(r)return h/r},p1=function(e,i){var t=e.length,r=-1,n,u=[];if(i==null)for(;++r<t;)isNaN(n=Uu(e[r]))||u.push(n);else for(;++r<t;)isNaN(n=Uu(i(e[r],r,e)))||u.push(n);return rh(u.sort(Cc),.5)},m1=function(e){for(var i=e.length,t,r=-1,n=0,u,h;++r<i;)n+=e[r].length;for(u=new Array(n);--i>=0;)for(h=e[i],t=h.length;--t>=0;)u[--n]=h[t];return u},ig=function(e,i){var t=e.length,r=-1,n,u;if(i==null){for(;++r<t;)if((n=e[r])!=null&&n>=n)for(u=n;++r<t;)(n=e[r])!=null&&u>n&&(u=n)}else for(;++r<t;)if((n=i(e[r],r,e))!=null&&n>=n)for(u=n;++r<t;)(n=i(e[r],r,e))!=null&&u>n&&(u=n);return u},g1=function(e,i){for(var t=i.length,r=new Array(t);t--;)r[t]=e[i[t]];return r},y1=function(e,i){if(!!(t=e.length)){var t,r=0,n=0,u,h=e[n];for(i==null&&(i=Cc);++r<t;)(i(u=e[r],h)<0||i(h,h)!==0)&&(h=u,n=r);if(i(h,h)===0)return n}},E1=function(e,i,t){for(var r=(t==null?e.length:t)-(i=i==null?0:+i),n,u;r;)u=Math.random()*r--|0,n=e[r+i],e[r+i]=e[u+i],e[u+i]=n;return e},S1=function(e,i){var t=e.length,r=-1,n,u=0;if(i==null)for(;++r<t;)(n=+e[r])&&(u+=n);else for(;++r<t;)(n=+i(e[r],r,e))&&(u+=n);return u},ag=function(e){if(!(u=e.length))return[];for(var i=-1,t=ig(e,og),r=new Array(t);++i<t;)for(var n=-1,u,h=r[i]=new Array(u);++n<u;)h[n]=e[n][i];return r};function og(e){return e.length}var T1=function(){return ag(arguments)};function Ms(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function au(e,i){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(i).domain(e);break}return this}var ps="$";function nh(){}nh.prototype=Sv.prototype={constructor:nh,has:function(e){return ps+e in this},get:function(e){return this[ps+e]},set:function(e,i){return this[ps+e]=i,this},remove:function(e){var i=ps+e;return i in this&&delete this[i]},clear:function(){for(var e in this)e[0]===ps&&delete this[e]},keys:function(){var e=[];for(var i in this)i[0]===ps&&e.push(i.slice(1));return e},values:function(){var e=[];for(var i in this)i[0]===ps&&e.push(this[i]);return e},entries:function(){var e=[];for(var i in this)i[0]===ps&&e.push({key:i.slice(1),value:this[i]});return e},size:function(){var e=0;for(var i in this)i[0]===ps&&++e;return e},empty:function(){for(var e in this)if(e[0]===ps)return!1;return!0},each:function(e){for(var i in this)i[0]===ps&&e(this[i],i.slice(1),this)}};function Sv(e,i){var t=new nh;if(e instanceof nh)e.each(function(S,x){t.set(x,S)});else if(Array.isArray(e)){var r=-1,n=e.length,u;if(i==null)for(;++r<n;)t.set(r,e[r]);else for(;++r<n;)t.set(i(u=e[r],r,e),u)}else if(e)for(var h in e)t.set(h,e[h]);return t}var al=Sv,A1=function(){var e=[],i=[],t,r,n;function u(S,x,N,Y){if(x>=e.length)return t!=null&&S.sort(t),r!=null?r(S):S;for(var V=-1,_e=S.length,je=e[x++],yt,kt,nr=al(),gr,yr=N();++V<_e;)(gr=nr.get(yt=je(kt=S[V])+""))?gr.push(kt):nr.set(yt,[kt]);return nr.each(function(Vr,hn){Y(yr,hn,u(Vr,x,N,Y))}),yr}function h(S,x){if(++x>e.length)return S;var N,Y=i[x-1];return r!=null&&x>=e.length?N=S.entries():(N=[],S.each(function(V,_e){N.push({key:_e,values:h(V,x)})})),Y!=null?N.sort(function(V,_e){return Y(V.key,_e.key)}):N}return n={object:function(S){return u(S,0,sg,ug)},map:function(S){return u(S,0,Tv,Av)},entries:function(S){return h(u(S,0,Tv,Av),0)},key:function(S){return e.push(S),n},sortKeys:function(S){return i[e.length-1]=S,n},sortValues:function(S){return t=S,n},rollup:function(S){return r=S,n}}};function sg(){return{}}function ug(e,i,t){e[i]=t}function Tv(){return al()}function Av(e,i,t){e.set(i,t)}function ih(){}var Oc=al.prototype;ih.prototype=xv.prototype={constructor:ih,has:Oc.has,add:function(e){return e+="",this[ps+e]=e,this},remove:Oc.remove,clear:Oc.clear,values:Oc.keys,size:Oc.size,empty:Oc.empty,each:Oc.each};function xv(e,i){var t=new ih;if(e instanceof ih)e.each(function(u){t.add(u)});else if(e){var r=-1,n=e.length;if(i==null)for(;++r<n;)t.add(e[r]);else for(;++r<n;)t.add(i(e[r],r,e))}return t}var x1=xv,b1=function(e){var i=[];for(var t in e)i.push(t);return i},_1=function(e){var i=[];for(var t in e)i.push(e[t]);return i},C1=function(e){var i=[];for(var t in e)i.push({key:t,value:e[t]});return i},bv=Array.prototype,ah=bv.map,Pc=bv.slice,_v={name:"implicit"};function ol(){var e=al(),i=[],t=[],r=_v;function n(u){var h=u+"",S=e.get(h);if(!S){if(r!==_v)return r;e.set(h,S=i.push(u))}return t[(S-1)%t.length]}return n.domain=function(u){if(!arguments.length)return i.slice();i=[],e=al();for(var h=-1,S=u.length,x,N;++h<S;)e.has(N=(x=u[h])+"")||e.set(N,i.push(x));return n},n.range=function(u){return arguments.length?(t=Pc.call(u),n):t.slice()},n.unknown=function(u){return arguments.length?(r=u,n):r},n.copy=function(){return ol(i,t).unknown(r)},Ms.apply(n,arguments),n}function Cv(){var e=ol().unknown(void 0),i=e.domain,t=e.range,r=[0,1],n,u,h=!1,S=0,x=0,N=.5;delete e.unknown;function Y(){var V=i().length,_e=r[1]<r[0],je=r[_e-0],yt=r[1-_e];n=(yt-je)/Math.max(1,V-S+x*2),h&&(n=Math.floor(n)),je+=(yt-je-n*(V-S))*N,u=n*(1-S),h&&(je=Math.round(je),u=Math.round(u));var kt=yv(V).map(function(nr){return je+n*nr});return t(_e?kt.reverse():kt)}return e.domain=function(V){return arguments.length?(i(V),Y()):i()},e.range=function(V){return arguments.length?(r=[+V[0],+V[1]],Y()):r.slice()},e.rangeRound=function(V){return r=[+V[0],+V[1]],h=!0,Y()},e.bandwidth=function(){return u},e.step=function(){return n},e.round=function(V){return arguments.length?(h=!!V,Y()):h},e.padding=function(V){return arguments.length?(S=Math.min(1,x=+V),Y()):S},e.paddingInner=function(V){return arguments.length?(S=Math.min(1,V),Y()):S},e.paddingOuter=function(V){return arguments.length?(x=+V,Y()):x},e.align=function(V){return arguments.length?(N=Math.max(0,Math.min(1,V)),Y()):N},e.copy=function(){return Cv(i(),r).round(h).paddingInner(S).paddingOuter(x).align(N)},Ms.apply(Y(),arguments)}function Ov(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ov(i())},e}function O1(){return Ov(Cv.apply(null,arguments).paddingInner(1))}function Pv(e,i,t,r,n){var u=e*e,h=u*e;return((1-3*e+3*u-h)*i+(4-6*u+3*h)*t+(1+3*e+3*u-3*h)*r+h*n)/6}var cg=function(e){var i=e.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,i-1):Math.floor(t*i),n=e[r],u=e[r+1],h=r>0?e[r-1]:2*n-u,S=r<i-1?e[r+2]:2*u-n;return Pv((t-r/i)*i,h,n,u,S)}},fg=function(e){var i=e.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*i),n=e[(r+i-1)%i],u=e[r%i],h=e[(r+1)%i],S=e[(r+2)%i];return Pv((t-r/i)*i,n,u,h,S)}},oh=function(e){return function(){return e}};function Mv(e,i){return function(t){return e+t*i}}function lg(e,i,t){return e=Math.pow(e,t),i=Math.pow(i,t)-e,t=1/t,function(r){return Math.pow(e+r*i,t)}}function P1(e,i){var t=i-e;return t?Mv(e,t>180||t<-180?t-360*Math.round(t/360):t):oh(isNaN(e)?i:e)}function hg(e){return(e=+e)==1?Rv:function(i,t){return t-i?lg(i,t,e):oh(isNaN(i)?t:i)}}function Rv(e,i){var t=i-e;return t?Mv(e,t):oh(isNaN(e)?i:e)}var Iv=function e(i){var t=hg(i);function r(n,u){var h=t((n=Object(_f.b)(n)).r,(u=Object(_f.b)(u)).r),S=t(n.g,u.g),x=t(n.b,u.b),N=Rv(n.opacity,u.opacity);return function(Y){return n.r=h(Y),n.g=S(Y),n.b=x(Y),n.opacity=N(Y),n+""}}return r.gamma=e,r}(1);function Nv(e){return function(i){var t=i.length,r=new Array(t),n=new Array(t),u=new Array(t),h,S;for(h=0;h<t;++h)S=Object(_f.b)(i[h]),r[h]=S.r||0,n[h]=S.g||0,u[h]=S.b||0;return r=e(r),n=e(n),u=e(u),S.opacity=1,function(x){return S.r=r(x),S.g=n(x),S.b=u(x),S+""}}}var M1=Nv(cg),R1=Nv(fg),Lv=function(e,i){i||(i=[]);var t=e?Math.min(i.length,e.length):0,r=i.slice(),n;return function(u){for(n=0;n<t;++n)r[n]=e[n]*(1-u)+i[n]*u;return r}};function wv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var I1=function(e,i){return(wv(i)?Lv:Dv)(e,i)};function Dv(e,i){var t=i?i.length:0,r=e?Math.min(t,e.length):0,n=new Array(r),u=new Array(t),h;for(h=0;h<r;++h)n[h]=Zh(e[h],i[h]);for(;h<t;++h)u[h]=i[h];return function(S){for(h=0;h<r;++h)u[h]=n[h](S);return u}}var dg=function(e,i){var t=new Date;return e=+e,i=+i,function(r){return t.setTime(e*(1-r)+i*r),t}},sh=function(e,i){return e=+e,i=+i,function(t){return e*(1-t)+i*t}},vg=function(e,i){var t={},r={},n;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(n in i)n in e?t[n]=Zh(e[n],i[n]):r[n]=i[n];return function(u){for(n in t)r[n]=t[n](u);return r}},Wh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yh=new RegExp(Wh.source,"g");function pg(e){return function(){return e}}function mg(e){return function(i){return e(i)+""}}var gg=function(e,i){var t=Wh.lastIndex=Yh.lastIndex=0,r,n,u,h=-1,S=[],x=[];for(e=e+"",i=i+"";(r=Wh.exec(e))&&(n=Yh.exec(i));)(u=n.index)>t&&(u=i.slice(t,u),S[h]?S[h]+=u:S[++h]=u),(r=r[0])===(n=n[0])?S[h]?S[h]+=n:S[++h]=n:(S[++h]=null,x.push({i:h,x:sh(r,n)})),t=Yh.lastIndex;return t<i.length&&(u=i.slice(t),S[h]?S[h]+=u:S[++h]=u),S.length<2?x[0]?mg(x[0].x):pg(i):(i=x.length,function(N){for(var Y=0,V;Y<i;++Y)S[(V=x[Y]).i]=V.x(N);return S.join("")})},Zh=function(e,i){var t=typeof i,r;return i==null||t==="boolean"?oh(i):(t==="number"?sh:t==="string"?(r=Object(_f.a)(i))?(i=r,Iv):gg:i instanceof _f.a?Iv:i instanceof Date?dg:wv(i)?Lv:Array.isArray(i)?Dv:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?vg:sh)(e,i)},yg=function(e,i){return e=+e,i=+i,function(t){return Math.round(e*(1-t)+i*t)}},Eg=function(e){return function(){return e}},Kh=function(e){return+e},Fv=[0,1];function Io(e){return e}function Qh(e,i){return(i-=e=+e)?function(t){return(t-e)/i}:Eg(isNaN(i)?NaN:.5)}function Bv(e){var i=e[0],t=e[e.length-1],r;return i>t&&(r=i,i=t,t=r),function(n){return Math.max(i,Math.min(t,n))}}function Sg(e,i,t){var r=e[0],n=e[1],u=i[0],h=i[1];return n<r?(r=Qh(n,r),u=t(h,u)):(r=Qh(r,n),u=t(u,h)),function(S){return u(r(S))}}function Tg(e,i,t){var r=Math.min(e.length,i.length)-1,n=new Array(r),u=new Array(r),h=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++h<r;)n[h]=Qh(e[h],e[h+1]),u[h]=t(i[h],i[h+1]);return function(S){var x=Mf(e,S,1,r)-1;return u[x](n[x](S))}}function sl(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uh(){var e=Fv,i=Fv,t=Zh,r,n,u,h=Io,S,x,N;function Y(){return S=Math.min(e.length,i.length)>2?Tg:Sg,x=N=null,V}function V(_e){return isNaN(_e=+_e)?u:(x||(x=S(e.map(r),i,t)))(r(h(_e)))}return V.invert=function(_e){return h(n((N||(N=S(i,e.map(r),sh)))(_e)))},V.domain=function(_e){return arguments.length?(e=ah.call(_e,Kh),h===Io||(h=Bv(e)),Y()):e.slice()},V.range=function(_e){return arguments.length?(i=Pc.call(_e),Y()):i.slice()},V.rangeRound=function(_e){return i=Pc.call(_e),t=yg,Y()},V.clamp=function(_e){return arguments.length?(h=_e?Bv(e):Io,V):h!==Io},V.interpolate=function(_e){return arguments.length?(t=_e,Y()):t},V.unknown=function(_e){return arguments.length?(u=_e,V):u},function(_e,je){return r=_e,n=je,Y()}}function kv(e,i){return uh()(e,i)}var Ag=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ch(e){if(!(i=Ag.exec(e)))throw new Error("invalid format: "+e);var i;return new $h({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}ch.prototype=$h.prototype;function $h(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var xg=function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)};function fh(e,i){if((t=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"))<0)return null;var t,r=e.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+e.slice(t+1)]}var Rf=function(e){return e=fh(Math.abs(e)),e?e[1]:NaN},bg=function(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rf(i)/3)))*3-Rf(Math.abs(e)))},_g=function(e,i){return function(t,r){for(var n=t.length,u=[],h=0,S=e[0],x=0;n>0&&S>0&&(x+S+1>r&&(S=Math.max(1,r-x)),u.push(t.substring(n-=S,n+S)),!((x+=S+1)>r));)S=e[h=(h+1)%e.length];return u.reverse().join(i)}},Cg=function(e){return function(i){return i.replace(/[0-9]/g,function(t){return e[+t]})}},Og=function(e){e:for(var i=e.length,t=1,r=-1,n;t<i;++t)switch(e[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+e[t])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(n+1):e},Uv,Pg=function(e,i){var t=fh(e,i);if(!t)return e+"";var r=t[0],n=t[1],u=n-(Uv=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,h=r.length;return u===h?r:u>h?r+new Array(u-h+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+fh(e,Math.max(0,i+u-1))[0]},jv=function(e,i){var t=fh(e,i);if(!t)return e+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")},Gv={"%":function(e,i){return(e*100).toFixed(i)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:xg,e:function(e,i){return e.toExponential(i)},f:function(e,i){return e.toFixed(i)},g:function(e,i){return e.toPrecision(i)},o:function(e){return Math.round(e).toString(8)},p:function(e,i){return jv(e*100,i)},r:jv,s:Pg,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Hv=function(e){return e},Vv=Array.prototype.map,zv=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],Mg=function(e){var i=e.grouping===void 0||e.thousands===void 0?Hv:_g(Vv.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?Hv:Cg(Vv.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",S=e.minus===void 0?"-":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function N(V){V=ch(V);var _e=V.fill,je=V.align,yt=V.sign,kt=V.symbol,nr=V.zero,gr=V.width,yr=V.comma,Vr=V.precision,hn=V.trim,Dn=V.type;Dn==="n"?(yr=!0,Dn="g"):Gv[Dn]||(Vr===void 0&&(Vr=12),hn=!0,Dn="g"),(nr||_e==="0"&&je==="=")&&(nr=!0,_e="0",je="=");var Rn=kt==="$"?t:kt==="#"&&/[boxX]/.test(Dn)?"0"+Dn.toLowerCase():"",en=kt==="$"?r:/[%p]/.test(Dn)?h:"",Ln=Gv[Dn],ii=/[defgprs%]/.test(Dn);Vr=Vr===void 0?6:/[gprs]/.test(Dn)?Math.max(1,Math.min(21,Vr)):Math.max(0,Math.min(20,Vr));function oi(Sn){var fi=Rn,_i=en,bo,ms,So;if(Dn==="c")_i=Ln(Sn)+_i,Sn="";else{Sn=+Sn;var Is=Sn<0||1/Sn<0;if(Sn=isNaN(Sn)?x:Ln(Math.abs(Sn),Vr),hn&&(Sn=Og(Sn)),Is&&+Sn==0&&yt!=="+"&&(Is=!1),fi=(Is?yt==="("?yt:S:yt==="-"||yt==="("?"":yt)+fi,_i=(Dn==="s"?zv[8+Uv/3]:"")+_i+(Is&&yt==="("?")":""),ii){for(bo=-1,ms=Sn.length;++bo<ms;)if(So=Sn.charCodeAt(bo),48>So||So>57){_i=(So===46?n+Sn.slice(bo+1):Sn.slice(bo))+_i,Sn=Sn.slice(0,bo);break}}}yr&&!nr&&(Sn=i(Sn,Infinity));var gs=fi.length+Sn.length+_i.length,es=gs<gr?new Array(gr-gs+1).join(_e):"";switch(yr&&nr&&(Sn=i(es+Sn,es.length?gr-_i.length:Infinity),es=""),je){case"<":Sn=fi+Sn+_i+es;break;case"=":Sn=fi+es+Sn+_i;break;case"^":Sn=es.slice(0,gs=es.length>>1)+fi+Sn+_i+es.slice(gs);break;default:Sn=es+fi+Sn+_i;break}return u(Sn)}return oi.toString=function(){return V+""},oi}function Y(V,_e){var je=N((V=ch(V),V.type="f",V)),yt=Math.max(-8,Math.min(8,Math.floor(Rf(_e)/3)))*3,kt=Math.pow(10,-yt),nr=zv[8+yt/3];return function(gr){return je(kt*gr)+nr}}return{format:N,formatPrefix:Y}},lh,Jh,Xv;Rg({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Rg(e){return lh=Mg(e),Jh=lh.format,Xv=lh.formatPrefix,lh}var Ig=function(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Rf(i)-Rf(e))+1},Ng=function(e){return Math.max(0,-Rf(Math.abs(e)))},Lg=function(e,i,t,r){var n=th(e,i,t),u;switch(r=ch(r==null?",f":r),r.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(i));return r.precision==null&&!isNaN(u=bg(n,h))&&(r.precision=u),Xv(r,h)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(u=Ig(n,Math.max(Math.abs(e),Math.abs(i))))&&(r.precision=u-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(u=Ng(n))&&(r.precision=u-(r.type==="%")*2);break}}return Jh(r)};function Mc(e){var i=e.domain;return e.ticks=function(t){var r=i();return Ev(r[0],r[r.length-1],t==null?10:t)},e.tickFormat=function(t,r){var n=i();return Lg(n[0],n[n.length-1],t==null?10:t,r)},e.nice=function(t){t==null&&(t=10);var r=i(),n=0,u=r.length-1,h=r[n],S=r[u],x;return S<h&&(x=h,h=S,S=x,x=n,n=u,u=x),x=eh(h,S,t),x>0?(h=Math.floor(h/x)*x,S=Math.ceil(S/x)*x,x=eh(h,S,t)):x<0&&(h=Math.ceil(h*x)/x,S=Math.floor(S*x)/x,x=eh(h,S,t)),x>0?(r[n]=Math.floor(h/x)*x,r[u]=Math.ceil(S/x)*x,i(r)):x<0&&(r[n]=Math.ceil(h*x)/x,r[u]=Math.floor(S*x)/x,i(r)),e},e}function Wv(){var e=kv(Io,Io);return e.copy=function(){return sl(e,Wv())},Ms.apply(e,arguments),Mc(e)}function Yv(e){var i;function t(r){return isNaN(r=+r)?i:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(e=ah.call(r,Kh),t):e.slice()},t.unknown=function(r){return arguments.length?(i=r,t):i},t.copy=function(){return Yv(e).unknown(i)},e=arguments.length?ah.call(e,Kh):[0,1],Mc(t)}var Zv=function(e,i){e=e.slice();var t=0,r=e.length-1,n=e[t],u=e[r],h;return u<n&&(h=t,t=r,r=h,h=n,n=u,u=h),e[t]=i.floor(n),e[r]=i.ceil(u),e};function Kv(e){return Math.log(e)}function Qv(e){return Math.exp(e)}function wg(e){return-Math.log(-e)}function Dg(e){return-Math.exp(-e)}function Fg(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Bg(e){return e===10?Fg:e===Math.E?Math.exp:function(i){return Math.pow(e,i)}}function kg(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(i){return Math.log(i)/e})}function $v(e){return function(i){return-e(-i)}}function qh(e){var i=e(Kv,Qv),t=i.domain,r=10,n,u;function h(){return n=kg(r),u=Bg(r),t()[0]<0?(n=$v(n),u=$v(u),e(wg,Dg)):e(Kv,Qv),i}return i.base=function(S){return arguments.length?(r=+S,h()):r},i.domain=function(S){return arguments.length?(t(S),h()):t()},i.ticks=function(S){var x=t(),N=x[0],Y=x[x.length-1],V;(V=Y<N)&&(_e=N,N=Y,Y=_e);var _e=n(N),je=n(Y),yt,kt,nr,gr=S==null?10:+S,yr=[];if(!(r%1)&&je-_e<gr){if(_e=Math.round(_e)-1,je=Math.round(je)+1,N>0){for(;_e<je;++_e)for(kt=1,yt=u(_e);kt<r;++kt)if(nr=yt*kt,!(nr<N)){if(nr>Y)break;yr.push(nr)}}else for(;_e<je;++_e)for(kt=r-1,yt=u(_e);kt>=1;--kt)if(nr=yt*kt,!(nr<N)){if(nr>Y)break;yr.push(nr)}}else yr=Ev(_e,je,Math.min(je-_e,gr)).map(u);return V?yr.reverse():yr},i.tickFormat=function(S,x){if(x==null&&(x=r===10?".0e":","),typeof x!="function"&&(x=Jh(x)),S===Infinity)return x;S==null&&(S=10);var N=Math.max(1,r*S/i.ticks().length);return function(Y){var V=Y/u(Math.round(n(Y)));return V*r<r-.5&&(V*=r),V<=N?x(Y):""}},i.nice=function(){return t(Zv(t(),{floor:function(S){return u(Math.floor(n(S)))},ceil:function(S){return u(Math.ceil(n(S)))}}))},i}function Jv(){var e=qh(uh()).domain([1,10]);return e.copy=function(){return sl(e,Jv()).base(e.base())},Ms.apply(e,arguments),e}function qv(e){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/e))}}function ep(e){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*e}}function ed(e){var i=1,t=e(qv(i),ep(i));return t.constant=function(r){return arguments.length?e(qv(i=+r),ep(i)):i},Mc(t)}function Ug(){var e=ed(uh());return e.copy=function(){return sl(e,Ug()).constant(e.constant())},Ms.apply(e,arguments)}function tp(e){return function(i){return i<0?-Math.pow(-i,e):Math.pow(i,e)}}function jg(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Gg(e){return e<0?-e*e:e*e}function td(e){var i=e(Io,Io),t=1;function r(){return t===1?e(Io,Io):t===.5?e(jg,Gg):e(tp(t),tp(1/t))}return i.exponent=function(n){return arguments.length?(t=+n,r()):t},Mc(i)}function rd(){var e=td(uh());return e.copy=function(){return sl(e,rd()).exponent(e.exponent())},Ms.apply(e,arguments),e}function N1(){return rd.apply(null,arguments).exponent(.5)}function rp(){var e=[],i=[],t=[],r;function n(){var h=0,S=Math.max(1,i.length);for(t=new Array(S-1);++h<S;)t[h-1]=rh(e,h/S);return u}function u(h){return isNaN(h=+h)?r:i[Mf(t,h)]}return u.invertExtent=function(h){var S=i.indexOf(h);return S<0?[NaN,NaN]:[S>0?t[S-1]:e[0],S<t.length?t[S]:e[e.length-1]]},u.domain=function(h){if(!arguments.length)return e.slice();e=[];for(var S=0,x=h.length,N;S<x;++S)N=h[S],N!=null&&!isNaN(N=+N)&&e.push(N);return e.sort(Cc),n()},u.range=function(h){return arguments.length?(i=Pc.call(h),n()):i.slice()},u.unknown=function(h){return arguments.length?(r=h,u):r},u.quantiles=function(){return t.slice()},u.copy=function(){return rp().domain(e).range(i).unknown(r)},Ms.apply(u,arguments)}function np(){var e=0,i=1,t=1,r=[.5],n=[0,1],u;function h(x){return x<=x?n[Mf(r,x,0,t)]:u}function S(){var x=-1;for(r=new Array(t);++x<t;)r[x]=((x+1)*i-(x-t)*e)/(t+1);return h}return h.domain=function(x){return arguments.length?(e=+x[0],i=+x[1],S()):[e,i]},h.range=function(x){return arguments.length?(t=(n=Pc.call(x)).length-1,S()):n.slice()},h.invertExtent=function(x){var N=n.indexOf(x);return N<0?[NaN,NaN]:N<1?[e,r[0]]:N>=t?[r[t-1],i]:[r[N-1],r[N]]},h.unknown=function(x){return arguments.length&&(u=x),h},h.thresholds=function(){return r.slice()},h.copy=function(){return np().domain([e,i]).range(n).unknown(u)},Ms.apply(Mc(h),arguments)}function ip(){var e=[.5],i=[0,1],t,r=1;function n(u){return u<=u?i[Mf(e,u,0,r)]:t}return n.domain=function(u){return arguments.length?(e=Pc.call(u),r=Math.min(e.length,i.length-1),n):e.slice()},n.range=function(u){return arguments.length?(i=Pc.call(u),r=Math.min(e.length,i.length-1),n):i.slice()},n.invertExtent=function(u){var h=i.indexOf(u);return[e[h-1],e[h]]},n.unknown=function(u){return arguments.length?(t=u,n):t},n.copy=function(){return ip().domain(e).range(i).unknown(t)},Ms.apply(n,arguments)}var nd=new Date,id=new Date;function Ao(e,i,t,r){function n(u){return e(u=arguments.length===0?new Date:new Date(+u)),u}return n.floor=function(u){return e(u=new Date(+u)),u},n.ceil=function(u){return e(u=new Date(u-1)),i(u,1),e(u),u},n.round=function(u){var h=n(u),S=n.ceil(u);return u-h<S-u?h:S},n.offset=function(u,h){return i(u=new Date(+u),h==null?1:Math.floor(h)),u},n.range=function(u,h,S){var x=[],N;if(u=n.ceil(u),S=S==null?1:Math.floor(S),!(u<h)||!(S>0))return x;do x.push(N=new Date(+u)),i(u,S),e(u);while(N<u&&u<h);return x},n.filter=function(u){return Ao(function(h){if(h>=h)for(;e(h),!u(h);)h.setTime(h-1)},function(h,S){if(h>=h)if(S<0)for(;++S<=0;)for(;i(h,-1),!u(h););else for(;--S>=0;)for(;i(h,1),!u(h););})},t&&(n.count=function(u,h){return nd.setTime(+u),id.setTime(+h),e(nd),e(id),Math.floor(t(nd,id))},n.every=function(u){return u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?n.filter(r?function(h){return r(h)%u==0}:function(h){return n.count(0,h)%u==0}):n}),n}var ad=Ao(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,i){e.setFullYear(e.getFullYear()+i)},function(e,i){return i.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});ad.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ao(function(i){i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,t){i.setFullYear(i.getFullYear()+t*e)})};var If=ad,L1=ad.range,ap=Ao(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,i){e.setMonth(e.getMonth()+i)},function(e,i){return i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Hg=ap,w1=ap.range,hh=1e3,Rc=6e4,dh=36e5,op=864e5,sp=6048e5;function Ic(e){return Ao(function(i){i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},function(i,t){i.setDate(i.getDate()+t*7)},function(i,t){return(t-i-(t.getTimezoneOffset()-i.getTimezoneOffset())*Rc)/sp})}var od=Ic(0),vh=Ic(1),Vg=Ic(2),zg=Ic(3),Nf=Ic(4),Xg=Ic(5),Wg=Ic(6),D1=od.range,F1=vh.range,B1=Vg.range,k1=zg.range,U1=Nf.range,j1=Xg.range,G1=Wg.range,up=Ao(function(e){e.setHours(0,0,0,0)},function(e,i){e.setDate(e.getDate()+i)},function(e,i){return(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*Rc)/op},function(e){return e.getDate()-1}),sd=up,H1=up.range,cp=Ao(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*hh-e.getMinutes()*Rc)},function(e,i){e.setTime(+e+i*dh)},function(e,i){return(i-e)/dh},function(e){return e.getHours()}),Yg=cp,V1=cp.range,fp=Ao(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*hh)},function(e,i){e.setTime(+e+i*Rc)},function(e,i){return(i-e)/Rc},function(e){return e.getMinutes()}),Zg=fp,z1=fp.range,lp=Ao(function(e){e.setTime(e-e.getMilliseconds())},function(e,i){e.setTime(+e+i*hh)},function(e,i){return(i-e)/hh},function(e){return e.getUTCSeconds()}),hp=lp,X1=lp.range,ph=Ao(function(){},function(e,i){e.setTime(+e+i)},function(e,i){return i-e});ph.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ao(function(i){i.setTime(Math.floor(i/e)*e)},function(i,t){i.setTime(+i+t*e)},function(i,t){return(t-i)/e}):ph};var dp=ph,W1=ph.range;function Nc(e){return Ao(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCDate(i.getUTCDate()+t*7)},function(i,t){return(t-i)/sp})}var ud=Nc(0),mh=Nc(1),Kg=Nc(2),Qg=Nc(3),Lf=Nc(4),$g=Nc(5),Jg=Nc(6),Y1=ud.range,Z1=mh.range,K1=Kg.range,Q1=Qg.range,$1=Lf.range,J1=$g.range,q1=Jg.range,vp=Ao(function(e){e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCDate(e.getUTCDate()+i)},function(e,i){return(i-e)/op},function(e){return e.getUTCDate()-1}),cd=vp,eS=vp.range,fd=Ao(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i)},function(e,i){return i.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});fd.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ao(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCFullYear(i.getUTCFullYear()+t*e)})};var wf=fd,tS=fd.range;function ld(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hd(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ul(e,i,t){return{y:e,m:i,d:t,H:0,M:0,S:0,L:0}}function qg(e){var i=e.dateTime,t=e.date,r=e.time,n=e.periods,u=e.days,h=e.shortDays,S=e.months,x=e.shortMonths,N=cl(n),Y=fl(n),V=cl(u),_e=fl(u),je=cl(h),yt=fl(h),kt=cl(S),nr=fl(S),gr=cl(x),yr=fl(x),Vr={a:Is,A:gs,b:es,B:Bf,c:null,d:Sp,e:Sp,f:xy,g:Ly,G:Dy,H:Sy,I:Ty,j:Ay,L:Tp,m:by,M:_y,p:DE,q:FE,Q:Op,s:Pp,S:Cy,u:Oy,U:Py,V:My,w:Ry,W:Iy,x:null,X:null,y:Ny,Y:wy,Z:Fy,"%":Cp},hn={a:BE,A:kE,b:UE,B:jE,c:null,d:xp,e:xp,f:jy,g:Qy,G:Jy,H:By,I:ky,j:Uy,L:bp,m:Gy,M:Hy,p:GE,q:HE,Q:Op,s:Pp,S:Vy,u:zy,U:Xy,V:Wy,w:Yy,W:Zy,x:null,X:null,y:Ky,Y:$y,Z:qy,"%":Cp},Dn={a:oi,A:Sn,b:fi,B:_i,c:bo,d:yp,e:yp,f:py,g:gp,G:mp,H:Ep,I:Ep,j:ly,L:vy,m:fy,M:hy,p:ii,q:cy,Q:yy,s:Ey,S:dy,u:iy,U:ay,V:oy,w:ny,W:sy,x:ms,X:So,y:gp,Y:mp,Z:uy,"%":gy};Vr.x=Rn(t,Vr),Vr.X=Rn(r,Vr),Vr.c=Rn(i,Vr),hn.x=Rn(t,hn),hn.X=Rn(r,hn),hn.c=Rn(i,hn);function Rn(Xn,Ki){return function(da){var fn=[],Vo=-1,Ga=0,ts=Xn.length,rs,Lc,S0;for(da instanceof Date||(da=new Date(+da));++Vo<ts;)Xn.charCodeAt(Vo)===37&&(fn.push(Xn.slice(Ga,Vo)),(Lc=pp[rs=Xn.charAt(++Vo)])!=null?rs=Xn.charAt(++Vo):Lc=rs==="e"?" ":"0",(S0=Ki[rs])&&(rs=S0(da,Lc)),fn.push(rs),Ga=Vo+1);return fn.push(Xn.slice(Ga,Vo)),fn.join("")}}function en(Xn,Ki){return function(da){var fn=ul(1900,void 0,1),Vo=Ln(fn,Xn,da+="",0),Ga,ts;if(Vo!=da.length)return null;if("Q"in fn)return new Date(fn.Q);if("s"in fn)return new Date(fn.s*1e3+("L"in fn?fn.L:0));if(Ki&&!("Z"in fn)&&(fn.Z=0),"p"in fn&&(fn.H=fn.H%12+fn.p*12),fn.m===void 0&&(fn.m="q"in fn?fn.q:0),"V"in fn){if(fn.V<1||fn.V>53)return null;"w"in fn||(fn.w=1),"Z"in fn?(Ga=hd(ul(fn.y,0,1)),ts=Ga.getUTCDay(),Ga=ts>4||ts===0?mh.ceil(Ga):mh(Ga),Ga=cd.offset(Ga,(fn.V-1)*7),fn.y=Ga.getUTCFullYear(),fn.m=Ga.getUTCMonth(),fn.d=Ga.getUTCDate()+(fn.w+6)%7):(Ga=ld(ul(fn.y,0,1)),ts=Ga.getDay(),Ga=ts>4||ts===0?vh.ceil(Ga):vh(Ga),Ga=sd.offset(Ga,(fn.V-1)*7),fn.y=Ga.getFullYear(),fn.m=Ga.getMonth(),fn.d=Ga.getDate()+(fn.w+6)%7)}else("W"in fn||"U"in fn)&&("w"in fn||(fn.w="u"in fn?fn.u%7:"W"in fn?1:0),ts="Z"in fn?hd(ul(fn.y,0,1)).getUTCDay():ld(ul(fn.y,0,1)).getDay(),fn.m=0,fn.d="W"in fn?(fn.w+6)%7+fn.W*7-(ts+5)%7:fn.w+fn.U*7-(ts+6)%7);return"Z"in fn?(fn.H+=fn.Z/100|0,fn.M+=fn.Z%100,hd(fn)):ld(fn)}}function Ln(Xn,Ki,da,fn){for(var Vo=0,Ga=Ki.length,ts=da.length,rs,Lc;Vo<Ga;){if(fn>=ts)return-1;if(rs=Ki.charCodeAt(Vo++),rs===37){if(rs=Ki.charAt(Vo++),Lc=Dn[rs in pp?Ki.charAt(Vo++):rs],!Lc||(fn=Lc(Xn,da,fn))<0)return-1}else if(rs!=da.charCodeAt(fn++))return-1}return fn}function ii(Xn,Ki,da){var fn=N.exec(Ki.slice(da));return fn?(Xn.p=Y[fn[0].toLowerCase()],da+fn[0].length):-1}function oi(Xn,Ki,da){var fn=je.exec(Ki.slice(da));return fn?(Xn.w=yt[fn[0].toLowerCase()],da+fn[0].length):-1}function Sn(Xn,Ki,da){var fn=V.exec(Ki.slice(da));return fn?(Xn.w=_e[fn[0].toLowerCase()],da+fn[0].length):-1}function fi(Xn,Ki,da){var fn=gr.exec(Ki.slice(da));return fn?(Xn.m=yr[fn[0].toLowerCase()],da+fn[0].length):-1}function _i(Xn,Ki,da){var fn=kt.exec(Ki.slice(da));return fn?(Xn.m=nr[fn[0].toLowerCase()],da+fn[0].length):-1}function bo(Xn,Ki,da){return Ln(Xn,i,Ki,da)}function ms(Xn,Ki,da){return Ln(Xn,t,Ki,da)}function So(Xn,Ki,da){return Ln(Xn,r,Ki,da)}function Is(Xn){return h[Xn.getDay()]}function gs(Xn){return u[Xn.getDay()]}function es(Xn){return x[Xn.getMonth()]}function Bf(Xn){return S[Xn.getMonth()]}function DE(Xn){return n[+(Xn.getHours()>=12)]}function FE(Xn){return 1+~~(Xn.getMonth()/3)}function BE(Xn){return h[Xn.getUTCDay()]}function kE(Xn){return u[Xn.getUTCDay()]}function UE(Xn){return x[Xn.getUTCMonth()]}function jE(Xn){return S[Xn.getUTCMonth()]}function GE(Xn){return n[+(Xn.getUTCHours()>=12)]}function HE(Xn){return 1+~~(Xn.getUTCMonth()/3)}return{format:function(Xn){var Ki=Rn(Xn+="",Vr);return Ki.toString=function(){return Xn},Ki},parse:function(Xn){var Ki=en(Xn+="",!1);return Ki.toString=function(){return Xn},Ki},utcFormat:function(Xn){var Ki=Rn(Xn+="",hn);return Ki.toString=function(){return Xn},Ki},utcParse:function(Xn){var Ki=en(Xn+="",!0);return Ki.toString=function(){return Xn},Ki}}}var pp={"-":"",_:" ","0":"0"},xo=/^\s*\d+/,ey=/^%/,ty=/[\\^$*+?|[\]().{}]/g;function ha(e,i,t){var r=e<0?"-":"",n=(r?-e:e)+"",u=n.length;return r+(u<t?new Array(t-u+1).join(i)+n:n)}function ry(e){return e.replace(ty,"\\$&")}function cl(e){return new RegExp("^(?:"+e.map(ry).join("|")+")","i")}function fl(e){for(var i={},t=-1,r=e.length;++t<r;)i[e[t].toLowerCase()]=t;return i}function ny(e,i,t){var r=xo.exec(i.slice(t,t+1));return r?(e.w=+r[0],t+r[0].length):-1}function iy(e,i,t){var r=xo.exec(i.slice(t,t+1));return r?(e.u=+r[0],t+r[0].length):-1}function ay(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.U=+r[0],t+r[0].length):-1}function oy(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.V=+r[0],t+r[0].length):-1}function sy(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.W=+r[0],t+r[0].length):-1}function mp(e,i,t){var r=xo.exec(i.slice(t,t+4));return r?(e.y=+r[0],t+r[0].length):-1}function gp(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function uy(e,i,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(t,t+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function cy(e,i,t){var r=xo.exec(i.slice(t,t+1));return r?(e.q=r[0]*3-3,t+r[0].length):-1}function fy(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.m=r[0]-1,t+r[0].length):-1}function yp(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.d=+r[0],t+r[0].length):-1}function ly(e,i,t){var r=xo.exec(i.slice(t,t+3));return r?(e.m=0,e.d=+r[0],t+r[0].length):-1}function Ep(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.H=+r[0],t+r[0].length):-1}function hy(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.M=+r[0],t+r[0].length):-1}function dy(e,i,t){var r=xo.exec(i.slice(t,t+2));return r?(e.S=+r[0],t+r[0].length):-1}function vy(e,i,t){var r=xo.exec(i.slice(t,t+3));return r?(e.L=+r[0],t+r[0].length):-1}function py(e,i,t){var r=xo.exec(i.slice(t,t+6));return r?(e.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function gy(e,i,t){var r=ey.exec(i.slice(t,t+1));return r?t+r[0].length:-1}function yy(e,i,t){var r=xo.exec(i.slice(t));return r?(e.Q=+r[0],t+r[0].length):-1}function Ey(e,i,t){var r=xo.exec(i.slice(t));return r?(e.s=+r[0],t+r[0].length):-1}function Sp(e,i){return ha(e.getDate(),i,2)}function Sy(e,i){return ha(e.getHours(),i,2)}function Ty(e,i){return ha(e.getHours()%12||12,i,2)}function Ay(e,i){return ha(1+sd.count(If(e),e),i,3)}function Tp(e,i){return ha(e.getMilliseconds(),i,3)}function xy(e,i){return Tp(e,i)+"000"}function by(e,i){return ha(e.getMonth()+1,i,2)}function _y(e,i){return ha(e.getMinutes(),i,2)}function Cy(e,i){return ha(e.getSeconds(),i,2)}function Oy(e){var i=e.getDay();return i===0?7:i}function Py(e,i){return ha(od.count(If(e)-1,e),i,2)}function Ap(e){var i=e.getDay();return i>=4||i===0?Nf(e):Nf.ceil(e)}function My(e,i){return e=Ap(e),ha(Nf.count(If(e),e)+(If(e).getDay()===4),i,2)}function Ry(e){return e.getDay()}function Iy(e,i){return ha(vh.count(If(e)-1,e),i,2)}function Ny(e,i){return ha(e.getFullYear()%100,i,2)}function Ly(e,i){return e=Ap(e),ha(e.getFullYear()%100,i,2)}function wy(e,i){return ha(e.getFullYear()%1e4,i,4)}function Dy(e,i){var t=e.getDay();return e=t>=4||t===0?Nf(e):Nf.ceil(e),ha(e.getFullYear()%1e4,i,4)}function Fy(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+ha(i/60|0,"0",2)+ha(i%60,"0",2)}function xp(e,i){return ha(e.getUTCDate(),i,2)}function By(e,i){return ha(e.getUTCHours(),i,2)}function ky(e,i){return ha(e.getUTCHours()%12||12,i,2)}function Uy(e,i){return ha(1+cd.count(wf(e),e),i,3)}function bp(e,i){return ha(e.getUTCMilliseconds(),i,3)}function jy(e,i){return bp(e,i)+"000"}function Gy(e,i){return ha(e.getUTCMonth()+1,i,2)}function Hy(e,i){return ha(e.getUTCMinutes(),i,2)}function Vy(e,i){return ha(e.getUTCSeconds(),i,2)}function zy(e){var i=e.getUTCDay();return i===0?7:i}function Xy(e,i){return ha(ud.count(wf(e)-1,e),i,2)}function _p(e){var i=e.getUTCDay();return i>=4||i===0?Lf(e):Lf.ceil(e)}function Wy(e,i){return e=_p(e),ha(Lf.count(wf(e),e)+(wf(e).getUTCDay()===4),i,2)}function Yy(e){return e.getUTCDay()}function Zy(e,i){return ha(mh.count(wf(e)-1,e),i,2)}function Ky(e,i){return ha(e.getUTCFullYear()%100,i,2)}function Qy(e,i){return e=_p(e),ha(e.getUTCFullYear()%100,i,2)}function $y(e,i){return ha(e.getUTCFullYear()%1e4,i,4)}function Jy(e,i){var t=e.getUTCDay();return e=t>=4||t===0?Lf(e):Lf.ceil(e),ha(e.getUTCFullYear()%1e4,i,4)}function qy(){return"+0000"}function Cp(){return"%"}function Op(e){return+e}function Pp(e){return Math.floor(+e/1e3)}var Df,Mp,eE,Rp,tE;rE({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rE(e){return Df=qg(e),Mp=Df.format,eE=Df.parse,Rp=Df.utcFormat,tE=Df.utcParse,Df}var ll=1e3,hl=ll*60,dl=hl*60,vl=dl*24,nE=vl*7,Ip=vl*30,dd=vl*365;function iE(e){return new Date(e)}function aE(e){return e instanceof Date?+e:+new Date(+e)}function vd(e,i,t,r,n,u,h,S,x){var N=kv(Io,Io),Y=N.invert,V=N.domain,_e=x(".%L"),je=x(":%S"),yt=x("%I:%M"),kt=x("%I %p"),nr=x("%a %d"),gr=x("%b %d"),yr=x("%B"),Vr=x("%Y"),hn=[[h,1,ll],[h,5,5*ll],[h,15,15*ll],[h,30,30*ll],[u,1,hl],[u,5,5*hl],[u,15,15*hl],[u,30,30*hl],[n,1,dl],[n,3,3*dl],[n,6,6*dl],[n,12,12*dl],[r,1,vl],[r,2,2*vl],[t,1,nE],[i,1,Ip],[i,3,3*Ip],[e,1,dd]];function Dn(en){return(h(en)<en?_e:u(en)<en?je:n(en)<en?yt:r(en)<en?kt:i(en)<en?t(en)<en?nr:gr:e(en)<en?yr:Vr)(en)}function Rn(en,Ln,ii,oi){if(en==null&&(en=10),typeof en=="number"){var Sn=Math.abs(ii-Ln)/en,fi=dv(function(_i){return _i[2]}).right(hn,Sn);fi===hn.length?(oi=th(Ln/dd,ii/dd,en),en=e):fi?(fi=hn[Sn/hn[fi-1][2]<hn[fi][2]/Sn?fi-1:fi],oi=fi[1],en=fi[0]):(oi=Math.max(th(Ln,ii,en),1),en=S)}return oi==null?en:en.every(oi)}return N.invert=function(en){return new Date(Y(en))},N.domain=function(en){return arguments.length?V(ah.call(en,aE)):V().map(iE)},N.ticks=function(en,Ln){var ii=V(),oi=ii[0],Sn=ii[ii.length-1],fi=Sn<oi,_i;return fi&&(_i=oi,oi=Sn,Sn=_i),_i=Rn(en,oi,Sn,Ln),_i=_i?_i.range(oi,Sn+1):[],fi?_i.reverse():_i},N.tickFormat=function(en,Ln){return Ln==null?Dn:x(Ln)},N.nice=function(en,Ln){var ii=V();return(en=Rn(en,ii[0],ii[ii.length-1],Ln))?V(Zv(ii,en)):N},N.copy=function(){return sl(N,vd(e,i,t,r,n,u,h,S,x))},N}var oE=function(){return Ms.apply(vd(If,Hg,od,sd,Yg,Zg,hp,dp,Mp).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Np=Ao(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCMonth(e.getUTCMonth()+i)},function(e,i){return i.getUTCMonth()-e.getUTCMonth()+(i.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),sE=Np,rS=Np.range,Lp=Ao(function(e){e.setUTCMinutes(0,0,0)},function(e,i){e.setTime(+e+i*dh)},function(e,i){return(i-e)/dh},function(e){return e.getUTCHours()}),uE=Lp,nS=Lp.range,wp=Ao(function(e){e.setUTCSeconds(0,0)},function(e,i){e.setTime(+e+i*Rc)},function(e,i){return(i-e)/Rc},function(e){return e.getUTCMinutes()}),cE=wp,iS=wp.range,aS=function(){return Ms.apply(vd(wf,sE,ud,cd,uE,cE,hp,dp,Rp).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function gh(){var e=0,i=1,t,r,n,u,h=Io,S=!1,x;function N(Y){return isNaN(Y=+Y)?x:h(n===0?.5:(Y=(u(Y)-t)*n,S?Math.max(0,Math.min(1,Y)):Y))}return N.domain=function(Y){return arguments.length?(t=u(e=+Y[0]),r=u(i=+Y[1]),n=t===r?0:1/(r-t),N):[e,i]},N.clamp=function(Y){return arguments.length?(S=!!Y,N):S},N.interpolator=function(Y){return arguments.length?(h=Y,N):h},N.unknown=function(Y){return arguments.length?(x=Y,N):x},function(Y){return u=Y,t=Y(e),r=Y(i),n=t===r?0:1/(r-t),N}}function ju(e,i){return i.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fE(){var e=Mc(gh()(Io));return e.copy=function(){return ju(e,fE())},au.apply(e,arguments)}function lE(){var e=qh(gh()).domain([1,10]);return e.copy=function(){return ju(e,lE()).base(e.base())},au.apply(e,arguments)}function hE(){var e=ed(gh());return e.copy=function(){return ju(e,hE()).constant(e.constant())},au.apply(e,arguments)}function Dp(){var e=td(gh());return e.copy=function(){return ju(e,Dp()).exponent(e.exponent())},au.apply(e,arguments)}function oS(){return Dp.apply(null,arguments).exponent(.5)}function dE(){var e=[],i=Io;function t(r){if(!isNaN(r=+r))return i((Mf(e,r)-1)/(e.length-1))}return t.domain=function(r){if(!arguments.length)return e.slice();e=[];for(var n=0,u=r.length,h;n<u;++n)h=r[n],h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(Cc),t},t.interpolator=function(r){return arguments.length?(i=r,t):i},t.copy=function(){return dE(i).domain(e)},au.apply(t,arguments)}function yh(){var e=0,i=.5,t=1,r,n,u,h,S,x=Io,N,Y=!1,V;function _e(je){return isNaN(je=+je)?V:(je=.5+((je=+N(je))-n)*(je<n?h:S),x(Y?Math.max(0,Math.min(1,je)):je))}return _e.domain=function(je){return arguments.length?(r=N(e=+je[0]),n=N(i=+je[1]),u=N(t=+je[2]),h=r===n?0:.5/(n-r),S=n===u?0:.5/(u-n),_e):[e,i,t]},_e.clamp=function(je){return arguments.length?(Y=!!je,_e):Y},_e.interpolator=function(je){return arguments.length?(x=je,_e):x},_e.unknown=function(je){return arguments.length?(V=je,_e):V},function(je){return N=je,r=je(e),n=je(i),u=je(t),h=r===n?0:.5/(n-r),S=n===u?0:.5/(u-n),_e}}function vE(){var e=Mc(yh()(Io));return e.copy=function(){return ju(e,vE())},au.apply(e,arguments)}function pE(){var e=qh(yh()).domain([.1,1,10]);return e.copy=function(){return ju(e,pE()).base(e.base())},au.apply(e,arguments)}function mE(){var e=ed(yh());return e.copy=function(){return ju(e,mE()).constant(e.constant())},au.apply(e,arguments)}function Fp(){var e=td(yh());return e.copy=function(){return ju(e,Fp()).exponent(e.exponent())},au.apply(e,arguments)}function sS(){return Fp.apply(null,arguments).exponent(.5)}var Rs,Bp,kp,Up,pd,jp,gE=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,yE=(Rs={},C()(Rs,xn.LINEAR,Wv),C()(Rs,xn.POWER,rd),C()(Rs,xn.LOG,Jv),C()(Rs,xn.IDENTITY,Yv),C()(Rs,xn.TIME,oE),C()(Rs,xn.QUANTILE,rp),C()(Rs,xn.QUANTIZE,np),C()(Rs,xn.THRESHOLD,ip),C()(Rs,xn.CAT,ol),Rs),EE=(Bp=Object(cr.injectable)(),kp=Object(cr.inject)(Gt.IGlobalConfigService),Bp(Up=(pd=function(){function e(){Ce()(this,e),Yr()(this,"configService",jp,this),C()(this,"scaleCache",{}),C()(this,"scaleOptions",{})}return _t()(e,[{key:"apply",value:function(t,r){var n=this,u=r.styleAttributeService;t.hooks.init.tap("FeatureScalePlugin",function(){n.scaleOptions=t.getScaleOptions();var h=u.getLayerStyleAttributes(),S=t.getSource().data.dataArray;S.length!==0&&n.caculateScalesForAttributes(h||[],S)}),t.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){n.scaleOptions=t.getScaleOptions();var h=u.getLayerStyleAttributes(),S=t.getSource().data.dataArray;return n.caculateScalesForAttributes(h||[],S),t.layerModelNeedUpdate=!0,!0}),t.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!t.layerModelNeedUpdate){n.scaleOptions=t.getScaleOptions();var h=u.getLayerStyleAttributes();if(h){var S=t.getSource().data.dataArray;if(S.length===0)return;var x=h.filter(function(N){return N.needRescale});x.length&&n.caculateScalesForAttributes(x,S)}}})}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,r){var n=this;this.scaleCache={},t.forEach(function(u){if(u.scale){var h=u.scale,S=u.name;h.names=n.parseFields(u.scale.field||[]);var x=[];h.names.forEach(function(N){x.push(n.getOrCreateScale(N,u,r))}),x.some(function(N){return N.type===ni.VARIABLE})?(h.type=ni.VARIABLE,x.forEach(function(N){if(!h.callback){var Y;if(h.values&&h.values!=="text"){var V;if(((V=N.option)===null||V===void 0?void 0:V.type)==="linear"&&h.values.length>2){var _e=N.scale.ticks(h.values.length);S==="color"&&N.scale.domain(_e)}N.scale.range(h.values)}else((Y=N.option)===null||Y===void 0?void 0:Y.type)==="cat"&&N.scale.range(N.option.domain)}})):(h.type=ni.CONSTANT,h.defaultValues=x.map(function(N,Y){return N.scale(h.names[Y])})),h.scalers=x.map(function(N){return{field:N.field,func:N.scale,option:N.option}}),u.needRescale=!1}})}},{key:"getOrCreateScale",value:function(t,r,n){var u,h=[t,r.name].join("_"),S=(u=r.scale)===null||u===void 0?void 0:u.values,x=this.createScale(t,r.name,S,n);return x}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:Ui()(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,r,n,u){var h,S,x=this.scaleOptions[r]&&((h=this.scaleOptions[r])===null||h===void 0?void 0:h.field)===t?this.scaleOptions[r]:this.scaleOptions[t],N={field:t,scale:void 0,type:ni.VARIABLE,option:x};if(!u||!u.length)return x&&x.type?N.scale=this.createDefaultScale(x):(N.scale=ol([t]),N.type=ni.CONSTANT),N;var Y=(S=u.find(function(je){return!Wo()(je[t])}))===null||S===void 0?void 0:S[t];if(this.isNumber(t)||Wo()(Y)&&!x)N.scale=ol([t]),N.type=ni.CONSTANT;else{var V=x&&x.type||this.getDefaultType(Y);n==="text"&&(V=xn.CAT);var _e=this.createDefaultScaleConfig(V,t,u);Object.assign(_e,x),N.scale=this.createDefaultScale(_e),N.option=_e}return N}},{key:"getDefaultType",value:function(t){var r=xn.LINEAR;return typeof t=="string"&&(r=gE.test(t)?xn.TIME:xn.CAT),r}},{key:"createDefaultScaleConfig",value:function(t,r,n){var u={type:t},h=(n==null?void 0:n.map(function(S){return S[r]}))||[];return t!==xn.CAT&&t!==xn.QUANTILE?u.domain=mv(h):t===xn.CAT?u.domain=ss()(h):t===xn.QUANTILE&&(u.domain=h),u}},{key:"createDefaultScale",value:function(t){var r=t.type,n=t.domain,u=yE[r]();return n&&u.domain(n),u}}]),e}(),jp=In()(pd.prototype,"configService",[kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pd))||Up),Gp,Hp,Vp,zp,Eh,Xp,Wp;function Yp(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function SE(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?Yp(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yp(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var TE=(Gp=Object(cr.injectable)(),Hp=Object(cr.inject)(Gt.ICameraService),Vp=Object(cr.inject)(Gt.IRendererService),Gp(zp=(Eh=function(){function e(){Ce()(this,e),Yr()(this,"cameraService",Xp,this),Yr()(this,"rendererService",Wp,this)}return _t()(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){t.models.forEach(function(r){r.addUniforms(SE({},t.layerModel.getAnimateUniforms()))})})}}]),e}(),Xp=In()(Eh.prototype,"cameraService",[Hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=In()(Eh.prototype,"rendererService",[Vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh))||zp),Zp,Kp,AE=(Zp=Object(cr.injectable)(),Zp(Kp=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t){t.hooks.init.tap("LayerModelPlugin",function(){t.prepareBuildModel(),t.buildModels(),t.styleNeedUpdate=!1}),t.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return t.prepareBuildModel(),t.clearModels(),t.buildModels(),t.layerModelNeedUpdate=!1,!1})}}]),e}())||Kp),Qp,$p,xE=(Qp=Object(cr.injectable)(),Qp($p=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",function(){t.updateLayerConfig({});var r=t.getLayerConfig(),n=r.autoFit,u=r.fitBoundsOptions;n&&setTimeout(function(){t.fitBounds(u)},100)})}}]),e}())||$p),Jp,qp,bE=["type"];function e0(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);i&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function pl(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?e0(Object(t),!0).forEach(function(r){C()(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e0(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var t0={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},_E={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},CE={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},OE={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},uS=["ambient","diffuse","specular"];function PE(e){var i={u_DirectionalLights:new Array(3).fill(pl({},CE)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(pl({},OE)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[_E]),e.forEach(function(t,r){var n=t.type,u=n===void 0?"directional":n,h=yu()(t,bE),S=t0[u].lights,x=t0[u].num,N=i[x];i[S][N]=pl(pl({},i[S][N]),h),i[x]++}),i}var ME=(Jp=Object(cr.injectable)(),Jp(qp=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",function(){var r=t.getLayerConfig(),n=r.enableLighting;n&&t.models.forEach(function(u){return u.addUniforms(pl({},PE()))})})}}]),e}())||qp),r0,n0,Sh={NONE:0,ENCODE:1,HIGHLIGHT:2},RE=(r0=Object(cr.injectable)(),r0(n0=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t,r){var n=r.rendererService,u=r.styleAttributeService;t.hooks.init.tap("PixelPickingPlugin",function(){var h=!0;u.registerStyleAttribute({name:"pickingColor",type:Ei.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:mt.FLOAT},size:3,update:function(x,N){var Y=x.id;return h?Object(me.m)(Y):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var h=t.getLayerConfig(),S=h.enablePicking;S&&t.isVisible()&&t.models.forEach(function(x){return x.addUniforms({u_PickingStage:Sh.ENCODE})})}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var h=t.getLayerConfig(),S=h.enablePicking;S&&t.isVisible()&&t.models.forEach(function(x){return x.addUniforms({u_PickingStage:Sh.HIGHLIGHT})})}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",function(h){var S=t.getLayerConfig(),x=S.highlightColor,N=S.activeMix,Y=N===void 0?0:N,V=typeof x=="string"?Object(me.w)(x):x||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(me.l)(new Uint8Array(h))}),t.models.forEach(function(_e){return _e.addUniforms({u_PickingStage:Sh.HIGHLIGHT,u_PickingColor:h,u_HighlightColor:V.map(function(je){return je*255}),u_activeMix:Y})})}),t.hooks.beforeSelect.tap("PixelPickingPlugin",function(h){var S=t.getLayerConfig(),x=S.selectColor,N=S.selectMix,Y=N===void 0?0:N,V=typeof x=="string"?Object(me.w)(x):x||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(me.l)(new Uint8Array(h))}),t.models.forEach(function(_e){return _e.addUniforms({u_PickingStage:Sh.HIGHLIGHT,u_PickingColor:h,u_HighlightColor:V.map(function(je){return je*255}),u_activeMix:Y,u_CurrentSelectedId:h,u_SelectColor:V.map(function(je){return je*255}),u_EnableSelect:1})})})}}]),e}())||n0),i0,a0,IE=(i0=Object(cr.injectable)(),i0(a0=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t,r){var n=this,u=r.styleAttributeService;t.hooks.init.tap("RegisterStyleAttributePlugin",function(){n.registerBuiltinAttributes(u)})}},{key:"registerBuiltinAttributes",value:function(t){t.registerStyleAttribute({name:"position",type:Ei.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:mt.FLOAT},size:3,update:function(n,u,h){return h.length===2?[h[0],h[1],0]:[h[0],h[1],h[2]]}}}),t.registerStyleAttribute({name:"filter",type:Ei.Attribute,descriptor:{name:"filter",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:1,update:function(n,u){var h=n.filter;return h?[1]:[0]}}}),t.registerStyleAttribute({name:"color",type:Ei.Attribute,descriptor:{name:"a_Color",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:4,update:function(n,u){var h=n.color;return!h||!h.length?[1,1,1,1]:h}}}),t.registerStyleAttribute({name:"vertexId",type:Ei.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:mt.DYNAMIC_DRAW,data:[],type:mt.FLOAT},size:1,update:function(n,u,h,S){return[u]}}})}}]),e}())||a0),o0,s0,u0,c0,f0,l0,Ff,h0,d0,v0,p0,NE=(o0=Object(cr.injectable)(),s0=Object(cr.inject)(Gt.ICameraService),u0=Object(cr.inject)(Gt.ICoordinateSystemService),c0=Object(cr.inject)(Gt.IRendererService),f0=Object(cr.inject)(Gt.IMapService),o0(l0=(Ff=function(){function e(){Ce()(this,e),Yr()(this,"cameraService",h0,this),Yr()(this,"coordinateSystemService",d0,this),Yr()(this,"rendererService",v0,this),Yr()(this,"mapService",p0,this)}return _t()(e,[{key:"apply",value:function(t){var r=this,n=this.mapService.version,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[0,0];t.hooks.beforeRender.tap("ShaderUniformPlugin",function(){r.coordinateSystemService.refresh(),n==="GAODE2.x"&&(u=r.mapService.map.customCoords.getMVPMatrix(),h=r.mapService.getCustomCoordCenter());var S=r.rendererService.getViewportSize(),x=S.width,N=S.height;t.models.forEach(function(Y){var V;Y.addUniforms((V={},C()(V,Po.ProjectionMatrix,r.cameraService.getProjectionMatrix()),C()(V,Po.ViewMatrix,r.cameraService.getViewMatrix()),C()(V,Po.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),C()(V,Po.Zoom,r.cameraService.getZoom()),C()(V,Po.ZoomScale,r.cameraService.getZoomScale()),C()(V,Po.FocalDistance,r.cameraService.getFocalDistance()),C()(V,Po.CameraPosition,r.cameraService.getCameraPosition()),C()(V,ci.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),C()(V,ci.ViewportCenter,r.coordinateSystemService.getViewportCenter()),C()(V,ci.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),C()(V,ci.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),C()(V,ci.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),C()(V,ci.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),C()(V,ci.Mvp,u),C()(V,"u_SceneCenterMKT",h),C()(V,"u_ViewportSize",[x,N]),C()(V,"u_ModelMatrix",r.cameraService.getModelMatrix()),C()(V,"u_DevicePixelRatio",me.a.devicePixelRatio),C()(V,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),C()(V,"u_shaderPick",Number(t.getShaderPickStat())),V))})})}}]),e}(),h0=In()(Ff.prototype,"cameraService",[s0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d0=In()(Ff.prototype,"coordinateSystemService",[u0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v0=In()(Ff.prototype,"rendererService",[c0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p0=In()(Ff.prototype,"mapService",[f0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff))||l0),m0,g0,LE=(m0=Object(cr.injectable)(),m0(g0=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",function(){t.layerModel&&t.layerModel.needUpdate()})}}]),e}())||g0),y0,E0,wE=(y0=Object(cr.injectable)(),y0(E0=function(){function e(){Ce()(this,e)}return _t()(e,[{key:"apply",value:function(t,r){var n=this,u=r.styleAttributeService;t.hooks.init.tap("UpdateStyleAttributePlugin",function(){n.initStyleAttribute(t,{styleAttributeService:u})}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){t.layerModelNeedUpdate||n.updateStyleAtrribute(t,{styleAttributeService:u})})}},{key:"updateStyleAtrribute",value:function(t,r){var n=r.styleAttributeService,u=n.getLayerStyleAttributes()||[],h=n.getLayerStyleAttribute("filter"),S=n.getLayerStyleAttribute("shape");if(h&&h.needRegenerateVertices){t.layerModelNeedUpdate=!0,u.forEach(function(x){return x.needRegenerateVertices=!1});return}u.filter(function(x){return x.needRegenerateVertices}).forEach(function(x){n.updateAttributeByFeatureRange(x.name,t.getEncodedData(),x.featureRange.startIndex,x.featureRange.endIndex),x.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(t,r){var n=r.styleAttributeService,u=n.getLayerStyleAttributes()||[];u.filter(function(h){return h.needRegenerateVertices}).forEach(function(h){n.updateAttributeByFeatureRange(h.name,t.getEncodedData(),h.featureRange.startIndex,h.featureRange.endIndex),h.needRegenerateVertices=!1})}}]),e}())||E0);Br.bind(Gt.ILayerPlugin).to(Km).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(IE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(EE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(Zm).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(xE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(wE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(LE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(H0).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(NE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(TE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(ME).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(RE).inRequestScope(),Br.bind(Gt.ILayerPlugin).to(AE).inRequestScope();var cS="2.7.18"},P4zC:function(A,v){function a(l){return A.exports=a=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},A.exports.__esModule=!0,A.exports.default=A.exports,a(l)}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},P5yM:function(A,v,a){"use strict";a.d(v,"a",function(){return Oe}),a.d(v,"b",function(){return Ke});var l=function(Q,te,Fe){Q.prototype=te.prototype=Fe,Fe.constructor=Q};function o(Q,te){var Fe=Object.create(Q.prototype);for(var ze in te)Fe[ze]=te[ze];return Fe}function m(){}var g=.7,p=1/g,y="\\s*([+-]?\\d+)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",I="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P=/^#([0-9a-f]{3,8})$/,M=new RegExp("^rgb\\("+[y,y,y]+"\\)$"),z=new RegExp("^rgb\\("+[I,I,I]+"\\)$"),oe=new RegExp("^rgba\\("+[y,y,y,b]+"\\)$"),G=new RegExp("^rgba\\("+[I,I,I,b]+"\\)$"),ee=new RegExp("^hsl\\("+[b,I,I]+"\\)$"),pe=new RegExp("^hsla\\("+[b,I,I,b]+"\\)$"),J={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l(m,Oe,{copy:function(Q){return Object.assign(new this.constructor,this,Q)},displayable:function(){return this.rgb().displayable()},hex:se,formatHex:se,formatHsl:fe,formatRgb:X,toString:X});function se(){return this.rgb().formatHex()}function fe(){return rt(this).formatHsl()}function X(){return this.rgb().formatRgb()}function Oe(Q){var te,Fe;return Q=(Q+"").trim().toLowerCase(),(te=P.exec(Q))?(Fe=te[1].length,te=parseInt(te[1],16),Fe===6?D(te):Fe===3?new Le(te>>8&15|te>>4&240,te>>4&15|te&240,(te&15)<<4|te&15,1):Fe===8?De(te>>24&255,te>>16&255,te>>8&255,(te&255)/255):Fe===4?De(te>>12&15|te>>8&240,te>>8&15|te>>4&240,te>>4&15|te&240,((te&15)<<4|te&15)/255):null):(te=M.exec(Q))?new Le(te[1],te[2],te[3],1):(te=z.exec(Q))?new Le(te[1]*255/100,te[2]*255/100,te[3]*255/100,1):(te=oe.exec(Q))?De(te[1],te[2],te[3],te[4]):(te=G.exec(Q))?De(te[1]*255/100,te[2]*255/100,te[3]*255/100,te[4]):(te=ee.exec(Q))?Ze(te[1],te[2]/100,te[3]/100,1):(te=pe.exec(Q))?Ze(te[1],te[2]/100,te[3]/100,te[4]):J.hasOwnProperty(Q)?D(J[Q]):Q==="transparent"?new Le(NaN,NaN,NaN,0):null}function D(Q){return new Le(Q>>16&255,Q>>8&255,Q&255,1)}function De(Q,te,Fe,ze){return ze<=0&&(Q=te=Fe=NaN),new Le(Q,te,Fe,ze)}function ot(Q){return Q instanceof m||(Q=Oe(Q)),Q?(Q=Q.rgb(),new Le(Q.r,Q.g,Q.b,Q.opacity)):new Le}function Ke(Q,te,Fe,ze){return arguments.length===1?ot(Q):new Le(Q,te,Fe,ze==null?1:ze)}function Le(Q,te,Fe,ze){this.r=+Q,this.g=+te,this.b=+Fe,this.opacity=+ze}l(Le,Ke,o(m,{brighter:function(Q){return Q=Q==null?p:Math.pow(p,Q),new Le(this.r*Q,this.g*Q,this.b*Q,this.opacity)},darker:function(Q){return Q=Q==null?g:Math.pow(g,Q),new Le(this.r*Q,this.g*Q,this.b*Q,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W,formatHex:W,formatRgb:He,toString:He}));function W(){return"#"+C(this.r)+C(this.g)+C(this.b)}function He(){var Q=this.opacity;return Q=isNaN(Q)?1:Math.max(0,Math.min(1,Q)),(Q===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Q===1?")":", "+Q+")")}function C(Q){return Q=Math.max(0,Math.min(255,Math.round(Q)||0)),(Q<16?"0":"")+Q.toString(16)}function Ze(Q,te,Fe,ze){return ze<=0?Q=te=Fe=NaN:Fe<=0||Fe>=1?Q=te=NaN:te<=0&&(Q=NaN),new Et(Q,te,Fe,ze)}function rt(Q){if(Q instanceof Et)return new Et(Q.h,Q.s,Q.l,Q.opacity);if(Q instanceof m||(Q=Oe(Q)),!Q)return new Et;if(Q instanceof Et)return Q;Q=Q.rgb();var te=Q.r/255,Fe=Q.g/255,ze=Q.b/255,St=Math.min(te,Fe,ze),ut=Math.max(te,Fe,ze),Qt=NaN,vr=ut-St,tt=(ut+St)/2;return vr?(te===ut?Qt=(Fe-ze)/vr+(Fe<ze)*6:Fe===ut?Qt=(ze-te)/vr+2:Qt=(te-Fe)/vr+4,vr/=tt<.5?ut+St:2-ut-St,Qt*=60):vr=tt>0&&tt<1?0:Qt,new Et(Qt,vr,tt,Q.opacity)}function At(Q,te,Fe,ze){return arguments.length===1?rt(Q):new Et(Q,te,Fe,ze==null?1:ze)}function Et(Q,te,Fe,ze){this.h=+Q,this.s=+te,this.l=+Fe,this.opacity=+ze}l(Et,At,o(m,{brighter:function(Q){return Q=Q==null?p:Math.pow(p,Q),new Et(this.h,this.s,this.l*Q,this.opacity)},darker:function(Q){return Q=Q==null?g:Math.pow(g,Q),new Et(this.h,this.s,this.l*Q,this.opacity)},rgb:function(){var Q=this.h%360+(this.h<0)*360,te=isNaN(Q)||isNaN(this.s)?0:this.s,Fe=this.l,ze=Fe+(Fe<.5?Fe:1-Fe)*te,St=2*Fe-ze;return new Le(ne(Q>=240?Q-240:Q+120,St,ze),ne(Q,St,ze),ne(Q<120?Q+240:Q-120,St,ze),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Q=this.opacity;return Q=isNaN(Q)?1:Math.max(0,Math.min(1,Q)),(Q===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Q===1?")":", "+Q+")")}}));function ne(Q,te,Fe){return(Q<60?te+(Fe-te)*Q/60:Q<180?Fe:Q<240?te+(Fe-te)*(240-Q)/60:te)*255}},PJYZ:function(A,v){function a(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},PLPH:function(A,v,a){var l=a("zbeO"),o=a("WsPr"),m=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,g="\\u0300-\\u036f",p="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",b=g+p+y,I="["+b+"]",P=RegExp(I,"g");function M(z){return z=o(z),z&&z.replace(m,l).replace(P,"")}A.exports=M},PSsN:function(A,v){},PUg6:function(A,v,a){"use strict";var l;(function(o){o.normal="normal",o.additive="additive",o.subtractive="subtractive",o.min="min",o.max="max",o.none="none"})(l||(l={}))},Pfvu:function(A,v){function a(l){return l!=null&&typeof l=="object"}A.exports=a},Pir4:function(A,v,a){var l=a("JXFl");function o(m,g){for(var p=m.length;p--;)if(l(m[p][0],g))return p;return-1}A.exports=o},QILm:function(A,v,a){var l=a("8OQS");function o(m,g){if(m==null)return{};var p=l(m,g),y,b;if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(m);for(b=0;b<I.length;b++)y=I[b],!(g.indexOf(y)>=0)&&(!Object.prototype.propertyIsEnumerable.call(m,y)||(p[y]=m[y]))}return p}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},QPcZ:function(A,v){function a(){this.__data__=[],this.size=0}A.exports=a},QS1c:function(A,v,a){var l=a("JXFl"),o=a("mIFG"),m=a("8yjT"),g=a("8Dog");function p(y,b,I){if(!g(I))return!1;var P=typeof b;return(P=="number"?o(I)&&m(b,I.length):P=="string"&&b in I)?l(I[b],y):!1}A.exports=p},QSQ1:function(A,v,a){var l=a("MsYU"),o=a("8Dog"),m=a("pC8I"),g=0/0,p=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,b=/^0o[0-7]+$/i,I=parseInt;function P(M){if(typeof M=="number")return M;if(m(M))return g;if(o(M)){var z=typeof M.valueOf=="function"?M.valueOf():M;M=o(z)?z+"":z}if(typeof M!="string")return M===0?M:+M;M=l(M);var oe=y.test(M);return oe||b.test(M)?I(M.slice(2),oe?2:8):p.test(M)?g:+M}A.exports=P},RDz9:function(A,v){function a(l,o){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},RGlZ:function(A,v,a){var l=a("2CCf"),o=Object.prototype,m=o.hasOwnProperty;function g(p){var y=this.__data__;return l?y[p]!==void 0:m.call(y,p)}A.exports=g},RIqP:function(A,v,a){var l=a("Ijbi"),o=a("EbDI"),m=a("ZhPi"),g=a("Bnag");function p(y){return l(y)||o(y)||m(y)||g()}A.exports=p,A.exports.default=A.exports,A.exports.__esModule=!0},RMtq:function(A,v){},"RR/i":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.typeConstraint=v.namedConstraint=v.taggedConstraint=v.traverseAncerstors=void 0;var l=a("xfSm"),o=a("GXnB"),m=function(b,I){var P=b.parentRequest;return P!==null?I(P)?!0:m(P,I):!1};v.traverseAncerstors=m;var g=function(b){return function(I){var P=function(M){return M!==null&&M.target!==null&&M.target.matchesTag(b)(I)};return P.metaData=new o.Metadata(b,I),P}};v.taggedConstraint=g;var p=g(l.NAMED_TAG);v.namedConstraint=p;var y=function(b){return function(I){var P=null;if(I!==null)if(P=I.bindings[0],typeof b=="string"){var M=P.serviceIdentifier;return M===b}else{var z=I.bindings[0].implementationType;return b===z}return!1}};v.typeConstraint=y},Rp6z:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiInject=void 0;var l=a("jHQc"),o=a("uYCe"),m=a("Z23J");function g(p){return function(y,b,I){var P=new o.Metadata(l.MULTI_INJECT_TAG,p);typeof I=="number"?m.tagParameter(y,b,I,P):m.tagProperty(y,b,P)}}v.multiInject=g},RrrF:function(A,v){function a(l,o,m,g){var p=-1,y=l==null?0:l.length;for(g&&y&&(m=l[++p]);++p<y;)m=o(m,l[p],p,l);return m}A.exports=a},RtmR:function(A,v){function a(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},S6Vc:function(A,v,a){var l=a("aBRL"),o=a("F06p");function m(g){return l(g,o(g))}A.exports=m},Sk89:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.postConstruct=void 0;var l=a("MON2"),o=a("xfSm"),m=a("GXnB");function g(){return function(p,y,b){var I=new m.Metadata(o.POST_CONSTRUCT,y);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,p.constructor))throw new Error(l.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,I,p.constructor)}}v.postConstruct=g},SksO:function(A,v){function a(l,o){return A.exports=a=Object.setPrototypeOf||function(g,p){return g.__proto__=p,g},A.exports.default=A.exports,A.exports.__esModule=!0,a(l,o)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},T2Ds:function(A,v){function a(l,o,m,g){var p=-1,y=l==null?0:l.length;for(g&&y&&(m=l[++p]);++p<y;)m=o(m,l[p],p,l);return m}A.exports=a},TBoU:function(A,v,a){var l=a("Sxfv"),o=a("fkhx");function m(g,p,y){(y!==void 0&&!o(g[p],y)||y===void 0&&!(p in g))&&l(g,p,y)}A.exports=m},TNLb:function(A,v){function a(l){return l}A.exports=a},"U+yc":function(A,v){function a(l,o,m,g,p){var y={};return Object.keys(g).forEach(function(b){y[b]=g[b]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=m.slice().reverse().reduce(function(b,I){return I(l,o,b)||b},y),p&&y.initializer!==void 0&&(y.value=y.initializer?y.initializer.call(p):void 0,y.initializer=void 0),y.initializer===void 0&&(Object.defineProperty(l,o,y),y=null),y}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},UUZ0:function(A,v,a){var l=a("7om2"),o=a("tc49"),m=o(l);A.exports=m},UXsw:function(A,v,a){var l=a("tOMW"),o=a("BjoM"),m=a("Znrb"),g=m&&m.isTypedArray,p=g?o(g):l;A.exports=p},Ucsi:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l=Symbol.for("INJECTION");function o(b,I,P,M){function z(){return M&&!Reflect.hasMetadata(l,this,I)&&Reflect.defineMetadata(l,P(),this,I),Reflect.hasMetadata(l,this,I)?Reflect.getMetadata(l,this,I):P()}function oe(G){Reflect.defineMetadata(l,G,this,I)}Object.defineProperty(b,I,{configurable:!0,enumerable:!0,get:z,set:oe})}function m(b,I){return function(P){return function(M,z){var oe=function(){return b.get(P)};o(M,z,oe,I)}}}v.makePropertyInjectDecorator=m;function g(b,I){return function(P,M){return function(z,oe){var G=function(){return b.getNamed(P,M)};o(z,oe,G,I)}}}v.makePropertyInjectNamedDecorator=g;function p(b,I){return function(P,M,z){return function(oe,G){var ee=function(){return b.getTagged(P,M,z)};o(oe,G,ee,I)}}}v.makePropertyInjectTaggedDecorator=p;function y(b,I){return function(P){return function(M,z){var oe=function(){return b.getAll(P)};o(M,z,oe,I)}}}v.makePropertyMultiInjectDecorator=y},Ufxn:function(A,v){var a=9007199254740991;function l(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=a}A.exports=l},Uz3a:function(A,v){var a=Function.prototype,l=a.toString;function o(m){if(m!=null){try{return l.call(m)}catch(g){}try{return m+""}catch(g){}}return""}A.exports=o},V1cb:function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l;(function(o){o.Hover="hover",o.Click="click",o.Select="select",o.Active="active",o.Drag="drag"})(l||(l={}))},W8MJ:function(A,v){function a(o,m){for(var g=0;g<m.length;g++){var p=m[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}function l(o,m,g){return m&&a(o.prototype,m),g&&a(o,g),o}A.exports=l,A.exports.default=A.exports,A.exports.__esModule=!0},"WI+s":function(A,v,a){var l=a("qHbu"),o=a("7zvB"),m=l(o,"Set");A.exports=m},Wde8:function(A,v){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function l(o){return o.match(a)||[]}A.exports=l},WkPL:function(A,v){function a(l,o){(o==null||o>l.length)&&(o=l.length);for(var m=0,g=new Array(o);m<o;m++)g[m]=l[m];return g}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},Wrqe:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.optional=void 0;var l=a("jHQc"),o=a("uYCe"),m=a("Z23J");function g(){return function(p,y,b){var I=new o.Metadata(l.OPTIONAL_TAG,!0);typeof b=="number"?m.tagParameter(p,y,b,I):m.tagProperty(p,y,I)}}v.optional=g},XePV:function(A,v,a){var l=a("goqI"),o=a("G5jF");function m(g,p,y){return o()?(A.exports=m=Reflect.construct,A.exports.__esModule=!0,A.exports.default=A.exports):(A.exports=m=function(I,P,M){var z=[null];z.push.apply(z,P);var oe=Function.bind.apply(I,z),G=new oe;return M&&l(G,M.prototype),G},A.exports.__esModule=!0,A.exports.default=A.exports),m.apply(null,arguments)}A.exports=m,A.exports.__esModule=!0,A.exports.default=A.exports},Xu4s:function(A,v,a){var l=a("2CCf"),o="__lodash_hash_undefined__",m=Object.prototype,g=m.hasOwnProperty;function p(y){var b=this.__data__;if(l){var I=b[y];return I===o?void 0:I}return g.call(b,y)?b[y]:void 0}A.exports=p},XwJk:function(A,v){function a(l,o,m){for(var g=m-1,p=l.length;++g<p;)if(l[g]===o)return g;return-1}A.exports=a},"YKQ/":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.tagged=void 0;var l=a("uYCe"),o=a("Z23J");function m(g,p){return function(y,b,I){var P=new l.Metadata(g,p);typeof I=="number"?o.tagParameter(y,b,I,P):o.tagProperty(y,b,P)}}v.tagged=m},"YPd+":function(A,v,a){var l=a("lxDN"),o=a("Gk2g");function m(g){return o(l(g).toLowerCase())}A.exports=m},YVT0:function(A,v,a){var l=a("MC81"),o=a("msMk"),m=a("DUB7"),g=a("WsPr");function p(y){return function(b){b=g(b);var I=o(b)?m(b):void 0,P=I?I[0]:b.charAt(0),M=I?l(I,1).join(""):b.slice(1);return P[y]()+M}}A.exports=p},Yk9n:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.inject=v.LazyServiceIdentifer=void 0;var l=a("MON2"),o=a("xfSm"),m=a("GXnB"),g=a("Ztfv"),p=function(){function b(I){this._cb=I}return b.prototype.unwrap=function(){return this._cb()},b}();v.LazyServiceIdentifer=p;function y(b){return function(I,P,M){if(b===void 0)throw new Error(l.UNDEFINED_INJECT_ANNOTATION(I.name));var z=new m.Metadata(o.INJECT_TAG,b);typeof M=="number"?g.tagParameter(I,P,M,z):g.tagProperty(I,P,z)}}v.inject=y},Z23J:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.tagProperty=v.tagParameter=v.decorate=void 0;var l=a("Z6CD"),o=a("jHQc");function m(P,M,z,oe){var G=o.TAGGED;p(G,P,M,oe,z)}v.tagParameter=m;function g(P,M,z){var oe=o.TAGGED_PROP;p(oe,P.constructor,M,z)}v.tagProperty=g;function p(P,M,z,oe,G){var ee={},pe=typeof G=="number",J=G!==void 0&&pe?G.toString():z;if(pe&&z!==void 0)throw new Error(l.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(P,M)&&(ee=Reflect.getMetadata(P,M));var se=ee[J];if(!Array.isArray(se))se=[];else for(var fe=0,X=se;fe<X.length;fe++){var Oe=X[fe];if(Oe.key===oe.key)throw new Error(l.DUPLICATED_METADATA+" "+Oe.key.toString())}se.push(oe),ee[J]=se,Reflect.defineMetadata(P,ee,M)}function y(P,M){Reflect.decorate(P,M)}function b(P,M){return function(z,oe){M(z,oe,P)}}function I(P,M,z){typeof z=="number"?y([b(z,P)],M):typeof z=="string"?Reflect.decorate([P],M,z):y([P],M)}v.decorate=I},Z6CD:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.STACK_OVERFLOW=v.CIRCULAR_DEPENDENCY_IN_FACTORY=v.POST_CONSTRUCT_ERROR=v.MULTIPLE_POST_CONSTRUCT_METHODS=v.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=v.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=v.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=v.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=v.ARGUMENTS_LENGTH_MISMATCH=v.INVALID_DECORATOR_OPERATION=v.INVALID_TO_SELF_VALUE=v.INVALID_FUNCTION_BINDING=v.INVALID_MIDDLEWARE_RETURN=v.NO_MORE_SNAPSHOTS_AVAILABLE=v.INVALID_BINDING_TYPE=v.NOT_IMPLEMENTED=v.CIRCULAR_DEPENDENCY=v.UNDEFINED_INJECT_ANNOTATION=v.MISSING_INJECT_ANNOTATION=v.MISSING_INJECTABLE_ANNOTATION=v.NOT_REGISTERED=v.CANNOT_UNBIND=v.AMBIGUOUS_MATCH=v.KEY_NOT_FOUND=v.NULL_ARGUMENT=v.DUPLICATED_METADATA=v.DUPLICATED_INJECTABLE_DECORATOR=void 0,v.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",v.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",v.NULL_ARGUMENT="NULL argument",v.KEY_NOT_FOUND="Key Not Found",v.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",v.CANNOT_UNBIND="Could not unbind serviceIdentifier:",v.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",v.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",v.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var l=function(p){return"@inject called with undefined this could mean that the class "+p+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};v.UNDEFINED_INJECT_ANNOTATION=l,v.CIRCULAR_DEPENDENCY="Circular dependency found:",v.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",v.INVALID_BINDING_TYPE="Invalid binding type:",v.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",v.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",v.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",v.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",v.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var o=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"The number of constructor arguments in the derived class "+(p[0]+" must be >= than the number of constructor arguments of its base class.")};v.ARGUMENTS_LENGTH_MISMATCH=o,v.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",v.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",v.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",v.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",v.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var m=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"@postConstruct error in class "+p[0]+": "+p[1]};v.POST_CONSTRUCT_ERROR=m;var g=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return"It looks like there is a circular dependency "+("in one of the '"+p[0]+"' bindings. Please investigate bindings with")+("service identifier '"+p[1]+"'.")};v.CIRCULAR_DEPENDENCY_IN_FACTORY=g,v.STACK_OVERFLOW="Maximum call stack size exceeded"},ZJYV:function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\ufe0e\\ufe0f",y="["+a+"]",b="["+g+"]",I="\\ud83c[\\udffb-\\udfff]",P="(?:"+b+"|"+I+")",M="[^"+a+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",oe="[\\ud800-\\udbff][\\udc00-\\udfff]",G="\\u200d",ee=P+"?",pe="["+p+"]?",J="(?:"+G+"(?:"+[M,z,oe].join("|")+")"+pe+ee+")*",se=pe+ee+J,fe="(?:"+[M+b+"?",b,z,oe,y].join("|")+")",X=RegExp(I+"(?="+I+")|"+fe+se,"g");function Oe(D){return D.match(X)||[]}A.exports=Oe},"ZM/t":function(A,v,a){var l=a("cD3f"),o=a("eTwl"),m=a("4xPW");function g(){this.size=0,this.__data__={hash:new l,map:new(m||o),string:new l}}A.exports=g},ZWZa:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiBindToService=void 0;var l=function(o){return function(m){return function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];return g.forEach(function(y){return o.bind(y).toService(m)})}}};v.multiBindToService=l},ZhPi:function(A,v,a){var l=a("WkPL");function o(m,g){if(!!m){if(typeof m=="string")return l(m,g);var p=Object.prototype.toString.call(m).slice(8,-1);if(p==="Object"&&m.constructor&&(p=m.constructor.name),p==="Map"||p==="Set")return Array.from(m);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return l(m,g)}}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},Znrb:function(A,v,a){(function(l){var o=a("zsLF"),m=v&&!v.nodeType&&v,g=m&&typeof l=="object"&&l&&!l.nodeType&&l,p=g&&g.exports===m,y=p&&o.process,b=function(){try{var I=g&&g.require&&g.require("util").types;return I||y&&y.binding&&y.binding("util")}catch(P){}}();l.exports=b}).call(this,a("jV5f")(A))},Ztfv:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.tagProperty=v.tagParameter=v.decorate=void 0;var l=a("MON2"),o=a("xfSm");function m(P,M,z,oe){var G=o.TAGGED;p(G,P,M,oe,z)}v.tagParameter=m;function g(P,M,z){var oe=o.TAGGED_PROP;p(oe,P.constructor,M,z)}v.tagProperty=g;function p(P,M,z,oe,G){var ee={},pe=typeof G=="number",J=G!==void 0&&pe?G.toString():z;if(pe&&z!==void 0)throw new Error(l.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(P,M)&&(ee=Reflect.getMetadata(P,M));var se=ee[J];if(!Array.isArray(se))se=[];else for(var fe=0,X=se;fe<X.length;fe++){var Oe=X[fe];if(Oe.key===oe.key)throw new Error(l.DUPLICATED_METADATA+" "+Oe.key.toString())}se.push(oe),ee[J]=se,Reflect.defineMetadata(P,ee,M)}function y(P,M){Reflect.decorate(P,M)}function b(P,M){return function(z,oe){M(z,oe,P)}}function I(P,M,z){typeof z=="number"?y([b(z,P)],M):typeof z=="string"?Reflect.decorate([P],M,z):y([P],M)}v.decorate=I},ZzCi:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.named=void 0;var l=a("xfSm"),o=a("GXnB"),m=a("Ztfv");function g(p){return function(y,b,I){var P=new o.Metadata(l.NAMED_TAG,p);typeof I=="number"?m.tagParameter(y,b,I,P):m.tagProperty(y,b,P)}}v.named=g},a1gu:function(A,v,a){var l=a("cDf5").default,o=a("PJYZ");function m(g,p){if(p&&(l(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(g)}A.exports=m,A.exports.default=A.exports,A.exports.__esModule=!0},aBRL:function(A,v,a){var l=a("rLS+"),o=a("rSfh");function m(g,p,y,b){var I=!y;y||(y={});for(var P=-1,M=p.length;++P<M;){var z=p[P],oe=b?b(y[z],g[z],z,y,g):void 0;oe===void 0&&(oe=g[z]),I?o(y,z,oe):l(y,z,oe)}return y}A.exports=m},aBeV:function(A,v,a){var l=a("suam"),o=a("38cL");function m(g){return l(g,o(g))}A.exports=m},aD3b:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Plan=void 0;var l=function(){function o(m,g){this.parentContext=m,this.rootRequest=g}return o}();v.Plan=l},aPG5:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.resolve=void 0;var l=a("MON2"),o=a("FV85"),m=a("qK8v"),g=a("ujMp"),p=a("cSJO"),y=function(P,M,z){try{return z()}catch(oe){throw m.isStackOverflowExeption(oe)?new Error(l.CIRCULAR_DEPENDENCY_IN_FACTORY(P,M.toString())):oe}},b=function(P){return function(M){M.parentContext.setCurrentRequest(M);var z=M.bindings,oe=M.childRequests,G=M.target&&M.target.isArray(),ee=!M.parentRequest||!M.parentRequest.target||!M.target||!M.parentRequest.target.matchesArray(M.target.serviceIdentifier);if(G&&ee)return oe.map(function(Oe){var D=b(P);return D(Oe)});var pe=null;if(M.target.isOptional()&&z.length===0)return;var J=z[0],se=J.scope===o.BindingScopeEnum.Singleton,fe=J.scope===o.BindingScopeEnum.Request;if(se&&J.activated)return J.cache;if(fe&&P!==null&&P.has(J.id))return P.get(J.id);if(J.type===o.BindingTypeEnum.ConstantValue)pe=J.cache,J.activated=!0;else if(J.type===o.BindingTypeEnum.Function)pe=J.cache,J.activated=!0;else if(J.type===o.BindingTypeEnum.Constructor)pe=J.implementationType;else if(J.type===o.BindingTypeEnum.DynamicValue&&J.dynamicValue!==null)pe=y("toDynamicValue",J.serviceIdentifier,function(){return J.dynamicValue(M.parentContext)});else if(J.type===o.BindingTypeEnum.Factory&&J.factory!==null)pe=y("toFactory",J.serviceIdentifier,function(){return J.factory(M.parentContext)});else if(J.type===o.BindingTypeEnum.Provider&&J.provider!==null)pe=y("toProvider",J.serviceIdentifier,function(){return J.provider(M.parentContext)});else if(J.type===o.BindingTypeEnum.Instance&&J.implementationType!==null)pe=p.resolveInstance(J.implementationType,oe,b(P));else{var X=g.getServiceIdentifierAsString(M.serviceIdentifier);throw new Error(l.INVALID_BINDING_TYPE+" "+X)}return typeof J.onActivation=="function"&&(pe=J.onActivation(M.parentContext,pe)),se&&(J.cache=pe,J.activated=!0),fe&&P!==null&&!P.has(J.id)&&P.set(J.id,pe),pe}};function I(P){var M=b(P.plan.rootRequest.requestScope);return M(P.plan.rootRequest)}v.resolve=I},aTWO:function(A,v,a){var l=a("HW2u"),o=a("lxDN"),m=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,g="\\u0300-\\u036f",p="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",b=g+p+y,I="["+b+"]",P=RegExp(I,"g");function M(z){return z=o(z),z&&z.replace(m,l).replace(P,"")}A.exports=M},alBN:function(A,v,a){var l=a("uewA");function o(m,g){var p=l(this,m),y=p.size;return p.set(m,g),this.size+=p.size==y?0:1,this}A.exports=o},"an+Q":function(A,v,a){"use strict";var l=this&&this.__spreadArray||function(P,M){for(var z=0,oe=M.length,G=P.length;z<oe;z++,G++)P[G]=M[z];return P};Object.defineProperty(v,"__esModule",{value:!0}),v.resolveInstance=void 0;var o=a("Z6CD"),m=a("BU00"),g=a("jHQc");function p(P,M,z){var oe=M.filter(function(ee){return ee.target!==null&&ee.target.type===m.TargetTypeEnum.ClassProperty}),G=oe.map(z);return oe.forEach(function(ee,pe){var J="";J=ee.target.name.value();var se=G[pe];P[J]=se}),P}function y(P,M){return new(P.bind.apply(P,l([void 0],M)))}function b(P,M){if(Reflect.hasMetadata(g.POST_CONSTRUCT,P)){var z=Reflect.getMetadata(g.POST_CONSTRUCT,P);try{M[z.value]()}catch(oe){throw new Error(o.POST_CONSTRUCT_ERROR(P.name,oe.message))}}}function I(P,M,z){var oe=null;if(M.length>0){var G=M.filter(function(pe){return pe.target!==null&&pe.target.type===m.TargetTypeEnum.ConstructorArgument}),ee=G.map(z);oe=y(P,ee),oe=p(oe,M,z)}else oe=new P;return b(P,oe),oe}v.resolveInstance=I},at28:function(A,v){function a(l){return this.__data__.has(l)}A.exports=a},b48C:function(A,v){function a(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},bB6j:function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},"bL/G":function(A,v){function a(l,o,m,g){for(var p=l.length,y=m+(g?1:-1);g?y--:++y<p;)if(o(l[y],y,l))return y;return-1}A.exports=a},bPkA:function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l;(function(o){o.Normal="normal",o.PostProcessing="post-processing"})(l||(l={}))},bRBl:function(A,v){function a(l){return Function.toString.call(l).indexOf("[native code]")!==-1}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},bTtR:function(A,v){},bYl4:function(A,v){},bs4i:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.inject=v.LazyServiceIdentifer=void 0;var l=a("Z6CD"),o=a("jHQc"),m=a("uYCe"),g=a("Z23J"),p=function(){function b(I){this._cb=I}return b.prototype.unwrap=function(){return this._cb()},b}();v.LazyServiceIdentifer=p;function y(b){return function(I,P,M){if(b===void 0)throw new Error(l.UNDEFINED_INJECT_ANNOTATION(I.name));var z=new m.Metadata(o.INJECT_TAG,b);typeof M=="number"?g.tagParameter(I,P,M,z):g.tagProperty(I,P,z)}}v.inject=y},bzyH:function(A,v){},cD3f:function(A,v,a){var l=a("gA0E"),o=a("kKQ4"),m=a("Xu4s"),g=a("RGlZ"),p=a("IMpv");function y(b){var I=-1,P=b==null?0:b.length;for(this.clear();++I<P;){var M=b[I];this.set(M[0],M[1])}}y.prototype.clear=l,y.prototype.delete=o,y.prototype.get=m,y.prototype.has=g,y.prototype.set=p,A.exports=y},cDf5:function(A,v){function a(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(A.exports=a=function(m){return typeof m},A.exports.default=A.exports,A.exports.__esModule=!0):(A.exports=a=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},A.exports.default=A.exports,A.exports.__esModule=!0),a(l)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},cPaU:function(A,v,a){var l=a("P4zC");function o(m,g){for(;!Object.prototype.hasOwnProperty.call(m,g)&&(m=l(m),m!==null););return m}A.exports=o,A.exports.__esModule=!0,A.exports.default=A.exports},cSJO:function(A,v,a){"use strict";var l=this&&this.__spreadArray||function(P,M){for(var z=0,oe=M.length,G=P.length;z<oe;z++,G++)P[G]=M[z];return P};Object.defineProperty(v,"__esModule",{value:!0}),v.resolveInstance=void 0;var o=a("MON2"),m=a("FV85"),g=a("xfSm");function p(P,M,z){var oe=M.filter(function(ee){return ee.target!==null&&ee.target.type===m.TargetTypeEnum.ClassProperty}),G=oe.map(z);return oe.forEach(function(ee,pe){var J="";J=ee.target.name.value();var se=G[pe];P[J]=se}),P}function y(P,M){return new(P.bind.apply(P,l([void 0],M)))}function b(P,M){if(Reflect.hasMetadata(g.POST_CONSTRUCT,P)){var z=Reflect.getMetadata(g.POST_CONSTRUCT,P);try{M[z.value]()}catch(oe){throw new Error(o.POST_CONSTRUCT_ERROR(P.name,oe.message))}}}function I(P,M,z){var oe=null;if(M.length>0){var G=M.filter(function(pe){return pe.target!==null&&pe.target.type===m.TargetTypeEnum.ConstructorArgument}),ee=G.map(z);oe=y(P,ee),oe=p(oe,M,z)}else oe=new P;return b(P,oe),oe}v.resolveInstance=I},cZ5Q:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.injectable=void 0;var l=a("MON2"),o=a("xfSm");function m(){return function(g){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,g))throw new Error(l.DUPLICATED_INJECTABLE_DECORATOR);var p=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,g)||[];return Reflect.defineMetadata(o.PARAM_TYPES,p,g),g}}v.injectable=m},cZlC:function(A,v,a){"use strict";var l;(function(g){g.LINEAR="linear",g.POWER="power",g.LOG="log",g.IDENTITY="identity",g.TIME="time",g.QUANTILE="quantile",g.QUANTIZE="quantize",g.THRESHOLD="threshold",g.CAT="cat"})(l||(l={}));var o;(function(g){g.CONSTANT="constant",g.VARIABLE="variable"})(o||(o={}));var m;(function(g){g[g.Attribute=0]="Attribute",g[g.InstancedAttribute=1]="InstancedAttribute",g[g.Uniform=2]="Uniform"})(m||(m={}))},cyxd:function(A,v,a){(function(l){var o=a("7zvB"),m=a("mKcU"),g=v&&!v.nodeType&&v,p=g&&typeof l=="object"&&l&&!l.nodeType&&l,y=p&&p.exports===g,b=y?o.Buffer:void 0,I=b?b.isBuffer:void 0,P=I||m;l.exports=P}).call(this,a("jV5f")(A))},d0W2:function(A,v,a){var l=a("m7Q2"),o=a("2EVJ"),m=a("ZJYV");function g(p){return o(p)?m(p):l(p)}A.exports=g},d15R:function(A,v,a){var l=a("kOSz"),o=l();A.exports=o},d9O0:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.id=void 0;var l=0;function o(){return l++}v.id=o},dFqT:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.targetName=void 0;var l=a("jHQc"),o=a("uYCe"),m=a("Z23J");function g(p){return function(y,b,I){var P=new o.Metadata(l.NAME_TAG,p);m.tagParameter(y,b,I,P)}}v.targetName=g},"dG/y":function(A,v,a){var l=a("bL/G"),o=a("o3DD"),m=a("3DLV");function g(p,y,b){return y===y?m(p,y,b):l(p,o,b)}A.exports=g},dHNX:function(A,v,a){var l=a("cPaU");function o(){return typeof Reflect!="undefined"&&Reflect.get?(A.exports=o=Reflect.get,A.exports.__esModule=!0,A.exports.default=A.exports):(A.exports=o=function(g,p,y){var b=l(g,p);if(!!b){var I=Object.getOwnPropertyDescriptor(b,p);return I.get?I.get.call(arguments.length<3?g:y):I.value}},A.exports.__esModule=!0,A.exports.default=A.exports),o.apply(this,arguments)}A.exports=o,A.exports.__esModule=!0,A.exports.default=A.exports},dX1H:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Target=void 0;var l=a("xfSm"),o=a("d9O0"),m=a("GXnB"),g=a("zxMA"),p=function(){function y(b,I,P,M){this.id=o.id(),this.type=b,this.serviceIdentifier=P,this.name=new g.QueryableString(I||""),this.metadata=new Array;var z=null;typeof M=="string"?z=new m.Metadata(l.NAMED_TAG,M):M instanceof m.Metadata&&(z=M),z!==null&&this.metadata.push(z)}return y.prototype.hasTag=function(b){for(var I=0,P=this.metadata;I<P.length;I++){var M=P[I];if(M.key===b)return!0}return!1},y.prototype.isArray=function(){return this.hasTag(l.MULTI_INJECT_TAG)},y.prototype.matchesArray=function(b){return this.matchesTag(l.MULTI_INJECT_TAG)(b)},y.prototype.isNamed=function(){return this.hasTag(l.NAMED_TAG)},y.prototype.isTagged=function(){return this.metadata.some(function(b){return l.NON_CUSTOM_TAG_KEYS.every(function(I){return b.key!==I})})},y.prototype.isOptional=function(){return this.matchesTag(l.OPTIONAL_TAG)(!0)},y.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(b){return b.key===l.NAMED_TAG})[0]:null},y.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(b){return l.NON_CUSTOM_TAG_KEYS.every(function(I){return b.key!==I})}):null},y.prototype.matchesNamedTag=function(b){return this.matchesTag(l.NAMED_TAG)(b)},y.prototype.matchesTag=function(b){var I=this;return function(P){for(var M=0,z=I.metadata;M<z.length;M++){var oe=z[M];if(oe.key===b&&oe.value===P)return!0}return!1}},y}();v.Target=p},doU7:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingCount=void 0;var l={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};v.BindingCount=l},dxzI:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.AsyncContainerModule=v.ContainerModule=void 0;var l=a("d9O0"),o=function(){function g(p){this.id=l.id(),this.registry=p}return g}();v.ContainerModule=o;var m=function(){function g(p){this.id=l.id(),this.registry=p}return g}();v.AsyncContainerModule=m},eRDX:function(A,v,a){var l=a("CHUC"),o=a("67RC"),m=a("d15R"),g=a("vQV2"),p=a("8Dog"),y=a("F06p"),b=a("eSy7");function I(P,M,z,oe,G){P!==M&&m(M,function(ee,pe){if(G||(G=new l),p(ee))g(P,M,pe,z,I,oe,G);else{var J=oe?oe(b(P,pe),ee,pe+"",P,M,G):void 0;J===void 0&&(J=ee),o(P,pe,J)}},y)}A.exports=I},eSy7:function(A,v){function a(l,o){if(!(o==="constructor"&&typeof l[o]=="function")&&o!="__proto__")return l[o]}A.exports=a},eTwl:function(A,v,a){var l=a("QPcZ"),o=a("jeKh"),m=a("9iqA"),g=a("8GQc"),p=a("6a/L");function y(b){var I=-1,P=b==null?0:b.length;for(this.clear();++I<P;){var M=b[I];this.set(M[0],M[1])}}y.prototype.clear=l,y.prototype.delete=o,y.prototype.get=m,y.prototype.has=g,y.prototype.set=p,A.exports=y},"eg+a":function(A,v,a){"use strict";var l=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},elp8:function(A,v,a){var l=a("BMKy"),o=a("/2ht"),m=a("FZ3y"),g="[object Null]",p="[object Undefined]",y=l?l.toStringTag:void 0;function b(I){return I==null?I===void 0?p:g:y&&y in Object(I)?o(I):m(I)}A.exports=b},esxg:function(A,v,a){var l=a("7JgH"),o=a("9fil"),m=a("8Dog"),g=a("Uz3a"),p=/[\\^$.*+?()[\]{}|]/g,y=/^\[object .+?Constructor\]$/,b=Function.prototype,I=Object.prototype,P=b.toString,M=I.hasOwnProperty,z=RegExp("^"+P.call(M).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oe(G){if(!m(G)||o(G))return!1;var ee=l(G)?z:y;return ee.test(g(G))}A.exports=oe},etFO:function(A,v,a){var l=a("uewA");function o(m){var g=l(this,m).delete(m);return this.size-=g?1:0,g}A.exports=o},eySa:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.unmanaged=void 0;var l=a("jHQc"),o=a("uYCe"),m=a("Z23J");function g(){return function(p,y,b){var I=new o.Metadata(l.UNMANAGED_TAG,!0);m.tagParameter(p,y,b,I)}}v.unmanaged=g},fQKV:function(A,v,a){var l=a("3QtL"),o=Math.max;function m(g,p,y){return p=o(p===void 0?g.length-1:p,0),function(){for(var b=arguments,I=-1,P=o(b.length-p,0),M=Array(P);++I<P;)M[I]=b[p+I];I=-1;for(var z=Array(p+1);++I<p;)z[I]=b[I];return z[p]=y(M),l(g,this,z)}}A.exports=m},fX6N:function(A,v,a){"use strict";a.d(v,"a",function(){return hf});var l=a("mNvP"),o=a("uhBA"),m=a.n(o),g=a("4cb6"),p=a("APxj"),y=a.n(p),b=a("bB6j"),I=a("lwsE"),P=a.n(I),M=a("W8MJ"),z=a.n(M),oe=a("lSNA"),G=a.n(oe),ee=a("Hel2"),pe=a("rxlC"),J=a.n(pe);function se(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function fe(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?se(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):se(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function X(Z,$){var R=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!R){if(Array.isArray(Z)||(R=Oe(Z))||$&&Z&&typeof Z.length=="number"){R&&(Z=R);var L=0,q=function(){};return{s:q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Zt){throw Zt},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae=!0,dt=!1,It;return{s:function(){R=R.call(Z)},n:function(){var Zt=R.next();return Ae=Zt.done,Zt},e:function(Zt){dt=!0,It=Zt},f:function(){try{!Ae&&R.return!=null&&R.return()}finally{if(dt)throw It}}}}function Oe(Z,$){if(!!Z){if(typeof Z=="string")return D(Z,$);var R=Object.prototype.toString.call(Z).slice(8,-1);if(R==="Object"&&Z.constructor&&(R=Z.constructor.name),R==="Map"||R==="Set")return Array.from(Z);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return D(Z,$)}}function D(Z,$){($==null||$>Z.length)&&($=Z.length);for(var R=0,L=new Array($);R<$;R++)L[R]=Z[R];return L}var De=30;function ot(Z){var $=Z.characterSet,R=Z.getFontWidth,L=Z.fontHeight,q=Z.buffer,Ae=Z.maxCanvasWidth,dt=Z.mapping,It=dt===void 0?{}:dt,Pt=Z.xOffset,Zt=Pt===void 0?0:Pt,wr=Z.yOffset,Cn=wr===void 0?0:wr,Nn=0,Hn=Zt;Array.from($).forEach(function(Qn,Pi){if(!It[Qn]){var wi=R(Qn,Pi);Hn+De>Ae&&(Hn=0,Nn++),It[Qn]={x:Hn,y:Cn+Nn*De,width:De,height:De,advance:wi},Hn+=De}});var Kn=L+q*2;return{mapping:It,xOffset:Hn,yOffset:Cn+Nn*Kn,canvasHeight:W(Cn+(Nn+1)*Kn)}}function Ke(Z,$,R){var L=0,q=0,Ae=0,dt=[],It={},Pt=X(Z),Zt;try{for(Pt.s();!(Zt=Pt.n()).done;){var wr=Zt.value;if(!It[wr.id]){var Cn=wr.size;L+Cn+$>R&&(Le(It,dt,q),L=0,q=Ae+q+$,Ae=0,dt=[]),dt.push({icon:wr,xOffset:L}),L=L+Cn+$,Ae=Math.max(Ae,Cn)}}}catch(Hn){Pt.e(Hn)}finally{Pt.f()}dt.length>0&&Le(It,dt,q);var Nn=W(Ae+q+$);return{mapping:It,canvasHeight:Nn}}function Le(Z,$,R){var L=X($),q;try{for(L.s();!(q=L.n()).done;){var Ae=q.value,dt=Ae.icon,It=Ae.xOffset;Z[dt.id]=fe(fe({},dt),{},{x:It,y:R,image:dt.image,width:dt.width,height:dt.height})}}catch(Pt){L.e(Pt)}finally{L.f()}}function W(Z){return Math.pow(2,Math.ceil(Math.log2(Z)))}var He,C;function Ze(Z,$){var R=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!R){if(Array.isArray(Z)||(R=rt(Z))||$&&Z&&typeof Z.length=="number"){R&&(Z=R);var L=0,q=function(){};return{s:q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Zt){throw Zt},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae=!0,dt=!1,It;return{s:function(){R=R.call(Z)},n:function(){var Zt=R.next();return Ae=Zt.done,Zt},e:function(Zt){dt=!0,It=Zt},f:function(){try{!Ae&&R.return!=null&&R.return()}finally{if(dt)throw It}}}}function rt(Z,$){if(!!Z){if(typeof Z=="string")return At(Z,$);var R=Object.prototype.toString.call(Z).slice(8,-1);if(R==="Object"&&Z.constructor&&(R=Z.constructor.name),R==="Map"||R==="Set")return Array.from(Z);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return At(Z,$)}}function At(Z,$){($==null||$>Z.length)&&($=Z.length);for(var R=0,L=new Array($);R<$;R++)L[R]=Z[R];return L}function Et(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function ne(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?Et(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):Et(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}var Q=et(),te="sans-serif",Fe="normal",ze=24,St=3,ut=.25,Qt=8,vr=1024,tt=1,Pe=1,Ne=3,ke=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function et(){for(var Z=[],$=32;$<128;$++)Z.push(String.fromCharCode($));return Z}function Ge(Z,$,R,L){Z.font="".concat(L," ").concat(R,"px ").concat($),Z.fillStyle="black",Z.textBaseline="middle"}function Ot(Z,$){for(var R=0;R<Z.length;R++)$.data[4*R+3]=Z[R]}var Bt=(He=Object(g.injectable)(),He(C=function(){function Z(){P()(this,Z),G()(this,"fontAtlas",void 0),G()(this,"iconFontMap",void 0),G()(this,"iconFontGlyphs",{}),G()(this,"fontOptions",void 0),G()(this,"key",void 0),G()(this,"cache",new ee.b(Ne))}return z()(Z,[{key:"scale",get:function(){return Pe}},{key:"canvas",get:function(){var R=this.cache.get(this.key);return R&&R.data}},{key:"mapping",get:function(){var R=this.cache.get(this.key);return R&&R.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:te,fontWeight:Fe,characterSet:Q,fontSize:ze,buffer:St,sdf:!0,cutoff:ut,radius:Qt,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(R){var L=this;R.forEach(function(q){L.iconFontGlyphs[q.name]=q.unicode})}},{key:"addIconFont",value:function(R,L){this.iconFontMap.set(R,L)}},{key:"getIconFontKey",value:function(R){return this.iconFontMap.get(R)||R}},{key:"getGlyph",value:function(R){return this.iconFontGlyphs[R]?String.fromCharCode(parseInt(this.iconFontGlyphs[R],16)):""}},{key:"setFontOptions",value:function(R){this.fontOptions=ne(ne({},this.fontOptions),R),this.key=this.getKey();var L=this.getNewChars(this.key,this.fontOptions.characterSet),q=this.cache.get(this.key);if(!(q&&L.length===0)){var Ae=this.generateFontAtlas(this.key,L,q);this.fontAtlas=Ae,this.cache.set(this.key,Ae)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(R,L,q){var Ae=this.fontOptions,dt=Ae.fontFamily,It=Ae.fontWeight,Pt=Ae.fontSize,Zt=Ae.buffer,wr=Ae.sdf,Cn=Ae.radius,Nn=Ae.cutoff,Hn=Ae.iconfont,Kn=q&&q.data;Kn||(Kn=document.createElement("canvas"),Kn.width=vr);var Qn=Kn.getContext("2d");Ge(Qn,dt,Pt,It);var Pi=ot(ne({getFontWidth:function(Ru){return Qn.measureText(Ru).width},fontHeight:Pt*Pe,buffer:Zt,characterSet:L,maxCanvasWidth:vr},q&&{mapping:q.mapping,xOffset:q.xOffset,yOffset:q.yOffset})),wi=Pi.mapping,Hi=Pi.canvasHeight,La=Pi.xOffset,Ca=Pi.yOffset,qa=Qn.getImageData(0,0,Kn.width,Kn.height);if(Kn.height=Hi,Qn.putImageData(qa,0,0),Ge(Qn,dt,Pt,It),wr){var qi=new J.a(Pt,Zt,Cn,Nn,dt,It),Di=Qn.getImageData(0,0,qi.size,qi.size),Ni=Ze(L),wa;try{for(Ni.s();!(wa=Ni.n()).done;){var Da=wa.value;if(Hn){var la=String.fromCharCode(parseInt(Da.replace("&#x","").replace(";",""),16)),eo=qi.draw(la);Ot(eo,Di)}else Ot(qi.draw(Da),Di);Qn.putImageData(Di,wi[Da].x,wi[Da].y)}}catch(co){Ni.e(co)}finally{Ni.f()}}else{var Xa=Ze(L),cs;try{for(Xa.s();!(cs=Xa.n()).done;){var $o=cs.value;Qn.fillText($o,wi[$o].x,wi[$o].y+Pt*tt)}}catch(co){Xa.e(co)}finally{Xa.f()}}return{xOffset:La,yOffset:Ca,mapping:wi,data:Kn,width:Kn.width,height:Kn.height}}},{key:"getKey",value:function(){return"key";var R,L,q,Ae,dt,It,Pt,Zt}},{key:"getNewChars",value:function(R,L){var q=this.cache.get(R);if(!q)return L;var Ae=[],dt=q.mapping,It=new Set(Object.keys(dt)),Pt=new Set(L);return Pt.forEach(function(Zt){It.has(Zt)||Ae.push(Zt)}),Ae}}]),Z}())||C),gt=a("PJYZ"),ge=a.n(gt),Lt=a("7W2i"),qt=a.n(Lt),xr=a("a1gu"),tr=a.n(xr),Xr=a("Nsbk"),rr=a.n(Xr),bn,ue;function tn(Z){var $=Fn();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Fn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Fi=3,ki=1024,ve=64,Ye=(bn=Object(g.injectable)(),bn(ue=function(Z){qt()(R,Z);var $=tn(R);function R(){var L;P()(this,R);for(var q=arguments.length,Ae=new Array(q),dt=0;dt<q;dt++)Ae[dt]=arguments[dt];return L=$.call.apply($,[this].concat(Ae)),G()(ge()(L),"canvasHeight",128),G()(ge()(L),"texture",void 0),G()(ge()(L),"canvas",void 0),G()(ge()(L),"iconData",void 0),G()(ge()(L),"iconMap",void 0),G()(ge()(L),"ctx",void 0),G()(ge()(L),"loadingImageCount",0),L}return z()(R,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(q,Ae){var dt=this,It=new Image;if(this.loadingImageCount++,this.hasImage(q))throw new Error("Image Id already exists");this.iconData.push({id:q,size:ve}),this.updateIconMap(),this.loadImage(Ae).then(function(Pt){It=Pt;var Zt=dt.iconData.find(function(wr){return wr.id===q});Zt&&(Zt.image=It,Zt.width=It.width,Zt.height=It.height),dt.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(q){return this.iconMap.hasOwnProperty(q)}},{key:"removeImage",value:function(q){this.hasImage(q)&&(this.iconData=this.iconData.filter(function(Ae){return Ae.id!==q}),delete this.iconMap[q],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var q=this;this.canvas.width=ki,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(Ae){var dt=q.iconMap[Ae],It=dt.x,Pt=dt.y,Zt=dt.image,wr=dt.width,Cn=wr===void 0?64:wr,Nn=dt.height,Hn=Nn===void 0?64:Nn,Kn=Math.max(Cn,Hn),Qn=Kn/ve,Pi=Hn/Qn,wi=Cn/Qn;Zt&&q.ctx.drawImage(Zt,It+(ve-wi)/2,Pt+(ve-Pi)/2,wi,Pi)})}},{key:"updateIconMap",value:function(){var q=Ke(this.iconData,Fi,ki),Ae=q.mapping,dt=q.canvasHeight;this.iconMap=Ae,this.canvasHeight=dt}},{key:"loadImage",value:function(q){return new Promise(function(Ae,dt){if(q instanceof HTMLImageElement){Ae(q);return}var It=new Image;It.crossOrigin="anonymous",It.onload=function(){Ae(It)},It.onerror=function(){dt(new Error("Could not load image at "+q))},It.src=q instanceof File?URL.createObjectURL(q):q})}}]),R}(o.EventEmitter))||ue),vt=a("J4zp"),wt=a.n(vt),me=a("IOcx"),Pn,Cr,Nt=(Pn=Object(g.injectable)(),Pn(Cr=function(){function Z(){P()(this,Z),G()(this,"viewport",void 0),G()(this,"overridedViewProjectionMatrix",void 0),G()(this,"jitteredViewProjectionMatrix",void 0),G()(this,"jitteredProjectionMatrix",void 0),G()(this,"viewMatrixInverse",void 0),G()(this,"cameraPosition",void 0)}return z()(Z,[{key:"init",value:function(){}},{key:"update",value:function(R){this.viewport=R,this.viewMatrixInverse=me.a.create(),me.a.invert(this.viewMatrixInverse,R.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var R=this.viewport.getCenter(),L=wt()(R,2),q=L[0],Ae=L[1];return[q,Ae]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(R,L){return this.viewport.projectFlat(R,L)}},{key:"setViewProjectionMatrix",value:function(R){this.overridedViewProjectionMatrix=R}},{key:"jitterProjectionMatrix",value:function(R,L){var q=me.a.fromTranslation(me.a.create(),[R,L,0]);this.jitteredProjectionMatrix=me.a.multiply(me.a.create(),q,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=me.a.multiply(me.a.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),Z}())||Cr),it,Ce;function Rt(Z,$){var R=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!R){if(Array.isArray(Z)||(R=_t(Z))||$&&Z&&typeof Z.length=="number"){R&&(Z=R);var L=0,q=function(){};return{s:q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Zt){throw Zt},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae=!0,dt=!1,It;return{s:function(){R=R.call(Z)},n:function(){var Zt=R.next();return Ae=Zt.done,Zt},e:function(Zt){dt=!0,It=Zt},f:function(){try{!Ae&&R.return!=null&&R.return()}finally{if(dt)throw It}}}}function _t(Z,$){if(!!Z){if(typeof Z=="string")return Tn(Z,$);var R=Object.prototype.toString.call(Z).slice(8,-1);if(R==="Object"&&Z.constructor&&(R=Z.constructor.name),R==="Map"||R==="Set")return Array.from(Z);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return Tn(Z,$)}}function Tn(Z,$){($==null||$>Z.length)&&($=Z.length);for(var R=0,L=new Array($);R<$;R++)L[R]=Z[R];return L}var Ve=(it=Object(g.injectable)(),it(Ce=function(){function Z(){P()(this,Z),G()(this,"container",void 0),G()(this,"controlCorners",void 0),G()(this,"controlContainer",void 0),G()(this,"scene",void 0),G()(this,"mapsService",void 0),G()(this,"controls",[]),G()(this,"unAddControls",[])}return z()(Z,[{key:"init",value:function(R,L){this.container=R.container,this.scene=L,this.mapsService=L.get(b.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(R,L){var q=L.get(b.a.IMapService);q.map?(R.addTo(this.scene),this.controls.push(R)):this.unAddControls.push(R)}},{key:"getControlByName",value:function(R){return this.controls.find(function(L){return L.controlOption.name===R})}},{key:"removeControl",value:function(R){var L=this.controls.indexOf(R);return L>-1&&this.controls.splice(L,1),R.remove(),this}},{key:"addControls",value:function(){var R=this;this.unAddControls.forEach(function(L){L.addTo(R.scene),R.controls.push(L)}),this.unAddControls=[]}},{key:"destroy",value:function(){var R=Rt(this.controls),L;try{for(R.s();!(L=R.n()).done;){var q=L.value;q.remove()}}catch(Ae){R.e(Ae)}finally{R.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var R=this.controlCorners={},L="l7-",q=this.controlContainer=ee.a.create("div",L+"control-container",this.container);function Ae(dt,It){var Pt=L+dt+" "+L+It;R[dt+It]=ee.a.create("div",Pt,q)}Ae("top","left"),Ae("top","right"),Ae("bottom","left"),Ae("bottom","right")}},{key:"clearControlPos",value:function(){for(var R in this.controlCorners)this.controlCorners[R]&&ee.a.remove(this.controlCorners[R]);this.controlContainer&&ee.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),Z}())||Ce),hi,An,xi=(hi=Object(g.injectable)(),hi(An=function(){function Z(){P()(this,Z),G()(this,"container",void 0),G()(this,"scene",void 0),G()(this,"mapsService",void 0),G()(this,"markers",[]),G()(this,"markerLayers",[]),G()(this,"unAddMarkers",[]),G()(this,"unAddMarkerLayers",[])}return z()(Z,[{key:"addMarkerLayer",value:function(R){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(R),R.addTo(this.scene)):this.unAddMarkerLayers.push(R)}},{key:"removeMarkerLayer",value:function(R){R.destroy(),this.markerLayers.indexOf(R);var L=this.markerLayers.indexOf(R);L>-1&&this.markerLayers.splice(L,1)}},{key:"addMarker",value:function(R){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(R),R.addTo(this.scene)):this.unAddMarkers.push(R)}},{key:"addMarkers",value:function(){var R=this;this.unAddMarkers.forEach(function(L){L.addTo(R.scene),R.markers.push(L)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var R=this;this.unAddMarkerLayers.forEach(function(L){R.markerLayers.push(L),L.addTo(R.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(R){R.remove(),this.markers.indexOf(R);var L=this.markers.indexOf(R);L>-1&&this.markers.splice(L,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(R){this.scene=R,this.mapsService=R.get(b.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(R){R.remove()}),this.markers=[],this.markerLayers.forEach(function(R){R.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(R){R.destroy()}}]),Z}())||An),Bn,yi,Wr=(Bn=Object(g.injectable)(),Bn(yi=function(){function Z(){P()(this,Z),G()(this,"scene",void 0),G()(this,"popup",void 0),G()(this,"mapsService",void 0),G()(this,"unAddPopup",void 0)}return z()(Z,[{key:"removePopup",value:function(R){R.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(R){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(R.addTo(this.scene),this.popup=R):this.unAddPopup=R}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(R){this.scene=R,this.mapsService=R.get(b.a.IMapService)}}]),Z}())||yi),Oi=a("/Onj"),Oa=a.n(Oi),Aa={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Ui=Aa,ea,Ti;function _n(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function Ci(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?_n(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):_n(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}var qn={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Wi={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},ta=(ea=Object(g.injectable)(),ea(Ti=function(){function Z(){P()(this,Z),G()(this,"sceneConfigCache",{}),G()(this,"layerConfigCache",{})}return z()(Z,[{key:"getSceneConfig",value:function(R){return this.sceneConfigCache[R]}},{key:"getSceneWarninfo",value:function(R){return Ui[R]}},{key:"setSceneConfig",value:function(R,L){this.sceneConfigCache[R]=Ci(Ci({},qn),L)}},{key:"getLayerConfig",value:function(R){return this.layerConfigCache[R]}},{key:"setLayerConfig",value:function(R,L,q){this.layerConfigCache[L]=Ci({},Oa()({},this.sceneConfigCache[R],Wi,q))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),Z}())||Ti),si=a("yG8O"),li=a.n(si),Za=a("U+yc"),di=a.n(Za),Ha=a("1ABj"),Va=Math.PI/180,ra=512,xa=4003e4;function va(Z){var $=Z.latitude,R=$===void 0?0:$,L=Z.zoom,q=L===void 0?0:L,Ae=Z.scale,dt=Z.highPrecision,It=dt===void 0?!1:dt,Pt=Z.flipY,Zt=Pt===void 0?!1:Pt;Ae=Ae!==void 0?Ae:Math.pow(2,q);var wr={},Cn=ra*Ae,Nn=Math.cos(R*Va),Hn=Cn/360,Kn=Hn/Nn,Qn=Cn/xa/Nn;if(wr.pixelsPerMeter=[Qn,-Qn,Qn],wr.metersPerPixel=[1/Qn,-1/Qn,1/Qn],wr.pixelsPerDegree=[Hn,-Kn,Qn],wr.degreesPerPixel=[1/Hn,-1/Kn,1/Qn],It){var Pi=Va*Math.tan(R*Va)/Nn,wi=Hn*Pi/2,Hi=Cn/xa*Pi,La=Hi/Kn*Qn;wr.pixelsPerDegree2=[0,-wi,Hi],wr.pixelsPerMeter2=[La,0,La],Zt&&(wr.pixelsPerDegree2[1]=-wr.pixelsPerDegree2[1],wr.pixelsPerMeter2[1]=-wr.pixelsPerMeter2[1])}return Zt&&(wr.pixelsPerMeter[1]=-wr.pixelsPerMeter[1],wr.metersPerPixel[1]=-wr.metersPerPixel[1],wr.pixelsPerDegree[1]=-wr.pixelsPerDegree[1],wr.degreesPerPixel[1]=-wr.degreesPerPixel[1]),wr}var Vi=a("HthE"),ia,kn,Ka,Pa,Qi,Ia=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Ma=(ia=Object(g.injectable)(),kn=Object(g.inject)(b.a.ICameraService),ia(Ka=(Pa=function(){function Z(){P()(this,Z),G()(this,"needRefresh",!0),li()(this,"cameraService",Qi,this),G()(this,"coordinateSystem",void 0),G()(this,"viewportCenter",void 0),G()(this,"viewportCenterProjection",void 0),G()(this,"pixelsPerDegree",void 0),G()(this,"pixelsPerDegree2",void 0),G()(this,"pixelsPerMeter",void 0)}return z()(Z,[{key:"refresh",value:function(){var R=this.cameraService.getZoom(),L=this.cameraService.getZoomScale(),q=this.cameraService.getCenter(),Ae=va({latitude:q[1],zoom:R}),dt=Ae.pixelsPerMeter,It=Ae.pixelsPerDegree;this.viewportCenter=q,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=dt,this.pixelsPerDegree=It,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Vi.a.LNGLAT||this.coordinateSystem===Vi.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Vi.a.LNGLAT_OFFSET?this.calculateLnglatOffset(q,R):this.coordinateSystem===Vi.a.P20_OFFSET&&this.calculateLnglatOffset(q,R,L,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(R){this.coordinateSystem=R}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(R,L,q,Ae){var dt=va({latitude:R[1],zoom:L,scale:q,flipY:Ae,highPrecision:!0}),It=dt.pixelsPerMeter,Pt=dt.pixelsPerDegree,Zt=dt.pixelsPerDegree2,wr=this.cameraService.getViewMatrix(),Cn=this.cameraService.getProjectionMatrix(),Nn=me.a.multiply([],Cn,wr),Hn=this.cameraService.projectFlat([Math.fround(R[0]),Math.fround(R[1])],Math.pow(2,L));this.viewportCenterProjection=me.c.transformMat4([],[Hn[0],Hn[1],0,1],Nn),wr=this.cameraService.getViewMatrixUncentered()||wr,Nn=me.a.multiply([],Cn,wr),Nn=me.a.multiply([],Nn,Ia),this.cameraService.setViewProjectionMatrix(Nn),this.pixelsPerMeter=It,this.pixelsPerDegree=Pt,this.pixelsPerDegree2=Zt}}]),Z}(),Qi=di()(Pa.prototype,"cameraService",[kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pa))||Ka),ji=a("yLV6"),aa=a.n(ji),vi=a("V1cb"),ei,oa,$i,Gi,Ji;function pa(Z){var $=ka();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function ka(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var ma={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Bi=(ei=Object(g.injectable)(),oa=Object(g.inject)(b.a.IMapService),ei($i=(Gi=function(Z){qt()(R,Z);var $=pa(R);function R(){var L;P()(this,R);for(var q=arguments.length,Ae=new Array(q),dt=0;dt<q;dt++)Ae[dt]=arguments[dt];return L=$.call.apply($,[this].concat(Ae)),li()(ge()(L),"mapService",Ji,ge()(L)),G()(ge()(L),"hammertime",void 0),G()(ge()(L),"lastClickTime",0),G()(ge()(L),"lastClickXY",[-1,-1]),G()(ge()(L),"clickTimer",void 0),G()(ge()(L),"$containter",void 0),G()(ge()(L),"onDrag",function(It){var Pt=L.interactionEvent(It);Pt.type=ma[Pt.type],L.emit(vi.a.Drag,Pt)}),G()(ge()(L),"onHammer",function(It){It.srcEvent.stopPropagation();var Pt=L.interactionEvent(It);L.emit(vi.a.Hover,Pt)}),G()(ge()(L),"onTouch",function(It){var Pt=It.touches[0];L.onHover({x:Pt.pageX,y:Pt.pageY,type:"touch"})}),G()(ge()(L),"onHover",function(It){var Pt=It.clientX,Zt=It.clientY,wr=Pt,Cn=Zt,Nn=It.type,Hn=L.mapService.getMapContainer();if(Hn){var Kn=Hn.getBoundingClientRect(),Qn=Kn.top,Pi=Kn.left;wr=wr-Pi-Hn.clientLeft,Cn=Cn-Qn-Hn.clientTop}var wi=L.mapService.containerToLngLat([wr,Cn]);if(Nn==="click"){if("ontouchstart"in document.documentElement)return;L.isDoubleTap(wr,Cn,wi);return}if(Nn==="touch"){L.isDoubleTap(wr,Cn,wi);return}Nn!=="click"&&Nn!=="dblclick"&&L.emit(vi.a.Hover,{x:wr,y:Cn,lngLat:wi,type:Nn,target:It})}),L}return z()(R,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(vi.a.Hover)}},{key:"triggerHover",value:function(q){var Ae=q.x,dt=q.y;this.emit(vi.a.Hover,{x:Ae,y:dt})}},{key:"triggerSelect",value:function(q){this.emit(vi.a.Select,{featureId:q})}},{key:"triggerActive",value:function(q){this.emit(vi.a.Active,{featureId:q})}},{key:"addEventListenerOnMap",value:function(){var q=this.mapService.getMapContainer();if(q){var Ae=new aa.a.Manager(q);Ae.add(new aa.a.Tap({event:"dblclick",taps:2})),Ae.add(new aa.a.Tap({event:"click"})),Ae.add(new aa.a.Pan({threshold:0,pointers:0})),Ae.add(new aa.a.Press({})),Ae.on("dblclick click",this.onHammer),Ae.on("panstart panmove panend pancancel",this.onDrag),q.addEventListener("mousemove",this.onHover),q.addEventListener("mousedown",this.onHover,!0),q.addEventListener("mouseup",this.onHover),q.addEventListener("contextmenu",this.onHover),this.hammertime=Ae}}},{key:"removeEventListenerOnMap",value:function(){var q=this.mapService.getMapContainer();q&&(q.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),q.removeEventListener("mousedown",this.onHover),q.removeEventListener("mouseup",this.onHover),q.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(q){var Ae=q.type,dt=q.pointerType,It,Pt;dt==="touch"?(Pt=Math.floor(q.pointers[0].clientY),It=Math.floor(q.pointers[0].clientX)):(Pt=Math.floor(q.srcEvent.y),It=Math.floor(q.srcEvent.x));var Zt=this.mapService.getMapContainer();if(Zt){var wr=Zt.getBoundingClientRect(),Cn=wr.top,Nn=wr.left;It-=Nn,Pt-=Cn}var Hn=this.mapService.containerToLngLat([It,Pt]);return{x:It,y:Pt,lngLat:Hn,type:Ae,target:q.srcEvent}}},{key:"isDoubleTap",value:function(q,Ae,dt){var It=this,Pt=new Date().getTime(),Zt="click";Pt-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-q)<10&&Math.abs(this.lastClickXY[1]-Ae)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),Zt="dblclick",this.emit(vi.a.Hover,{x:q,y:Ae,lngLat:dt,type:Zt})):(this.lastClickTime=Pt,this.lastClickXY=[q,Ae],this.clickTimer=setTimeout(function(){Zt="click",It.emit(vi.a.Hover,{x:q,y:Ae,lngLat:dt,type:Zt})},400))}}]),R}(m.a),Ji=di()(Gi.prototype,"mapService",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gi))||$i),Na=a("yXPU"),pi=a.n(Na),zi=a("o0o1"),Mi=a.n(zi),Yn=a("o+pz"),bi,sa,Ra,Qa,ce,be,Qe,U,K,Me,ct;function lr(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function Ur(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?lr(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):lr(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}var Un=(bi=Object(g.injectable)(),sa=Object(g.inject)(b.a.IRendererService),Ra=Object(g.inject)(b.a.IGlobalConfigService),Qa=Object(g.inject)(b.a.IInteractionService),ce=Object(g.inject)(b.a.ILayerService),bi(be=(Qe=function(){function Z(){var $=this;P()(this,Z),li()(this,"rendererService",U,this),li()(this,"configService",K,this),li()(this,"interactionService",Me,this),li()(this,"layerService",ct,this),G()(this,"pickingFBO",void 0),G()(this,"width",0),G()(this,"height",0),G()(this,"alreadyInPicking",!1),G()(this,"pickBufferScale",1),G()(this,"pickFromPickingFBO",function(R,L){var q,Ae=L.x,dt=L.y,It=L.lngLat,Pt=L.type,Zt=L.target,wr=!1,Cn=$.rendererService,Nn=Cn.getViewportSize,Hn=Cn.readPixels,Kn=Cn.getContainer,Qn=Kn().getBoundingClientRect(),Pi=Qn.width,wi=Qn.height;Pi*=ee.a.DPR,wi*=ee.a.DPR;var Hi=R.getLayerConfig(),La=Hi.enableHighlight,Ca=Hi.enableSelect,qa=Ae*ee.a.DPR,qi=dt*ee.a.DPR;if(qa>Pi-1*ee.a.DPR||qa<0||qi>wi-1*ee.a.DPR||qi<0)return!1;var Di;if(Di=Hn({x:Math.floor(qa/$.pickBufferScale),y:Math.floor((wi-(dt+1)*ee.a.DPR)/$.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:$.pickingFBO}),Di[0]!==0||Di[1]!==0||Di[2]!==0){var Ni=Object(ee.c)(Di),wa=R.getSource().getFeatureById(Ni);Ni!==R.getCurrentPickId()&&Pt==="mousemove"&&(Pt="mouseenter");var Da={x:Ae,y:dt,type:Pt,lngLat:It,featureId:Ni,feature:wa,target:Zt};wa&&(wr=!0,R.setCurrentPickId(Ni),$.triggerHoverOnLayer(R,Da))}else{var la={x:Ae,y:dt,lngLat:It,type:R.getCurrentPickId()!==null&&Pt==="mousemove"?"mouseout":"un"+Pt,featureId:null,target:Zt,feature:null};$.triggerHoverOnLayer(R,Ur(Ur({},la),{},{type:"unpick"})),$.triggerHoverOnLayer(R,la),R.setCurrentPickId(null)}if(La&&$.highlightPickedFeature(R,Di),Ca&&Pt==="click"&&((q=Di)===null||q===void 0?void 0:q.toString())!==[0,0,0,0].toString()){var eo=Object(ee.c)(Di);R.getCurrentSelectedId()===null||eo!==R.getCurrentSelectedId()?($.selectFeature(R,Di),R.setCurrentSelectedId(eo)):($.selectFeature(R,new Uint8Array([0,0,0,0])),R.setCurrentSelectedId(null))}return wr})}return z()(Z,[{key:"init",value:function(R){var L=this.rendererService,q=L.createTexture2D,Ae=L.createFramebuffer,dt=L.getViewportSize,It=L.getContainer,Pt=It().getBoundingClientRect(),Zt=Pt.width,wr=Pt.height;Zt*=ee.a.DPR,wr*=ee.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(R).pickBufferScale||1,this.pickingFBO=Ae({color:q({width:Math.round(Zt/this.pickBufferScale),height:Math.round(wr/this.pickBufferScale),wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})}),this.interactionService.on(vi.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var $=pi()(Mi.a.mark(function L(q,Ae,dt){var It=this,Pt,Zt,wr,Cn;return Mi.a.wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:Pt=this.rendererService,Zt=Pt.useFramebuffer,wr=Pt.clear,Cn=Pt.getContainer,this.resizePickingFBO(),Zt(this.pickingFBO,function(){wr({framebuffer:It.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),q.hooks.beforePickingEncode.call(),q.renderModels(),q.hooks.afterPickingEncode.call();var Kn=It.pickBox(q,Ae);dt(Kn)});case 3:case"end":return Hn.stop()}},L,this)}));function R(L,q,Ae){return $.apply(this,arguments)}return R}()},{key:"pickBox",value:function(R,L){var q=this,Ae=L.map(function(la){var eo=la<0?0:la;return Math.floor(eo*ee.a.DPR/q.pickBufferScale)}),dt=wt()(Ae,4),It=dt[0],Pt=dt[1],Zt=dt[2],wr=dt[3],Cn=this.rendererService,Nn=Cn.getViewportSize,Hn=Cn.readPixels,Kn=Cn.getContainer,Qn=Kn().getBoundingClientRect(),Pi=Qn.width,wi=Qn.height;if(Pi*=ee.a.DPR,wi*=ee.a.DPR,It>(Pi-1)*ee.a.DPR/this.pickBufferScale||Zt<0||Pt>(wi-1)*ee.a.DPR/this.pickBufferScale||wr<0)return[];var Hi,La=Math.min(Pi/this.pickBufferScale,Zt)-It,Ca=Math.min(wi/this.pickBufferScale,wr)-Pt;Hi=Hn({x:It,y:Math.floor(wi/this.pickBufferScale-(wr+1)),width:La,height:Ca,data:new Uint8Array(La*Ca*4),framebuffer:this.pickingFBO});for(var qa=[],qi={},Di=0;Di<Hi.length/4;Di=Di+1){var Ni=Hi.slice(Di*4,Di*4+4),wa=Object(ee.c)(Ni);if(wa!==-1&&!qi[wa]){var Da=R.getSource().getFeatureById(wa);qa.push(Da),qi[wa]=!0}}return qa}},{key:"pickingAllLayer",value:function(){var $=pi()(Mi.a.mark(function L(q){return Mi.a.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){dt.next=2;break}return dt.abrupt("return");case 2:return this.alreadyInPicking=!0,dt.next=5,this.pickingLayers(q);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return dt.stop()}},L,this)}));function R(L){return $.apply(this,arguments)}return R}()},{key:"resizePickingFBO",value:function(){var R=this.rendererService.getContainer,L=R().getBoundingClientRect(),q=L.width,Ae=L.height;q*=ee.a.DPR,Ae*=ee.a.DPR,(this.width!==q||this.height!==Ae)&&(this.pickingFBO.resize({width:Math.round(q/this.pickBufferScale),height:Math.round(Ae/this.pickBufferScale)}),this.width=q,this.height=Ae)}},{key:"pickingLayers",value:function(){var $=pi()(Mi.a.mark(function L(q){var Ae=this,dt,It,Pt,Zt,wr;return Mi.a.wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:dt=this.rendererService,It=dt.getViewportSize,Pt=dt.useFramebuffer,Zt=dt.clear,wr=dt.getContainer,this.resizePickingFBO(),Pt(this.pickingFBO,function(){var Hn=Ae.layerService.getLayers();Hn.filter(function(Kn){return Kn.needPick(q.type)}).reverse().some(function(Kn){Zt({framebuffer:Ae.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Kn.hooks.beforePickingEncode.call(),Kn.renderModels(),Kn.hooks.afterPickingEncode.call();var Qn=Ae.pickFromPickingFBO(Kn,q);return Qn&&!Kn.getLayerConfig().enablePropagation})});case 3:case"end":return Nn.stop()}},L,this)}));function R(L){return $.apply(this,arguments)}return R}()},{key:"triggerHoverOnLayer",value:function(R,L){R.emit(L.type,L)}},{key:"isEventCrash",value:function(R){var L=!0;return R.target.path.map(function(q){q.classList&&q.classList.forEach(function(Ae){(Ae==="l7-marker"||Ae==="l7-popup")&&(L=!1)})}),L}},{key:"highlightPickedFeature",value:function(R,L){var q=wt()(L,3),Ae=q[0],dt=q[1],It=q[2];R.hooks.beforeHighlight.call([Ae,dt,It])}},{key:"selectFeature",value:function(R,L){var q=wt()(L,3),Ae=q[0],dt=q[1],It=q[2];R.hooks.beforeSelect.call([Ae,dt,It])}}]),Z}(),U=di()(Qe.prototype,"rendererService",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=di()(Qe.prototype,"configService",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=di()(Qe.prototype,"interactionService",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=di()(Qe.prototype,"layerService",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe))||be),cr=function(){function Z(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;P()(this,Z),G()(this,"autoStart",void 0),G()(this,"startTime",0),G()(this,"oldTime",0),G()(this,"running",!1),G()(this,"elapsedTime",0),this.autoStart=$}return z()(Z,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var R=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var L=(typeof performance=="undefined"?Date:performance).now();R=(L-this.oldTime)/1e3,this.oldTime=L,this.elapsedTime+=R}return R}}]),Z}(),Xi,Li,Gt,s,d,O,j,ae=(Xi=Object(g.injectable)(),Li=Object(g.inject)(b.a.IRendererService),Gt=Object(g.inject)(b.a.IGlobalConfigService),Xi(s=(d=function(){function Z(){P()(this,Z),G()(this,"clock",new cr),G()(this,"alreadyInRendering",!1),G()(this,"layers",[]),G()(this,"layerRenderID",void 0),G()(this,"sceneInited",!1),G()(this,"animateInstanceCount",0),li()(this,"renderService",O,this),li()(this,"configService",j,this)}return z()(Z,[{key:"add",value:function(R){this.sceneInited&&R.init(),this.layers.push(R)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(R){R.inited||R.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(R){return this.layers.find(function(L){return L.id===R})}},{key:"getLayerByName",value:function(R){return this.layers.find(function(L){return L.name===R})}},{key:"remove",value:function(R){var L=this.layers.indexOf(R);L>-1&&this.layers.splice(L,1),R.emit("remove",null),R.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(R){return R.inited}).filter(function(R){return R.isVisible()}).forEach(function(R){R.hooks.beforeRenderData.call(),R.hooks.beforeRender.call(),R.render(),R.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(R,L){return R.zIndex-L.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(R){return R.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),Z}(),O=di()(d.prototype,"renderService",[Li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=di()(d.prototype,"configService",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d))||s),Ee=a("QILm"),Ue=a.n(Ee),st=a("RIqP"),Mt=a.n(st),Ut=a("jcz1"),Jt=a.n(Ut),hr=function(){function Z($){var R=this;P()(this,Z),G()(this,"name",void 0),G()(this,"type",void 0),G()(this,"scale",void 0),G()(this,"descriptor",void 0),G()(this,"featureBufferLayout",[]),G()(this,"needRescale",!1),G()(this,"needRemapping",!1),G()(this,"needRegenerateVertices",!1),G()(this,"featureRange",{startIndex:0,endIndex:Infinity}),G()(this,"vertexAttribute",void 0),G()(this,"defaultCallback",function(L){if(L.length===0){var q;return((q=R.scale)===null||q===void 0?void 0:q.defaultValues)||[]}return L.map(function(Ae,dt){var It,Pt=(It=R.scale)===null||It===void 0?void 0:It.scalers[dt].func,Zt=Pt(Ae);return Zt})}),this.setProps($)}return z()(Z,[{key:"setProps",value:function(R){Object.assign(this,R)}},{key:"mapping",value:function(R){var L;if((L=this.scale)!==null&&L!==void 0&&L.callback){var q,Ae=(q=this.scale)===null||q===void 0?void 0:q.callback.apply(q,Mt()(R));if(!Jt()(Ae))return[Ae]}return this.defaultCallback(R)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),Z}(),dr,Ar,rn,$r,sr,On;function c(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function E(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?c(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):c(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function w(Z){return new Promise(function($){return setTimeout($,Z)})}var _=(dr={},G()(dr,Yn.a.FLOAT,4),G()(dr,Yn.a.UNSIGNED_BYTE,1),G()(dr,Yn.a.UNSIGNED_SHORT,2),dr),H=(Ar=Object(g.injectable)(),rn=Object(g.inject)(b.a.IRendererService),Ar($r=(sr=function(){function Z(){P()(this,Z),G()(this,"attributesAndIndices",void 0),li()(this,"rendererService",On,this),G()(this,"attributes",[]),G()(this,"triangulation",void 0),G()(this,"featureLayout",{sizePerElement:0,elements:[]})}return z()(Z,[{key:"registerStyleAttribute",value:function(R){var L=this.getLayerStyleAttribute(R.name||"");return L?L.setProps(R):(L=new hr(R),this.attributes.push(L)),L}},{key:"updateStyleAttribute",value:function(R,L,q){var Ae=this.getLayerStyleAttribute(R);Ae||(Ae=this.registerStyleAttribute(E(E({},L),{},{name:R})));var dt=L.scale;dt&&Ae&&(Ae.scale=dt,Ae.needRescale=!0,Ae.needRemapping=!0,Ae.needRegenerateVertices=!0,q&&q.featureRange&&(Ae.featureRange=q.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(R){return this.attributes.find(function(L){return L.name===R})}},{key:"getLayerAttributeScale",value:function(R){var L,q=this.getLayerStyleAttribute(R),Ae=q==null||(L=q.scale)===null||L===void 0?void 0:L.scalers;return Ae&&Ae[0]?Ae[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(R,L){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ae=arguments.length>3?arguments[3]:void 0,dt=this.attributes.find(function(Ca){return Ca.name===R});if(dt&&dt.descriptor){var It=dt.descriptor,Pt=It.update,Zt=It.buffer,wr=It.size,Cn=wr===void 0?0:wr,Nn=_[Zt.type||Yn.a.FLOAT];if(Pt){var Hn=this.featureLayout,Kn=Hn.elements,Qn=Hn.sizePerElement,Pi=Kn.slice(q,Ae);if(!Pi.length)return;var wi=Pi[0].offset,Hi=wi*Cn*Nn,La=Pi.map(function(Ca,qa){for(var qi=Ca.featureIdx,Di=Ca.vertices,Ni=Ca.normals,wa=Di.length/Qn,Da=[],la=0;la<wa;la++){var eo=Ni?Ni.slice(la*3,la*3+3):[];Da.push.apply(Da,Mt()(Pt(L[qi],qi,Di.slice(la*Qn,la*Qn+Qn),qa,eo)))}return Da}).reduce(function(Ca,qa){return Ca.push.apply(Ca,Mt()(qa)),Ca},[]);dt.vertexAttribute.updateBuffer({data:La,offset:Hi})}}}},{key:"createAttributesAndIndices",value:function(R,L,q){var Ae=this;this.featureLayout={sizePerElement:0,elements:[]},L&&(this.triangulation=L);var dt=this.attributes.map(function(Hi){return Hi.resetDescriptor(),Hi.descriptor}),It=0,Pt=[],Zt=[],wr=[],Cn=3;R.forEach(function(Hi,La){var Ca=Ae.triangulation(Hi,q),qa=Ca.indices,qi=Ca.vertices,Di=Ca.normals,Ni=Ca.size;qa.forEach(function(eo){Zt.push(eo+It)}),Cn=Ni;var wa=qi.length/Ni;Ae.featureLayout.sizePerElement=Cn,Ae.featureLayout.elements.push({featureIdx:La,vertices:qi,normals:Di,offset:It}),It+=wa;for(var Da=function(Xa){var cs=(Di==null?void 0:Di.slice(Xa*3,Xa*3+3))||[],$o=qi.slice(Xa*Ni,Xa*Ni+Ni);dt.forEach(function(co,Ru){if(co&&co.update){var Lo;(Lo=co.buffer.data).push.apply(Lo,Mt()(co.update(Hi,La,$o,Xa,cs)))}})},la=0;la<wa;la++)Da(la)});var Nn=this.rendererService,Hn=Nn.createAttribute,Kn=Nn.createBuffer,Qn=Nn.createElements,Pi={};dt.forEach(function(Hi,La){if(Hi){var Ca=Hi.buffer,qa=Hi.update,qi=Hi.name,Di=Ue()(Hi,["buffer","update","name"]),Ni=Hn(E({buffer:Kn(Ca)},Di));Pi[Hi.name||""]=Ni,Ae.attributes[La].vertexAttribute=Ni}});var wi=Qn({data:Zt,type:Yn.a.UNSIGNED_INT,count:Zt.length});return this.attributesAndIndices={attributes:Pi,elements:wi},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var R;this.attributes.forEach(function(L){L.vertexAttribute&&L.vertexAttribute.destroy()}),(R=this.attributesAndIndices)===null||R===void 0||R.elements.destroy(),this.attributes=[]}}]),Z}(),On=di()(sr.prototype,"rendererService",[rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr))||$r),Se=a("xp6e"),We=a("iegG"),ht=a.n(We),pt=window.document.documentElement.style,Kt=0;function ir(Z){var $=Z;if(typeof Z=="string"&&($=document.getElementById(Z)),$){var R=document.createElement("div");return R.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,R.id="l7-scene-".concat(Kt++),R.classList.add("l7-scene"),$.appendChild(R),R}return null}var qr,ln,Mn,ui,mi,Ri,$a,Ua,_o,ho,Bo,Co,To,ns,Rr,Go,ua,ja,ys,vo,is,f,T,k,ie,de,Be,ft,Tt,Vt,Yt,or,Tr;function Or(Z){var $=br();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function br(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var dn=(qr=Object(g.injectable)(),ln=Object(g.inject)(b.a.SceneID),Mn=Object(g.inject)(b.a.IIconService),ui=Object(g.inject)(b.a.IFontService),mi=Object(g.inject)(b.a.IControlService),Ri=Object(g.inject)(b.a.IGlobalConfigService),$a=Object(g.inject)(b.a.IMapService),Ua=Object(g.inject)(b.a.ICoordinateSystemService),_o=Object(g.inject)(b.a.IRendererService),ho=Object(g.inject)(b.a.ILayerService),Bo=Object(g.inject)(b.a.ICameraService),Co=Object(g.inject)(b.a.IInteractionService),To=Object(g.inject)(b.a.IPickingService),ns=Object(g.inject)(b.a.IShaderModuleService),Rr=Object(g.inject)(b.a.IMarkerService),Go=Object(g.inject)(b.a.IPopupService),qr(ua=(ja=function(Z){qt()(R,Z);var $=Or(R);function R(){var L;return P()(this,R),L=$.call(this),G()(ge()(L),"destroyed",!1),G()(ge()(L),"loaded",!1),G()(ge()(L),"loadFont",!1),G()(ge()(L),"fontFamily",""),li()(ge()(L),"id",ys,ge()(L)),li()(ge()(L),"iconService",vo,ge()(L)),li()(ge()(L),"fontService",is,ge()(L)),li()(ge()(L),"controlService",f,ge()(L)),li()(ge()(L),"configService",T,ge()(L)),li()(ge()(L),"map",k,ge()(L)),li()(ge()(L),"coordinateSystemService",ie,ge()(L)),li()(ge()(L),"rendererService",de,ge()(L)),li()(ge()(L),"layerService",Be,ge()(L)),li()(ge()(L),"cameraService",ft,ge()(L)),li()(ge()(L),"interactionService",Tt,ge()(L)),li()(ge()(L),"pickingService",Vt,ge()(L)),li()(ge()(L),"shaderModuleService",Yt,ge()(L)),li()(ge()(L),"markerService",or,ge()(L)),li()(ge()(L),"popupService",Tr,ge()(L)),G()(ge()(L),"inited",!1),G()(ge()(L),"initPromise",void 0),G()(ge()(L),"rendering",!1),G()(ge()(L),"$container",void 0),G()(ge()(L),"canvas",void 0),G()(ge()(L),"markerContainer",void 0),G()(ge()(L),"hooks",void 0),G()(ge()(L),"handleWindowResized",function(){L.emit("resize"),L.$container&&(L.initContainer(),ee.a.triggerResize(),L.coordinateSystemService.needRefresh=!0,L.render())}),G()(ge()(L),"handleMapCameraChanged",function(q){L.cameraService.update(q),L.render()}),L.hooks={init:new Se.a},L}return z()(R,[{key:"init",value:function(q){var Ae=this;this.configService.setSceneConfig(this.id,q),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",pi()(Mi.a.mark(function dt(){return Mi.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,new Promise(function(Zt){Ae.map.onCameraChanged(function(wr){Ae.cameraService.init(),Ae.cameraService.update(wr),Ae.map.version!=="GAODE2.x"&&Zt()}),Ae.map.version!=="GAODE2.x"?Ae.map.init():Zt()});case 2:if(!(Ae.map.version==="GAODE2.x"&&Ae.map.initViewPort)){Pt.next=6;break}return Pt.next=5,Ae.map.init();case 5:Ae.map.initViewPort();case 6:Ae.map.onCameraChanged(Ae.handleMapCameraChanged),Ae.map.addMarkerContainer(),Ae.markerService.addMarkers(),Ae.markerService.addMarkerLayers(),Ae.popupService.initPopup(),Ae.interactionService.init(),Ae.interactionService.on(vi.a.Drag,Ae.addSceneEvent.bind(Ae));case 13:case"end":return Pt.stop()}},dt)}))),this.hooks.init.tapPromise("initRenderer",pi()(Mi.a.mark(function dt(){var It;return Mi.a.wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:if(It=ir(Ae.configService.getSceneConfig(Ae.id).id||""),Ae.$container=It,!It){Zt.next=11;break}return Ae.canvas=ee.a.create("canvas","",It),Ae.setCanvas(),Zt.next=7,Ae.rendererService.init(Ae.canvas,Ae.configService.getSceneConfig(Ae.id));case 7:ht()(Ae.$container,Ae.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(Ae.handleWindowResized),Zt.next=12;break;case 11:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:Ae.pickingService.init(Ae.id);case 13:case"end":return Zt.stop()}},dt)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(q){this.layerService.add(q),this.render()}},{key:"render",value:function(){var L=pi()(Mi.a.mark(function Ae(){return Mi.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(!(this.rendering||this.destroyed)){It.next=2;break}return It.abrupt("return");case 2:if(this.rendering=!0,this.inited){It.next=15;break}return It.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){It.next=10;break}return It.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 15:this.layerService.renderLayers(),this.rendering=!1;case 17:case"end":return It.stop()}},Ae,this)}));function q(){return L.apply(this,arguments)}return q}()},{key:"addFontFace",value:function(q,Ae){this.fontFamily=q;var dt=document.createElement("style");dt.type="text/css",dt.innerText=`
        @font-face{
            font-family: '`.concat(q,`';
            src: url('`).concat(Ae,`') format('woff2'),
            url('`).concat(Ae,`') format('woff'),
            url('`).concat(Ae,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(dt),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(q){var Ae,dt=(Ae=this.$container)===null||Ae===void 0?void 0:Ae.getElementsByTagName("canvas")[0];this.render();var It=q==="jpg"?dt==null?void 0:dt.toDataURL("image/jpeg"):dt==null?void 0:dt.toDataURL("image/png");return It}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var q=this.$container.parentElement;q!==null&&(this.markerContainer=ee.a.create("div","l7-marker-container",q))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(We.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var q,Ae,dt=ee.a.DPR,It=((q=this.$container)===null||q===void 0?void 0:q.clientWidth)||400,Pt=((Ae=this.$container)===null||Ae===void 0?void 0:Ae.clientHeight)||300,Zt=this.canvas;Zt&&(Zt.width=It*dt,Zt.height=Pt*dt,Zt.style.width="".concat(It,"px"),Zt.style.height="".concat(Pt,"px")),this.rendererService.viewport({x:0,y:0,width:dt*It,height:dt*Pt})}},{key:"setCanvas",value:function(){var q,Ae,dt=ee.a.DPR,It=((q=this.$container)===null||q===void 0?void 0:q.clientWidth)||400,Pt=((Ae=this.$container)===null||Ae===void 0?void 0:Ae.clientHeight)||300,Zt=this.canvas;Zt.width=It*dt,Zt.height=Pt*dt,Zt.style.width="".concat(It,"px"),Zt.style.height="".concat(Pt,"px")}},{key:"addSceneEvent",value:function(q){this.emit(q.type,q)}}]),R}(o.EventEmitter),ys=di()(ja.prototype,"id",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=di()(ja.prototype,"iconService",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=di()(ja.prototype,"fontService",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=di()(ja.prototype,"controlService",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=di()(ja.prototype,"configService",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=di()(ja.prototype,"map",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=di()(ja.prototype,"coordinateSystemService",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=di()(ja.prototype,"rendererService",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=di()(ja.prototype,"layerService",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=di()(ja.prototype,"cameraService",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=di()(ja.prototype,"interactionService",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=di()(ja.prototype,"pickingService",[To],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=di()(ja.prototype,"shaderModuleService",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or=di()(ja.prototype,"markerService",[Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tr=di()(ja.prototype,"popupService",[Go],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ja))||ua),un=a("Jzvz"),Sr=a.n(un);function wn(Z){var $=0;switch(Z){case"vec2":case"ivec2":$=2;break;case"vec3":case"ivec3":$=3;break;case"vec4":case"ivec4":case"mat2":$=4;break;case"mat3":$=9;break;case"mat4":$=16;break;default:}return $}var Ii=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function ti(Z){var $={};return Z=Z.replace(Ii,function(R,L,q){var Ae=q.split(":"),dt=Ae[0].trim(),It="";switch(Ae.length>1&&(It=Ae[1].trim()),L){case"bool":It=It==="true";break;case"float":case"int":It=Number(It);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":It?It=It.replace("[","").replace("]","").split(",").reduce(function(Pt,Zt){return Pt.push(Number(Zt.trim())),Pt},[]):It=new Array(wn(L)).fill(0);break;default:}return $[dt]=It,"uniform ".concat(L," ").concat(dt,`;
`)}),{content:Z,uniforms:$}}var $n,Yr;function Zn(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function In(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?Zn(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):Zn(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}var ba="#define PI 3.14159265359",na=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,ga=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,ya=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,_a=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,ca=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,ci=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,no=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,No=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,F=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 0.0, 0.0, 0.0, // offsets
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0;   // offsets
}`,re=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Te=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,he=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,qe=/precision\s+(high|low|medium)p\s+float/,er=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,vn=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Gn=($n=Object(g.injectable)(),$n(Yr=function(){function Z(){P()(this,Z),G()(this,"moduleCache",{}),G()(this,"rawContentCache",{})}return z()(Z,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:ba,fs:ba}),this.registerModule("decode",{vs:na,fs:""}),this.registerModule("projection",{vs:no,fs:""}),this.registerModule("project",{vs:ci,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:No}),this.registerModule("lighting",{vs:ya,fs:""}),this.registerModule("light",{vs:ga,fs:""}),this.registerModule("picking",{vs:ca,fs:_a}),this.registerModule("styleMapping",{vs:F,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:re,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Te,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:he,fs:""})}},{key:"registerModule",value:function(R,L){if(!this.rawContentCache[R]){var q=L.vs,Ae=L.fs,dt=L.uniforms,It=ti(q),Pt=It.content,Zt=It.uniforms,wr=ti(Ae),Cn=wr.content,Nn=wr.uniforms;this.rawContentCache[R]={fs:Cn,uniforms:In(In(In({},Zt),Nn),dt),vs:Pt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(R){var L=this;if(this.moduleCache[R])return this.moduleCache[R];var q=this.rawContentCache[R].vs,Ae=this.rawContentCache[R].fs,dt=this.processModule(q,[],"vs"),It=dt.content,Pt=dt.includeList,Zt=this.processModule(Ae,[],"fs"),wr=Zt.content,Cn=Zt.includeList,Nn=wr,Hn=Sr()(Pt.concat(Cn).concat(R)).reduce(function(Kn,Qn){return In(In({},Kn),L.rawContentCache[Qn].uniforms)},{});return qe.test(wr)||(Nn=er+wr),this.moduleCache[R]={fs:Nn.trim(),uniforms:Hn,vs:It.trim()},this.moduleCache[R]}},{key:"processModule",value:function(R,L,q){var Ae=this,dt=R.replace(vn,function(It,Pt){var Zt=Pt.split(" "),wr=Zt[0].replace(/"/g,"");if(L.indexOf(wr)>-1)return"";var Cn=Ae.rawContentCache[wr][q];L.push(wr);var Nn=Ae.processModule(Cn,L,q),Hn=Nn.content;return Hn});return{content:dt,includeList:L}}}]),Z}())||Yr),fa=a("iWIM"),Ja=a.n(fa),po=a("bPkA"),as,Es,ou,Gu,Ws,su=(as=Object(g.injectable)(),Es=Object(g.inject)(b.a.IShaderModuleService),as(ou=(Gu=function(){function Z(){P()(this,Z),li()(this,"shaderModuleService",Ws,this),G()(this,"rendererService",void 0),G()(this,"cameraService",void 0),G()(this,"mapService",void 0),G()(this,"interactionService",void 0),G()(this,"layerService",void 0),G()(this,"config",void 0)}return z()(Z,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return po.a.Normal}},{key:"init",value:function(R,L){this.config=L,this.rendererService=R.getContainer().get(b.a.IRendererService),this.cameraService=R.getContainer().get(b.a.ICameraService),this.mapService=R.getContainer().get(b.a.IMapService),this.interactionService=R.getContainer().get(b.a.IInteractionService),this.layerService=R.getContainer().get(b.a.ILayerService)}},{key:"render",value:function(R){}}]),Z}(),Ws=di()(Gu.prototype,"shaderModuleService",[Es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gu))||ou),wc,so;function kf(Z){var $=Yi();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Yi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Uf=(wc=Object(g.injectable)(),wc(so=function(Z){qt()(R,Z);var $=kf(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(q,Ae){Ja()(rr()(R.prototype),"init",this).call(this,q,Ae)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),R}(su))||so),Dc,Hu,mt,uu,Ns;function Oo(Z,$){var R=typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(!R){if(Array.isArray(Z)||(R=Ss(Z))||$&&Z&&typeof Z.length=="number"){R&&(Z=R);var L=0,q=function(){};return{s:q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Zt){throw Zt},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae=!0,dt=!1,It;return{s:function(){R=R.call(Z)},n:function(){var Zt=R.next();return Ae=Zt.done,Zt},e:function(Zt){dt=!0,It=Zt},f:function(){try{!Ae&&R.return!=null&&R.return()}finally{if(dt)throw It}}}}function Ss(Z,$){if(!!Z){if(typeof Z=="string")return cu(Z,$);var R=Object.prototype.toString.call(Z).slice(8,-1);if(R==="Object"&&Z.constructor&&(R=Z.constructor.name),R==="Map"||R==="Set")return Array.from(Z);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return cu(Z,$)}}function cu(Z,$){($==null||$>Z.length)&&($=Z.length);for(var R=0,L=new Array($);R<$;R++)L[R]=Z[R];return L}var Vu=(Dc=Object(g.injectable)(),Hu=Object(g.inject)(b.a.IPostProcessor),Dc(mt=(uu=function(){function Z(){P()(this,Z),G()(this,"passes",[]),li()(this,"postProcessor",Ns,this),G()(this,"layer",void 0),G()(this,"renderFlag",void 0),G()(this,"width",0),G()(this,"height",0)}return z()(Z,[{key:"setLayer",value:function(R){this.layer=R}},{key:"setRenderFlag",value:function(R){this.renderFlag=R}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var $=pi()(Mi.a.mark(function L(){var q,Ae,dt;return Mi.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:q=Oo(this.passes),Pt.prev=1,q.s();case 3:if((Ae=q.n()).done){Pt.next=9;break}return dt=Ae.value,Pt.next=7,dt.render(this.layer);case 7:Pt.next=3;break;case 9:Pt.next=14;break;case 11:Pt.prev=11,Pt.t0=Pt.catch(1),q.e(Pt.t0);case 14:return Pt.prev=14,q.f(),Pt.finish(14);case 17:this.layer.renderModels();case 18:case"end":return Pt.stop()}},L,this,[[1,11,14,17]])}));function R(){return $.apply(this,arguments)}return R}()},{key:"resize",value:function(R,L){(this.width!==R||this.height!==L)&&(this.width=R,this.height=L)}},{key:"add",value:function(R,L){R.getType()===po.a.PostProcessing?this.postProcessor.add(R,this.layer,L):(R.init(this.layer,L),this.passes.push(R))}},{key:"insert",value:function(R,L,q){R.init(this.layer,L),this.passes.splice(q,0,R)}},{key:"destroy",value:function(){this.passes.length=0}}]),Z}(),Ns=di()(uu.prototype,"postProcessor",[Hu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu))||mt),os,fu;function lu(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function hu(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?lu(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):lu(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function Fc(Z){var $=Ts();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Ts(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var za=(os=Object(g.injectable)(),os(fu=function(Z){qt()(R,Z);var $=Fc(R);function R(){var L;P()(this,R);for(var q=arguments.length,Ae=new Array(q),dt=0;dt<q;dt++)Ae[dt]=arguments[dt];return L=$.call.apply($,[this].concat(Ae)),G()(ge()(L),"pickingFBO",void 0),G()(ge()(L),"layer",void 0),G()(ge()(L),"width",0),G()(ge()(L),"height",0),G()(ge()(L),"alreadyInRendering",!1),G()(ge()(L),"pickFromPickingFBO",function(It){var Pt=It.x,Zt=It.y,wr=It.lngLat,Cn=It.type;if(!(!L.layer.isVisible()||!L.layer.needPick(Cn))){var Nn=L.rendererService,Hn=Nn.getViewportSize,Kn=Nn.readPixels,Qn=Nn.useFramebuffer,Pi=Hn(),wi=Pi.width,Hi=Pi.height,La=L.layer.getLayerConfig(),Ca=La.enableHighlight,qa=La.enableSelect,qi=Pt*ee.a.DPR,Di=Zt*ee.a.DPR;if(!(qi>wi||qi<0||Di>Hi||Di<0)){var Ni;Qn(L.pickingFBO,function(){var wa;if(Ni=Kn({x:Math.round(qi),y:Math.round(Hi-(Zt+1)*ee.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:L.pickingFBO}),Ni[0]!==0||Ni[1]!==0||Ni[2]!==0){var Da=Object(ee.c)(Ni),la=L.layer.getSource().getFeatureById(Da),eo={x:Pt,y:Zt,type:Cn,lngLat:wr,featureId:Da,feature:la};la&&(L.layer.setCurrentPickId(Da),L.triggerHoverOnLayer(eo))}else{var Xa={x:Pt,y:Zt,lngLat:wr,type:L.layer.getCurrentPickId()===null?"un"+Cn:"mouseout",featureId:null,feature:null};L.triggerHoverOnLayer(hu(hu({},Xa),{},{type:"unpick"})),L.triggerHoverOnLayer(Xa),L.layer.setCurrentPickId(null)}Ca&&L.highlightPickedFeature(Ni),qa&&Cn==="click"&&((wa=Ni)===null||wa===void 0?void 0:wa.toString())!==[0,0,0,0].toString()&&L.selectFeature(Ni)})}}}),L}return z()(R,[{key:"getType",value:function(){return po.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(q,Ae){Ja()(rr()(R.prototype),"init",this).call(this,q,Ae),this.layer=q;var dt=this.rendererService,It=dt.createTexture2D,Pt=dt.createFramebuffer,Zt=dt.getViewportSize,wr=Zt(),Cn=wr.width,Nn=wr.height;this.pickingFBO=Pt({color:It({width:Cn,height:Nn,wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})}),this.interactionService.on(vi.a.Hover,this.pickFromPickingFBO),this.interactionService.on(vi.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(vi.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(q){var Ae=this;if(!this.alreadyInRendering){var dt=this.rendererService,It=dt.getViewportSize,Pt=dt.useFramebuffer,Zt=dt.clear,wr=It(),Cn=wr.width,Nn=wr.height;this.alreadyInRendering=!0,(this.width!==Cn||this.height!==Nn)&&(this.pickingFBO.resize({width:Cn,height:Nn}),this.width=Cn,this.height=Nn),Pt(this.pickingFBO,function(){Zt({framebuffer:Ae.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Hn=Ae.layer.multiPassRenderer.getRenderFlag();Ae.layer.multiPassRenderer.setRenderFlag(!1),q.hooks.beforePickingEncode.call(),q.render(),q.hooks.afterPickingEncode.call(),Ae.layer.multiPassRenderer.setRenderFlag(Hn),Ae.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(q){this.layer.emit(q.type,q)}},{key:"highlightPickedFeature",value:function(q){var Ae=wt()(q,3),dt=Ae[0],It=Ae[1],Pt=Ae[2];this.layer.hooks.beforeHighlight.call([dt,It,Pt]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(q){var Ae=wt()(q,3),dt=Ae[0],It=Ae[1],Pt=Ae[2];this.layer.hooks.beforeSelect.call([dt,It,Pt]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(q){var Ae=q.featureId,dt=Object(ee.d)(Ae);this.selectFeature(new Uint8Array(dt))}},{key:"highlightFeatureHandle",value:function(q){var Ae=q.featureId,dt=Object(ee.d)(Ae);this.highlightPickedFeature(new Uint8Array(dt))}}]),R}(su))||fu),zo=a("+em5"),zu,Xo;function du(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function vu(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?du(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):du(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function Bc(Z){var $=kc();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function kc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Ys=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Uc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,pu=(zu=Object(g.injectable)(),zu(Xo=function(Z){qt()(R,Z);var $=Bc(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Uc,fs:Ys});var q=this.shaderModuleService.getModule("blur-pass"),Ae=q.vs,dt=q.fs,It=q.uniforms,Pt=this.rendererService.getViewportSize(),Zt=Pt.width,wr=Pt.height;return{vs:Ae,fs:dt,uniforms:vu(vu({},It),{},{u_ViewportSize:[Zt,wr]})}}},{key:"convertOptionsToUniforms",value:function(q){var Ae={};return Jt()(q.blurRadius)||(Ae.u_BlurDir=[q.blurRadius,0]),Ae}}]),R}(zo.a))||Xo),mu,gu;function Xu(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function Wu(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?Xu(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):Xu(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function jc(Z){var $=Gc();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Gc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var yu=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Eu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wo=(mu=Object(g.injectable)(),mu(gu=function(Z){qt()(R,Z);var $=jc(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Eu,fs:yu});var q=this.shaderModuleService.getModule("blur-pass"),Ae=q.vs,dt=q.fs,It=q.uniforms,Pt=this.rendererService.getViewportSize(),Zt=Pt.width,wr=Pt.height;return{vs:Ae,fs:dt,uniforms:Wu(Wu({},It),{},{u_ViewportSize:[Zt,wr]})}}},{key:"convertOptionsToUniforms",value:function(q){var Ae={};return Jt()(q.blurRadius)||(Ae.u_BlurDir=[0,q.blurRadius]),Ae}}]),R}(zo.a))||gu),Yo,Zs;function As(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function Su(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?As(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):As(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function Yu(Z){var $=Zu();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Zu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Tu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Ku=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Qu=(Yo=Object(g.injectable)(),Yo(Zs=function(Z){qt()(R,Z);var $=Yu(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Ku,fs:Tu});var q=this.shaderModuleService.getModule("colorhalftone-pass"),Ae=q.vs,dt=q.fs,It=q.uniforms,Pt=this.rendererService.getViewportSize(),Zt=Pt.width,wr=Pt.height;return{vs:Ae,fs:dt,uniforms:Su(Su({},It),{},{u_ViewportSize:[Zt,wr]})}}}]),R}(zo.a))||Zs),Ks,Hc;function ko(Z){var $=Vc();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Vc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var zc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Zo=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Au=(Ks=Object(g.injectable)(),Ks(Hc=function(Z){qt()(R,Z);var $=ko(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Zo,fs:zc}),this.shaderModuleService.getModule("copy-pass")}}]),R}(zo.a))||Hc),Ko,Ls;function xu(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function bu(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?xu(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):xu(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function $u(Z){var $=Ju();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Ju(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var qu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Xc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Wc=(Ko=Object(g.injectable)(),Ko(Ls=function(Z){qt()(R,Z);var $=$u(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Xc,fs:qu});var q=this.shaderModuleService.getModule("hexagonalpixelate-pass"),Ae=q.vs,dt=q.fs,It=q.uniforms,Pt=this.rendererService.getViewportSize(),Zt=Pt.width,wr=Pt.height;return{vs:Ae,fs:dt,uniforms:bu(bu({},It),{},{u_ViewportSize:[Zt,wr]})}}}]),R}(zo.a))||Ls),ec,tc;function rc(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function nc(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?rc(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):rc(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function Yc(Z){var $=ic();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var ac=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,uo=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Zc=(ec=Object(g.injectable)(),ec(tc=function(Z){qt()(R,Z);var $=Yc(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:uo,fs:ac});var q=this.shaderModuleService.getModule("ink-pass"),Ae=q.vs,dt=q.fs,It=q.uniforms,Pt=this.rendererService.getViewportSize(),Zt=Pt.width,wr=Pt.height;return{vs:Ae,fs:dt,uniforms:nc(nc({},It),{},{u_ViewportSize:[Zt,wr]})}}}]),R}(zo.a))||tc),Qs,ws;function Kc(Z){var $=Qc();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Qc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var $c=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Jc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,qc=(Qs=Object(g.injectable)(),Qs(ws=function(Z){qt()(R,Z);var $=Kc(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Jc,fs:$c}),this.shaderModuleService.getModule("noise-pass")}}]),R}(zo.a))||ws),_u,oc;function ef(Z){var $=tf();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function tf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var rf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,nf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,xs=(_u=Object(g.injectable)(),_u(oc=function(Z){qt()(R,Z);var $=ef(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:rf,fs:nf}),this.shaderModuleService.getModule("sepia-pass")}}]),R}(zo.a))||oc),af,of,sc,$s,ss,Cu,jf=(af=Object(g.injectable)(),of=Object(g.inject)(b.a.IRendererService),sc=Object(g.postConstruct)(),af($s=(ss=function(){function Z(){P()(this,Z),li()(this,"rendererService",Cu,this),G()(this,"passes",[]),G()(this,"readFBO",void 0),G()(this,"writeFBO",void 0)}return z()(Z,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var $=pi()(Mi.a.mark(function L(q){var Ae,dt;return Mi.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:Ae=0;case 1:if(!(Ae<this.passes.length)){Pt.next=10;break}return dt=this.passes[Ae],dt.setRenderToScreen(this.isLastEnabledPass(Ae)),Pt.next=6,dt.render(q);case 6:Ae!==this.passes.length-1&&this.swap();case 7:Ae++,Pt.next=1;break;case 10:case"end":return Pt.stop()}},L,this)}));function R(L){return $.apply(this,arguments)}return R}()},{key:"resize",value:function(R,L){this.readFBO.resize({width:R,height:L}),this.writeFBO.resize({width:R,height:L})}},{key:"add",value:function(R,L,q){R.init(L,q),this.passes.push(R)}},{key:"insert",value:function(R,L,q,Ae){R.init(q,Ae),this.passes.splice(L,0,R)}},{key:"getPostProcessingPassByName",value:function(R){return this.passes.find(function(L){return L.getName()===R})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(R){for(var L=R+1;L<this.passes.length;L++)if(this.passes[L].isEnabled())return!1;return!0}},{key:"swap",value:function(){var R=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=R}}]),Z}(),Cu=di()(ss.prototype,"rendererService",[of],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),di()(ss.prototype,"init",[sc],Object.getOwnPropertyDescriptor(ss.prototype,"init"),ss.prototype),ss))||$s),Ou,uc;function sf(Z){var $=uf();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function uf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var Js=(Ou=Object(g.injectable)(),Ou(uc=function(Z){qt()(R,Z);var $=sf(R);function R(){return P()(this,R),$.apply(this,arguments)}return z()(R,[{key:"getType",value:function(){return po.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(q,Ae){Ja()(rr()(R.prototype),"init",this).call(this,q,Ae)}},{key:"render",value:function(q){var Ae=this.rendererService,dt=Ae.useFramebuffer,It=Ae.clear;dt(null,function(){It({color:[0,0,0,0],depth:1,stencil:0}),q.multiPassRenderer.setRenderFlag(!1),q.render(),q.multiPassRenderer.setRenderFlag(!0)})}}]),R}(su))||uc),cc,Ds,cf,Fs,ff;function bs(Z,$){var R=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);$&&(L=L.filter(function(q){return Object.getOwnPropertyDescriptor(Z,q).enumerable})),R.push.apply(R,L)}return R}function _s(Z){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{};$%2?bs(Object(R),!0).forEach(function(L){G()(Z,L,R[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(R)):bs(Object(R)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(R,L))})}return Z}function Gf(Z){var $=Bs();return function(){var L=rr()(Z),q;if($){var Ae=rr()(this).constructor;q=Reflect.construct(L,arguments,Ae)}else q=L.apply(this,arguments);return tr()(this,q)}}function Bs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}var lf=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Cs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,fc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function Pu(Z,$){for(var R=0,L=1/$,q=Z;q>0;)R=R+L*(q%$),q=Math.floor(q/$),L=L/$;return R}var lc=1,hc=(cc=Object(g.injectable)(),Ds=Object(g.inject)(b.a.IShaderModuleService),cc(cf=(Fs=function(Z){qt()(R,Z);var $=Gf(R);function R(){var L;P()(this,R);for(var q=arguments.length,Ae=new Array(q),dt=0;dt<q;dt++)Ae[dt]=arguments[dt];return L=$.call.apply($,[this].concat(Ae)),li()(ge()(L),"shaderModuleService",ff,ge()(L)),G()(ge()(L),"haltonSequence",[]),G()(ge()(L),"accumulatingId",0),G()(ge()(L),"frame",0),G()(ge()(L),"timer",void 0),G()(ge()(L),"sampleRenderTarget",void 0),G()(ge()(L),"prevRenderTarget",void 0),G()(ge()(L),"outputRenderTarget",void 0),G()(ge()(L),"copyRenderTarget",void 0),G()(ge()(L),"blendModel",void 0),G()(ge()(L),"outputModel",void 0),G()(ge()(L),"copyModel",void 0),L}return z()(R,[{key:"getType",value:function(){return po.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(q,Ae){Ja()(rr()(R.prototype),"init",this).call(this,q,Ae);var dt=this.rendererService,It=dt.createFramebuffer,Pt=dt.createTexture2D;this.sampleRenderTarget=It({color:Pt({width:1,height:1,wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=It({color:Pt({width:1,height:1,wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=It({color:Pt({width:1,height:1,wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=It({color:Pt({width:1,height:1,wrapS:Yn.a.CLAMP_TO_EDGE,wrapT:Yn.a.CLAMP_TO_EDGE})});for(var Zt=0;Zt<30;Zt++)this.haltonSequence.push([Pu(Zt,2),Pu(Zt,3)]);this.blendModel=this.createTriangleModel("blend-pass",lf),this.outputModel=this.createTriangleModel("copy-pass",Cs,{blend:{enable:!0,func:{srcRGB:Yn.a.ONE,dstRGB:Yn.a.ONE_MINUS_SRC_ALPHA,srcAlpha:Yn.a.ONE,dstAlpha:Yn.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:Yn.a.FUNC_ADD,alpha:Yn.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Cs)}},{key:"render",value:function(q){var Ae=this,dt=this.rendererService,It=dt.clear,Pt=dt.getViewportSize,Zt=dt.useFramebuffer,wr=Pt(),Cn=wr.width,Nn=wr.height;this.sampleRenderTarget.resize({width:Cn,height:Nn}),this.prevRenderTarget.resize({width:Cn,height:Nn}),this.outputRenderTarget.resize({width:Cn,height:Nn}),this.copyRenderTarget.resize({width:Cn,height:Nn}),this.resetFrame(),this.stopAccumulating();var Hn=q.multiPassRenderer.getPostProcessor().getReadFBO();Zt(Hn,function(){It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Hn}),q.multiPassRenderer.setRenderFlag(!1),q.render(),q.multiPassRenderer.setRenderFlag(!0)});var Kn=function Qn(Pi){!Ae.accumulatingId||Pi!==Ae.accumulatingId||Ae.isFinished()||(Ae.doRender(q),requestAnimationFrame(function(){Qn(Pi)}))};this.accumulatingId=lc++,this.timer=window.setTimeout(function(){Kn(Ae.accumulatingId)},50)}},{key:"doRender",value:function(q){var Ae=this,dt=this.rendererService,It=dt.clear,Pt=dt.getViewportSize,Zt=dt.useFramebuffer,wr=Pt(),Cn=wr.width,Nn=wr.height,Hn=q.getLayerConfig(),Kn=Hn.jitterScale,Qn=Kn===void 0?1:Kn,Pi=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Pi[0]*2-1)/Cn*Qn,(Pi[1]*2-1)/Nn*Qn),q.multiPassRenderer.setRenderFlag(!1),q.hooks.beforeRender.call(),Zt(this.sampleRenderTarget,function(){It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Ae.sampleRenderTarget}),q.render()}),q.hooks.afterRender.call(),q.multiPassRenderer.setRenderFlag(!0);var wi=q.getLayerConfig();Zt(this.outputRenderTarget,function(){Ae.blendModel.draw({uniforms:{u_opacity:wi.opacity||1,u_MixRatio:Ae.frame===0?1:.9,u_Diffuse1:Ae.sampleRenderTarget,u_Diffuse2:Ae.frame===0?q.multiPassRenderer.getPostProcessor().getReadFBO():Ae.prevRenderTarget}})}),this.frame===0&&It({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(Zt(this.copyRenderTarget,function(){Ae.outputModel.draw({uniforms:{u_Texture:Ae.outputRenderTarget}})}),Zt(q.multiPassRenderer.getPostProcessor().getReadFBO(),function(){Ae.copyModel.draw({uniforms:{u_Texture:Ae.copyRenderTarget}})}),q.multiPassRenderer.getPostProcessor().render(q));var Hi=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Hi,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(q,Ae,dt){this.shaderModuleService.registerModule(q,{vs:fc,fs:Ae});var It=this.shaderModuleService.getModule(q),Pt=It.vs,Zt=It.fs,wr=It.uniforms,Cn=this.rendererService,Nn=Cn.createAttribute,Hn=Cn.createBuffer,Kn=Cn.createModel;return Kn(_s({vs:Pt,fs:Zt,attributes:{a_Position:Nn({buffer:Hn({data:[-4,-4,4,-4,0,4],type:Yn.a.FLOAT}),size:2})},uniforms:_s({},wr),depth:{enable:!1},count:3},dt))}}]),R}(su),ff=di()(Fs.prototype,"shaderModuleService",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fs))||cf),us=new g.Container;us.bind(b.a.IGlobalConfigService).to(ta).inSingletonScope(),us.bind(b.a.IShaderModuleService).to(Gn).inSingletonScope(),Object(g.decorate)(Object(g.injectable)(),o.EventEmitter),us.bind(b.a.IEventEmitter).to(o.EventEmitter);var qs=y()(us,!1),hf=function($){var R=qs.lazyInject($);return function(L,q,Ae){R.call(this,L,q),Ae&&(Ae.initializer=function(){return L[q]})}},Hf=function($){var R=qs.lazyMultiInject($);return function(L,q,Ae){R.call(this,L,q),Ae&&(Ae.initializer=function(){return L[q]})}},Mu=us,Qo=0;function df(){var Z=new g.Container;return Z.parent=us,Z.bind(b.a.SceneID).toConstantValue("".concat(Qo++)),Z.bind(b.a.ILayerService).to(ae).inSingletonScope(),Z.bind(b.a.ISceneService).to(dn).inSingletonScope(),Z.bind(b.a.ICameraService).to(Nt).inSingletonScope(),Z.bind(b.a.ICoordinateSystemService).to(Ma).inSingletonScope(),Z.bind(b.a.IInteractionService).to(Bi).inSingletonScope(),Z.bind(b.a.IPickingService).to(Un).inSingletonScope(),Z.bind(b.a.IControlService).to(Ve).inSingletonScope(),Z.bind(b.a.IMarkerService).to(xi).inSingletonScope(),Z.bind(b.a.IIconService).to(Ye).inSingletonScope(),Z.bind(b.a.IFontService).to(Bt).inSingletonScope(),Z.bind(b.a.IPopupService).to(Wr).inSingletonScope(),Z.bind(b.a.INormalPass).to(Uf).whenTargetNamed("clear"),Z.bind(b.a.INormalPass).to(za).whenTargetNamed("pixelPicking"),Z.bind(b.a.INormalPass).to(Js).whenTargetNamed("render"),Z.bind(b.a.INormalPass).to(hc).whenTargetNamed("taa"),Z.bind(b.a.IFactoryNormalPass).toFactory(function($){return function(R){return $.container.getNamed(b.a.INormalPass,R)}}),Z.bind(b.a.IPostProcessingPass).to(Au).whenTargetNamed("copy"),Z.bind(b.a.IPostProcessingPass).to(pu).whenTargetNamed("blurH"),Z.bind(b.a.IPostProcessingPass).to(Wo).whenTargetNamed("blurV"),Z.bind(b.a.IPostProcessingPass).to(qc).whenTargetNamed("noise"),Z.bind(b.a.IPostProcessingPass).to(xs).whenTargetNamed("sepia"),Z.bind(b.a.IPostProcessingPass).to(Qu).whenTargetNamed("colorHalftone"),Z.bind(b.a.IPostProcessingPass).to(Wc).whenTargetNamed("hexagonalPixelate"),Z.bind(b.a.IPostProcessingPass).to(Zc).whenTargetNamed("ink"),Z.bind(b.a.IFactoryPostProcessingPass).toFactory(function($){return function(R){var L=$.container.getNamed(b.a.IPostProcessingPass,R);return L.setName(R),L}}),Z}function dc(Z){var $=new g.Container;return $.parent=Z,$.bind(b.a.IStyleAttributeService).to(H).inSingletonScope(),$.bind(b.a.IMultiPassRenderer).to(Vu).inSingletonScope(),$.bind(b.a.IPostProcessor).to(jf).inSingletonScope(),$}},fbrv:function(A,v,a){"use strict";var l=this&&this.__spreadArray||function(pe,J){for(var se=0,fe=J.length,X=pe.length;se<fe;se++,X++)pe[X]=J[se];return pe};Object.defineProperty(v,"__esModule",{value:!0}),v.getFunctionName=v.getBaseClassDependencyCount=v.getDependencies=void 0;var o=a("Yk9n"),m=a("MON2"),g=a("FV85"),p=a("xfSm"),y=a("ujMp");Object.defineProperty(v,"getFunctionName",{enumerable:!0,get:function(){return y.getFunctionName}});var b=a("dX1H");function I(pe,J){var se=y.getFunctionName(J),fe=P(pe,se,J,!1);return fe}v.getDependencies=I;function P(pe,J,se,fe){var X=pe.getConstructorMetadata(se),Oe=X.compilerGeneratedMetadata;if(Oe===void 0){var D=m.MISSING_INJECTABLE_ANNOTATION+" "+J+".";throw new Error(D)}var De=X.userGeneratedMetadata,ot=Object.keys(De),Ke=se.length===0&&ot.length>0,Le=ot.length>se.length,W=Ke||Le?ot.length:se.length,He=z(fe,J,Oe,De,W),C=oe(pe,se),Ze=l(l([],He),C);return Ze}function M(pe,J,se,fe,X){var Oe=X[pe.toString()]||[],D=ee(Oe),De=D.unmanaged!==!0,ot=fe[pe],Ke=D.inject||D.multiInject;if(ot=Ke||ot,ot instanceof o.LazyServiceIdentifer&&(ot=ot.unwrap()),De){var Le=ot===Object,W=ot===Function,He=ot===void 0,C=Le||W||He;if(!J&&C){var Ze=m.MISSING_INJECT_ANNOTATION+" argument "+pe+" in class "+se+".";throw new Error(Ze)}var rt=new b.Target(g.TargetTypeEnum.ConstructorArgument,D.targetName,ot);return rt.metadata=Oe,rt}return null}function z(pe,J,se,fe,X){for(var Oe=[],D=0;D<X;D++){var De=D,ot=M(De,pe,J,se,fe);ot!==null&&Oe.push(ot)}return Oe}function oe(pe,J){for(var se=pe.getPropertiesMetadata(J),fe=[],X=Object.keys(se),Oe=0,D=X;Oe<D.length;Oe++){var De=D[Oe],ot=se[De],Ke=ee(se[De]),Le=Ke.targetName||De,W=Ke.inject||Ke.multiInject,He=new b.Target(g.TargetTypeEnum.ClassProperty,Le,W);He.metadata=ot,fe.push(He)}var C=Object.getPrototypeOf(J.prototype).constructor;if(C!==Object){var Ze=oe(pe,C);fe=l(l([],fe),Ze)}return fe}function G(pe,J){var se=Object.getPrototypeOf(J.prototype).constructor;if(se!==Object){var fe=y.getFunctionName(se),X=P(pe,fe,se,!0),Oe=X.map(function(ot){return ot.metadata.filter(function(Ke){return Ke.key===p.UNMANAGED_TAG})}),D=[].concat.apply([],Oe).length,De=X.length-D;return De>0?De:G(pe,se)}else return 0}v.getBaseClassDependencyCount=G;function ee(pe){var J={};return pe.forEach(function(se){J[se.key.toString()]=se.value}),{inject:J[p.INJECT_TAG],multiInject:J[p.MULTI_INJECT_TAG],targetName:J[p.NAME_TAG],unmanaged:J[p.UNMANAGED_TAG]}}},fwlV:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.typeConstraint=v.namedConstraint=v.taggedConstraint=v.traverseAncerstors=void 0;var l=a("jHQc"),o=a("uYCe"),m=function(b,I){var P=b.parentRequest;return P!==null?I(P)?!0:m(P,I):!1};v.traverseAncerstors=m;var g=function(b){return function(I){var P=function(M){return M!==null&&M.target!==null&&M.target.matchesTag(b)(I)};return P.metaData=new o.Metadata(b,I),P}};v.taggedConstraint=g;var p=g(l.NAMED_TAG);v.namedConstraint=p;var y=function(b){return function(I){var P=null;if(I!==null)if(P=I.bindings[0],typeof b=="string"){var M=P.serviceIdentifier;return M===b}else{var z=I.bindings[0].implementationType;return b===z}return!1}};v.typeConstraint=y},gA0E:function(A,v,a){var l=a("2CCf");function o(){this.__data__=l?l(null):{},this.size=0}A.exports=o},gTTJ:function(A,v){function a(l){return function(o){return l==null?void 0:l[o]}}A.exports=a},gbO8:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.id=void 0;var l=0;function o(){return l++}v.id=o},gmeq:function(A,v){function a(l){return l.split("")}A.exports=a},goqI:function(A,v){function a(l,o){return A.exports=a=Object.setPrototypeOf||function(g,p){return g.__proto__=p,g},A.exports.__esModule=!0,A.exports.default=A.exports,a(l,o)}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},gzRe:function(A,v,a){var l=a("WI+s"),o=a("oHaG"),m=a("7+V3"),g=1/0,p=l&&1/m(new l([,-0]))[1]==g?function(y){return new l(y)}:o;A.exports=p},gzZq:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingToSyntax=void 0;var l=a("MON2"),o=a("FV85"),m=a("D9lx"),g=a("LKzl"),p=function(){function y(b){this._binding=b}return y.prototype.to=function(b){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=b,new m.BindingInWhenOnSyntax(this._binding)},y.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+l.INVALID_TO_SELF_VALUE);var b=this._binding.serviceIdentifier;return this.to(b)},y.prototype.toConstantValue=function(b){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=b,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toDynamicValue=function(b){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=b,this._binding.implementationType=null,new m.BindingInWhenOnSyntax(this._binding)},y.prototype.toConstructor=function(b){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toFactory=function(b){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toFunction=function(b){if(typeof b!="function")throw new Error(l.INVALID_FUNCTION_BINDING);var I=this.toConstantValue(b);return this._binding.type=o.BindingTypeEnum.Function,this._binding.scope=o.BindingScopeEnum.Singleton,I},y.prototype.toAutoFactory=function(b){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(I){var P=function(){return I.container.get(b)};return P},this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toProvider=function(b){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toService=function(b){this.toDynamicValue(function(I){return I.container.get(b)})},y}();v.BindingToSyntax=p},h1nZ:function(A,v,a){"use strict";var l=a("fX6N");a.d(v,"lazyInject",function(){return l.a});var o=a("+em5"),m=a("bB6j");a.d(v,"TYPES",function(){return m.a});var g=a("8/Fi"),p=a("PUg6"),y=a("cZlC"),b=a("O1je"),I=a.n(b);a.o(b,"CoordinateSystem")&&a.d(v,"CoordinateSystem",function(){return b.CoordinateSystem}),a.o(b,"MapServiceEvent")&&a.d(v,"MapServiceEvent",function(){return b.MapServiceEvent});var P=a("L56e");a.d(v,"MapServiceEvent",function(){return P.a});var M=a("HthE");a.d(v,"CoordinateSystem",function(){return M.a});var z=a("/33/"),oe=a.n(z),G=a("EfZ0"),ee=a("riiI"),pe=a.n(ee),J=a("eg+a"),se=a("bYl4"),fe=a.n(se),X=a("FI6e"),Oe=a.n(X),D=a("D+ow"),De=a.n(D),ot=a("AFH1"),Ke=a("8uyu"),Le=a.n(Ke),W=a("J7lC"),He=a.n(W),C=a("V1cb"),Ze=a("4kj+"),rt=a.n(Ze),At=a("bzyH"),Et=a.n(At),ne=a("0eqD"),Q=a.n(ne),te=a("/Uc5"),Fe=a.n(te),ze=a("RMtq"),St=a.n(ze),ut=a("1jvM"),Qt=a.n(ut),vr=a("bPkA"),tt=a("PSsN"),Pe=a.n(tt),Ne=a("6NqC"),ke=a.n(Ne),et=a("bTtR"),Ge=a.n(et),Ot=a("o+pz")},h6x2:function(A,v){function a(l,o){return function(m){return l(o(m))}}A.exports=a},h7MG:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.getBindingDictionary=v.createMockRequest=v.plan=void 0;var l=a("doU7"),o=a("MON2"),m=a("FV85"),g=a("xfSm"),p=a("qK8v"),y=a("ujMp"),b=a("oy+k"),I=a("GXnB"),P=a("yMAV"),M=a("fbrv"),z=a("xiII"),oe=a("dX1H");function G(D){return D._bindingDictionary}v.getBindingDictionary=G;function ee(D,De,ot,Ke,Le,W){var He=D?g.MULTI_INJECT_TAG:g.INJECT_TAG,C=new I.Metadata(He,ot),Ze=new oe.Target(De,Ke,ot,C);if(Le!==void 0){var rt=new I.Metadata(Le,W);Ze.metadata.push(rt)}return Ze}function pe(D,De,ot,Ke,Le){var W=fe(ot.container,Le.serviceIdentifier),He=[];return W.length===l.BindingCount.NoBindingsAvailable&&ot.container.options.autoBindInjectable&&typeof Le.serviceIdentifier=="function"&&D.getConstructorMetadata(Le.serviceIdentifier).compilerGeneratedMetadata&&(ot.container.bind(Le.serviceIdentifier).toSelf(),W=fe(ot.container,Le.serviceIdentifier)),De?He=W:He=W.filter(function(C){var Ze=new z.Request(C.serviceIdentifier,ot,Ke,C,Le);return C.constraint(Ze)}),J(Le.serviceIdentifier,He,Le,ot.container),He}function J(D,De,ot,Ke){switch(De.length){case l.BindingCount.NoBindingsAvailable:if(ot.isOptional())return De;var Le=y.getServiceIdentifierAsString(D),W=o.NOT_REGISTERED;throw W+=y.listMetadataForTarget(Le,ot),W+=y.listRegisteredBindingsForServiceIdentifier(Ke,Le,fe),new Error(W);case l.BindingCount.OnlyOneBindingAvailable:if(!ot.isArray())return De;case l.BindingCount.MultipleBindingsAvailable:default:if(ot.isArray())return De;var Le=y.getServiceIdentifierAsString(D),W=o.AMBIGUOUS_MATCH+" "+Le;throw W+=y.listRegisteredBindingsForServiceIdentifier(Ke,Le,fe),new Error(W)}}function se(D,De,ot,Ke,Le,W){var He,C;if(Le===null){He=pe(D,De,Ke,null,W),C=new z.Request(ot,Ke,null,He,W);var Ze=new P.Plan(Ke,C);Ke.addPlan(Ze)}else He=pe(D,De,Ke,Le,W),C=Le.addChildRequest(W.serviceIdentifier,He,W);He.forEach(function(rt){var At=null;if(W.isArray())At=C.addChildRequest(rt.serviceIdentifier,rt,W);else{if(rt.cache)return;At=C}if(rt.type===m.BindingTypeEnum.Instance&&rt.implementationType!==null){var Et=M.getDependencies(D,rt.implementationType);if(!Ke.container.options.skipBaseClassChecks){var ne=M.getBaseClassDependencyCount(D,rt.implementationType);if(Et.length<ne){var Q=o.ARGUMENTS_LENGTH_MISMATCH(M.getFunctionName(rt.implementationType));throw new Error(Q)}}Et.forEach(function(te){se(D,!1,te.serviceIdentifier,Ke,At,te)})}})}function fe(D,De){var ot=[],Ke=G(D);return Ke.hasKey(De)?ot=Ke.get(De):D.parent!==null&&(ot=fe(D.parent,De)),ot}function X(D,De,ot,Ke,Le,W,He,C){C===void 0&&(C=!1);var Ze=new b.Context(De),rt=ee(ot,Ke,Le,"",W,He);try{return se(D,C,Le,Ze,null,rt),Ze}catch(At){throw p.isStackOverflowExeption(At)&&Ze.plan&&y.circularDependencyToException(Ze.plan.rootRequest),At}}v.plan=X;function Oe(D,De,ot,Ke){var Le=new oe.Target(m.TargetTypeEnum.Variable,"",De,new I.Metadata(ot,Ke)),W=new b.Context(D),He=new z.Request(De,W,null,[],Le);return He}v.createMockRequest=Oe},hYDp:function(A,v,a){var l=a("8Dog"),o=Object.create,m=function(){function g(){}return function(p){if(!l(p))return{};if(o)return o(p);g.prototype=p;var y=new g;return g.prototype=void 0,y}}();A.exports=m},hoy9:function(A,v,a){(function(l,o){A.exports=o(a("m8YW"))})(this,function(l){"use strict";var o=function(B){return B instanceof Uint8Array||B instanceof Uint16Array||B instanceof Uint32Array||B instanceof Int8Array||B instanceof Int16Array||B instanceof Int32Array||B instanceof Float32Array||B instanceof Float64Array||B instanceof Uint8ClampedArray},m=function(B,ye){for(var Xe=Object.keys(ye),zt=0;zt<Xe.length;++zt)B[Xe[zt]]=ye[Xe[zt]];return B},g=`
`;function p(B){return typeof atob!="undefined"?atob(B):"base64:"+B}function y(B){var ye=new Error("(regl) "+B);throw console.error(ye),ye}function b(B,ye){B||y(ye)}function I(B){return B?": "+B:""}function P(B,ye,Xe){B in ye||y("unknown parameter ("+B+")"+I(Xe)+". possible values: "+Object.keys(ye).join())}function M(B,ye){o(B)||y("invalid parameter type"+I(ye)+". must be a typed array")}function z(B,ye){switch(ye){case"number":return typeof B=="number";case"object":return typeof B=="object";case"string":return typeof B=="string";case"boolean":return typeof B=="boolean";case"function":return typeof B=="function";case"undefined":return typeof B=="undefined";case"symbol":return typeof B=="symbol"}}function oe(B,ye,Xe){z(B,ye)||y("invalid parameter type"+I(Xe)+". expected "+ye+", got "+typeof B)}function G(B,ye){B>=0&&(B|0)===B||y("invalid parameter type, ("+B+")"+I(ye)+". must be a nonnegative integer")}function ee(B,ye,Xe){ye.indexOf(B)<0&&y("invalid value"+I(Xe)+". must be one of: "+ye)}var pe=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function J(B){Object.keys(B).forEach(function(ye){pe.indexOf(ye)<0&&y('invalid regl constructor argument "'+ye+'". must be one of '+pe)})}function se(B,ye){for(B=B+"";B.length<ye;)B=" "+B;return B}function fe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function X(B,ye){this.number=B,this.line=ye,this.errors=[]}function Oe(B,ye,Xe){this.file=B,this.line=ye,this.message=Xe}function D(){var B=new Error,ye=(B.stack||B).toString(),Xe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ye);if(Xe)return Xe[1];var zt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ye);return zt?zt[1]:"unknown"}function De(){var B=new Error,ye=(B.stack||B).toString(),Xe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ye);if(Xe)return Xe[1];var zt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ye);return zt?zt[1]:"unknown"}function ot(B,ye){var Xe=B.split(`
`),zt=1,ur=0,jt={unknown:new fe,0:new fe};jt.unknown.name=jt[0].name=ye||D(),jt.unknown.lines.push(new X(0,""));for(var $t=0;$t<Xe.length;++$t){var pr=Xe[$t],_r=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(pr);if(_r)switch(_r[1]){case"line":var Nr=/(\d+)(\s+\d+)?/.exec(_r[2]);Nr&&(zt=Nr[1]|0,Nr[2]&&(ur=Nr[2]|0,ur in jt||(jt[ur]=new fe)));break;case"define":var Dr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(_r[2]);Dr&&(jt[ur].name=Dr[1]?p(Dr[2]):Dr[2]);break}jt[ur].lines.push(new X(zt++,pr))}return Object.keys(jt).forEach(function(Fr){var Gr=jt[Fr];Gr.lines.forEach(function(Pr){Gr.index[Pr.number]=Pr})}),jt}function Ke(B){var ye=[];return B.split(`
`).forEach(function(Xe){if(!(Xe.length<5)){var zt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Xe);zt?ye.push(new Oe(zt[1]|0,zt[2]|0,zt[3].trim())):Xe.length>0&&ye.push(new Oe("unknown",0,Xe))}}),ye}function Le(B,ye){ye.forEach(function(Xe){var zt=B[Xe.file];if(zt){var ur=zt.index[Xe.line];if(ur){ur.errors.push(Xe),zt.hasErrors=!0;return}}B.unknown.hasErrors=!0,B.unknown.lines[0].errors.push(Xe)})}function W(B,ye,Xe,zt,ur){if(!B.getShaderParameter(ye,B.COMPILE_STATUS)){var jt=B.getShaderInfoLog(ye),$t=zt===B.FRAGMENT_SHADER?"fragment":"vertex";ne(Xe,"string",$t+" shader source must be a string",ur);var pr=ot(Xe,ur),_r=Ke(jt);Le(pr,_r),Object.keys(pr).forEach(function(Nr){var Dr=pr[Nr];if(!Dr.hasErrors)return;var Fr=[""],Gr=[""];function Pr(Lr,xt){Fr.push(Lr),Gr.push(xt||"")}Pr("file number "+Nr+": "+Dr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Dr.lines.forEach(function(Lr){if(Lr.errors.length>0){Pr(se(Lr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pr(Lr.line+g,"color:red; background-color:yellow; font-weight:bold");var xt=0;Lr.errors.forEach(function(Wt){var Mr=Wt.message,nn=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Mr);if(nn){var Er=nn[1];switch(Mr=nn[2],Er){case"assign":Er="=";break}xt=Math.max(Lr.line.indexOf(Er,xt),0)}else xt=0;Pr(se("| ",6)),Pr(se("^^^",xt+3)+g,"font-weight:bold"),Pr(se("| ",6)),Pr(Mr+g,"font-weight:bold")}),Pr(se("| ",6)+g)}else Pr(se(Lr.number,4)+"|  "),Pr(Lr.line+g,"color:red")}),typeof document!="undefined"&&!window.chrome?(Gr[0]=Fr.join("%c"),console.log.apply(console,Gr)):console.log(Fr.join(""))}),b.raise("Error compiling "+$t+" shader, "+pr[0].name)}}function He(B,ye,Xe,zt,ur){if(!B.getProgramParameter(ye,B.LINK_STATUS)){var jt=B.getProgramInfoLog(ye),$t=ot(Xe,ur),pr=ot(zt,ur),_r='Error linking program with vertex shader, "'+pr[0].name+'", and fragment shader "'+$t[0].name+'"';typeof document!="undefined"?console.log("%c"+_r+g+"%c"+jt,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(_r+g+jt),b.raise(_r)}}function C(B){B._commandRef=D()}function Ze(B,ye,Xe,zt){C(B);function ur(_r){return _r?zt.id(_r):0}B._fragId=ur(B.static.frag),B._vertId=ur(B.static.vert);function jt(_r,Nr){Object.keys(Nr).forEach(function(Dr){_r[zt.id(Dr)]=!0})}var $t=B._uniformSet={};jt($t,ye.static),jt($t,ye.dynamic);var pr=B._attributeSet={};jt(pr,Xe.static),jt(pr,Xe.dynamic),B._hasCount="count"in B.static||"count"in B.dynamic||"elements"in B.static||"elements"in B.dynamic}function rt(B,ye){var Xe=De();y(B+" in command "+(ye||D())+(Xe==="unknown"?"":" called from "+Xe))}function At(B,ye,Xe){B||rt(ye,Xe||D())}function Et(B,ye,Xe,zt){B in ye||rt("unknown parameter ("+B+")"+I(Xe)+". possible values: "+Object.keys(ye).join(),zt||D())}function ne(B,ye,Xe,zt){z(B,ye)||rt("invalid parameter type"+I(Xe)+". expected "+ye+", got "+typeof B,zt||D())}function Q(B){B()}function te(B,ye,Xe){B.texture?ee(B.texture._texture.internalformat,ye,"unsupported texture format for attachment"):ee(B.renderbuffer._renderbuffer.format,Xe,"unsupported renderbuffer format for attachment")}var Fe=33071,ze=9728,St=9984,ut=9985,Qt=9986,vr=9987,tt=5120,Pe=5121,Ne=5122,ke=5123,et=5124,Ge=5125,Ot=5126,Bt=32819,gt=32820,ge=33635,Lt=34042,qt=36193,xr={};xr[tt]=xr[Pe]=1,xr[Ne]=xr[ke]=xr[qt]=xr[ge]=xr[Bt]=xr[gt]=2,xr[et]=xr[Ge]=xr[Ot]=xr[Lt]=4;function tr(B,ye){return B===gt||B===Bt||B===ge?2:B===Lt?4:xr[B]*ye}function Xr(B){return!(B&B-1)&&!!B}function rr(B,ye,Xe){var zt,ur=ye.width,jt=ye.height,$t=ye.channels;b(ur>0&&ur<=Xe.maxTextureSize&&jt>0&&jt<=Xe.maxTextureSize,"invalid texture shape"),(B.wrapS!==Fe||B.wrapT!==Fe)&&b(Xr(ur)&&Xr(jt),"incompatible wrap mode for texture, both width and height must be power of 2"),ye.mipmask===1?ur!==1&&jt!==1&&b(B.minFilter!==St&&B.minFilter!==Qt&&B.minFilter!==ut&&B.minFilter!==vr,"min filter requires mipmap"):(b(Xr(ur)&&Xr(jt),"texture must be a square power of 2 to support mipmapping"),b(ye.mipmask===(ur<<1)-1,"missing or incomplete mipmap data")),ye.type===Ot&&(Xe.extensions.indexOf("oes_texture_float_linear")<0&&b(B.minFilter===ze&&B.magFilter===ze,"filter not supported, must enable oes_texture_float_linear"),b(!B.genMipmaps,"mipmap generation not supported with float textures"));var pr=ye.images;for(zt=0;zt<16;++zt)if(pr[zt]){var _r=ur>>zt,Nr=jt>>zt;b(ye.mipmask&1<<zt,"missing mipmap data");var Dr=pr[zt];if(b(Dr.width===_r&&Dr.height===Nr,"invalid shape for mip images"),b(Dr.format===ye.format&&Dr.internalformat===ye.internalformat&&Dr.type===ye.type,"incompatible type for mip image"),!Dr.compressed)if(Dr.data){var Fr=Math.ceil(tr(Dr.type,$t)*_r/Dr.unpackAlignment)*Dr.unpackAlignment;b(Dr.data.byteLength===Fr*Nr,"invalid data for image, buffer size is inconsistent with image format")}else Dr.element||Dr.copy}else B.genMipmaps||b((ye.mipmask&1<<zt)==0,"extra mipmap data");ye.compressed&&b(!B.genMipmaps,"mipmap generation for compressed images not supported")}function bn(B,ye,Xe,zt){var ur=B.width,jt=B.height,$t=B.channels;b(ur>0&&ur<=zt.maxTextureSize&&jt>0&&jt<=zt.maxTextureSize,"invalid texture shape"),b(ur===jt,"cube map must be square"),b(ye.wrapS===Fe&&ye.wrapT===Fe,"wrap mode not supported by cube map");for(var pr=0;pr<Xe.length;++pr){var _r=Xe[pr];b(_r.width===ur&&_r.height===jt,"inconsistent cube map face shape"),ye.genMipmaps&&(b(!_r.compressed,"can not generate mipmap for compressed textures"),b(_r.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Nr=_r.images,Dr=0;Dr<16;++Dr){var Fr=Nr[Dr];if(Fr){var Gr=ur>>Dr,Pr=jt>>Dr;b(_r.mipmask&1<<Dr,"missing mipmap data"),b(Fr.width===Gr&&Fr.height===Pr,"invalid shape for mip images"),b(Fr.format===B.format&&Fr.internalformat===B.internalformat&&Fr.type===B.type,"incompatible type for mip image"),Fr.compressed||(Fr.data?b(Fr.data.byteLength===Gr*Pr*Math.max(tr(Fr.type,$t),Fr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Fr.element||Fr.copy)}}}}var ue=m(b,{optional:Q,raise:y,commandRaise:rt,command:At,parameter:P,commandParameter:Et,constructor:J,type:oe,commandType:ne,isTypedArray:M,nni:G,oneOf:ee,shaderError:W,linkError:He,callSite:De,saveCommandRef:C,saveDrawInfo:Ze,framebufferFormat:te,guessCommand:D,texture2D:rr,textureCube:bn}),tn=0,Fn=0,Fi=5,ki=6;function ve(B,ye){this.id=tn++,this.type=B,this.data=ye}function Ye(B){return B.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function vt(B){if(B.length===0)return[];var ye=B.charAt(0),Xe=B.charAt(B.length-1);if(B.length>1&&ye===Xe&&(ye==='"'||ye==="'"))return['"'+Ye(B.substr(1,B.length-2))+'"'];var zt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(B);if(zt)return vt(B.substr(0,zt.index)).concat(vt(zt[1])).concat(vt(B.substr(zt.index+zt[0].length)));var ur=B.split(".");if(ur.length===1)return['"'+Ye(B)+'"'];for(var jt=[],$t=0;$t<ur.length;++$t)jt=jt.concat(vt(ur[$t]));return jt}function wt(B){return"["+vt(B).join("][")+"]"}function me(B,ye){return new ve(B,wt(ye+""))}function Pn(B){return typeof B=="function"&&!B._reglType||B instanceof ve}function Cr(B,ye){if(typeof B=="function")return new ve(Fn,B);if(typeof B=="number"||typeof B=="boolean")return new ve(Fi,B);if(Array.isArray(B))return new ve(ki,B.map(function(Xe,zt){return Cr(Xe,ye+"["+zt+"]")}));if(B instanceof ve)return B;ue(!1,"invalid option type in uniform "+ye)}var Nt={DynamicVariable:ve,define:me,isDynamic:Pn,unbox:Cr,accessor:wt},it={next:typeof requestAnimationFrame=="function"?function(B){return requestAnimationFrame(B)}:function(B){return setTimeout(B,16)},cancel:typeof cancelAnimationFrame=="function"?function(B){return cancelAnimationFrame(B)}:clearTimeout},Ce=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Rt=Ce?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function _t(){var B={"":0},ye=[""];return{id:function(Xe){var zt=B[Xe];return zt||(zt=B[Xe]=ye.length,ye.push(Xe),zt)},str:function(Xe){return ye[Xe]}}}function Tn(B,ye,Xe){var zt=document.createElement("canvas");m(zt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),B.appendChild(zt),B===document.body&&(zt.style.position="absolute",m(B.style,{margin:0,padding:0}));function ur(){var pr=window.innerWidth,_r=window.innerHeight;if(B!==document.body){var Nr=zt.getBoundingClientRect();pr=Nr.right-Nr.left,_r=Nr.bottom-Nr.top}zt.width=Xe*pr,zt.height=Xe*_r}var jt;B!==document.body&&typeof ResizeObserver=="function"?(jt=new ResizeObserver(function(){setTimeout(ur)}),jt.observe(B)):window.addEventListener("resize",ur,!1);function $t(){jt?jt.disconnect():window.removeEventListener("resize",ur),B.removeChild(zt)}return ur(),{canvas:zt,onDestroy:$t}}function Ve(B,ye){function Xe(zt){try{return B.getContext(zt,ye)}catch(ur){return null}}return Xe("webgl")||Xe("experimental-webgl")||Xe("webgl-experimental")}function hi(B){return typeof B.nodeName=="string"&&typeof B.appendChild=="function"&&typeof B.getBoundingClientRect=="function"}function An(B){return typeof B.drawArrays=="function"||typeof B.drawElements=="function"}function xi(B){return typeof B=="string"?B.split():(ue(Array.isArray(B),"invalid extension array"),B)}function Bn(B){return typeof B=="string"?(ue(typeof document!="undefined","not supported outside of DOM"),document.querySelector(B)):B}function yi(B){var ye=B||{},Xe,zt,ur,jt,$t={},pr=[],_r=[],Nr=typeof window=="undefined"?1:window.devicePixelRatio,Dr=!1,Fr=function(Lr){Lr&&ue.raise(Lr)},Gr=function(){};if(typeof ye=="string"?(ue(typeof document!="undefined","selector queries only supported in DOM environments"),Xe=document.querySelector(ye),ue(Xe,"invalid query string for element")):typeof ye=="object"?hi(ye)?Xe=ye:An(ye)?(jt=ye,ur=jt.canvas):(ue.constructor(ye),"gl"in ye?jt=ye.gl:"canvas"in ye?ur=Bn(ye.canvas):"container"in ye&&(zt=Bn(ye.container)),"attributes"in ye&&($t=ye.attributes,ue.type($t,"object","invalid context attributes")),"extensions"in ye&&(pr=xi(ye.extensions)),"optionalExtensions"in ye&&(_r=xi(ye.optionalExtensions)),"onDone"in ye&&(ue.type(ye.onDone,"function","invalid or missing onDone callback"),Fr=ye.onDone),"profile"in ye&&(Dr=!!ye.profile),"pixelRatio"in ye&&(Nr=+ye.pixelRatio,ue(Nr>0,"invalid pixel ratio"))):ue.raise("invalid arguments to regl"),Xe&&(Xe.nodeName.toLowerCase()==="canvas"?ur=Xe:zt=Xe),!jt){if(!ur){ue(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Pr=Tn(zt||document.body,Fr,Nr);if(!Pr)return null;ur=Pr.canvas,Gr=Pr.onDestroy}$t.premultipliedAlpha===void 0&&($t.premultipliedAlpha=!0),jt=Ve(ur,$t)}return jt?{gl:jt,canvas:ur,container:zt,extensions:pr,optionalExtensions:_r,pixelRatio:Nr,profile:Dr,onDone:Fr,onDestroy:Gr}:(Gr(),Fr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Wr(B,ye){var Xe={};function zt(pr){ue.type(pr,"string","extension name must be string");var _r=pr.toLowerCase(),Nr;try{Nr=Xe[_r]=ur(pr)}catch(Dr){}return!!Nr}function ur(pr){return B.getExtension(pr)?B.getExtension(pr):B.getExtension(pr.toLowerCase())?B.getExtension(pr.toLowerCase()):null}for(var jt=0;jt<ye.extensions.length;++jt){var $t=ye.extensions[jt];if(!zt($t))return ye.onDestroy(),ye.onDone('"'+$t+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ye.optionalExtensions.forEach(zt),{extensions:Xe,restore:function(){Object.keys(Xe).forEach(function(pr){if(Xe[pr]&&!zt(pr))throw new Error("(regl): error restoring extension "+pr)})}}}function Oi(B,ye){for(var Xe=Array(B),zt=0;zt<B;++zt)Xe[zt]=ye(zt);return Xe}var Oa=5120,Aa=5121,Ui=5122,ea=5123,Ti=5124,_n=5125,Ci=5126;function qn(B){for(var ye=16;ye<=1<<28;ye*=16)if(B<=ye)return ye;return 0}function Wi(B){var ye,Xe;return ye=(B>65535)<<4,B>>>=ye,Xe=(B>255)<<3,B>>>=Xe,ye|=Xe,Xe=(B>15)<<2,B>>>=Xe,ye|=Xe,Xe=(B>3)<<1,B>>>=Xe,ye|=Xe,ye|B>>1}function ta(){var B=Oi(8,function(){return[]});function ye(jt){var $t=qn(jt),pr=B[Wi($t)>>2];return pr.length>0?pr.pop():new ArrayBuffer($t)}function Xe(jt){B[Wi(jt.byteLength)>>2].push(jt)}function zt(jt,$t){var pr=null;switch(jt){case Oa:pr=new Int8Array(ye($t),0,$t);break;case Aa:pr=new Uint8Array(ye($t),0,$t);break;case Ui:pr=new Int16Array(ye(2*$t),0,$t);break;case ea:pr=new Uint16Array(ye(2*$t),0,$t);break;case Ti:pr=new Int32Array(ye(4*$t),0,$t);break;case _n:pr=new Uint32Array(ye(4*$t),0,$t);break;case Ci:pr=new Float32Array(ye(4*$t),0,$t);break;default:return null}return pr.length!==$t?pr.subarray(0,$t):pr}function ur(jt){Xe(jt.buffer)}return{alloc:ye,free:Xe,allocType:zt,freeType:ur}}var si=ta();si.zero=ta();var li=3408,Za=3410,di=3411,Ha=3412,Va=3413,ra=3414,xa=3415,va=33901,Vi=33902,ia=3379,kn=3386,Ka=34921,Pa=36347,Qi=36348,Ia=35661,Ma=35660,ji=34930,aa=36349,vi=34076,ei=34024,oa=7936,$i=7937,Gi=7938,Ji=35724,pa=34047,ka=36063,ma=34852,Bi=3553,Na=34067,pi=34069,zi=33984,Mi=6408,Yn=5126,bi=5121,sa=36160,Ra=36053,Qa=36064,ce=16384,be=function(B,ye){var Xe=1;ye.ext_texture_filter_anisotropic&&(Xe=B.getParameter(pa));var zt=1,ur=1;ye.webgl_draw_buffers&&(zt=B.getParameter(ma),ur=B.getParameter(ka));var jt=!!ye.oes_texture_float;if(jt){var $t=B.createTexture();B.bindTexture(Bi,$t),B.texImage2D(Bi,0,Mi,1,1,0,Mi,Yn,null);var pr=B.createFramebuffer();if(B.bindFramebuffer(sa,pr),B.framebufferTexture2D(sa,Qa,Bi,$t,0),B.bindTexture(Bi,null),B.checkFramebufferStatus(sa)!==Ra)jt=!1;else{B.viewport(0,0,1,1),B.clearColor(1,0,0,1),B.clear(ce);var _r=si.allocType(Yn,4);B.readPixels(0,0,1,1,Mi,Yn,_r),B.getError()?jt=!1:(B.deleteFramebuffer(pr),B.deleteTexture($t),jt=_r[0]===1),si.freeType(_r)}}var Nr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Dr=!0;if(!Nr){var Fr=B.createTexture(),Gr=si.allocType(bi,36);B.activeTexture(zi),B.bindTexture(Na,Fr),B.texImage2D(pi,0,Mi,3,3,0,Mi,bi,Gr),si.freeType(Gr),B.bindTexture(Na,null),B.deleteTexture(Fr),Dr=!B.getError()}return{colorBits:[B.getParameter(Za),B.getParameter(di),B.getParameter(Ha),B.getParameter(Va)],depthBits:B.getParameter(ra),stencilBits:B.getParameter(xa),subpixelBits:B.getParameter(li),extensions:Object.keys(ye).filter(function(Pr){return!!ye[Pr]}),maxAnisotropic:Xe,maxDrawbuffers:zt,maxColorAttachments:ur,pointSizeDims:B.getParameter(va),lineWidthDims:B.getParameter(Vi),maxViewportDims:B.getParameter(kn),maxCombinedTextureUnits:B.getParameter(Ia),maxCubeMapSize:B.getParameter(vi),maxRenderbufferSize:B.getParameter(ei),maxTextureUnits:B.getParameter(ji),maxTextureSize:B.getParameter(ia),maxAttributes:B.getParameter(Ka),maxVertexUniforms:B.getParameter(Pa),maxVertexTextureUnits:B.getParameter(Ma),maxVaryingVectors:B.getParameter(Qi),maxFragmentUniforms:B.getParameter(aa),glsl:B.getParameter(Ji),renderer:B.getParameter($i),vendor:B.getParameter(oa),version:B.getParameter(Gi),readFloat:jt,npotTextureCube:Dr}};function Qe(B){return!!B&&typeof B=="object"&&Array.isArray(B.shape)&&Array.isArray(B.stride)&&typeof B.offset=="number"&&B.shape.length===B.stride.length&&(Array.isArray(B.data)||o(B.data))}var U=function(B){return Object.keys(B).map(function(ye){return B[ye]})},K={shape:cr,flatten:Un};function Me(B,ye,Xe){for(var zt=0;zt<ye;++zt)Xe[zt]=B[zt]}function ct(B,ye,Xe,zt){for(var ur=0,jt=0;jt<ye;++jt)for(var $t=B[jt],pr=0;pr<Xe;++pr)zt[ur++]=$t[pr]}function lr(B,ye,Xe,zt,ur,jt){for(var $t=jt,pr=0;pr<ye;++pr)for(var _r=B[pr],Nr=0;Nr<Xe;++Nr)for(var Dr=_r[Nr],Fr=0;Fr<zt;++Fr)ur[$t++]=Dr[Fr]}function Ur(B,ye,Xe,zt,ur){for(var jt=1,$t=Xe+1;$t<ye.length;++$t)jt*=ye[$t];var pr=ye[Xe];if(ye.length-Xe==4){var _r=ye[Xe+1],Nr=ye[Xe+2],Dr=ye[Xe+3];for($t=0;$t<pr;++$t)lr(B[$t],_r,Nr,Dr,zt,ur),ur+=jt}else for($t=0;$t<pr;++$t)Ur(B[$t],ye,Xe+1,zt,ur),ur+=jt}function Un(B,ye,Xe,zt){var ur=1;if(ye.length)for(var jt=0;jt<ye.length;++jt)ur*=ye[jt];else ur=0;var $t=zt||si.allocType(Xe,ur);switch(ye.length){case 0:break;case 1:Me(B,ye[0],$t);break;case 2:ct(B,ye[0],ye[1],$t);break;case 3:lr(B,ye[0],ye[1],ye[2],$t,0);break;default:Ur(B,ye,0,$t,0)}return $t}function cr(B){for(var ye=[],Xe=B;Xe.length;Xe=Xe[0])ye.push(Xe.length);return ye}var Xi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Li=5120,Gt=5122,s=5124,d=5121,O=5123,j=5125,ae=5126,Ee=5126,Ue={int8:Li,int16:Gt,int32:s,uint8:d,uint16:O,uint32:j,float:ae,float32:Ee},st=35048,Mt=35040,Ut={dynamic:st,stream:Mt,static:35044},Jt=K.flatten,hr=K.shape,dr=35044,Ar=35040,rn=5121,$r=5126,sr=[];sr[5120]=1,sr[5122]=2,sr[5124]=4,sr[5121]=1,sr[5123]=2,sr[5125]=4,sr[5126]=4;function On(B){return Xi[Object.prototype.toString.call(B)]|0}function c(B,ye){for(var Xe=0;Xe<ye.length;++Xe)B[Xe]=ye[Xe]}function E(B,ye,Xe,zt,ur,jt,$t){for(var pr=0,_r=0;_r<Xe;++_r)for(var Nr=0;Nr<zt;++Nr)B[pr++]=ye[ur*_r+jt*Nr+$t]}function w(B,ye,Xe,zt){var ur=0,jt={};function $t(xt){this.id=ur++,this.buffer=B.createBuffer(),this.type=xt,this.usage=dr,this.byteLength=0,this.dimension=1,this.dtype=rn,this.persistentData=null,Xe.profile&&(this.stats={size:0})}$t.prototype.bind=function(){B.bindBuffer(this.type,this.buffer)},$t.prototype.destroy=function(){Gr(this)};var pr=[];function _r(xt,Wt){var Mr=pr.pop();return Mr||(Mr=new $t(xt)),Mr.bind(),Fr(Mr,Wt,Ar,0,1,!1),Mr}function Nr(xt){pr.push(xt)}function Dr(xt,Wt,Mr){xt.byteLength=Wt.byteLength,B.bufferData(xt.type,Wt,Mr)}function Fr(xt,Wt,Mr,nn,Er,an){var Br;if(xt.usage=Mr,Array.isArray(Wt)){if(xt.dtype=nn||$r,Wt.length>0){var jn;if(Array.isArray(Wt[0])){Br=hr(Wt);for(var fr=1,ar=1;ar<Br.length;++ar)fr*=Br[ar];xt.dimension=fr,jn=Jt(Wt,Br,xt.dtype),Dr(xt,jn,Mr),an?xt.persistentData=jn:si.freeType(jn)}else if(typeof Wt[0]=="number"){xt.dimension=Er;var mn=si.allocType(xt.dtype,Wt.length);c(mn,Wt),Dr(xt,mn,Mr),an?xt.persistentData=mn:si.freeType(mn)}else o(Wt[0])?(xt.dimension=Wt[0].length,xt.dtype=nn||On(Wt[0])||$r,jn=Jt(Wt,[Wt.length,Wt[0].length],xt.dtype),Dr(xt,jn,Mr),an?xt.persistentData=jn:si.freeType(jn)):ue.raise("invalid buffer data")}}else if(o(Wt))xt.dtype=nn||On(Wt),xt.dimension=Er,Dr(xt,Wt,Mr),an&&(xt.persistentData=new Uint8Array(new Uint8Array(Wt.buffer)));else if(Qe(Wt)){Br=Wt.shape;var zr=Wt.stride,Ir=Wt.offset,Zr=0,Kr=0,ai=0,Wn=0;Br.length===1?(Zr=Br[0],Kr=1,ai=zr[0],Wn=0):Br.length===2?(Zr=Br[0],Kr=Br[1],ai=zr[0],Wn=zr[1]):ue.raise("invalid shape"),xt.dtype=nn||On(Wt.data)||$r,xt.dimension=Kr;var Jr=si.allocType(xt.dtype,Zr*Kr);E(Jr,Wt.data,Zr,Kr,ai,Wn,Ir),Dr(xt,Jr,Mr),an?xt.persistentData=Jr:si.freeType(Jr)}else Wt instanceof ArrayBuffer?(xt.dtype=rn,xt.dimension=Er,Dr(xt,Wt,Mr),an&&(xt.persistentData=new Uint8Array(new Uint8Array(Wt)))):ue.raise("invalid buffer data")}function Gr(xt){ye.bufferCount--,zt(xt);var Wt=xt.buffer;ue(Wt,"buffer must not be deleted already"),B.deleteBuffer(Wt),xt.buffer=null,delete jt[xt.id]}function Pr(xt,Wt,Mr,nn){ye.bufferCount++;var Er=new $t(Wt);jt[Er.id]=Er;function an(fr){var ar=dr,mn=null,zr=0,Ir=0,Zr=1;return Array.isArray(fr)||o(fr)||Qe(fr)||fr instanceof ArrayBuffer?mn=fr:typeof fr=="number"?zr=fr|0:fr&&(ue.type(fr,"object","buffer arguments must be an object, a number or an array"),"data"in fr&&(ue(mn===null||Array.isArray(mn)||o(mn)||Qe(mn),"invalid data for buffer"),mn=fr.data),"usage"in fr&&(ue.parameter(fr.usage,Ut,"invalid buffer usage"),ar=Ut[fr.usage]),"type"in fr&&(ue.parameter(fr.type,Ue,"invalid buffer type"),Ir=Ue[fr.type]),"dimension"in fr&&(ue.type(fr.dimension,"number","invalid dimension"),Zr=fr.dimension|0),"length"in fr&&(ue.nni(zr,"buffer length must be a nonnegative integer"),zr=fr.length|0)),Er.bind(),mn?Fr(Er,mn,ar,Ir,Zr,nn):(zr&&B.bufferData(Er.type,zr,ar),Er.dtype=Ir||rn,Er.usage=ar,Er.dimension=Zr,Er.byteLength=zr),Xe.profile&&(Er.stats.size=Er.byteLength*sr[Er.dtype]),an}function Br(fr,ar){ue(ar+fr.byteLength<=Er.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+fr.byteLength+" starting from offset "+ar+" to a buffer of size "+Er.byteLength),B.bufferSubData(Er.type,ar,fr)}function jn(fr,ar){var mn=(ar||0)|0,zr;if(Er.bind(),o(fr)||fr instanceof ArrayBuffer)Br(fr,mn);else if(Array.isArray(fr)){if(fr.length>0)if(typeof fr[0]=="number"){var Ir=si.allocType(Er.dtype,fr.length);c(Ir,fr),Br(Ir,mn),si.freeType(Ir)}else if(Array.isArray(fr[0])||o(fr[0])){zr=hr(fr);var Zr=Jt(fr,zr,Er.dtype);Br(Zr,mn),si.freeType(Zr)}else ue.raise("invalid buffer data")}else if(Qe(fr)){zr=fr.shape;var Kr=fr.stride,ai=0,Wn=0,Jr=0,on=0;zr.length===1?(ai=zr[0],Wn=1,Jr=Kr[0],on=0):zr.length===2?(ai=zr[0],Wn=zr[1],Jr=Kr[0],on=Kr[1]):ue.raise("invalid shape");var Vn=Array.isArray(fr.data)?Er.dtype:On(fr.data),Jn=si.allocType(Vn,ai*Wn);E(Jn,fr.data,ai,Wn,Jr,on,fr.offset),Br(Jn,mn),si.freeType(Jn)}else ue.raise("invalid data for buffer subdata");return an}return Mr||an(xt),an._reglType="buffer",an._buffer=Er,an.subdata=jn,Xe.profile&&(an.stats=Er.stats),an.destroy=function(){Gr(Er)},an}function Lr(){U(jt).forEach(function(xt){xt.buffer=B.createBuffer(),B.bindBuffer(xt.type,xt.buffer),B.bufferData(xt.type,xt.persistentData||xt.byteLength,xt.usage)})}return Xe.profile&&(ye.getTotalBufferSize=function(){var xt=0;return Object.keys(jt).forEach(function(Wt){xt+=jt[Wt].stats.size}),xt}),{create:Pr,createStream:_r,destroyStream:Nr,clear:function(){U(jt).forEach(Gr),pr.forEach(Gr)},getBuffer:function(xt){return xt&&xt._buffer instanceof $t?xt._buffer:null},restore:Lr,_initBuffer:Fr}}var _=0,H=0,Se=1,We=1,ht=4,pt=4,Kt={points:_,point:H,lines:Se,line:We,triangles:ht,triangle:pt,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ir=0,qr=1,ln=4,Mn=5120,ui=5121,mi=5122,Ri=5123,$a=5124,Ua=5125,_o=34963,ho=35040,Bo=35044;function Co(B,ye,Xe,zt){var ur={},jt=0,$t={uint8:ui,uint16:Ri};ye.oes_element_index_uint&&($t.uint32=Ua);function pr(Lr){this.id=jt++,ur[this.id]=this,this.buffer=Lr,this.primType=ln,this.vertCount=0,this.type=0}pr.prototype.bind=function(){this.buffer.bind()};var _r=[];function Nr(Lr){var xt=_r.pop();return xt||(xt=new pr(Xe.create(null,_o,!0,!1)._buffer)),Fr(xt,Lr,ho,-1,-1,0,0),xt}function Dr(Lr){_r.push(Lr)}function Fr(Lr,xt,Wt,Mr,nn,Er,an){Lr.buffer.bind();var Br;if(xt){var jn=an;!an&&(!o(xt)||Qe(xt)&&!o(xt.data))&&(jn=ye.oes_element_index_uint?Ua:Ri),Xe._initBuffer(Lr.buffer,xt,Wt,jn,3)}else B.bufferData(_o,Er,Wt),Lr.buffer.dtype=Br||ui,Lr.buffer.usage=Wt,Lr.buffer.dimension=3,Lr.buffer.byteLength=Er;if(Br=an,!an){switch(Lr.buffer.dtype){case ui:case Mn:Br=ui;break;case Ri:case mi:Br=Ri;break;case Ua:case $a:Br=Ua;break;default:ue.raise("unsupported type for element array")}Lr.buffer.dtype=Br}Lr.type=Br,ue(Br!==Ua||!!ye.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var fr=nn;fr<0&&(fr=Lr.buffer.byteLength,Br===Ri?fr>>=1:Br===Ua&&(fr>>=2)),Lr.vertCount=fr;var ar=Mr;if(Mr<0){ar=ln;var mn=Lr.buffer.dimension;mn===1&&(ar=ir),mn===2&&(ar=qr),mn===3&&(ar=ln)}Lr.primType=ar}function Gr(Lr){zt.elementsCount--,ue(Lr.buffer!==null,"must not double destroy elements"),delete ur[Lr.id],Lr.buffer.destroy(),Lr.buffer=null}function Pr(Lr,xt){var Wt=Xe.create(null,_o,!0),Mr=new pr(Wt._buffer);zt.elementsCount++;function nn(Er){if(!Er)Wt(),Mr.primType=ln,Mr.vertCount=0,Mr.type=ui;else if(typeof Er=="number")Wt(Er),Mr.primType=ln,Mr.vertCount=Er|0,Mr.type=ui;else{var an=null,Br=Bo,jn=-1,fr=-1,ar=0,mn=0;Array.isArray(Er)||o(Er)||Qe(Er)?an=Er:(ue.type(Er,"object","invalid arguments for elements"),"data"in Er&&(an=Er.data,ue(Array.isArray(an)||o(an)||Qe(an),"invalid data for element buffer")),"usage"in Er&&(ue.parameter(Er.usage,Ut,"invalid element buffer usage"),Br=Ut[Er.usage]),"primitive"in Er&&(ue.parameter(Er.primitive,Kt,"invalid element buffer primitive"),jn=Kt[Er.primitive]),"count"in Er&&(ue(typeof Er.count=="number"&&Er.count>=0,"invalid vertex count for elements"),fr=Er.count|0),"type"in Er&&(ue.parameter(Er.type,$t,"invalid buffer type"),mn=$t[Er.type]),"length"in Er?ar=Er.length|0:(ar=fr,mn===Ri||mn===mi?ar*=2:(mn===Ua||mn===$a)&&(ar*=4))),Fr(Mr,an,Br,jn,fr,ar,mn)}return nn}return nn(Lr),nn._reglType="elements",nn._elements=Mr,nn.subdata=function(Er,an){return Wt.subdata(Er,an),nn},nn.destroy=function(){Gr(Mr)},nn}return{create:Pr,createStream:Nr,destroyStream:Dr,getElements:function(Lr){return typeof Lr=="function"&&Lr._elements instanceof pr?Lr._elements:null},clear:function(){U(ur).forEach(Gr)}}}var To=new Float32Array(1),ns=new Uint32Array(To.buffer),Rr=5123;function Go(B){for(var ye=si.allocType(Rr,B.length),Xe=0;Xe<B.length;++Xe)if(isNaN(B[Xe]))ye[Xe]=65535;else if(B[Xe]===Infinity)ye[Xe]=31744;else if(B[Xe]===-Infinity)ye[Xe]=64512;else{To[0]=B[Xe];var zt=ns[0],ur=zt>>>31<<15,jt=(zt<<1>>>24)-127,$t=zt>>13&(1<<10)-1;if(jt<-24)ye[Xe]=ur;else if(jt<-14){var pr=-14-jt;ye[Xe]=ur+($t+(1<<10)>>pr)}else jt>15?ye[Xe]=ur+31744:ye[Xe]=ur+(jt+15<<10)+$t}return ye}function ua(B){return Array.isArray(B)||o(B)}var ja=function(B){return!(B&B-1)&&!!B},ys=34467,vo=3553,is=34067,f=34069,T=6408,k=6406,ie=6407,de=6409,Be=6410,ft=32854,Tt=32855,Vt=36194,Yt=32819,or=32820,Tr=33635,Or=34042,br=6402,dn=34041,un=35904,Sr=35906,wn=36193,Ii=33776,ti=33777,$n=33778,Yr=33779,Zn=35986,In=35987,ba=34798,na=35840,ga=35841,ya=35842,_a=35843,ca=36196,ci=5121,no=5123,No=5125,F=5126,re=10242,Te=10243,he=10497,qe=33071,er=33648,vn=10240,Gn=10241,fa=9728,Ja=9729,po=9984,as=9985,Es=9986,ou=9987,Gu=33170,Ws=4352,su=4353,wc=4354,so=34046,kf=3317,Yi=37440,Uf=37441,Dc=37443,Hu=37444,mt=33984,uu=[po,Es,as,ou],Ns=[0,de,Be,ie,T],Oo={};Oo[de]=Oo[k]=Oo[br]=1,Oo[dn]=Oo[Be]=2,Oo[ie]=Oo[un]=3,Oo[T]=Oo[Sr]=4;function Ss(B){return"[object "+B+"]"}var cu=Ss("HTMLCanvasElement"),Vu=Ss("OffscreenCanvas"),os=Ss("CanvasRenderingContext2D"),fu=Ss("ImageBitmap"),lu=Ss("HTMLImageElement"),hu=Ss("HTMLVideoElement"),Fc=Object.keys(Xi).concat([cu,Vu,os,fu,lu,hu]),Ts=[];Ts[ci]=1,Ts[F]=4,Ts[wn]=2,Ts[no]=2,Ts[No]=4;var za=[];za[ft]=2,za[Tt]=2,za[Vt]=2,za[dn]=4,za[Ii]=.5,za[ti]=.5,za[$n]=1,za[Yr]=1,za[Zn]=.5,za[In]=1,za[ba]=1,za[na]=.5,za[ga]=.25,za[ya]=.5,za[_a]=.25,za[ca]=.5;function zo(B){return Array.isArray(B)&&(B.length===0||typeof B[0]=="number")}function zu(B){if(!Array.isArray(B))return!1;var ye=B.length;return!(ye===0||!ua(B[0]))}function Xo(B){return Object.prototype.toString.call(B)}function du(B){return Xo(B)===cu}function vu(B){return Xo(B)===Vu}function Bc(B){return Xo(B)===os}function kc(B){return Xo(B)===fu}function Ys(B){return Xo(B)===lu}function Uc(B){return Xo(B)===hu}function pu(B){var ye=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(ye&&B&&B.getContext)}function mu(B){var ye=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(ye&&B&&"src"in B&&"crossOrigin"in B)}function gu(B){if(!B)return!1;if(pu(B)||mu(B))return!0;var ye=Xo(B);return Fc.indexOf(ye)>=0?!0:zo(B)||zu(B)||Qe(B)}function Xu(B){return Xi[Object.prototype.toString.call(B)]|0}function Wu(B,ye){var Xe=ye.length;switch(B.type){case ci:case no:case No:case F:var zt=si.allocType(B.type,Xe);zt.set(ye),B.data=zt;break;case wn:B.data=Go(ye);break;default:ue.raise("unsupported texture type, must specify a typed array")}}function jc(B,ye){return si.allocType(B.type===wn?F:B.type,ye)}function Gc(B,ye){B.type===wn?(B.data=Go(ye),si.freeType(ye)):B.data=ye}function yu(B,ye,Xe,zt,ur,jt){for(var $t=B.width,pr=B.height,_r=B.channels,Nr=$t*pr*_r,Dr=jc(B,Nr),Fr=0,Gr=0;Gr<pr;++Gr)for(var Pr=0;Pr<$t;++Pr)for(var Lr=0;Lr<_r;++Lr)Dr[Fr++]=ye[Xe*Pr+zt*Gr+ur*Lr+jt];Gc(B,Dr)}function Eu(B,ye,Xe,zt,ur,jt){var $t;if(typeof za[B]!="undefined"?$t=za[B]:$t=Oo[B]*Ts[ye],jt&&($t*=6),ur){for(var pr=0,_r=Xe;_r>=1;)pr+=$t*_r*_r,_r/=2;return pr}else return $t*Xe*zt}function Wo(B,ye,Xe,zt,ur,jt,$t){var pr={"don't care":Ws,"dont care":Ws,nice:wc,fast:su},_r={repeat:he,clamp:qe,mirror:er},Nr={nearest:fa,linear:Ja},Dr=m({mipmap:ou,"nearest mipmap nearest":po,"linear mipmap nearest":as,"nearest mipmap linear":Es,"linear mipmap linear":ou},Nr),Fr={none:0,browser:Hu},Gr={uint8:ci,rgba4:Yt,rgb565:Tr,"rgb5 a1":or},Pr={alpha:k,luminance:de,"luminance alpha":Be,rgb:ie,rgba:T,rgba4:ft,"rgb5 a1":Tt,rgb565:Vt},Lr={};ye.ext_srgb&&(Pr.srgb=un,Pr.srgba=Sr),ye.oes_texture_float&&(Gr.float32=Gr.float=F),ye.oes_texture_half_float&&(Gr.float16=Gr["half float"]=wn),ye.webgl_depth_texture&&(m(Pr,{depth:br,"depth stencil":dn}),m(Gr,{uint16:no,uint32:No,"depth stencil":Or})),ye.webgl_compressed_texture_s3tc&&m(Lr,{"rgb s3tc dxt1":Ii,"rgba s3tc dxt1":ti,"rgba s3tc dxt3":$n,"rgba s3tc dxt5":Yr}),ye.webgl_compressed_texture_atc&&m(Lr,{"rgb atc":Zn,"rgba atc explicit alpha":In,"rgba atc interpolated alpha":ba}),ye.webgl_compressed_texture_pvrtc&&m(Lr,{"rgb pvrtc 4bppv1":na,"rgb pvrtc 2bppv1":ga,"rgba pvrtc 4bppv1":ya,"rgba pvrtc 2bppv1":_a}),ye.webgl_compressed_texture_etc1&&(Lr["rgb etc1"]=ca);var xt=Array.prototype.slice.call(B.getParameter(ys)||new Uint32Array(0));Object.keys(Lr).forEach(function(we){var Ht=Lr[we];xt.indexOf(Ht)>=0&&(Pr[we]=Ht)});var Wt=Object.keys(Pr);Xe.textureFormats=Wt;var Mr=[];Object.keys(Pr).forEach(function(we){var Ht=Pr[we];Mr[Ht]=we});var nn=[];Object.keys(Gr).forEach(function(we){var Ht=Gr[we];nn[Ht]=we});var Er=[];Object.keys(Nr).forEach(function(we){var Ht=Nr[we];Er[Ht]=we});var an=[];Object.keys(Dr).forEach(function(we){var Ht=Dr[we];an[Ht]=we});var Br=[];Object.keys(_r).forEach(function(we){var Ht=_r[we];Br[Ht]=we});var jn=Wt.reduce(function(we,Ht){var Dt=Pr[Ht];return Dt===de||Dt===k||Dt===de||Dt===Be||Dt===br||Dt===dn||ye.ext_srgb&&(Dt===un||Dt===Sr)?we[Dt]=Dt:Dt===Tt||Ht.indexOf("rgba")>=0?we[Dt]=T:we[Dt]=ie,we},{});function fr(){this.internalformat=T,this.format=T,this.type=ci,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Hu,this.width=0,this.height=0,this.channels=0}function ar(we,Ht){we.internalformat=Ht.internalformat,we.format=Ht.format,we.type=Ht.type,we.compressed=Ht.compressed,we.premultiplyAlpha=Ht.premultiplyAlpha,we.flipY=Ht.flipY,we.unpackAlignment=Ht.unpackAlignment,we.colorSpace=Ht.colorSpace,we.width=Ht.width,we.height=Ht.height,we.channels=Ht.channels}function mn(we,Ht){if(!(typeof Ht!="object"||!Ht)){if("premultiplyAlpha"in Ht&&(ue.type(Ht.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),we.premultiplyAlpha=Ht.premultiplyAlpha),"flipY"in Ht&&(ue.type(Ht.flipY,"boolean","invalid texture flip"),we.flipY=Ht.flipY),"alignment"in Ht&&(ue.oneOf(Ht.alignment,[1,2,4,8],"invalid texture unpack alignment"),we.unpackAlignment=Ht.alignment),"colorSpace"in Ht&&(ue.parameter(Ht.colorSpace,Fr,"invalid colorSpace"),we.colorSpace=Fr[Ht.colorSpace]),"type"in Ht){var Dt=Ht.type;ue(ye.oes_texture_float||!(Dt==="float"||Dt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ue(ye.oes_texture_half_float||!(Dt==="half float"||Dt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ue(ye.webgl_depth_texture||!(Dt==="uint16"||Dt==="uint32"||Dt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ue.parameter(Dt,Gr,"invalid texture type"),we.type=Gr[Dt]}var cn=we.width,Si=we.height,Re=we.channels,le=!1;"shape"in Ht?(ue(Array.isArray(Ht.shape)&&Ht.shape.length>=2,"shape must be an array"),cn=Ht.shape[0],Si=Ht.shape[1],Ht.shape.length===3&&(Re=Ht.shape[2],ue(Re>0&&Re<=4,"invalid number of channels"),le=!0),ue(cn>=0&&cn<=Xe.maxTextureSize,"invalid width"),ue(Si>=0&&Si<=Xe.maxTextureSize,"invalid height")):("radius"in Ht&&(cn=Si=Ht.radius,ue(cn>=0&&cn<=Xe.maxTextureSize,"invalid radius")),"width"in Ht&&(cn=Ht.width,ue(cn>=0&&cn<=Xe.maxTextureSize,"invalid width")),"height"in Ht&&(Si=Ht.height,ue(Si>=0&&Si<=Xe.maxTextureSize,"invalid height")),"channels"in Ht&&(Re=Ht.channels,ue(Re>0&&Re<=4,"invalid number of channels"),le=!0)),we.width=cn|0,we.height=Si|0,we.channels=Re|0;var $e=!1;if("format"in Ht){var bt=Ht.format;ue(ye.webgl_depth_texture||!(bt==="depth"||bt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ue.parameter(bt,Pr,"invalid texture format");var Xt=we.internalformat=Pr[bt];we.format=jn[Xt],bt in Gr&&("type"in Ht||(we.type=Gr[bt])),bt in Lr&&(we.compressed=!0),$e=!0}!le&&$e?we.channels=Oo[we.format]:le&&!$e?we.channels!==Ns[we.format]&&(we.format=we.internalformat=Ns[we.channels]):$e&&le&&ue(we.channels===Oo[we.format],"number of channels inconsistent with specified format")}}function zr(we){B.pixelStorei(Yi,we.flipY),B.pixelStorei(Uf,we.premultiplyAlpha),B.pixelStorei(Dc,we.colorSpace),B.pixelStorei(kf,we.unpackAlignment)}function Ir(){fr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Zr(we,Ht){var Dt=null;if(gu(Ht)?Dt=Ht:Ht&&(ue.type(Ht,"object","invalid pixel data type"),mn(we,Ht),"x"in Ht&&(we.xOffset=Ht.x|0),"y"in Ht&&(we.yOffset=Ht.y|0),gu(Ht.data)&&(Dt=Ht.data)),ue(!we.compressed||Dt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Ht.copy){ue(!Dt,"can not specify copy and data field for the same texture");var cn=ur.viewportWidth,Si=ur.viewportHeight;we.width=we.width||cn-we.xOffset,we.height=we.height||Si-we.yOffset,we.needsCopy=!0,ue(we.xOffset>=0&&we.xOffset<cn&&we.yOffset>=0&&we.yOffset<Si&&we.width>0&&we.width<=cn&&we.height>0&&we.height<=Si,"copy texture read out of bounds")}else if(!Dt)we.width=we.width||1,we.height=we.height||1,we.channels=we.channels||4;else if(o(Dt))we.channels=we.channels||4,we.data=Dt,!("type"in Ht)&&we.type===ci&&(we.type=Xu(Dt));else if(zo(Dt))we.channels=we.channels||4,Wu(we,Dt),we.alignment=1,we.needsFree=!0;else if(Qe(Dt)){var Re=Dt.data;!Array.isArray(Re)&&we.type===ci&&(we.type=Xu(Re));var le=Dt.shape,$e=Dt.stride,bt,Xt,at,nt,lt,xe;le.length===3?(at=le[2],xe=$e[2]):(ue(le.length===2,"invalid ndarray pixel data, must be 2 or 3D"),at=1,xe=1),bt=le[0],Xt=le[1],nt=$e[0],lt=$e[1],we.alignment=1,we.width=bt,we.height=Xt,we.channels=at,we.format=we.internalformat=Ns[at],we.needsFree=!0,yu(we,Re,nt,lt,xe,Dt.offset)}else if(pu(Dt)||du(Dt)||vu(Dt)||Bc(Dt))pu(Dt)||du(Dt)||vu(Dt)?we.element=Dt:we.element=Dt.canvas,we.width=we.element.width,we.height=we.element.height,we.channels=4;else if(kc(Dt))we.element=Dt,we.width=Dt.width,we.height=Dt.height,we.channels=4;else if(Ys(Dt))we.element=Dt,we.width=Dt.naturalWidth,we.height=Dt.naturalHeight,we.channels=4;else if(mu(Dt))we.element=Dt,we.width=Dt.width,we.height=Dt.height,we.channels=4;else if(Uc(Dt))we.element=Dt,we.width=Dt.videoWidth,we.height=Dt.videoHeight,we.channels=4;else if(zu(Dt)){var Je=we.width||Dt[0].length,Ie=we.height||Dt.length,Ct=we.channels;ua(Dt[0][0])?Ct=Ct||Dt[0][0].length:Ct=Ct||1;for(var Ft=K.shape(Dt),mr=1,Hr=0;Hr<Ft.length;++Hr)mr*=Ft[Hr];var jr=jc(we,mr);K.flatten(Dt,Ft,"",jr),Gc(we,jr),we.alignment=1,we.width=Je,we.height=Ie,we.channels=Ct,we.format=we.internalformat=Ns[Ct],we.needsFree=!0}we.type===F?ue(Xe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):we.type===wn&&ue(Xe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Kr(we,Ht,Dt){var cn=we.element,Si=we.data,Re=we.internalformat,le=we.format,$e=we.type,bt=we.width,Xt=we.height;zr(we),cn?B.texImage2D(Ht,Dt,le,le,$e,cn):we.compressed?B.compressedTexImage2D(Ht,Dt,Re,bt,Xt,0,Si):we.needsCopy?(zt(),B.copyTexImage2D(Ht,Dt,le,we.xOffset,we.yOffset,bt,Xt,0)):B.texImage2D(Ht,Dt,le,bt,Xt,0,le,$e,Si||null)}function ai(we,Ht,Dt,cn,Si){var Re=we.element,le=we.data,$e=we.internalformat,bt=we.format,Xt=we.type,at=we.width,nt=we.height;zr(we),Re?B.texSubImage2D(Ht,Si,Dt,cn,bt,Xt,Re):we.compressed?B.compressedTexSubImage2D(Ht,Si,Dt,cn,$e,at,nt,le):we.needsCopy?(zt(),B.copyTexSubImage2D(Ht,Si,Dt,cn,we.xOffset,we.yOffset,at,nt)):B.texSubImage2D(Ht,Si,Dt,cn,at,nt,bt,Xt,le)}var Wn=[];function Jr(){return Wn.pop()||new Ir}function on(we){we.needsFree&&si.freeType(we.data),Ir.call(we),Wn.push(we)}function Vn(){fr.call(this),this.genMipmaps=!1,this.mipmapHint=Ws,this.mipmask=0,this.images=Array(16)}function Jn(we,Ht,Dt){var cn=we.images[0]=Jr();we.mipmask=1,cn.width=we.width=Ht,cn.height=we.height=Dt,cn.channels=we.channels=4}function Ai(we,Ht){var Dt=null;if(gu(Ht))Dt=we.images[0]=Jr(),ar(Dt,we),Zr(Dt,Ht),we.mipmask=1;else if(mn(we,Ht),Array.isArray(Ht.mipmap))for(var cn=Ht.mipmap,Si=0;Si<cn.length;++Si)Dt=we.images[Si]=Jr(),ar(Dt,we),Dt.width>>=Si,Dt.height>>=Si,Zr(Dt,cn[Si]),we.mipmask|=1<<Si;else Dt=we.images[0]=Jr(),ar(Dt,we),Zr(Dt,Ht),we.mipmask=1;ar(we,we.images[0]),we.compressed&&(we.internalformat===Ii||we.internalformat===ti||we.internalformat===$n||we.internalformat===Yr)&&ue(we.width%4==0&&we.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Fa(we,Ht){for(var Dt=we.images,cn=0;cn<Dt.length;++cn){if(!Dt[cn])return;Kr(Dt[cn],Ht,cn)}}var Ba=[];function gi(){var we=Ba.pop()||new Vn;fr.call(we),we.mipmask=0;for(var Ht=0;Ht<16;++Ht)we.images[Ht]=null;return we}function mo(we){for(var Ht=we.images,Dt=0;Dt<Ht.length;++Dt)Ht[Dt]&&on(Ht[Dt]),Ht[Dt]=null;Ba.push(we)}function Ea(){this.minFilter=fa,this.magFilter=fa,this.wrapS=qe,this.wrapT=qe,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ws}function ao(we,Ht){if("min"in Ht){var Dt=Ht.min;ue.parameter(Dt,Dr),we.minFilter=Dr[Dt],uu.indexOf(we.minFilter)>=0&&!("faces"in Ht)&&(we.genMipmaps=!0)}if("mag"in Ht){var cn=Ht.mag;ue.parameter(cn,Nr),we.magFilter=Nr[cn]}var Si=we.wrapS,Re=we.wrapT;if("wrap"in Ht){var le=Ht.wrap;typeof le=="string"?(ue.parameter(le,_r),Si=Re=_r[le]):Array.isArray(le)&&(ue.parameter(le[0],_r),ue.parameter(le[1],_r),Si=_r[le[0]],Re=_r[le[1]])}else{if("wrapS"in Ht){var $e=Ht.wrapS;ue.parameter($e,_r),Si=_r[$e]}if("wrapT"in Ht){var bt=Ht.wrapT;ue.parameter(bt,_r),Re=_r[bt]}}if(we.wrapS=Si,we.wrapT=Re,"anisotropic"in Ht){var Xt=Ht.anisotropic;ue(typeof Xt=="number"&&Xt>=1&&Xt<=Xe.maxAnisotropic,"aniso samples must be between 1 and "),we.anisotropic=Ht.anisotropic}if("mipmap"in Ht){var at=!1;switch(typeof Ht.mipmap){case"string":ue.parameter(Ht.mipmap,pr,"invalid mipmap hint"),we.mipmapHint=pr[Ht.mipmap],we.genMipmaps=!0,at=!0;break;case"boolean":at=we.genMipmaps=Ht.mipmap;break;case"object":ue(Array.isArray(Ht.mipmap),"invalid mipmap type"),we.genMipmaps=!1,at=!0;break;default:ue.raise("invalid mipmap type")}at&&!("min"in Ht)&&(we.minFilter=po)}}function Wa(we,Ht){B.texParameteri(Ht,Gn,we.minFilter),B.texParameteri(Ht,vn,we.magFilter),B.texParameteri(Ht,re,we.wrapS),B.texParameteri(Ht,Te,we.wrapT),ye.ext_texture_filter_anisotropic&&B.texParameteri(Ht,so,we.anisotropic),we.genMipmaps&&(B.hint(Gu,we.mipmapHint),B.generateMipmap(Ht))}var fo=0,lo={},go=Xe.maxTextureUnits,Ya=Array(go).map(function(){return null});function ri(we){fr.call(this),this.mipmask=0,this.internalformat=T,this.id=fo++,this.refCount=1,this.target=we,this.texture=B.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ea,$t.profile&&(this.stats={size:0})}function yo(we){B.activeTexture(mt),B.bindTexture(we.target,we.texture)}function Zi(){var we=Ya[0];we?B.bindTexture(we.target,we.texture):B.bindTexture(vo,null)}function Sa(we){var Ht=we.texture;ue(Ht,"must not double destroy texture");var Dt=we.unit,cn=we.target;Dt>=0&&(B.activeTexture(mt+Dt),B.bindTexture(cn,null),Ya[Dt]=null),B.deleteTexture(Ht),we.texture=null,we.params=null,we.pixels=null,we.refCount=0,delete lo[we.id],jt.textureCount--}m(ri.prototype,{bind:function(){var we=this;we.bindCount+=1;var Ht=we.unit;if(Ht<0){for(var Dt=0;Dt<go;++Dt){var cn=Ya[Dt];if(cn){if(cn.bindCount>0)continue;cn.unit=-1}Ya[Dt]=we,Ht=Dt;break}Ht>=go&&ue.raise("insufficient number of texture units"),$t.profile&&jt.maxTextureUnits<Ht+1&&(jt.maxTextureUnits=Ht+1),we.unit=Ht,B.activeTexture(mt+Ht),B.bindTexture(we.target,we.texture)}return Ht},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Sa(this)}});function xn(we,Ht){var Dt=new ri(vo);lo[Dt.id]=Dt,jt.textureCount++;function cn(le,$e){var bt=Dt.texInfo;Ea.call(bt);var Xt=gi();return typeof le=="number"?typeof $e=="number"?Jn(Xt,le|0,$e|0):Jn(Xt,le|0,le|0):le?(ue.type(le,"object","invalid arguments to regl.texture"),ao(bt,le),Ai(Xt,le)):Jn(Xt,1,1),bt.genMipmaps&&(Xt.mipmask=(Xt.width<<1)-1),Dt.mipmask=Xt.mipmask,ar(Dt,Xt),ue.texture2D(bt,Xt,Xe),Dt.internalformat=Xt.internalformat,cn.width=Xt.width,cn.height=Xt.height,yo(Dt),Fa(Xt,vo),Wa(bt,vo),Zi(),mo(Xt),$t.profile&&(Dt.stats.size=Eu(Dt.internalformat,Dt.type,Xt.width,Xt.height,bt.genMipmaps,!1)),cn.format=Mr[Dt.internalformat],cn.type=nn[Dt.type],cn.mag=Er[bt.magFilter],cn.min=an[bt.minFilter],cn.wrapS=Br[bt.wrapS],cn.wrapT=Br[bt.wrapT],cn}function Si(le,$e,bt,Xt){ue(!!le,"must specify image data");var at=$e|0,nt=bt|0,lt=Xt|0,xe=Jr();return ar(xe,Dt),xe.width=0,xe.height=0,Zr(xe,le),xe.width=xe.width||(Dt.width>>lt)-at,xe.height=xe.height||(Dt.height>>lt)-nt,ue(Dt.type===xe.type&&Dt.format===xe.format&&Dt.internalformat===xe.internalformat,"incompatible format for texture.subimage"),ue(at>=0&&nt>=0&&at+xe.width<=Dt.width&&nt+xe.height<=Dt.height,"texture.subimage write out of bounds"),ue(Dt.mipmask&1<<lt,"missing mipmap data"),ue(xe.data||xe.element||xe.needsCopy,"missing image data"),yo(Dt),ai(xe,vo,at,nt,lt),Zi(),on(xe),cn}function Re(le,$e){var bt=le|0,Xt=$e|0||bt;if(bt===Dt.width&&Xt===Dt.height)return cn;cn.width=Dt.width=bt,cn.height=Dt.height=Xt,yo(Dt);for(var at=0;Dt.mipmask>>at;++at){var nt=bt>>at,lt=Xt>>at;if(!nt||!lt)break;B.texImage2D(vo,at,Dt.format,nt,lt,0,Dt.format,Dt.type,null)}return Zi(),$t.profile&&(Dt.stats.size=Eu(Dt.internalformat,Dt.type,bt,Xt,!1,!1)),cn}return cn(we,Ht),cn.subimage=Si,cn.resize=Re,cn._reglType="texture2d",cn._texture=Dt,$t.profile&&(cn.stats=Dt.stats),cn.destroy=function(){Dt.decRef()},cn}function ni(we,Ht,Dt,cn,Si,Re){var le=new ri(is);lo[le.id]=le,jt.cubeCount++;var $e=new Array(6);function bt(nt,lt,xe,Je,Ie,Ct){var Ft,mr=le.texInfo;for(Ea.call(mr),Ft=0;Ft<6;++Ft)$e[Ft]=gi();if(typeof nt=="number"||!nt){var Hr=nt|0||1;for(Ft=0;Ft<6;++Ft)Jn($e[Ft],Hr,Hr)}else if(typeof nt=="object")if(lt)Ai($e[0],nt),Ai($e[1],lt),Ai($e[2],xe),Ai($e[3],Je),Ai($e[4],Ie),Ai($e[5],Ct);else if(ao(mr,nt),mn(le,nt),"faces"in nt){var jr=nt.faces;for(ue(Array.isArray(jr)&&jr.length===6,"cube faces must be a length 6 array"),Ft=0;Ft<6;++Ft)ue(typeof jr[Ft]=="object"&&!!jr[Ft],"invalid input for cube map face"),ar($e[Ft],le),Ai($e[Ft],jr[Ft])}else for(Ft=0;Ft<6;++Ft)Ai($e[Ft],nt);else ue.raise("invalid arguments to cube map");for(ar(le,$e[0]),ue.optional(function(){Xe.npotTextureCube||ue(ja(le.width)&&ja(le.height),"your browser does not support non power or two texture dimensions")}),mr.genMipmaps?le.mipmask=($e[0].width<<1)-1:le.mipmask=$e[0].mipmask,ue.textureCube(le,mr,$e,Xe),le.internalformat=$e[0].internalformat,bt.width=$e[0].width,bt.height=$e[0].height,yo(le),Ft=0;Ft<6;++Ft)Fa($e[Ft],f+Ft);for(Wa(mr,is),Zi(),$t.profile&&(le.stats.size=Eu(le.internalformat,le.type,bt.width,bt.height,mr.genMipmaps,!0)),bt.format=Mr[le.internalformat],bt.type=nn[le.type],bt.mag=Er[mr.magFilter],bt.min=an[mr.minFilter],bt.wrapS=Br[mr.wrapS],bt.wrapT=Br[mr.wrapT],Ft=0;Ft<6;++Ft)mo($e[Ft]);return bt}function Xt(nt,lt,xe,Je,Ie){ue(!!lt,"must specify image data"),ue(typeof nt=="number"&&nt===(nt|0)&&nt>=0&&nt<6,"invalid face");var Ct=xe|0,Ft=Je|0,mr=Ie|0,Hr=Jr();return ar(Hr,le),Hr.width=0,Hr.height=0,Zr(Hr,lt),Hr.width=Hr.width||(le.width>>mr)-Ct,Hr.height=Hr.height||(le.height>>mr)-Ft,ue(le.type===Hr.type&&le.format===Hr.format&&le.internalformat===Hr.internalformat,"incompatible format for texture.subimage"),ue(Ct>=0&&Ft>=0&&Ct+Hr.width<=le.width&&Ft+Hr.height<=le.height,"texture.subimage write out of bounds"),ue(le.mipmask&1<<mr,"missing mipmap data"),ue(Hr.data||Hr.element||Hr.needsCopy,"missing image data"),yo(le),ai(Hr,f+nt,Ct,Ft,mr),Zi(),on(Hr),bt}function at(nt){var lt=nt|0;if(lt!==le.width){bt.width=le.width=lt,bt.height=le.height=lt,yo(le);for(var xe=0;xe<6;++xe)for(var Je=0;le.mipmask>>Je;++Je)B.texImage2D(f+xe,Je,le.format,lt>>Je,lt>>Je,0,le.format,le.type,null);return Zi(),$t.profile&&(le.stats.size=Eu(le.internalformat,le.type,bt.width,bt.height,!1,!0)),bt}}return bt(we,Ht,Dt,cn,Si,Re),bt.subimage=Xt,bt.resize=at,bt._reglType="textureCube",bt._texture=le,$t.profile&&(bt.stats=le.stats),bt.destroy=function(){le.decRef()},bt}function Ei(){for(var we=0;we<go;++we)B.activeTexture(mt+we),B.bindTexture(vo,null),Ya[we]=null;U(lo).forEach(Sa),jt.cubeCount=0,jt.textureCount=0}$t.profile&&(jt.getTotalTextureSize=function(){var we=0;return Object.keys(lo).forEach(function(Ht){we+=lo[Ht].stats.size}),we});function ro(){for(var we=0;we<go;++we){var Ht=Ya[we];Ht&&(Ht.bindCount=0,Ht.unit=-1,Ya[we]=null)}U(lo).forEach(function(Dt){Dt.texture=B.createTexture(),B.bindTexture(Dt.target,Dt.texture);for(var cn=0;cn<32;++cn)if((Dt.mipmask&1<<cn)!=0)if(Dt.target===vo)B.texImage2D(vo,cn,Dt.internalformat,Dt.width>>cn,Dt.height>>cn,0,Dt.internalformat,Dt.type,null);else for(var Si=0;Si<6;++Si)B.texImage2D(f+Si,cn,Dt.internalformat,Dt.width>>cn,Dt.height>>cn,0,Dt.internalformat,Dt.type,null);Wa(Dt.texInfo,Dt.target)})}function Po(){for(var we=0;we<go;++we){var Ht=Ya[we];Ht&&(Ht.bindCount=0,Ht.unit=-1,Ya[we]=null),B.activeTexture(mt+we),B.bindTexture(vo,null),B.bindTexture(is,null)}}return{create2D:xn,createCube:ni,clear:Ei,getTexture:function(we){return null},restore:ro,refresh:Po}}var Yo=36161,Zs=32854,As=32855,Su=36194,Yu=33189,Zu=36168,Tu=34041,Ku=35907,Qu=34836,Ks=34842,Hc=34843,ko=[];ko[Zs]=2,ko[As]=2,ko[Su]=2,ko[Yu]=2,ko[Zu]=1,ko[Tu]=4,ko[Ku]=4,ko[Qu]=16,ko[Ks]=8,ko[Hc]=6;function Vc(B,ye,Xe){return ko[B]*ye*Xe}var zc=function(B,ye,Xe,zt,ur){var jt={rgba4:Zs,rgb565:Su,"rgb5 a1":As,depth:Yu,stencil:Zu,"depth stencil":Tu};ye.ext_srgb&&(jt.srgba=Ku),ye.ext_color_buffer_half_float&&(jt.rgba16f=Ks,jt.rgb16f=Hc),ye.webgl_color_buffer_float&&(jt.rgba32f=Qu);var $t=[];Object.keys(jt).forEach(function(Pr){var Lr=jt[Pr];$t[Lr]=Pr});var pr=0,_r={};function Nr(Pr){this.id=pr++,this.refCount=1,this.renderbuffer=Pr,this.format=Zs,this.width=0,this.height=0,ur.profile&&(this.stats={size:0})}Nr.prototype.decRef=function(){--this.refCount<=0&&Dr(this)};function Dr(Pr){var Lr=Pr.renderbuffer;ue(Lr,"must not double destroy renderbuffer"),B.bindRenderbuffer(Yo,null),B.deleteRenderbuffer(Lr),Pr.renderbuffer=null,Pr.refCount=0,delete _r[Pr.id],zt.renderbufferCount--}function Fr(Pr,Lr){var xt=new Nr(B.createRenderbuffer());_r[xt.id]=xt,zt.renderbufferCount++;function Wt(nn,Er){var an=0,Br=0,jn=Zs;if(typeof nn=="object"&&nn){var fr=nn;if("shape"in fr){var ar=fr.shape;ue(Array.isArray(ar)&&ar.length>=2,"invalid renderbuffer shape"),an=ar[0]|0,Br=ar[1]|0}else"radius"in fr&&(an=Br=fr.radius|0),"width"in fr&&(an=fr.width|0),"height"in fr&&(Br=fr.height|0);"format"in fr&&(ue.parameter(fr.format,jt,"invalid renderbuffer format"),jn=jt[fr.format])}else typeof nn=="number"?(an=nn|0,typeof Er=="number"?Br=Er|0:Br=an):nn?ue.raise("invalid arguments to renderbuffer constructor"):an=Br=1;if(ue(an>0&&Br>0&&an<=Xe.maxRenderbufferSize&&Br<=Xe.maxRenderbufferSize,"invalid renderbuffer size"),!(an===xt.width&&Br===xt.height&&jn===xt.format))return Wt.width=xt.width=an,Wt.height=xt.height=Br,xt.format=jn,B.bindRenderbuffer(Yo,xt.renderbuffer),B.renderbufferStorage(Yo,jn,an,Br),ue(B.getError()===0,"invalid render buffer format"),ur.profile&&(xt.stats.size=Vc(xt.format,xt.width,xt.height)),Wt.format=$t[xt.format],Wt}function Mr(nn,Er){var an=nn|0,Br=Er|0||an;return an===xt.width&&Br===xt.height||(ue(an>0&&Br>0&&an<=Xe.maxRenderbufferSize&&Br<=Xe.maxRenderbufferSize,"invalid renderbuffer size"),Wt.width=xt.width=an,Wt.height=xt.height=Br,B.bindRenderbuffer(Yo,xt.renderbuffer),B.renderbufferStorage(Yo,xt.format,an,Br),ue(B.getError()===0,"invalid render buffer format"),ur.profile&&(xt.stats.size=Vc(xt.format,xt.width,xt.height))),Wt}return Wt(Pr,Lr),Wt.resize=Mr,Wt._reglType="renderbuffer",Wt._renderbuffer=xt,ur.profile&&(Wt.stats=xt.stats),Wt.destroy=function(){xt.decRef()},Wt}ur.profile&&(zt.getTotalRenderbufferSize=function(){var Pr=0;return Object.keys(_r).forEach(function(Lr){Pr+=_r[Lr].stats.size}),Pr});function Gr(){U(_r).forEach(function(Pr){Pr.renderbuffer=B.createRenderbuffer(),B.bindRenderbuffer(Yo,Pr.renderbuffer),B.renderbufferStorage(Yo,Pr.format,Pr.width,Pr.height)}),B.bindRenderbuffer(Yo,null)}return{create:Fr,clear:function(){U(_r).forEach(Dr)},restore:Gr}},Zo=36160,Au=36161,Ko=3553,Ls=34069,xu=36064,bu=36096,$u=36128,Ju=33306,qu=36053,Xc=36054,Wc=36055,ec=36057,tc=36061,rc=36193,nc=5121,Yc=5126,ic=6407,ac=6408,uo=6402,Zc=[ic,ac],Qs=[];Qs[ac]=4,Qs[ic]=3;var ws=[];ws[nc]=1,ws[Yc]=4,ws[rc]=2;var Kc=32854,Qc=32855,$c=36194,Jc=33189,qc=36168,_u=34041,oc=35907,ef=34836,tf=34842,rf=34843,nf=[Kc,Qc,$c,oc,tf,rf,ef],xs={};xs[qu]="complete",xs[Xc]="incomplete attachment",xs[ec]="incomplete dimensions",xs[Wc]="incomplete, missing attachment",xs[tc]="unsupported";function af(B,ye,Xe,zt,ur,jt){var $t={cur:null,next:null,dirty:!1,setFBO:null},pr=["rgba"],_r=["rgba4","rgb565","rgb5 a1"];ye.ext_srgb&&_r.push("srgba"),ye.ext_color_buffer_half_float&&_r.push("rgba16f","rgb16f"),ye.webgl_color_buffer_float&&_r.push("rgba32f");var Nr=["uint8"];ye.oes_texture_half_float&&Nr.push("half float","float16"),ye.oes_texture_float&&Nr.push("float","float32");function Dr(Ir,Zr,Kr){this.target=Ir,this.texture=Zr,this.renderbuffer=Kr;var ai=0,Wn=0;Zr?(ai=Zr.width,Wn=Zr.height):Kr&&(ai=Kr.width,Wn=Kr.height),this.width=ai,this.height=Wn}function Fr(Ir){Ir&&(Ir.texture&&Ir.texture._texture.decRef(),Ir.renderbuffer&&Ir.renderbuffer._renderbuffer.decRef())}function Gr(Ir,Zr,Kr){if(!!Ir)if(Ir.texture){var ai=Ir.texture._texture,Wn=Math.max(1,ai.width),Jr=Math.max(1,ai.height);ue(Wn===Zr&&Jr===Kr,"inconsistent width/height for supplied texture"),ai.refCount+=1}else{var on=Ir.renderbuffer._renderbuffer;ue(on.width===Zr&&on.height===Kr,"inconsistent width/height for renderbuffer"),on.refCount+=1}}function Pr(Ir,Zr){Zr&&(Zr.texture?B.framebufferTexture2D(Zo,Ir,Zr.target,Zr.texture._texture.texture,0):B.framebufferRenderbuffer(Zo,Ir,Au,Zr.renderbuffer._renderbuffer.renderbuffer))}function Lr(Ir){var Zr=Ko,Kr=null,ai=null,Wn=Ir;typeof Ir=="object"&&(Wn=Ir.data,"target"in Ir&&(Zr=Ir.target|0)),ue.type(Wn,"function","invalid attachment data");var Jr=Wn._reglType;return Jr==="texture2d"?(Kr=Wn,ue(Zr===Ko)):Jr==="textureCube"?(Kr=Wn,ue(Zr>=Ls&&Zr<Ls+6,"invalid cube map target")):Jr==="renderbuffer"?(ai=Wn,Zr=Au):ue.raise("invalid regl object for attachment"),new Dr(Zr,Kr,ai)}function xt(Ir,Zr,Kr,ai,Wn){if(Kr){var Jr=zt.create2D({width:Ir,height:Zr,format:ai,type:Wn});return Jr._texture.refCount=0,new Dr(Ko,Jr,null)}else{var on=ur.create({width:Ir,height:Zr,format:ai});return on._renderbuffer.refCount=0,new Dr(Au,null,on)}}function Wt(Ir){return Ir&&(Ir.texture||Ir.renderbuffer)}function Mr(Ir,Zr,Kr){Ir&&(Ir.texture?Ir.texture.resize(Zr,Kr):Ir.renderbuffer&&Ir.renderbuffer.resize(Zr,Kr),Ir.width=Zr,Ir.height=Kr)}var nn=0,Er={};function an(){this.id=nn++,Er[this.id]=this,this.framebuffer=B.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Br(Ir){Ir.colorAttachments.forEach(Fr),Fr(Ir.depthAttachment),Fr(Ir.stencilAttachment),Fr(Ir.depthStencilAttachment)}function jn(Ir){var Zr=Ir.framebuffer;ue(Zr,"must not double destroy framebuffer"),B.deleteFramebuffer(Zr),Ir.framebuffer=null,jt.framebufferCount--,delete Er[Ir.id]}function fr(Ir){var Zr;B.bindFramebuffer(Zo,Ir.framebuffer);var Kr=Ir.colorAttachments;for(Zr=0;Zr<Kr.length;++Zr)Pr(xu+Zr,Kr[Zr]);for(Zr=Kr.length;Zr<Xe.maxColorAttachments;++Zr)B.framebufferTexture2D(Zo,xu+Zr,Ko,null,0);B.framebufferTexture2D(Zo,Ju,Ko,null,0),B.framebufferTexture2D(Zo,bu,Ko,null,0),B.framebufferTexture2D(Zo,$u,Ko,null,0),Pr(bu,Ir.depthAttachment),Pr($u,Ir.stencilAttachment),Pr(Ju,Ir.depthStencilAttachment);var ai=B.checkFramebufferStatus(Zo);!B.isContextLost()&&ai!==qu&&ue.raise("framebuffer configuration not supported, status = "+xs[ai]),B.bindFramebuffer(Zo,$t.next?$t.next.framebuffer:null),$t.cur=$t.next,B.getError()}function ar(Ir,Zr){var Kr=new an;jt.framebufferCount++;function ai(Jr,on){var Vn;ue($t.next!==Kr,"can not update framebuffer which is currently in use");var Jn=0,Ai=0,Fa=!0,Ba=!0,gi=null,mo=!0,Ea="rgba",ao="uint8",Wa=1,fo=null,lo=null,go=null,Ya=!1;if(typeof Jr=="number")Jn=Jr|0,Ai=on|0||Jn;else if(!Jr)Jn=Ai=1;else{ue.type(Jr,"object","invalid arguments for framebuffer");var ri=Jr;if("shape"in ri){var yo=ri.shape;ue(Array.isArray(yo)&&yo.length>=2,"invalid shape for framebuffer"),Jn=yo[0],Ai=yo[1]}else"radius"in ri&&(Jn=Ai=ri.radius),"width"in ri&&(Jn=ri.width),"height"in ri&&(Ai=ri.height);("color"in ri||"colors"in ri)&&(gi=ri.color||ri.colors,Array.isArray(gi)&&ue(gi.length===1||ye.webgl_draw_buffers,"multiple render targets not supported")),gi||("colorCount"in ri&&(Wa=ri.colorCount|0,ue(Wa>0,"invalid color buffer count")),"colorTexture"in ri&&(mo=!!ri.colorTexture,Ea="rgba4"),"colorType"in ri&&(ao=ri.colorType,mo?(ue(ye.oes_texture_float||!(ao==="float"||ao==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ue(ye.oes_texture_half_float||!(ao==="half float"||ao==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ao==="half float"||ao==="float16"?(ue(ye.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ea="rgba16f"):(ao==="float"||ao==="float32")&&(ue(ye.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ea="rgba32f"),ue.oneOf(ao,Nr,"invalid color type")),"colorFormat"in ri&&(Ea=ri.colorFormat,pr.indexOf(Ea)>=0?mo=!0:_r.indexOf(Ea)>=0?mo=!1:ue.optional(function(){mo?ue.oneOf(ri.colorFormat,pr,"invalid color format for texture"):ue.oneOf(ri.colorFormat,_r,"invalid color format for renderbuffer")}))),("depthTexture"in ri||"depthStencilTexture"in ri)&&(Ya=!!(ri.depthTexture||ri.depthStencilTexture),ue(!Ya||ye.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ri&&(typeof ri.depth=="boolean"?Fa=ri.depth:(fo=ri.depth,Ba=!1)),"stencil"in ri&&(typeof ri.stencil=="boolean"?Ba=ri.stencil:(lo=ri.stencil,Fa=!1)),"depthStencil"in ri&&(typeof ri.depthStencil=="boolean"?Fa=Ba=ri.depthStencil:(go=ri.depthStencil,Fa=!1,Ba=!1))}var Zi=null,Sa=null,xn=null,ni=null;if(Array.isArray(gi))Zi=gi.map(Lr);else if(gi)Zi=[Lr(gi)];else for(Zi=new Array(Wa),Vn=0;Vn<Wa;++Vn)Zi[Vn]=xt(Jn,Ai,mo,Ea,ao);ue(ye.webgl_draw_buffers||Zi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ue(Zi.length<=Xe.maxColorAttachments,"too many color attachments, not supported"),Jn=Jn||Zi[0].width,Ai=Ai||Zi[0].height,fo?Sa=Lr(fo):Fa&&!Ba&&(Sa=xt(Jn,Ai,Ya,"depth","uint32")),lo?xn=Lr(lo):Ba&&!Fa&&(xn=xt(Jn,Ai,!1,"stencil","uint8")),go?ni=Lr(go):!fo&&!lo&&Ba&&Fa&&(ni=xt(Jn,Ai,Ya,"depth stencil","depth stencil")),ue(!!fo+!!lo+!!go<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ei=null;for(Vn=0;Vn<Zi.length;++Vn)if(Gr(Zi[Vn],Jn,Ai),ue(!Zi[Vn]||Zi[Vn].texture&&Zc.indexOf(Zi[Vn].texture._texture.format)>=0||Zi[Vn].renderbuffer&&nf.indexOf(Zi[Vn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Vn+" is invalid"),Zi[Vn]&&Zi[Vn].texture){var ro=Qs[Zi[Vn].texture._texture.format]*ws[Zi[Vn].texture._texture.type];Ei===null?Ei=ro:ue(Ei===ro,"all color attachments much have the same number of bits per pixel.")}return Gr(Sa,Jn,Ai),ue(!Sa||Sa.texture&&Sa.texture._texture.format===uo||Sa.renderbuffer&&Sa.renderbuffer._renderbuffer.format===Jc,"invalid depth attachment for framebuffer object"),Gr(xn,Jn,Ai),ue(!xn||xn.renderbuffer&&xn.renderbuffer._renderbuffer.format===qc,"invalid stencil attachment for framebuffer object"),Gr(ni,Jn,Ai),ue(!ni||ni.texture&&ni.texture._texture.format===_u||ni.renderbuffer&&ni.renderbuffer._renderbuffer.format===_u,"invalid depth-stencil attachment for framebuffer object"),Br(Kr),Kr.width=Jn,Kr.height=Ai,Kr.colorAttachments=Zi,Kr.depthAttachment=Sa,Kr.stencilAttachment=xn,Kr.depthStencilAttachment=ni,ai.color=Zi.map(Wt),ai.depth=Wt(Sa),ai.stencil=Wt(xn),ai.depthStencil=Wt(ni),ai.width=Kr.width,ai.height=Kr.height,fr(Kr),ai}function Wn(Jr,on){ue($t.next!==Kr,"can not resize a framebuffer which is currently in use");var Vn=Math.max(Jr|0,1),Jn=Math.max(on|0||Vn,1);if(Vn===Kr.width&&Jn===Kr.height)return ai;for(var Ai=Kr.colorAttachments,Fa=0;Fa<Ai.length;++Fa)Mr(Ai[Fa],Vn,Jn);return Mr(Kr.depthAttachment,Vn,Jn),Mr(Kr.stencilAttachment,Vn,Jn),Mr(Kr.depthStencilAttachment,Vn,Jn),Kr.width=ai.width=Vn,Kr.height=ai.height=Jn,fr(Kr),ai}return ai(Ir,Zr),m(ai,{resize:Wn,_reglType:"framebuffer",_framebuffer:Kr,destroy:function(){jn(Kr),Br(Kr)},use:function(Jr){$t.setFBO({framebuffer:ai},Jr)}})}function mn(Ir){var Zr=Array(6);function Kr(Wn){var Jr;ue(Zr.indexOf($t.next)<0,"can not update framebuffer which is currently in use");var on={color:null},Vn=0,Jn=null,Ai="rgba",Fa="uint8",Ba=1;if(typeof Wn=="number")Vn=Wn|0;else if(!Wn)Vn=1;else{ue.type(Wn,"object","invalid arguments for framebuffer");var gi=Wn;if("shape"in gi){var mo=gi.shape;ue(Array.isArray(mo)&&mo.length>=2,"invalid shape for framebuffer"),ue(mo[0]===mo[1],"cube framebuffer must be square"),Vn=mo[0]}else"radius"in gi&&(Vn=gi.radius|0),"width"in gi?(Vn=gi.width|0,"height"in gi&&ue(gi.height===Vn,"must be square")):"height"in gi&&(Vn=gi.height|0);("color"in gi||"colors"in gi)&&(Jn=gi.color||gi.colors,Array.isArray(Jn)&&ue(Jn.length===1||ye.webgl_draw_buffers,"multiple render targets not supported")),Jn||("colorCount"in gi&&(Ba=gi.colorCount|0,ue(Ba>0,"invalid color buffer count")),"colorType"in gi&&(ue.oneOf(gi.colorType,Nr,"invalid color type"),Fa=gi.colorType),"colorFormat"in gi&&(Ai=gi.colorFormat,ue.oneOf(gi.colorFormat,pr,"invalid color format for texture"))),"depth"in gi&&(on.depth=gi.depth),"stencil"in gi&&(on.stencil=gi.stencil),"depthStencil"in gi&&(on.depthStencil=gi.depthStencil)}var Ea;if(Jn)if(Array.isArray(Jn))for(Ea=[],Jr=0;Jr<Jn.length;++Jr)Ea[Jr]=Jn[Jr];else Ea=[Jn];else{Ea=Array(Ba);var ao={radius:Vn,format:Ai,type:Fa};for(Jr=0;Jr<Ba;++Jr)Ea[Jr]=zt.createCube(ao)}for(on.color=Array(Ea.length),Jr=0;Jr<Ea.length;++Jr){var Wa=Ea[Jr];ue(typeof Wa=="function"&&Wa._reglType==="textureCube","invalid cube map"),Vn=Vn||Wa.width,ue(Wa.width===Vn&&Wa.height===Vn,"invalid cube map shape"),on.color[Jr]={target:Ls,data:Ea[Jr]}}for(Jr=0;Jr<6;++Jr){for(var fo=0;fo<Ea.length;++fo)on.color[fo].target=Ls+Jr;Jr>0&&(on.depth=Zr[0].depth,on.stencil=Zr[0].stencil,on.depthStencil=Zr[0].depthStencil),Zr[Jr]?Zr[Jr](on):Zr[Jr]=ar(on)}return m(Kr,{width:Vn,height:Vn,color:Ea})}function ai(Wn){var Jr,on=Wn|0;if(ue(on>0&&on<=Xe.maxCubeMapSize,"invalid radius for cube fbo"),on===Kr.width)return Kr;var Vn=Kr.color;for(Jr=0;Jr<Vn.length;++Jr)Vn[Jr].resize(on);for(Jr=0;Jr<6;++Jr)Zr[Jr].resize(on);return Kr.width=Kr.height=on,Kr}return Kr(Ir),m(Kr,{faces:Zr,resize:ai,_reglType:"framebufferCube",destroy:function(){Zr.forEach(function(Wn){Wn.destroy()})}})}function zr(){$t.cur=null,$t.next=null,$t.dirty=!0,U(Er).forEach(function(Ir){Ir.framebuffer=B.createFramebuffer(),fr(Ir)})}return m($t,{getFramebuffer:function(Ir){if(typeof Ir=="function"&&Ir._reglType==="framebuffer"){var Zr=Ir._framebuffer;if(Zr instanceof an)return Zr}return null},create:ar,createCube:mn,clear:function(){U(Er).forEach(jn)},restore:zr})}var of=5126,sc=34962,$s=34963,ss=["attributes","elements","offset","count","primitive","instances"];function Cu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=of,this.offset=0,this.stride=0,this.divisor=0}function jf(B,ye,Xe,zt,ur,jt,$t){for(var pr=Xe.maxAttributes,_r=new Array(pr),Nr=0;Nr<pr;++Nr)_r[Nr]=new Cu;var Dr=0,Fr={},Gr={Record:Cu,scope:{},state:_r,currentVAO:null,targetVAO:null,restore:Lr()?Br:function(){},createVAO:jn,getVAO:Wt,destroyBuffer:Pr,setVAO:Lr()?Mr:nn,clear:Lr()?Er:function(){}};function Pr(fr){for(var ar=0;ar<_r.length;++ar){var mn=_r[ar];mn.buffer===fr&&(B.disableVertexAttribArray(ar),mn.buffer=null)}}function Lr(){return ye.oes_vertex_array_object}function xt(){return ye.angle_instanced_arrays}function Wt(fr){return typeof fr=="function"&&fr._vao?fr._vao:null}function Mr(fr){if(fr!==Gr.currentVAO){var ar=Lr();fr?ar.bindVertexArrayOES(fr.vao):ar.bindVertexArrayOES(null),Gr.currentVAO=fr}}function nn(fr){if(fr!==Gr.currentVAO){if(fr)fr.bindAttrs();else{for(var ar=xt(),mn=0;mn<_r.length;++mn){var zr=_r[mn];zr.buffer?(B.enableVertexAttribArray(mn),zr.buffer.bind(),B.vertexAttribPointer(mn,zr.size,zr.type,zr.normalized,zr.stride,zr.offfset),ar&&zr.divisor&&ar.vertexAttribDivisorANGLE(mn,zr.divisor)):(B.disableVertexAttribArray(mn),B.vertexAttrib4f(mn,zr.x,zr.y,zr.z,zr.w))}$t.elements?B.bindBuffer($s,$t.elements.buffer.buffer):B.bindBuffer($s,null)}Gr.currentVAO=fr}}function Er(){U(Fr).forEach(function(fr){fr.destroy()})}function an(){this.id=++Dr,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var fr=Lr();fr?this.vao=fr.createVertexArrayOES():this.vao=null,Fr[this.id]=this,this.buffers=[]}an.prototype.bindAttrs=function(){for(var fr=xt(),ar=this.attributes,mn=0;mn<ar.length;++mn){var zr=ar[mn];zr.buffer?(B.enableVertexAttribArray(mn),B.bindBuffer(sc,zr.buffer.buffer),B.vertexAttribPointer(mn,zr.size,zr.type,zr.normalized,zr.stride,zr.offset),fr&&zr.divisor&&fr.vertexAttribDivisorANGLE(mn,zr.divisor)):(B.disableVertexAttribArray(mn),B.vertexAttrib4f(mn,zr.x,zr.y,zr.z,zr.w))}for(var Ir=ar.length;Ir<pr;++Ir)B.disableVertexAttribArray(Ir);var Zr=jt.getElements(this.elements);Zr?B.bindBuffer($s,Zr.buffer.buffer):B.bindBuffer($s,null)},an.prototype.refresh=function(){var fr=Lr();fr&&(fr.bindVertexArrayOES(this.vao),this.bindAttrs(),Gr.currentVAO=null,fr.bindVertexArrayOES(null))},an.prototype.destroy=function(){if(this.vao){var fr=Lr();this===Gr.currentVAO&&(Gr.currentVAO=null,fr.bindVertexArrayOES(null)),fr.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Fr[this.id]&&(delete Fr[this.id],zt.vaoCount-=1)};function Br(){var fr=Lr();fr&&U(Fr).forEach(function(ar){ar.refresh()})}function jn(fr){var ar=new an;zt.vaoCount+=1;function mn(zr){var Ir;if(Array.isArray(zr))Ir=zr,ar.elements&&ar.ownsElements&&ar.elements.destroy(),ar.elements=null,ar.ownsElements=!1,ar.offset=0,ar.count=0,ar.instances=-1,ar.primitive=4;else{if(ue(typeof zr=="object","invalid arguments for create vao"),ue("attributes"in zr,"must specify attributes for vao"),zr.elements){var Zr=zr.elements;ar.ownsElements?typeof Zr=="function"&&Zr._reglType==="elements"?(ar.elements.destroy(),ar.ownsElements=!1):(ar.elements(Zr),ar.ownsElements=!1):jt.getElements(zr.elements)?(ar.elements=zr.elements,ar.ownsElements=!1):(ar.elements=jt.create(zr.elements),ar.ownsElements=!0)}else ar.elements=null,ar.ownsElements=!1;Ir=zr.attributes,ar.offset=0,ar.count=-1,ar.instances=-1,ar.primitive=4,ar.elements&&(ar.count=ar.elements._elements.vertCount,ar.primitive=ar.elements._elements.primType),"offset"in zr&&(ar.offset=zr.offset|0),"count"in zr&&(ar.count=zr.count|0),"instances"in zr&&(ar.instances=zr.instances|0),"primitive"in zr&&(ue(zr.primitive in Kt,"bad primitive type: "+zr.primitive),ar.primitive=Kt[zr.primitive]),ue.optional(()=>{for(var Fa=Object.keys(zr),Ba=0;Ba<Fa.length;++Ba)ue(ss.indexOf(Fa[Ba])>=0,'invalid option for vao: "'+Fa[Ba]+'" valid options are '+ss)}),ue(Array.isArray(Ir),"attributes must be an array")}ue(Ir.length<pr,"too many attributes"),ue(Ir.length>0,"must specify at least one attribute");var Kr={},ai=ar.attributes;ai.length=Ir.length;for(var Wn=0;Wn<Ir.length;++Wn){var Jr=Ir[Wn],on=ai[Wn]=new Cu,Vn=Jr.data||Jr;if(Array.isArray(Vn)||o(Vn)||Qe(Vn)){var Jn;ar.buffers[Wn]&&(Jn=ar.buffers[Wn],o(Vn)&&Jn._buffer.byteLength>=Vn.byteLength?Jn.subdata(Vn):(Jn.destroy(),ar.buffers[Wn]=null)),ar.buffers[Wn]||(Jn=ar.buffers[Wn]=ur.create(Jr,sc,!1,!0)),on.buffer=ur.getBuffer(Jn),on.size=on.buffer.dimension|0,on.normalized=!1,on.type=on.buffer.dtype,on.offset=0,on.stride=0,on.divisor=0,on.state=1,Kr[Wn]=1}else ur.getBuffer(Jr)?(on.buffer=ur.getBuffer(Jr),on.size=on.buffer.dimension|0,on.normalized=!1,on.type=on.buffer.dtype,on.offset=0,on.stride=0,on.divisor=0,on.state=1):ur.getBuffer(Jr.buffer)?(on.buffer=ur.getBuffer(Jr.buffer),on.size=(+Jr.size||on.buffer.dimension)|0,on.normalized=!!Jr.normalized||!1,"type"in Jr?(ue.parameter(Jr.type,Ue,"invalid buffer type"),on.type=Ue[Jr.type]):on.type=on.buffer.dtype,on.offset=(Jr.offset||0)|0,on.stride=(Jr.stride||0)|0,on.divisor=(Jr.divisor||0)|0,on.state=1,ue(on.size>=1&&on.size<=4,"size must be between 1 and 4"),ue(on.offset>=0,"invalid offset"),ue(on.stride>=0&&on.stride<=255,"stride must be between 0 and 255"),ue(on.divisor>=0,"divisor must be positive"),ue(!on.divisor||!!ye.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Jr?(ue(Wn>0,"first attribute must not be a constant"),on.x=+Jr.x||0,on.y=+Jr.y||0,on.z=+Jr.z||0,on.w=+Jr.w||0,on.state=2):ue(!1,"invalid attribute spec for location "+Wn)}for(var Ai=0;Ai<ar.buffers.length;++Ai)!Kr[Ai]&&ar.buffers[Ai]&&(ar.buffers[Ai].destroy(),ar.buffers[Ai]=null);return ar.refresh(),mn}return mn.destroy=function(){for(var zr=0;zr<ar.buffers.length;++zr)ar.buffers[zr]&&ar.buffers[zr].destroy();ar.buffers.length=0,ar.ownsElements&&(ar.elements.destroy(),ar.elements=null,ar.ownsElements=!1),ar.destroy()},mn._vao=ar,mn._reglType="vao",mn(fr)}return Gr}var Ou=35632,uc=35633,sf=35718,uf=35721;function Js(B,ye,Xe,zt){var ur={},jt={};function $t(xt,Wt,Mr,nn){this.name=xt,this.id=Wt,this.location=Mr,this.info=nn}function pr(xt,Wt){for(var Mr=0;Mr<xt.length;++Mr)if(xt[Mr].id===Wt.id){xt[Mr].location=Wt.location;return}xt.push(Wt)}function _r(xt,Wt,Mr){var nn=xt===Ou?ur:jt,Er=nn[Wt];if(!Er){var an=ye.str(Wt);Er=B.createShader(xt),B.shaderSource(Er,an),B.compileShader(Er),ue.shaderError(B,Er,an,xt,Mr),nn[Wt]=Er}return Er}var Nr={},Dr=[],Fr=0;function Gr(xt,Wt){this.id=Fr++,this.fragId=xt,this.vertId=Wt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,zt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Pr(xt,Wt,Mr){var nn,Er,an=_r(Ou,xt.fragId),Br=_r(uc,xt.vertId),jn=xt.program=B.createProgram();if(B.attachShader(jn,an),B.attachShader(jn,Br),Mr)for(nn=0;nn<Mr.length;++nn){var fr=Mr[nn];B.bindAttribLocation(jn,fr[0],fr[1])}B.linkProgram(jn),ue.linkError(B,jn,ye.str(xt.fragId),ye.str(xt.vertId),Wt);var ar=B.getProgramParameter(jn,sf);zt.profile&&(xt.stats.uniformsCount=ar);var mn=xt.uniforms;for(nn=0;nn<ar;++nn)if(Er=B.getActiveUniform(jn,nn),Er)if(Er.size>1)for(var zr=0;zr<Er.size;++zr){var Ir=Er.name.replace("[0]","["+zr+"]");pr(mn,new $t(Ir,ye.id(Ir),B.getUniformLocation(jn,Ir),Er))}else pr(mn,new $t(Er.name,ye.id(Er.name),B.getUniformLocation(jn,Er.name),Er));var Zr=B.getProgramParameter(jn,uf);zt.profile&&(xt.stats.attributesCount=Zr);var Kr=xt.attributes;for(nn=0;nn<Zr;++nn)Er=B.getActiveAttrib(jn,nn),Er&&pr(Kr,new $t(Er.name,ye.id(Er.name),B.getAttribLocation(jn,Er.name),Er))}zt.profile&&(Xe.getMaxUniformsCount=function(){var xt=0;return Dr.forEach(function(Wt){Wt.stats.uniformsCount>xt&&(xt=Wt.stats.uniformsCount)}),xt},Xe.getMaxAttributesCount=function(){var xt=0;return Dr.forEach(function(Wt){Wt.stats.attributesCount>xt&&(xt=Wt.stats.attributesCount)}),xt});function Lr(){ur={},jt={};for(var xt=0;xt<Dr.length;++xt)Pr(Dr[xt],null,Dr[xt].attributes.map(function(Wt){return[Wt.location,Wt.name]}))}return{clear:function(){var xt=B.deleteShader.bind(B);U(ur).forEach(xt),ur={},U(jt).forEach(xt),jt={},Dr.forEach(function(Wt){B.deleteProgram(Wt.program)}),Dr.length=0,Nr={},Xe.shaderCount=0},program:function(xt,Wt,Mr,nn){ue.command(xt>=0,"missing vertex shader",Mr),ue.command(Wt>=0,"missing fragment shader",Mr);var Er=Nr[Wt];Er||(Er=Nr[Wt]={});var an=Er[xt];if(an&&(an.refCount++,!nn))return an;var Br=new Gr(Wt,xt);return Xe.shaderCount++,Pr(Br,Mr,nn),an||(Er[xt]=Br),Dr.push(Br),m(Br,{destroy:function(){if(Br.refCount--,Br.refCount<=0){B.deleteProgram(Br.program);var jn=Dr.indexOf(Br);Dr.splice(jn,1),Xe.shaderCount--}Er[Br.vertId].refCount<=0&&(B.deleteShader(jt[Br.vertId]),delete jt[Br.vertId],delete Nr[Br.fragId][Br.vertId]),Object.keys(Nr[Br.fragId]).length||(B.deleteShader(ur[Br.fragId]),delete ur[Br.fragId],delete Nr[Br.fragId])}})},restore:Lr,shader:_r,frag:-1,vert:-1}}var cc=6408,Ds=5121,cf=3333,Fs=5126;function ff(B,ye,Xe,zt,ur,jt,$t){function pr(Dr){var Fr;ye.next===null?(ue(ur.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Fr=Ds):(ue(ye.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Fr=ye.next.colorAttachments[0].texture._texture.type,ue.optional(function(){jt.oes_texture_float?(ue(Fr===Ds||Fr===Fs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Fr===Fs&&ue($t.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ue(Fr===Ds,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Gr=0,Pr=0,Lr=zt.framebufferWidth,xt=zt.framebufferHeight,Wt=null;o(Dr)?Wt=Dr:Dr&&(ue.type(Dr,"object","invalid arguments to regl.read()"),Gr=Dr.x|0,Pr=Dr.y|0,ue(Gr>=0&&Gr<zt.framebufferWidth,"invalid x offset for regl.read"),ue(Pr>=0&&Pr<zt.framebufferHeight,"invalid y offset for regl.read"),Lr=(Dr.width||zt.framebufferWidth-Gr)|0,xt=(Dr.height||zt.framebufferHeight-Pr)|0,Wt=Dr.data||null),Wt&&(Fr===Ds?ue(Wt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Fr===Fs&&ue(Wt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ue(Lr>0&&Lr+Gr<=zt.framebufferWidth,"invalid width for read pixels"),ue(xt>0&&xt+Pr<=zt.framebufferHeight,"invalid height for read pixels"),Xe();var Mr=Lr*xt*4;return Wt||(Fr===Ds?Wt=new Uint8Array(Mr):Fr===Fs&&(Wt=Wt||new Float32Array(Mr))),ue.isTypedArray(Wt,"data buffer for regl.read() must be a typedarray"),ue(Wt.byteLength>=Mr,"data buffer for regl.read() too small"),B.pixelStorei(cf,4),B.readPixels(Gr,Pr,Lr,xt,cc,Fr,Wt),Wt}function _r(Dr){var Fr;return ye.setFBO({framebuffer:Dr.framebuffer},function(){Fr=pr(Dr)}),Fr}function Nr(Dr){return!Dr||!("framebuffer"in Dr)?pr(Dr):_r(Dr)}return Nr}function bs(B){return Array.prototype.slice.call(B)}function _s(B){return bs(B).join("")}function Gf(){var B=0,ye=[],Xe=[];function zt(Fr){for(var Gr=0;Gr<Xe.length;++Gr)if(Xe[Gr]===Fr)return ye[Gr];var Pr="g"+B++;return ye.push(Pr),Xe.push(Fr),Pr}function ur(){var Fr=[];function Gr(){Fr.push.apply(Fr,bs(arguments))}var Pr=[];function Lr(){var xt="v"+B++;return Pr.push(xt),arguments.length>0&&(Fr.push(xt,"="),Fr.push.apply(Fr,bs(arguments)),Fr.push(";")),xt}return m(Gr,{def:Lr,toString:function(){return _s([Pr.length>0?"var "+Pr.join(",")+";":"",_s(Fr)])}})}function jt(){var Fr=ur(),Gr=ur(),Pr=Fr.toString,Lr=Gr.toString;function xt(Wt,Mr){Gr(Wt,Mr,"=",Fr.def(Wt,Mr),";")}return m(function(){Fr.apply(Fr,bs(arguments))},{def:Fr.def,entry:Fr,exit:Gr,save:xt,set:function(Wt,Mr,nn){xt(Wt,Mr),Fr(Wt,Mr,"=",nn,";")},toString:function(){return Pr()+Lr()}})}function $t(){var Fr=_s(arguments),Gr=jt(),Pr=jt(),Lr=Gr.toString,xt=Pr.toString;return m(Gr,{then:function(){return Gr.apply(Gr,bs(arguments)),this},else:function(){return Pr.apply(Pr,bs(arguments)),this},toString:function(){var Wt=xt();return Wt&&(Wt="else{"+Wt+"}"),_s(["if(",Fr,"){",Lr(),"}",Wt])}})}var pr=ur(),_r={};function Nr(Fr,Gr){var Pr=[];function Lr(){var Er="a"+Pr.length;return Pr.push(Er),Er}Gr=Gr||0;for(var xt=0;xt<Gr;++xt)Lr();var Wt=jt(),Mr=Wt.toString,nn=_r[Fr]=m(Wt,{arg:Lr,toString:function(){return _s(["function(",Pr.join(),"){",Mr(),"}"])}});return nn}function Dr(){var Fr=['"use strict";',pr,"return {"];Object.keys(_r).forEach(function(xt){Fr.push('"',xt,'":',_r[xt].toString(),",")}),Fr.push("}");var Gr=_s(Fr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Pr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Lr=Pr?l.Function.apply(null,ye.concat(Gr)):Function.apply(null,ye.concat(Gr));return Lr.apply(null,Xe)}return{global:pr,link:zt,block:ur,proc:Nr,scope:jt,cond:$t,compile:Dr}}var Bs="xyzw".split(""),lf=5121,Cs=1,fc=2,Pu=0,lc=1,hc=2,us=3,qs=4,hf=5,Hf=6,Mu="dither",Qo="blend.enable",df="blend.color",dc="blend.equation",Z="blend.func",$="depth.enable",R="depth.func",L="depth.range",q="depth.mask",Ae="colorMask",dt="cull.enable",It="cull.face",Pt="frontFace",Zt="lineWidth",wr="polygonOffset.enable",Cn="polygonOffset.offset",Nn="sample.alpha",Hn="sample.enable",Kn="sample.coverage",Qn="stencil.enable",Pi="stencil.mask",wi="stencil.func",Hi="stencil.opFront",La="stencil.opBack",Ca="scissor.enable",qa="scissor.box",qi="viewport",Di="profile",Ni="framebuffer",wa="vert",Da="frag",la="elements",eo="primitive",Xa="count",cs="offset",$o="instances",co="vao",Ru="Width",Lo="Height",eu=Ni+Ru,tu=Ni+Lo,ml=qi+Ru,gl=qi+Lo,yl="drawingBuffer",El=yl+Ru,Sl=yl+Lo,Th=[Z,dc,wi,Hi,La,Kn,qi,qa,Cn],Iu=34962,vf=34963,Tl=35632,Al=35633,Vf=3553,Ah=34067,xh=2884,bh=3042,_h=3024,Ch=2960,xl=2929,bl=3089,_l=32823,Cl=32926,Oh=32928,zf=5126,pf=35664,mf=35665,gf=35666,yf=5124,vc=35667,pc=35668,mc=35669,Xf=35670,Ef=35671,Sf=35672,Tf=35673,gc=35674,Nu=35675,Lu=35676,yc=35678,Ec=35680,Wf=4,Sc=1028,ru=1029,Yf=2304,Af=2305,Ol=32775,Pl=32776,Ph=519,ks=7680,Ml=0,Rl=1,Il=32774,Nl=513,Zf=36160,Ll=36064,Jo={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},wl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],wu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Us={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Dl={frag:Tl,vert:Al},Kf={cw:Yf,ccw:Af};function Tc(B){return Array.isArray(B)||o(B)||Qe(B)}function Qf(B){return B.sort(function(ye,Xe){return ye===qi?-1:Xe===qi?1:ye<Xe?-1:1})}function io(B,ye,Xe,zt){this.thisDep=B,this.contextDep=ye,this.propDep=Xe,this.append=zt}function js(B){return B&&!(B.thisDep||B.contextDep||B.propDep)}function to(B){return new io(!1,!1,!1,B)}function wo(B,ye){var Xe=B.type;if(Xe===Pu){var zt=B.data.length;return new io(!0,zt>=1,zt>=2,ye)}else if(Xe===qs){var ur=B.data;return new io(ur.thisDep,ur.contextDep,ur.propDep,ye)}else{if(Xe===hf)return new io(!1,!1,!1,ye);if(Xe===Hf){for(var jt=!1,$t=!1,pr=!1,_r=0;_r<B.data.length;++_r){var Nr=B.data[_r];if(Nr.type===lc)pr=!0;else if(Nr.type===hc)$t=!0;else if(Nr.type===us)jt=!0;else if(Nr.type===Pu){jt=!0;var Dr=Nr.data;Dr>=1&&($t=!0),Dr>=2&&(pr=!0)}else Nr.type===qs&&(jt=jt||Nr.data.thisDep,$t=$t||Nr.data.contextDep,pr=pr||Nr.data.propDep)}return new io(jt,$t,pr,ye)}else return new io(Xe===us,Xe===hc,Xe===lc,ye)}}var Fl=new io(!1,!1,!1,function(){});function Bl(B,ye,Xe,zt,ur,jt,$t,pr,_r,Nr,Dr,Fr,Gr,Pr,Lr){var xt=Nr.Record,Wt={add:32774,subtract:32778,"reverse subtract":32779};Xe.ext_blend_minmax&&(Wt.min=Ol,Wt.max=Pl);var Mr=Xe.angle_instanced_arrays,nn=Xe.webgl_draw_buffers,Er=Xe.oes_vertex_array_object,an={dirty:!0,profile:Lr.profile},Br={},jn=[],fr={},ar={};function mn(Re){return Re.replace(".","_")}function zr(Re,le,$e){var bt=mn(Re);jn.push(Re),Br[bt]=an[bt]=!!$e,fr[bt]=le}function Ir(Re,le,$e){var bt=mn(Re);jn.push(Re),Array.isArray($e)?(an[bt]=$e.slice(),Br[bt]=$e.slice()):an[bt]=Br[bt]=$e,ar[bt]=le}zr(Mu,_h),zr(Qo,bh),Ir(df,"blendColor",[0,0,0,0]),Ir(dc,"blendEquationSeparate",[Il,Il]),Ir(Z,"blendFuncSeparate",[Rl,Ml,Rl,Ml]),zr($,xl,!0),Ir(R,"depthFunc",Nl),Ir(L,"depthRange",[0,1]),Ir(q,"depthMask",!0),Ir(Ae,Ae,[!0,!0,!0,!0]),zr(dt,xh),Ir(It,"cullFace",ru),Ir(Pt,Pt,Af),Ir(Zt,Zt,1),zr(wr,_l),Ir(Cn,"polygonOffset",[0,0]),zr(Nn,Cl),zr(Hn,Oh),Ir(Kn,"sampleCoverage",[1,!1]),zr(Qn,Ch),Ir(Pi,"stencilMask",-1),Ir(wi,"stencilFunc",[Ph,0,-1]),Ir(Hi,"stencilOpSeparate",[Sc,ks,ks,ks]),Ir(La,"stencilOpSeparate",[ru,ks,ks,ks]),zr(Ca,bl),Ir(qa,"scissor",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]),Ir(qi,qi,[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);var Zr={gl:B,context:Gr,strings:ye,next:Br,current:an,draw:Fr,elements:jt,buffer:ur,shader:Dr,attributes:Nr.state,vao:Nr,uniforms:_r,framebuffer:pr,extensions:Xe,timer:Pr,isBufferArgs:Tc},Kr={primTypes:Kt,compareFuncs:wu,blendFuncs:Jo,blendEquations:Wt,stencilOps:Us,glTypes:Ue,orientationType:Kf};ue.optional(function(){Zr.isArrayLike=ua}),nn&&(Kr.backBuffer=[ru],Kr.drawBuffer=Oi(zt.maxDrawbuffers,function(Re){return Re===0?[0]:Oi(Re,function(le){return Ll+le})}));var ai=0;function Wn(){var Re=Gf(),le=Re.link,$e=Re.global;Re.id=ai++,Re.batchId="0";var bt=le(Zr),Xt=Re.shared={props:"a0"};Object.keys(Zr).forEach(function(Je){Xt[Je]=$e.def(bt,".",Je)}),ue.optional(function(){Re.CHECK=le(ue),Re.commandStr=ue.guessCommand(),Re.command=le(Re.commandStr),Re.assert=function(Je,Ie,Ct){Je("if(!(",Ie,"))",this.CHECK,".commandRaise(",le(Ct),",",this.command,");")},Kr.invalidBlendCombinations=wl});var at=Re.next={},nt=Re.current={};Object.keys(ar).forEach(function(Je){Array.isArray(an[Je])&&(at[Je]=$e.def(Xt.next,".",Je),nt[Je]=$e.def(Xt.current,".",Je))});var lt=Re.constants={};Object.keys(Kr).forEach(function(Je){lt[Je]=$e.def(JSON.stringify(Kr[Je]))}),Re.invoke=function(Je,Ie){switch(Ie.type){case Pu:var Ct=["this",Xt.context,Xt.props,Re.batchId];return Je.def(le(Ie.data),".call(",Ct.slice(0,Math.max(Ie.data.length+1,4)),")");case lc:return Je.def(Xt.props,Ie.data);case hc:return Je.def(Xt.context,Ie.data);case us:return Je.def("this",Ie.data);case qs:return Ie.data.append(Re,Je),Ie.data.ref;case hf:return Ie.data.toString();case Hf:return Ie.data.map(function(Ft){return Re.invoke(Je,Ft)})}},Re.attribCache={};var xe={};return Re.scopeAttrib=function(Je){var Ie=ye.id(Je);if(Ie in xe)return xe[Ie];var Ct=Nr.scope[Ie];Ct||(Ct=Nr.scope[Ie]=new xt);var Ft=xe[Ie]=le(Ct);return Ft},Re}function Jr(Re){var le=Re.static,$e=Re.dynamic,bt;if(Di in le){var Xt=!!le[Di];bt=to(function(nt,lt){return Xt}),bt.enable=Xt}else if(Di in $e){var at=$e[Di];bt=wo(at,function(nt,lt){return nt.invoke(lt,at)})}return bt}function on(Re,le){var $e=Re.static,bt=Re.dynamic;if(Ni in $e){var Xt=$e[Ni];return Xt?(Xt=pr.getFramebuffer(Xt),ue.command(Xt,"invalid framebuffer object"),to(function(nt,lt){var xe=nt.link(Xt),Je=nt.shared;lt.set(Je.framebuffer,".next",xe);var Ie=Je.context;return lt.set(Ie,"."+eu,xe+".width"),lt.set(Ie,"."+tu,xe+".height"),xe})):to(function(nt,lt){var xe=nt.shared;lt.set(xe.framebuffer,".next","null");var Je=xe.context;return lt.set(Je,"."+eu,Je+"."+El),lt.set(Je,"."+tu,Je+"."+Sl),"null"})}else if(Ni in bt){var at=bt[Ni];return wo(at,function(nt,lt){var xe=nt.invoke(lt,at),Je=nt.shared,Ie=Je.framebuffer,Ct=lt.def(Ie,".getFramebuffer(",xe,")");ue.optional(function(){nt.assert(lt,"!"+xe+"||"+Ct,"invalid framebuffer object")}),lt.set(Ie,".next",Ct);var Ft=Je.context;return lt.set(Ft,"."+eu,Ct+"?"+Ct+".width:"+Ft+"."+El),lt.set(Ft,"."+tu,Ct+"?"+Ct+".height:"+Ft+"."+Sl),Ct})}else return null}function Vn(Re,le,$e){var bt=Re.static,Xt=Re.dynamic;function at(xe){if(xe in bt){var Je=bt[xe];ue.commandType(Je,"object","invalid "+xe,$e.commandStr);var Ie=!0,Ct=Je.x|0,Ft=Je.y|0,mr,Hr;return"width"in Je?(mr=Je.width|0,ue.command(mr>=0,"invalid "+xe,$e.commandStr)):Ie=!1,"height"in Je?(Hr=Je.height|0,ue.command(Hr>=0,"invalid "+xe,$e.commandStr)):Ie=!1,new io(!Ie&&le&&le.thisDep,!Ie&&le&&le.contextDep,!Ie&&le&&le.propDep,function(kr,yn){var sn=kr.shared.context,pn=mr;"width"in Je||(pn=yn.def(sn,".",eu,"-",Ct));var gn=Hr;return"height"in Je||(gn=yn.def(sn,".",tu,"-",Ft)),[Ct,Ft,pn,gn]})}else if(xe in Xt){var jr=Xt[xe],Qr=wo(jr,function(kr,yn){var sn=kr.invoke(yn,jr);ue.optional(function(){kr.assert(yn,sn+"&&typeof "+sn+'==="object"',"invalid "+xe)});var pn=kr.shared.context,gn=yn.def(sn,".x|0"),En=yn.def(sn,".y|0"),zn=yn.def('"width" in ',sn,"?",sn,".width|0:","(",pn,".",eu,"-",gn,")"),Ta=yn.def('"height" in ',sn,"?",sn,".height|0:","(",pn,".",tu,"-",En,")");return ue.optional(function(){kr.assert(yn,zn+">=0&&"+Ta+">=0","invalid "+xe)}),[gn,En,zn,Ta]});return le&&(Qr.thisDep=Qr.thisDep||le.thisDep,Qr.contextDep=Qr.contextDep||le.contextDep,Qr.propDep=Qr.propDep||le.propDep),Qr}else return le?new io(le.thisDep,le.contextDep,le.propDep,function(kr,yn){var sn=kr.shared.context;return[0,0,yn.def(sn,".",eu),yn.def(sn,".",tu)]}):null}var nt=at(qi);if(nt){var lt=nt;nt=new io(nt.thisDep,nt.contextDep,nt.propDep,function(xe,Je){var Ie=lt.append(xe,Je),Ct=xe.shared.context;return Je.set(Ct,"."+ml,Ie[2]),Je.set(Ct,"."+gl,Ie[3]),Ie})}return{viewport:nt,scissor_box:at(qa)}}function Jn(Re,le){var $e=Re.static,bt=typeof $e[Da]=="string"&&typeof $e[wa]=="string";if(bt){if(Object.keys(le.dynamic).length>0)return null;var Xt=le.static,at=Object.keys(Xt);if(at.length>0&&typeof Xt[at[0]]=="number"){for(var nt=[],lt=0;lt<at.length;++lt)ue(typeof Xt[at[lt]]=="number","must specify all vertex attribute locations when using vaos"),nt.push([Xt[at[lt]]|0,at[lt]]);return nt}}return null}function Ai(Re,le,$e){var bt=Re.static,Xt=Re.dynamic;function at(Ie){if(Ie in bt){var Ct=ye.id(bt[Ie]);ue.optional(function(){Dr.shader(Dl[Ie],Ct,ue.guessCommand())});var Ft=to(function(){return Ct});return Ft.id=Ct,Ft}else if(Ie in Xt){var mr=Xt[Ie];return wo(mr,function(Hr,jr){var Qr=Hr.invoke(jr,mr),kr=jr.def(Hr.shared.strings,".id(",Qr,")");return ue.optional(function(){jr(Hr.shared.shader,".shader(",Dl[Ie],",",kr,",",Hr.command,");")}),kr})}return null}var nt=at(Da),lt=at(wa),xe=null,Je;return js(nt)&&js(lt)?(xe=Dr.program(lt.id,nt.id,null,$e),Je=to(function(Ie,Ct){return Ie.link(xe)})):Je=new io(nt&&nt.thisDep||lt&&lt.thisDep,nt&&nt.contextDep||lt&&lt.contextDep,nt&&nt.propDep||lt&&lt.propDep,function(Ie,Ct){var Ft=Ie.shared.shader,mr;nt?mr=nt.append(Ie,Ct):mr=Ct.def(Ft,".",Da);var Hr;lt?Hr=lt.append(Ie,Ct):Hr=Ct.def(Ft,".",wa);var jr=Ft+".program("+Hr+","+mr;return ue.optional(function(){jr+=","+Ie.command}),Ct.def(jr+")")}),{frag:nt,vert:lt,progVar:Je,program:xe}}function Fa(Re,le){var $e=Re.static,bt=Re.dynamic,Xt={},at=!1;function nt(){if(co in $e){var yn=$e[co];return yn!==null&&Nr.getVAO(yn)===null&&(yn=Nr.createVAO(yn)),at=!0,Xt.vao=yn,to(function(pn){var gn=Nr.getVAO(yn);return gn?pn.link(gn):"null"})}else if(co in bt){at=!0;var sn=bt[co];return wo(sn,function(pn,gn){var En=pn.invoke(gn,sn);return gn.def(pn.shared.vao+".getVAO("+En+")")})}return null}var lt=nt(),xe=!1;function Je(){if(la in $e){var yn=$e[la];if(Xt.elements=yn,Tc(yn)){var sn=Xt.elements=jt.create(yn,!0);yn=jt.getElements(sn),xe=!0}else yn&&(yn=jt.getElements(yn),xe=!0,ue.command(yn,"invalid elements",le.commandStr));var pn=to(function(En,zn){if(yn){var Ta=En.link(yn);return En.ELEMENTS=Ta,Ta}return En.ELEMENTS=null,null});return pn.value=yn,pn}else if(la in bt){xe=!0;var gn=bt[la];return wo(gn,function(En,zn){var Ta=En.shared,oo=Ta.isBufferArgs,fs=Ta.elements,Os=En.invoke(zn,gn),Ps=zn.def("null"),Mo=zn.def(oo,"(",Os,")"),ls=En.cond(Mo).then(Ps,"=",fs,".createStream(",Os,");").else(Ps,"=",fs,".getElements(",Os,");");return ue.optional(function(){En.assert(ls.else,"!"+Os+"||"+Ps,"invalid elements")}),zn.entry(ls),zn.exit(En.cond(Mo).then(fs,".destroyStream(",Ps,");")),En.ELEMENTS=Ps,Ps})}else if(at)return new io(lt.thisDep,lt.contextDep,lt.propDep,function(En,zn){return zn.def(En.shared.vao+".currentVAO?"+En.shared.elements+".getElements("+En.shared.vao+".currentVAO.elements):null")});return null}var Ie=Je();function Ct(){if(eo in $e){var yn=$e[eo];return Xt.primitive=yn,ue.commandParameter(yn,Kt,"invalid primitve",le.commandStr),to(function(pn,gn){return Kt[yn]})}else if(eo in bt){var sn=bt[eo];return wo(sn,function(pn,gn){var En=pn.constants.primTypes,zn=pn.invoke(gn,sn);return ue.optional(function(){pn.assert(gn,zn+" in "+En,"invalid primitive, must be one of "+Object.keys(Kt))}),gn.def(En,"[",zn,"]")})}else{if(xe)return js(Ie)?Ie.value?to(function(pn,gn){return gn.def(pn.ELEMENTS,".primType")}):to(function(){return Wf}):new io(Ie.thisDep,Ie.contextDep,Ie.propDep,function(pn,gn){var En=pn.ELEMENTS;return gn.def(En,"?",En,".primType:",Wf)});if(at)return new io(lt.thisDep,lt.contextDep,lt.propDep,function(pn,gn){return gn.def(pn.shared.vao+".currentVAO?"+pn.shared.vao+".currentVAO.primitive:"+Wf)})}return null}function Ft(yn,sn){if(yn in $e){var pn=$e[yn]|0;return sn?Xt.offset=pn:Xt.instances=pn,ue.command(!sn||pn>=0,"invalid "+yn,le.commandStr),to(function(En,zn){return sn&&(En.OFFSET=pn),pn})}else if(yn in bt){var gn=bt[yn];return wo(gn,function(En,zn){var Ta=En.invoke(zn,gn);return sn&&(En.OFFSET=Ta,ue.optional(function(){En.assert(zn,Ta+">=0","invalid "+yn)})),Ta})}else if(sn){if(xe)return to(function(En,zn){return En.OFFSET=0,0});if(at)return new io(lt.thisDep,lt.contextDep,lt.propDep,function(En,zn){return zn.def(En.shared.vao+".currentVAO?"+En.shared.vao+".currentVAO.offset:0")})}else if(at)return new io(lt.thisDep,lt.contextDep,lt.propDep,function(En,zn){return zn.def(En.shared.vao+".currentVAO?"+En.shared.vao+".currentVAO.instances:-1")});return null}var mr=Ft(cs,!0);function Hr(){if(Xa in $e){var yn=$e[Xa]|0;return Xt.count=yn,ue.command(typeof yn=="number"&&yn>=0,"invalid vertex count",le.commandStr),to(function(){return yn})}else if(Xa in bt){var sn=bt[Xa];return wo(sn,function(zn,Ta){var oo=zn.invoke(Ta,sn);return ue.optional(function(){zn.assert(Ta,"typeof "+oo+'==="number"&&'+oo+">=0&&"+oo+"===("+oo+"|0)","invalid vertex count")}),oo})}else if(xe)if(js(Ie)){if(Ie)return mr?new io(mr.thisDep,mr.contextDep,mr.propDep,function(zn,Ta){var oo=Ta.def(zn.ELEMENTS,".vertCount-",zn.OFFSET);return ue.optional(function(){zn.assert(Ta,oo+">=0","invalid vertex offset/element buffer too small")}),oo}):to(function(zn,Ta){return Ta.def(zn.ELEMENTS,".vertCount")});var pn=to(function(){return-1});return ue.optional(function(){pn.MISSING=!0}),pn}else{var gn=new io(Ie.thisDep||mr.thisDep,Ie.contextDep||mr.contextDep,Ie.propDep||mr.propDep,function(zn,Ta){var oo=zn.ELEMENTS;return zn.OFFSET?Ta.def(oo,"?",oo,".vertCount-",zn.OFFSET,":-1"):Ta.def(oo,"?",oo,".vertCount:-1")});return ue.optional(function(){gn.DYNAMIC=!0}),gn}else if(at){var En=new io(lt.thisDep,lt.contextDep,lt.propDep,function(zn,Ta){return Ta.def(zn.shared.vao,".currentVAO?",zn.shared.vao,".currentVAO.count:-1")});return En}return null}var jr=Ct(),Qr=Hr(),kr=Ft($o,!1);return{elements:Ie,primitive:jr,count:Qr,instances:kr,offset:mr,vao:lt,vaoActive:at,elementsActive:xe,static:Xt}}function Ba(Re,le){var $e=Re.static,bt=Re.dynamic,Xt={};return jn.forEach(function(at){var nt=mn(at);function lt(xe,Je){if(at in $e){var Ie=xe($e[at]);Xt[nt]=to(function(){return Ie})}else if(at in bt){var Ct=bt[at];Xt[nt]=wo(Ct,function(Ft,mr){return Je(Ft,mr,Ft.invoke(mr,Ct))})}}switch(at){case dt:case Qo:case Mu:case Qn:case $:case Ca:case wr:case Nn:case Hn:case q:return lt(function(xe){return ue.commandType(xe,"boolean",at,le.commandStr),xe},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,"typeof "+Ie+'==="boolean"',"invalid flag "+at,xe.commandStr)}),Ie});case R:return lt(function(xe){return ue.commandParameter(xe,wu,"invalid "+at,le.commandStr),wu[xe]},function(xe,Je,Ie){var Ct=xe.constants.compareFuncs;return ue.optional(function(){xe.assert(Je,Ie+" in "+Ct,"invalid "+at+", must be one of "+Object.keys(wu))}),Je.def(Ct,"[",Ie,"]")});case L:return lt(function(xe){return ue.command(ua(xe)&&xe.length===2&&typeof xe[0]=="number"&&typeof xe[1]=="number"&&xe[0]<=xe[1],"depth range is 2d array",le.commandStr),xe},function(xe,Je,Ie){ue.optional(function(){xe.assert(Je,xe.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===2&&typeof "+Ie+'[0]==="number"&&typeof '+Ie+'[1]==="number"&&'+Ie+"[0]<="+Ie+"[1]","depth range must be a 2d array")});var Ct=Je.def("+",Ie,"[0]"),Ft=Je.def("+",Ie,"[1]");return[Ct,Ft]});case Z:return lt(function(xe){ue.commandType(xe,"object","blend.func",le.commandStr);var Je="srcRGB"in xe?xe.srcRGB:xe.src,Ie="srcAlpha"in xe?xe.srcAlpha:xe.src,Ct="dstRGB"in xe?xe.dstRGB:xe.dst,Ft="dstAlpha"in xe?xe.dstAlpha:xe.dst;return ue.commandParameter(Je,Jo,nt+".srcRGB",le.commandStr),ue.commandParameter(Ie,Jo,nt+".srcAlpha",le.commandStr),ue.commandParameter(Ct,Jo,nt+".dstRGB",le.commandStr),ue.commandParameter(Ft,Jo,nt+".dstAlpha",le.commandStr),ue.command(wl.indexOf(Je+", "+Ct)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Je+", "+Ct+")",le.commandStr),[Jo[Je],Jo[Ct],Jo[Ie],Jo[Ft]]},function(xe,Je,Ie){var Ct=xe.constants.blendFuncs;ue.optional(function(){xe.assert(Je,Ie+"&&typeof "+Ie+'==="object"',"invalid blend func, must be an object")});function Ft(sn,pn){var gn=Je.def('"',sn,pn,'" in ',Ie,"?",Ie,".",sn,pn,":",Ie,".",sn);return ue.optional(function(){xe.assert(Je,gn+" in "+Ct,"invalid "+at+"."+sn+pn+", must be one of "+Object.keys(Jo))}),gn}var mr=Ft("src","RGB"),Hr=Ft("dst","RGB");ue.optional(function(){var sn=xe.constants.invalidBlendCombinations;xe.assert(Je,sn+".indexOf("+mr+'+", "+'+Hr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var jr=Je.def(Ct,"[",mr,"]"),Qr=Je.def(Ct,"[",Ft("src","Alpha"),"]"),kr=Je.def(Ct,"[",Hr,"]"),yn=Je.def(Ct,"[",Ft("dst","Alpha"),"]");return[jr,kr,Qr,yn]});case dc:return lt(function(xe){if(typeof xe=="string")return ue.commandParameter(xe,Wt,"invalid "+at,le.commandStr),[Wt[xe],Wt[xe]];if(typeof xe=="object")return ue.commandParameter(xe.rgb,Wt,at+".rgb",le.commandStr),ue.commandParameter(xe.alpha,Wt,at+".alpha",le.commandStr),[Wt[xe.rgb],Wt[xe.alpha]];ue.commandRaise("invalid blend.equation",le.commandStr)},function(xe,Je,Ie){var Ct=xe.constants.blendEquations,Ft=Je.def(),mr=Je.def(),Hr=xe.cond("typeof ",Ie,'==="string"');return ue.optional(function(){function jr(Qr,kr,yn){xe.assert(Qr,yn+" in "+Ct,"invalid "+kr+", must be one of "+Object.keys(Wt))}jr(Hr.then,at,Ie),xe.assert(Hr.else,Ie+"&&typeof "+Ie+'==="object"',"invalid "+at),jr(Hr.else,at+".rgb",Ie+".rgb"),jr(Hr.else,at+".alpha",Ie+".alpha")}),Hr.then(Ft,"=",mr,"=",Ct,"[",Ie,"];"),Hr.else(Ft,"=",Ct,"[",Ie,".rgb];",mr,"=",Ct,"[",Ie,".alpha];"),Je(Hr),[Ft,mr]});case df:return lt(function(xe){return ue.command(ua(xe)&&xe.length===4,"blend.color must be a 4d array",le.commandStr),Oi(4,function(Je){return+xe[Je]})},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,xe.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","blend.color must be a 4d array")}),Oi(4,function(Ct){return Je.def("+",Ie,"[",Ct,"]")})});case Pi:return lt(function(xe){return ue.commandType(xe,"number",nt,le.commandStr),xe|0},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,"typeof "+Ie+'==="number"',"invalid stencil.mask")}),Je.def(Ie,"|0")});case wi:return lt(function(xe){ue.commandType(xe,"object",nt,le.commandStr);var Je=xe.cmp||"keep",Ie=xe.ref||0,Ct="mask"in xe?xe.mask:-1;return ue.commandParameter(Je,wu,at+".cmp",le.commandStr),ue.commandType(Ie,"number",at+".ref",le.commandStr),ue.commandType(Ct,"number",at+".mask",le.commandStr),[wu[Je],Ie,Ct]},function(xe,Je,Ie){var Ct=xe.constants.compareFuncs;ue.optional(function(){function jr(){xe.assert(Je,Array.prototype.join.call(arguments,""),"invalid stencil.func")}jr(Ie+"&&typeof ",Ie,'==="object"'),jr('!("cmp" in ',Ie,")||(",Ie,".cmp in ",Ct,")")});var Ft=Je.def('"cmp" in ',Ie,"?",Ct,"[",Ie,".cmp]",":",ks),mr=Je.def(Ie,".ref|0"),Hr=Je.def('"mask" in ',Ie,"?",Ie,".mask|0:-1");return[Ft,mr,Hr]});case Hi:case La:return lt(function(xe){ue.commandType(xe,"object",nt,le.commandStr);var Je=xe.fail||"keep",Ie=xe.zfail||"keep",Ct=xe.zpass||"keep";return ue.commandParameter(Je,Us,at+".fail",le.commandStr),ue.commandParameter(Ie,Us,at+".zfail",le.commandStr),ue.commandParameter(Ct,Us,at+".zpass",le.commandStr),[at===La?ru:Sc,Us[Je],Us[Ie],Us[Ct]]},function(xe,Je,Ie){var Ct=xe.constants.stencilOps;ue.optional(function(){xe.assert(Je,Ie+"&&typeof "+Ie+'==="object"',"invalid "+at)});function Ft(mr){return ue.optional(function(){xe.assert(Je,'!("'+mr+'" in '+Ie+")||("+Ie+"."+mr+" in "+Ct+")","invalid "+at+"."+mr+", must be one of "+Object.keys(Us))}),Je.def('"',mr,'" in ',Ie,"?",Ct,"[",Ie,".",mr,"]:",ks)}return[at===La?ru:Sc,Ft("fail"),Ft("zfail"),Ft("zpass")]});case Cn:return lt(function(xe){ue.commandType(xe,"object",nt,le.commandStr);var Je=xe.factor|0,Ie=xe.units|0;return ue.commandType(Je,"number",nt+".factor",le.commandStr),ue.commandType(Ie,"number",nt+".units",le.commandStr),[Je,Ie]},function(xe,Je,Ie){ue.optional(function(){xe.assert(Je,Ie+"&&typeof "+Ie+'==="object"',"invalid "+at)});var Ct=Je.def(Ie,".factor|0"),Ft=Je.def(Ie,".units|0");return[Ct,Ft]});case It:return lt(function(xe){var Je=0;return xe==="front"?Je=Sc:xe==="back"&&(Je=ru),ue.command(!!Je,nt,le.commandStr),Je},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,Ie+'==="front"||'+Ie+'==="back"',"invalid cull.face")}),Je.def(Ie,'==="front"?',Sc,":",ru)});case Zt:return lt(function(xe){return ue.command(typeof xe=="number"&&xe>=zt.lineWidthDims[0]&&xe<=zt.lineWidthDims[1],"invalid line width, must be a positive number between "+zt.lineWidthDims[0]+" and "+zt.lineWidthDims[1],le.commandStr),xe},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,"typeof "+Ie+'==="number"&&'+Ie+">="+zt.lineWidthDims[0]+"&&"+Ie+"<="+zt.lineWidthDims[1],"invalid line width")}),Ie});case Pt:return lt(function(xe){return ue.commandParameter(xe,Kf,nt,le.commandStr),Kf[xe]},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,Ie+'==="cw"||'+Ie+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Je.def(Ie+'==="cw"?'+Yf+":"+Af)});case Ae:return lt(function(xe){return ue.command(ua(xe)&&xe.length===4,"color.mask must be length 4 array",le.commandStr),xe.map(function(Je){return!!Je})},function(xe,Je,Ie){return ue.optional(function(){xe.assert(Je,xe.shared.isArrayLike+"("+Ie+")&&"+Ie+".length===4","invalid color.mask")}),Oi(4,function(Ct){return"!!"+Ie+"["+Ct+"]"})});case Kn:return lt(function(xe){ue.command(typeof xe=="object"&&xe,nt,le.commandStr);var Je="value"in xe?xe.value:1,Ie=!!xe.invert;return ue.command(typeof Je=="number"&&Je>=0&&Je<=1,"sample.coverage.value must be a number between 0 and 1",le.commandStr),[Je,Ie]},function(xe,Je,Ie){ue.optional(function(){xe.assert(Je,Ie+"&&typeof "+Ie+'==="object"',"invalid sample.coverage")});var Ct=Je.def('"value" in ',Ie,"?+",Ie,".value:1"),Ft=Je.def("!!",Ie,".invert");return[Ct,Ft]})}}),Xt}function gi(Re,le){var $e=Re.static,bt=Re.dynamic,Xt={};return Object.keys($e).forEach(function(at){var nt=$e[at],lt;if(typeof nt=="number"||typeof nt=="boolean")lt=to(function(){return nt});else if(typeof nt=="function"){var xe=nt._reglType;xe==="texture2d"||xe==="textureCube"?lt=to(function(Je){return Je.link(nt)}):xe==="framebuffer"||xe==="framebufferCube"?(ue.command(nt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+at+'"',le.commandStr),lt=to(function(Je){return Je.link(nt.color[0])})):ue.commandRaise('invalid data for uniform "'+at+'"',le.commandStr)}else ua(nt)?lt=to(function(Je){var Ie=Je.global.def("[",Oi(nt.length,function(Ct){return ue.command(typeof nt[Ct]=="number"||typeof nt[Ct]=="boolean","invalid uniform "+at,Je.commandStr),nt[Ct]}),"]");return Ie}):ue.commandRaise('invalid or missing data for uniform "'+at+'"',le.commandStr);lt.value=nt,Xt[at]=lt}),Object.keys(bt).forEach(function(at){var nt=bt[at];Xt[at]=wo(nt,function(lt,xe){return lt.invoke(xe,nt)})}),Xt}function mo(Re,le){var $e=Re.static,bt=Re.dynamic,Xt={};return Object.keys($e).forEach(function(at){var nt=$e[at],lt=ye.id(at),xe=new xt;if(Tc(nt))xe.state=Cs,xe.buffer=ur.getBuffer(ur.create(nt,Iu,!1,!0)),xe.type=0;else{var Je=ur.getBuffer(nt);if(Je)xe.state=Cs,xe.buffer=Je,xe.type=0;else if(ue.command(typeof nt=="object"&&nt,"invalid data for attribute "+at,le.commandStr),"constant"in nt){var Ie=nt.constant;xe.buffer="null",xe.state=fc,typeof Ie=="number"?xe.x=Ie:(ue.command(ua(Ie)&&Ie.length>0&&Ie.length<=4,"invalid constant for attribute "+at,le.commandStr),Bs.forEach(function(kr,yn){yn<Ie.length&&(xe[kr]=Ie[yn])}))}else{Tc(nt.buffer)?Je=ur.getBuffer(ur.create(nt.buffer,Iu,!1,!0)):Je=ur.getBuffer(nt.buffer),ue.command(!!Je,'missing buffer for attribute "'+at+'"',le.commandStr);var Ct=nt.offset|0;ue.command(Ct>=0,'invalid offset for attribute "'+at+'"',le.commandStr);var Ft=nt.stride|0;ue.command(Ft>=0&&Ft<256,'invalid stride for attribute "'+at+'", must be integer betweeen [0, 255]',le.commandStr);var mr=nt.size|0;ue.command(!("size"in nt)||mr>0&&mr<=4,'invalid size for attribute "'+at+'", must be 1,2,3,4',le.commandStr);var Hr=!!nt.normalized,jr=0;"type"in nt&&(ue.commandParameter(nt.type,Ue,"invalid type for attribute "+at,le.commandStr),jr=Ue[nt.type]);var Qr=nt.divisor|0;ue.optional(function(){"divisor"in nt&&(ue.command(Qr===0||Mr,'cannot specify divisor for attribute "'+at+'", instancing not supported',le.commandStr),ue.command(Qr>=0,'invalid divisor for attribute "'+at+'"',le.commandStr));var kr=le.commandStr,yn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(nt).forEach(function(sn){ue.command(yn.indexOf(sn)>=0,'unknown parameter "'+sn+'" for attribute pointer "'+at+'" (valid parameters are '+yn+")",kr)})}),xe.buffer=Je,xe.state=Cs,xe.size=mr,xe.normalized=Hr,xe.type=jr||Je.dtype,xe.offset=Ct,xe.stride=Ft,xe.divisor=Qr}}Xt[at]=to(function(kr,yn){var sn=kr.attribCache;if(lt in sn)return sn[lt];var pn={isStream:!1};return Object.keys(xe).forEach(function(gn){pn[gn]=xe[gn]}),xe.buffer&&(pn.buffer=kr.link(xe.buffer),pn.type=pn.type||pn.buffer+".dtype"),sn[lt]=pn,pn})}),Object.keys(bt).forEach(function(at){var nt=bt[at];function lt(xe,Je){var Ie=xe.invoke(Je,nt),Ct=xe.shared,Ft=xe.constants,mr=Ct.isBufferArgs,Hr=Ct.buffer;ue.optional(function(){xe.assert(Je,Ie+"&&(typeof "+Ie+'==="object"||typeof '+Ie+'==="function")&&('+mr+"("+Ie+")||"+Hr+".getBuffer("+Ie+")||"+Hr+".getBuffer("+Ie+".buffer)||"+mr+"("+Ie+'.buffer)||("constant" in '+Ie+"&&(typeof "+Ie+'.constant==="number"||'+Ct.isArrayLike+"("+Ie+".constant))))",'invalid dynamic attribute "'+at+'"')});var jr={isStream:Je.def(!1)},Qr=new xt;Qr.state=Cs,Object.keys(Qr).forEach(function(pn){jr[pn]=Je.def(""+Qr[pn])});var kr=jr.buffer,yn=jr.type;Je("if(",mr,"(",Ie,")){",jr.isStream,"=true;",kr,"=",Hr,".createStream(",Iu,",",Ie,");",yn,"=",kr,".dtype;","}else{",kr,"=",Hr,".getBuffer(",Ie,");","if(",kr,"){",yn,"=",kr,".dtype;",'}else if("constant" in ',Ie,"){",jr.state,"=",fc,";","if(typeof "+Ie+'.constant === "number"){',jr[Bs[0]],"=",Ie,".constant;",Bs.slice(1).map(function(pn){return jr[pn]}).join("="),"=0;","}else{",Bs.map(function(pn,gn){return jr[pn]+"="+Ie+".constant.length>"+gn+"?"+Ie+".constant["+gn+"]:0;"}).join(""),"}}else{","if(",mr,"(",Ie,".buffer)){",kr,"=",Hr,".createStream(",Iu,",",Ie,".buffer);","}else{",kr,"=",Hr,".getBuffer(",Ie,".buffer);","}",yn,'="type" in ',Ie,"?",Ft.glTypes,"[",Ie,".type]:",kr,".dtype;",jr.normalized,"=!!",Ie,".normalized;");function sn(pn){Je(jr[pn],"=",Ie,".",pn,"|0;")}return sn("size"),sn("offset"),sn("stride"),sn("divisor"),Je("}}"),Je.exit("if(",jr.isStream,"){",Hr,".destroyStream(",kr,");","}"),jr}Xt[at]=wo(nt,lt)}),Xt}function Ea(Re){var le=Re.static,$e=Re.dynamic,bt={};return Object.keys(le).forEach(function(Xt){var at=le[Xt];bt[Xt]=to(function(nt,lt){return typeof at=="number"||typeof at=="boolean"?""+at:nt.link(at)})}),Object.keys($e).forEach(function(Xt){var at=$e[Xt];bt[Xt]=wo(at,function(nt,lt){return nt.invoke(lt,at)})}),bt}function ao(Re,le,$e,bt,Xt){var at=Re.static,nt=Re.dynamic;ue.optional(function(){var sn=[Ni,wa,Da,la,eo,cs,Xa,$o,Di,co].concat(jn);function pn(gn){Object.keys(gn).forEach(function(En){ue.command(sn.indexOf(En)>=0,'unknown parameter "'+En+'"',Xt.commandStr)})}pn(at),pn(nt)});var lt=Jn(Re,le),xe=on(Re,Xt),Je=Vn(Re,xe,Xt),Ie=Fa(Re,Xt),Ct=Ba(Re,Xt),Ft=Ai(Re,Xt,lt);function mr(sn){var pn=Je[sn];pn&&(Ct[sn]=pn)}mr(qi),mr(mn(qa));var Hr=Object.keys(Ct).length>0,jr={framebuffer:xe,draw:Ie,shader:Ft,state:Ct,dirty:Hr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(jr.profile=Jr(Re,Xt),jr.uniforms=gi($e,Xt),jr.drawVAO=jr.scopeVAO=Ie.vao,!jr.drawVAO&&Ft.program&&!lt&&Xe.angle_instanced_arrays&&Ie.static.elements){var Qr=!0,kr=Ft.program.attributes.map(function(sn){var pn=le.static[sn];return Qr=Qr&&!!pn,pn});if(Qr&&kr.length>0){var yn=Nr.getVAO(Nr.createVAO({attributes:kr,elements:Ie.static.elements}));jr.drawVAO=new io(null,null,null,function(sn,pn){return sn.link(yn)}),jr.useVAO=!0}}return lt?jr.useVAO=!0:jr.attributes=mo(le,Xt),jr.context=Ea(bt,Xt),jr}function Wa(Re,le,$e){var bt=Re.shared,Xt=bt.context,at=Re.scope();Object.keys($e).forEach(function(nt){le.save(Xt,"."+nt);var lt=$e[nt],xe=lt.append(Re,le);Array.isArray(xe)?at(Xt,".",nt,"=[",xe.join(),"];"):at(Xt,".",nt,"=",xe,";")}),le(at)}function fo(Re,le,$e,bt){var Xt=Re.shared,at=Xt.gl,nt=Xt.framebuffer,lt;nn&&(lt=le.def(Xt.extensions,".webgl_draw_buffers"));var xe=Re.constants,Je=xe.drawBuffer,Ie=xe.backBuffer,Ct;$e?Ct=$e.append(Re,le):Ct=le.def(nt,".next"),bt||le("if(",Ct,"!==",nt,".cur){"),le("if(",Ct,"){",at,".bindFramebuffer(",Zf,",",Ct,".framebuffer);"),nn&&le(lt,".drawBuffersWEBGL(",Je,"[",Ct,".colorAttachments.length]);"),le("}else{",at,".bindFramebuffer(",Zf,",null);"),nn&&le(lt,".drawBuffersWEBGL(",Ie,");"),le("}",nt,".cur=",Ct,";"),bt||le("}")}function lo(Re,le,$e){var bt=Re.shared,Xt=bt.gl,at=Re.current,nt=Re.next,lt=bt.current,xe=bt.next,Je=Re.cond(lt,".dirty");jn.forEach(function(Ie){var Ct=mn(Ie);if(!(Ct in $e.state)){var Ft,mr;if(Ct in nt){Ft=nt[Ct],mr=at[Ct];var Hr=Oi(an[Ct].length,function(Qr){return Je.def(Ft,"[",Qr,"]")});Je(Re.cond(Hr.map(function(Qr,kr){return Qr+"!=="+mr+"["+kr+"]"}).join("||")).then(Xt,".",ar[Ct],"(",Hr,");",Hr.map(function(Qr,kr){return mr+"["+kr+"]="+Qr}).join(";"),";"))}else{Ft=Je.def(xe,".",Ct);var jr=Re.cond(Ft,"!==",lt,".",Ct);Je(jr),Ct in fr?jr(Re.cond(Ft).then(Xt,".enable(",fr[Ct],");").else(Xt,".disable(",fr[Ct],");"),lt,".",Ct,"=",Ft,";"):jr(Xt,".",ar[Ct],"(",Ft,");",lt,".",Ct,"=",Ft,";")}}}),Object.keys($e.state).length===0&&Je(lt,".dirty=false;"),le(Je)}function go(Re,le,$e,bt){var Xt=Re.shared,at=Re.current,nt=Xt.current,lt=Xt.gl;Qf(Object.keys($e)).forEach(function(xe){var Je=$e[xe];if(!(bt&&!bt(Je))){var Ie=Je.append(Re,le);if(fr[xe]){var Ct=fr[xe];js(Je)?Ie?le(lt,".enable(",Ct,");"):le(lt,".disable(",Ct,");"):le(Re.cond(Ie).then(lt,".enable(",Ct,");").else(lt,".disable(",Ct,");")),le(nt,".",xe,"=",Ie,";")}else if(ua(Ie)){var Ft=at[xe];le(lt,".",ar[xe],"(",Ie,");",Ie.map(function(mr,Hr){return Ft+"["+Hr+"]="+mr}).join(";"),";")}else le(lt,".",ar[xe],"(",Ie,");",nt,".",xe,"=",Ie,";")}})}function Ya(Re,le){Mr&&(Re.instancing=le.def(Re.shared.extensions,".angle_instanced_arrays"))}function ri(Re,le,$e,bt,Xt){var at=Re.shared,nt=Re.stats,lt=at.current,xe=at.timer,Je=$e.profile;function Ie(){var sn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return sn||typeof performance=="undefined"?"Date.now()":"performance.now()"}var Ct,Ft;function mr(sn){Ct=le.def(),sn(Ct,"=",Ie(),";"),typeof Xt=="string"?sn(nt,".count+=",Xt,";"):sn(nt,".count++;"),Pr&&(bt?(Ft=le.def(),sn(Ft,"=",xe,".getNumPendingQueries();")):sn(xe,".beginQuery(",nt,");"))}function Hr(sn){sn(nt,".cpuTime+=",Ie(),"-",Ct,";"),Pr&&(bt?sn(xe,".pushScopeStats(",Ft,",",xe,".getNumPendingQueries(),",nt,");"):sn(xe,".endQuery();"))}function jr(sn){var pn=le.def(lt,".profile");le(lt,".profile=",sn,";"),le.exit(lt,".profile=",pn,";")}var Qr;if(Je){if(js(Je)){Je.enable?(mr(le),Hr(le.exit),jr("true")):jr("false");return}Qr=Je.append(Re,le),jr(Qr)}else Qr=le.def(lt,".profile");var kr=Re.block();mr(kr),le("if(",Qr,"){",kr,"}");var yn=Re.block();Hr(yn),le.exit("if(",Qr,"){",yn,"}")}function yo(Re,le,$e,bt,Xt){var at=Re.shared;function nt(xe){switch(xe){case pf:case vc:case Ef:return 2;case mf:case pc:case Sf:return 3;case gf:case mc:case Tf:return 4;default:return 1}}function lt(xe,Je,Ie){var Ct=at.gl,Ft=le.def(xe,".location"),mr=le.def(at.attributes,"[",Ft,"]"),Hr=Ie.state,jr=Ie.buffer,Qr=[Ie.x,Ie.y,Ie.z,Ie.w],kr=["buffer","normalized","offset","stride"];function yn(){le("if(!",mr,".buffer){",Ct,".enableVertexAttribArray(",Ft,");}");var pn=Ie.type,gn;if(Ie.size?gn=le.def(Ie.size,"||",Je):gn=Je,le("if(",mr,".type!==",pn,"||",mr,".size!==",gn,"||",kr.map(function(zn){return mr+"."+zn+"!=="+Ie[zn]}).join("||"),"){",Ct,".bindBuffer(",Iu,",",jr,".buffer);",Ct,".vertexAttribPointer(",[Ft,gn,pn,Ie.normalized,Ie.stride,Ie.offset],");",mr,".type=",pn,";",mr,".size=",gn,";",kr.map(function(zn){return mr+"."+zn+"="+Ie[zn]+";"}).join(""),"}"),Mr){var En=Ie.divisor;le("if(",mr,".divisor!==",En,"){",Re.instancing,".vertexAttribDivisorANGLE(",[Ft,En],");",mr,".divisor=",En,";}")}}function sn(){le("if(",mr,".buffer){",Ct,".disableVertexAttribArray(",Ft,");",mr,".buffer=null;","}if(",Bs.map(function(pn,gn){return mr+"."+pn+"!=="+Qr[gn]}).join("||"),"){",Ct,".vertexAttrib4f(",Ft,",",Qr,");",Bs.map(function(pn,gn){return mr+"."+pn+"="+Qr[gn]+";"}).join(""),"}")}Hr===Cs?yn():Hr===fc?sn():(le("if(",Hr,"===",Cs,"){"),yn(),le("}else{"),sn(),le("}"))}bt.forEach(function(xe){var Je=xe.name,Ie=$e.attributes[Je],Ct;if(Ie){if(!Xt(Ie))return;Ct=Ie.append(Re,le)}else{if(!Xt(Fl))return;var Ft=Re.scopeAttrib(Je);ue.optional(function(){Re.assert(le,Ft+".state","missing attribute "+Je)}),Ct={},Object.keys(new xt).forEach(function(mr){Ct[mr]=le.def(Ft,".",mr)})}lt(Re.link(xe),nt(xe.info.type),Ct)})}function Zi(Re,le,$e,bt,Xt,at){for(var nt=Re.shared,lt=nt.gl,xe,Je=0;Je<bt.length;++Je){var Ie=bt[Je],Ct=Ie.name,Ft=Ie.info.type,mr=$e.uniforms[Ct],Hr=Re.link(Ie),jr=Hr+".location",Qr;if(mr){if(!Xt(mr))continue;if(js(mr)){var kr=mr.value;if(ue.command(kr!==null&&typeof kr!="undefined",'missing uniform "'+Ct+'"',Re.commandStr),Ft===yc||Ft===Ec){ue.command(typeof kr=="function"&&(Ft===yc&&(kr._reglType==="texture2d"||kr._reglType==="framebuffer")||Ft===Ec&&(kr._reglType==="textureCube"||kr._reglType==="framebufferCube")),"invalid texture for uniform "+Ct,Re.commandStr);var yn=Re.link(kr._texture||kr.color[0]._texture);le(lt,".uniform1i(",jr,",",yn+".bind());"),le.exit(yn,".unbind();")}else if(Ft===gc||Ft===Nu||Ft===Lu){ue.optional(function(){ue.command(ua(kr),"invalid matrix for uniform "+Ct,Re.commandStr),ue.command(Ft===gc&&kr.length===4||Ft===Nu&&kr.length===9||Ft===Lu&&kr.length===16,"invalid length for matrix uniform "+Ct,Re.commandStr)});var sn=Re.global.def("new Float32Array(["+Array.prototype.slice.call(kr)+"])"),pn=2;Ft===Nu?pn=3:Ft===Lu&&(pn=4),le(lt,".uniformMatrix",pn,"fv(",jr,",false,",sn,");")}else{switch(Ft){case zf:ue.commandType(kr,"number","uniform "+Ct,Re.commandStr),xe="1f";break;case pf:ue.command(ua(kr)&&kr.length===2,"uniform "+Ct,Re.commandStr),xe="2f";break;case mf:ue.command(ua(kr)&&kr.length===3,"uniform "+Ct,Re.commandStr),xe="3f";break;case gf:ue.command(ua(kr)&&kr.length===4,"uniform "+Ct,Re.commandStr),xe="4f";break;case Xf:ue.commandType(kr,"boolean","uniform "+Ct,Re.commandStr),xe="1i";break;case yf:ue.commandType(kr,"number","uniform "+Ct,Re.commandStr),xe="1i";break;case Ef:ue.command(ua(kr)&&kr.length===2,"uniform "+Ct,Re.commandStr),xe="2i";break;case vc:ue.command(ua(kr)&&kr.length===2,"uniform "+Ct,Re.commandStr),xe="2i";break;case Sf:ue.command(ua(kr)&&kr.length===3,"uniform "+Ct,Re.commandStr),xe="3i";break;case pc:ue.command(ua(kr)&&kr.length===3,"uniform "+Ct,Re.commandStr),xe="3i";break;case Tf:ue.command(ua(kr)&&kr.length===4,"uniform "+Ct,Re.commandStr),xe="4i";break;case mc:ue.command(ua(kr)&&kr.length===4,"uniform "+Ct,Re.commandStr),xe="4i";break}le(lt,".uniform",xe,"(",jr,",",ua(kr)?Array.prototype.slice.call(kr):kr,");")}continue}else Qr=mr.append(Re,le)}else{if(!Xt(Fl))continue;Qr=le.def(nt.uniforms,"[",ye.id(Ct),"]")}Ft===yc?(ue(!Array.isArray(Qr),"must specify a scalar prop for textures"),le("if(",Qr,"&&",Qr,'._reglType==="framebuffer"){',Qr,"=",Qr,".color[0];","}")):Ft===Ec&&(ue(!Array.isArray(Qr),"must specify a scalar prop for cube maps"),le("if(",Qr,"&&",Qr,'._reglType==="framebufferCube"){',Qr,"=",Qr,".color[0];","}")),ue.optional(function(){function Mo(qo,hs){Re.assert(le,qo,'bad data or missing for uniform "'+Ct+'".  '+hs)}function ls(qo){ue(!Array.isArray(Qr),"must not specify an array type for uniform"),Mo("typeof "+Qr+'==="'+qo+'"',"invalid type, expected "+qo)}function Ho(qo,hs){Array.isArray(Qr)?ue(Qr.length===qo,"must have length "+qo):Mo(nt.isArrayLike+"("+Qr+")&&"+Qr+".length==="+qo,"invalid vector, should have length "+qo,Re.commandStr)}function zl(qo){ue(!Array.isArray(Qr),"must not specify a value type"),Mo("typeof "+Qr+'==="function"&&'+Qr+'._reglType==="texture'+(qo===Vf?"2d":"Cube")+'"',"invalid texture type",Re.commandStr)}switch(Ft){case yf:ls("number");break;case vc:Ho(2,"number");break;case pc:Ho(3,"number");break;case mc:Ho(4,"number");break;case zf:ls("number");break;case pf:Ho(2,"number");break;case mf:Ho(3,"number");break;case gf:Ho(4,"number");break;case Xf:ls("boolean");break;case Ef:Ho(2,"boolean");break;case Sf:Ho(3,"boolean");break;case Tf:Ho(4,"boolean");break;case gc:Ho(4,"number");break;case Nu:Ho(9,"number");break;case Lu:Ho(16,"number");break;case yc:zl(Vf);break;case Ec:zl(Ah);break}});var gn=1;switch(Ft){case yc:case Ec:var En=le.def(Qr,"._texture");le(lt,".uniform1i(",jr,",",En,".bind());"),le.exit(En,".unbind();");continue;case yf:case Xf:xe="1i";break;case vc:case Ef:xe="2i",gn=2;break;case pc:case Sf:xe="3i",gn=3;break;case mc:case Tf:xe="4i",gn=4;break;case zf:xe="1f";break;case pf:xe="2f",gn=2;break;case mf:xe="3f",gn=3;break;case gf:xe="4f",gn=4;break;case gc:xe="Matrix2fv";break;case Nu:xe="Matrix3fv";break;case Lu:xe="Matrix4fv";break}if(xe.charAt(0)==="M"){le(lt,".uniform",xe,"(",jr,",");var zn=Math.pow(Ft-gc+2,2),Ta=Re.global.def("new Float32Array(",zn,")");Array.isArray(Qr)?le("false,(",Oi(zn,function(Mo){return Ta+"["+Mo+"]="+Qr[Mo]}),",",Ta,")"):le("false,(Array.isArray(",Qr,")||",Qr," instanceof Float32Array)?",Qr,":(",Oi(zn,function(Mo){return Ta+"["+Mo+"]="+Qr+"["+Mo+"]"}),",",Ta,")"),le(");")}else if(gn>1){for(var oo=[],fs=[],Os=0;Os<gn;++Os)Array.isArray(Qr)?fs.push(Qr[Os]):fs.push(le.def(Qr+"["+Os+"]")),at&&oo.push(le.def());at&&le("if(!",Re.batchId,"||",oo.map(function(Mo,ls){return Mo+"!=="+fs[ls]}).join("||"),"){",oo.map(function(Mo,ls){return Mo+"="+fs[ls]+";"}).join("")),le(lt,".uniform",xe,"(",jr,",",fs.join(","),");"),at&&le("}")}else{if(ue(!Array.isArray(Qr),"uniform value must not be an array"),at){var Ps=le.def();le("if(!",Re.batchId,"||",Ps,"!==",Qr,"){",Ps,"=",Qr,";")}le(lt,".uniform",xe,"(",jr,",",Qr,");"),at&&le("}")}}}function Sa(Re,le,$e,bt){var Xt=Re.shared,at=Xt.gl,nt=Xt.draw,lt=bt.draw;function xe(){var gn=lt.elements,En,zn=le;return gn?((gn.contextDep&&bt.contextDynamic||gn.propDep)&&(zn=$e),En=gn.append(Re,zn),lt.elementsActive&&zn("if("+En+")"+at+".bindBuffer("+vf+","+En+".buffer.buffer);")):(En=zn.def(),zn(En,"=",nt,".",la,";","if(",En,"){",at,".bindBuffer(",vf,",",En,".buffer.buffer);}","else if(",Xt.vao,".currentVAO){",En,"=",Re.shared.elements+".getElements("+Xt.vao,".currentVAO.elements);",Er?"":"if("+En+")"+at+".bindBuffer("+vf+","+En+".buffer.buffer);","}")),En}function Je(){var gn=lt.count,En,zn=le;return gn?((gn.contextDep&&bt.contextDynamic||gn.propDep)&&(zn=$e),En=gn.append(Re,zn),ue.optional(function(){gn.MISSING&&Re.assert(le,"false","missing vertex count"),gn.DYNAMIC&&Re.assert(zn,En+">=0","missing vertex count")})):(En=zn.def(nt,".",Xa),ue.optional(function(){Re.assert(zn,En+">=0","missing vertex count")})),En}var Ie=xe();function Ct(gn){var En=lt[gn];return En?En.contextDep&&bt.contextDynamic||En.propDep?En.append(Re,$e):En.append(Re,le):le.def(nt,".",gn)}var Ft=Ct(eo),mr=Ct(cs),Hr=Je();if(typeof Hr=="number"){if(Hr===0)return}else $e("if(",Hr,"){"),$e.exit("}");var jr,Qr;Mr&&(jr=Ct($o),Qr=Re.instancing);var kr=Ie+".type",yn=lt.elements&&js(lt.elements)&&!lt.vaoActive;function sn(){function gn(){$e(Qr,".drawElementsInstancedANGLE(",[Ft,Hr,kr,mr+"<<(("+kr+"-"+lf+")>>1)",jr],");")}function En(){$e(Qr,".drawArraysInstancedANGLE(",[Ft,mr,Hr,jr],");")}Ie&&Ie!=="null"?yn?gn():($e("if(",Ie,"){"),gn(),$e("}else{"),En(),$e("}")):En()}function pn(){function gn(){$e(at+".drawElements("+[Ft,Hr,kr,mr+"<<(("+kr+"-"+lf+")>>1)"]+");")}function En(){$e(at+".drawArrays("+[Ft,mr,Hr]+");")}Ie&&Ie!=="null"?yn?gn():($e("if(",Ie,"){"),gn(),$e("}else{"),En(),$e("}")):En()}Mr&&(typeof jr!="number"||jr>=0)?typeof jr=="string"?($e("if(",jr,">0){"),sn(),$e("}else if(",jr,"<0){"),pn(),$e("}")):sn():pn()}function xn(Re,le,$e,bt,Xt){var at=Wn(),nt=at.proc("body",Xt);return ue.optional(function(){at.commandStr=le.commandStr,at.command=at.link(le.commandStr)}),Mr&&(at.instancing=nt.def(at.shared.extensions,".angle_instanced_arrays")),Re(at,nt,$e,bt),at.compile().body}function ni(Re,le,$e,bt){Ya(Re,le),$e.useVAO?$e.drawVAO?le(Re.shared.vao,".setVAO(",$e.drawVAO.append(Re,le),");"):le(Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"):(le(Re.shared.vao,".setVAO(null);"),yo(Re,le,$e,bt.attributes,function(){return!0})),Zi(Re,le,$e,bt.uniforms,function(){return!0},!1),Sa(Re,le,le,$e)}function Ei(Re,le){var $e=Re.proc("draw",1);Ya(Re,$e),Wa(Re,$e,le.context),fo(Re,$e,le.framebuffer),lo(Re,$e,le),go(Re,$e,le.state),ri(Re,$e,le,!1,!0);var bt=le.shader.progVar.append(Re,$e);if($e(Re.shared.gl,".useProgram(",bt,".program);"),le.shader.program)ni(Re,$e,le,le.shader.program);else{$e(Re.shared.vao,".setVAO(null);");var Xt=Re.global.def("{}"),at=$e.def(bt,".id"),nt=$e.def(Xt,"[",at,"]");$e(Re.cond(nt).then(nt,".call(this,a0);").else(nt,"=",Xt,"[",at,"]=",Re.link(function(lt){return xn(ni,Re,le,lt,1)}),"(",bt,");",nt,".call(this,a0);"))}Object.keys(le.state).length>0&&$e(Re.shared.current,".dirty=true;"),Re.shared.vao&&$e(Re.shared.vao,".setVAO(null);")}function ro(Re,le,$e,bt){Re.batchId="a1",Ya(Re,le);function Xt(){return!0}yo(Re,le,$e,bt.attributes,Xt),Zi(Re,le,$e,bt.uniforms,Xt,!1),Sa(Re,le,le,$e)}function Po(Re,le,$e,bt){Ya(Re,le);var Xt=$e.contextDep,at=le.def(),nt="a0",lt="a1",xe=le.def();Re.shared.props=xe,Re.batchId=at;var Je=Re.scope(),Ie=Re.scope();le(Je.entry,"for(",at,"=0;",at,"<",lt,";++",at,"){",xe,"=",nt,"[",at,"];",Ie,"}",Je.exit);function Ct(kr){return kr.contextDep&&Xt||kr.propDep}function Ft(kr){return!Ct(kr)}if($e.needsContext&&Wa(Re,Ie,$e.context),$e.needsFramebuffer&&fo(Re,Ie,$e.framebuffer),go(Re,Ie,$e.state,Ct),$e.profile&&Ct($e.profile)&&ri(Re,Ie,$e,!1,!0),bt)$e.useVAO?$e.drawVAO?Ct($e.drawVAO)?Ie(Re.shared.vao,".setVAO(",$e.drawVAO.append(Re,Ie),");"):Je(Re.shared.vao,".setVAO(",$e.drawVAO.append(Re,Je),");"):Je(Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"):(Je(Re.shared.vao,".setVAO(null);"),yo(Re,Je,$e,bt.attributes,Ft),yo(Re,Ie,$e,bt.attributes,Ct)),Zi(Re,Je,$e,bt.uniforms,Ft,!1),Zi(Re,Ie,$e,bt.uniforms,Ct,!0),Sa(Re,Je,Ie,$e);else{var mr=Re.global.def("{}"),Hr=$e.shader.progVar.append(Re,Ie),jr=Ie.def(Hr,".id"),Qr=Ie.def(mr,"[",jr,"]");Ie(Re.shared.gl,".useProgram(",Hr,".program);","if(!",Qr,"){",Qr,"=",mr,"[",jr,"]=",Re.link(function(kr){return xn(ro,Re,$e,kr,2)}),"(",Hr,");}",Qr,".call(this,a0[",at,"],",at,");")}}function we(Re,le){var $e=Re.proc("batch",2);Re.batchId="0",Ya(Re,$e);var bt=!1,Xt=!0;Object.keys(le.context).forEach(function(mr){bt=bt||le.context[mr].propDep}),bt||(Wa(Re,$e,le.context),Xt=!1);var at=le.framebuffer,nt=!1;at?(at.propDep?bt=nt=!0:at.contextDep&&bt&&(nt=!0),nt||fo(Re,$e,at)):fo(Re,$e,null),le.state.viewport&&le.state.viewport.propDep&&(bt=!0);function lt(mr){return mr.contextDep&&bt||mr.propDep}lo(Re,$e,le),go(Re,$e,le.state,function(mr){return!lt(mr)}),(!le.profile||!lt(le.profile))&&ri(Re,$e,le,!1,"a1"),le.contextDep=bt,le.needsContext=Xt,le.needsFramebuffer=nt;var xe=le.shader.progVar;if(xe.contextDep&&bt||xe.propDep)Po(Re,$e,le,null);else{var Je=xe.append(Re,$e);if($e(Re.shared.gl,".useProgram(",Je,".program);"),le.shader.program)Po(Re,$e,le,le.shader.program);else{$e(Re.shared.vao,".setVAO(null);");var Ie=Re.global.def("{}"),Ct=$e.def(Je,".id"),Ft=$e.def(Ie,"[",Ct,"]");$e(Re.cond(Ft).then(Ft,".call(this,a0,a1);").else(Ft,"=",Ie,"[",Ct,"]=",Re.link(function(mr){return xn(Po,Re,le,mr,2)}),"(",Je,");",Ft,".call(this,a0,a1);"))}}Object.keys(le.state).length>0&&$e(Re.shared.current,".dirty=true;"),Re.shared.vao&&$e(Re.shared.vao,".setVAO(null);")}function Ht(Re,le){var $e=Re.proc("scope",3);Re.batchId="a2";var bt=Re.shared,Xt=bt.current;Wa(Re,$e,le.context),le.framebuffer&&le.framebuffer.append(Re,$e),Qf(Object.keys(le.state)).forEach(function(nt){var lt=le.state[nt],xe=lt.append(Re,$e);ua(xe)?xe.forEach(function(Je,Ie){$e.set(Re.next[nt],"["+Ie+"]",Je)}):$e.set(bt.next,"."+nt,xe)}),ri(Re,$e,le,!0,!0),[la,cs,Xa,$o,eo].forEach(function(nt){var lt=le.draw[nt];!lt||$e.set(bt.draw,"."+nt,""+lt.append(Re,$e))}),Object.keys(le.uniforms).forEach(function(nt){var lt=le.uniforms[nt].append(Re,$e);Array.isArray(lt)&&(lt="["+lt.join()+"]"),$e.set(bt.uniforms,"["+ye.id(nt)+"]",lt)}),Object.keys(le.attributes).forEach(function(nt){var lt=le.attributes[nt].append(Re,$e),xe=Re.scopeAttrib(nt);Object.keys(new xt).forEach(function(Je){$e.set(xe,"."+Je,lt[Je])})}),le.scopeVAO&&$e.set(bt.vao,".targetVAO",le.scopeVAO.append(Re,$e));function at(nt){var lt=le.shader[nt];lt&&$e.set(bt.shader,"."+nt,lt.append(Re,$e))}at(wa),at(Da),Object.keys(le.state).length>0&&($e(Xt,".dirty=true;"),$e.exit(Xt,".dirty=true;")),$e("a1(",Re.shared.context,",a0,",Re.batchId,");")}function Dt(Re){if(!(typeof Re!="object"||ua(Re))){for(var le=Object.keys(Re),$e=0;$e<le.length;++$e)if(Nt.isDynamic(Re[le[$e]]))return!0;return!1}}function cn(Re,le,$e){var bt=le.static[$e];if(!bt||!Dt(bt))return;var Xt=Re.global,at=Object.keys(bt),nt=!1,lt=!1,xe=!1,Je=Re.global.def("{}");at.forEach(function(Ct){var Ft=bt[Ct];if(Nt.isDynamic(Ft)){typeof Ft=="function"&&(Ft=bt[Ct]=Nt.unbox(Ft));var mr=wo(Ft,null);nt=nt||mr.thisDep,xe=xe||mr.propDep,lt=lt||mr.contextDep}else{switch(Xt(Je,".",Ct,"="),typeof Ft){case"number":Xt(Ft);break;case"string":Xt('"',Ft,'"');break;case"object":Array.isArray(Ft)&&Xt("[",Ft.join(),"]");break;default:Xt(Re.link(Ft));break}Xt(";")}});function Ie(Ct,Ft){at.forEach(function(mr){var Hr=bt[mr];if(!!Nt.isDynamic(Hr)){var jr=Ct.invoke(Ft,Hr);Ft(Je,".",mr,"=",jr,";")}})}le.dynamic[$e]=new Nt.DynamicVariable(qs,{thisDep:nt,contextDep:lt,propDep:xe,ref:Je,append:Ie}),delete le.static[$e]}function Si(Re,le,$e,bt,Xt){var at=Wn();at.stats=at.link(Xt),Object.keys(le.static).forEach(function(lt){cn(at,le,lt)}),Th.forEach(function(lt){cn(at,Re,lt)});var nt=ao(Re,le,$e,bt,at);return Ei(at,nt),Ht(at,nt),we(at,nt),m(at.compile(),{destroy:function(){nt.shader.program.destroy()}})}return{next:Br,current:an,procs:function(){var Re=Wn(),le=Re.proc("poll"),$e=Re.proc("refresh"),bt=Re.block();le(bt),$e(bt);var Xt=Re.shared,at=Xt.gl,nt=Xt.next,lt=Xt.current;bt(lt,".dirty=false;"),fo(Re,le),fo(Re,$e,null,!0);var xe;Mr&&(xe=Re.link(Mr)),Xe.oes_vertex_array_object&&$e(Re.link(Xe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Je=0;Je<zt.maxAttributes;++Je){var Ie=$e.def(Xt.attributes,"[",Je,"]"),Ct=Re.cond(Ie,".buffer");Ct.then(at,".enableVertexAttribArray(",Je,");",at,".bindBuffer(",Iu,",",Ie,".buffer.buffer);",at,".vertexAttribPointer(",Je,",",Ie,".size,",Ie,".type,",Ie,".normalized,",Ie,".stride,",Ie,".offset);").else(at,".disableVertexAttribArray(",Je,");",at,".vertexAttrib4f(",Je,",",Ie,".x,",Ie,".y,",Ie,".z,",Ie,".w);",Ie,".buffer=null;"),$e(Ct),Mr&&$e(xe,".vertexAttribDivisorANGLE(",Je,",",Ie,".divisor);")}return $e(Re.shared.vao,".currentVAO=null;",Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"),Object.keys(fr).forEach(function(Ft){var mr=fr[Ft],Hr=bt.def(nt,".",Ft),jr=Re.block();jr("if(",Hr,"){",at,".enable(",mr,")}else{",at,".disable(",mr,")}",lt,".",Ft,"=",Hr,";"),$e(jr),le("if(",Hr,"!==",lt,".",Ft,"){",jr,"}")}),Object.keys(ar).forEach(function(Ft){var mr=ar[Ft],Hr=an[Ft],jr,Qr,kr=Re.block();if(kr(at,".",mr,"("),ua(Hr)){var yn=Hr.length;jr=Re.global.def(nt,".",Ft),Qr=Re.global.def(lt,".",Ft),kr(Oi(yn,function(sn){return jr+"["+sn+"]"}),");",Oi(yn,function(sn){return Qr+"["+sn+"]="+jr+"["+sn+"];"}).join("")),le("if(",Oi(yn,function(sn){return jr+"["+sn+"]!=="+Qr+"["+sn+"]"}).join("||"),"){",kr,"}")}else jr=bt.def(nt,".",Ft),Qr=bt.def(lt,".",Ft),kr(jr,");",lt,".",Ft,"=",jr,";"),le("if(",jr,"!==",Qr,"){",kr,"}");$e(kr)}),Re.compile()}(),compile:Si}}function kl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Mh=34918,Rh=34919,Ul=35007,Ih=function(B,ye){if(!ye.ext_disjoint_timer_query)return null;var Xe=[];function zt(){return Xe.pop()||ye.ext_disjoint_timer_query.createQueryEXT()}function ur(Mr){Xe.push(Mr)}var jt=[];function $t(Mr){var nn=zt();ye.ext_disjoint_timer_query.beginQueryEXT(Ul,nn),jt.push(nn),Pr(jt.length-1,jt.length,Mr)}function pr(){ye.ext_disjoint_timer_query.endQueryEXT(Ul)}function _r(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Nr=[];function Dr(){return Nr.pop()||new _r}function Fr(Mr){Nr.push(Mr)}var Gr=[];function Pr(Mr,nn,Er){var an=Dr();an.startQueryIndex=Mr,an.endQueryIndex=nn,an.sum=0,an.stats=Er,Gr.push(an)}var Lr=[],xt=[];function Wt(){var Mr,nn,Er=jt.length;if(Er!==0){xt.length=Math.max(xt.length,Er+1),Lr.length=Math.max(Lr.length,Er+1),Lr[0]=0,xt[0]=0;var an=0;for(Mr=0,nn=0;nn<jt.length;++nn){var Br=jt[nn];ye.ext_disjoint_timer_query.getQueryObjectEXT(Br,Rh)?(an+=ye.ext_disjoint_timer_query.getQueryObjectEXT(Br,Mh),ur(Br)):jt[Mr++]=Br,Lr[nn+1]=an,xt[nn+1]=Mr}for(jt.length=Mr,Mr=0,nn=0;nn<Gr.length;++nn){var jn=Gr[nn],fr=jn.startQueryIndex,ar=jn.endQueryIndex;jn.sum+=Lr[ar]-Lr[fr];var mn=xt[fr],zr=xt[ar];zr===mn?(jn.stats.gpuTime+=jn.sum/1e6,Fr(jn)):(jn.startQueryIndex=mn,jn.endQueryIndex=zr,Gr[Mr++]=jn)}Gr.length=Mr}}return{beginQuery:$t,endQuery:pr,pushScopeStats:Pr,update:Wt,getNumPendingQueries:function(){return jt.length},clear:function(){Xe.push.apply(Xe,jt);for(var Mr=0;Mr<Xe.length;Mr++)ye.ext_disjoint_timer_query.deleteQueryEXT(Xe[Mr]);jt.length=0,Xe.length=0},restore:function(){jt.length=0,Xe.length=0}}},Nh=16384,jl=256,Gl=1024,Hl=34962,$f="webglcontextlost",nu="webglcontextrestored",Jf=1,Lh=2,Vl=3;function qf(B,ye){for(var Xe=0;Xe<B.length;++Xe)if(B[Xe]===ye)return Xe;return-1}function wh(B){var ye=yi(B);if(!ye)return null;var Xe=ye.gl,zt=Xe.getContextAttributes(),ur=Xe.isContextLost(),jt=Wr(Xe,ye);if(!jt)return null;var $t=_t(),pr=kl(),_r=jt.extensions,Nr=Ih(Xe,_r),Dr=Rt(),Fr=Xe.drawingBufferWidth,Gr=Xe.drawingBufferHeight,Pr={tick:0,time:0,viewportWidth:Fr,viewportHeight:Gr,framebufferWidth:Fr,framebufferHeight:Gr,drawingBufferWidth:Fr,drawingBufferHeight:Gr,pixelRatio:ye.pixelRatio},Lr={},xt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Wt=be(Xe,_r),Mr=w(Xe,pr,ye,an),nn=Co(Xe,_r,Mr,pr),Er=jf(Xe,_r,Wt,pr,Mr,nn,xt);function an(xn){return Er.destroyBuffer(xn)}var Br=Js(Xe,$t,pr,ye),jn=Wo(Xe,_r,Wt,function(){mn.procs.poll()},Pr,pr,ye),fr=zc(Xe,_r,Wt,pr,ye),ar=af(Xe,_r,Wt,jn,fr,pr),mn=Bl(Xe,$t,_r,Wt,Mr,nn,jn,ar,Lr,Er,Br,xt,Pr,Nr,ye),zr=ff(Xe,ar,mn.procs.poll,Pr,zt,_r,Wt),Ir=mn.next,Zr=Xe.canvas,Kr=[],ai=[],Wn=[],Jr=[ye.onDestroy],on=null;function Vn(){if(Kr.length===0){Nr&&Nr.update(),on=null;return}on=it.next(Vn),Ya();for(var xn=Kr.length-1;xn>=0;--xn){var ni=Kr[xn];ni&&ni(Pr,null,0)}Xe.flush(),Nr&&Nr.update()}function Jn(){!on&&Kr.length>0&&(on=it.next(Vn))}function Ai(){on&&(it.cancel(Vn),on=null)}function Fa(xn){xn.preventDefault(),ur=!0,Ai(),ai.forEach(function(ni){ni()})}function Ba(xn){Xe.getError(),ur=!1,jt.restore(),Br.restore(),Mr.restore(),jn.restore(),fr.restore(),ar.restore(),Er.restore(),Nr&&Nr.restore(),mn.procs.refresh(),Jn(),Wn.forEach(function(ni){ni()})}var gi=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!gi&&Zr&&(Zr.addEventListener($f,Fa,!1),Zr.addEventListener(nu,Ba,!1));function mo(){Kr.length=0,Ai(),!gi&&Zr&&(Zr.removeEventListener($f,Fa),Zr.removeEventListener(nu,Ba)),Br.clear(),ar.clear(),fr.clear(),Er.clear(),jn.clear(),nn.clear(),Mr.clear(),Nr&&Nr.clear(),Jr.forEach(function(xn){xn()})}function Ea(xn){ue(!!xn,"invalid args to regl({...})"),ue.type(xn,"object","invalid args to regl({...})");function ni(at){var nt=m({},at);delete nt.uniforms,delete nt.attributes,delete nt.context,delete nt.vao,"stencil"in nt&&nt.stencil.op&&(nt.stencil.opBack=nt.stencil.opFront=nt.stencil.op,delete nt.stencil.op);function lt(xe){if(xe in nt){var Je=nt[xe];delete nt[xe],Object.keys(Je).forEach(function(Ie){nt[xe+"."+Ie]=Je[Ie]})}}return lt("blend"),lt("depth"),lt("cull"),lt("stencil"),lt("polygonOffset"),lt("scissor"),lt("sample"),"vao"in at&&(nt.vao=at.vao),nt}function Ei(at,nt){var lt={},xe={};return Object.keys(at).forEach(function(Je){var Ie=at[Je];if(Nt.isDynamic(Ie)){xe[Je]=Nt.unbox(Ie,Je);return}else if(nt&&Array.isArray(Ie)){for(var Ct=0;Ct<Ie.length;++Ct)if(Nt.isDynamic(Ie[Ct])){xe[Je]=Nt.unbox(Ie,Je);return}}lt[Je]=Ie}),{dynamic:xe,static:lt}}var ro=Ei(xn.context||{},!0),Po=Ei(xn.uniforms||{},!0),we=Ei(xn.attributes||{},!1),Ht=Ei(ni(xn),!1),Dt={gpuTime:0,cpuTime:0,count:0},cn=mn.compile(Ht,we,Po,ro,Dt),Si=cn.draw,Re=cn.batch,le=cn.scope,$e=[];function bt(at){for(;$e.length<at;)$e.push(null);return $e}function Xt(at,nt){var lt;if(ur&&ue.raise("context lost"),typeof at=="function")return le.call(this,null,at,0);if(typeof nt=="function")if(typeof at=="number")for(lt=0;lt<at;++lt)le.call(this,null,nt,lt);else if(Array.isArray(at))for(lt=0;lt<at.length;++lt)le.call(this,at[lt],nt,lt);else return le.call(this,at,nt,0);else if(typeof at=="number"){if(at>0)return Re.call(this,bt(at|0),at|0)}else if(Array.isArray(at)){if(at.length)return Re.call(this,at,at.length)}else return Si.call(this,at)}return m(Xt,{stats:Dt,destroy:function(){cn.destroy()}})}var ao=ar.setFBO=Ea({framebuffer:Nt.define.call(null,Jf,"framebuffer")});function Wa(xn,ni){var Ei=0;mn.procs.poll();var ro=ni.color;ro&&(Xe.clearColor(+ro[0]||0,+ro[1]||0,+ro[2]||0,+ro[3]||0),Ei|=Nh),"depth"in ni&&(Xe.clearDepth(+ni.depth),Ei|=jl),"stencil"in ni&&(Xe.clearStencil(ni.stencil|0),Ei|=Gl),ue(!!Ei,"called regl.clear with no buffer specified"),Xe.clear(Ei)}function fo(xn){if(ue(typeof xn=="object"&&xn,"regl.clear() takes an object as input"),"framebuffer"in xn)if(xn.framebuffer&&xn.framebuffer_reglType==="framebufferCube")for(var ni=0;ni<6;++ni)ao(m({framebuffer:xn.framebuffer.faces[ni]},xn),Wa);else ao(xn,Wa);else Wa(null,xn)}function lo(xn){ue.type(xn,"function","regl.frame() callback must be a function"),Kr.push(xn);function ni(){var Ei=qf(Kr,xn);ue(Ei>=0,"cannot cancel a frame twice");function ro(){var Po=qf(Kr,ro);Kr[Po]=Kr[Kr.length-1],Kr.length-=1,Kr.length<=0&&Ai()}Kr[Ei]=ro}return Jn(),{cancel:ni}}function go(){var xn=Ir.viewport,ni=Ir.scissor_box;xn[0]=xn[1]=ni[0]=ni[1]=0,Pr.viewportWidth=Pr.framebufferWidth=Pr.drawingBufferWidth=xn[2]=ni[2]=Xe.drawingBufferWidth,Pr.viewportHeight=Pr.framebufferHeight=Pr.drawingBufferHeight=xn[3]=ni[3]=Xe.drawingBufferHeight}function Ya(){Pr.tick+=1,Pr.time=yo(),go(),mn.procs.poll()}function ri(){jn.refresh(),go(),mn.procs.refresh(),Nr&&Nr.update()}function yo(){return(Rt()-Dr)/1e3}ri();function Zi(xn,ni){ue.type(ni,"function","listener callback must be a function");var Ei;switch(xn){case"frame":return lo(ni);case"lost":Ei=ai;break;case"restore":Ei=Wn;break;case"destroy":Ei=Jr;break;default:ue.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ei.push(ni),{cancel:function(){for(var ro=0;ro<Ei.length;++ro)if(Ei[ro]===ni){Ei[ro]=Ei[Ei.length-1],Ei.pop();return}}}}var Sa=m(Ea,{clear:fo,prop:Nt.define.bind(null,Jf),context:Nt.define.bind(null,Lh),this:Nt.define.bind(null,Vl),draw:Ea({}),buffer:function(xn){return Mr.create(xn,Hl,!1,!1)},elements:function(xn){return nn.create(xn,!1)},texture:jn.create2D,cube:jn.createCube,renderbuffer:fr.create,framebuffer:ar.create,framebufferCube:ar.createCube,vao:Er.createVAO,attributes:zt,frame:lo,on:Zi,limits:Wt,hasExtension:function(xn){return Wt.extensions.indexOf(xn.toLowerCase())>=0},read:zr,destroy:mo,_gl:Xe,_refresh:ri,poll:function(){Ya(),Nr&&Nr.update()},now:yo,stats:pr});return ye.onDone(null,Sa),Sa}return wh})},iThR:function(A,v,a){var l=a("HZ3+"),o=a("jBZ+"),m=a("at28");function g(p){var y=-1,b=p==null?0:p.length;for(this.__data__=new l;++y<b;)this.add(p[y])}g.prototype.add=g.prototype.push=o,g.prototype.has=m,A.exports=g},iWIM:function(A,v,a){var l=a("n3AX");function o(m,g,p){return typeof Reflect!="undefined"&&Reflect.get?(A.exports=o=Reflect.get,A.exports.default=A.exports,A.exports.__esModule=!0):(A.exports=o=function(b,I,P){var M=l(b,I);if(!!M){var z=Object.getOwnPropertyDescriptor(M,I);return z.get?z.get.call(P):z.value}},A.exports.default=A.exports,A.exports.__esModule=!0),o(m,g,p||m)}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},idnf:function(A,v){function a(l,o,m){for(var g=-1,p=l==null?0:l.length;++g<p;)if(m(o,l[g]))return!0;return!1}A.exports=a},iegG:function(A,v){function a(o){var m=o.target||o.srcElement;m.__resizeRAF__&&cancelAnimationFrame(m.__resizeRAF__),m.__resizeRAF__=requestAnimationFrame(function(){var g=m.__resizeTrigger__,p=g&&g.__resizeListeners__;p&&p.forEach(function(y){y.call(g,o)})})}var l=function(m,g){var p=this,y=p.document,b,I=y.attachEvent;typeof navigator!="undefined"&&(b=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function P(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a)}if(!m.__resizeListeners__)if(m.__resizeListeners__=[],I)m.__resizeTrigger__=m,m.attachEvent("onresize",a);else{getComputedStyle(m).position==="static"&&(m.style.position="relative");var M=m.__resizeTrigger__=y.createElement("object");M.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),M.setAttribute("class","resize-sensor"),M.setAttribute("tabindex","-1"),M.setAttribute("title",""),M.__resizeElement__=m,M.onload=P,M.type="text/html",b&&m.appendChild(M),M.data="about:blank",b||m.appendChild(M)}m.__resizeListeners__.push(g)};A.exports=typeof window=="undefined"?l:l.bind(window),A.exports.unbind=function(o,m){var g=document.attachEvent,p=o.__resizeListeners__||[];if(m){var y=p.indexOf(m);y!==-1&&p.splice(y,1)}else p=o.__resizeListeners__=[];if(!p.length){if(g)o.detachEvent("onresize",a);else if(o.__resizeTrigger__){var b=o.__resizeTrigger__.contentDocument,I=b&&b.defaultView;I&&(I.removeEventListener("resize",a),delete I.__resizeTrigger__),o.__resizeTrigger__=!o.removeChild(o.__resizeTrigger__)}delete o.__resizeListeners__}}},inLv:function(A,v,a){(function(l,o){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var m;(function(g){(function(p){var y=typeof o=="object"?o:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),b=I(g);typeof y.Reflect=="undefined"?y.Reflect=g:b=I(y.Reflect,b),p(b);function I(P,M){return function(z,oe){typeof P[z]!="function"&&Object.defineProperty(P,z,{configurable:!0,writable:!0,value:oe}),M&&M(z,oe)}}})(function(p){var y=Object.prototype.hasOwnProperty,b=typeof Symbol=="function",I=b&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",P=b&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",M=typeof Object.create=="function",z={__proto__:[]}instanceof Array,oe=!M&&!z,G={create:M?function(){return ki(Object.create(null))}:z?function(){return ki({__proto__:null})}:function(){return ki({})},has:oe?function(ve,Ye){return y.call(ve,Ye)}:function(ve,Ye){return Ye in ve},get:oe?function(ve,Ye){return y.call(ve,Ye)?ve[Ye]:void 0}:function(ve,Ye){return ve[Ye]}},ee=Object.getPrototypeOf(Function),pe=typeof l=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",J=!pe&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:tn(),se=!pe&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Fn(),fe=!pe&&typeof WeakMap=="function"?WeakMap:Fi(),X=new fe;function Oe(ve,Ye,vt,wt){if(vr(vt)){if(!gt(ve))throw new TypeError;if(!Lt(Ye))throw new TypeError;return rt(ve,Ye)}else{if(!gt(ve))throw new TypeError;if(!Ne(Ye))throw new TypeError;if(!Ne(wt)&&!vr(wt)&&!tt(wt))throw new TypeError;return tt(wt)&&(wt=void 0),vt=Bt(vt),At(ve,Ye,vt,wt)}}p("decorate",Oe);function D(ve,Ye){function vt(wt,me){if(!Ne(wt))throw new TypeError;if(!vr(me)&&!qt(me))throw new TypeError;ze(ve,Ye,wt,me)}return vt}p("metadata",D);function De(ve,Ye,vt,wt){if(!Ne(vt))throw new TypeError;return vr(wt)||(wt=Bt(wt)),ze(ve,Ye,vt,wt)}p("defineMetadata",De);function ot(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),ne(ve,Ye,vt)}p("hasMetadata",ot);function Ke(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),Q(ve,Ye,vt)}p("hasOwnMetadata",Ke);function Le(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),te(ve,Ye,vt)}p("getMetadata",Le);function W(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),Fe(ve,Ye,vt)}p("getOwnMetadata",W);function He(ve,Ye){if(!Ne(ve))throw new TypeError;return vr(Ye)||(Ye=Bt(Ye)),St(ve,Ye)}p("getMetadataKeys",He);function C(ve,Ye){if(!Ne(ve))throw new TypeError;return vr(Ye)||(Ye=Bt(Ye)),ut(ve,Ye)}p("getOwnMetadataKeys",C);function Ze(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;vr(vt)||(vt=Bt(vt));var wt=Et(Ye,vt,!1);if(vr(wt)||!wt.delete(ve))return!1;if(wt.size>0)return!0;var me=X.get(Ye);return me.delete(vt),me.size>0||X.delete(Ye),!0}p("deleteMetadata",Ze);function rt(ve,Ye){for(var vt=ve.length-1;vt>=0;--vt){var wt=ve[vt],me=wt(Ye);if(!vr(me)&&!tt(me)){if(!Lt(me))throw new TypeError;Ye=me}}return Ye}function At(ve,Ye,vt,wt){for(var me=ve.length-1;me>=0;--me){var Pn=ve[me],Cr=Pn(Ye,vt,wt);if(!vr(Cr)&&!tt(Cr)){if(!Ne(Cr))throw new TypeError;wt=Cr}}return wt}function Et(ve,Ye,vt){var wt=X.get(ve);if(vr(wt)){if(!vt)return;wt=new J,X.set(ve,wt)}var me=wt.get(Ye);if(vr(me)){if(!vt)return;me=new J,wt.set(Ye,me)}return me}function ne(ve,Ye,vt){var wt=Q(ve,Ye,vt);if(wt)return!0;var me=ue(Ye);return tt(me)?!1:ne(ve,me,vt)}function Q(ve,Ye,vt){var wt=Et(Ye,vt,!1);return vr(wt)?!1:Ge(wt.has(ve))}function te(ve,Ye,vt){var wt=Q(ve,Ye,vt);if(wt)return Fe(ve,Ye,vt);var me=ue(Ye);if(!tt(me))return te(ve,me,vt)}function Fe(ve,Ye,vt){var wt=Et(Ye,vt,!1);if(!vr(wt))return wt.get(ve)}function ze(ve,Ye,vt,wt){var me=Et(vt,wt,!0);me.set(ve,Ye)}function St(ve,Ye){var vt=ut(ve,Ye),wt=ue(ve);if(wt===null)return vt;var me=St(wt,Ye);if(me.length<=0)return vt;if(vt.length<=0)return me;for(var Pn=new se,Cr=[],Nt=0,it=vt;Nt<it.length;Nt++){var Ce=it[Nt],Rt=Pn.has(Ce);Rt||(Pn.add(Ce),Cr.push(Ce))}for(var _t=0,Tn=me;_t<Tn.length;_t++){var Ce=Tn[_t],Rt=Pn.has(Ce);Rt||(Pn.add(Ce),Cr.push(Ce))}return Cr}function ut(ve,Ye){var vt=[],wt=Et(ve,Ye,!1);if(vr(wt))return vt;for(var me=wt.keys(),Pn=tr(me),Cr=0;;){var Nt=rr(Pn);if(!Nt)return vt.length=Cr,vt;var it=Xr(Nt);try{vt[Cr]=it}catch(Ce){try{bn(Pn)}finally{throw Ce}}Cr++}}function Qt(ve){if(ve===null)return 1;switch(typeof ve){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ve===null?1:6;default:return 6}}function vr(ve){return ve===void 0}function tt(ve){return ve===null}function Pe(ve){return typeof ve=="symbol"}function Ne(ve){return typeof ve=="object"?ve!==null:typeof ve=="function"}function ke(ve,Ye){switch(Qt(ve)){case 0:return ve;case 1:return ve;case 2:return ve;case 3:return ve;case 4:return ve;case 5:return ve}var vt=Ye===3?"string":Ye===5?"number":"default",wt=xr(ve,I);if(wt!==void 0){var me=wt.call(ve,vt);if(Ne(me))throw new TypeError;return me}return et(ve,vt==="default"?"number":vt)}function et(ve,Ye){if(Ye==="string"){var vt=ve.toString;if(ge(vt)){var wt=vt.call(ve);if(!Ne(wt))return wt}var me=ve.valueOf;if(ge(me)){var wt=me.call(ve);if(!Ne(wt))return wt}}else{var me=ve.valueOf;if(ge(me)){var wt=me.call(ve);if(!Ne(wt))return wt}var Pn=ve.toString;if(ge(Pn)){var wt=Pn.call(ve);if(!Ne(wt))return wt}}throw new TypeError}function Ge(ve){return!!ve}function Ot(ve){return""+ve}function Bt(ve){var Ye=ke(ve,3);return Pe(Ye)?Ye:Ot(Ye)}function gt(ve){return Array.isArray?Array.isArray(ve):ve instanceof Object?ve instanceof Array:Object.prototype.toString.call(ve)==="[object Array]"}function ge(ve){return typeof ve=="function"}function Lt(ve){return typeof ve=="function"}function qt(ve){switch(Qt(ve)){case 3:return!0;case 4:return!0;default:return!1}}function xr(ve,Ye){var vt=ve[Ye];if(vt!=null){if(!ge(vt))throw new TypeError;return vt}}function tr(ve){var Ye=xr(ve,P);if(!ge(Ye))throw new TypeError;var vt=Ye.call(ve);if(!Ne(vt))throw new TypeError;return vt}function Xr(ve){return ve.value}function rr(ve){var Ye=ve.next();return Ye.done?!1:Ye}function bn(ve){var Ye=ve.return;Ye&&Ye.call(ve)}function ue(ve){var Ye=Object.getPrototypeOf(ve);if(typeof ve!="function"||ve===ee||Ye!==ee)return Ye;var vt=ve.prototype,wt=vt&&Object.getPrototypeOf(vt);if(wt==null||wt===Object.prototype)return Ye;var me=wt.constructor;return typeof me!="function"||me===ve?Ye:me}function tn(){var ve={},Ye=[],vt=function(){function Cr(Nt,it,Ce){this._index=0,this._keys=Nt,this._values=it,this._selector=Ce}return Cr.prototype["@@iterator"]=function(){return this},Cr.prototype[P]=function(){return this},Cr.prototype.next=function(){var Nt=this._index;if(Nt>=0&&Nt<this._keys.length){var it=this._selector(this._keys[Nt],this._values[Nt]);return Nt+1>=this._keys.length?(this._index=-1,this._keys=Ye,this._values=Ye):this._index++,{value:it,done:!1}}return{value:void 0,done:!0}},Cr.prototype.throw=function(Nt){throw this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),Nt},Cr.prototype.return=function(Nt){return this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),{value:Nt,done:!0}},Cr}();return function(){function Cr(){this._keys=[],this._values=[],this._cacheKey=ve,this._cacheIndex=-2}return Object.defineProperty(Cr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Cr.prototype.has=function(Nt){return this._find(Nt,!1)>=0},Cr.prototype.get=function(Nt){var it=this._find(Nt,!1);return it>=0?this._values[it]:void 0},Cr.prototype.set=function(Nt,it){var Ce=this._find(Nt,!0);return this._values[Ce]=it,this},Cr.prototype.delete=function(Nt){var it=this._find(Nt,!1);if(it>=0){for(var Ce=this._keys.length,Rt=it+1;Rt<Ce;Rt++)this._keys[Rt-1]=this._keys[Rt],this._values[Rt-1]=this._values[Rt];return this._keys.length--,this._values.length--,Nt===this._cacheKey&&(this._cacheKey=ve,this._cacheIndex=-2),!0}return!1},Cr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ve,this._cacheIndex=-2},Cr.prototype.keys=function(){return new vt(this._keys,this._values,wt)},Cr.prototype.values=function(){return new vt(this._keys,this._values,me)},Cr.prototype.entries=function(){return new vt(this._keys,this._values,Pn)},Cr.prototype["@@iterator"]=function(){return this.entries()},Cr.prototype[P]=function(){return this.entries()},Cr.prototype._find=function(Nt,it){return this._cacheKey!==Nt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nt)),this._cacheIndex<0&&it&&(this._cacheIndex=this._keys.length,this._keys.push(Nt),this._values.push(void 0)),this._cacheIndex},Cr}();function wt(Cr,Nt){return Cr}function me(Cr,Nt){return Nt}function Pn(Cr,Nt){return[Cr,Nt]}}function Fn(){return function(){function ve(){this._map=new J}return Object.defineProperty(ve.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ve.prototype.has=function(Ye){return this._map.has(Ye)},ve.prototype.add=function(Ye){return this._map.set(Ye,Ye),this},ve.prototype.delete=function(Ye){return this._map.delete(Ye)},ve.prototype.clear=function(){this._map.clear()},ve.prototype.keys=function(){return this._map.keys()},ve.prototype.values=function(){return this._map.values()},ve.prototype.entries=function(){return this._map.entries()},ve.prototype["@@iterator"]=function(){return this.keys()},ve.prototype[P]=function(){return this.keys()},ve}()}function Fi(){var ve=16,Ye=G.create(),vt=wt();return function(){function it(){this._key=wt()}return it.prototype.has=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?G.has(Rt,this._key):!1},it.prototype.get=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?G.get(Rt,this._key):void 0},it.prototype.set=function(Ce,Rt){var _t=me(Ce,!0);return _t[this._key]=Rt,this},it.prototype.delete=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?delete Rt[this._key]:!1},it.prototype.clear=function(){this._key=wt()},it}();function wt(){var it;do it="@@WeakMap@@"+Nt();while(G.has(Ye,it));return Ye[it]=!0,it}function me(it,Ce){if(!y.call(it,vt)){if(!Ce)return;Object.defineProperty(it,vt,{value:G.create()})}return it[vt]}function Pn(it,Ce){for(var Rt=0;Rt<Ce;++Rt)it[Rt]=Math.random()*255|0;return it}function Cr(it){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(it)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(it)):Pn(new Uint8Array(it),it):Pn(new Array(it),it)}function Nt(){var it=Cr(ve);it[6]=it[6]&79|64,it[8]=it[8]&191|128;for(var Ce="",Rt=0;Rt<ve;++Rt){var _t=it[Rt];(Rt===4||Rt===6||Rt===8)&&(Ce+="-"),_t<16&&(Ce+="0"),Ce+=_t.toString(16).toLowerCase()}return Ce}}function ki(ve){return ve.__=void 0,delete ve.__,ve}})})(m||(m={}))}).call(this,a("BBhR"),a("QLrv"))},ioZ4:function(A,v,a){var l=a("8Dog"),o=a("HPdX"),m=a("rGxU"),g=Object.prototype,p=g.hasOwnProperty;function y(b){if(!l(b))return m(b);var I=o(b),P=[];for(var M in b)M=="constructor"&&(I||!p.call(b,M))||P.push(M);return P}A.exports=y},iuKi:function(A,v){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function l(o){return a.test(o)}A.exports=l},j2Pk:function(A,v,a){var l=a("elp8"),o=a("Pfvu"),m="[object Arguments]";function g(p){return o(p)&&l(p)==m}A.exports=g},"jBZ+":function(A,v){var a="__lodash_hash_undefined__";function l(o){return this.__data__.set(o,a),this}A.exports=l},jHQc:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.NON_CUSTOM_TAG_KEYS=v.POST_CONSTRUCT=v.DESIGN_PARAM_TYPES=v.PARAM_TYPES=v.TAGGED_PROP=v.TAGGED=v.MULTI_INJECT_TAG=v.INJECT_TAG=v.OPTIONAL_TAG=v.UNMANAGED_TAG=v.NAME_TAG=v.NAMED_TAG=void 0,v.NAMED_TAG="named",v.NAME_TAG="name",v.UNMANAGED_TAG="unmanaged",v.OPTIONAL_TAG="optional",v.INJECT_TAG="inject",v.MULTI_INJECT_TAG="multi_inject",v.TAGGED="inversify:tagged",v.TAGGED_PROP="inversify:tagged_props",v.PARAM_TYPES="inversify:paramtypes",v.DESIGN_PARAM_TYPES="design:paramtypes",v.POST_CONSTRUCT="post_construct";function l(){return[v.INJECT_TAG,v.MULTI_INJECT_TAG,v.NAME_TAG,v.UNMANAGED_TAG,v.NAMED_TAG,v.OPTIONAL_TAG]}v.NON_CUSTOM_TAG_KEYS=l()},"jIg/":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.multiInject=void 0;var l=a("xfSm"),o=a("GXnB"),m=a("Ztfv");function g(p){return function(y,b,I){var P=new o.Metadata(l.MULTI_INJECT_TAG,p);typeof I=="number"?m.tagParameter(y,b,I,P):m.tagProperty(y,b,P)}}v.multiInject=g},jYx5:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.optional=void 0;var l=a("xfSm"),o=a("GXnB"),m=a("Ztfv");function g(){return function(p,y,b){var I=new o.Metadata(l.OPTIONAL_TAG,!0);typeof b=="number"?m.tagParameter(p,y,b,I):m.tagProperty(p,y,I)}}v.optional=g},jcz1:function(A,v){function a(l){return l==null}A.exports=a},jeKh:function(A,v,a){var l=a("Pir4"),o=Array.prototype,m=o.splice;function g(p){var y=this.__data__,b=l(y,p);if(b<0)return!1;var I=y.length-1;return b==I?y.pop():m.call(y,b,1),--this.size,!0}A.exports=g},kKQ4:function(A,v){function a(l){var o=this.has(l)&&delete this.__data__[l];return this.size-=o?1:0,o}A.exports=a},kOSz:function(A,v){function a(l){return function(o,m,g){for(var p=-1,y=Object(o),b=g(o),I=b.length;I--;){var P=b[l?I:++p];if(m(y[P],P,y)===!1)break}return o}}A.exports=a},klvw:function(A,v,a){var l=a("uewA");function o(m){return l(this,m).has(m)}A.exports=o},lGGA:function(A,v){function a(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},lSNA:function(A,v){function a(l,o,m){return o in l?Object.defineProperty(l,o,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[o]=m,l}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},"lW+E":function(A,v){var a=/\s/;function l(o){for(var m=o.length;m--&&a.test(o.charAt(m)););return m}A.exports=l},lmQL:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Context=void 0;var l=a("gbO8"),o=function(){function m(g){this.id=l.id(),this.container=g}return m.prototype.addPlan=function(g){this.plan=g},m.prototype.setCurrentRequest=function(g){this.currentRequest=g},m}();v.Context=o},lwsE:function(A,v){function a(l,o){if(!(l instanceof o))throw new TypeError("Cannot call a class as a function")}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},lxDN:function(A,v,a){var l=a("zcPs");function o(m){return m==null?"":l(m)}A.exports=o},"m/tl":function(A,v){function a(l,o,m){switch(m.length){case 0:return l.call(o);case 1:return l.call(o,m[0]);case 2:return l.call(o,m[0],m[1]);case 3:return l.call(o,m[0],m[1],m[2])}return l.apply(o,m)}A.exports=a},m0LI:function(A,v){function a(l,o){var m=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(m!=null){var g=[],p=!0,y=!1,b,I;try{for(m=m.call(l);!(p=(b=m.next()).done)&&(g.push(b.value),!(o&&g.length===o));p=!0);}catch(P){y=!0,I=P}finally{try{!p&&m.return!=null&&m.return()}finally{if(y)throw I}}return g}}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},m3X8:function(A,v,a){var l=a("WsPr"),o=a("tIjD");function m(g){return o(l(g).toLowerCase())}A.exports=m},m7Q2:function(A,v){function a(l){return l.split("")}A.exports=a},m8YW:function(A,v,a){"use strict";a.r(v),a.d(v,"Interpreter",function(){return Ut}),a.d(v,"vm",function(){return l}),a.d(v,"evaluate",function(){return $r}),a.d(v,"Function",function(){return sr});var l={};a.r(l),a.d(l,"createContext",function(){return Jt}),a.d(l,"compileFunction",function(){return hr}),a.d(l,"runInContext",function(){return dr}),a.d(l,"runInNewContext",function(){return Ar}),a.d(l,"Script",function(){return rn});var o={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},m="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",g={5:m,"5module":m+" export import",6:m+" const class extends export import super"},p=/^in(stanceof)?$/,y="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",b="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",I=new RegExp("["+y+"]"),P=new RegExp("["+y+b+"]");y=b=null;var M=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],z=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function oe(c,E){for(var w=65536,_=0;_<E.length;_+=2){if(w+=E[_],w>c)return!1;if(w+=E[_+1],w>=c)return!0}}function G(c,E){return c<65?c===36:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&I.test(String.fromCharCode(c)):E===!1?!1:oe(c,M)}function ee(c,E){return c<48?c===36:c<58?!0:c<65?!1:c<91?!0:c<97?c===95:c<123?!0:c<=65535?c>=170&&P.test(String.fromCharCode(c)):E===!1?!1:oe(c,M)||oe(c,z)}var pe=function(E,w){w===void 0&&(w={}),this.label=E,this.keyword=w.keyword,this.beforeExpr=!!w.beforeExpr,this.startsExpr=!!w.startsExpr,this.isLoop=!!w.isLoop,this.isAssign=!!w.isAssign,this.prefix=!!w.prefix,this.postfix=!!w.postfix,this.binop=w.binop||null,this.updateContext=null};function J(c,E){return new pe(c,{beforeExpr:!0,binop:E})}var se={beforeExpr:!0},fe={startsExpr:!0},X={};function Oe(c,E){return E===void 0&&(E={}),E.keyword=c,X[c]=new pe(c,E)}var D={num:new pe("num",fe),regexp:new pe("regexp",fe),string:new pe("string",fe),name:new pe("name",fe),eof:new pe("eof"),bracketL:new pe("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new pe("]"),braceL:new pe("{",{beforeExpr:!0,startsExpr:!0}),braceR:new pe("}"),parenL:new pe("(",{beforeExpr:!0,startsExpr:!0}),parenR:new pe(")"),comma:new pe(",",se),semi:new pe(";",se),colon:new pe(":",se),dot:new pe("."),question:new pe("?",se),questionDot:new pe("?."),arrow:new pe("=>",se),template:new pe("template"),invalidTemplate:new pe("invalidTemplate"),ellipsis:new pe("...",se),backQuote:new pe("`",fe),dollarBraceL:new pe("${",{beforeExpr:!0,startsExpr:!0}),eq:new pe("=",{beforeExpr:!0,isAssign:!0}),assign:new pe("_=",{beforeExpr:!0,isAssign:!0}),incDec:new pe("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new pe("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:J("||",1),logicalAND:J("&&",2),bitwiseOR:J("|",3),bitwiseXOR:J("^",4),bitwiseAND:J("&",5),equality:J("==/!=/===/!==",6),relational:J("</>/<=/>=",7),bitShift:J("<</>>/>>>",8),plusMin:new pe("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:J("%",10),star:J("*",10),slash:J("/",10),starstar:new pe("**",{beforeExpr:!0}),coalesce:J("??",1),_break:Oe("break"),_case:Oe("case",se),_catch:Oe("catch"),_continue:Oe("continue"),_debugger:Oe("debugger"),_default:Oe("default",se),_do:Oe("do",{isLoop:!0,beforeExpr:!0}),_else:Oe("else",se),_finally:Oe("finally"),_for:Oe("for",{isLoop:!0}),_function:Oe("function",fe),_if:Oe("if"),_return:Oe("return",se),_switch:Oe("switch"),_throw:Oe("throw",se),_try:Oe("try"),_var:Oe("var"),_const:Oe("const"),_while:Oe("while",{isLoop:!0}),_with:Oe("with"),_new:Oe("new",{beforeExpr:!0,startsExpr:!0}),_this:Oe("this",fe),_super:Oe("super",fe),_class:Oe("class",fe),_extends:Oe("extends",se),_export:Oe("export"),_import:Oe("import",fe),_null:Oe("null",fe),_true:Oe("true",fe),_false:Oe("false",fe),_in:Oe("in",{beforeExpr:!0,binop:7}),_instanceof:Oe("instanceof",{beforeExpr:!0,binop:7}),_typeof:Oe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Oe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Oe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},De=/\r\n?|\n|\u2028|\u2029/,ot=new RegExp(De.source,"g");function Ke(c,E){return c===10||c===13||!E&&(c===8232||c===8233)}var Le=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,W=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,He=Object.prototype,C=He.hasOwnProperty,Ze=He.toString;function rt(c,E){return C.call(c,E)}var At=Array.isArray||function(c){return Ze.call(c)==="[object Array]"};function Et(c){return new RegExp("^(?:"+c.replace(/ /g,"|")+")$")}var ne=function(E,w){this.line=E,this.column=w};ne.prototype.offset=function(E){return new ne(this.line,this.column+E)};var Q=function(E,w,_){this.start=w,this.end=_,E.sourceFile!==null&&(this.source=E.sourceFile)};function te(c,E){for(var w=1,_=0;;){ot.lastIndex=_;var H=ot.exec(c);if(H&&H.index<E)++w,_=H.index+H[0].length;else return new ne(w,E-_)}}var Fe={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function ze(c){var E={};for(var w in Fe)E[w]=c&&rt(c,w)?c[w]:Fe[w];if(E.ecmaVersion>=2015&&(E.ecmaVersion-=2009),E.allowReserved==null&&(E.allowReserved=E.ecmaVersion<5),At(E.onToken)){var _=E.onToken;E.onToken=function(H){return _.push(H)}}return At(E.onComment)&&(E.onComment=St(E,E.onComment)),E}function St(c,E){return function(w,_,H,Se,We,ht){var pt={type:w?"Block":"Line",value:_,start:H,end:Se};c.locations&&(pt.loc=new Q(this,We,ht)),c.ranges&&(pt.range=[H,Se]),E.push(pt)}}var ut=1,Qt=2,vr=ut|Qt,tt=4,Pe=8,Ne=16,ke=32,et=64,Ge=128;function Ot(c,E){return Qt|(c?tt:0)|(E?Pe:0)}var Bt=0,gt=1,ge=2,Lt=3,qt=4,xr=5,tr=function(E,w,_){this.options=E=ze(E),this.sourceFile=E.sourceFile,this.keywords=Et(g[E.ecmaVersion>=6?6:E.sourceType==="module"?"5module":5]);var H="";if(E.allowReserved!==!0){for(var Se=E.ecmaVersion;!(H=o[Se]);Se--);E.sourceType==="module"&&(H+=" await")}this.reservedWords=Et(H);var We=(H?H+" ":"")+o.strict;this.reservedWordsStrict=Et(We),this.reservedWordsStrictBind=Et(We+" "+o.strictBind),this.input=String(w),this.containsEsc=!1,_?(this.pos=_,this.lineStart=this.input.lastIndexOf(`
`,_-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(De).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=D.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=E.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&E.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ut),this.regexpState=null},Xr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};tr.prototype.parse=function(){var E=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(E)},Xr.inFunction.get=function(){return(this.currentVarScope().flags&Qt)>0},Xr.inGenerator.get=function(){return(this.currentVarScope().flags&Pe)>0},Xr.inAsync.get=function(){return(this.currentVarScope().flags&tt)>0},Xr.allowSuper.get=function(){return(this.currentThisScope().flags&et)>0},Xr.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Ge)>0},Xr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},tr.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Qt)>0},tr.extend=function(){for(var E=[],w=arguments.length;w--;)E[w]=arguments[w];for(var _=this,H=0;H<E.length;H++)_=E[H](_);return _},tr.parse=function(E,w){return new this(w,E).parse()},tr.parseExpressionAt=function(E,w,_){var H=new this(_,E,w);return H.nextToken(),H.parseExpression()},tr.tokenizer=function(E,w){return new this(w,E)},Object.defineProperties(tr.prototype,Xr);var rr=tr.prototype,bn=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;rr.strictDirective=function(c){for(;;){W.lastIndex=c,c+=W.exec(this.input)[0].length;var E=bn.exec(this.input.slice(c));if(!E)return!1;if((E[1]||E[2])==="use strict"){W.lastIndex=c+E[0].length;var w=W.exec(this.input),_=w.index+w[0].length,H=this.input.charAt(_);return H===";"||H==="}"||De.test(w[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(H)||H==="!"&&this.input.charAt(_+1)==="=")}c+=E[0].length,W.lastIndex=c,c+=W.exec(this.input)[0].length,this.input[c]===";"&&c++}},rr.eat=function(c){return this.type===c?(this.next(),!0):!1},rr.isContextual=function(c){return this.type===D.name&&this.value===c&&!this.containsEsc},rr.eatContextual=function(c){return this.isContextual(c)?(this.next(),!0):!1},rr.expectContextual=function(c){this.eatContextual(c)||this.unexpected()},rr.canInsertSemicolon=function(){return this.type===D.eof||this.type===D.braceR||De.test(this.input.slice(this.lastTokEnd,this.start))},rr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},rr.semicolon=function(){!this.eat(D.semi)&&!this.insertSemicolon()&&this.unexpected()},rr.afterTrailingComma=function(c,E){if(this.type===c)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),E||this.next(),!0},rr.expect=function(c){this.eat(c)||this.unexpected()},rr.unexpected=function(c){this.raise(c!=null?c:this.start,"Unexpected token")};function ue(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}rr.checkPatternErrors=function(c,E){if(!!c){c.trailingComma>-1&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element");var w=E?c.parenthesizedAssign:c.parenthesizedBind;w>-1&&this.raiseRecoverable(w,"Parenthesized pattern")}},rr.checkExpressionErrors=function(c,E){if(!c)return!1;var w=c.shorthandAssign,_=c.doubleProto;if(!E)return w>=0||_>=0;w>=0&&this.raise(w,"Shorthand property assignments are valid only in destructuring patterns"),_>=0&&this.raiseRecoverable(_,"Redefinition of __proto__ property")},rr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},rr.isSimpleAssignTarget=function(c){return c.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(c.expression):c.type==="Identifier"||c.type==="MemberExpression"};var tn=tr.prototype;tn.parseTopLevel=function(c){var E={};for(c.body||(c.body=[]);this.type!==D.eof;){var w=this.parseStatement(null,!0,E);c.body.push(w)}if(this.inModule)for(var _=0,H=Object.keys(this.undefinedExports);_<H.length;_+=1){var Se=H[_];this.raiseRecoverable(this.undefinedExports[Se].start,"Export '"+Se+"' is not defined")}return this.adaptDirectivePrologue(c.body),this.next(),c.sourceType=this.options.sourceType,this.finishNode(c,"Program")};var Fn={kind:"loop"},Fi={kind:"switch"};tn.isLet=function(c){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;W.lastIndex=this.pos;var E=W.exec(this.input),w=this.pos+E[0].length,_=this.input.charCodeAt(w);if(_===91)return!0;if(c)return!1;if(_===123)return!0;if(G(_,!0)){for(var H=w+1;ee(this.input.charCodeAt(H),!0);)++H;var Se=this.input.slice(w,H);if(!p.test(Se))return!0}return!1},tn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;W.lastIndex=this.pos;var c=W.exec(this.input),E=this.pos+c[0].length;return!De.test(this.input.slice(this.pos,E))&&this.input.slice(E,E+8)==="function"&&(E+8===this.input.length||!ee(this.input.charAt(E+8)))},tn.parseStatement=function(c,E,w){var _=this.type,H=this.startNode(),Se;switch(this.isLet(c)&&(_=D._var,Se="let"),_){case D._break:case D._continue:return this.parseBreakContinueStatement(H,_.keyword);case D._debugger:return this.parseDebuggerStatement(H);case D._do:return this.parseDoStatement(H);case D._for:return this.parseForStatement(H);case D._function:return c&&(this.strict||c!=="if"&&c!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(H,!1,!c);case D._class:return c&&this.unexpected(),this.parseClass(H,!0);case D._if:return this.parseIfStatement(H);case D._return:return this.parseReturnStatement(H);case D._switch:return this.parseSwitchStatement(H);case D._throw:return this.parseThrowStatement(H);case D._try:return this.parseTryStatement(H);case D._const:case D._var:return Se=Se||this.value,c&&Se!=="var"&&this.unexpected(),this.parseVarStatement(H,Se);case D._while:return this.parseWhileStatement(H);case D._with:return this.parseWithStatement(H);case D.braceL:return this.parseBlock(!0,H);case D.semi:return this.parseEmptyStatement(H);case D._export:case D._import:if(this.options.ecmaVersion>10&&_===D._import){W.lastIndex=this.pos;var We=W.exec(this.input),ht=this.pos+We[0].length,pt=this.input.charCodeAt(ht);if(pt===40||pt===46)return this.parseExpressionStatement(H,this.parseExpression())}return this.options.allowImportExportEverywhere||(E||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),_===D._import?this.parseImport(H):this.parseExport(H,w);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(H,!0,!c);var Kt=this.value,ir=this.parseExpression();return _===D.name&&ir.type==="Identifier"&&this.eat(D.colon)?this.parseLabeledStatement(H,Kt,ir,c):this.parseExpressionStatement(H,ir)}},tn.parseBreakContinueStatement=function(c,E){var w=E==="break";this.next(),this.eat(D.semi)||this.insertSemicolon()?c.label=null:this.type!==D.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var _=0;_<this.labels.length;++_){var H=this.labels[_];if((c.label==null||H.name===c.label.name)&&(H.kind!=null&&(w||H.kind==="loop")||c.label&&w))break}return _===this.labels.length&&this.raise(c.start,"Unsyntactic "+E),this.finishNode(c,w?"BreakStatement":"ContinueStatement")},tn.parseDebuggerStatement=function(c){return this.next(),this.semicolon(),this.finishNode(c,"DebuggerStatement")},tn.parseDoStatement=function(c){return this.next(),this.labels.push(Fn),c.body=this.parseStatement("do"),this.labels.pop(),this.expect(D._while),c.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(D.semi):this.semicolon(),this.finishNode(c,"DoWhileStatement")},tn.parseForStatement=function(c){this.next();var E=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Fn),this.enterScope(0),this.expect(D.parenL),this.type===D.semi)return E>-1&&this.unexpected(E),this.parseFor(c,null);var w=this.isLet();if(this.type===D._var||this.type===D._const||w){var _=this.startNode(),H=w?"let":this.value;return this.next(),this.parseVar(_,!0,H),this.finishNode(_,"VariableDeclaration"),(this.type===D._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&_.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===D._in?E>-1&&this.unexpected(E):c.await=E>-1),this.parseForIn(c,_)):(E>-1&&this.unexpected(E),this.parseFor(c,_))}var Se=new ue,We=this.parseExpression(!0,Se);return this.type===D._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===D._in?E>-1&&this.unexpected(E):c.await=E>-1),this.toAssignable(We,!1,Se),this.checkLVal(We),this.parseForIn(c,We)):(this.checkExpressionErrors(Se,!0),E>-1&&this.unexpected(E),this.parseFor(c,We))},tn.parseFunctionStatement=function(c,E,w){return this.next(),this.parseFunction(c,ve|(w?0:Ye),!1,E)},tn.parseIfStatement=function(c){return this.next(),c.test=this.parseParenExpression(),c.consequent=this.parseStatement("if"),c.alternate=this.eat(D._else)?this.parseStatement("if"):null,this.finishNode(c,"IfStatement")},tn.parseReturnStatement=function(c){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(D.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon()),this.finishNode(c,"ReturnStatement")},tn.parseSwitchStatement=function(c){this.next(),c.discriminant=this.parseParenExpression(),c.cases=[],this.expect(D.braceL),this.labels.push(Fi),this.enterScope(0);for(var E,w=!1;this.type!==D.braceR;)if(this.type===D._case||this.type===D._default){var _=this.type===D._case;E&&this.finishNode(E,"SwitchCase"),c.cases.push(E=this.startNode()),E.consequent=[],this.next(),_?E.test=this.parseExpression():(w&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),w=!0,E.test=null),this.expect(D.colon)}else E||this.unexpected(),E.consequent.push(this.parseStatement(null));return this.exitScope(),E&&this.finishNode(E,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(c,"SwitchStatement")},tn.parseThrowStatement=function(c){return this.next(),De.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),c.argument=this.parseExpression(),this.semicolon(),this.finishNode(c,"ThrowStatement")};var ki=[];tn.parseTryStatement=function(c){if(this.next(),c.block=this.parseBlock(),c.handler=null,this.type===D._catch){var E=this.startNode();if(this.next(),this.eat(D.parenL)){E.param=this.parseBindingAtom();var w=E.param.type==="Identifier";this.enterScope(w?ke:0),this.checkLVal(E.param,w?qt:ge),this.expect(D.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),E.param=null,this.enterScope(0);E.body=this.parseBlock(!1),this.exitScope(),c.handler=this.finishNode(E,"CatchClause")}return c.finalizer=this.eat(D._finally)?this.parseBlock():null,!c.handler&&!c.finalizer&&this.raise(c.start,"Missing catch or finally clause"),this.finishNode(c,"TryStatement")},tn.parseVarStatement=function(c,E){return this.next(),this.parseVar(c,!1,E),this.semicolon(),this.finishNode(c,"VariableDeclaration")},tn.parseWhileStatement=function(c){return this.next(),c.test=this.parseParenExpression(),this.labels.push(Fn),c.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(c,"WhileStatement")},tn.parseWithStatement=function(c){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),c.object=this.parseParenExpression(),c.body=this.parseStatement("with"),this.finishNode(c,"WithStatement")},tn.parseEmptyStatement=function(c){return this.next(),this.finishNode(c,"EmptyStatement")},tn.parseLabeledStatement=function(c,E,w,_){for(var H=0,Se=this.labels;H<Se.length;H+=1){var We=Se[H];We.name===E&&this.raise(w.start,"Label '"+E+"' is already declared")}for(var ht=this.type.isLoop?"loop":this.type===D._switch?"switch":null,pt=this.labels.length-1;pt>=0;pt--){var Kt=this.labels[pt];if(Kt.statementStart===c.start)Kt.statementStart=this.start,Kt.kind=ht;else break}return this.labels.push({name:E,kind:ht,statementStart:this.start}),c.body=this.parseStatement(_?_.indexOf("label")===-1?_+"label":_:"label"),this.labels.pop(),c.label=w,this.finishNode(c,"LabeledStatement")},tn.parseExpressionStatement=function(c,E){return c.expression=E,this.semicolon(),this.finishNode(c,"ExpressionStatement")},tn.parseBlock=function(c,E,w){for(c===void 0&&(c=!0),E===void 0&&(E=this.startNode()),E.body=[],this.expect(D.braceL),c&&this.enterScope(0);this.type!==D.braceR;){var _=this.parseStatement(null);E.body.push(_)}return w&&(this.strict=!1),this.next(),c&&this.exitScope(),this.finishNode(E,"BlockStatement")},tn.parseFor=function(c,E){return c.init=E,this.expect(D.semi),c.test=this.type===D.semi?null:this.parseExpression(),this.expect(D.semi),c.update=this.type===D.parenR?null:this.parseExpression(),this.expect(D.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,"ForStatement")},tn.parseForIn=function(c,E){var w=this.type===D._in;return this.next(),E.type==="VariableDeclaration"&&E.declarations[0].init!=null&&(!w||this.options.ecmaVersion<8||this.strict||E.kind!=="var"||E.declarations[0].id.type!=="Identifier")?this.raise(E.start,(w?"for-in":"for-of")+" loop variable declaration may not have an initializer"):E.type==="AssignmentPattern"&&this.raise(E.start,"Invalid left-hand side in for-loop"),c.left=E,c.right=w?this.parseExpression():this.parseMaybeAssign(),this.expect(D.parenR),c.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(c,w?"ForInStatement":"ForOfStatement")},tn.parseVar=function(c,E,w){for(c.declarations=[],c.kind=w;;){var _=this.startNode();if(this.parseVarId(_,w),this.eat(D.eq)?_.init=this.parseMaybeAssign(E):w==="const"&&!(this.type===D._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():_.id.type!=="Identifier"&&!(E&&(this.type===D._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):_.init=null,c.declarations.push(this.finishNode(_,"VariableDeclarator")),!this.eat(D.comma))break}return c},tn.parseVarId=function(c,E){c.id=this.parseBindingAtom(),this.checkLVal(c.id,E==="var"?gt:ge,!1)};var ve=1,Ye=2,vt=4;tn.parseFunction=function(c,E,w,_){this.initFunction(c),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!_)&&(this.type===D.star&&E&Ye&&this.unexpected(),c.generator=this.eat(D.star)),this.options.ecmaVersion>=8&&(c.async=!!_),E&ve&&(c.id=E&vt&&this.type!==D.name?null:this.parseIdent(),c.id&&!(E&Ye)&&this.checkLVal(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?gt:ge:Lt));var H=this.yieldPos,Se=this.awaitPos,We=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ot(c.async,c.generator)),E&ve||(c.id=this.type===D.name?this.parseIdent():null),this.parseFunctionParams(c),this.parseFunctionBody(c,w,!1),this.yieldPos=H,this.awaitPos=Se,this.awaitIdentPos=We,this.finishNode(c,E&ve?"FunctionDeclaration":"FunctionExpression")},tn.parseFunctionParams=function(c){this.expect(D.parenL),c.params=this.parseBindingList(D.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},tn.parseClass=function(c,E){this.next();var w=this.strict;this.strict=!0,this.parseClassId(c,E),this.parseClassSuper(c);var _=this.startNode(),H=!1;for(_.body=[],this.expect(D.braceL);this.type!==D.braceR;){var Se=this.parseClassElement(c.superClass!==null);Se&&(_.body.push(Se),Se.type==="MethodDefinition"&&Se.kind==="constructor"&&(H&&this.raise(Se.start,"Duplicate constructor in the same class"),H=!0))}return this.strict=w,this.next(),c.body=this.finishNode(_,"ClassBody"),this.finishNode(c,E?"ClassDeclaration":"ClassExpression")},tn.parseClassElement=function(c){var E=this;if(this.eat(D.semi))return null;var w=this.startNode(),_=function(pt,Kt){Kt===void 0&&(Kt=!1);var ir=E.start,qr=E.startLoc;return E.eatContextual(pt)?E.type!==D.parenL&&(!Kt||!E.canInsertSemicolon())?!0:(w.key&&E.unexpected(),w.computed=!1,w.key=E.startNodeAt(ir,qr),w.key.name=pt,E.finishNode(w.key,"Identifier"),!1):!1};w.kind="method",w.static=_("static");var H=this.eat(D.star),Se=!1;H||(this.options.ecmaVersion>=8&&_("async",!0)?(Se=!0,H=this.options.ecmaVersion>=9&&this.eat(D.star)):_("get")?w.kind="get":_("set")&&(w.kind="set")),w.key||this.parsePropertyName(w);var We=w.key,ht=!1;return!w.computed&&!w.static&&(We.type==="Identifier"&&We.name==="constructor"||We.type==="Literal"&&We.value==="constructor")?(w.kind!=="method"&&this.raise(We.start,"Constructor can't have get/set modifier"),H&&this.raise(We.start,"Constructor can't be a generator"),Se&&this.raise(We.start,"Constructor can't be an async method"),w.kind="constructor",ht=c):w.static&&We.type==="Identifier"&&We.name==="prototype"&&this.raise(We.start,"Classes may not have a static property named prototype"),this.parseClassMethod(w,H,Se,ht),w.kind==="get"&&w.value.params.length!==0&&this.raiseRecoverable(w.value.start,"getter should have no params"),w.kind==="set"&&w.value.params.length!==1&&this.raiseRecoverable(w.value.start,"setter should have exactly one param"),w.kind==="set"&&w.value.params[0].type==="RestElement"&&this.raiseRecoverable(w.value.params[0].start,"Setter cannot use rest params"),w},tn.parseClassMethod=function(c,E,w,_){return c.value=this.parseMethod(E,w,_),this.finishNode(c,"MethodDefinition")},tn.parseClassId=function(c,E){this.type===D.name?(c.id=this.parseIdent(),E&&this.checkLVal(c.id,ge,!1)):(E===!0&&this.unexpected(),c.id=null)},tn.parseClassSuper=function(c){c.superClass=this.eat(D._extends)?this.parseExprSubscripts():null},tn.parseExport=function(c,E){if(this.next(),this.eat(D.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(E,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==D.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(D._default)){this.checkExport(E,"default",this.lastTokStart);var w;if(this.type===D._function||(w=this.isAsyncFunction())){var _=this.startNode();this.next(),w&&this.next(),c.declaration=this.parseFunction(_,ve|vt,!1,w)}else if(this.type===D._class){var H=this.startNode();c.declaration=this.parseClass(H,"nullableID")}else c.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),c.declaration.type==="VariableDeclaration"?this.checkVariableExport(E,c.declaration.declarations):this.checkExport(E,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{if(c.declaration=null,c.specifiers=this.parseExportSpecifiers(E),this.eatContextual("from"))this.type!==D.string&&this.unexpected(),c.source=this.parseExprAtom();else{for(var Se=0,We=c.specifiers;Se<We.length;Se+=1){var ht=We[Se];this.checkUnreserved(ht.local),this.checkLocalExport(ht.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")},tn.checkExport=function(c,E,w){!c||(rt(c,E)&&this.raiseRecoverable(w,"Duplicate export '"+E+"'"),c[E]=!0)},tn.checkPatternExport=function(c,E){var w=E.type;if(w==="Identifier")this.checkExport(c,E.name,E.start);else if(w==="ObjectPattern")for(var _=0,H=E.properties;_<H.length;_+=1){var Se=H[_];this.checkPatternExport(c,Se)}else if(w==="ArrayPattern")for(var We=0,ht=E.elements;We<ht.length;We+=1){var pt=ht[We];pt&&this.checkPatternExport(c,pt)}else w==="Property"?this.checkPatternExport(c,E.value):w==="AssignmentPattern"?this.checkPatternExport(c,E.left):w==="RestElement"?this.checkPatternExport(c,E.argument):w==="ParenthesizedExpression"&&this.checkPatternExport(c,E.expression)},tn.checkVariableExport=function(c,E){if(!!c)for(var w=0,_=E;w<_.length;w+=1){var H=_[w];this.checkPatternExport(c,H.id)}},tn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},tn.parseExportSpecifiers=function(c){var E=[],w=!0;for(this.expect(D.braceL);!this.eat(D.braceR);){if(w)w=!1;else if(this.expect(D.comma),this.afterTrailingComma(D.braceR))break;var _=this.startNode();_.local=this.parseIdent(!0),_.exported=this.eatContextual("as")?this.parseIdent(!0):_.local,this.checkExport(c,_.exported.name,_.exported.start),E.push(this.finishNode(_,"ExportSpecifier"))}return E},tn.parseImport=function(c){return this.next(),this.type===D.string?(c.specifiers=ki,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===D.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(c,"ImportDeclaration")},tn.parseImportSpecifiers=function(){var c=[],E=!0;if(this.type===D.name){var w=this.startNode();if(w.local=this.parseIdent(),this.checkLVal(w.local,ge),c.push(this.finishNode(w,"ImportDefaultSpecifier")),!this.eat(D.comma))return c}if(this.type===D.star){var _=this.startNode();return this.next(),this.expectContextual("as"),_.local=this.parseIdent(),this.checkLVal(_.local,ge),c.push(this.finishNode(_,"ImportNamespaceSpecifier")),c}for(this.expect(D.braceL);!this.eat(D.braceR);){if(E)E=!1;else if(this.expect(D.comma),this.afterTrailingComma(D.braceR))break;var H=this.startNode();H.imported=this.parseIdent(!0),this.eatContextual("as")?H.local=this.parseIdent():(this.checkUnreserved(H.imported),H.local=H.imported),this.checkLVal(H.local,ge),c.push(this.finishNode(H,"ImportSpecifier"))}return c},tn.adaptDirectivePrologue=function(c){for(var E=0;E<c.length&&this.isDirectiveCandidate(c[E]);++E)c[E].directive=c[E].expression.raw.slice(1,-1)},tn.isDirectiveCandidate=function(c){return c.type==="ExpressionStatement"&&c.expression.type==="Literal"&&typeof c.expression.value=="string"&&(this.input[c.start]==='"'||this.input[c.start]==="'")};var wt=tr.prototype;wt.toAssignable=function(c,E,w){if(this.options.ecmaVersion>=6&&c)switch(c.type){case"Identifier":this.inAsync&&c.name==="await"&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":c.type="ObjectPattern",w&&this.checkPatternErrors(w,!0);for(var _=0,H=c.properties;_<H.length;_+=1){var Se=H[_];this.toAssignable(Se,E),Se.type==="RestElement"&&(Se.argument.type==="ArrayPattern"||Se.argument.type==="ObjectPattern")&&this.raise(Se.argument.start,"Unexpected token")}break;case"Property":c.kind!=="init"&&this.raise(c.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(c.value,E);break;case"ArrayExpression":c.type="ArrayPattern",w&&this.checkPatternErrors(w,!0),this.toAssignableList(c.elements,E);break;case"SpreadElement":c.type="RestElement",this.toAssignable(c.argument,E),c.argument.type==="AssignmentPattern"&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":c.operator!=="="&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value."),c.type="AssignmentPattern",delete c.operator,this.toAssignable(c.left,E);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(c.expression,E,w);break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!E)break;default:this.raise(c.start,"Assigning to rvalue")}else w&&this.checkPatternErrors(w,!0);return c},wt.toAssignableList=function(c,E){for(var w=c.length,_=0;_<w;_++){var H=c[_];H&&this.toAssignable(H,E)}if(w){var Se=c[w-1];this.options.ecmaVersion===6&&E&&Se&&Se.type==="RestElement"&&Se.argument.type!=="Identifier"&&this.unexpected(Se.argument.start)}return c},wt.parseSpread=function(c){var E=this.startNode();return this.next(),E.argument=this.parseMaybeAssign(!1,c),this.finishNode(E,"SpreadElement")},wt.parseRestBinding=function(){var c=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==D.name&&this.unexpected(),c.argument=this.parseBindingAtom(),this.finishNode(c,"RestElement")},wt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case D.bracketL:var c=this.startNode();return this.next(),c.elements=this.parseBindingList(D.bracketR,!0,!0),this.finishNode(c,"ArrayPattern");case D.braceL:return this.parseObj(!0)}return this.parseIdent()},wt.parseBindingList=function(c,E,w){for(var _=[],H=!0;!this.eat(c);)if(H?H=!1:this.expect(D.comma),E&&this.type===D.comma)_.push(null);else{if(w&&this.afterTrailingComma(c))break;if(this.type===D.ellipsis){var Se=this.parseRestBinding();this.parseBindingListItem(Se),_.push(Se),this.type===D.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(c);break}else{var We=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(We),_.push(We)}}return _},wt.parseBindingListItem=function(c){return c},wt.parseMaybeDefault=function(c,E,w){if(w=w||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(D.eq))return w;var _=this.startNodeAt(c,E);return _.left=w,_.right=this.parseMaybeAssign(),this.finishNode(_,"AssignmentPattern")},wt.checkLVal=function(c,E,w){switch(E===void 0&&(E=Bt),c.type){case"Identifier":E===ge&&c.name==="let"&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(E?"Binding ":"Assigning to ")+c.name+" in strict mode"),w&&(rt(w,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),w[c.name]=!0),E!==Bt&&E!==xr&&this.declareName(c.name,E,c.start);break;case"ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":E&&this.raiseRecoverable(c.start,"Binding member expression");break;case"ObjectPattern":for(var _=0,H=c.properties;_<H.length;_+=1){var Se=H[_];this.checkLVal(Se,E,w)}break;case"Property":this.checkLVal(c.value,E,w);break;case"ArrayPattern":for(var We=0,ht=c.elements;We<ht.length;We+=1){var pt=ht[We];pt&&this.checkLVal(pt,E,w)}break;case"AssignmentPattern":this.checkLVal(c.left,E,w);break;case"RestElement":this.checkLVal(c.argument,E,w);break;case"ParenthesizedExpression":this.checkLVal(c.expression,E,w);break;default:this.raise(c.start,(E?"Binding":"Assigning to")+" rvalue")}};var me=tr.prototype;me.checkPropClash=function(c,E,w){if(!(this.options.ecmaVersion>=9&&c.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(c.computed||c.method||c.shorthand))){var _=c.key,H;switch(_.type){case"Identifier":H=_.name;break;case"Literal":H=String(_.value);break;default:return}var Se=c.kind;if(this.options.ecmaVersion>=6){H==="__proto__"&&Se==="init"&&(E.proto&&(w?w.doubleProto<0&&(w.doubleProto=_.start):this.raiseRecoverable(_.start,"Redefinition of __proto__ property")),E.proto=!0);return}H="$"+H;var We=E[H];if(We){var ht;Se==="init"?ht=this.strict&&We.init||We.get||We.set:ht=We.init||We[Se],ht&&this.raiseRecoverable(_.start,"Redefinition of property")}else We=E[H]={init:!1,get:!1,set:!1};We[Se]=!0}},me.parseExpression=function(c,E){var w=this.start,_=this.startLoc,H=this.parseMaybeAssign(c,E);if(this.type===D.comma){var Se=this.startNodeAt(w,_);for(Se.expressions=[H];this.eat(D.comma);)Se.expressions.push(this.parseMaybeAssign(c,E));return this.finishNode(Se,"SequenceExpression")}return H},me.parseMaybeAssign=function(c,E,w){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var _=!1,H=-1,Se=-1;E?(H=E.parenthesizedAssign,Se=E.trailingComma,E.parenthesizedAssign=E.trailingComma=-1):(E=new ue,_=!0);var We=this.start,ht=this.startLoc;(this.type===D.parenL||this.type===D.name)&&(this.potentialArrowAt=this.start);var pt=this.parseMaybeConditional(c,E);if(w&&(pt=w.call(this,pt,We,ht)),this.type.isAssign){var Kt=this.startNodeAt(We,ht);return Kt.operator=this.value,Kt.left=this.type===D.eq?this.toAssignable(pt,!1,E):pt,_||(E.parenthesizedAssign=E.trailingComma=E.doubleProto=-1),E.shorthandAssign>=Kt.left.start&&(E.shorthandAssign=-1),this.checkLVal(pt),this.next(),Kt.right=this.parseMaybeAssign(c),this.finishNode(Kt,"AssignmentExpression")}else _&&this.checkExpressionErrors(E,!0);return H>-1&&(E.parenthesizedAssign=H),Se>-1&&(E.trailingComma=Se),pt},me.parseMaybeConditional=function(c,E){var w=this.start,_=this.startLoc,H=this.parseExprOps(c,E);if(this.checkExpressionErrors(E))return H;if(this.eat(D.question)){var Se=this.startNodeAt(w,_);return Se.test=H,Se.consequent=this.parseMaybeAssign(),this.expect(D.colon),Se.alternate=this.parseMaybeAssign(c),this.finishNode(Se,"ConditionalExpression")}return H},me.parseExprOps=function(c,E){var w=this.start,_=this.startLoc,H=this.parseMaybeUnary(E,!1);return this.checkExpressionErrors(E)||H.start===w&&H.type==="ArrowFunctionExpression"?H:this.parseExprOp(H,w,_,-1,c)},me.parseExprOp=function(c,E,w,_,H){var Se=this.type.binop;if(Se!=null&&(!H||this.type!==D._in)&&Se>_){var We=this.type===D.logicalOR||this.type===D.logicalAND,ht=this.type===D.coalesce;ht&&(Se=D.logicalAND.binop);var pt=this.value;this.next();var Kt=this.start,ir=this.startLoc,qr=this.parseExprOp(this.parseMaybeUnary(null,!1),Kt,ir,Se,H),ln=this.buildBinary(E,w,c,qr,pt,We||ht);return(We&&this.type===D.coalesce||ht&&(this.type===D.logicalOR||this.type===D.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ln,E,w,_,H)}return c},me.buildBinary=function(c,E,w,_,H,Se){var We=this.startNodeAt(c,E);return We.left=w,We.operator=H,We.right=_,this.finishNode(We,Se?"LogicalExpression":"BinaryExpression")},me.parseMaybeUnary=function(c,E){var w=this.start,_=this.startLoc,H;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))H=this.parseAwait(),E=!0;else if(this.type.prefix){var Se=this.startNode(),We=this.type===D.incDec;Se.operator=this.value,Se.prefix=!0,this.next(),Se.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(c,!0),We?this.checkLVal(Se.argument):this.strict&&Se.operator==="delete"&&Se.argument.type==="Identifier"?this.raiseRecoverable(Se.start,"Deleting local variable in strict mode"):E=!0,H=this.finishNode(Se,We?"UpdateExpression":"UnaryExpression")}else{if(H=this.parseExprSubscripts(c),this.checkExpressionErrors(c))return H;for(;this.type.postfix&&!this.canInsertSemicolon();){var ht=this.startNodeAt(w,_);ht.operator=this.value,ht.prefix=!1,ht.argument=H,this.checkLVal(H),this.next(),H=this.finishNode(ht,"UpdateExpression")}}return!E&&this.eat(D.starstar)?this.buildBinary(w,_,H,this.parseMaybeUnary(null,!1),"**",!1):H},me.parseExprSubscripts=function(c){var E=this.start,w=this.startLoc,_=this.parseExprAtom(c);if(_.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return _;var H=this.parseSubscripts(_,E,w);return c&&H.type==="MemberExpression"&&(c.parenthesizedAssign>=H.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=H.start&&(c.parenthesizedBind=-1)),H},me.parseSubscripts=function(c,E,w,_){for(var H=this.options.ecmaVersion>=8&&c.type==="Identifier"&&c.name==="async"&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&c.end-c.start==5&&this.potentialArrowAt===c.start,Se=!1;;){var We=this.parseSubscript(c,E,w,_,H,Se);if(We.optional&&(Se=!0),We===c||We.type==="ArrowFunctionExpression"){if(Se){var ht=this.startNodeAt(E,w);ht.expression=We,We=this.finishNode(ht,"ChainExpression")}return We}c=We}},me.parseSubscript=function(c,E,w,_,H,Se){var We=this.options.ecmaVersion>=11,ht=We&&this.eat(D.questionDot);_&&ht&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var pt=this.eat(D.bracketL);if(pt||ht&&this.type!==D.parenL&&this.type!==D.backQuote||this.eat(D.dot)){var Kt=this.startNodeAt(E,w);Kt.object=c,Kt.property=pt?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),Kt.computed=!!pt,pt&&this.expect(D.bracketR),We&&(Kt.optional=ht),c=this.finishNode(Kt,"MemberExpression")}else if(!_&&this.eat(D.parenL)){var ir=new ue,qr=this.yieldPos,ln=this.awaitPos,Mn=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var ui=this.parseExprList(D.parenR,this.options.ecmaVersion>=8,!1,ir);if(H&&!ht&&!this.canInsertSemicolon()&&this.eat(D.arrow))return this.checkPatternErrors(ir,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=qr,this.awaitPos=ln,this.awaitIdentPos=Mn,this.parseArrowExpression(this.startNodeAt(E,w),ui,!0);this.checkExpressionErrors(ir,!0),this.yieldPos=qr||this.yieldPos,this.awaitPos=ln||this.awaitPos,this.awaitIdentPos=Mn||this.awaitIdentPos;var mi=this.startNodeAt(E,w);mi.callee=c,mi.arguments=ui,We&&(mi.optional=ht),c=this.finishNode(mi,"CallExpression")}else if(this.type===D.backQuote){(ht||Se)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ri=this.startNodeAt(E,w);Ri.tag=c,Ri.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(Ri,"TaggedTemplateExpression")}return c},me.parseExprAtom=function(c){this.type===D.slash&&this.readRegexp();var E,w=this.potentialArrowAt===this.start;switch(this.type){case D._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),E=this.startNode(),this.next(),this.type===D.parenL&&!this.allowDirectSuper&&this.raise(E.start,"super() call outside constructor of a subclass"),this.type!==D.dot&&this.type!==D.bracketL&&this.type!==D.parenL&&this.unexpected(),this.finishNode(E,"Super");case D._this:return E=this.startNode(),this.next(),this.finishNode(E,"ThisExpression");case D.name:var _=this.start,H=this.startLoc,Se=this.containsEsc,We=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Se&&We.name==="async"&&!this.canInsertSemicolon()&&this.eat(D._function))return this.parseFunction(this.startNodeAt(_,H),0,!1,!0);if(w&&!this.canInsertSemicolon()){if(this.eat(D.arrow))return this.parseArrowExpression(this.startNodeAt(_,H),[We],!1);if(this.options.ecmaVersion>=8&&We.name==="async"&&this.type===D.name&&!Se)return We=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(D.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(_,H),[We],!0)}return We;case D.regexp:var ht=this.value;return E=this.parseLiteral(ht.value),E.regex={pattern:ht.pattern,flags:ht.flags},E;case D.num:case D.string:return this.parseLiteral(this.value);case D._null:case D._true:case D._false:return E=this.startNode(),E.value=this.type===D._null?null:this.type===D._true,E.raw=this.type.keyword,this.next(),this.finishNode(E,"Literal");case D.parenL:var pt=this.start,Kt=this.parseParenAndDistinguishExpression(w);return c&&(c.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Kt)&&(c.parenthesizedAssign=pt),c.parenthesizedBind<0&&(c.parenthesizedBind=pt)),Kt;case D.bracketL:return E=this.startNode(),this.next(),E.elements=this.parseExprList(D.bracketR,!0,!0,c),this.finishNode(E,"ArrayExpression");case D.braceL:return this.parseObj(!1,c);case D._function:return E=this.startNode(),this.next(),this.parseFunction(E,0);case D._class:return this.parseClass(this.startNode(),!1);case D._new:return this.parseNew();case D.backQuote:return this.parseTemplate();case D._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},me.parseExprImport=function(){var c=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var E=this.parseIdent(!0);switch(this.type){case D.parenL:return this.parseDynamicImport(c);case D.dot:return c.meta=E,this.parseImportMeta(c);default:this.unexpected()}},me.parseDynamicImport=function(c){if(this.next(),c.source=this.parseMaybeAssign(),!this.eat(D.parenR)){var E=this.start;this.eat(D.comma)&&this.eat(D.parenR)?this.raiseRecoverable(E,"Trailing comma is not allowed in import()"):this.unexpected(E)}return this.finishNode(c,"ImportExpression")},me.parseImportMeta=function(c){this.next();var E=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="meta"&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'"),E&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module"),this.finishNode(c,"MetaProperty")},me.parseLiteral=function(c){var E=this.startNode();return E.value=c,E.raw=this.input.slice(this.start,this.end),E.raw.charCodeAt(E.raw.length-1)===110&&(E.bigint=E.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(E,"Literal")},me.parseParenExpression=function(){this.expect(D.parenL);var c=this.parseExpression();return this.expect(D.parenR),c},me.parseParenAndDistinguishExpression=function(c){var E=this.start,w=this.startLoc,_,H=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Se=this.start,We=this.startLoc,ht=[],pt=!0,Kt=!1,ir=new ue,qr=this.yieldPos,ln=this.awaitPos,Mn;for(this.yieldPos=0,this.awaitPos=0;this.type!==D.parenR;)if(pt?pt=!1:this.expect(D.comma),H&&this.afterTrailingComma(D.parenR,!0)){Kt=!0;break}else if(this.type===D.ellipsis){Mn=this.start,ht.push(this.parseParenItem(this.parseRestBinding())),this.type===D.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else ht.push(this.parseMaybeAssign(!1,ir,this.parseParenItem));var ui=this.start,mi=this.startLoc;if(this.expect(D.parenR),c&&!this.canInsertSemicolon()&&this.eat(D.arrow))return this.checkPatternErrors(ir,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=qr,this.awaitPos=ln,this.parseParenArrowList(E,w,ht);(!ht.length||Kt)&&this.unexpected(this.lastTokStart),Mn&&this.unexpected(Mn),this.checkExpressionErrors(ir,!0),this.yieldPos=qr||this.yieldPos,this.awaitPos=ln||this.awaitPos,ht.length>1?(_=this.startNodeAt(Se,We),_.expressions=ht,this.finishNodeAt(_,"SequenceExpression",ui,mi)):_=ht[0]}else _=this.parseParenExpression();if(this.options.preserveParens){var Ri=this.startNodeAt(E,w);return Ri.expression=_,this.finishNode(Ri,"ParenthesizedExpression")}else return _},me.parseParenItem=function(c){return c},me.parseParenArrowList=function(c,E,w){return this.parseArrowExpression(this.startNodeAt(c,E),w)};var Pn=[];me.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),E=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(D.dot)){c.meta=E;var w=this.containsEsc;return c.property=this.parseIdent(!0),c.property.name!=="target"&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),w&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty")}var _=this.start,H=this.startLoc,Se=this.type===D._import;return c.callee=this.parseSubscripts(this.parseExprAtom(),_,H,!0),Se&&c.callee.type==="ImportExpression"&&this.raise(_,"Cannot use new with import()"),this.eat(D.parenL)?c.arguments=this.parseExprList(D.parenR,this.options.ecmaVersion>=8,!1):c.arguments=Pn,this.finishNode(c,"NewExpression")},me.parseTemplateElement=function(c){var E=c.isTagged,w=this.startNode();return this.type===D.invalidTemplate?(E||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),w.value={raw:this.value,cooked:null}):w.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),w.tail=this.type===D.backQuote,this.finishNode(w,"TemplateElement")},me.parseTemplate=function(c){c===void 0&&(c={});var E=c.isTagged;E===void 0&&(E=!1);var w=this.startNode();this.next(),w.expressions=[];var _=this.parseTemplateElement({isTagged:E});for(w.quasis=[_];!_.tail;)this.type===D.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(D.dollarBraceL),w.expressions.push(this.parseExpression()),this.expect(D.braceR),w.quasis.push(_=this.parseTemplateElement({isTagged:E}));return this.next(),this.finishNode(w,"TemplateLiteral")},me.isAsyncProp=function(c){return!c.computed&&c.key.type==="Identifier"&&c.key.name==="async"&&(this.type===D.name||this.type===D.num||this.type===D.string||this.type===D.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===D.star)&&!De.test(this.input.slice(this.lastTokEnd,this.start))},me.parseObj=function(c,E){var w=this.startNode(),_=!0,H={};for(w.properties=[],this.next();!this.eat(D.braceR);){if(_)_=!1;else if(this.expect(D.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(D.braceR))break;var Se=this.parseProperty(c,E);c||this.checkPropClash(Se,H,E),w.properties.push(Se)}return this.finishNode(w,c?"ObjectPattern":"ObjectExpression")},me.parseProperty=function(c,E){var w=this.startNode(),_,H,Se,We;if(this.options.ecmaVersion>=9&&this.eat(D.ellipsis))return c?(w.argument=this.parseIdent(!1),this.type===D.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(w,"RestElement")):(this.type===D.parenL&&E&&(E.parenthesizedAssign<0&&(E.parenthesizedAssign=this.start),E.parenthesizedBind<0&&(E.parenthesizedBind=this.start)),w.argument=this.parseMaybeAssign(!1,E),this.type===D.comma&&E&&E.trailingComma<0&&(E.trailingComma=this.start),this.finishNode(w,"SpreadElement"));this.options.ecmaVersion>=6&&(w.method=!1,w.shorthand=!1,(c||E)&&(Se=this.start,We=this.startLoc),c||(_=this.eat(D.star)));var ht=this.containsEsc;return this.parsePropertyName(w),!c&&!ht&&this.options.ecmaVersion>=8&&!_&&this.isAsyncProp(w)?(H=!0,_=this.options.ecmaVersion>=9&&this.eat(D.star),this.parsePropertyName(w,E)):H=!1,this.parsePropertyValue(w,c,_,H,Se,We,E,ht),this.finishNode(w,"Property")},me.parsePropertyValue=function(c,E,w,_,H,Se,We,ht){if((w||_)&&this.type===D.colon&&this.unexpected(),this.eat(D.colon))c.value=E?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,We),c.kind="init";else if(this.options.ecmaVersion>=6&&this.type===D.parenL)E&&this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(w,_);else if(!E&&!ht&&this.options.ecmaVersion>=5&&!c.computed&&c.key.type==="Identifier"&&(c.key.name==="get"||c.key.name==="set")&&this.type!==D.comma&&this.type!==D.braceR&&this.type!==D.eq){(w||_)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1);var pt=c.kind==="get"?0:1;if(c.value.params.length!==pt){var Kt=c.value.start;c.kind==="get"?this.raiseRecoverable(Kt,"getter should have no params"):this.raiseRecoverable(Kt,"setter should have exactly one param")}else c.kind==="set"&&c.value.params[0].type==="RestElement"&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!c.computed&&c.key.type==="Identifier"?((w||_)&&this.unexpected(),this.checkUnreserved(c.key),c.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=H),c.kind="init",E?c.value=this.parseMaybeDefault(H,Se,c.key):this.type===D.eq&&We?(We.shorthandAssign<0&&(We.shorthandAssign=this.start),c.value=this.parseMaybeDefault(H,Se,c.key)):c.value=c.key,c.shorthand=!0):this.unexpected()},me.parsePropertyName=function(c){if(this.options.ecmaVersion>=6){if(this.eat(D.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(D.bracketR),c.key;c.computed=!1}return c.key=this.type===D.num||this.type===D.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},me.initFunction=function(c){c.id=null,this.options.ecmaVersion>=6&&(c.generator=c.expression=!1),this.options.ecmaVersion>=8&&(c.async=!1)},me.parseMethod=function(c,E,w){var _=this.startNode(),H=this.yieldPos,Se=this.awaitPos,We=this.awaitIdentPos;return this.initFunction(_),this.options.ecmaVersion>=6&&(_.generator=c),this.options.ecmaVersion>=8&&(_.async=!!E),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ot(E,_.generator)|et|(w?Ge:0)),this.expect(D.parenL),_.params=this.parseBindingList(D.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(_,!1,!0),this.yieldPos=H,this.awaitPos=Se,this.awaitIdentPos=We,this.finishNode(_,"FunctionExpression")},me.parseArrowExpression=function(c,E,w){var _=this.yieldPos,H=this.awaitPos,Se=this.awaitIdentPos;return this.enterScope(Ot(w,!1)|Ne),this.initFunction(c),this.options.ecmaVersion>=8&&(c.async=!!w),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,c.params=this.toAssignableList(E,!0),this.parseFunctionBody(c,!0,!1),this.yieldPos=_,this.awaitPos=H,this.awaitIdentPos=Se,this.finishNode(c,"ArrowFunctionExpression")},me.parseFunctionBody=function(c,E,w){var _=E&&this.type!==D.braceL,H=this.strict,Se=!1;if(_)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var We=this.options.ecmaVersion>=7&&!this.isSimpleParamList(c.params);(!H||We)&&(Se=this.strictDirective(this.end),Se&&We&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var ht=this.labels;this.labels=[],Se&&(this.strict=!0),this.checkParams(c,!H&&!Se&&!E&&!w&&this.isSimpleParamList(c.params)),this.strict&&c.id&&this.checkLVal(c.id,xr),c.body=this.parseBlock(!1,void 0,Se&&!H),c.expression=!1,this.adaptDirectivePrologue(c.body.body),this.labels=ht}this.exitScope()},me.isSimpleParamList=function(c){for(var E=0,w=c;E<w.length;E+=1){var _=w[E];if(_.type!=="Identifier")return!1}return!0},me.checkParams=function(c,E){for(var w={},_=0,H=c.params;_<H.length;_+=1){var Se=H[_];this.checkLVal(Se,gt,E?null:w)}},me.parseExprList=function(c,E,w,_){for(var H=[],Se=!0;!this.eat(c);){if(Se)Se=!1;else if(this.expect(D.comma),E&&this.afterTrailingComma(c))break;var We=void 0;w&&this.type===D.comma?We=null:this.type===D.ellipsis?(We=this.parseSpread(_),_&&this.type===D.comma&&_.trailingComma<0&&(_.trailingComma=this.start)):We=this.parseMaybeAssign(!1,_),H.push(We)}return H},me.checkUnreserved=function(c){var E=c.start,w=c.end,_=c.name;if(this.inGenerator&&_==="yield"&&this.raiseRecoverable(E,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&_==="await"&&this.raiseRecoverable(E,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(_)&&this.raise(E,"Unexpected keyword '"+_+"'"),!(this.options.ecmaVersion<6&&this.input.slice(E,w).indexOf("\\")!==-1)){var H=this.strict?this.reservedWordsStrict:this.reservedWords;H.test(_)&&(!this.inAsync&&_==="await"&&this.raiseRecoverable(E,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(E,"The keyword '"+_+"' is reserved"))}},me.parseIdent=function(c,E){var w=this.startNode();return this.type===D.name?w.name=this.value:this.type.keyword?(w.name=this.type.keyword,(w.name==="class"||w.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!c),this.finishNode(w,"Identifier"),c||(this.checkUnreserved(w),w.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=w.start)),w},me.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var E=this.startNode();return this.next(),this.type===D.semi||this.canInsertSemicolon()||this.type!==D.star&&!this.type.startsExpr?(E.delegate=!1,E.argument=null):(E.delegate=this.eat(D.star),E.argument=this.parseMaybeAssign(c)),this.finishNode(E,"YieldExpression")},me.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();return this.next(),c.argument=this.parseMaybeUnary(null,!1),this.finishNode(c,"AwaitExpression")};var Cr=tr.prototype;Cr.raise=function(c,E){var w=te(this.input,c);E+=" ("+w.line+":"+w.column+")";var _=new SyntaxError(E);throw _.pos=c,_.loc=w,_.raisedAt=this.pos,_},Cr.raiseRecoverable=Cr.raise,Cr.curPosition=function(){if(this.options.locations)return new ne(this.curLine,this.pos-this.lineStart)};var Nt=tr.prototype,it=function(E){this.flags=E,this.var=[],this.lexical=[],this.functions=[]};Nt.enterScope=function(c){this.scopeStack.push(new it(c))},Nt.exitScope=function(){this.scopeStack.pop()},Nt.treatFunctionsAsVarInScope=function(c){return c.flags&Qt||!this.inModule&&c.flags&ut},Nt.declareName=function(c,E,w){var _=!1;if(E===ge){var H=this.currentScope();_=H.lexical.indexOf(c)>-1||H.functions.indexOf(c)>-1||H.var.indexOf(c)>-1,H.lexical.push(c),this.inModule&&H.flags&ut&&delete this.undefinedExports[c]}else if(E===qt){var Se=this.currentScope();Se.lexical.push(c)}else if(E===Lt){var We=this.currentScope();this.treatFunctionsAsVar?_=We.lexical.indexOf(c)>-1:_=We.lexical.indexOf(c)>-1||We.var.indexOf(c)>-1,We.functions.push(c)}else for(var ht=this.scopeStack.length-1;ht>=0;--ht){var pt=this.scopeStack[ht];if(pt.lexical.indexOf(c)>-1&&!(pt.flags&ke&&pt.lexical[0]===c)||!this.treatFunctionsAsVarInScope(pt)&&pt.functions.indexOf(c)>-1){_=!0;break}if(pt.var.push(c),this.inModule&&pt.flags&ut&&delete this.undefinedExports[c],pt.flags&vr)break}_&&this.raiseRecoverable(w,"Identifier '"+c+"' has already been declared")},Nt.checkLocalExport=function(c){this.scopeStack[0].lexical.indexOf(c.name)===-1&&this.scopeStack[0].var.indexOf(c.name)===-1&&(this.undefinedExports[c.name]=c)},Nt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Nt.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var E=this.scopeStack[c];if(E.flags&vr)return E}},Nt.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var E=this.scopeStack[c];if(E.flags&vr&&!(E.flags&Ne))return E}};var Ce=function(E,w,_){this.type="",this.start=w,this.end=0,E.options.locations&&(this.loc=new Q(E,_)),E.options.directSourceFile&&(this.sourceFile=E.options.directSourceFile),E.options.ranges&&(this.range=[w,0])},Rt=tr.prototype;Rt.startNode=function(){return new Ce(this,this.start,this.startLoc)},Rt.startNodeAt=function(c,E){return new Ce(this,c,E)};function _t(c,E,w,_){return c.type=E,c.end=w,this.options.locations&&(c.loc.end=_),this.options.ranges&&(c.range[1]=w),c}Rt.finishNode=function(c,E){return _t.call(this,c,E,this.lastTokEnd,this.lastTokEndLoc)},Rt.finishNodeAt=function(c,E,w,_){return _t.call(this,c,E,w,_)};var Tn=function(E,w,_,H,Se){this.token=E,this.isExpr=!!w,this.preserveSpace=!!_,this.override=H,this.generator=!!Se},Ve={b_stat:new Tn("{",!1),b_expr:new Tn("{",!0),b_tmpl:new Tn("${",!1),p_stat:new Tn("(",!1),p_expr:new Tn("(",!0),q_tmpl:new Tn("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new Tn("function",!1),f_expr:new Tn("function",!0),f_expr_gen:new Tn("function",!0,!1,null,!0),f_gen:new Tn("function",!1,!1,null,!0)},hi=tr.prototype;hi.initialContext=function(){return[Ve.b_stat]},hi.braceIsBlock=function(c){var E=this.curContext();return E===Ve.f_expr||E===Ve.f_stat?!0:c===D.colon&&(E===Ve.b_stat||E===Ve.b_expr)?!E.isExpr:c===D._return||c===D.name&&this.exprAllowed?De.test(this.input.slice(this.lastTokEnd,this.start)):c===D._else||c===D.semi||c===D.eof||c===D.parenR||c===D.arrow?!0:c===D.braceL?E===Ve.b_stat:c===D._var||c===D._const||c===D.name?!1:!this.exprAllowed},hi.inGeneratorContext=function(){for(var c=this.context.length-1;c>=1;c--){var E=this.context[c];if(E.token==="function")return E.generator}return!1},hi.updateContext=function(c){var E,w=this.type;w.keyword&&c===D.dot?this.exprAllowed=!1:(E=w.updateContext)?E.call(this,c):this.exprAllowed=w.beforeExpr},D.parenR.updateContext=D.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var c=this.context.pop();c===Ve.b_stat&&this.curContext().token==="function"&&(c=this.context.pop()),this.exprAllowed=!c.isExpr},D.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?Ve.b_stat:Ve.b_expr),this.exprAllowed=!0},D.dollarBraceL.updateContext=function(){this.context.push(Ve.b_tmpl),this.exprAllowed=!0},D.parenL.updateContext=function(c){var E=c===D._if||c===D._for||c===D._with||c===D._while;this.context.push(E?Ve.p_stat:Ve.p_expr),this.exprAllowed=!0},D.incDec.updateContext=function(){},D._function.updateContext=D._class.updateContext=function(c){c.beforeExpr&&c!==D.semi&&c!==D._else&&!(c===D._return&&De.test(this.input.slice(this.lastTokEnd,this.start)))&&!((c===D.colon||c===D.braceL)&&this.curContext()===Ve.b_stat)?this.context.push(Ve.f_expr):this.context.push(Ve.f_stat),this.exprAllowed=!1},D.backQuote.updateContext=function(){this.curContext()===Ve.q_tmpl?this.context.pop():this.context.push(Ve.q_tmpl),this.exprAllowed=!1},D.star.updateContext=function(c){if(c===D._function){var E=this.context.length-1;this.context[E]===Ve.f_expr?this.context[E]=Ve.f_expr_gen:this.context[E]=Ve.f_gen}this.exprAllowed=!0},D.name.updateContext=function(c){var E=!1;this.options.ecmaVersion>=6&&c!==D.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(E=!0),this.exprAllowed=E};var An="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",xi=An+" Extended_Pictographic",Bn=xi,yi={9:An,10:xi,11:Bn},Wr="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Oi="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Oa=Oi+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Aa=Oa+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ui={9:Oi,10:Oa,11:Aa},ea={};function Ti(c){var E=ea[c]={binary:Et(yi[c]+" "+Wr),nonBinary:{General_Category:Et(Wr),Script:Et(Ui[c])}};E.nonBinary.Script_Extensions=E.nonBinary.Script,E.nonBinary.gc=E.nonBinary.General_Category,E.nonBinary.sc=E.nonBinary.Script,E.nonBinary.scx=E.nonBinary.Script_Extensions}Ti(9),Ti(10),Ti(11);var _n=tr.prototype,Ci=function(E){this.parser=E,this.validFlags="gim"+(E.options.ecmaVersion>=6?"uy":"")+(E.options.ecmaVersion>=9?"s":""),this.unicodeProperties=ea[E.options.ecmaVersion>=11?11:E.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ci.prototype.reset=function(E,w,_){var H=_.indexOf("u")!==-1;this.start=E|0,this.source=w+"",this.flags=_,this.switchU=H&&this.parser.options.ecmaVersion>=6,this.switchN=H&&this.parser.options.ecmaVersion>=9},Ci.prototype.raise=function(E){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+E)},Ci.prototype.at=function(E,w){w===void 0&&(w=!1);var _=this.source,H=_.length;if(E>=H)return-1;var Se=_.charCodeAt(E);if(!(w||this.switchU)||Se<=55295||Se>=57344||E+1>=H)return Se;var We=_.charCodeAt(E+1);return We>=56320&&We<=57343?(Se<<10)+We-56613888:Se},Ci.prototype.nextIndex=function(E,w){w===void 0&&(w=!1);var _=this.source,H=_.length;if(E>=H)return H;var Se=_.charCodeAt(E),We;return!(w||this.switchU)||Se<=55295||Se>=57344||E+1>=H||(We=_.charCodeAt(E+1))<56320||We>57343?E+1:E+2},Ci.prototype.current=function(E){return E===void 0&&(E=!1),this.at(this.pos,E)},Ci.prototype.lookahead=function(E){return E===void 0&&(E=!1),this.at(this.nextIndex(this.pos,E),E)},Ci.prototype.advance=function(E){E===void 0&&(E=!1),this.pos=this.nextIndex(this.pos,E)},Ci.prototype.eat=function(E,w){return w===void 0&&(w=!1),this.current(w)===E?(this.advance(w),!0):!1};function qn(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}_n.validateRegExpFlags=function(c){for(var E=c.validFlags,w=c.flags,_=0;_<w.length;_++){var H=w.charAt(_);E.indexOf(H)===-1&&this.raise(c.start,"Invalid regular expression flag"),w.indexOf(H,_+1)>-1&&this.raise(c.start,"Duplicate regular expression flag")}},_n.validateRegExpPattern=function(c){this.regexp_pattern(c),!c.switchN&&this.options.ecmaVersion>=9&&c.groupNames.length>0&&(c.switchN=!0,this.regexp_pattern(c))},_n.regexp_pattern=function(c){c.pos=0,c.lastIntValue=0,c.lastStringValue="",c.lastAssertionIsQuantifiable=!1,c.numCapturingParens=0,c.maxBackReference=0,c.groupNames.length=0,c.backReferenceNames.length=0,this.regexp_disjunction(c),c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets")),c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var E=0,w=c.backReferenceNames;E<w.length;E+=1){var _=w[E];c.groupNames.indexOf(_)===-1&&c.raise("Invalid named capture referenced")}},_n.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat"),c.eat(123)&&c.raise("Lone quantifier brackets")},_n.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););},_n.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1},_n.regexp_eatAssertion=function(c){var E=c.pos;if(c.lastAssertionIsQuantifiable=!1,c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=E}if(c.eat(40)&&c.eat(63)){var w=!1;if(this.options.ecmaVersion>=9&&(w=c.eat(60)),c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=!w,!0}return c.pos=E,!1},_n.regexp_eatQuantifier=function(c,E){return E===void 0&&(E=!1),this.regexp_eatQuantifierPrefix(c,E)?(c.eat(63),!0):!1},_n.regexp_eatQuantifierPrefix=function(c,E){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,E)},_n.regexp_eatBracedQuantifier=function(c,E){var w=c.pos;if(c.eat(123)){var _=0,H=-1;if(this.regexp_eatDecimalDigits(c)&&(_=c.lastIntValue,c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(H=c.lastIntValue),c.eat(125)))return H!==-1&&H<_&&!E&&c.raise("numbers out of order in {} quantifier"),!0;c.switchU&&!E&&c.raise("Incomplete quantifier"),c.pos=w}return!1},_n.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)},_n.regexp_eatReverseSolidusAtomEscape=function(c){var E=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=E}return!1},_n.regexp_eatUncapturingGroup=function(c){var E=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){if(this.regexp_disjunction(c),c.eat(41))return!0;c.raise("Unterminated group")}c.pos=E}return!1},_n.regexp_eatCapturingGroup=function(c){if(c.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(c):c.current()===63&&c.raise("Invalid group"),this.regexp_disjunction(c),c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1},_n.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)},_n.regexp_eatInvalidBracedQuantifier=function(c){return this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat"),!1},_n.regexp_eatSyntaxCharacter=function(c){var E=c.current();return Wi(E)?(c.lastIntValue=E,c.advance(),!0):!1};function Wi(c){return c===36||c>=40&&c<=43||c===46||c===63||c>=91&&c<=94||c>=123&&c<=125}_n.regexp_eatPatternCharacters=function(c){for(var E=c.pos,w=0;(w=c.current())!==-1&&!Wi(w);)c.advance();return c.pos!==E},_n.regexp_eatExtendedPatternCharacter=function(c){var E=c.current();return E!==-1&&E!==36&&!(E>=40&&E<=43)&&E!==46&&E!==63&&E!==91&&E!==94&&E!==124?(c.advance(),!0):!1},_n.regexp_groupSpecifier=function(c){if(c.eat(63)){if(this.regexp_eatGroupName(c)){c.groupNames.indexOf(c.lastStringValue)!==-1&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue);return}c.raise("Invalid group")}},_n.regexp_eatGroupName=function(c){if(c.lastStringValue="",c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&c.eat(62))return!0;c.raise("Invalid capture group name")}return!1},_n.regexp_eatRegExpIdentifierName=function(c){if(c.lastStringValue="",this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=qn(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=qn(c.lastIntValue);return!0}return!1},_n.regexp_eatRegExpIdentifierStart=function(c){var E=c.pos,w=this.options.ecmaVersion>=11,_=c.current(w);return c.advance(w),_===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,w)&&(_=c.lastIntValue),ta(_)?(c.lastIntValue=_,!0):(c.pos=E,!1)};function ta(c){return G(c,!0)||c===36||c===95}_n.regexp_eatRegExpIdentifierPart=function(c){var E=c.pos,w=this.options.ecmaVersion>=11,_=c.current(w);return c.advance(w),_===92&&this.regexp_eatRegExpUnicodeEscapeSequence(c,w)&&(_=c.lastIntValue),si(_)?(c.lastIntValue=_,!0):(c.pos=E,!1)};function si(c){return ee(c,!0)||c===36||c===95||c===8204||c===8205}_n.regexp_eatAtomEscape=function(c){return this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||c.switchN&&this.regexp_eatKGroupName(c)?!0:(c.switchU&&(c.current()===99&&c.raise("Invalid unicode escape"),c.raise("Invalid escape")),!1)},_n.regexp_eatBackReference=function(c){var E=c.pos;if(this.regexp_eatDecimalEscape(c)){var w=c.lastIntValue;if(c.switchU)return w>c.maxBackReference&&(c.maxBackReference=w),!0;if(w<=c.numCapturingParens)return!0;c.pos=E}return!1},_n.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),!0;c.raise("Invalid named reference")}return!1},_n.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)},_n.regexp_eatCControlLetter=function(c){var E=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=E}return!1},_n.regexp_eatZero=function(c){return c.current()===48&&!ra(c.lookahead())?(c.lastIntValue=0,c.advance(),!0):!1},_n.regexp_eatControlEscape=function(c){var E=c.current();return E===116?(c.lastIntValue=9,c.advance(),!0):E===110?(c.lastIntValue=10,c.advance(),!0):E===118?(c.lastIntValue=11,c.advance(),!0):E===102?(c.lastIntValue=12,c.advance(),!0):E===114?(c.lastIntValue=13,c.advance(),!0):!1},_n.regexp_eatControlLetter=function(c){var E=c.current();return li(E)?(c.lastIntValue=E%32,c.advance(),!0):!1};function li(c){return c>=65&&c<=90||c>=97&&c<=122}_n.regexp_eatRegExpUnicodeEscapeSequence=function(c,E){E===void 0&&(E=!1);var w=c.pos,_=E||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){var H=c.lastIntValue;if(_&&H>=55296&&H<=56319){var Se=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var We=c.lastIntValue;if(We>=56320&&We<=57343)return c.lastIntValue=(H-55296)*1024+(We-56320)+65536,!0}c.pos=Se,c.lastIntValue=H}return!0}if(_&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125)&&Za(c.lastIntValue))return!0;_&&c.raise("Invalid unicode escape"),c.pos=w}return!1};function Za(c){return c>=0&&c<=1114111}_n.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var E=c.current();return E!==99&&(!c.switchN||E!==107)?(c.lastIntValue=E,c.advance(),!0):!1},_n.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var E=c.current();if(E>=49&&E<=57){do c.lastIntValue=10*c.lastIntValue+(E-48),c.advance();while((E=c.current())>=48&&E<=57);return!0}return!1},_n.regexp_eatCharacterClassEscape=function(c){var E=c.current();if(di(E))return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&this.options.ecmaVersion>=9&&(E===80||E===112)){if(c.lastIntValue=-1,c.advance(),c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};function di(c){return c===100||c===68||c===115||c===83||c===119||c===87}_n.regexp_eatUnicodePropertyValueExpression=function(c){var E=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var w=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c)){var _=c.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(c,w,_),!0}}if(c.pos=E,this.regexp_eatLoneUnicodePropertyNameOrValue(c)){var H=c.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(c,H),!0}return!1},_n.regexp_validateUnicodePropertyNameAndValue=function(c,E,w){rt(c.unicodeProperties.nonBinary,E)||c.raise("Invalid property name"),c.unicodeProperties.nonBinary[E].test(w)||c.raise("Invalid property value")},_n.regexp_validateUnicodePropertyNameOrValue=function(c,E){c.unicodeProperties.binary.test(E)||c.raise("Invalid property name")},_n.regexp_eatUnicodePropertyName=function(c){var E=0;for(c.lastStringValue="";Ha(E=c.current());)c.lastStringValue+=qn(E),c.advance();return c.lastStringValue!==""};function Ha(c){return li(c)||c===95}_n.regexp_eatUnicodePropertyValue=function(c){var E=0;for(c.lastStringValue="";Va(E=c.current());)c.lastStringValue+=qn(E),c.advance();return c.lastStringValue!==""};function Va(c){return Ha(c)||ra(c)}_n.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)},_n.regexp_eatCharacterClass=function(c){if(c.eat(91)){if(c.eat(94),this.regexp_classRanges(c),c.eat(93))return!0;c.raise("Unterminated character class")}return!1},_n.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var E=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var w=c.lastIntValue;c.switchU&&(E===-1||w===-1)&&c.raise("Invalid character class"),E!==-1&&w!==-1&&E>w&&c.raise("Range out of order in character class")}}},_n.regexp_eatClassAtom=function(c){var E=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var w=c.current();(w===99||Vi(w))&&c.raise("Invalid class escape"),c.raise("Invalid escape")}c.pos=E}var _=c.current();return _!==93?(c.lastIntValue=_,c.advance(),!0):!1},_n.regexp_eatClassEscape=function(c){var E=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=E}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)},_n.regexp_eatClassControlLetter=function(c){var E=c.current();return ra(E)||E===95?(c.lastIntValue=E%32,c.advance(),!0):!1},_n.regexp_eatHexEscapeSequence=function(c){var E=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape"),c.pos=E}return!1},_n.regexp_eatDecimalDigits=function(c){var E=c.pos,w=0;for(c.lastIntValue=0;ra(w=c.current());)c.lastIntValue=10*c.lastIntValue+(w-48),c.advance();return c.pos!==E};function ra(c){return c>=48&&c<=57}_n.regexp_eatHexDigits=function(c){var E=c.pos,w=0;for(c.lastIntValue=0;xa(w=c.current());)c.lastIntValue=16*c.lastIntValue+va(w),c.advance();return c.pos!==E};function xa(c){return c>=48&&c<=57||c>=65&&c<=70||c>=97&&c<=102}function va(c){return c>=65&&c<=70?10+(c-65):c>=97&&c<=102?10+(c-97):c-48}_n.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var E=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var w=c.lastIntValue;E<=3&&this.regexp_eatOctalDigit(c)?c.lastIntValue=E*64+w*8+c.lastIntValue:c.lastIntValue=E*8+w}else c.lastIntValue=E;return!0}return!1},_n.regexp_eatOctalDigit=function(c){var E=c.current();return Vi(E)?(c.lastIntValue=E-48,c.advance(),!0):(c.lastIntValue=0,!1)};function Vi(c){return c>=48&&c<=55}_n.regexp_eatFixedHexDigits=function(c,E){var w=c.pos;c.lastIntValue=0;for(var _=0;_<E;++_){var H=c.current();if(!xa(H))return c.pos=w,!1;c.lastIntValue=16*c.lastIntValue+va(H),c.advance()}return!0};var ia=function(E){this.type=E.type,this.value=E.value,this.start=E.start,this.end=E.end,E.options.locations&&(this.loc=new Q(E,E.startLoc,E.endLoc)),E.options.ranges&&(this.range=[E.start,E.end])},kn=tr.prototype;kn.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ia(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},kn.getToken=function(){return this.next(),new ia(this)},typeof Symbol!="undefined"&&(kn[Symbol.iterator]=function(){var c=this;return{next:function(){var E=c.getToken();return{done:E.type===D.eof,value:E}}}}),kn.curContext=function(){return this.context[this.context.length-1]},kn.nextToken=function(){var c=this.curContext();if((!c||!c.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(D.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())},kn.readToken=function(c){return G(c,this.options.ecmaVersion>=6)||c===92?this.readWord():this.getTokenFromCode(c)},kn.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(c<=55295||c>=57344)return c;var E=this.input.charCodeAt(this.pos+1);return(c<<10)+E-56613888},kn.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),E=this.pos,w=this.input.indexOf("*/",this.pos+=2);if(w===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=w+2,this.options.locations){ot.lastIndex=E;for(var _;(_=ot.exec(this.input))&&_.index<this.pos;)++this.curLine,this.lineStart=_.index+_[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(E+2,w),E,this.pos,c,this.curPosition())},kn.skipLineComment=function(c){for(var E=this.pos,w=this.options.onComment&&this.curPosition(),_=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Ke(_);)_=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(E+c,this.pos),E,this.pos,w,this.curPosition())},kn.skipSpace=function(){e:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(c>8&&c<14||c>=5760&&Le.test(String.fromCharCode(c)))++this.pos;else break e}}},kn.finishToken=function(c,E){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var w=this.type;this.type=c,this.value=E,this.updateContext(w)},kn.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(c>=48&&c<=57)return this.readNumber(!0);var E=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&c===46&&E===46?(this.pos+=3,this.finishToken(D.ellipsis)):(++this.pos,this.finishToken(D.dot))},kn.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):c===61?this.finishOp(D.assign,2):this.finishOp(D.slash,1)},kn.readToken_mult_modulo_exp=function(c){var E=this.input.charCodeAt(this.pos+1),w=1,_=c===42?D.star:D.modulo;return this.options.ecmaVersion>=7&&c===42&&E===42&&(++w,_=D.starstar,E=this.input.charCodeAt(this.pos+2)),E===61?this.finishOp(D.assign,w+1):this.finishOp(_,w)},kn.readToken_pipe_amp=function(c){var E=this.input.charCodeAt(this.pos+1);if(E===c){if(this.options.ecmaVersion>=12){var w=this.input.charCodeAt(this.pos+2);if(w===61)return this.finishOp(D.assign,3)}return this.finishOp(c===124?D.logicalOR:D.logicalAND,2)}return E===61?this.finishOp(D.assign,2):this.finishOp(c===124?D.bitwiseOR:D.bitwiseAND,1)},kn.readToken_caret=function(){var c=this.input.charCodeAt(this.pos+1);return c===61?this.finishOp(D.assign,2):this.finishOp(D.bitwiseXOR,1)},kn.readToken_plus_min=function(c){var E=this.input.charCodeAt(this.pos+1);return E===c?E===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||De.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(D.incDec,2):E===61?this.finishOp(D.assign,2):this.finishOp(D.plusMin,1)},kn.readToken_lt_gt=function(c){var E=this.input.charCodeAt(this.pos+1),w=1;return E===c?(w=c===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+w)===61?this.finishOp(D.assign,w+1):this.finishOp(D.bitShift,w)):E===33&&c===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(E===61&&(w=2),this.finishOp(D.relational,w))},kn.readToken_eq_excl=function(c){var E=this.input.charCodeAt(this.pos+1);return E===61?this.finishOp(D.equality,this.input.charCodeAt(this.pos+2)===61?3:2):c===61&&E===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(D.arrow)):this.finishOp(c===61?D.eq:D.prefix,1)},kn.readToken_question=function(){var c=this.options.ecmaVersion;if(c>=11){var E=this.input.charCodeAt(this.pos+1);if(E===46){var w=this.input.charCodeAt(this.pos+2);if(w<48||w>57)return this.finishOp(D.questionDot,2)}if(E===63){if(c>=12){var _=this.input.charCodeAt(this.pos+2);if(_===61)return this.finishOp(D.assign,3)}return this.finishOp(D.coalesce,2)}}return this.finishOp(D.question,1)},kn.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(D.parenL);case 41:return++this.pos,this.finishToken(D.parenR);case 59:return++this.pos,this.finishToken(D.semi);case 44:return++this.pos,this.finishToken(D.comma);case 91:return++this.pos,this.finishToken(D.bracketL);case 93:return++this.pos,this.finishToken(D.bracketR);case 123:return++this.pos,this.finishToken(D.braceL);case 125:return++this.pos,this.finishToken(D.braceR);case 58:return++this.pos,this.finishToken(D.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(D.backQuote);case 48:var E=this.input.charCodeAt(this.pos+1);if(E===120||E===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(E===111||E===79)return this.readRadixNumber(8);if(E===98||E===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(D.prefix,1)}this.raise(this.pos,"Unexpected character '"+Qi(c)+"'")},kn.finishOp=function(c,E){var w=this.input.slice(this.pos,this.pos+E);return this.pos+=E,this.finishToken(c,w)},kn.readRegexp=function(){for(var c,E,w=this.pos;;){this.pos>=this.input.length&&this.raise(w,"Unterminated regular expression");var _=this.input.charAt(this.pos);if(De.test(_)&&this.raise(w,"Unterminated regular expression"),c)c=!1;else{if(_==="[")E=!0;else if(_==="]"&&E)E=!1;else if(_==="/"&&!E)break;c=_==="\\"}++this.pos}var H=this.input.slice(w,this.pos);++this.pos;var Se=this.pos,We=this.readWord1();this.containsEsc&&this.unexpected(Se);var ht=this.regexpState||(this.regexpState=new Ci(this));ht.reset(w,H,We),this.validateRegExpFlags(ht),this.validateRegExpPattern(ht);var pt=null;try{pt=new RegExp(H,We)}catch(Kt){}return this.finishToken(D.regexp,{pattern:H,flags:We,value:pt})},kn.readInt=function(c,E,w){for(var _=this.options.ecmaVersion>=12&&E===void 0,H=w&&this.input.charCodeAt(this.pos)===48,Se=this.pos,We=0,ht=0,pt=0,Kt=E==null?Infinity:E;pt<Kt;++pt,++this.pos){var ir=this.input.charCodeAt(this.pos),qr=void 0;if(_&&ir===95){H&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),ht===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),pt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),ht=ir;continue}if(ir>=97?qr=ir-97+10:ir>=65?qr=ir-65+10:ir>=48&&ir<=57?qr=ir-48:qr=Infinity,qr>=c)break;ht=ir,We=We*c+qr}return _&&ht===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Se||E!=null&&this.pos-Se!==E?null:We};function Ka(c,E){return E?parseInt(c,8):parseFloat(c.replace(/_/g,""))}function Pa(c){return typeof BigInt!="function"?null:BigInt(c.replace(/_/g,""))}kn.readRadixNumber=function(c){var E=this.pos;this.pos+=2;var w=this.readInt(c);return w==null&&this.raise(this.start+2,"Expected number in radix "+c),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(w=Pa(this.input.slice(E,this.pos)),++this.pos):G(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(D.num,w)},kn.readNumber=function(c){var E=this.pos;!c&&this.readInt(10,void 0,!0)===null&&this.raise(E,"Invalid number");var w=this.pos-E>=2&&this.input.charCodeAt(E)===48;w&&this.strict&&this.raise(E,"Invalid number");var _=this.input.charCodeAt(this.pos);if(!w&&!c&&this.options.ecmaVersion>=11&&_===110){var H=Pa(this.input.slice(E,this.pos));return++this.pos,G(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(D.num,H)}w&&/[89]/.test(this.input.slice(E,this.pos))&&(w=!1),_===46&&!w&&(++this.pos,this.readInt(10),_=this.input.charCodeAt(this.pos)),(_===69||_===101)&&!w&&(_=this.input.charCodeAt(++this.pos),(_===43||_===45)&&++this.pos,this.readInt(10)===null&&this.raise(E,"Invalid number")),G(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Se=Ka(this.input.slice(E,this.pos),w);return this.finishToken(D.num,Se)},kn.readCodePoint=function(){var c=this.input.charCodeAt(this.pos),E;if(c===123){this.options.ecmaVersion<6&&this.unexpected();var w=++this.pos;E=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,E>1114111&&this.invalidStringToken(w,"Code point out of bounds")}else E=this.readHexChar(4);return E};function Qi(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}kn.readString=function(c){for(var E="",w=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var _=this.input.charCodeAt(this.pos);if(_===c)break;_===92?(E+=this.input.slice(w,this.pos),E+=this.readEscapedChar(!1),w=this.pos):(Ke(_,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return E+=this.input.slice(w,this.pos++),this.finishToken(D.string,E)};var Ia={};kn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===Ia)this.readInvalidTemplateToken();else throw c}this.inTemplateElement=!1},kn.invalidStringToken=function(c,E){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ia;this.raise(c,E)},kn.readTmplToken=function(){for(var c="",E=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var w=this.input.charCodeAt(this.pos);if(w===96||w===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===D.template||this.type===D.invalidTemplate)?w===36?(this.pos+=2,this.finishToken(D.dollarBraceL)):(++this.pos,this.finishToken(D.backQuote)):(c+=this.input.slice(E,this.pos),this.finishToken(D.template,c));if(w===92)c+=this.input.slice(E,this.pos),c+=this.readEscapedChar(!0),E=this.pos;else if(Ke(w)){switch(c+=this.input.slice(E,this.pos),++this.pos,w){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:c+=`
`;break;default:c+=String.fromCharCode(w);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),E=this.pos}else++this.pos}},kn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(D.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},kn.readEscapedChar=function(c){var E=this.input.charCodeAt(++this.pos);switch(++this.pos,E){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Qi(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(c){var w=this.pos-1;return this.invalidStringToken(w,"Invalid escape sequence in template string"),null}default:if(E>=48&&E<=55){var _=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],H=parseInt(_,8);return H>255&&(_=_.slice(0,-1),H=parseInt(_,8)),this.pos+=_.length-1,E=this.input.charCodeAt(this.pos),(_!=="0"||E===56||E===57)&&(this.strict||c)&&this.invalidStringToken(this.pos-1-_.length,c?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(H)}return Ke(E)?"":String.fromCharCode(E)}},kn.readHexChar=function(c){var E=this.pos,w=this.readInt(16,c);return w===null&&this.invalidStringToken(E,"Bad character escape sequence"),w},kn.readWord1=function(){this.containsEsc=!1;for(var c="",E=!0,w=this.pos,_=this.options.ecmaVersion>=6;this.pos<this.input.length;){var H=this.fullCharCodeAtPos();if(ee(H,_))this.pos+=H<=65535?1:2;else if(H===92){this.containsEsc=!0,c+=this.input.slice(w,this.pos);var Se=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var We=this.readCodePoint();(E?G:ee)(We,_)||this.invalidStringToken(Se,"Invalid Unicode escape"),c+=Qi(We),w=this.pos}else break;E=!1}return c+this.input.slice(w,this.pos)},kn.readWord=function(){var c=this.readWord1(),E=D.name;return this.keywords.test(c)&&(E=X[c]),this.finishToken(E,c)};var Ma="7.4.1";tr.acorn={Parser:tr,version:Ma,defaultOptions:Fe,Position:ne,SourceLocation:Q,getLineInfo:te,Node:Ce,TokenType:pe,tokTypes:D,keywordTypes:X,TokContext:Tn,tokContexts:Ve,isIdentifierChar:ee,isIdentifierStart:G,Token:ia,isNewLine:Ke,lineBreak:De,lineBreakG:ot,nonASCIIwhitespace:Le};function ji(c,E){return tr.parse(c,E)}function aa(c,E,w){return tr.parseExpressionAt(c,E,w)}function vi(c,E){return tr.tokenizer(c,E)}function ei(c,E){c.prototype=Object.create(E.prototype),c.prototype.constructor=c,c.__proto__=E}function oa(c){var E=typeof Map=="function"?new Map:void 0;return oa=function(_){if(_===null||!Ji(_))return _;if(typeof _!="function")throw new TypeError("Super expression must either be null or a function");if(typeof E!="undefined"){if(E.has(_))return E.get(_);E.set(_,H)}function H(){return Gi(_,arguments,ka(this).constructor)}return H.prototype=Object.create(_.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),pa(H,_)},oa(c)}function $i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(c){return!1}}function Gi(c,E,w){return $i()?Gi=Reflect.construct:Gi=function(H,Se,We){var ht=[null];ht.push.apply(ht,Se);var pt=Function.bind.apply(H,ht),Kt=new pt;return We&&pa(Kt,We.prototype),Kt},Gi.apply(null,arguments)}function Ji(c){return Function.toString.call(c).indexOf("[native code]")!==-1}function pa(c,E){return pa=Object.setPrototypeOf||function(_,H){return _.__proto__=H,_},pa(c,E)}function ka(c){return ka=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},ka(c)}var ma=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(oa(Error)),Bi=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(oa(SyntaxError)),Na=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(oa(ReferenceError)),pi=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(oa(TypeError)),zi=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(ma),Mi=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(Bi),Yn=function(c){ei(E,c);function E(){return c.apply(this,arguments)||this}return E}(Na),bi={UnknownError:[3001,"%0",zi],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",zi],NodeTypeSyntaxError:[1001,"Unknown node type: %0",Yn],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",Yn],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",Yn],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",Yn],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",Yn],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",Yn],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",Yn],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",Yn],ParamTypeSyntaxError:[1009,"Unknown param type: %0",Yn],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",Yn],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Na],VariableUndefinedReferenceError:[2002,"%0 is not defined",Na],IsNotConstructor:[2003,"%0 is not a constructor",pi]};function sa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(c){return!1}}function Ra(c,E,w){return sa()?Ra=Reflect.construct:Ra=function(H,Se,We){var ht=[null];ht.push.apply(ht,Se);var pt=Function.bind.apply(H,ht),Kt=new pt;return We&&Qa(Kt,We.prototype),Kt},Ra.apply(null,arguments)}function Qa(c,E){return Qa=Object.setPrototypeOf||function(_,H){return _.__proto__=H,_},Qa(c,E)}var ce="0.0.3";function be(c,E){Object.defineProperty(c,"name",{value:E,writable:!1,enumerable:!1,configurable:!0})}var Qe=Object.prototype.hasOwnProperty,U=Symbol("Break"),K=Symbol("Continue"),Me=Symbol("DefaultCase"),ct=Symbol("EmptyStatementReturn"),lr=Symbol("WithScopeName"),Ur=Symbol("SuperScopeName"),Un=Symbol("RootScopeName"),cr=Symbol("GlobalScopeName");function Xi(c){return typeof c=="function"}var Li=function(){function c(w){this.interpreter=w}var E=c.prototype;return E.generator=function(){var _=this.interpreter;function H(){return this.getCurrentScope()}function Se(){return this.getGlobalScope()}function We(){return this.getCurrentContext()}return{getOptions:_.getOptions.bind(_),getCurrentScope:H.bind(_),getGlobalScope:Se.bind(_),getCurrentContext:We.bind(_),getExecStartTime:_.getExecStartTime.bind(_)}},c}();function Gt(c,E,w){if(w===void 0&&(w=!0),!(c instanceof Li))throw new Error("Illegal call");if(typeof E!="string")return E;if(!!E){var _=c.generator(),H=_.getOptions(),Se={timeout:H.timeout,_initEnv:function(){w||this.setCurrentContext(_.getCurrentContext()),this.execStartTime=_.getExecStartTime(),this.execEndTime=this.execStartTime}},We=w?_.getGlobalScope():_.getCurrentScope(),ht=new Ut(We,Se);return ht.evaluate(E)}}Object.defineProperty(Gt,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function s(c){if(!(c instanceof Li))throw new Error("Illegal call");for(var E=c.generator(),w=arguments.length,_=new Array(w>1?w-1:0),H=1;H<w;H++)_[H-1]=arguments[H];var Se=_.pop(),We=new Ut(E.getGlobalScope(),E.getOptions()),ht=`
		    (function anonymous(`+_.join(",")+`){
		        `+Se+`
		    });
		    `;return We.evaluate(ht)}Object.defineProperty(s,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var d=function(E){this.value=E},O=function(E){this.value=E},j=function(E){this.value=E},ae=function(E,w,_){w===void 0&&(w=null),this.name=_,this.parent=w,this.data=E,this.labelStack=[]};function Ee(){}function Ue(c,E){return c===void 0&&(c=null),new ae(Object.create(null),c,E)}function st(c){return Object.create(c)}var Mt={NaN:NaN,Infinity:Infinity,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:Gt,Function:s};typeof JSON!="undefined"&&(Mt.JSON=JSON),typeof Promise!="undefined"&&(Mt.Promise=Promise),typeof Set!="undefined"&&(Mt.Set=Set),typeof Map!="undefined"&&(Mt.Map=Map),typeof Symbol!="undefined"&&(Mt.Symbol=Symbol),typeof Proxy!="undefined"&&(Mt.Proxy=Proxy),typeof WeakMap!="undefined"&&(Mt.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(Mt.WeakSet=WeakSet),typeof Reflect!="undefined"&&(Mt.Reflect=Reflect);var Ut=function(){function c(w,_){w===void 0&&(w=c.global),_===void 0&&(_={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:_.ecmaVersion||c.ecmaVersion,timeout:_.timeout||0,rootContext:_.rootContext,globalContextInFunction:_.globalContextInFunction===void 0?c.globalContextInFunction:_.globalContextInFunction,_initEnv:_._initEnv},this.context=w||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var E=c.prototype;return E.initEnvironment=function(_){var H;if(_ instanceof ae)H=_;else{var Se=null,We=this.createSuperScope(_);this.options.rootContext&&(Se=new ae(st(this.options.rootContext),We,Un)),H=new ae(_,Se||We,cr)}this.globalScope=H,this.currentScope=this.globalScope,this.globalContext=H.data,this.currentContext=H.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var ht=this.options._initEnv;ht&&ht.call(this)},E.getExecStartTime=function(){return this.execStartTime},E.getExecutionTime=function(){return this.execEndTime-this.execStartTime},E.setExecTimeout=function(_){_===void 0&&(_=0),this.options.timeout=_},E.getOptions=function(){return this.options},E.getGlobalScope=function(){return this.globalScope},E.getCurrentScope=function(){return this.currentScope},E.getCurrentContext=function(){return this.currentContext},E.isInterruptThrow=function(_){return _ instanceof zi||_ instanceof Yn||_ instanceof Mi},E.createSuperScope=function(_){var H=Object.assign({},Mt),Se=Object.keys(H);return Se.forEach(function(We){We in _&&delete H[We]}),new ae(H,null,Ur)},E.setCurrentContext=function(_){this.currentContext=_},E.setCurrentScope=function(_){this.currentScope=_},E.evaluate=function(_){_===void 0&&(_="");var H;if(!!_)return H=ji(_,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||c.ecmaVersion}),this.evaluateNode(H,_)},E.appendCode=function(_){return this.evaluate(_)},E.evaluateNode=function(_,H){var Se=this;H===void 0&&(H=""),this.value=void 0,this.source=H,this.sourceList.push(H),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var We=this.getCurrentScope(),ht=this.getCurrentContext(),pt=We.labelStack.concat([]),Kt=this.callStack.concat([]),ir=function(){Se.setCurrentScope(We),Se.setCurrentContext(ht),We.labelStack=pt,Se.callStack=Kt};try{var qr=this.createClosure(_);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),qr()}catch(ln){throw ln}finally{ir(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},E.createErrorMessage=function(_,H,Se){var We=_[1].replace("%0",String(H));return Se!==null&&(We+=this.getNodePosition(Se||this.lastExecNode)),We},E.createError=function(_,H){return new H(_)},E.createThrowError=function(_,H){return this.createError(_,H)},E.createInternalThrowError=function(_,H,Se){return this.createError(this.createErrorMessage(_,H,Se),_[2])},E.checkTimeout=function(){if(!this.isRunning)return!1;var _=this.options.timeout||0,H=Date.now();return H-this.execStartTime>_},E.getNodePosition=function(_){if(_){var H="";return _.loc?" ["+_.loc.start.line+":"+_.loc.start.column+"]"+H:""}return""},E.createClosure=function(_){var H=this,Se;switch(_.type){case"BinaryExpression":Se=this.binaryExpressionHandler(_);break;case"LogicalExpression":Se=this.logicalExpressionHandler(_);break;case"UnaryExpression":Se=this.unaryExpressionHandler(_);break;case"UpdateExpression":Se=this.updateExpressionHandler(_);break;case"ObjectExpression":Se=this.objectExpressionHandler(_);break;case"ArrayExpression":Se=this.arrayExpressionHandler(_);break;case"CallExpression":Se=this.callExpressionHandler(_);break;case"NewExpression":Se=this.newExpressionHandler(_);break;case"MemberExpression":Se=this.memberExpressionHandler(_);break;case"ThisExpression":Se=this.thisExpressionHandler(_);break;case"SequenceExpression":Se=this.sequenceExpressionHandler(_);break;case"Literal":Se=this.literalHandler(_);break;case"Identifier":Se=this.identifierHandler(_);break;case"AssignmentExpression":Se=this.assignmentExpressionHandler(_);break;case"FunctionDeclaration":Se=this.functionDeclarationHandler(_);break;case"VariableDeclaration":Se=this.variableDeclarationHandler(_);break;case"BlockStatement":case"Program":Se=this.programHandler(_);break;case"ExpressionStatement":Se=this.expressionStatementHandler(_);break;case"EmptyStatement":Se=this.emptyStatementHandler(_);break;case"ReturnStatement":Se=this.returnStatementHandler(_);break;case"FunctionExpression":Se=this.functionExpressionHandler(_);break;case"IfStatement":Se=this.ifStatementHandler(_);break;case"ConditionalExpression":Se=this.conditionalExpressionHandler(_);break;case"ForStatement":Se=this.forStatementHandler(_);break;case"WhileStatement":Se=this.whileStatementHandler(_);break;case"DoWhileStatement":Se=this.doWhileStatementHandler(_);break;case"ForInStatement":Se=this.forInStatementHandler(_);break;case"WithStatement":Se=this.withStatementHandler(_);break;case"ThrowStatement":Se=this.throwStatementHandler(_);break;case"TryStatement":Se=this.tryStatementHandler(_);break;case"ContinueStatement":Se=this.continueStatementHandler(_);break;case"BreakStatement":Se=this.breakStatementHandler(_);break;case"SwitchStatement":Se=this.switchStatementHandler(_);break;case"LabeledStatement":Se=this.labeledStatementHandler(_);break;case"DebuggerStatement":Se=this.debuggerStatementHandler(_);break;default:throw this.createInternalThrowError(bi.NodeTypeSyntaxError,_.type,_)}return function(){var We=H.options.timeout;if(We&&We>0&&H.checkTimeout())throw H.createInternalThrowError(bi.ExecutionTimeOutError,We,null);return H.lastExecNode=_,Se.apply(void 0,arguments)}},E.binaryExpressionHandler=function(_){var H=this,Se=this.createClosure(_.left),We=this.createClosure(_.right);return function(){var ht=Se(),pt=We();switch(_.operator){case"==":return ht==pt;case"!=":return ht!=pt;case"===":return ht===pt;case"!==":return ht!==pt;case"<":return ht<pt;case"<=":return ht<=pt;case">":return ht>pt;case">=":return ht>=pt;case"<<":return ht<<pt;case">>":return ht>>pt;case">>>":return ht>>>pt;case"+":return ht+pt;case"-":return ht-pt;case"*":return ht*pt;case"**":return Math.pow(ht,pt);case"/":return ht/pt;case"%":return ht%pt;case"|":return ht|pt;case"^":return ht^pt;case"&":return ht&pt;case"in":return ht in pt;case"instanceof":return ht instanceof pt;default:throw H.createInternalThrowError(bi.BinaryOperatorSyntaxError,_.operator,_)}}},E.logicalExpressionHandler=function(_){var H=this,Se=this.createClosure(_.left),We=this.createClosure(_.right);return function(){switch(_.operator){case"||":return Se()||We();case"&&":return Se()&&We();default:throw H.createInternalThrowError(bi.LogicalOperatorSyntaxError,_.operator,_)}}},E.unaryExpressionHandler=function(_){var H=this;switch(_.operator){case"delete":var Se=this.createObjectGetter(_.argument),We=this.createNameGetter(_.argument);return function(){var ir=Se(),qr=We();return delete ir[qr]};default:var ht;if(_.operator==="typeof"&&_.argument.type==="Identifier"){var pt=this.createObjectGetter(_.argument),Kt=this.createNameGetter(_.argument);ht=function(){return pt()[Kt()]}}else ht=this.createClosure(_.argument);return function(){var ir=ht();switch(_.operator){case"-":return-ir;case"+":return+ir;case"!":return!ir;case"~":return~ir;case"void":return;case"typeof":return typeof ir;default:throw H.createInternalThrowError(bi.UnaryOperatorSyntaxError,_.operator,_)}}}},E.updateExpressionHandler=function(_){var H=this,Se=this.createObjectGetter(_.argument),We=this.createNameGetter(_.argument);return function(){var ht=Se(),pt=We();switch(H.assertVariable(ht,pt,_),_.operator){case"++":return _.prefix?++ht[pt]:ht[pt]++;case"--":return _.prefix?--ht[pt]:ht[pt]--;default:throw H.createInternalThrowError(bi.UpdateOperatorSyntaxError,_.operator,_)}}},E.objectExpressionHandler=function(_){var H=this,Se=[];function We(pt){return pt.type==="Identifier"?pt.name:pt.type==="Literal"?pt.value:this.throwError(bi.ObjectStructureSyntaxError,pt.type,pt)}var ht=Object.create(null);return _.properties.forEach(function(pt){var Kt=pt.kind,ir=We(pt.key);(!ht[ir]||Kt==="init")&&(ht[ir]={}),ht[ir][Kt]=H.createClosure(pt.value),Se.push({key:ir,property:pt})}),function(){for(var pt={},Kt=Se.length,ir=0;ir<Kt;ir++){var qr=Se[ir],ln=qr.key,Mn=ht[ln],ui=Mn.init?Mn.init():void 0,mi=Mn.get?Mn.get():function(){},Ri=Mn.set?Mn.set():function(ho){};if("set"in Mn||"get"in Mn){var $a={configurable:!0,enumerable:!0,get:mi,set:Ri};Object.defineProperty(pt,ln,$a)}else{var Ua=qr.property,_o=Ua.kind;Ua.key.type==="Identifier"&&Ua.value.type==="FunctionExpression"&&_o==="init"&&!Ua.value.id&&be(ui,Ua.key.name),pt[ln]=ui}}return pt}},E.arrayExpressionHandler=function(_){var H=this,Se=_.elements.map(function(We){return We&&H.createClosure(We)});return function(){for(var We=Se.length,ht=Array(We),pt=0;pt<We;pt++){var Kt=Se[pt];Kt&&(ht[pt]=Kt())}return ht}},E.safeObjectGet=function(_,H,Se){return _[H]},E.createCallFunctionGetter=function(_){var H=this;switch(_.type){case"MemberExpression":var Se=this.createClosure(_.object),We=this.createMemberKeyGetter(_),ht=this.source;return function(){var Kt=Se(),ir=We(),qr=H.safeObjectGet(Kt,ir,_);if(!qr||!Xi(qr)){var ln=ht.slice(_.start,_.end);throw H.createInternalThrowError(bi.FunctionUndefinedReferenceError,ln,_)}return qr.__IS_EVAL_FUNC?function(Mn){return qr(new Li(H),Mn,!0)}:qr.__IS_FUNCTION_FUNC?function(){for(var Mn=arguments.length,ui=new Array(Mn),mi=0;mi<Mn;mi++)ui[mi]=arguments[mi];return qr.apply(void 0,[new Li(H)].concat(ui))}:qr.bind(Kt)};default:var pt=this.createClosure(_);return function(){var Kt="";_.type==="Identifier"&&(Kt=_.name);var ir=pt();if(!ir||!Xi(ir))throw H.createInternalThrowError(bi.FunctionUndefinedReferenceError,Kt,_);if(_.type==="Identifier"&&ir.__IS_EVAL_FUNC&&Kt==="eval")return function(Mn){var ui=H.getScopeFromName(Kt,H.getCurrentScope()),mi=ui.name===Ur||ui.name===cr||ui.name===Un;return ir(new Li(H),Mn,!mi)};if(ir.__IS_EVAL_FUNC)return function(Mn){return ir(new Li(H),Mn,!0)};if(ir.__IS_FUNCTION_FUNC)return function(){for(var Mn=arguments.length,ui=new Array(Mn),mi=0;mi<Mn;mi++)ui[mi]=arguments[mi];return ir.apply(void 0,[new Li(H)].concat(ui))};var qr=H.options.globalContextInFunction;if(_.type==="Identifier"){var ln=H.getIdentifierScope(_);ln.name===lr&&(qr=ln.data)}return ir.bind(qr)}}},E.callExpressionHandler=function(_){var H=this,Se=this.createCallFunctionGetter(_.callee),We=_.arguments.map(function(ht){return H.createClosure(ht)});return function(){return Se().apply(void 0,We.map(function(ht){return ht()}))}},E.functionExpressionHandler=function(_){var H=this,Se=this,We=this.source,ht=this.collectDeclVars,pt=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var Kt=_.id?_.id.name:"",ir=_.params.length,qr=_.params.map(function(mi){return H.createParamNameGetter(mi)}),ln=this.createClosure(_.body),Mn=this.collectDeclVars,ui=this.collectDeclFuncs;return this.collectDeclVars=ht,this.collectDeclFuncs=pt,function(){var mi=Se.getCurrentScope(),Ri=function $a(){for(var Ua=arguments.length,_o=new Array(Ua),ho=0;ho<Ua;ho++)_o[ho]=arguments[ho];Se.callStack.push(""+Kt);var Bo=Se.getCurrentScope(),Co=Ue(mi,"FunctionScope("+Kt+")");Se.setCurrentScope(Co),Se.addDeclarationsToScope(Mn,ui,Co),Kt&&(Co.data[Kt]=$a),Co.data.arguments=arguments,qr.forEach(function(Rr,Go){Co.data[Rr()]=_o[Go]});var To=Se.getCurrentContext();Se.setCurrentContext(this);var ns=ln();if(Se.setCurrentContext(To),Se.setCurrentScope(Bo),Se.callStack.pop(),ns instanceof d)return ns.value};return be(Ri,Kt),Object.defineProperty(Ri,"length",{value:ir,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(Ri,"toString",{value:function(){return We.slice(_.start,_.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Ri,"valueOf",{value:function(){return We.slice(_.start,_.end)},writable:!0,configurable:!0,enumerable:!1}),Ri}},E.newExpressionHandler=function(_){var H=this,Se=this.source,We=this.createClosure(_.callee),ht=_.arguments.map(function(pt){return H.createClosure(pt)});return function(){var pt=We();if(!Xi(pt)||pt.__IS_EVAL_FUNC){var Kt=_.callee,ir=Se.slice(Kt.start,Kt.end);throw H.createInternalThrowError(bi.IsNotConstructor,ir,_)}return pt.__IS_FUNCTION_FUNC?pt.apply(void 0,[new Li(H)].concat(ht.map(function(qr){return qr()}))):Ra(pt,ht.map(function(qr){return qr()}))}},E.memberExpressionHandler=function(_){var H=this.createClosure(_.object),Se=this.createMemberKeyGetter(_);return function(){var We=H(),ht=Se();return We[ht]}},E.thisExpressionHandler=function(_){var H=this;return function(){return H.getCurrentContext()}},E.sequenceExpressionHandler=function(_){var H=this,Se=_.expressions.map(function(We){return H.createClosure(We)});return function(){for(var We,ht=Se.length,pt=0;pt<ht;pt++){var Kt=Se[pt];We=Kt()}return We}},E.literalHandler=function(_){return function(){return _.regex?new RegExp(_.regex.pattern,_.regex.flags):_.value}},E.identifierHandler=function(_){var H=this;return function(){var Se=H.getCurrentScope(),We=H.getScopeDataFromName(_.name,Se);return H.assertVariable(We,_.name,_),We[_.name]}},E.getIdentifierScope=function(_){var H=this.getCurrentScope(),Se=this.getScopeFromName(_.name,H);return Se},E.assignmentExpressionHandler=function(_){var H=this;_.left.type==="Identifier"&&_.right.type==="FunctionExpression"&&!_.right.id&&(_.right.id={type:"Identifier",name:_.left.name});var Se=this.createObjectGetter(_.left),We=this.createNameGetter(_.left),ht=this.createClosure(_.right);return function(){var pt=Se(),Kt=We(),ir=ht();switch(_.operator!=="="&&H.assertVariable(pt,Kt,_),_.operator){case"=":return pt[Kt]=ir;case"+=":return pt[Kt]+=ir;case"-=":return pt[Kt]-=ir;case"*=":return pt[Kt]*=ir;case"**=":return pt[Kt]=Math.pow(pt[Kt],ir);case"/=":return pt[Kt]/=ir;case"%=":return pt[Kt]%=ir;case"<<=":return pt[Kt]<<=ir;case">>=":return pt[Kt]>>=ir;case">>>=":return pt[Kt]>>>=ir;case"&=":return pt[Kt]&=ir;case"^=":return pt[Kt]^=ir;case"|=":return pt[Kt]|=ir;default:throw H.createInternalThrowError(bi.AssignmentExpressionSyntaxError,_.type,_)}}},E.functionDeclarationHandler=function(_){if(_.id){var H=this.functionExpressionHandler(_);Object.defineProperty(H,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(_.id.name,H)}return function(){return ct}},E.getVariableName=function(_){if(_.type==="Identifier")return _.name;throw this.createInternalThrowError(bi.VariableTypeSyntaxError,_.type,_)},E.variableDeclarationHandler=function(_){for(var H=this,Se,We=[],ht=0;ht<_.declarations.length;ht++){var pt=_.declarations[ht];this.varDeclaration(this.getVariableName(pt.id)),pt.init&&We.push({type:"AssignmentExpression",operator:"=",left:pt.id,right:pt.init})}return We.length&&(Se=this.createClosure({type:"BlockStatement",body:We})),function(){if(Se){var Kt=H.isVarDeclMode;H.isVarDeclMode=!0,Se(),H.isVarDeclMode=Kt}return ct}},E.assertVariable=function(_,H,Se){if(_===this.globalScope.data&&!(H in _))throw this.createInternalThrowError(bi.VariableUndefinedReferenceError,H,Se)},E.programHandler=function(_){var H=this,Se=_.body.map(function(We){return H.createClosure(We)});return function(){for(var We=ct,ht=0;ht<Se.length;ht++){var pt=Se[ht],Kt=H.setValue(pt());if(Kt!==ct&&(We=Kt,We instanceof d||We instanceof O||We instanceof j||We===U||We===K))break}return We}},E.expressionStatementHandler=function(_){return this.createClosure(_.expression)},E.emptyStatementHandler=function(_){return function(){return ct}},E.returnStatementHandler=function(_){var H=_.argument?this.createClosure(_.argument):Ee;return function(){return new d(H())}},E.ifStatementHandler=function(_){var H=this.createClosure(_.test),Se=this.createClosure(_.consequent),We=_.alternate?this.createClosure(_.alternate):function(){return ct};return function(){return H()?Se():We()}},E.conditionalExpressionHandler=function(_){return this.ifStatementHandler(_)},E.forStatementHandler=function(_){var H=this,Se=Ee,We=_.test?this.createClosure(_.test):function(){return!0},ht=Ee,pt=this.createClosure(_.body);return _.type==="ForStatement"&&(Se=_.init?this.createClosure(_.init):Se,ht=_.update?this.createClosure(_.update):Ee),function(Kt){var ir,qr=ct,ln=_.type==="DoWhileStatement";for(Kt&&Kt.type==="LabeledStatement"&&(ir=Kt.label.name),Se();ln||We();ht()){ln=!1;var Mn=H.setValue(pt());if(!(Mn===ct||Mn===K)){if(Mn===U)break;if(qr=Mn,qr instanceof j&&qr.value===ir){qr=ct;continue}if(qr instanceof d||qr instanceof O||qr instanceof j)break}}return qr}},E.whileStatementHandler=function(_){return this.forStatementHandler(_)},E.doWhileStatementHandler=function(_){return this.forStatementHandler(_)},E.forInStatementHandler=function(_){var H=this,Se=_.left,We=this.createClosure(_.right),ht=this.createClosure(_.body);return _.left.type==="VariableDeclaration"&&(this.createClosure(_.left)(),Se=_.left.declarations[0].id),function(pt){var Kt,ir=ct,qr;pt&&pt.type==="LabeledStatement"&&(Kt=pt.label.name);var ln=We();for(qr in ln){H.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:Se,right:{type:"Literal",value:qr}})();var Mn=H.setValue(ht());if(!(Mn===ct||Mn===K)){if(Mn===U)break;if(ir=Mn,ir instanceof j&&ir.value===Kt){ir=ct;continue}if(ir instanceof d||ir instanceof O||ir instanceof j)break}}return ir}},E.withStatementHandler=function(_){var H=this,Se=this.createClosure(_.object),We=this.createClosure(_.body);return function(){var ht=Se(),pt=H.getCurrentScope(),Kt=new ae(ht,pt,lr);H.setCurrentScope(Kt);var ir=H.setValue(We());return H.setCurrentScope(pt),ir}},E.throwStatementHandler=function(_){var H=this,Se=this.createClosure(_.argument);return function(){throw H.setValue(void 0),Se()}},E.tryStatementHandler=function(_){var H=this,Se=this.createClosure(_.block),We=_.handler?this.catchClauseHandler(_.handler):null,ht=_.finalizer?this.createClosure(_.finalizer):null;return function(){var pt=H.getCurrentScope(),Kt=H.getCurrentContext(),ir=pt.labelStack.concat([]),qr=H.callStack.concat([]),ln=ct,Mn,ui,mi=function(){H.setCurrentScope(pt),H.setCurrentContext(Kt),pt.labelStack=ir,H.callStack=qr};try{ln=H.setValue(Se()),ln instanceof d&&(Mn=ln)}catch(Ri){if(mi(),H.isInterruptThrow(Ri))throw Ri;if(We)try{ln=H.setValue(We(Ri)),ln instanceof d&&(Mn=ln)}catch($a){if(mi(),H.isInterruptThrow($a))throw $a;ui=$a}}if(ht)try{ln=ht(),ln instanceof d&&(Mn=ln)}catch(Ri){if(mi(),H.isInterruptThrow(Ri))throw Ri;ui=Ri}if(ui)throw ui;return Mn||ln}},E.catchClauseHandler=function(_){var H=this,Se=this.createParamNameGetter(_.param),We=this.createClosure(_.body);return function(ht){var pt,Kt=H.getCurrentScope(),ir=Kt.data,qr=Se(),ln=Qe.call(ir,qr),Mn=ir[qr];return ir[qr]=ht,pt=We(),ln?ir[qr]=Mn:delete ir[qr],pt}},E.continueStatementHandler=function(_){return function(){return _.label?new j(_.label.name):K}},E.breakStatementHandler=function(_){return function(){return _.label?new O(_.label.name):U}},E.switchStatementHandler=function(_){var H=this,Se=this.createClosure(_.discriminant),We=_.cases.map(function(ht){return H.switchCaseHandler(ht)});return function(){for(var ht=Se(),pt=!1,Kt,ir,qr,ln=0;ln<We.length;ln++){var Mn=We[ln](),ui=Mn.testClosure();if(ui===Me){qr=Mn;continue}if(pt||ui===ht){if(pt=!0,ir=H.setValue(Mn.bodyClosure()),ir===ct)continue;if(ir===U||(Kt=ir,Kt instanceof d||Kt instanceof O||Kt instanceof j||Kt===K))break}}if(!pt&&qr){ir=H.setValue(qr.bodyClosure());var mi=ir===ct||ir===U||ir===K;mi||(Kt=ir)}return Kt}},E.switchCaseHandler=function(_){var H=_.test?this.createClosure(_.test):function(){return Me},Se=this.createClosure({type:"BlockStatement",body:_.consequent});return function(){return{testClosure:H,bodyClosure:Se}}},E.labeledStatementHandler=function(_){var H=this,Se=_.label.name,We=this.createClosure(_.body);return function(){var ht,pt=H.getCurrentScope();return pt.labelStack.push(Se),ht=We(_),ht instanceof O&&ht.value===Se&&(ht=ct),pt.labelStack.pop(),ht}},E.debuggerStatementHandler=function(_){return function(){debugger;return ct}},E.createParamNameGetter=function(_){if(_.type==="Identifier")return function(){return _.name};throw this.createInternalThrowError(bi.ParamTypeSyntaxError,_.type,_)},E.createObjectKeyGetter=function(_){var H;return _.type==="Identifier"?H=function(){return _.name}:H=this.createClosure(_),function(){return H()}},E.createMemberKeyGetter=function(_){return _.computed?this.createClosure(_.property):this.createObjectKeyGetter(_.property)},E.createObjectGetter=function(_){var H=this;switch(_.type){case"Identifier":return function(){return H.getScopeDataFromName(_.name,H.getCurrentScope())};case"MemberExpression":return this.createClosure(_.object);default:throw this.createInternalThrowError(bi.AssignmentTypeSyntaxError,_.type,_)}},E.createNameGetter=function(_){switch(_.type){case"Identifier":return function(){return _.name};case"MemberExpression":return this.createMemberKeyGetter(_);default:throw this.createInternalThrowError(bi.AssignmentTypeSyntaxError,_.type,_)}},E.varDeclaration=function(_){var H=this.collectDeclVars;H[_]=void 0},E.funcDeclaration=function(_,H){var Se=this.collectDeclFuncs;Se[_]=H},E.addDeclarationsToScope=function(_,H,Se){var We=Se.data;for(var ht in H){var pt=H[ht];We[ht]=pt&&pt()}for(var Kt in _)Kt in We||(We[Kt]=void 0)},E.getScopeValue=function(_,H){var Se=this.getScopeFromName(_,H);return Se.data[_]},E.getScopeDataFromName=function(_,H){return this.getScopeFromName(_,H).data},E.getScopeFromName=function(_,H){var Se=H;do if(_ in Se.data)return Se;while(Se=Se.parent);return this.globalScope},E.setValue=function(_){var H=this.callStack.length;return this.isVarDeclMode||H||_===ct||_===U||_===K||_ instanceof O||_ instanceof j||(this.value=_ instanceof d?_.value:_),_},E.getValue=function(){return this.value},c}();Ut.version=ce,Ut.eval=Gt,Ut.Function=s,Ut.ecmaVersion=5,Ut.globalContextInFunction=void 0,Ut.global=Object.create(null);function Jt(c){return c===void 0&&(c=Object.create(null)),c}function hr(c,E,w){E===void 0&&(E=[]),w===void 0&&(w={});var _=w.parsingContext,H=w.timeout===void 0?0:w.timeout,Se=`
    (function anonymous(`+E.join(",")+`){
         `+c+`
    });
    `,We=new Ut(_,{ecmaVersion:w.ecmaVersion,timeout:H,rootContext:w.rootContext,globalContextInFunction:w.globalContextInFunction});return We.evaluate(Se)}function dr(c,E,w){var _=new Ut(E,w);return _.evaluate(c)}var Ar=dr,rn=function(){function c(w){this._code=w}var E=c.prototype;return E.runInContext=function(_){return dr(this._code,_)},E.runInNewContext=function(_){return dr(this._code,_)},c}(),$r=function(c,E,w){return dr(c,E,w)},sr=function(){for(var c=arguments.length,E=new Array(c),w=0;w<c;w++)E[w]=arguments[w];var _=E.pop();return hr(_||"",E)},On=v.default=$r},mIFG:function(A,v,a){var l=a("7JgH"),o=a("Ufxn");function m(g){return g!=null&&o(g.length)&&!l(g)}A.exports=m},mKcU:function(A,v){function a(){return!1}A.exports=a},mNvP:function(A,v,a){(function(l,o){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var m;(function(g){(function(p){var y=typeof o=="object"?o:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),b=I(g);typeof y.Reflect=="undefined"?y.Reflect=g:b=I(y.Reflect,b),p(b);function I(P,M){return function(z,oe){typeof P[z]!="function"&&Object.defineProperty(P,z,{configurable:!0,writable:!0,value:oe}),M&&M(z,oe)}}})(function(p){var y=Object.prototype.hasOwnProperty,b=typeof Symbol=="function",I=b&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",P=b&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",M=typeof Object.create=="function",z={__proto__:[]}instanceof Array,oe=!M&&!z,G={create:M?function(){return ki(Object.create(null))}:z?function(){return ki({__proto__:null})}:function(){return ki({})},has:oe?function(ve,Ye){return y.call(ve,Ye)}:function(ve,Ye){return Ye in ve},get:oe?function(ve,Ye){return y.call(ve,Ye)?ve[Ye]:void 0}:function(ve,Ye){return ve[Ye]}},ee=Object.getPrototypeOf(Function),pe=typeof l=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",J=!pe&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:tn(),se=!pe&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Fn(),fe=!pe&&typeof WeakMap=="function"?WeakMap:Fi(),X=new fe;function Oe(ve,Ye,vt,wt){if(vr(vt)){if(!gt(ve))throw new TypeError;if(!Lt(Ye))throw new TypeError;return rt(ve,Ye)}else{if(!gt(ve))throw new TypeError;if(!Ne(Ye))throw new TypeError;if(!Ne(wt)&&!vr(wt)&&!tt(wt))throw new TypeError;return tt(wt)&&(wt=void 0),vt=Bt(vt),At(ve,Ye,vt,wt)}}p("decorate",Oe);function D(ve,Ye){function vt(wt,me){if(!Ne(wt))throw new TypeError;if(!vr(me)&&!qt(me))throw new TypeError;ze(ve,Ye,wt,me)}return vt}p("metadata",D);function De(ve,Ye,vt,wt){if(!Ne(vt))throw new TypeError;return vr(wt)||(wt=Bt(wt)),ze(ve,Ye,vt,wt)}p("defineMetadata",De);function ot(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),ne(ve,Ye,vt)}p("hasMetadata",ot);function Ke(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),Q(ve,Ye,vt)}p("hasOwnMetadata",Ke);function Le(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),te(ve,Ye,vt)}p("getMetadata",Le);function W(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;return vr(vt)||(vt=Bt(vt)),Fe(ve,Ye,vt)}p("getOwnMetadata",W);function He(ve,Ye){if(!Ne(ve))throw new TypeError;return vr(Ye)||(Ye=Bt(Ye)),St(ve,Ye)}p("getMetadataKeys",He);function C(ve,Ye){if(!Ne(ve))throw new TypeError;return vr(Ye)||(Ye=Bt(Ye)),ut(ve,Ye)}p("getOwnMetadataKeys",C);function Ze(ve,Ye,vt){if(!Ne(Ye))throw new TypeError;vr(vt)||(vt=Bt(vt));var wt=Et(Ye,vt,!1);if(vr(wt)||!wt.delete(ve))return!1;if(wt.size>0)return!0;var me=X.get(Ye);return me.delete(vt),me.size>0||X.delete(Ye),!0}p("deleteMetadata",Ze);function rt(ve,Ye){for(var vt=ve.length-1;vt>=0;--vt){var wt=ve[vt],me=wt(Ye);if(!vr(me)&&!tt(me)){if(!Lt(me))throw new TypeError;Ye=me}}return Ye}function At(ve,Ye,vt,wt){for(var me=ve.length-1;me>=0;--me){var Pn=ve[me],Cr=Pn(Ye,vt,wt);if(!vr(Cr)&&!tt(Cr)){if(!Ne(Cr))throw new TypeError;wt=Cr}}return wt}function Et(ve,Ye,vt){var wt=X.get(ve);if(vr(wt)){if(!vt)return;wt=new J,X.set(ve,wt)}var me=wt.get(Ye);if(vr(me)){if(!vt)return;me=new J,wt.set(Ye,me)}return me}function ne(ve,Ye,vt){var wt=Q(ve,Ye,vt);if(wt)return!0;var me=ue(Ye);return tt(me)?!1:ne(ve,me,vt)}function Q(ve,Ye,vt){var wt=Et(Ye,vt,!1);return vr(wt)?!1:Ge(wt.has(ve))}function te(ve,Ye,vt){var wt=Q(ve,Ye,vt);if(wt)return Fe(ve,Ye,vt);var me=ue(Ye);if(!tt(me))return te(ve,me,vt)}function Fe(ve,Ye,vt){var wt=Et(Ye,vt,!1);if(!vr(wt))return wt.get(ve)}function ze(ve,Ye,vt,wt){var me=Et(vt,wt,!0);me.set(ve,Ye)}function St(ve,Ye){var vt=ut(ve,Ye),wt=ue(ve);if(wt===null)return vt;var me=St(wt,Ye);if(me.length<=0)return vt;if(vt.length<=0)return me;for(var Pn=new se,Cr=[],Nt=0,it=vt;Nt<it.length;Nt++){var Ce=it[Nt],Rt=Pn.has(Ce);Rt||(Pn.add(Ce),Cr.push(Ce))}for(var _t=0,Tn=me;_t<Tn.length;_t++){var Ce=Tn[_t],Rt=Pn.has(Ce);Rt||(Pn.add(Ce),Cr.push(Ce))}return Cr}function ut(ve,Ye){var vt=[],wt=Et(ve,Ye,!1);if(vr(wt))return vt;for(var me=wt.keys(),Pn=tr(me),Cr=0;;){var Nt=rr(Pn);if(!Nt)return vt.length=Cr,vt;var it=Xr(Nt);try{vt[Cr]=it}catch(Ce){try{bn(Pn)}finally{throw Ce}}Cr++}}function Qt(ve){if(ve===null)return 1;switch(typeof ve){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ve===null?1:6;default:return 6}}function vr(ve){return ve===void 0}function tt(ve){return ve===null}function Pe(ve){return typeof ve=="symbol"}function Ne(ve){return typeof ve=="object"?ve!==null:typeof ve=="function"}function ke(ve,Ye){switch(Qt(ve)){case 0:return ve;case 1:return ve;case 2:return ve;case 3:return ve;case 4:return ve;case 5:return ve}var vt=Ye===3?"string":Ye===5?"number":"default",wt=xr(ve,I);if(wt!==void 0){var me=wt.call(ve,vt);if(Ne(me))throw new TypeError;return me}return et(ve,vt==="default"?"number":vt)}function et(ve,Ye){if(Ye==="string"){var vt=ve.toString;if(ge(vt)){var wt=vt.call(ve);if(!Ne(wt))return wt}var me=ve.valueOf;if(ge(me)){var wt=me.call(ve);if(!Ne(wt))return wt}}else{var me=ve.valueOf;if(ge(me)){var wt=me.call(ve);if(!Ne(wt))return wt}var Pn=ve.toString;if(ge(Pn)){var wt=Pn.call(ve);if(!Ne(wt))return wt}}throw new TypeError}function Ge(ve){return!!ve}function Ot(ve){return""+ve}function Bt(ve){var Ye=ke(ve,3);return Pe(Ye)?Ye:Ot(Ye)}function gt(ve){return Array.isArray?Array.isArray(ve):ve instanceof Object?ve instanceof Array:Object.prototype.toString.call(ve)==="[object Array]"}function ge(ve){return typeof ve=="function"}function Lt(ve){return typeof ve=="function"}function qt(ve){switch(Qt(ve)){case 3:return!0;case 4:return!0;default:return!1}}function xr(ve,Ye){var vt=ve[Ye];if(vt!=null){if(!ge(vt))throw new TypeError;return vt}}function tr(ve){var Ye=xr(ve,P);if(!ge(Ye))throw new TypeError;var vt=Ye.call(ve);if(!Ne(vt))throw new TypeError;return vt}function Xr(ve){return ve.value}function rr(ve){var Ye=ve.next();return Ye.done?!1:Ye}function bn(ve){var Ye=ve.return;Ye&&Ye.call(ve)}function ue(ve){var Ye=Object.getPrototypeOf(ve);if(typeof ve!="function"||ve===ee||Ye!==ee)return Ye;var vt=ve.prototype,wt=vt&&Object.getPrototypeOf(vt);if(wt==null||wt===Object.prototype)return Ye;var me=wt.constructor;return typeof me!="function"||me===ve?Ye:me}function tn(){var ve={},Ye=[],vt=function(){function Cr(Nt,it,Ce){this._index=0,this._keys=Nt,this._values=it,this._selector=Ce}return Cr.prototype["@@iterator"]=function(){return this},Cr.prototype[P]=function(){return this},Cr.prototype.next=function(){var Nt=this._index;if(Nt>=0&&Nt<this._keys.length){var it=this._selector(this._keys[Nt],this._values[Nt]);return Nt+1>=this._keys.length?(this._index=-1,this._keys=Ye,this._values=Ye):this._index++,{value:it,done:!1}}return{value:void 0,done:!0}},Cr.prototype.throw=function(Nt){throw this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),Nt},Cr.prototype.return=function(Nt){return this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),{value:Nt,done:!0}},Cr}();return function(){function Cr(){this._keys=[],this._values=[],this._cacheKey=ve,this._cacheIndex=-2}return Object.defineProperty(Cr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Cr.prototype.has=function(Nt){return this._find(Nt,!1)>=0},Cr.prototype.get=function(Nt){var it=this._find(Nt,!1);return it>=0?this._values[it]:void 0},Cr.prototype.set=function(Nt,it){var Ce=this._find(Nt,!0);return this._values[Ce]=it,this},Cr.prototype.delete=function(Nt){var it=this._find(Nt,!1);if(it>=0){for(var Ce=this._keys.length,Rt=it+1;Rt<Ce;Rt++)this._keys[Rt-1]=this._keys[Rt],this._values[Rt-1]=this._values[Rt];return this._keys.length--,this._values.length--,Nt===this._cacheKey&&(this._cacheKey=ve,this._cacheIndex=-2),!0}return!1},Cr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ve,this._cacheIndex=-2},Cr.prototype.keys=function(){return new vt(this._keys,this._values,wt)},Cr.prototype.values=function(){return new vt(this._keys,this._values,me)},Cr.prototype.entries=function(){return new vt(this._keys,this._values,Pn)},Cr.prototype["@@iterator"]=function(){return this.entries()},Cr.prototype[P]=function(){return this.entries()},Cr.prototype._find=function(Nt,it){return this._cacheKey!==Nt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nt)),this._cacheIndex<0&&it&&(this._cacheIndex=this._keys.length,this._keys.push(Nt),this._values.push(void 0)),this._cacheIndex},Cr}();function wt(Cr,Nt){return Cr}function me(Cr,Nt){return Nt}function Pn(Cr,Nt){return[Cr,Nt]}}function Fn(){return function(){function ve(){this._map=new J}return Object.defineProperty(ve.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ve.prototype.has=function(Ye){return this._map.has(Ye)},ve.prototype.add=function(Ye){return this._map.set(Ye,Ye),this},ve.prototype.delete=function(Ye){return this._map.delete(Ye)},ve.prototype.clear=function(){this._map.clear()},ve.prototype.keys=function(){return this._map.keys()},ve.prototype.values=function(){return this._map.values()},ve.prototype.entries=function(){return this._map.entries()},ve.prototype["@@iterator"]=function(){return this.keys()},ve.prototype[P]=function(){return this.keys()},ve}()}function Fi(){var ve=16,Ye=G.create(),vt=wt();return function(){function it(){this._key=wt()}return it.prototype.has=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?G.has(Rt,this._key):!1},it.prototype.get=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?G.get(Rt,this._key):void 0},it.prototype.set=function(Ce,Rt){var _t=me(Ce,!0);return _t[this._key]=Rt,this},it.prototype.delete=function(Ce){var Rt=me(Ce,!1);return Rt!==void 0?delete Rt[this._key]:!1},it.prototype.clear=function(){this._key=wt()},it}();function wt(){var it;do it="@@WeakMap@@"+Nt();while(G.has(Ye,it));return Ye[it]=!0,it}function me(it,Ce){if(!y.call(it,vt)){if(!Ce)return;Object.defineProperty(it,vt,{value:G.create()})}return it[vt]}function Pn(it,Ce){for(var Rt=0;Rt<Ce;++Rt)it[Rt]=Math.random()*255|0;return it}function Cr(it){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(it)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(it)):Pn(new Uint8Array(it),it):Pn(new Array(it),it)}function Nt(){var it=Cr(ve);it[6]=it[6]&79|64,it[8]=it[8]&191|128;for(var Ce="",Rt=0;Rt<ve;++Rt){var _t=it[Rt];(Rt===4||Rt===6||Rt===8)&&(Ce+="-"),_t<16&&(Ce+="0"),Ce+=_t.toString(16).toLowerCase()}return Ce}}function ki(ve){return ve.__=void 0,delete ve.__,ve}})})(m||(m={}))}).call(this,a("BBhR"),a("QLrv"))},mXAs:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Request=void 0;var l=a("gbO8"),o=function(){function m(g,p,y,b,I){this.id=l.id(),this.serviceIdentifier=g,this.parentContext=p,this.parentRequest=y,this.target=I,this.childRequests=[],this.bindings=Array.isArray(b)?b:[b],this.requestScope=y===null?new Map:null}return m.prototype.addChildRequest=function(g,p,y){var b=new m(g,this.parentContext,this,p,y);return this.childRequests.push(b),b},m}();v.Request=o},msMk:function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\ufe0e\\ufe0f",y="\\u200d",b=RegExp("["+y+a+g+p+"]");function I(P){return b.test(P)}A.exports=I},mvr4:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingWhenSyntax=void 0;var l=a("HgGm"),o=a("fwlV"),m=function(){function g(p){this._binding=p}return g.prototype.when=function(p){return this._binding.constraint=p,new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetNamed=function(p){return this._binding.constraint=o.namedConstraint(p),new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(p){var y=p.target!==null&&!p.target.isNamed()&&!p.target.isTagged();return y},new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetTagged=function(p,y){return this._binding.constraint=o.taggedConstraint(p)(y),new l.BindingOnSyntax(this._binding)},g.prototype.whenInjectedInto=function(p){return this._binding.constraint=function(y){return o.typeConstraint(p)(y.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenParentNamed=function(p){return this._binding.constraint=function(y){return o.namedConstraint(p)(y.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenParentTagged=function(p,y){return this._binding.constraint=function(b){return o.taggedConstraint(p)(y)(b.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorIs=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,o.typeConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorIs=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,o.typeConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorNamed=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,o.namedConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorNamed=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,o.namedConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorTagged=function(p,y){return this._binding.constraint=function(b){return o.traverseAncerstors(b,o.taggedConstraint(p)(y))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorTagged=function(p,y){return this._binding.constraint=function(b){return!o.traverseAncerstors(b,o.taggedConstraint(p)(y))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorMatches=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,p)},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorMatches=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,p)},new l.BindingOnSyntax(this._binding)},g}();v.BindingWhenSyntax=m},mvsW:function(A,v){function a(l,o,m){return l===l&&(m!==void 0&&(l=l<=m?l:m),o!==void 0&&(l=l>=o?l:o)),l}A.exports=a},n0lD:function(A,v,a){var l=a("RrrF"),o=a("PLPH"),m=a("9Emb"),g="['\u2019]",p=RegExp(g,"g");function y(b){return function(I){return l(m(o(I).replace(p,"")),b,"")}}A.exports=y},n2J3:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.unmanaged=void 0;var l=a("xfSm"),o=a("GXnB"),m=a("Ztfv");function g(){return function(p,y,b){var I=new o.Metadata(l.UNMANAGED_TAG,!0);m.tagParameter(p,y,b,I)}}v.unmanaged=g},n3AX:function(A,v,a){var l=a("Nsbk");function o(m,g){for(;!Object.prototype.hasOwnProperty.call(m,g)&&(m=l(m),m!==null););return m}A.exports=o,A.exports.default=A.exports,A.exports.__esModule=!0},nY2M:function(A,v,a){var l=a("5/ob");function o(m,g,p){var y=m.length;return p=p===void 0?y:p,!g&&p>=y?m:l(m,g,p)}A.exports=o},"nq+A":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var l=a("2lNu");function o(m,g){g===void 0&&(g=!0);var p=l.makePropertyInjectDecorator(m,g),y=l.makePropertyInjectNamedDecorator(m,g),b=l.makePropertyInjectTaggedDecorator(m,g),I=l.makePropertyMultiInjectDecorator(m,g);return{lazyInject:p,lazyInjectNamed:y,lazyInjectTagged:b,lazyMultiInject:I}}v.default=o},"o+pz":function(A,v,a){"use strict";a.d(v,"a",function(){return l});var l;(function(o){o[o.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",o[o.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",o[o.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",o[o.POINTS=0]="POINTS",o[o.LINES=1]="LINES",o[o.LINE_LOOP=2]="LINE_LOOP",o[o.LINE_STRIP=3]="LINE_STRIP",o[o.TRIANGLES=4]="TRIANGLES",o[o.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",o[o.TRIANGLE_FAN=6]="TRIANGLE_FAN",o[o.ZERO=0]="ZERO",o[o.ONE=1]="ONE",o[o.SRC_COLOR=768]="SRC_COLOR",o[o.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",o[o.SRC_ALPHA=770]="SRC_ALPHA",o[o.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",o[o.DST_ALPHA=772]="DST_ALPHA",o[o.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",o[o.DST_COLOR=774]="DST_COLOR",o[o.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",o[o.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",o[o.FUNC_ADD=32774]="FUNC_ADD",o[o.BLEND_EQUATION=32777]="BLEND_EQUATION",o[o.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",o[o.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",o[o.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",o[o.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",o[o.MAX_EXT=32776]="MAX_EXT",o[o.MIN_EXT=32775]="MIN_EXT",o[o.BLEND_DST_RGB=32968]="BLEND_DST_RGB",o[o.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",o[o.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",o[o.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",o[o.CONSTANT_COLOR=32769]="CONSTANT_COLOR",o[o.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",o[o.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",o[o.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",o[o.BLEND_COLOR=32773]="BLEND_COLOR",o[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",o[o.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",o[o.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",o[o.STREAM_DRAW=35040]="STREAM_DRAW",o[o.STATIC_DRAW=35044]="STATIC_DRAW",o[o.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",o[o.BUFFER_SIZE=34660]="BUFFER_SIZE",o[o.BUFFER_USAGE=34661]="BUFFER_USAGE",o[o.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",o[o.FRONT=1028]="FRONT",o[o.BACK=1029]="BACK",o[o.FRONT_AND_BACK=1032]="FRONT_AND_BACK",o[o.CULL_FACE=2884]="CULL_FACE",o[o.BLEND=3042]="BLEND",o[o.DITHER=3024]="DITHER",o[o.STENCIL_TEST=2960]="STENCIL_TEST",o[o.DEPTH_TEST=2929]="DEPTH_TEST",o[o.SCISSOR_TEST=3089]="SCISSOR_TEST",o[o.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",o[o.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",o[o.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",o[o.NO_ERROR=0]="NO_ERROR",o[o.INVALID_ENUM=1280]="INVALID_ENUM",o[o.INVALID_VALUE=1281]="INVALID_VALUE",o[o.INVALID_OPERATION=1282]="INVALID_OPERATION",o[o.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",o[o.CW=2304]="CW",o[o.CCW=2305]="CCW",o[o.LINE_WIDTH=2849]="LINE_WIDTH",o[o.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",o[o.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",o[o.CULL_FACE_MODE=2885]="CULL_FACE_MODE",o[o.FRONT_FACE=2886]="FRONT_FACE",o[o.DEPTH_RANGE=2928]="DEPTH_RANGE",o[o.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",o[o.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",o[o.DEPTH_FUNC=2932]="DEPTH_FUNC",o[o.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",o[o.STENCIL_FUNC=2962]="STENCIL_FUNC",o[o.STENCIL_FAIL=2964]="STENCIL_FAIL",o[o.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",o[o.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",o[o.STENCIL_REF=2967]="STENCIL_REF",o[o.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",o[o.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",o[o.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",o[o.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",o[o.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",o[o.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",o[o.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",o[o.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",o[o.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",o[o.VIEWPORT=2978]="VIEWPORT",o[o.SCISSOR_BOX=3088]="SCISSOR_BOX",o[o.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",o[o.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",o[o.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",o[o.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",o[o.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",o[o.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",o[o.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",o[o.RED_BITS=3410]="RED_BITS",o[o.GREEN_BITS=3411]="GREEN_BITS",o[o.BLUE_BITS=3412]="BLUE_BITS",o[o.ALPHA_BITS=3413]="ALPHA_BITS",o[o.DEPTH_BITS=3414]="DEPTH_BITS",o[o.STENCIL_BITS=3415]="STENCIL_BITS",o[o.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",o[o.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",o[o.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",o[o.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",o[o.SAMPLES=32937]="SAMPLES",o[o.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",o[o.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",o[o.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",o[o.DONT_CARE=4352]="DONT_CARE",o[o.FASTEST=4353]="FASTEST",o[o.NICEST=4354]="NICEST",o[o.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",o[o.BYTE=5120]="BYTE",o[o.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",o[o.SHORT=5122]="SHORT",o[o.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",o[o.INT=5124]="INT",o[o.UNSIGNED_INT=5125]="UNSIGNED_INT",o[o.FLOAT=5126]="FLOAT",o[o.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",o[o.ALPHA=6406]="ALPHA",o[o.RGB=6407]="RGB",o[o.RGBA=6408]="RGBA",o[o.LUMINANCE=6409]="LUMINANCE",o[o.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",o[o.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",o[o.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",o[o.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",o[o.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",o[o.VERTEX_SHADER=35633]="VERTEX_SHADER",o[o.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",o[o.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",o[o.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",o[o.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",o[o.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",o[o.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",o[o.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",o[o.SHADER_TYPE=35663]="SHADER_TYPE",o[o.DELETE_STATUS=35712]="DELETE_STATUS",o[o.LINK_STATUS=35714]="LINK_STATUS",o[o.VALIDATE_STATUS=35715]="VALIDATE_STATUS",o[o.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",o[o.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",o[o.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",o[o.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",o[o.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",o[o.NEVER=512]="NEVER",o[o.LESS=513]="LESS",o[o.EQUAL=514]="EQUAL",o[o.LEQUAL=515]="LEQUAL",o[o.GREATER=516]="GREATER",o[o.NOTEQUAL=517]="NOTEQUAL",o[o.GEQUAL=518]="GEQUAL",o[o.ALWAYS=519]="ALWAYS",o[o.KEEP=7680]="KEEP",o[o.REPLACE=7681]="REPLACE",o[o.INCR=7682]="INCR",o[o.DECR=7683]="DECR",o[o.INVERT=5386]="INVERT",o[o.INCR_WRAP=34055]="INCR_WRAP",o[o.DECR_WRAP=34056]="DECR_WRAP",o[o.VENDOR=7936]="VENDOR",o[o.RENDERER=7937]="RENDERER",o[o.VERSION=7938]="VERSION",o[o.NEAREST=9728]="NEAREST",o[o.LINEAR=9729]="LINEAR",o[o.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",o[o.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",o[o.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",o[o.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",o[o.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",o[o.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",o[o.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",o[o.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",o[o.TEXTURE_2D=3553]="TEXTURE_2D",o[o.TEXTURE=5890]="TEXTURE",o[o.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",o[o.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",o[o.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",o[o.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",o[o.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",o[o.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",o[o.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",o[o.TEXTURE0=33984]="TEXTURE0",o[o.TEXTURE1=33985]="TEXTURE1",o[o.TEXTURE2=33986]="TEXTURE2",o[o.TEXTURE3=33987]="TEXTURE3",o[o.TEXTURE4=33988]="TEXTURE4",o[o.TEXTURE5=33989]="TEXTURE5",o[o.TEXTURE6=33990]="TEXTURE6",o[o.TEXTURE7=33991]="TEXTURE7",o[o.TEXTURE8=33992]="TEXTURE8",o[o.TEXTURE9=33993]="TEXTURE9",o[o.TEXTURE10=33994]="TEXTURE10",o[o.TEXTURE11=33995]="TEXTURE11",o[o.TEXTURE12=33996]="TEXTURE12",o[o.TEXTURE13=33997]="TEXTURE13",o[o.TEXTURE14=33998]="TEXTURE14",o[o.TEXTURE15=33999]="TEXTURE15",o[o.TEXTURE16=34e3]="TEXTURE16",o[o.TEXTURE17=34001]="TEXTURE17",o[o.TEXTURE18=34002]="TEXTURE18",o[o.TEXTURE19=34003]="TEXTURE19",o[o.TEXTURE20=34004]="TEXTURE20",o[o.TEXTURE21=34005]="TEXTURE21",o[o.TEXTURE22=34006]="TEXTURE22",o[o.TEXTURE23=34007]="TEXTURE23",o[o.TEXTURE24=34008]="TEXTURE24",o[o.TEXTURE25=34009]="TEXTURE25",o[o.TEXTURE26=34010]="TEXTURE26",o[o.TEXTURE27=34011]="TEXTURE27",o[o.TEXTURE28=34012]="TEXTURE28",o[o.TEXTURE29=34013]="TEXTURE29",o[o.TEXTURE30=34014]="TEXTURE30",o[o.TEXTURE31=34015]="TEXTURE31",o[o.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",o[o.REPEAT=10497]="REPEAT",o[o.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",o[o.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",o[o.FLOAT_VEC2=35664]="FLOAT_VEC2",o[o.FLOAT_VEC3=35665]="FLOAT_VEC3",o[o.FLOAT_VEC4=35666]="FLOAT_VEC4",o[o.INT_VEC2=35667]="INT_VEC2",o[o.INT_VEC3=35668]="INT_VEC3",o[o.INT_VEC4=35669]="INT_VEC4",o[o.BOOL=35670]="BOOL",o[o.BOOL_VEC2=35671]="BOOL_VEC2",o[o.BOOL_VEC3=35672]="BOOL_VEC3",o[o.BOOL_VEC4=35673]="BOOL_VEC4",o[o.FLOAT_MAT2=35674]="FLOAT_MAT2",o[o.FLOAT_MAT3=35675]="FLOAT_MAT3",o[o.FLOAT_MAT4=35676]="FLOAT_MAT4",o[o.SAMPLER_2D=35678]="SAMPLER_2D",o[o.SAMPLER_CUBE=35680]="SAMPLER_CUBE",o[o.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",o[o.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",o[o.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",o[o.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",o[o.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",o[o.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",o[o.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",o[o.COMPILE_STATUS=35713]="COMPILE_STATUS",o[o.LOW_FLOAT=36336]="LOW_FLOAT",o[o.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",o[o.HIGH_FLOAT=36338]="HIGH_FLOAT",o[o.LOW_INT=36339]="LOW_INT",o[o.MEDIUM_INT=36340]="MEDIUM_INT",o[o.HIGH_INT=36341]="HIGH_INT",o[o.FRAMEBUFFER=36160]="FRAMEBUFFER",o[o.RENDERBUFFER=36161]="RENDERBUFFER",o[o.RGBA4=32854]="RGBA4",o[o.RGB5_A1=32855]="RGB5_A1",o[o.RGB565=36194]="RGB565",o[o.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",o[o.STENCIL_INDEX=6401]="STENCIL_INDEX",o[o.STENCIL_INDEX8=36168]="STENCIL_INDEX8",o[o.DEPTH_STENCIL=34041]="DEPTH_STENCIL",o[o.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",o[o.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",o[o.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",o[o.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",o[o.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",o[o.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",o[o.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",o[o.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",o[o.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",o[o.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",o[o.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",o[o.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",o[o.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",o[o.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",o[o.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",o[o.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",o[o.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",o[o.NONE=0]="NONE",o[o.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",o[o.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",o[o.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",o[o.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",o[o.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",o[o.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",o[o.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",o[o.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",o[o.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",o[o.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",o[o.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",o[o.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",o[o.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",o[o.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(l||(l={}))},o0o1:function(A,v,a){A.exports=a("FHCv")},o3DD:function(A,v){function a(l){return l!==l}A.exports=a},o4Ii:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingCount=void 0;var l={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};v.BindingCount=l},oHaG:function(A,v){function a(){}A.exports=a},oShl:function(A,v,a){var l=a("Nsbk"),o=a("SksO"),m=a("xfeJ"),g=a("sXyB");function p(y){var b=typeof Map=="function"?new Map:void 0;return A.exports=p=function(P){if(P===null||!m(P))return P;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b!="undefined"){if(b.has(P))return b.get(P);b.set(P,M)}function M(){return g(P,arguments,l(this).constructor)}return M.prototype=Object.create(P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),o(M,P)},A.exports.default=A.exports,A.exports.__esModule=!0,p(y)}A.exports=p,A.exports.default=A.exports,A.exports.__esModule=!0},oaX6:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.targetName=void 0;var l=a("xfSm"),o=a("GXnB"),m=a("Ztfv");function g(p){return function(y,b,I){var P=new o.Metadata(l.NAME_TAG,p);m.tagParameter(y,b,I,P)}}v.targetName=g},"oy+k":function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Context=void 0;var l=a("d9O0"),o=function(){function m(g){this.id=l.id(),this.container=g}return m.prototype.addPlan=function(g){this.plan=g},m.prototype.setCurrentRequest=function(g){this.currentRequest=g},m}();v.Context=o},pC8I:function(A,v,a){var l=a("elp8"),o=a("Pfvu"),m="[object Symbol]";function g(p){return typeof p=="symbol"||o(p)&&l(p)==m}A.exports=g},pE9V:function(A,v){function a(l,o){var m=-1,g=l.length;for(o||(o=Array(g));++m<g;)o[m]=l[m];return o}A.exports=a},pY0a:function(A,v){function a(l){return l==null}A.exports=a},qCzz:function(A,v,a){var l=a("P4zC"),o=a("goqI"),m=a("bRBl"),g=a("XePV");function p(y){var b=typeof Map=="function"?new Map:void 0;return A.exports=p=function(P){if(P===null||!m(P))return P;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b!="undefined"){if(b.has(P))return b.get(P);b.set(P,M)}function M(){return g(P,arguments,l(this).constructor)}return M.prototype=Object.create(P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),o(M,P)},A.exports.__esModule=!0,A.exports.default=A.exports,p(y)}A.exports=p,A.exports.__esModule=!0,A.exports.default=A.exports},qHbu:function(A,v,a){var l=a("esxg"),o=a("55HP");function m(g,p){var y=o(g,p);return l(y)?y:void 0}A.exports=m},qK8v:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.isStackOverflowExeption=void 0;var l=a("MON2");function o(m){return m instanceof RangeError||m.message===l.STACK_OVERFLOW}v.isStackOverflowExeption=o},qLt1:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.named=void 0;var l=a("jHQc"),o=a("uYCe"),m=a("Z23J");function g(p){return function(y,b,I){var P=new o.Metadata(l.NAMED_TAG,p);typeof I=="number"?m.tagParameter(y,b,I,P):m.tagProperty(y,b,P)}}v.named=g},qbsE:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.circularDependencyToException=v.listMetadataForTarget=v.listRegisteredBindingsForServiceIdentifier=v.getServiceIdentifierAsString=v.getFunctionName=void 0;var l=a("Z6CD");function o(P){if(typeof P=="function"){var M=P;return M.name}else{if(typeof P=="symbol")return P.toString();var M=P;return M}}v.getServiceIdentifierAsString=o;function m(P,M,z){var oe="",G=z(P,M);return G.length!==0&&(oe=`
Registered bindings:`,G.forEach(function(ee){var pe="Object";ee.implementationType!==null&&(pe=I(ee.implementationType)),oe=oe+`
 `+pe,ee.constraint.metaData&&(oe=oe+" - "+ee.constraint.metaData)})),oe}v.listRegisteredBindingsForServiceIdentifier=m;function g(P,M){return P.parentRequest===null?!1:P.parentRequest.serviceIdentifier===M?!0:g(P.parentRequest,M)}function p(P){function M(oe,G){G===void 0&&(G=[]);var ee=o(oe.serviceIdentifier);return G.push(ee),oe.parentRequest!==null?M(oe.parentRequest,G):G}var z=M(P);return z.reverse().join(" --> ")}function y(P){P.childRequests.forEach(function(M){if(g(M,M.serviceIdentifier)){var z=p(M);throw new Error(l.CIRCULAR_DEPENDENCY+" "+z)}else y(M)})}v.circularDependencyToException=y;function b(P,M){if(M.isTagged()||M.isNamed()){var z="",oe=M.getNamedTag(),G=M.getCustomTags();return oe!==null&&(z+=oe.toString()+`
`),G!==null&&G.forEach(function(ee){z+=ee.toString()+`
`})," "+P+`
 `+P+" - "+z}else return" "+P}v.listMetadataForTarget=b;function I(P){if(P.name)return P.name;var M=P.toString(),z=M.match(/^function\s*([^\s(]+)/);return z?z[1]:"Anonymous function: "+M}v.getFunctionName=I},qsIO:function(A,v,a){var l=a("m3X8"),o=a("n0lD"),m=o(function(g,p,y){return p=p.toLowerCase(),g+(y?l(p):p)});A.exports=m},"r/u4":function(A,v,a){var l=a("2lI5"),o=a("Lu5u"),m=a("N6Zc"),g=a("l3mM"),p=a("LUbI"),y=a("9rFP"),b=200;function I(P,M,z){var oe=-1,G=o,ee=P.length,pe=!0,J=[],se=J;if(z)pe=!1,G=m;else if(ee>=b){var fe=M?null:p(P);if(fe)return y(fe);pe=!1,G=g,se=new l}else se=M?[]:J;e:for(;++oe<ee;){var X=P[oe],Oe=M?M(X):X;if(X=z||X!==0?X:0,pe&&Oe===Oe){for(var D=se.length;D--;)if(se[D]===Oe)continue e;M&&se.push(Oe),J.push(X)}else G(se,Oe,z)||(se!==J&&se.push(Oe),J.push(X))}return J}A.exports=I},r4N0:function(A,v,a){(function(l,o){A.exports=o()})(this,function(){"use strict";function l(Le,W,He,C,Ze,rt){if(!(Ze-C<=He)){var At=C+Ze>>1;o(Le,W,At,C,Ze,rt%2),l(Le,W,He,C,At-1,rt+1),l(Le,W,He,At+1,Ze,rt+1)}}function o(Le,W,He,C,Ze,rt){for(;Ze>C;){if(Ze-C>600){var At=Ze-C+1,Et=He-C+1,ne=Math.log(At),Q=.5*Math.exp(2*ne/3),te=.5*Math.sqrt(ne*Q*(At-Q)/At)*(Et-At/2<0?-1:1),Fe=Math.max(C,Math.floor(He-Et*Q/At+te)),ze=Math.min(Ze,Math.floor(He+(At-Et)*Q/At+te));o(Le,W,He,Fe,ze,rt)}var St=W[2*He+rt],ut=C,Qt=Ze;for(m(Le,W,C,He),W[2*Ze+rt]>St&&m(Le,W,C,Ze);ut<Qt;){for(m(Le,W,ut,Qt),ut++,Qt--;W[2*ut+rt]<St;)ut++;for(;W[2*Qt+rt]>St;)Qt--}W[2*C+rt]===St?m(Le,W,C,Qt):(Qt++,m(Le,W,Qt,Ze)),Qt<=He&&(C=Qt+1),He<=Qt&&(Ze=Qt-1)}}function m(Le,W,He,C){g(Le,He,C),g(W,2*He,2*C),g(W,2*He+1,2*C+1)}function g(Le,W,He){var C=Le[W];Le[W]=Le[He],Le[He]=C}function p(Le,W,He,C,Ze,rt,At){for(var Et=[0,Le.length-1,0],ne=[],Q,te;Et.length;){var Fe=Et.pop(),ze=Et.pop(),St=Et.pop();if(ze-St<=At){for(var ut=St;ut<=ze;ut++)Q=W[2*ut],te=W[2*ut+1],Q>=He&&Q<=Ze&&te>=C&&te<=rt&&ne.push(Le[ut]);continue}var Qt=Math.floor((St+ze)/2);Q=W[2*Qt],te=W[2*Qt+1],Q>=He&&Q<=Ze&&te>=C&&te<=rt&&ne.push(Le[Qt]);var vr=(Fe+1)%2;(Fe===0?He<=Q:C<=te)&&(Et.push(St),Et.push(Qt-1),Et.push(vr)),(Fe===0?Ze>=Q:rt>=te)&&(Et.push(Qt+1),Et.push(ze),Et.push(vr))}return ne}function y(Le,W,He,C,Ze,rt){for(var At=[0,Le.length-1,0],Et=[],ne=Ze*Ze;At.length;){var Q=At.pop(),te=At.pop(),Fe=At.pop();if(te-Fe<=rt){for(var ze=Fe;ze<=te;ze++)b(W[2*ze],W[2*ze+1],He,C)<=ne&&Et.push(Le[ze]);continue}var St=Math.floor((Fe+te)/2),ut=W[2*St],Qt=W[2*St+1];b(ut,Qt,He,C)<=ne&&Et.push(Le[St]);var vr=(Q+1)%2;(Q===0?He-Ze<=ut:C-Ze<=Qt)&&(At.push(Fe),At.push(St-1),At.push(vr)),(Q===0?He+Ze>=ut:C+Ze>=Qt)&&(At.push(St+1),At.push(te),At.push(vr))}return Et}function b(Le,W,He,C){var Ze=Le-He,rt=W-C;return Ze*Ze+rt*rt}var I=function(Le){return Le[0]},P=function(Le){return Le[1]},M=function(W,He,C,Ze,rt){He===void 0&&(He=I),C===void 0&&(C=P),Ze===void 0&&(Ze=64),rt===void 0&&(rt=Float64Array),this.nodeSize=Ze,this.points=W;for(var At=W.length<65536?Uint16Array:Uint32Array,Et=this.ids=new At(W.length),ne=this.coords=new rt(W.length*2),Q=0;Q<W.length;Q++)Et[Q]=Q,ne[2*Q]=He(W[Q]),ne[2*Q+1]=C(W[Q]);l(Et,ne,Ze,0,Et.length-1,0)};M.prototype.range=function(W,He,C,Ze){return p(this.ids,this.coords,W,He,C,Ze,this.nodeSize)},M.prototype.within=function(W,He,C){return y(this.ids,this.coords,W,He,C,this.nodeSize)};var z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Le){return Le}},oe=Math.fround||function(Le){return function(W){return Le[0]=+W,Le[0]}}(new Float32Array(1)),G=function(W){this.options=De(Object.create(z),W),this.trees=new Array(this.options.maxZoom+1)};G.prototype.load=function(W){var He=this.options,C=He.log,Ze=He.minZoom,rt=He.maxZoom,At=He.nodeSize;C&&console.time("total time");var Et="prepare "+W.length+" points";C&&console.time(Et),this.points=W;for(var ne=[],Q=0;Q<W.length;Q++)!W[Q].geometry||ne.push(pe(W[Q],Q));this.trees[rt+1]=new M(ne,ot,Ke,At,Float32Array),C&&console.timeEnd(Et);for(var te=rt;te>=Ze;te--){var Fe=+Date.now();ne=this._cluster(ne,te),this.trees[te]=new M(ne,ot,Ke,At,Float32Array),C&&console.log("z%d: %d clusters in %dms",te,ne.length,+Date.now()-Fe)}return C&&console.timeEnd("total time"),this},G.prototype.getClusters=function(W,He){var C=((W[0]+180)%360+360)%360-180,Ze=Math.max(-90,Math.min(90,W[1])),rt=W[2]===180?180:((W[2]+180)%360+360)%360-180,At=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)C=-180,rt=180;else if(C>rt){var Et=this.getClusters([C,Ze,180,At],He),ne=this.getClusters([-180,Ze,rt,At],He);return Et.concat(ne)}for(var Q=this.trees[this._limitZoom(He)],te=Q.range(fe(C),X(At),fe(rt),X(Ze)),Fe=[],ze=0,St=te;ze<St.length;ze+=1){var ut=St[ze],Qt=Q.points[ut];Fe.push(Qt.numPoints?J(Qt):this.points[Qt.index])}return Fe},G.prototype.getChildren=function(W){var He=this._getOriginId(W),C=this._getOriginZoom(W),Ze="No cluster with the specified id.",rt=this.trees[C];if(!rt)throw new Error(Ze);var At=rt.points[He];if(!At)throw new Error(Ze);for(var Et=this.options.radius/(this.options.extent*Math.pow(2,C-1)),ne=rt.within(At.x,At.y,Et),Q=[],te=0,Fe=ne;te<Fe.length;te+=1){var ze=Fe[te],St=rt.points[ze];St.parentId===W&&Q.push(St.numPoints?J(St):this.points[St.index])}if(Q.length===0)throw new Error(Ze);return Q},G.prototype.getLeaves=function(W,He,C){He=He||10,C=C||0;var Ze=[];return this._appendLeaves(Ze,W,He,C,0),Ze},G.prototype.getTile=function(W,He,C){var Ze=this.trees[this._limitZoom(W)],rt=Math.pow(2,W),At=this.options,Et=At.extent,ne=At.radius,Q=ne/Et,te=(C-Q)/rt,Fe=(C+1+Q)/rt,ze={features:[]};return this._addTileFeatures(Ze.range((He-Q)/rt,te,(He+1+Q)/rt,Fe),Ze.points,He,C,rt,ze),He===0&&this._addTileFeatures(Ze.range(1-Q/rt,te,1,Fe),Ze.points,rt,C,rt,ze),He===rt-1&&this._addTileFeatures(Ze.range(0,te,Q/rt,Fe),Ze.points,-1,C,rt,ze),ze.features.length?ze:null},G.prototype.getClusterExpansionZoom=function(W){for(var He=this._getOriginZoom(W)-1;He<=this.options.maxZoom;){var C=this.getChildren(W);if(He++,C.length!==1)break;W=C[0].properties.cluster_id}return He},G.prototype._appendLeaves=function(W,He,C,Ze,rt){for(var At=this.getChildren(He),Et=0,ne=At;Et<ne.length;Et+=1){var Q=ne[Et],te=Q.properties;if(te&&te.cluster?rt+te.point_count<=Ze?rt+=te.point_count:rt=this._appendLeaves(W,te.cluster_id,C,Ze,rt):rt<Ze?rt++:W.push(Q),W.length===C)break}return rt},G.prototype._addTileFeatures=function(W,He,C,Ze,rt,At){for(var Et=0,ne=W;Et<ne.length;Et+=1){var Q=ne[Et],te=He[Q],Fe=te.numPoints,ze=void 0,St=void 0,ut=void 0;if(Fe)ze=se(te),St=te.x,ut=te.y;else{var Qt=this.points[te.index];ze=Qt.properties,St=fe(Qt.geometry.coordinates[0]),ut=X(Qt.geometry.coordinates[1])}var vr={type:1,geometry:[[Math.round(this.options.extent*(St*rt-C)),Math.round(this.options.extent*(ut*rt-Ze))]],tags:ze},tt=void 0;Fe?tt=te.id:this.options.generateId?tt=te.index:this.points[te.index].id&&(tt=this.points[te.index].id),tt!==void 0&&(vr.id=tt),At.features.push(vr)}},G.prototype._limitZoom=function(W){return Math.max(this.options.minZoom,Math.min(+W,this.options.maxZoom+1))},G.prototype._cluster=function(W,He){for(var C=[],Ze=this.options,rt=Ze.radius,At=Ze.extent,Et=Ze.reduce,ne=Ze.minPoints,Q=rt/(At*Math.pow(2,He)),te=0;te<W.length;te++){var Fe=W[te];if(!(Fe.zoom<=He)){Fe.zoom=He;for(var ze=this.trees[He+1],St=ze.within(Fe.x,Fe.y,Q),ut=Fe.numPoints||1,Qt=ut,vr=0,tt=St;vr<tt.length;vr+=1){var Pe=tt[vr],Ne=ze.points[Pe];Ne.zoom>He&&(Qt+=Ne.numPoints||1)}if(Qt>ut&&Qt>=ne){for(var ke=Fe.x*ut,et=Fe.y*ut,Ge=Et&&ut>1?this._map(Fe,!0):null,Ot=(te<<5)+(He+1)+this.points.length,Bt=0,gt=St;Bt<gt.length;Bt+=1){var ge=gt[Bt],Lt=ze.points[ge];if(!(Lt.zoom<=He)){Lt.zoom=He;var qt=Lt.numPoints||1;ke+=Lt.x*qt,et+=Lt.y*qt,Lt.parentId=Ot,Et&&(Ge||(Ge=this._map(Fe,!0)),Et(Ge,this._map(Lt)))}}Fe.parentId=Ot,C.push(ee(ke/Qt,et/Qt,Ot,Qt,Ge))}else if(C.push(Fe),Qt>1)for(var xr=0,tr=St;xr<tr.length;xr+=1){var Xr=tr[xr],rr=ze.points[Xr];rr.zoom<=He||(rr.zoom=He,C.push(rr))}}}return C},G.prototype._getOriginId=function(W){return W-this.points.length>>5},G.prototype._getOriginZoom=function(W){return(W-this.points.length)%32},G.prototype._map=function(W,He){if(W.numPoints)return He?De({},W.properties):W.properties;var C=this.points[W.index].properties,Ze=this.options.map(C);return He&&Ze===C?De({},Ze):Ze};function ee(Le,W,He,C,Ze){return{x:oe(Le),y:oe(W),zoom:Infinity,id:He,parentId:-1,numPoints:C,properties:Ze}}function pe(Le,W){var He=Le.geometry.coordinates,C=He[0],Ze=He[1];return{x:oe(fe(C)),y:oe(X(Ze)),zoom:Infinity,index:W,parentId:-1}}function J(Le){return{type:"Feature",id:Le.id,properties:se(Le),geometry:{type:"Point",coordinates:[Oe(Le.x),D(Le.y)]}}}function se(Le){var W=Le.numPoints,He=W>=1e4?Math.round(W/1e3)+"k":W>=1e3?Math.round(W/100)/10+"k":W;return De(De({},Le.properties),{cluster:!0,cluster_id:Le.id,point_count:W,point_count_abbreviated:He})}function fe(Le){return Le/360+.5}function X(Le){var W=Math.sin(Le*Math.PI/180),He=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return He<0?0:He>1?1:He}function Oe(Le){return(Le-.5)*360}function D(Le){var W=(180-Le*360)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function De(Le,W){for(var He in W)Le[He]=W[He];return Le}function ot(Le){return Le.x}function Ke(Le){return Le.y}return G})},rGxU:function(A,v){function a(l){var o=[];if(l!=null)for(var m in Object(l))o.push(m);return o}A.exports=a},rLCn:function(A,v){function a(o){var m=o.target||o.srcElement;m.__resizeRAF__&&cancelAnimationFrame(m.__resizeRAF__),m.__resizeRAF__=requestAnimationFrame(function(){var g=m.__resizeTrigger__,p=g&&g.__resizeListeners__;p&&p.forEach(function(y){y.call(g,o)})})}var l=function(m,g){var p=this,y=p.document,b,I=y.attachEvent;typeof navigator!="undefined"&&(b=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function P(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a)}if(!m.__resizeListeners__)if(m.__resizeListeners__=[],I)m.__resizeTrigger__=m,m.attachEvent("onresize",a);else{getComputedStyle(m).position==="static"&&(m.style.position="relative");var M=m.__resizeTrigger__=y.createElement("object");M.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),M.setAttribute("class","resize-sensor"),M.setAttribute("tabindex","-1"),M.setAttribute("title",""),M.__resizeElement__=m,M.onload=P,M.type="text/html",b&&m.appendChild(M),M.data="about:blank",b||m.appendChild(M)}m.__resizeListeners__.push(g)};A.exports=typeof window=="undefined"?l:l.bind(window),A.exports.unbind=function(o,m){var g=document.attachEvent,p=o.__resizeListeners__||[];if(m){var y=p.indexOf(m);y!==-1&&p.splice(y,1)}else p=o.__resizeListeners__=[];if(!p.length){if(g)o.detachEvent("onresize",a);else if(o.__resizeTrigger__){var b=o.__resizeTrigger__.contentDocument,I=b&&b.defaultView;I&&(I.removeEventListener("resize",a),delete I.__resizeTrigger__),o.__resizeTrigger__=!o.removeChild(o.__resizeTrigger__)}delete o.__resizeListeners__}}},"rLS+":function(A,v,a){var l=a("rSfh"),o=a("JXFl"),m=Object.prototype,g=m.hasOwnProperty;function p(y,b,I){var P=y[b];(!(g.call(y,b)&&o(P,I))||I===void 0&&!(b in y))&&l(y,b,I)}A.exports=p},rSfh:function(A,v,a){var l=a("Mn8k");function o(m,g,p){g=="__proto__"&&l?l(m,g,{configurable:!0,enumerable:!0,value:p,writable:!0}):m[g]=p}A.exports=o},riiI:function(A,v){},rxlC:function(A,v,a){"use strict";A.exports=o,A.exports.default=o;var l=1e20;function o(b,I,P,M,z,oe){this.fontSize=b||24,this.buffer=I===void 0?3:I,this.cutoff=M||.25,this.fontFamily=z||"sans-serif",this.fontWeight=oe||"normal",this.radius=P||8;var G=this.size=this.fontSize+this.buffer*2,ee=G+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=G,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Uint16Array(ee),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(G/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(b,I,P,M,z,oe,G){oe.fill(l,0,I*P),G.fill(0,0,I*P);for(var ee=(I-M)/2,pe=0;pe<z;pe++)for(var J=0;J<M;J++){var se=(pe+ee)*I+J+ee,fe=b.data[4*(pe*M+J)+3]/255;if(fe===1)oe[se]=0,G[se]=l;else if(fe===0)oe[se]=l,G[se]=0;else{var X=Math.max(0,.5-fe),Oe=Math.max(0,fe-.5);oe[se]=X*X,G[se]=Oe*Oe}}}function g(b,I,P,M,z,oe,G){for(var ee=0;ee<I*P;ee++){var pe=Math.sqrt(M[ee])-Math.sqrt(z[ee]);b[ee]=Math.round(255-255*(pe/oe+G))}}o.prototype._draw=function(b,I){var P=this.ctx.measureText(b),M=P.width,z=2*this.buffer,oe,G,ee,pe,J,se,fe,X;I&&this.useMetrics?(J=Math.floor(P.actualBoundingBoxAscent),X=this.buffer+Math.ceil(P.actualBoundingBoxAscent),se=this.buffer,fe=this.buffer,G=Math.min(this.size,Math.ceil(P.actualBoundingBoxRight-P.actualBoundingBoxLeft)),pe=Math.min(this.size-se,Math.ceil(P.actualBoundingBoxAscent+P.actualBoundingBoxDescent)),oe=G+z,ee=pe+z,this.ctx.textBaseline="alphabetic"):(oe=G=this.size,ee=pe=this.size,J=19*this.fontSize/24,se=fe=0,X=this.middle,this.ctx.textBaseline="middle");var Oe;G&&pe&&(this.ctx.clearRect(fe,se,G,pe),this.ctx.fillText(b,this.buffer,X),Oe=this.ctx.getImageData(fe,se,G,pe));var D=new Uint8ClampedArray(oe*ee);return m(Oe,oe,ee,G,pe,this.gridOuter,this.gridInner),p(this.gridOuter,oe,ee,this.f,this.v,this.z),p(this.gridInner,oe,ee,this.f,this.v,this.z),g(D,oe,ee,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:D,metrics:{width:G,height:pe,sdfWidth:oe,sdfHeight:ee,top:J,left:0,advance:M}}},o.prototype.draw=function(b){return this._draw(b,!1).data},o.prototype.drawWithMetrics=function(b){return this._draw(b,!0)};function p(b,I,P,M,z,oe){for(var G=0;G<I;G++)y(b,G,I,P,M,z,oe);for(var ee=0;ee<P;ee++)y(b,ee*I,1,I,M,z,oe)}function y(b,I,P,M,z,oe,G){var ee,pe,J,se;for(oe[0]=0,G[0]=-l,G[1]=l,ee=0;ee<M;ee++)z[ee]=b[I+ee*P];for(ee=1,pe=0,J=0;ee<M;ee++){do se=oe[pe],J=(z[ee]-z[se]+ee*ee-se*se)/(ee-se)/2;while(J<=G[pe]&&--pe>-1);pe++,oe[pe]=ee,G[pe]=J,G[pe+1]=l}for(ee=0,pe=0;ee<M;ee++){for(;G[pe+1]<ee;)pe++;se=oe[pe],b[I+ee*P]=z[se]+(ee-se)*(ee-se)}}},sHph:function(A,v){var a=Array.isArray;A.exports=a},sXyB:function(A,v,a){var l=a("SksO"),o=a("b48C");function m(g,p,y){return o()?(A.exports=m=Reflect.construct,A.exports.default=A.exports,A.exports.__esModule=!0):(A.exports=m=function(I,P,M){var z=[null];z.push.apply(z,P);var oe=Function.bind.apply(I,z),G=new oe;return M&&l(G,M.prototype),G},A.exports.default=A.exports,A.exports.__esModule=!0),m.apply(null,arguments)}A.exports=m,A.exports.default=A.exports,A.exports.__esModule=!0},sY7M:function(A,v,a){var l=a("7zvB"),o=l.Uint8Array;A.exports=o},spKn:function(A,v,a){var l=a("C0BC");function o(m){if(Array.isArray(m))return l(m)}A.exports=o,A.exports.__esModule=!0,A.exports.default=A.exports},t4RQ:function(A,v){function a(l,o,m,g,p){var y={};return Object.keys(g).forEach(function(b){y[b]=g[b]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=m.slice().reverse().reduce(function(b,I){return I(l,o,b)||b},y),p&&y.initializer!==void 0&&(y.value=y.initializer?y.initializer.call(p):void 0,y.initializer=void 0),y.initializer===void 0&&(Object.defineProperty(l,o,y),y=null),y}A.exports=a,A.exports.__esModule=!0,A.exports.default=A.exports},tIjD:function(A,v,a){var l=a("YVT0"),o=l("toUpperCase");A.exports=o},tMak:function(A,v,a){var l=a("Zjj6"),o=a("lf6h");function m(g){return o(g)&&l(g)}A.exports=m},tNaB:function(A,v){function a(l){return l!==l}A.exports=a},tOMW:function(A,v,a){var l=a("elp8"),o=a("Ufxn"),m=a("Pfvu"),g="[object Arguments]",p="[object Array]",y="[object Boolean]",b="[object Date]",I="[object Error]",P="[object Function]",M="[object Map]",z="[object Number]",oe="[object Object]",G="[object RegExp]",ee="[object Set]",pe="[object String]",J="[object WeakMap]",se="[object ArrayBuffer]",fe="[object DataView]",X="[object Float32Array]",Oe="[object Float64Array]",D="[object Int8Array]",De="[object Int16Array]",ot="[object Int32Array]",Ke="[object Uint8Array]",Le="[object Uint8ClampedArray]",W="[object Uint16Array]",He="[object Uint32Array]",C={};C[X]=C[Oe]=C[D]=C[De]=C[ot]=C[Ke]=C[Le]=C[W]=C[He]=!0,C[g]=C[p]=C[se]=C[y]=C[fe]=C[b]=C[I]=C[P]=C[M]=C[z]=C[oe]=C[G]=C[ee]=C[pe]=C[J]=!1;function Ze(rt){return m(rt)&&o(rt.length)&&!!C[l(rt)]}A.exports=Ze},tWLo:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.MetadataReader=void 0;var l=a("jHQc"),o=function(){function m(){}return m.prototype.getConstructorMetadata=function(g){var p=Reflect.getMetadata(l.PARAM_TYPES,g),y=Reflect.getMetadata(l.TAGGED,g);return{compilerGeneratedMetadata:p,userGeneratedMetadata:y||{}}},m.prototype.getPropertiesMetadata=function(g){var p=Reflect.getMetadata(l.TAGGED_PROP,g)||[];return p},m}();v.MetadataReader=o},tc49:function(A,v){var a=800,l=16,o=Date.now;function m(g){var p=0,y=0;return function(){var b=o(),I=l-(b-y);if(y=b,I>0){if(++p>=a)return arguments[0]}else p=0;return g.apply(void 0,arguments)}}A.exports=m},tmK8:function(A,v,a){"use strict";a.d(v,"s",function(){return ae}),a.d(v,"a",function(){return Ue}),a.d(v,"p",function(){return _o}),a.d(v,"n",function(){return Co}),a.d(v,"t",function(){return Go}),a.d(v,"e",function(){return is}),a.d(v,"u",function(){return T}),a.d(v,"v",function(){return ie}),a.d(v,"k",function(){return de}),a.d(v,"i",function(){return Be}),a.d(v,"c",function(){return Or}),a.d(v,"j",function(){return br}),a.d(v,"r",function(){return Sr}),a.d(v,"w",function(){return wn}),a.d(v,"l",function(){return Ii}),a.d(v,"m",function(){return ti}),a.d(v,"o",function(){return $n}),a.d(v,"g",function(){return Yr}),a.d(v,"f",function(){return Zn}),a.d(v,"h",function(){return In}),a.d(v,"q",function(){return ba}),a.d(v,"b",function(){return l}),a.d(v,"d",function(){return o});var l={};a.r(l),a.d(l,"getContainer",function(){return Ut}),a.d(l,"trim",function(){return Jt}),a.d(l,"splitWords",function(){return hr}),a.d(l,"create",function(){return Ar}),a.d(l,"remove",function(){return rn}),a.d(l,"addClass",function(){return $r}),a.d(l,"removeClass",function(){return sr}),a.d(l,"hasClass",function(){return On}),a.d(l,"setClass",function(){return c}),a.d(l,"getClass",function(){return E}),a.d(l,"empty",function(){return w}),a.d(l,"setTransform",function(){return H}),a.d(l,"triggerResize",function(){return Se}),a.d(l,"printCanvas",function(){return We}),a.d(l,"getViewPortScale",function(){return ht}),a.d(l,"DPR",function(){return pt});var o={};a.r(o),a.d(o,"sum",function(){return ya}),a.d(o,"max",function(){return na}),a.d(o,"min",function(){return ga}),a.d(o,"mean",function(){return _a}),a.d(o,"mode",function(){return ca}),a.d(o,"statMap",function(){return ci}),a.d(o,"getColumn",function(){return no}),a.d(o,"getSatByColumn",function(){return No});function m(F){var re=131,Te=137,he=0;F+="x";for(var qe=Math.floor(9007199254740991/Te),er=0;er<F.length;er++)he>qe&&(he=Math.floor(he/Te)),he=he*re+F.charCodeAt(er);return he}function g(F){F=F.toString();for(var re=5381,Te=F.length;Te;)re=re*33^F.charCodeAt(--Te);return re>>>0}var p=a("eX8u"),y=a.n(p),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function I(F){this.message=F}I.prototype=new Error,I.prototype.name="InvalidCharacterError";function P(F){var re=String(F).replace(/=+$/,"");if(re.length%4==1)throw new I("'atob' failed: The string to be decoded is not correctly encoded.");for(var Te="",he=0,qe,er,vn=0;er=re.charAt(vn++);~er&&(qe=he%4?qe*64+er:er,he++%4)?Te+=String.fromCharCode(255&qe>>(-2*he&6)):0)er=b.indexOf(er);return Te}function M(F){F=String(F);for(var re,Te,he,qe,er="",vn=0,Gn=F.length%3;vn<F.length;){if((Te=F.charCodeAt(vn++))>255||(he=F.charCodeAt(vn++))>255||(qe=F.charCodeAt(vn++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");re=Te<<16|he<<8|qe,er+=b.charAt(re>>18&63)+b.charAt(re>>12&63)+b.charAt(re>>6&63)+b.charAt(re&63)}return Gn?er.slice(0,Gn-3)+"===".substring(Gn):er}var z=a("+Pqg"),oe=a.n(z),G=a("uBqp"),ee=a.n(G),pe=function(){function F(re,Te){oe()(this,F),this.buffers=re,this.type=Te}return ee()(F,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(Te,he,qe){throw new Error("not implemented")}}]),F}(),J;typeof window=="undefined"?J={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(re){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(re){return null},clearMeasures:function(re){return null},clearMarks:function(re){return null},measure:function(re,Te,he){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(re){return!0},Event:function(re,Te){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:J=window;var se=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,fe=se?my.getSystemInfoSync().pixelRatio:J.devicePixelRatio,X=a("BXlA"),Oe=a.n(X),D=a("0TsE"),De=a.n(D),ot=a("P4zC"),Ke=a.n(ot),Le=a("KeqO"),W=a.n(Le),He=ee()(function F(re,Te){oe()(this,F),W()(this,"cancelBubble",void 0),W()(this,"cancelable",void 0),W()(this,"target",void 0),W()(this,"currentTarget",void 0),W()(this,"preventDefault",void 0),W()(this,"stopPropagation",void 0),W()(this,"type",void 0),W()(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=re,this.timeStamp=Date.now()}),C=a("lGGA"),Ze=a.n(C);function rt(F,re){var Te=typeof Symbol!="undefined"&&F[Symbol.iterator]||F["@@iterator"];if(!Te){if(Array.isArray(F)||(Te=At(F))||re&&F&&typeof F.length=="number"){Te&&(F=Te);var he=0,qe=function(){};return{s:qe,n:function(){return he>=F.length?{done:!0}:{done:!1,value:F[he++]}},e:function(Ja){throw Ja},f:qe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var er=!0,vn=!1,Gn;return{s:function(){Te=Te.call(F)},n:function(){var Ja=Te.next();return er=Ja.done,Ja},e:function(Ja){vn=!0,Gn=Ja},f:function(){try{!er&&Te.return!=null&&Te.return()}finally{if(vn)throw Gn}}}}function At(F,re){if(!!F){if(typeof F=="string")return Et(F,re);var Te=Object.prototype.toString.call(F).slice(8,-1);if(Te==="Object"&&F.constructor&&(Te=F.constructor.name),Te==="Map"||Te==="Set")return Array.from(F);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return Et(F,re)}}function Et(F,re){(re==null||re>F.length)&&(re=F.length);for(var Te=0,he=new Array(re);Te<re;Te++)he[Te]=F[Te];return he}var ne=new WeakMap,Q=function(){function F(){oe()(this,F),ne.set(this,{})}return ee()(F,[{key:"addEventListener",value:function(Te,he){var qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},er=ne.get(this);er||(er={}),er[Te]||(er[Te]=[]),er[Te].push(he),ne.set(this,er),qe.capture,qe.once,qe.passive}},{key:"removeEventListener",value:function(Te,he){var qe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},er=ne.get(this);if(er){var vn=er[Te];if(vn&&vn.length>0){for(var Gn=vn.length;Gn--;Gn>0)if(vn[Gn]===he){vn.splice(Gn,1);break}}}}},{key:"dispatchEvent",value:function(Te){var he=ne.get(this)[Te.type];if(he){var qe=rt(he),er;try{for(qe.s();!(er=qe.n()).done;){var vn=er.value;vn(Te)}}catch(Gn){qe.e(Gn)}finally{qe.f()}}}}]),F}();function te(F){var re=Fe();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function Fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var ze=function(F){Oe()(Te,F);var re=te(Te);function Te(){var he;return oe()(this,Te),he=re.call(this),W()(Ze()(he),"childNodes",void 0),he.childNodes=[],he}return ee()(Te,[{key:"appendChild",value:function(qe){this.childNodes.push(qe)}},{key:"cloneNode",value:function(){var qe=Object.create(this);return Object.assign(qe,this),qe}},{key:"removeChild",value:function(qe){var er=this.childNodes.findIndex(function(vn){return vn===qe});return er>-1?this.childNodes.splice(er,1):null}}]),Te}(Q);function St(F){var re=ut();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Qt=function(F){Oe()(Te,F);var re=St(Te);function Te(){var he;return oe()(this,Te),he=re.call(this),W()(Ze()(he),"className",void 0),W()(Ze()(he),"children",void 0),he.className="",he.children=[],he}return ee()(Te,[{key:"setAttribute",value:function(qe,er){this[qe]=er}},{key:"getAttribute",value:function(qe){return this[qe]}},{key:"setAttributeNS",value:function(qe,er){this[qe]=er}},{key:"getAttributeNS",value:function(qe){return this[qe]}}]),Te}(ze),vr=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,tt,Pe,Ne,ke;if(vr){var et=my.getSystemInfoSync();tt=et.screenWidth,Pe=et.screenHeight,Ne=et.windowWidth,ke=et.windowHeight}else{var Ge=J.innerWidth,Ot=J.innerHeight;tt=Ge,Pe=Ot,Ne=Ge,ke=Ot}var Bt={width:tt,height:Pe,availWidth:Ne,availHeight:ke,availLeft:0,availTop:0},gt=Bt.availWidth,ge=Bt.availHeight,Lt={style:[]};function qt(F,re){if(!("parentNode"in F)){var Te;re===0?Te=function(){return null}:re===1?Te=function(){return Lt}:Te=function(){return null},Object.defineProperty(F,"parentNode",{enumerable:!0,get:Te})}if(!("parentElement"in F)){var he;re===0?he=function(){return null}:re===1?he=function(){return Lt}:he=function(){return null},Object.defineProperty(F,"parentElement",{enumerable:!0,get:he})}}function xr(F){F.style=F.style||{},Object.assign(F.style,{top:"0px",left:"0px",width:gt+"px",height:ge+"px",margin:"0px",padding:"0px"})}function tr(F){"clientLeft"in F||(F.clientLeft=0,F.clientTop=0),"clientWidth"in F||(F.clientWidth=gt,F.clientHeight=ge),"getBoundingClientRect"in F||(F.getBoundingClientRect=function(){var re={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return re})}function Xr(F){"offsetLeft"in F||(F.offsetLeft=0,F.offsetTop=0),"offsetWidth"in F||(F.offsetWidth=gt,F.offsetHeight=ge)}function rr(F){"scrollLeft"in F||(F.scrollLeft=0,F.scrollTop=0),"scrollWidth"in F||(F.scrollWidth=gt,F.scrollHeight=ge)}function bn(F){var re=function(){return!0};F.classList=[],F.classList.add=re,F.classList.remove=re,F.classList.contains=re,F.classList.toggle=re}function ue(F){var re=tn();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}function Fn(){}var Fi=function(F){Oe()(Te,F);var re=ue(Te);function Te(){var he,qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",er=arguments.length>1?arguments[1]:void 0;return oe()(this,Te),he=re.call(this),W()(Ze()(he),"className",void 0),W()(Ze()(he),"children",void 0),W()(Ze()(he),"focus",void 0),W()(Ze()(he),"blur",void 0),W()(Ze()(he),"insertBefore",void 0),W()(Ze()(he),"appendChild",void 0),W()(Ze()(he),"removeChild",void 0),W()(Ze()(he),"remove",void 0),W()(Ze()(he),"innerHTML",void 0),W()(Ze()(he),"tagName",void 0),he.className="",he.children=[],he.focus=Fn,he.blur=Fn,he.insertBefore=Fn,he.appendChild=Fn,he.removeChild=Fn,he.remove=Fn,he.innerHTML="",he.tagName=qe.toUpperCase(),qt(Ze()(he),er),xr(Ze()(he)),bn(Ze()(he)),tr(Ze()(he)),Xr(Ze()(he)),rr(Ze()(he)),he}return ee()(Te)}(Qt);function ki(F){var re=ve();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function ve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Ye=function(F){Oe()(Te,F);var re=ki(Te);function Te(he){return oe()(this,Te),re.call(this,he)}return ee()(Te,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),Te}(Fi);function vt(F){var re=wt();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function wt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var me=function(F){Oe()(Te,F);var re=vt(Te);function Te(){return oe()(this,Te),re.call(this,"video")}return ee()(Te)}(Ye),Pn={},Cr={};function Nt(F,re){Pn=F,Pn.id=re,"tagName"in Pn||(Pn.tagName="CANVAS"),Pn.type="canvas",qt(Pn),xr(Pn),bn(Pn),tr(Pn),Xr(Pn),Pn.focus=function(){},Pn.blur=function(){}}function it(F,re){var Te=1024,he=1024;Cr={width:Te,height:he,clientWidth:Te/fe,clientHeight:he/fe,id:re,type:"canvas"},"tagName"in Cr||(Cr.tagName="CANVAS"),qt(Cr),xr(Cr),bn(Cr),tr(Cr),Xr(Cr),Cr.getContext=function(qe){if(qe==="2d")return F},Cr.focus=function(){},Cr.blur=function(){}}function Ce(){return Pn}function Rt(){return Cr}var _t=ee()(function F(){oe()(this,F);var re=Ce(),Te=re.createImage&&re.createImage()||{};return"tagName"in Te||(Te.tagName="IMG",Te.__proto__=F.prototype),qt(Te),bn(Te),Object.assign(Te,{addEventListener:function(qe,er){Te["on".concat(qe)]=er.bind(Te)},removeEventListener:function(qe){Te["on".concat(qe)]=null}}),Te}),Tn={href:"",protocol:"",host:""};function Ve(F){var re=hi();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function hi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var An=function(F){Oe()(Te,F);var re=Ve(Te);function Te(){return oe()(this,Te),re.call(this,"body",0)}return ee()(Te,[{key:"addEventListener",value:function(qe,er){var vn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(qe,er,vn){}},{key:"dispatchEvent",value:function(qe){}}]),Te}(Fi),xi=function(F){Oe()(Te,F);var re=Ve(Te);function Te(){return oe()(this,Te),re.call(this,"html",0)}return ee()(Te,[{key:"addEventListener",value:function(qe,er){var vn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(qe,er){}},{key:"dispatchEvent",value:function(qe){}}]),Te}(Fi),Bn={},yi={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Tn,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(re){return re=re.toLowerCase(),re==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):re==="img"?new _t:re==="video"?new me:new Fi(re)},createElementNS:function(re,Te){return this.createElement(Te)},createTextNode:function(re){return re},getElementById:function(re){return null},getElementsByTagName:function(re){return re=re.toLowerCase(),[]},getElementsByTagNameNS:function(re,Te){return this.getElementsByTagName(Te)},getElementsByName:function(re){return[]},querySelector:function(re){return null},querySelectorAll:function(re){return[]},addEventListener:function(re,Te,he){Bn[re]||(Bn[re]=[]),Bn[re].push(Te)},removeEventListener:function(re,Te){var he=Bn[re];if(he&&he.length>0){for(var qe=he.length;qe--;qe>0)if(he[qe]===Te){he.splice(qe,1);break}}},dispatchEvent:function(re){var Te=re.type,he=Bn[Te];if(he)for(var qe=0;qe<he.length;qe++)he[qe](re);re.target&&typeof re.target["on"+Te]=="function"&&re.target["on"+Te](re)},createEvent:function(re){return new He(re)}};yi.documentElement=new xi,yi.head=new Fi("head"),yi.body=new An;var Wr=Object,Oi=a("SHe9"),Oa=a.n(Oi),Aa=function(){function F(){oe()(this,F),W()(this,"_w",void 0),W()(this,"_h",void 0),W()(this,"_data",void 0);var re=arguments.length;if(re===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else re===3&&Oa()(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return ee()(F,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),F}(),Ui=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,ea,Ti,_n;if(Ui){var Ci=my.getSystemInfoSync();ea=Ci.system,Ti=Ci.platform,_n=Ci.language}else{var qn={versions:function(){var F=J.navigator.userAgent;return{trident:F.indexOf("Trident")>-1,presto:F.indexOf("Presto")>-1,webKit:F.indexOf("AppleWebKit")>-1,gecko:F.indexOf("Gecko")>-1&&F.indexOf("KHTML")===-1,mobile:!!F.match(/AppleWebKit.*Mobile.*/),ios:!!F.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:F.indexOf("Android")>-1||F.indexOf("Linux")>-1,iPhone:F.indexOf("iPhone")>-1,iPad:F.indexOf("iPad")>-1,webApp:F.indexOf("Safari")===-1,weixin:F.indexOf("MicroMessenger")>-1,qq:F.match(/\sQQ/i)===" qq"}}(),language:(J.navigator.browserLanguage||J.navigator.language).toLowerCase()};qn.versions.android?Ti="android":qn.versions.trident?Ti="IE":qn.versions.presto?Ti="Opera":qn.versions.webKit?Ti="webKit":qn.versions.gecko?Ti="Firefox":qn.versions.mobile?Ti="mobile":qn.versions.ios?Ti="ios":qn.versions.iPhone?Ti="iPhone":qn.versions.iPad?Ti="ipad":qn.versions.webApp?Ti="webApp":qn.versions.weixin?Ti="weixin":qn.versions.qq&&(Ti="qq"),ea=J.navigator.userAgent,_n=qn.language}var Wi=ea.toLowerCase().indexOf("android")!==-1,ta=Wi?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",si="Mozilla/5.0 (".concat(ta,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(_n),li={platform:Ti,language:_n,appVersion:"5.0 (".concat(ta,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:si},Za={mark:function(re){return null},clearMeasures:function(re){return null},clearMarks:function(re){return null},measure:function(re,Te,he){return{duration:0}},now:function(){}},di=0,Ha=0;function Va(F){var re=Date.now(),Te=Math.max(di+23,re);return Ha=setTimeout(function(){F(di=Te)},Te-re),Ha}function ra(F){var re=Ce();return re.requestAnimationFrame?re.requestAnimationFrame(F):Va(F)}function xa(F){var re=Ce();return re.cancelAnimationFrame?re.cancelAnimationFrame(F):clearTimeout(F)}var va=function(){function F(re){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(oe()(this,F),W()(this,"href",void 0),re.indexOf("http://")==0||re.indexOf("https://")==0){this.href=re;return}this.href=Te+re}return ee()(F,null,[{key:"createObjectURL",value:function(Te){var he=Te.buffers[0],qe=Te.type,er=Vi(he),vn="data:".concat(qe,";base64, ");return vn+er}}]),F}();function Vi(F){for(var re="",Te=new Uint8Array(F),he=Te.byteLength,qe=0;qe<he;qe++)re+=String.fromCharCode(Te[qe]);return M(re)}var ia={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},kn={};function Ka(F){var re=Pa();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function Pa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Qi=new Map,Ia=new Map,Ma=new Map,ji={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function aa(F){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(F)]=="function"&&this["on".concat(F)].call(this,re)}function vi(F){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:F};this.readyState=F,aa.call(this,"readystatechange",re)}var ei=function(F){Oe()(Te,F);var re=Ka(Te);function Te(){var he;return oe()(this,Te),he=re.call(this),W()(Ze()(he),"onabort",void 0),W()(Ze()(he),"onerror",void 0),W()(Ze()(he),"onload",void 0),W()(Ze()(he),"onloadstart",void 0),W()(Ze()(he),"onprogress",void 0),W()(Ze()(he),"ontimeout",void 0),W()(Ze()(he),"onloadend",void 0),W()(Ze()(he),"onreadystatechange",void 0),W()(Ze()(he),"readyState",void 0),W()(Ze()(he),"response",void 0),W()(Ze()(he),"responseText",void 0),W()(Ze()(he),"_responseType",void 0),W()(Ze()(he),"responseXML",void 0),W()(Ze()(he),"status",void 0),W()(Ze()(he),"statusText",void 0),W()(Ze()(he),"upload",void 0),W()(Ze()(he),"withCredentials",void 0),W()(Ze()(he),"timeout",void 0),W()(Ze()(he),"_url",void 0),W()(Ze()(he),"_method",void 0),he.onabort=null,he.onerror=null,he.onload=null,he.onloadstart=null,he.onprogress=null,he.ontimeout=null,he.onloadend=null,he.onreadystatechange=null,he.readyState=0,he.response=null,he.responseText=null,he._responseType="text",he.responseXML=null,he.status=0,he.statusText="",he.upload={},he.withCredentials=!1,Qi.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),he}return ee()(Te,[{key:"responseType",set:function(qe){this._responseType=qe}},{key:"abort",value:function(){var qe=Ma.get("requestTask");qe&&qe.abort()}},{key:"getAllResponseHeaders",value:function(){var qe=Ia.get("responseHeader");return Object.keys(qe).map(function(er){return"".concat(er,": ").concat(qe[er])}).join(`
`)}},{key:"getResponseHeader",value:function(qe){return Ia.get("responseHeader")[qe]}},{key:"open",value:function(qe,er,vn){this._method=qe,this._url=er}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(qe,er){var vn=Qi.get("requestHeader");vn[qe]=er,Qi.set("requestHeader",vn)}},{key:"addEventListener",value:function(qe,er){var vn=this;typeof er=="function"&&(this["on"+qe]=function(){var Gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gn.target=Gn.target||vn,er.call(vn,Gn)})}},{key:"removeEventListener",value:function(qe,er){this["on"+qe]===er&&(this["on"+qe]=null)}}]),Te}(Q);W()(ei,"UNSEND",void 0),W()(ei,"OPENED",void 0),W()(ei,"HEADERS_RECEIVED",void 0),W()(ei,"LOADING",void 0),W()(ei,"DONE",void 0),ei.UNSEND=0,ei.OPENED=1,ei.HEADERS_RECEIVED=2,ei.LOADING=3,ei.DONE=4;function oa(F){var re=$i();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function $i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Gi=function(F){Oe()(Te,F);var re=oa(Te);function Te(he){var qe;return oe()(this,Te),qe=re.call(this,he),W()(Ze()(qe),"touches",void 0),W()(Ze()(qe),"targetTouches",void 0),W()(Ze()(qe),"changedTouches",void 0),qe.touches=[],qe.targetTouches=[],qe.changedTouches=[],qe.target=Ce(),qe.currentTarget=Ce(),qe}return ee()(Te)}(He);function Ji(F){var re=F||{},Te=re.x,he=Te===void 0?0:Te,qe=re.y,er=qe===void 0?0:qe,vn=re.clientX,Gn=vn===void 0?0:vn,fa=re.clientY,Ja=fa===void 0?0:fa;Object.keys(F).indexOf("x")!==-1?(F.pageX=F.clientX=he,F.pageY=F.clientY=er):(F.x=Gn,F.y=Ja)}function pa(F){return function(re){var Te=new Gi(F);Te.changedTouches=re.changedTouches,Te.touches=re.touches,Te.targetTouches=Array.prototype.slice.call(re.touches),Te.timeStamp=re.timeStamp,Te.changedTouches.forEach(function(he){return Ji(he)}),Te.touches.forEach(function(he){return Ji(he)}),Te.targetTouches.forEach(function(he){return Ji(he)}),yi.dispatchEvent(Te)}}function ka(F){return function(re){re.type=F,yi.dispatchEvent(re)}}var ma=pa("touchstart"),Bi=pa("touchmove"),Na=pa("touchend"),pi=ka("mapCameaParams");function zi(F){var re=Mi();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function Mi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Yn=function(F){Oe()(Te,F);var re=zi(Te);function Te(he){var qe;return oe()(this,Te),qe=re.call(this,he),W()(Ze()(qe),"buttons",void 0),W()(Ze()(qe),"which",void 0),W()(Ze()(qe),"pointerId",void 0),W()(Ze()(qe),"bubbles",void 0),W()(Ze()(qe),"button",void 0),W()(Ze()(qe),"width",void 0),W()(Ze()(qe),"height",void 0),W()(Ze()(qe),"pressure",void 0),W()(Ze()(qe),"isPrimary",void 0),W()(Ze()(qe),"pointerType",void 0),W()(Ze()(qe),"altKey",void 0),W()(Ze()(qe),"ctrlKey",void 0),W()(Ze()(qe),"metaKey",void 0),W()(Ze()(qe),"shiftKey",void 0),qe.target=Ce(),qe.currentTarget=Ce(),qe}return ee()(Te)}(He),bi=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],sa=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],Ra="touch";function Qa(F,re,Te){for(var he=new Yn(F),qe=0;qe<bi.length;qe++){var er=bi[qe];he[er]=re[er]||sa[qe]}return he.type=F,he.target=Ce(),he.currentTarget=Ce(),he.buttons=ce(F),he.which=he.buttons,he.pointerId=(re.identifier||0)+2,he.bubbles=!0,he.cancelable=!0,he.button=0,he.width=(re.radiusX||.5)*2,he.height=(re.radiusY||.5)*2,he.pressure=re.force||.5,he.isPrimary=Qe(re),he.pointerType=Ra,he.altKey=Te.altKey,he.ctrlKey=Te.ctrlKey,he.metaKey=Te.metaKey,he.shiftKey=Te.shiftKey,Te.preventDefault&&(he.preventDefault=function(){Te.preventDefault()}),he}function ce(F){var re=0;return(F==="touchstart"||F==="touchmove"||F==="pointerdown"||F==="pointermove")&&(re=1),re}var be=null;function Qe(F){return be===F.identifier}function U(F){be===null&&(be=F.identifier)}function K(F){be===F.identifier&&(be=null)}function Me(F){return function(re){for(var Te=re.changedTouches,he=0;he<Te.length;he++){var qe=Te[he];he===0&&F==="pointerdown"?U(qe):(F==="pointerup"||F==="pointercancel")&&K(qe);var er=Qa(F,qe,re);yi.dispatchEvent(er)}}}var ct=Me("pointerdown"),lr=Me("pointermove"),Ur=Me("pointerup");function Un(F){var re=cr();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function cr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Xi=function(F){Oe()(Te,F);var re=Un(Te);function Te(he){return oe()(this,Te),re.call(this,he)}return ee()(Te)}(He);function Li(F){return function(re){re.type=F,yi.dispatchEvent(re)}}var Gt=Li("mousedown"),s=Li("mousemove"),d=Li("mouseup"),O=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,j=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),ae=O||j,Ee={atob:P,btoa:M,devicePixelRatio:fe,Blob:pe,document:yi,Element:Qt,Event:He,EventTarget:Q,HTMLCanvasElement:Wr,HTMLElement:Fi,HTMLMediaElement:Ye,HTMLVideoElement:me,Image:_t,ImageData:Aa,navigator:li,Node:ze,requestAnimationFrame:ra,cancelAnimationFrame:xa,screen:Bt,XMLHttpRequest:ei,performance:Za,URL:va,WebGLRenderingContext:ia,WebGL2RenderingContext:kn,addEventListener:function(re,Te){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};yi.addEventListener(re,Te,he)},removeEventListener:function(re,Te,he){yi.removeEventListener(re,Te)},dispatchEvent:function(re){yi.dispatchEvent(re)},innerWidth:Bt.availWidth,innerHeight:Bt.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},Ue=ae?Ee:J,st=ae?ei:J.XMLHttpRequest,Mt=ae?Tn:J.location;function Ut(F){var re=F;return typeof F=="string"&&(re=Ue.document.getElementById(F)),re}function Jt(F){return F.trim?F.trim():F.replace(/^\s+|\s+$/g,"")}function hr(F){return Jt(F).split(/\s+/)}function dr(F){var re,Te,he=Ue==null||(re=Ue.document)===null||re===void 0||(Te=re.documentElement)===null||Te===void 0?void 0:Te.style;if(!he)return F[0];for(var qe in F)if(F[qe]&&F[qe]in he)return F[qe];return F[0]}function Ar(F,re,Te){var he=Ue.document.createElement(F);return he.className=re||"",Te&&Te.appendChild(he),he}function rn(F){var re=F.parentNode;re&&re.removeChild(F)}function $r(F,re){if(F.classList!==void 0)for(var Te=hr(re),he=0,qe=Te.length;he<qe;he++)F.classList.add(Te[he]);else if(!On(F,re)){var er=E(F);c(F,(er?er+" ":"")+re)}}function sr(F,re){F.classList!==void 0?F.classList.remove(re):c(F,Jt((" "+E(F)+" ").replace(" "+re+" "," ")))}function On(F,re){if(F.classList!==void 0)return F.classList.contains(re);var Te=E(F);return Te.length>0&&new RegExp("(^|\\s)"+re+"(\\s|$)").test(Te)}function c(F,re){F instanceof HTMLElement?F.className=re:F.className.baseVal=re}function E(F){return F instanceof SVGElement&&(F=F.correspondingElement),F.className.baseVal===void 0?F.className:F.className.baseVal}function w(F){for(;F&&F.firstChild;)F.removeChild(F.firstChild)}var _=dr(["transform","WebkitTransform"]);function H(F,re){F.style[_]=re}function Se(){if(typeof Event=="function")Ue.dispatchEvent(new Event("resize"));else{var F=Ue.document.createEvent("UIEvents");F.initUIEvent("resize",!0,!1,Ue,0),Ue.dispatchEvent(F)}}function We(F){var re=["padding: "+(F.height/2-8)+"px "+F.width/2+"px;","line-height: "+F.height+"px;","background-image: url("+F.toDataURL()+");"];console.log(`%c
`,re.join(""))}function ht(){var F,re=Ue.document.querySelector('meta[name="viewport"]');if(!re)return 1;var Te=(F=re.content)===null||F===void 0?void 0:F.split(","),he=Te.find(function(qe){var er=qe.split("="),vn=y()(er,2),Gn=vn[0],fa=vn[1];return Gn==="initial-scale"});return he?he.split("=")[1]*1:1}var pt=ht()<1?1:Ue.devicePixelRatio,Kt=a("qCzz"),ir=a.n(Kt);function qr(F){var re=ln();return function(){var he=Ke()(F),qe;if(re){var er=Ke()(this).constructor;qe=Reflect.construct(he,arguments,er)}else qe=he.apply(this,arguments);return De()(this,qe)}}function ln(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}var Mn=function(F){Oe()(Te,F);var re=qr(Te);function Te(he,qe,er){var vn;return oe()(this,Te),vn=re.call(this,he),W()(Ze()(vn),"status",void 0),W()(Ze()(vn),"url",void 0),vn.status=qe,vn.url=er,vn.name=vn.constructor.name,vn.message=he,vn}return ee()(Te,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Te}(ir()(Error));function ui(F){var re=new st;re.open("GET",F.url,!0);for(var Te in F.headers)F.headers.hasOwnProperty(Te)&&re.setRequestHeader(Te,F.headers[Te]);return re.withCredentials=F.credentials==="include",re}var mi=function(re,Te){var he=ui(re);return he.setRequestHeader("Accept","application/json"),he.onerror=function(){Te(new Error(he.statusText))},he.onload=function(){if(he.status>=200&&he.status<300&&he.response){var qe;try{qe=JSON.parse(he.response)}catch(er){return Te(er)}Te(null,qe)}else he.status===401?Te(new Mn("".concat(he.statusText),he.status,re.url)):Te(new Mn(he.statusText,he.status,re.url))},he.send(),he},Ri=function(re,Te){var he=ui(re);return he.responseType="arraybuffer",he.onerror=function(){Te(new Error(he.statusText))},he.onload=function(){var qe=he.response;if(qe.byteLength===0&&he.status===200)return Te(new Error("http status 200 returned without content."));he.status>=200&&he.status<300&&he.response?Te(null,{data:qe,cacheControl:he.getResponseHeader("Cache-Control"),expires:he.getResponseHeader("Expires")}):Te(new Mn(he.statusText,he.status,re.url))},he.send(),he};function $a(F){var re=Ue.document.createElement("a");return re.href=F,re.protocol===Ue.document.location.protocol&&re.host===Ue.document.location.host}var Ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",_o=function(re,Te){return Ri(re,function(he,qe){if(he)Te(he);else if(qe){var er=new Ue.Image;er.crossOrigin="anonymous";var vn=Ue.URL||Ue.webkitURL;er.onload=function(){Te(null,er),vn.revokeObjectURL(er.src)};var Gn=new Ue.Blob([new Uint8Array(qe.data)],{type:"image/png"});er.src=qe.data.byteLength?vn.createObjectURL(Gn):Ua}})},ho=a("OeSu"),Bo=2*Math.PI*6378137/2;function Co(F){var re=[Infinity,Infinity,-Infinity,-Infinity];return F.forEach(function(Te){var he=Te.coordinates;To(re,he)}),re}function To(F,re){return Array.isArray(re[0])?re.forEach(function(Te){To(F,Te)}):(F[0]>re[0]&&(F[0]=re[0]),F[1]>re[1]&&(F[1]=re[1]),F[2]<re[0]&&(F[2]=re[0]),F[3]<re[1]&&(F[3]=re[1])),F}function ns(F,re){return Rr(F,re)}function Rr(F,re){return Array.isArray(F[0])?F.map(function(Te){return Rr(Te,re)}):re(F)}function Go(F){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};F=vo(F,re);var he=F[0],qe=F[1],er=he*Bo/180,vn=Math.log(Math.tan((90+qe)*Math.PI/360))/(Math.PI/180);return vn=vn*Bo/180,Te.enable&&(er=Number(er.toFixed(Te.decimal)),vn=Number(vn.toFixed(Te.decimal))),F.length===3?[er,vn,F[2]]:[er,vn]}function ua(F){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Te=F[0],he=F[1],qe=Te/Bo*180,er=he/Bo*180;return er=180/Math.PI*(2*Math.atan(Math.exp(er*Math.PI/180))-Math.PI/2),re!=null&&(qe=Number(qe.toFixed(re)),er=Number(er.toFixed(re))),F.length===3?[qe,er,F[2]]:[qe,er]}function ja(F){if(F==null)throw new Error("lng is required");return(F>180||F<-180)&&(F=F%360,F>180&&(F=-360+F),F<-180&&(F=360+F),F===0&&(F=0)),F}function ys(F){if(F==null)throw new Error("lat is required");return(F>90||F<-90)&&(F=F%180,F>90&&(F=-180+F),F<-90&&(F=180+F),F===0&&(F=0)),F}function vo(F,re){if(re===!1)return F;var Te=ja(F[0]),he=ys(F[1]);return he>85&&(he=85),he<-85&&(he=-85),F.length===3?[Te,he,F[2]]:[Te,he]}function is(F){var re=85.0511287798,Te=Math.max(Math.min(re,F[1]),-re),he=256<<20,qe=Math.PI/180,er=F[0]*qe,vn=Te*qe;vn=Math.log(Math.tan(Math.PI/4+vn/2));var Gn=.5/Math.PI,fa=.5,Ja=-.5/Math.PI;return qe=.5,er=he*(Gn*er+fa),vn=he*(Ja*vn+qe),[Math.floor(er),Math.floor(vn)]}function f(F){var re=.5/Math.PI,Te=.5,he=-.5/Math.PI,qe=.5,er=256<<20,vn=y()(F,2),Gn=vn[0],fa=vn[1];Gn=(Gn/er-Te)/re,fa=(fa/er-qe)/he,fa=(Math.atan(Math.pow(Math.E,fa))-Math.PI/4)*2,qe=Math.PI/180;var Ja=fa/qe,po=Gn/qe;return[po,Ja]}function T(F,re,Te){var he=Object(ho.a)(re[1]-F[1]),qe=Object(ho.a)(re[0]-F[0]),er=Object(ho.a)(F[1]),vn=Object(ho.a)(re[1]),Gn=Math.pow(Math.sin(he/2),2)+Math.pow(Math.sin(qe/2),2)*Math.cos(er)*Math.cos(vn);return Object(ho.g)(2*Math.atan2(Math.sqrt(Gn),Math.sqrt(1-Gn)),Te="meters")}function k(F){var re=Math.PI/180,Te=85.0511287798,he=6378137,qe=Math.max(Math.min(Te,F[1]),-Te),er=Math.sin(qe*re),vn=he*F[0]*re,Gn=he*Math.log((1+er)/(1-er))/2;return[vn,Gn]}function ie(F,re){var Te=Math.abs(F[1][1]-F[0][1])*re,he=Math.abs(F[1][0]-F[0][0])*re;return[[F[0][0]-he,F[0][1]-Te],[F[1][0]+he,F[1][1]+Te]]}function de(F,re){return F[0][0]<=re[0][0]&&F[0][1]<=re[0][1]&&F[1][0]>=re[1][0]&&F[1][1]>=re[1][1]}function Be(F){return[[F[0],F[1]],[F[2],F[3]]]}function ft(F,re){return Math.sqrt(Math.pow(F[0]-re[0],2)+Math.pow(F[1]-re[1],2))}function Tt(F,re){return F[0]*re[0]+F[1]*re[1]}function Vt(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])}function Yt(F,re){return Math.acos(Tt(F,re)/(Vt(F)*Vt(re)))*180/Math.PI}function or(F,re){return re[0]>0?re[1]>0?90-Math.atan(re[1]/re[0])*180/Math.PI:90+Math.atan(-re[1]/re[0])*180/Math.PI:re[1]<0?180+(90-Math.atan(re[1]/re[0])*180/Math.PI):270+Math.atan(re[1]/-re[0])*180/Math.PI}function Tr(F){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!F||F.length<2)){for(var Te=[0,1],he=0,qe=[],er=0;er<F.length-1;er++){var vn=F[er],Gn=F[er+1],fa=ft(vn,Gn);he+=fa;var Ja=[vn[0]-Gn[0],vn[1]-Gn[1]],po=or(Te,Ja);if(er>0){var as=qe[er-1].rotation;as-po>360-as+po&&(po=po+360)}qe.push({start:vn,end:Gn,dis:fa,rotation:po,duration:0})}return qe.map(function(Es){Es.duration=re*(Es.dis/he)}),qe}}var Or=function(){function F(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Te=arguments.length>1?arguments[1]:void 0;oe()(this,F),W()(this,"limit",void 0),W()(this,"cache",void 0),W()(this,"destroy",void 0),W()(this,"order",void 0),this.limit=re,this.destroy=Te||this.defaultDestroy,this.order=[],this.clear()}return ee()(F,[{key:"clear",value:function(){var Te=this;this.order.forEach(function(he){Te.delete(he)}),this.cache={},this.order=[]}},{key:"get",value:function(Te){var he=this.cache[Te];return he&&(this.deleteOrder(Te),this.appendOrder(Te)),he}},{key:"set",value:function(Te,he){this.cache[Te]?(this.delete(Te),this.cache[Te]=he,this.appendOrder(Te)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Te]=he,this.appendOrder(Te))}},{key:"delete",value:function(Te){var he=this.cache[Te];he&&(this.deleteCache(Te),this.deleteOrder(Te),this.destroy(he,Te))}},{key:"deleteCache",value:function(Te){delete this.cache[Te]}},{key:"deleteOrder",value:function(Te){var he=this.order.findIndex(function(qe){return qe===Te});he>=0&&this.order.splice(he,1)}},{key:"appendOrder",value:function(Te){this.order.push(Te)}},{key:"defaultDestroy",value:function(Te,he){return null}}]),F}();function br(F,re){F.forEach(function(Te){!re[Te]||(re[Te]=re[Te].bind(re))})}var dn=function(){function F(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;oe()(this,F),W()(this,"duration",16),W()(this,"timestamp",new Date().getTime()),this.duration=re}return ee()(F,[{key:"run",value:function(Te){var he=new Date().getTime(),qe=he-this.timestamp;this.timestamp=he,qe>=this.duration&&Te()}}]),F}(),un=a("P5yM");function Sr(F){return typeof F=="string"?!!un.a(F):!1}function wn(F){var re=un.a(F),Te=[0,0,0,0];return re!=null&&(Te[0]=re.r/255,Te[1]=re.g/255,Te[2]=re.b/255,Te[3]=re.opacity),Te}function Ii(F){var re=F&&F[0],Te=F&&F[1],he=F&&F[2],qe=re+Te*256+he*65536-1;return qe}function ti(F){return[F+1&255,F+1>>8&255,F+1>>8>>8&255]}function $n(F){var re=Ue.document.createElement("canvas"),Te=re.getContext("2d");re.width=256,re.height=1;for(var he=Te.createLinearGradient(0,0,256,1),qe=null,er=F.positions[0],vn=F.positions[F.positions.length-1],Gn=0;Gn<F.colors.length;++Gn){var fa=(F.positions[Gn]-er)/(vn-er);he.addColorStop(fa,F.colors[Gn])}return Te.fillStyle=he,Te.fillRect(0,0,256,1),qe=new Uint8ClampedArray(Te.getImageData(0,0,256,1).data),ae?{data:qe,width:256,height:1}:new ImageData(qe,256,1)}var Yr;(function(F){F.CENTER="center",F.TOP="top",F["TOP-LEFT"]="top-left",F["TOP-RIGHT"]="top-right",F.BOTTOM="bottom",F["BOTTOM-LEFT"]="bottom-left",F.LEFT="left",F.RIGHT="right"})(Yr||(Yr={}));var Zn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function In(F,re,Te){var he=F.classList;for(var qe in Zn)Zn.hasOwnProperty(qe)&&he.remove("l7-".concat(Te,"-anchor-").concat(qe));he.add("l7-".concat(Te,"-anchor-").concat(re))}function ba(F,re){return{enable:F,mask:255,func:{cmp:514,ref:re?1:0,mask:255}}}function na(F){if(F.length===0)throw new Error("max requires at least one data point");for(var re=F[0],Te=1;Te<F.length;Te++)F[Te]>re&&(re=F[Te]);return re*1}function ga(F){if(F.length===0)throw new Error("min requires at least one data point");for(var re=F[0],Te=1;Te<F.length;Te++)F[Te]<re&&(re=F[Te]);return re*1}function ya(F){if(F.length===0)return 0;for(var re=F[0]*1,Te=1;Te<F.length;Te++)re+=F[Te]*1;return re}function _a(F){if(F.length===0)throw new Error("mean requires at least one data point");return ya(F)/F.length}function ca(F){if(F.length===0)throw new Error("mean requires at least one data point");if(F.length<3)return F[0];F.sort();for(var re=F[0],Te=NaN,he=0,qe=1,er=1;er<F.length+1;er++)F[er]!==re?(qe>he&&(he=qe,Te=re),qe=1,re=F[er]):qe++;return Te*1}var ci={min:ga,max:na,mean:_a,sum:ya,mode:ca};function no(F,re){return F.map(function(Te){return Te[re]})}function No(F,re){return ci[F](re)}},tpVm:function(A,v,a){var l=a("Zjmp"),o=a("TBoU"),m=a("UGMk"),g=a("9yVo"),p=a("PWyJ"),y=a("38cL"),b=a("GuSE");function I(P,M,z,oe,G){P!==M&&m(M,function(ee,pe){if(G||(G=new l),p(ee))g(P,M,pe,z,I,oe,G);else{var J=oe?oe(b(P,pe),ee,pe+"",P,M,G):void 0;J===void 0&&(J=ee),o(P,pe,J)}},y)}A.exports=I},uBqp:function(A,v){function a(o,m){for(var g=0;g<m.length;g++){var p=m[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}function l(o,m,g){return m&&a(o.prototype,m),g&&a(o,g),Object.defineProperty(o,"prototype",{writable:!1}),o}A.exports=l,A.exports.__esModule=!0,A.exports.default=A.exports},uKiR:function(A,v){function a(o,m,g,p,y,b,I){try{var P=o[b](I),M=P.value}catch(z){g(z);return}P.done?m(M):Promise.resolve(M).then(p,y)}function l(o){return function(){var m=this,g=arguments;return new Promise(function(p,y){var b=o.apply(m,g);function I(M){a(b,p,y,I,P,"next",M)}function P(M){a(b,p,y,I,P,"throw",M)}I(void 0)})}}A.exports=l,A.exports.__esModule=!0,A.exports.default=A.exports},"uQg+":function(A,v){function a(l,o){for(var m=-1,g=l==null?0:l.length,p=Array(g);++m<g;)p[m]=o(l[m],m,l);return p}A.exports=a},uYCe:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Metadata=void 0;var l=a("jHQc"),o=function(){function m(g,p){this.key=g,this.value=p}return m.prototype.toString=function(){return this.key===l.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},m}();v.Metadata=o},uewA:function(A,v,a){var l=a("JaNU");function o(m,g){var p=m.__data__;return l(g)?p[typeof g=="string"?"string":"hash"]:p.map}A.exports=o},ugFK:function(A,v,a){var l=a("spKn"),o=a("RtmR"),m=a("EwGU"),g=a("2mg7");function p(y){return l(y)||o(y)||m(y)||g()}A.exports=p,A.exports.__esModule=!0,A.exports.default=A.exports},uhBA:function(A,v,a){"use strict";var l=Object.prototype.hasOwnProperty,o="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(o=!1));function g(I,P,M){this.fn=I,this.context=P,this.once=M||!1}function p(I,P,M,z,oe){if(typeof M!="function")throw new TypeError("The listener must be a function");var G=new g(M,z||I,oe),ee=o?o+P:P;return I._events[ee]?I._events[ee].fn?I._events[ee]=[I._events[ee],G]:I._events[ee].push(G):(I._events[ee]=G,I._eventsCount++),I}function y(I,P){--I._eventsCount==0?I._events=new m:delete I._events[P]}function b(){this._events=new m,this._eventsCount=0}b.prototype.eventNames=function(){var P=[],M,z;if(this._eventsCount===0)return P;for(z in M=this._events)l.call(M,z)&&P.push(o?z.slice(1):z);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(M)):P},b.prototype.listeners=function(P){var M=o?o+P:P,z=this._events[M];if(!z)return[];if(z.fn)return[z.fn];for(var oe=0,G=z.length,ee=new Array(G);oe<G;oe++)ee[oe]=z[oe].fn;return ee},b.prototype.listenerCount=function(P){var M=o?o+P:P,z=this._events[M];return z?z.fn?1:z.length:0},b.prototype.emit=function(P,M,z,oe,G,ee){var pe=o?o+P:P;if(!this._events[pe])return!1;var J=this._events[pe],se=arguments.length,fe,X;if(J.fn){switch(J.once&&this.removeListener(P,J.fn,void 0,!0),se){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,M),!0;case 3:return J.fn.call(J.context,M,z),!0;case 4:return J.fn.call(J.context,M,z,oe),!0;case 5:return J.fn.call(J.context,M,z,oe,G),!0;case 6:return J.fn.call(J.context,M,z,oe,G,ee),!0}for(X=1,fe=new Array(se-1);X<se;X++)fe[X-1]=arguments[X];J.fn.apply(J.context,fe)}else{var Oe=J.length,D;for(X=0;X<Oe;X++)switch(J[X].once&&this.removeListener(P,J[X].fn,void 0,!0),se){case 1:J[X].fn.call(J[X].context);break;case 2:J[X].fn.call(J[X].context,M);break;case 3:J[X].fn.call(J[X].context,M,z);break;case 4:J[X].fn.call(J[X].context,M,z,oe);break;default:if(!fe)for(D=1,fe=new Array(se-1);D<se;D++)fe[D-1]=arguments[D];J[X].fn.apply(J[X].context,fe)}}return!0},b.prototype.on=function(P,M,z){return p(this,P,M,z,!1)},b.prototype.once=function(P,M,z){return p(this,P,M,z,!0)},b.prototype.removeListener=function(P,M,z,oe){var G=o?o+P:P;if(!this._events[G])return this;if(!M)return y(this,G),this;var ee=this._events[G];if(ee.fn)ee.fn===M&&(!oe||ee.once)&&(!z||ee.context===z)&&y(this,G);else{for(var pe=0,J=[],se=ee.length;pe<se;pe++)(ee[pe].fn!==M||oe&&!ee[pe].once||z&&ee[pe].context!==z)&&J.push(ee[pe]);J.length?this._events[G]=J.length===1?J[0]:J:y(this,G)}return this},b.prototype.removeAllListeners=function(P){var M;return P?(M=o?o+P:P,this._events[M]&&y(this,M)):(this._events=new m,this._eventsCount=0),this},b.prototype.off=b.prototype.removeListener,b.prototype.addListener=b.prototype.on,b.prefixed=o,b.EventEmitter=b,A.exports=b},uhIQ:function(A,v,a){"use strict";var l=this&&this.__spreadArray||function(pe,J){for(var se=0,fe=J.length,X=pe.length;se<fe;se++,X++)pe[X]=J[se];return pe};Object.defineProperty(v,"__esModule",{value:!0}),v.getFunctionName=v.getBaseClassDependencyCount=v.getDependencies=void 0;var o=a("bs4i"),m=a("Z6CD"),g=a("BU00"),p=a("jHQc"),y=a("qbsE");Object.defineProperty(v,"getFunctionName",{enumerable:!0,get:function(){return y.getFunctionName}});var b=a("BUXl");function I(pe,J){var se=y.getFunctionName(J),fe=P(pe,se,J,!1);return fe}v.getDependencies=I;function P(pe,J,se,fe){var X=pe.getConstructorMetadata(se),Oe=X.compilerGeneratedMetadata;if(Oe===void 0){var D=m.MISSING_INJECTABLE_ANNOTATION+" "+J+".";throw new Error(D)}var De=X.userGeneratedMetadata,ot=Object.keys(De),Ke=se.length===0&&ot.length>0,Le=ot.length>se.length,W=Ke||Le?ot.length:se.length,He=z(fe,J,Oe,De,W),C=oe(pe,se),Ze=l(l([],He),C);return Ze}function M(pe,J,se,fe,X){var Oe=X[pe.toString()]||[],D=ee(Oe),De=D.unmanaged!==!0,ot=fe[pe],Ke=D.inject||D.multiInject;if(ot=Ke||ot,ot instanceof o.LazyServiceIdentifer&&(ot=ot.unwrap()),De){var Le=ot===Object,W=ot===Function,He=ot===void 0,C=Le||W||He;if(!J&&C){var Ze=m.MISSING_INJECT_ANNOTATION+" argument "+pe+" in class "+se+".";throw new Error(Ze)}var rt=new b.Target(g.TargetTypeEnum.ConstructorArgument,D.targetName,ot);return rt.metadata=Oe,rt}return null}function z(pe,J,se,fe,X){for(var Oe=[],D=0;D<X;D++){var De=D,ot=M(De,pe,J,se,fe);ot!==null&&Oe.push(ot)}return Oe}function oe(pe,J){for(var se=pe.getPropertiesMetadata(J),fe=[],X=Object.keys(se),Oe=0,D=X;Oe<D.length;Oe++){var De=D[Oe],ot=se[De],Ke=ee(se[De]),Le=Ke.targetName||De,W=Ke.inject||Ke.multiInject,He=new b.Target(g.TargetTypeEnum.ClassProperty,Le,W);He.metadata=ot,fe.push(He)}var C=Object.getPrototypeOf(J.prototype).constructor;if(C!==Object){var Ze=oe(pe,C);fe=l(l([],fe),Ze)}return fe}function G(pe,J){var se=Object.getPrototypeOf(J.prototype).constructor;if(se!==Object){var fe=y.getFunctionName(se),X=P(pe,fe,se,!0),Oe=X.map(function(ot){return ot.metadata.filter(function(Ke){return Ke.key===p.UNMANAGED_TAG})}),D=[].concat.apply([],Oe).length,De=X.length-D;return De>0?De:G(pe,se)}else return 0}v.getBaseClassDependencyCount=G;function ee(pe){var J={};return pe.forEach(function(se){J[se.key.toString()]=se.value}),{inject:J[p.INJECT_TAG],multiInject:J[p.MULTI_INJECT_TAG],targetName:J[p.NAME_TAG],unmanaged:J[p.UNMANAGED_TAG]}}},ujMp:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.circularDependencyToException=v.listMetadataForTarget=v.listRegisteredBindingsForServiceIdentifier=v.getServiceIdentifierAsString=v.getFunctionName=void 0;var l=a("MON2");function o(P){if(typeof P=="function"){var M=P;return M.name}else{if(typeof P=="symbol")return P.toString();var M=P;return M}}v.getServiceIdentifierAsString=o;function m(P,M,z){var oe="",G=z(P,M);return G.length!==0&&(oe=`
Registered bindings:`,G.forEach(function(ee){var pe="Object";ee.implementationType!==null&&(pe=I(ee.implementationType)),oe=oe+`
 `+pe,ee.constraint.metaData&&(oe=oe+" - "+ee.constraint.metaData)})),oe}v.listRegisteredBindingsForServiceIdentifier=m;function g(P,M){return P.parentRequest===null?!1:P.parentRequest.serviceIdentifier===M?!0:g(P.parentRequest,M)}function p(P){function M(oe,G){G===void 0&&(G=[]);var ee=o(oe.serviceIdentifier);return G.push(ee),oe.parentRequest!==null?M(oe.parentRequest,G):G}var z=M(P);return z.reverse().join(" --> ")}function y(P){P.childRequests.forEach(function(M){if(g(M,M.serviceIdentifier)){var z=p(M);throw new Error(l.CIRCULAR_DEPENDENCY+" "+z)}else y(M)})}v.circularDependencyToException=y;function b(P,M){if(M.isTagged()||M.isNamed()){var z="",oe=M.getNamedTag(),G=M.getCustomTags();return oe!==null&&(z+=oe.toString()+`
`),G!==null&&G.forEach(function(ee){z+=ee.toString()+`
`})," "+P+`
 `+P+" - "+z}else return" "+P}v.listMetadataForTarget=b;function I(P){if(P.name)return P.name;var M=P.toString(),z=M.match(/^function\s*([^\s(]+)/);return z?z[1]:"Anonymous function: "+M}v.getFunctionName=I},v1a6:function(A,v,a){var l=a("uewA");function o(m){return l(this,m).get(m)}A.exports=o},vQV2:function(A,v,a){var l=a("67RC"),o=a("OObD"),m=a("MbTZ"),g=a("pE9V"),p=a("22n8"),y=a("3m6h"),b=a("sHph"),I=a("B9V7"),P=a("cyxd"),M=a("7JgH"),z=a("8Dog"),oe=a("IYlO"),G=a("UXsw"),ee=a("eSy7"),pe=a("S6Vc");function J(se,fe,X,Oe,D,De,ot){var Ke=ee(se,X),Le=ee(fe,X),W=ot.get(Le);if(W){l(se,X,W);return}var He=De?De(Ke,Le,X+"",se,fe,ot):void 0,C=He===void 0;if(C){var Ze=b(Le),rt=!Ze&&P(Le),At=!Ze&&!rt&&G(Le);He=Le,Ze||rt||At?b(Ke)?He=Ke:I(Ke)?He=g(Ke):rt?(C=!1,He=o(Le,!0)):At?(C=!1,He=m(Le,!0)):He=[]:oe(Le)||y(Le)?(He=Ke,y(Ke)?He=pe(Ke):(!z(Ke)||M(Ke))&&(He=p(Le))):C=!1}C&&(ot.set(Le,He),D(He,Le,Oe,De,ot),ot.delete(Le)),l(se,X,He)}A.exports=J},wDAd:function(A,v,a){var l=a("YPd+"),o=a("EN1L"),m=o(function(g,p,y){return p=p.toLowerCase(),g+(y?l(p):p)});A.exports=m},wTVA:function(A,v){function a(l){if(Array.isArray(l))return l}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},wU1a:function(A,v){function a(l,o,m,g){for(var p=l.length,y=m+(g?1:-1);g?y--:++y<p;)if(o(l[y],y,l))return y;return-1}A.exports=a},wjPw:function(A,v,a){var l=a("tpVm"),o=a("xT0P"),m=o(function(g,p,y,b){l(g,p,y,b)});A.exports=m},wkBT:function(A,v){function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},wnjb:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.MetadataReader=void 0;var l=a("xfSm"),o=function(){function m(){}return m.prototype.getConstructorMetadata=function(g){var p=Reflect.getMetadata(l.PARAM_TYPES,g),y=Reflect.getMetadata(l.TAGGED,g);return{compilerGeneratedMetadata:p,userGeneratedMetadata:y||{}}},m.prototype.getPropertiesMetadata=function(g){var p=Reflect.getMetadata(l.TAGGED_PROP,g)||[];return p},m}();v.MetadataReader=o},wrK5:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingToSyntax=void 0;var l=a("Z6CD"),o=a("BU00"),m=a("DNrJ"),g=a("FNCk"),p=function(){function y(b){this._binding=b}return y.prototype.to=function(b){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=b,new m.BindingInWhenOnSyntax(this._binding)},y.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+l.INVALID_TO_SELF_VALUE);var b=this._binding.serviceIdentifier;return this.to(b)},y.prototype.toConstantValue=function(b){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=b,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toDynamicValue=function(b){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=b,this._binding.implementationType=null,new m.BindingInWhenOnSyntax(this._binding)},y.prototype.toConstructor=function(b){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toFactory=function(b){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toFunction=function(b){if(typeof b!="function")throw new Error(l.INVALID_FUNCTION_BINDING);var I=this.toConstantValue(b);return this._binding.type=o.BindingTypeEnum.Function,this._binding.scope=o.BindingScopeEnum.Singleton,I},y.prototype.toAutoFactory=function(b){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(I){var P=function(){return I.container.get(b)};return P},this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toProvider=function(b){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=b,this._binding.scope=o.BindingScopeEnum.Singleton,new g.BindingWhenOnSyntax(this._binding)},y.prototype.toService=function(b){this.toDynamicValue(function(I){return I.container.get(b)})},y}();v.BindingToSyntax=p},wyAb:function(A,v,a){var l=a("TNLb"),o=a("fQKV"),m=a("1+Yy");function g(p,y){return m(o(p,y,l),p+"")}A.exports=g},xT0P:function(A,v,a){var l=a("Ck+x"),o=a("N+Uj");function m(g){return l(function(p,y){var b=-1,I=y.length,P=I>1?y[I-1]:void 0,M=I>2?y[2]:void 0;for(P=g.length>3&&typeof P=="function"?(I--,P):void 0,M&&o(y[0],y[1],M)&&(P=I<3?void 0:P,I=1),p=Object(p);++b<I;){var z=y[b];z&&g(p,z,b,P)}return p})}A.exports=m},xfSm:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.NON_CUSTOM_TAG_KEYS=v.POST_CONSTRUCT=v.DESIGN_PARAM_TYPES=v.PARAM_TYPES=v.TAGGED_PROP=v.TAGGED=v.MULTI_INJECT_TAG=v.INJECT_TAG=v.OPTIONAL_TAG=v.UNMANAGED_TAG=v.NAME_TAG=v.NAMED_TAG=void 0,v.NAMED_TAG="named",v.NAME_TAG="name",v.UNMANAGED_TAG="unmanaged",v.OPTIONAL_TAG="optional",v.INJECT_TAG="inject",v.MULTI_INJECT_TAG="multi_inject",v.TAGGED="inversify:tagged",v.TAGGED_PROP="inversify:tagged_props",v.PARAM_TYPES="inversify:paramtypes",v.DESIGN_PARAM_TYPES="design:paramtypes",v.POST_CONSTRUCT="post_construct";function l(){return[v.INJECT_TAG,v.MULTI_INJECT_TAG,v.NAME_TAG,v.UNMANAGED_TAG,v.NAMED_TAG,v.OPTIONAL_TAG]}v.NON_CUSTOM_TAG_KEYS=l()},xfeJ:function(A,v){function a(l){return Function.toString.call(l).indexOf("[native code]")!==-1}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},xiII:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Request=void 0;var l=a("d9O0"),o=function(){function m(g,p,y,b,I){this.id=l.id(),this.serviceIdentifier=g,this.parentContext=p,this.parentRequest=y,this.target=I,this.childRequests=[],this.bindings=Array.isArray(b)?b:[b],this.requestScope=y===null?new Map:null}return m.prototype.addChildRequest=function(g,p,y){var b=new m(g,this.parentContext,this,p,y);return this.childRequests.push(b),b},m}();v.Request=o},xp6e:function(A,v,a){"use strict";(function(l){a.d(v,"a",function(){return ze});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(tt,Pe,Ne,ke){function et(Ge){return Ge instanceof Ne?Ge:new Ne(function(Ot){Ot(Ge)})}return new(Ne||(Ne=Promise))(function(Ge,Ot){function Bt(Lt){try{ge(ke.next(Lt))}catch(qt){Ot(qt)}}function gt(Lt){try{ge(ke.throw(Lt))}catch(qt){Ot(qt)}}function ge(Lt){Lt.done?Ge(Lt.value):et(Lt.value).then(Bt,gt)}ge((ke=ke.apply(tt,Pe||[])).next())})}function m(tt,Pe){var Ne={label:0,sent:function(){if(Ge[0]&1)throw Ge[1];return Ge[1]},trys:[],ops:[]},ke,et,Ge,Ot;return Ot={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ot[Symbol.iterator]=function(){return this}),Ot;function Bt(ge){return function(Lt){return gt([ge,Lt])}}function gt(ge){if(ke)throw new TypeError("Generator is already executing.");for(;Ne;)try{if(ke=1,et&&(Ge=ge[0]&2?et.return:ge[0]?et.throw||((Ge=et.return)&&Ge.call(et),0):et.next)&&!(Ge=Ge.call(et,ge[1])).done)return Ge;switch(et=0,Ge&&(ge=[ge[0]&2,Ge.value]),ge[0]){case 0:case 1:Ge=ge;break;case 4:return Ne.label++,{value:ge[1],done:!1};case 5:Ne.label++,et=ge[1],ge=[0];continue;case 7:ge=Ne.ops.pop(),Ne.trys.pop();continue;default:if(Ge=Ne.trys,!(Ge=Ge.length>0&&Ge[Ge.length-1])&&(ge[0]===6||ge[0]===2)){Ne=0;continue}if(ge[0]===3&&(!Ge||ge[1]>Ge[0]&&ge[1]<Ge[3])){Ne.label=ge[1];break}if(ge[0]===6&&Ne.label<Ge[1]){Ne.label=Ge[1],Ge=ge;break}if(Ge&&Ne.label<Ge[2]){Ne.label=Ge[2],Ne.ops.push(ge);break}Ge[2]&&Ne.ops.pop(),Ne.trys.pop();continue}ge=Pe.call(tt,Ne)}catch(Lt){ge=[6,Lt],et=0}finally{ke=Ge=0}if(ge[0]&5)throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}}function g(tt,Pe){var Ne=typeof Symbol=="function"&&tt[Symbol.iterator];if(!Ne)return tt;var ke=Ne.call(tt),et,Ge=[],Ot;try{for(;(Pe===void 0||Pe-- >0)&&!(et=ke.next()).done;)Ge.push(et.value)}catch(Bt){Ot={error:Bt}}finally{try{et&&!et.done&&(Ne=ke.return)&&Ne.call(ke)}finally{if(Ot)throw Ot.error}}return Ge}function p(){for(var tt=[],Pe=0;Pe<arguments.length;Pe++)tt=tt.concat(g(arguments[Pe]));return tt}function y(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}function b(tt,Pe){return Pe={exports:{}},tt(Pe,Pe.exports),Pe.exports}var I=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){return ke&&typeof ke.length=="number"&&ke.length>=0&&ke.length%1==0}tt.exports=Pe.default});y(I);var P=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=function(Ne){return function(){for(var ke=[],et=arguments.length;et--;)ke[et]=arguments[et];var Ge=ke.pop();return Ne.call(this,ke,Ge)}},tt.exports=Pe.default});y(P);var M=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.fallback=et,Pe.wrap=Ge;var Ne=Pe.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,ke=Pe.hasNextTick=typeof l=="object"&&typeof l.nextTick=="function";function et(Bt){setTimeout(Bt,0)}function Ge(Bt){return function(gt){for(var ge=[],Lt=arguments.length-1;Lt-- >0;)ge[Lt]=arguments[Lt+1];return Bt(function(){return gt.apply(void 0,ge)})}}var Ot;Ne?Ot=setImmediate:ke?Ot=l.nextTick:Ot=et,Pe.default=Ge(Ot)});y(M);var z=M.fallback,oe=M.wrap,G=M.hasSetImmediate,ee=M.hasNextTick,pe=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(P),ke=et(M);function et(gt){return gt&&gt.__esModule?gt:{default:gt}}function Ge(gt){return(0,J.isAsync)(gt)?function(){for(var ge=[],Lt=arguments.length;Lt--;)ge[Lt]=arguments[Lt];var qt=ge.pop(),xr=gt.apply(this,ge);return Ot(xr,qt)}:(0,Ne.default)(function(ge,Lt){var qt;try{qt=gt.apply(this,ge)}catch(xr){return Lt(xr)}if(qt&&typeof qt.then=="function")return Ot(qt,Lt);Lt(null,qt)})}function Ot(gt,ge){return gt.then(function(Lt){Bt(ge,null,Lt)},function(Lt){Bt(ge,Lt&&Lt.message?Lt:new Error(Lt))})}function Bt(gt,ge,Lt){try{gt(ge,Lt)}catch(qt){(0,ke.default)(function(xr){throw xr},qt)}}tt.exports=Pe.default});y(pe);var J=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.isAsyncIterable=Pe.isAsyncGenerator=Pe.isAsync=void 0;var Ne=ke(pe);function ke(gt){return gt&&gt.__esModule?gt:{default:gt}}function et(gt){return gt[Symbol.toStringTag]==="AsyncFunction"}function Ge(gt){return gt[Symbol.toStringTag]==="AsyncGenerator"}function Ot(gt){return typeof gt[Symbol.asyncIterator]=="function"}function Bt(gt){if(typeof gt!="function")throw new Error("expected a function");return et(gt)?(0,Ne.default)(gt):gt}Pe.default=Bt,Pe.isAsync=et,Pe.isAsyncGenerator=Ge,Pe.isAsyncIterable=Ot});y(J);var se=J.isAsyncIterable,fe=J.isAsyncGenerator,X=J.isAsync,Oe=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke,et){if(et===void 0&&(et=ke.length),!et)throw new Error("arity is undefined");function Ge(){for(var Ot=this,Bt=[],gt=arguments.length;gt--;)Bt[gt]=arguments[gt];return typeof Bt[et-1]=="function"?ke.apply(this,Bt):new Promise(function(ge,Lt){Bt[et-1]=function(qt){for(var xr=[],tr=arguments.length-1;tr-- >0;)xr[tr]=arguments[tr+1];if(qt)return Lt(qt);ge(xr.length>1?xr:xr[0])},ke.apply(Ot,Bt)})}return Object.defineProperty(Ge,"name",{configurable:!0,value:"awaitable("+ke.name+")"}),Ge}tt.exports=Pe.default});y(Oe);var D=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ge(I),ke=Ge(J),et=Ge(Oe);function Ge(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}Pe.default=(0,et.default)(function(Ot,Bt,gt){var ge=(0,Ne.default)(Bt)?[]:{};Ot(Bt,function(Lt,qt,xr){(0,ke.default)(Lt)(function(tr){for(var Xr,rr=[],bn=arguments.length-1;bn-- >0;)rr[bn]=arguments[bn+1];rr.length<2&&(Xr=rr,rr=Xr[0]),ge[qt]=rr,xr(tr)})},function(Lt){return gt(Lt,ge)})},3),tt.exports=Pe.default});y(D);var De=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){function et(){for(var Ge=[],Ot=arguments.length;Ot--;)Ge[Ot]=arguments[Ot];if(ke!==null){var Bt=ke;ke=null,Bt.apply(this,Ge)}}return Object.assign(et,ke),et}tt.exports=Pe.default});y(De);var ot=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=function(Ne){return Ne[Symbol.iterator]&&Ne[Symbol.iterator]()},tt.exports=Pe.default});y(ot);var Ke=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=gt;var Ne=et(I),ke=et(ot);function et(ge){return ge&&ge.__esModule?ge:{default:ge}}function Ge(ge){var Lt=-1,qt=ge.length;return function(){return++Lt<qt?{value:ge[Lt],key:Lt}:null}}function Ot(ge){var Lt=-1;return function(){var xr=ge.next();return xr.done?null:(Lt++,{value:xr.value,key:Lt})}}function Bt(ge){var Lt=ge?Object.keys(ge):[],qt=-1,xr=Lt.length;return function(){var Xr=Lt[++qt];return qt<xr?{value:ge[Xr],key:Xr}:null}}function gt(ge){if((0,Ne.default)(ge))return Ge(ge);var Lt=(0,ke.default)(ge);return Lt?Ot(Lt):Bt(ge)}tt.exports=Pe.default});y(Ke);var Le=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ne;function Ne(ke){return function(){for(var et=[],Ge=arguments.length;Ge--;)et[Ge]=arguments[Ge];if(ke===null)throw new Error("Callback was already called.");var Ot=ke;ke=null,Ot.apply(this,et)}}tt.exports=Pe.default});y(Le);var W=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne={};Pe.default=Ne,tt.exports=Pe.default});y(W);var He=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=et;var Ne=ke(W);function ke(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function et(Ge,Ot,Bt,gt){var ge=!1,Lt=!1,qt=!1,xr=0,tr=0;function Xr(){xr>=Ot||qt||ge||(qt=!0,Ge.next().then(function(ue){var tn=ue.value,Fn=ue.done;if(!(Lt||ge)){if(qt=!1,Fn){ge=!0,xr<=0&&gt(null);return}xr++,Bt(tn,tr,rr),tr++,Xr()}}).catch(bn))}function rr(ue,tn){if(xr-=1,!Lt){if(ue)return bn(ue);if(ue===!1){ge=!0,Lt=!0;return}if(tn===Ne.default||ge&&xr<=0)return ge=!0,gt(null);Xr()}}function bn(ue){Lt||(qt=!1,ge=!0,gt(ue))}Xr()}tt.exports=Pe.default});y(He);var C=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Bt(De),ke=Bt(Ke),et=Bt(Le),Ge=Bt(He),Ot=Bt(W);function Bt(gt){return gt&&gt.__esModule?gt:{default:gt}}Pe.default=function(gt){return function(ge,Lt,qt){if(qt=(0,Ne.default)(qt),gt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ge)return qt(null);if((0,J.isAsyncGenerator)(ge))return(0,Ge.default)(ge,gt,Lt,qt);if((0,J.isAsyncIterable)(ge))return(0,Ge.default)(ge[Symbol.asyncIterator](),gt,Lt,qt);var xr=(0,ke.default)(ge),tr=!1,Xr=!1,rr=0,bn=!1;function ue(Fn,Fi){if(!Xr)if(rr-=1,Fn)tr=!0,qt(Fn);else if(Fn===!1)tr=!0,Xr=!0;else{if(Fi===Ot.default||tr&&rr<=0)return tr=!0,qt(null);bn||tn()}}function tn(){for(bn=!0;rr<gt&&!tr;){var Fn=xr();if(Fn===null){tr=!0,rr<=0&&qt(null);return}rr+=1,Lt(Fn.value,Fn.key,(0,et.default)(ue))}bn=!1}tn()}},tt.exports=Pe.default});y(C);var Ze=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ge(C),ke=Ge(J),et=Ge(Oe);function Ge(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Ot(Bt,gt,ge,Lt){return(0,Ne.default)(gt)(Bt,(0,ke.default)(ge),Lt)}Pe.default=(0,et.default)(Ot,4),tt.exports=Pe.default});y(Ze);var rt=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=et(Ze),ke=et(Oe);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt,gt){return(0,Ne.default)(Ot,1,Bt,gt)}Pe.default=(0,ke.default)(Ge,3),tt.exports=Pe.default});y(rt);var At=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(D),ke=et(rt);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt){return(0,Ne.default)(ke.default,Ot,Bt)}tt.exports=Pe.default}),Et=y(At),ne=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.args=[],this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return this.args=Ne,Et(this.tasks)},tt.prototype.tap=function(Pe,Ne){var ke=this;this.tasks.push(function(et){Ne.apply(void 0,p(ke.args)),et(null,Pe)})},tt}(),Q=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=ge(I),ke=ge(W),et=ge(Ze),Ge=ge(De),Ot=ge(Le),Bt=ge(J),gt=ge(Oe);function ge(tr){return tr&&tr.__esModule?tr:{default:tr}}function Lt(tr,Xr,rr){rr=(0,Ge.default)(rr);var bn=0,ue=0,tn=tr.length,Fn=!1;tn===0&&rr(null);function Fi(ki,ve){ki===!1&&(Fn=!0),Fn!==!0&&(ki?rr(ki):(++ue===tn||ve===ke.default)&&rr(null))}for(;bn<tn;bn++)Xr(tr[bn],bn,(0,Ot.default)(Fi))}function qt(tr,Xr,rr){return(0,et.default)(tr,Infinity,Xr,rr)}function xr(tr,Xr,rr){var bn=(0,Ne.default)(tr)?Lt:qt;return bn(tr,(0,Bt.default)(Xr),rr)}Pe.default=(0,gt.default)(xr,3),tt.exports=Pe.default});y(Q);var te=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=Ge;var Ne=et(Q),ke=et(D);function et(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Ge(Ot,Bt){return(0,ke.default)(Ne.default,Ot,Bt)}tt.exports=Pe.default}),Fe=y(te),ze=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.promise=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return Fe(this.tasks)},tt.prototype.tapPromise=function(Pe,Ne){var ke=this;this.tasks.push(function(et){return o(ke,void 0,void 0,function(){return m(this,function(Ge){switch(Ge.label){case 0:return[4,Ne()];case 1:return Ge.sent(),et(null,Pe),[2]}})})})},tt}(),St=b(function(tt,Pe){Object.defineProperty(Pe,"__esModule",{value:!0});var Ne=Ot(De),ke=Ot(Le),et=Ot(J),Ge=Ot(Oe);function Ot(gt){return gt&&gt.__esModule?gt:{default:gt}}function Bt(gt,ge){if(ge=(0,Ne.default)(ge),!Array.isArray(gt))return ge(new Error("First argument to waterfall must be an array of functions"));if(!gt.length)return ge();var Lt=0;function qt(tr){var Xr=(0,et.default)(gt[Lt++]);Xr.apply(void 0,tr.concat([(0,ke.default)(xr)]))}function xr(tr){for(var Xr=[],rr=arguments.length-1;rr-- >0;)Xr[rr]=arguments[rr+1];if(tr!==!1){if(tr||Lt===gt.length)return ge.apply(void 0,[tr].concat(Xr));qt(Xr)}}qt([])}Pe.default=(0,Ge.default)(Bt),tt.exports=Pe.default}),ut=y(St),Qt=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return ut(this.tasks)},tt.prototype.tap=function(Pe,Ne){this.tasks.length===0?this.tasks.push(function(ke){var et=Ne();ke(et?null:!1,et)}):this.tasks.push(function(ke,et){var Ge=Ne();et(Ge?null:!1,Pe)})},tt}(),vr=function(){function tt(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];this.tasks=[]}return tt.prototype.call=function(){for(var Pe=arguments,Ne=[],ke=0;ke<arguments.length;ke++)Ne[ke]=Pe[ke];return Et(this.tasks)},tt.prototype.tap=function(Pe,Ne){this.tasks.push(function(ke){var et=Ne();ke(et,Pe)})},tt}()}).call(this,a("BBhR"))},xs0j:function(A,v,a){var l=a("Wde8"),o=a("iuKi"),m=a("lxDN"),g=a("ycXD");function p(y,b,I){return y=m(y),b=I?void 0:b,b===void 0?o(y)?g(y):l(y):y.match(b)||[]}A.exports=p},yDU5:function(A,v,a){"use strict";A.exports=o,A.exports.default=o;var l=1e20;function o(b,I,P,M,z,oe){this.fontSize=b||24,this.buffer=I===void 0?3:I,this.cutoff=M||.25,this.fontFamily=z||"sans-serif",this.fontWeight=oe||"normal",this.radius=P||8;var G=this.size=this.fontSize+this.buffer*2,ee=G+this.buffer*2,pe=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;pe?this.canvas=my.createOffscreenCanvas(G,G,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=G),this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Uint16Array(ee),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,pe?this.middle=Math.round(G/2*1):this.middle=Math.round(G/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(b,I,P,M,z,oe,G){oe.fill(l,0,I*P),G.fill(0,0,I*P);for(var ee=(I-M)/2,pe=0;pe<z;pe++)for(var J=0;J<M;J++){var se=(pe+ee)*I+J+ee,fe=b.data[4*(pe*M+J)+3]/255;if(fe===1)oe[se]=0,G[se]=l;else if(fe===0)oe[se]=l,G[se]=0;else{var X=Math.max(0,.5-fe),Oe=Math.max(0,fe-.5);oe[se]=X*X,G[se]=Oe*Oe}}}function g(b,I,P,M,z,oe,G){for(var ee=0;ee<I*P;ee++){var pe=Math.sqrt(M[ee])-Math.sqrt(z[ee]);b[ee]=Math.round(255-255*(pe/oe+G))}}o.prototype._draw=function(b,I){var P=this.ctx.measureText(b),M=P.width,z=2*this.buffer,oe,G,ee,pe,J,se,fe,X;I&&this.useMetrics?(J=Math.floor(P.actualBoundingBoxAscent),X=this.buffer+Math.ceil(P.actualBoundingBoxAscent),se=this.buffer,fe=this.buffer,G=Math.min(this.size,Math.ceil(P.actualBoundingBoxRight-P.actualBoundingBoxLeft)),pe=Math.min(this.size-se,Math.ceil(P.actualBoundingBoxAscent+P.actualBoundingBoxDescent)),oe=G+z,ee=pe+z,this.ctx.textBaseline="alphabetic"):(oe=G=this.size,ee=pe=this.size,J=19*this.fontSize/24,se=fe=0,X=this.middle,this.ctx.textBaseline="middle");var Oe;G&&pe&&(this.ctx.clearRect(fe,se,G,pe),this.ctx.fillText(b,this.buffer,X),Oe=this.ctx.getImageData(fe,se,G,pe));var D=new Uint8ClampedArray(oe*ee);return m(Oe,oe,ee,G,pe,this.gridOuter,this.gridInner),p(this.gridOuter,oe,ee,this.f,this.v,this.z),p(this.gridInner,oe,ee,this.f,this.v,this.z),g(D,oe,ee,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:D,metrics:{width:G,height:pe,sdfWidth:oe,sdfHeight:ee,top:J,left:0,advance:M}}},o.prototype.draw=function(b){return this._draw(b,!1).data},o.prototype.drawWithMetrics=function(b){return this._draw(b,!0)};function p(b,I,P,M,z,oe){for(var G=0;G<I;G++)y(b,G,I,P,M,z,oe);for(var ee=0;ee<P;ee++)y(b,ee*I,1,I,M,z,oe)}function y(b,I,P,M,z,oe,G){var ee,pe,J,se;for(oe[0]=0,G[0]=-l,G[1]=l,ee=0;ee<M;ee++)z[ee]=b[I+ee*P];for(ee=1,pe=0,J=0;ee<M;ee++){do se=oe[pe],J=(z[ee]-z[se]+ee*ee-se*se)/(ee-se)/2;while(J<=G[pe]&&--pe>-1);pe++,oe[pe]=ee,G[pe]=J,G[pe+1]=l}for(ee=0,pe=0;ee<M;ee++){for(;G[pe+1]<ee;)pe++;se=oe[pe],b[I+ee*P]=z[se]+(ee-se)*(ee-se)}}},yG8O:function(A,v){function a(l,o,m,g){!m||Object.defineProperty(l,o,{enumerable:m.enumerable,configurable:m.configurable,writable:m.writable,value:m.initializer?m.initializer.call(g):void 0})}A.exports=a,A.exports.default=A.exports,A.exports.__esModule=!0},yLV6:function(A,v,a){var l;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(o,m,g,p){"use strict";var y=["","webkit","Moz","MS","ms","o"],b=m.createElement("div"),I="function",P=Math.round,M=Math.abs,z=Date.now;function oe(ce,be,Qe){return setTimeout(Oe(ce,Qe),be)}function G(ce,be,Qe){return Array.isArray(ce)?(ee(ce,Qe[be],Qe),!0):!1}function ee(ce,be,Qe){var U;if(!!ce)if(ce.forEach)ce.forEach(be,Qe);else if(ce.length!==p)for(U=0;U<ce.length;)be.call(Qe,ce[U],U,ce),U++;else for(U in ce)ce.hasOwnProperty(U)&&be.call(Qe,ce[U],U,ce)}function pe(ce,be,Qe){var U="DEPRECATED METHOD: "+be+`
`+Qe+` AT 
`;return function(){var K=new Error("get-stack-trace"),Me=K&&K.stack?K.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ct=o.console&&(o.console.warn||o.console.log);return ct&&ct.call(o.console,U,Me),ce.apply(this,arguments)}}var J;typeof Object.assign!="function"?J=function(be){if(be===p||be===null)throw new TypeError("Cannot convert undefined or null to object");for(var Qe=Object(be),U=1;U<arguments.length;U++){var K=arguments[U];if(K!==p&&K!==null)for(var Me in K)K.hasOwnProperty(Me)&&(Qe[Me]=K[Me])}return Qe}:J=Object.assign;var se=pe(function(be,Qe,U){for(var K=Object.keys(Qe),Me=0;Me<K.length;)(!U||U&&be[K[Me]]===p)&&(be[K[Me]]=Qe[K[Me]]),Me++;return be},"extend","Use `assign`."),fe=pe(function(be,Qe){return se(be,Qe,!0)},"merge","Use `assign`.");function X(ce,be,Qe){var U=be.prototype,K;K=ce.prototype=Object.create(U),K.constructor=ce,K._super=U,Qe&&J(K,Qe)}function Oe(ce,be){return function(){return ce.apply(be,arguments)}}function D(ce,be){return typeof ce==I?ce.apply(be&&be[0]||p,be):ce}function De(ce,be){return ce===p?be:ce}function ot(ce,be,Qe){ee(He(be),function(U){ce.addEventListener(U,Qe,!1)})}function Ke(ce,be,Qe){ee(He(be),function(U){ce.removeEventListener(U,Qe,!1)})}function Le(ce,be){for(;ce;){if(ce==be)return!0;ce=ce.parentNode}return!1}function W(ce,be){return ce.indexOf(be)>-1}function He(ce){return ce.trim().split(/\s+/g)}function C(ce,be,Qe){if(ce.indexOf&&!Qe)return ce.indexOf(be);for(var U=0;U<ce.length;){if(Qe&&ce[U][Qe]==be||!Qe&&ce[U]===be)return U;U++}return-1}function Ze(ce){return Array.prototype.slice.call(ce,0)}function rt(ce,be,Qe){for(var U=[],K=[],Me=0;Me<ce.length;){var ct=be?ce[Me][be]:ce[Me];C(K,ct)<0&&U.push(ce[Me]),K[Me]=ct,Me++}return Qe&&(be?U=U.sort(function(Ur,Un){return Ur[be]>Un[be]}):U=U.sort()),U}function At(ce,be){for(var Qe,U,K=be[0].toUpperCase()+be.slice(1),Me=0;Me<y.length;){if(Qe=y[Me],U=Qe?Qe+K:be,U in ce)return U;Me++}return p}var Et=1;function ne(){return Et++}function Q(ce){var be=ce.ownerDocument||ce;return be.defaultView||be.parentWindow||o}var te=/mobile|tablet|ip(ad|hone|od)|android/i,Fe="ontouchstart"in o,ze=At(o,"PointerEvent")!==p,St=Fe&&te.test(navigator.userAgent),ut="touch",Qt="pen",vr="mouse",tt="kinect",Pe=25,Ne=1,ke=2,et=4,Ge=8,Ot=1,Bt=2,gt=4,ge=8,Lt=16,qt=Bt|gt,xr=ge|Lt,tr=qt|xr,Xr=["x","y"],rr=["clientX","clientY"];function bn(ce,be){var Qe=this;this.manager=ce,this.callback=be,this.element=ce.element,this.target=ce.options.inputTarget,this.domHandler=function(U){D(ce.options.enable,[ce])&&Qe.handler(U)},this.init()}bn.prototype={handler:function(){},init:function(){this.evEl&&ot(this.element,this.evEl,this.domHandler),this.evTarget&&ot(this.target,this.evTarget,this.domHandler),this.evWin&&ot(Q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ke(this.element,this.evEl,this.domHandler),this.evTarget&&Ke(this.target,this.evTarget,this.domHandler),this.evWin&&Ke(Q(this.element),this.evWin,this.domHandler)}};function ue(ce){var be,Qe=ce.options.inputClass;return Qe?be=Qe:ze?be=xi:St?be=ea:Fe?be=qn:be=_t,new be(ce,tn)}function tn(ce,be,Qe){var U=Qe.pointers.length,K=Qe.changedPointers.length,Me=be&Ne&&U-K==0,ct=be&(et|Ge)&&U-K==0;Qe.isFirst=!!Me,Qe.isFinal=!!ct,Me&&(ce.session={}),Qe.eventType=be,Fn(ce,Qe),ce.emit("hammer.input",Qe),ce.recognize(Qe),ce.session.prevInput=Qe}function Fn(ce,be){var Qe=ce.session,U=be.pointers,K=U.length;Qe.firstInput||(Qe.firstInput=ve(be)),K>1&&!Qe.firstMultiple?Qe.firstMultiple=ve(be):K===1&&(Qe.firstMultiple=!1);var Me=Qe.firstInput,ct=Qe.firstMultiple,lr=ct?ct.center:Me.center,Ur=be.center=Ye(U);be.timeStamp=z(),be.deltaTime=be.timeStamp-Me.timeStamp,be.angle=Pn(lr,Ur),be.distance=me(lr,Ur),Fi(Qe,be),be.offsetDirection=wt(be.deltaX,be.deltaY);var Un=vt(be.deltaTime,be.deltaX,be.deltaY);be.overallVelocityX=Un.x,be.overallVelocityY=Un.y,be.overallVelocity=M(Un.x)>M(Un.y)?Un.x:Un.y,be.scale=ct?Nt(ct.pointers,U):1,be.rotation=ct?Cr(ct.pointers,U):0,be.maxPointers=Qe.prevInput?be.pointers.length>Qe.prevInput.maxPointers?be.pointers.length:Qe.prevInput.maxPointers:be.pointers.length,ki(Qe,be);var cr=ce.element;Le(be.srcEvent.target,cr)&&(cr=be.srcEvent.target),be.target=cr}function Fi(ce,be){var Qe=be.center,U=ce.offsetDelta||{},K=ce.prevDelta||{},Me=ce.prevInput||{};(be.eventType===Ne||Me.eventType===et)&&(K=ce.prevDelta={x:Me.deltaX||0,y:Me.deltaY||0},U=ce.offsetDelta={x:Qe.x,y:Qe.y}),be.deltaX=K.x+(Qe.x-U.x),be.deltaY=K.y+(Qe.y-U.y)}function ki(ce,be){var Qe=ce.lastInterval||be,U=be.timeStamp-Qe.timeStamp,K,Me,ct,lr;if(be.eventType!=Ge&&(U>Pe||Qe.velocity===p)){var Ur=be.deltaX-Qe.deltaX,Un=be.deltaY-Qe.deltaY,cr=vt(U,Ur,Un);Me=cr.x,ct=cr.y,K=M(cr.x)>M(cr.y)?cr.x:cr.y,lr=wt(Ur,Un),ce.lastInterval=be}else K=Qe.velocity,Me=Qe.velocityX,ct=Qe.velocityY,lr=Qe.direction;be.velocity=K,be.velocityX=Me,be.velocityY=ct,be.direction=lr}function ve(ce){for(var be=[],Qe=0;Qe<ce.pointers.length;)be[Qe]={clientX:P(ce.pointers[Qe].clientX),clientY:P(ce.pointers[Qe].clientY)},Qe++;return{timeStamp:z(),pointers:be,center:Ye(be),deltaX:ce.deltaX,deltaY:ce.deltaY}}function Ye(ce){var be=ce.length;if(be===1)return{x:P(ce[0].clientX),y:P(ce[0].clientY)};for(var Qe=0,U=0,K=0;K<be;)Qe+=ce[K].clientX,U+=ce[K].clientY,K++;return{x:P(Qe/be),y:P(U/be)}}function vt(ce,be,Qe){return{x:be/ce||0,y:Qe/ce||0}}function wt(ce,be){return ce===be?Ot:M(ce)>=M(be)?ce<0?Bt:gt:be<0?ge:Lt}function me(ce,be,Qe){Qe||(Qe=Xr);var U=be[Qe[0]]-ce[Qe[0]],K=be[Qe[1]]-ce[Qe[1]];return Math.sqrt(U*U+K*K)}function Pn(ce,be,Qe){Qe||(Qe=Xr);var U=be[Qe[0]]-ce[Qe[0]],K=be[Qe[1]]-ce[Qe[1]];return Math.atan2(K,U)*180/Math.PI}function Cr(ce,be){return Pn(be[1],be[0],rr)+Pn(ce[1],ce[0],rr)}function Nt(ce,be){return me(be[0],be[1],rr)/me(ce[0],ce[1],rr)}var it={mousedown:Ne,mousemove:ke,mouseup:et},Ce="mousedown",Rt="mousemove mouseup";function _t(){this.evEl=Ce,this.evWin=Rt,this.pressed=!1,bn.apply(this,arguments)}X(_t,bn,{handler:function(be){var Qe=it[be.type];Qe&Ne&&be.button===0&&(this.pressed=!0),Qe&ke&&be.which!==1&&(Qe=et),!!this.pressed&&(Qe&et&&(this.pressed=!1),this.callback(this.manager,Qe,{pointers:[be],changedPointers:[be],pointerType:vr,srcEvent:be}))}});var Tn={pointerdown:Ne,pointermove:ke,pointerup:et,pointercancel:Ge,pointerout:Ge},Ve={2:ut,3:Qt,4:vr,5:tt},hi="pointerdown",An="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(hi="MSPointerDown",An="MSPointerMove MSPointerUp MSPointerCancel");function xi(){this.evEl=hi,this.evWin=An,bn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}X(xi,bn,{handler:function(be){var Qe=this.store,U=!1,K=be.type.toLowerCase().replace("ms",""),Me=Tn[K],ct=Ve[be.pointerType]||be.pointerType,lr=ct==ut,Ur=C(Qe,be.pointerId,"pointerId");Me&Ne&&(be.button===0||lr)?Ur<0&&(Qe.push(be),Ur=Qe.length-1):Me&(et|Ge)&&(U=!0),!(Ur<0)&&(Qe[Ur]=be,this.callback(this.manager,Me,{pointers:Qe,changedPointers:[be],pointerType:ct,srcEvent:be}),U&&Qe.splice(Ur,1))}});var Bn={touchstart:Ne,touchmove:ke,touchend:et,touchcancel:Ge},yi="touchstart",Wr="touchstart touchmove touchend touchcancel";function Oi(){this.evTarget=yi,this.evWin=Wr,this.started=!1,bn.apply(this,arguments)}X(Oi,bn,{handler:function(be){var Qe=Bn[be.type];if(Qe===Ne&&(this.started=!0),!!this.started){var U=Oa.call(this,be,Qe);Qe&(et|Ge)&&U[0].length-U[1].length==0&&(this.started=!1),this.callback(this.manager,Qe,{pointers:U[0],changedPointers:U[1],pointerType:ut,srcEvent:be})}}});function Oa(ce,be){var Qe=Ze(ce.touches),U=Ze(ce.changedTouches);return be&(et|Ge)&&(Qe=rt(Qe.concat(U),"identifier",!0)),[Qe,U]}var Aa={touchstart:Ne,touchmove:ke,touchend:et,touchcancel:Ge},Ui="touchstart touchmove touchend touchcancel";function ea(){this.evTarget=Ui,this.targetIds={},bn.apply(this,arguments)}X(ea,bn,{handler:function(be){var Qe=Aa[be.type],U=Ti.call(this,be,Qe);!U||this.callback(this.manager,Qe,{pointers:U[0],changedPointers:U[1],pointerType:ut,srcEvent:be})}});function Ti(ce,be){var Qe=Ze(ce.touches),U=this.targetIds;if(be&(Ne|ke)&&Qe.length===1)return U[Qe[0].identifier]=!0,[Qe,Qe];var K,Me,ct=Ze(ce.changedTouches),lr=[],Ur=this.target;if(Me=Qe.filter(function(Un){return Le(Un.target,Ur)}),be===Ne)for(K=0;K<Me.length;)U[Me[K].identifier]=!0,K++;for(K=0;K<ct.length;)U[ct[K].identifier]&&lr.push(ct[K]),be&(et|Ge)&&delete U[ct[K].identifier],K++;if(!!lr.length)return[rt(Me.concat(lr),"identifier",!0),lr]}var _n=2500,Ci=25;function qn(){bn.apply(this,arguments);var ce=Oe(this.handler,this);this.touch=new ea(this.manager,ce),this.mouse=new _t(this.manager,ce),this.primaryTouch=null,this.lastTouches=[]}X(qn,bn,{handler:function(be,Qe,U){var K=U.pointerType==ut,Me=U.pointerType==vr;if(!(Me&&U.sourceCapabilities&&U.sourceCapabilities.firesTouchEvents)){if(K)Wi.call(this,Qe,U);else if(Me&&si.call(this,U))return;this.callback(be,Qe,U)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wi(ce,be){ce&Ne?(this.primaryTouch=be.changedPointers[0].identifier,ta.call(this,be)):ce&(et|Ge)&&ta.call(this,be)}function ta(ce){var be=ce.changedPointers[0];if(be.identifier===this.primaryTouch){var Qe={x:be.clientX,y:be.clientY};this.lastTouches.push(Qe);var U=this.lastTouches,K=function(){var Me=U.indexOf(Qe);Me>-1&&U.splice(Me,1)};setTimeout(K,_n)}}function si(ce){for(var be=ce.srcEvent.clientX,Qe=ce.srcEvent.clientY,U=0;U<this.lastTouches.length;U++){var K=this.lastTouches[U],Me=Math.abs(be-K.x),ct=Math.abs(Qe-K.y);if(Me<=Ci&&ct<=Ci)return!0}return!1}var li=At(b.style,"touchAction"),Za=li!==p,di="compute",Ha="auto",Va="manipulation",ra="none",xa="pan-x",va="pan-y",Vi=Ka();function ia(ce,be){this.manager=ce,this.set(be)}ia.prototype={set:function(ce){ce==di&&(ce=this.compute()),Za&&this.manager.element.style&&Vi[ce]&&(this.manager.element.style[li]=ce),this.actions=ce.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ce=[];return ee(this.manager.recognizers,function(be){D(be.options.enable,[be])&&(ce=ce.concat(be.getTouchAction()))}),kn(ce.join(" "))},preventDefaults:function(ce){var be=ce.srcEvent,Qe=ce.offsetDirection;if(this.manager.session.prevented){be.preventDefault();return}var U=this.actions,K=W(U,ra)&&!Vi[ra],Me=W(U,va)&&!Vi[va],ct=W(U,xa)&&!Vi[xa];if(K){var lr=ce.pointers.length===1,Ur=ce.distance<2,Un=ce.deltaTime<250;if(lr&&Ur&&Un)return}if(!(ct&&Me)&&(K||Me&&Qe&qt||ct&&Qe&xr))return this.preventSrc(be)},preventSrc:function(ce){this.manager.session.prevented=!0,ce.preventDefault()}};function kn(ce){if(W(ce,ra))return ra;var be=W(ce,xa),Qe=W(ce,va);return be&&Qe?ra:be||Qe?be?xa:va:W(ce,Va)?Va:Ha}function Ka(){if(!Za)return!1;var ce={},be=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Qe){ce[Qe]=be?o.CSS.supports("touch-action",Qe):!0}),ce}var Pa=1,Qi=2,Ia=4,Ma=8,ji=Ma,aa=16,vi=32;function ei(ce){this.options=J({},this.defaults,ce||{}),this.id=ne(),this.manager=null,this.options.enable=De(this.options.enable,!0),this.state=Pa,this.simultaneous={},this.requireFail=[]}ei.prototype={defaults:{},set:function(ce){return J(this.options,ce),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ce){if(G(ce,"recognizeWith",this))return this;var be=this.simultaneous;return ce=Gi(ce,this),be[ce.id]||(be[ce.id]=ce,ce.recognizeWith(this)),this},dropRecognizeWith:function(ce){return G(ce,"dropRecognizeWith",this)?this:(ce=Gi(ce,this),delete this.simultaneous[ce.id],this)},requireFailure:function(ce){if(G(ce,"requireFailure",this))return this;var be=this.requireFail;return ce=Gi(ce,this),C(be,ce)===-1&&(be.push(ce),ce.requireFailure(this)),this},dropRequireFailure:function(ce){if(G(ce,"dropRequireFailure",this))return this;ce=Gi(ce,this);var be=C(this.requireFail,ce);return be>-1&&this.requireFail.splice(be,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ce){return!!this.simultaneous[ce.id]},emit:function(ce){var be=this,Qe=this.state;function U(K){be.manager.emit(K,ce)}Qe<Ma&&U(be.options.event+oa(Qe)),U(be.options.event),ce.additionalEvent&&U(ce.additionalEvent),Qe>=Ma&&U(be.options.event+oa(Qe))},tryEmit:function(ce){if(this.canEmit())return this.emit(ce);this.state=vi},canEmit:function(){for(var ce=0;ce<this.requireFail.length;){if(!(this.requireFail[ce].state&(vi|Pa)))return!1;ce++}return!0},recognize:function(ce){var be=J({},ce);if(!D(this.options.enable,[this,be])){this.reset(),this.state=vi;return}this.state&(ji|aa|vi)&&(this.state=Pa),this.state=this.process(be),this.state&(Qi|Ia|Ma|aa)&&this.tryEmit(be)},process:function(ce){},getTouchAction:function(){},reset:function(){}};function oa(ce){return ce&aa?"cancel":ce&Ma?"end":ce&Ia?"move":ce&Qi?"start":""}function $i(ce){return ce==Lt?"down":ce==ge?"up":ce==Bt?"left":ce==gt?"right":""}function Gi(ce,be){var Qe=be.manager;return Qe?Qe.get(ce):ce}function Ji(){ei.apply(this,arguments)}X(Ji,ei,{defaults:{pointers:1},attrTest:function(ce){var be=this.options.pointers;return be===0||ce.pointers.length===be},process:function(ce){var be=this.state,Qe=ce.eventType,U=be&(Qi|Ia),K=this.attrTest(ce);return U&&(Qe&Ge||!K)?be|aa:U||K?Qe&et?be|Ma:be&Qi?be|Ia:Qi:vi}});function pa(){Ji.apply(this,arguments),this.pX=null,this.pY=null}X(pa,Ji,{defaults:{event:"pan",threshold:10,pointers:1,direction:tr},getTouchAction:function(){var ce=this.options.direction,be=[];return ce&qt&&be.push(va),ce&xr&&be.push(xa),be},directionTest:function(ce){var be=this.options,Qe=!0,U=ce.distance,K=ce.direction,Me=ce.deltaX,ct=ce.deltaY;return K&be.direction||(be.direction&qt?(K=Me===0?Ot:Me<0?Bt:gt,Qe=Me!=this.pX,U=Math.abs(ce.deltaX)):(K=ct===0?Ot:ct<0?ge:Lt,Qe=ct!=this.pY,U=Math.abs(ce.deltaY))),ce.direction=K,Qe&&U>be.threshold&&K&be.direction},attrTest:function(ce){return Ji.prototype.attrTest.call(this,ce)&&(this.state&Qi||!(this.state&Qi)&&this.directionTest(ce))},emit:function(ce){this.pX=ce.deltaX,this.pY=ce.deltaY;var be=$i(ce.direction);be&&(ce.additionalEvent=this.options.event+be),this._super.emit.call(this,ce)}});function ka(){Ji.apply(this,arguments)}X(ka,Ji,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ra]},attrTest:function(ce){return this._super.attrTest.call(this,ce)&&(Math.abs(ce.scale-1)>this.options.threshold||this.state&Qi)},emit:function(ce){if(ce.scale!==1){var be=ce.scale<1?"in":"out";ce.additionalEvent=this.options.event+be}this._super.emit.call(this,ce)}});function ma(){ei.apply(this,arguments),this._timer=null,this._input=null}X(ma,ei,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ha]},process:function(ce){var be=this.options,Qe=ce.pointers.length===be.pointers,U=ce.distance<be.threshold,K=ce.deltaTime>be.time;if(this._input=ce,!U||!Qe||ce.eventType&(et|Ge)&&!K)this.reset();else if(ce.eventType&Ne)this.reset(),this._timer=oe(function(){this.state=ji,this.tryEmit()},be.time,this);else if(ce.eventType&et)return ji;return vi},reset:function(){clearTimeout(this._timer)},emit:function(ce){this.state===ji&&(ce&&ce.eventType&et?this.manager.emit(this.options.event+"up",ce):(this._input.timeStamp=z(),this.manager.emit(this.options.event,this._input)))}});function Bi(){Ji.apply(this,arguments)}X(Bi,Ji,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ra]},attrTest:function(ce){return this._super.attrTest.call(this,ce)&&(Math.abs(ce.rotation)>this.options.threshold||this.state&Qi)}});function Na(){Ji.apply(this,arguments)}X(Na,Ji,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:qt|xr,pointers:1},getTouchAction:function(){return pa.prototype.getTouchAction.call(this)},attrTest:function(ce){var be=this.options.direction,Qe;return be&(qt|xr)?Qe=ce.overallVelocity:be&qt?Qe=ce.overallVelocityX:be&xr&&(Qe=ce.overallVelocityY),this._super.attrTest.call(this,ce)&&be&ce.offsetDirection&&ce.distance>this.options.threshold&&ce.maxPointers==this.options.pointers&&M(Qe)>this.options.velocity&&ce.eventType&et},emit:function(ce){var be=$i(ce.offsetDirection);be&&this.manager.emit(this.options.event+be,ce),this.manager.emit(this.options.event,ce)}});function pi(){ei.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}X(pi,ei,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Va]},process:function(ce){var be=this.options,Qe=ce.pointers.length===be.pointers,U=ce.distance<be.threshold,K=ce.deltaTime<be.time;if(this.reset(),ce.eventType&Ne&&this.count===0)return this.failTimeout();if(U&&K&&Qe){if(ce.eventType!=et)return this.failTimeout();var Me=this.pTime?ce.timeStamp-this.pTime<be.interval:!0,ct=!this.pCenter||me(this.pCenter,ce.center)<be.posThreshold;this.pTime=ce.timeStamp,this.pCenter=ce.center,!ct||!Me?this.count=1:this.count+=1,this._input=ce;var lr=this.count%be.taps;if(lr===0)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=ji,this.tryEmit()},be.interval,this),Qi):ji}return vi},failTimeout:function(){return this._timer=oe(function(){this.state=vi},this.options.interval,this),vi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ji&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function zi(ce,be){return be=be||{},be.recognizers=De(be.recognizers,zi.defaults.preset),new bi(ce,be)}zi.VERSION="2.0.7",zi.defaults={domEvents:!1,touchAction:di,enable:!0,inputTarget:null,inputClass:null,preset:[[Bi,{enable:!1}],[ka,{enable:!1},["rotate"]],[Na,{direction:qt}],[pa,{direction:qt},["swipe"]],[pi],[pi,{event:"doubletap",taps:2},["tap"]],[ma]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Mi=1,Yn=2;function bi(ce,be){this.options=J({},zi.defaults,be||{}),this.options.inputTarget=this.options.inputTarget||ce,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ce,this.input=ue(this),this.touchAction=new ia(this,this.options.touchAction),sa(this,!0),ee(this.options.recognizers,function(Qe){var U=this.add(new Qe[0](Qe[1]));Qe[2]&&U.recognizeWith(Qe[2]),Qe[3]&&U.requireFailure(Qe[3])},this)}bi.prototype={set:function(ce){return J(this.options,ce),ce.touchAction&&this.touchAction.update(),ce.inputTarget&&(this.input.destroy(),this.input.target=ce.inputTarget,this.input.init()),this},stop:function(ce){this.session.stopped=ce?Yn:Mi},recognize:function(ce){var be=this.session;if(!be.stopped){this.touchAction.preventDefaults(ce);var Qe,U=this.recognizers,K=be.curRecognizer;(!K||K&&K.state&ji)&&(K=be.curRecognizer=null);for(var Me=0;Me<U.length;)Qe=U[Me],be.stopped!==Yn&&(!K||Qe==K||Qe.canRecognizeWith(K))?Qe.recognize(ce):Qe.reset(),!K&&Qe.state&(Qi|Ia|Ma)&&(K=be.curRecognizer=Qe),Me++}},get:function(ce){if(ce instanceof ei)return ce;for(var be=this.recognizers,Qe=0;Qe<be.length;Qe++)if(be[Qe].options.event==ce)return be[Qe];return null},add:function(ce){if(G(ce,"add",this))return this;var be=this.get(ce.options.event);return be&&this.remove(be),this.recognizers.push(ce),ce.manager=this,this.touchAction.update(),ce},remove:function(ce){if(G(ce,"remove",this))return this;if(ce=this.get(ce),ce){var be=this.recognizers,Qe=C(be,ce);Qe!==-1&&(be.splice(Qe,1),this.touchAction.update())}return this},on:function(ce,be){if(ce!==p&&be!==p){var Qe=this.handlers;return ee(He(ce),function(U){Qe[U]=Qe[U]||[],Qe[U].push(be)}),this}},off:function(ce,be){if(ce!==p){var Qe=this.handlers;return ee(He(ce),function(U){be?Qe[U]&&Qe[U].splice(C(Qe[U],be),1):delete Qe[U]}),this}},emit:function(ce,be){this.options.domEvents&&Ra(ce,be);var Qe=this.handlers[ce]&&this.handlers[ce].slice();if(!(!Qe||!Qe.length)){be.type=ce,be.preventDefault=function(){be.srcEvent.preventDefault()};for(var U=0;U<Qe.length;)Qe[U](be),U++}},destroy:function(){this.element&&sa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function sa(ce,be){var Qe=ce.element;if(!!Qe.style){var U;ee(ce.options.cssProps,function(K,Me){U=At(Qe.style,Me),be?(ce.oldCssProps[U]=Qe.style[U],Qe.style[U]=K):Qe.style[U]=ce.oldCssProps[U]||""}),be||(ce.oldCssProps={})}}function Ra(ce,be){var Qe=m.createEvent("Event");Qe.initEvent(ce,!0,!0),Qe.gesture=be,be.target.dispatchEvent(Qe)}J(zi,{INPUT_START:Ne,INPUT_MOVE:ke,INPUT_END:et,INPUT_CANCEL:Ge,STATE_POSSIBLE:Pa,STATE_BEGAN:Qi,STATE_CHANGED:Ia,STATE_ENDED:Ma,STATE_RECOGNIZED:ji,STATE_CANCELLED:aa,STATE_FAILED:vi,DIRECTION_NONE:Ot,DIRECTION_LEFT:Bt,DIRECTION_RIGHT:gt,DIRECTION_UP:ge,DIRECTION_DOWN:Lt,DIRECTION_HORIZONTAL:qt,DIRECTION_VERTICAL:xr,DIRECTION_ALL:tr,Manager:bi,Input:bn,TouchAction:ia,TouchInput:ea,MouseInput:_t,PointerEventInput:xi,TouchMouseInput:qn,SingleTouchInput:Oi,Recognizer:ei,AttrRecognizer:Ji,Tap:pi,Pan:pa,Swipe:Na,Pinch:ka,Rotate:Bi,Press:ma,on:ot,off:Ke,each:ee,merge:fe,extend:se,assign:J,inherit:X,bindFn:Oe,prefixed:At});var Qa=typeof o!="undefined"?o:typeof self!="undefined"?self:{};Qa.Hammer=zi,l=function(){return zi}.call(v,a,v,A),l!==p&&(A.exports=l)})(window,document,"Hammer")},yMAV:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Plan=void 0;var l=function(){function o(m,g){this.parentContext=m,this.rootRequest=g}return o}();v.Plan=l},yXPU:function(A,v){function a(o,m,g,p,y,b,I){try{var P=o[b](I),M=P.value}catch(z){g(z);return}P.done?m(M):Promise.resolve(M).then(p,y)}function l(o){return function(){var m=this,g=arguments;return new Promise(function(p,y){var b=o.apply(m,g);function I(M){a(b,p,y,I,P,"next",M)}function P(M){a(b,p,y,I,P,"throw",M)}I(void 0)})}}A.exports=l,A.exports.default=A.exports,A.exports.__esModule=!0},ycXD:function(A,v){var a="\\ud800-\\udfff",l="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",m="\\u20d0-\\u20ff",g=l+o+m,p="\\u2700-\\u27bf",y="a-z\\xdf-\\xf6\\xf8-\\xff",b="\\xac\\xb1\\xd7\\xf7",I="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",P="\\u2000-\\u206f",M=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z="A-Z\\xc0-\\xd6\\xd8-\\xde",oe="\\ufe0e\\ufe0f",G=b+I+P+M,ee="['\u2019]",pe="["+G+"]",J="["+g+"]",se="\\d+",fe="["+p+"]",X="["+y+"]",Oe="[^"+a+G+se+p+y+z+"]",D="\\ud83c[\\udffb-\\udfff]",De="(?:"+J+"|"+D+")",ot="[^"+a+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",W="["+z+"]",He="\\u200d",C="(?:"+X+"|"+Oe+")",Ze="(?:"+W+"|"+Oe+")",rt="(?:"+ee+"(?:d|ll|m|re|s|t|ve))?",At="(?:"+ee+"(?:D|LL|M|RE|S|T|VE))?",Et=De+"?",ne="["+oe+"]?",Q="(?:"+He+"(?:"+[ot,Ke,Le].join("|")+")"+ne+Et+")*",te="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ze=ne+Et+Q,St="(?:"+[fe,Ke,Le].join("|")+")"+ze,ut=RegExp([W+"?"+X+"+"+rt+"(?="+[pe,W,"$"].join("|")+")",Ze+"+"+At+"(?="+[pe,W+C,"$"].join("|")+")",W+"?"+C+"+"+rt,W+"+"+At,Fe,te,se,St].join("|"),"g");function Qt(vr){return vr.match(ut)||[]}A.exports=Qt},z4Hk:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.BindingWhenSyntax=void 0;var l=a("406g"),o=a("RR/i"),m=function(){function g(p){this._binding=p}return g.prototype.when=function(p){return this._binding.constraint=p,new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetNamed=function(p){return this._binding.constraint=o.namedConstraint(p),new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(p){var y=p.target!==null&&!p.target.isNamed()&&!p.target.isTagged();return y},new l.BindingOnSyntax(this._binding)},g.prototype.whenTargetTagged=function(p,y){return this._binding.constraint=o.taggedConstraint(p)(y),new l.BindingOnSyntax(this._binding)},g.prototype.whenInjectedInto=function(p){return this._binding.constraint=function(y){return o.typeConstraint(p)(y.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenParentNamed=function(p){return this._binding.constraint=function(y){return o.namedConstraint(p)(y.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenParentTagged=function(p,y){return this._binding.constraint=function(b){return o.taggedConstraint(p)(y)(b.parentRequest)},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorIs=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,o.typeConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorIs=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,o.typeConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorNamed=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,o.namedConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorNamed=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,o.namedConstraint(p))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorTagged=function(p,y){return this._binding.constraint=function(b){return o.traverseAncerstors(b,o.taggedConstraint(p)(y))},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorTagged=function(p,y){return this._binding.constraint=function(b){return!o.traverseAncerstors(b,o.taggedConstraint(p)(y))},new l.BindingOnSyntax(this._binding)},g.prototype.whenAnyAncestorMatches=function(p){return this._binding.constraint=function(y){return o.traverseAncerstors(y,p)},new l.BindingOnSyntax(this._binding)},g.prototype.whenNoAncestorMatches=function(p){return this._binding.constraint=function(y){return!o.traverseAncerstors(y,p)},new l.BindingOnSyntax(this._binding)},g}();v.BindingWhenSyntax=m},z6AL:function(A,v,a){var l=a("wyAb"),o=a("QS1c");function m(g){return l(function(p,y){var b=-1,I=y.length,P=I>1?y[I-1]:void 0,M=I>2?y[2]:void 0;for(P=g.length>3&&typeof P=="function"?(I--,P):void 0,M&&o(y[0],y[1],M)&&(P=I<3?void 0:P,I=1),p=Object(p);++b<I;){var z=y[b];z&&g(p,z,b,P)}return p})}A.exports=m},zbeO:function(A,v,a){var l=a("0kiv"),o={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},m=l(o);A.exports=m},zcPs:function(A,v,a){var l=a("BMKy"),o=a("uQg+"),m=a("sHph"),g=a("pC8I"),p=1/0,y=l?l.prototype:void 0,b=y?y.toString:void 0;function I(P){if(typeof P=="string")return P;if(m(P))return o(P,I)+"";if(g(P))return b?b.call(P):"";var M=P+"";return M=="0"&&1/P==-p?"-0":M}A.exports=I},zk7k:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.Binding=void 0;var l=a("BU00"),o=a("gbO8"),m=function(){function g(p,y){this.id=o.id(),this.activated=!1,this.serviceIdentifier=p,this.scope=y,this.type=l.BindingTypeEnum.Invalid,this.constraint=function(b){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return g.prototype.clone=function(){var p=new g(this.serviceIdentifier,this.scope);return p.activated=p.scope===l.BindingScopeEnum.Singleton?this.activated:!1,p.implementationType=this.implementationType,p.dynamicValue=this.dynamicValue,p.scope=this.scope,p.type=this.type,p.factory=this.factory,p.provider=this.provider,p.constraint=this.constraint,p.onActivation=this.onActivation,p.cache=this.cache,p},g}();v.Binding=m},zsLF:function(A,v,a){(function(l){var o=typeof l=="object"&&l&&l.Object===Object&&l;A.exports=o}).call(this,a("QLrv"))},zxI2:function(A,v,a){var l=a("mvsW"),o=a("QSQ1");function m(g,p,y){return y===void 0&&(y=p,p=void 0),y!==void 0&&(y=o(y),y=y===y?y:0),p!==void 0&&(p=o(p),p=p===p?p:0),l(o(g),p,y)}A.exports=m},zxMA:function(A,v,a){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),v.QueryableString=void 0;var l=function(){function o(m){this.str=m}return o.prototype.startsWith=function(m){return this.str.indexOf(m)===0},o.prototype.endsWith=function(m){var g="",p=m.split("").reverse().join("");return g=this.str.split("").reverse().join(""),this.startsWith.call({str:g},p)},o.prototype.contains=function(m){return this.str.indexOf(m)!==-1},o.prototype.equals=function(m){return this.str===m},o.prototype.value=function(){return this.str},o}();v.QueryableString=l}}]);
