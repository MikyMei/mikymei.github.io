(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"+aTT":function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt}),b.d(nt,"b",function(){return k});var B=b("ZXNb"),bt=Object(B.o)(),k=function(ft,ot,gt,lt){if(lt){var z=bt(lt);z.dataIndex=gt,z.dataType=ot,z.seriesIndex=ft,lt.type==="group"&&lt.traverse(function(X){var J=bt(X);J.seriesIndex=ft,J.dataIndex=gt,J.dataType=ot})}}},"/FtT":function(je,nt,b){"use strict";var B=b("QO9Q"),bt;bt=B.a.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(k){return setTimeout(k,16)},nt.a=bt},"/IPs":function(je,nt){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */nt.read=function(b,B,bt,k,ft){var ot,gt,lt=ft*8-k-1,z=(1<<lt)-1,X=z>>1,J=-7,at=bt?ft-1:0,F=bt?-1:1,Z=b[B+at];for(at+=F,ot=Z&(1<<-J)-1,Z>>=-J,J+=lt;J>0;ot=ot*256+b[B+at],at+=F,J-=8);for(gt=ot&(1<<-J)-1,ot>>=-J,J+=k;J>0;gt=gt*256+b[B+at],at+=F,J-=8);if(ot===0)ot=1-X;else{if(ot===z)return gt?NaN:(Z?-1:1)*Infinity;gt=gt+Math.pow(2,k),ot=ot-X}return(Z?-1:1)*gt*Math.pow(2,ot-k)},nt.write=function(b,B,bt,k,ft,ot){var gt,lt,z,X=ot*8-ft-1,J=(1<<X)-1,at=J>>1,F=ft===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=k?0:ot-1,W=k?1:-1,ht=B<0||B===0&&1/B<0?1:0;for(B=Math.abs(B),isNaN(B)||B===Infinity?(lt=isNaN(B)?1:0,gt=J):(gt=Math.floor(Math.log(B)/Math.LN2),B*(z=Math.pow(2,-gt))<1&&(gt--,z*=2),gt+at>=1?B+=F/z:B+=F*Math.pow(2,1-at),B*z>=2&&(gt++,z/=2),gt+at>=J?(lt=0,gt=J):gt+at>=1?(lt=(B*z-1)*Math.pow(2,ft),gt=gt+at):(lt=B*Math.pow(2,at-1)*Math.pow(2,ft),gt=0));ft>=8;b[bt+Z]=lt&255,Z+=W,lt/=256,ft-=8);for(gt=gt<<ft|lt,X+=ft;X>0;b[bt+Z]=gt&255,Z+=W,gt/=256,X-=8);b[bt+Z-W]|=ht*128}},"/PGm":function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("bPXU"),k=b("PWZQ"),ft=b("C9tP"),ot=b("YN2f"),gt=b("ZXNb"),lt=b("RlS0"),z=Object(gt.o)(),X=function(at){Object(B.a)(F,at);function F(Z,W,ht){var q=at.call(this,Z,W,ht)||this;return q.uid=ft.c("ec_cpt_model"),q}return F.prototype.init=function(Z,W,ht){this.mergeDefaultAndTheme(Z,ht)},F.prototype.mergeDefaultAndTheme=function(Z,W){var ht=lt.d(this),q=ht?lt.f(Z):{},g=W.getTheme();bt.I(Z,g.get(this.mainType)),bt.I(Z,this.getDefaultOption()),ht&&lt.h(Z,q,ht)},F.prototype.mergeOption=function(Z,W){bt.I(this.option,Z,!0);var ht=lt.d(this);ht&&lt.h(this.option,Z,ht)},F.prototype.optionUpdated=function(Z,W){},F.prototype.getDefaultOption=function(){var Z=this.constructor;if(!Object(ot.d)(Z))return Z.defaultOption;var W=z(this);if(!W.defaultOption){for(var ht=[],q=Z;q;){var g=q.prototype.defaultOption;g&&ht.push(g),q=q.superClass}for(var et={},$=ht.length-1;$>=0;$--)et=bt.I(et,ht[$],!0);W.defaultOption=et}return W.defaultOption},F.prototype.getReferringComponents=function(Z,W){var ht=Z+"Index",q=Z+"Id";return Object(gt.v)(this.ecModel,Z,{index:this.get(ht,!0),id:this.get(q,!0)},W)},F.prototype.getBoxLayoutParams=function(){var Z=this;return{left:Z.get("left"),top:Z.get("top"),right:Z.get("right"),bottom:Z.get("bottom"),width:Z.get("width"),height:Z.get("height")}},F.prototype.getZLevelKey=function(){return""},F.prototype.setZLevel=function(Z){this.option.zlevel=Z},F.protoInitialize=function(){var Z=F.prototype;Z.type="component",Z.id="",Z.name="",Z.mainType="",Z.subType="",Z.componentIndex=0}(),F}(k.a);Object(ot.e)(X,k.a),Object(ot.c)(X),ft.a(X),ft.b(X,J);function J(at){var F=[];return bt.k(X.getClassesByMainType(at),function(Z){F=F.concat(Z.dependencies||Z.prototype.dependencies||[])}),F=bt.H(F,function(Z){return Object(ot.f)(Z).main}),at!=="dataset"&&bt.r(F,"dataset")<=0&&F.unshift("dataset"),F}nt.a=X},"/pJh":function(je,nt,b){"use strict";b.d(nt,"a",function(){return B});function B(bt,k,ft,ot,gt,lt){if(lt>k&&lt>ot||lt<k&&lt<ot||ot===k)return 0;var z=(lt-k)/(ot-k),X=ot<k?1:-1;(z===1||z===0)&&(X=ot<k?.5:-.5);var J=z*(ft-bt)+bt;return J===gt?Infinity:J>gt?X:0}},"08kU":function(je,nt,b){"use strict";b.r(nt),b.d(nt,"init",function(){return Ke}),b.d(nt,"dispose",function(){return qe}),b.d(nt,"disposeAll",function(){return Qt}),b.d(nt,"getInstance",function(){return Se}),b.d(nt,"registerPainter",function(){return Ve}),b.d(nt,"version",function(){return Ie});var B=b("QO9Q"),bt=b("bPXU"),k=b("c5Gk"),ft=b("FLFE"),ot=function(){function Zt(qt,le){this.target=qt,this.topTarget=le&&le.topTarget}return Zt}(),gt=function(){function Zt(qt){this.handler=qt,qt.on("mousedown",this._dragStart,this),qt.on("mousemove",this._drag,this),qt.on("mouseup",this._dragEnd,this)}return Zt.prototype._dragStart=function(qt){for(var le=qt.target;le&&!le.draggable;)le=le.parent||le.__hostTarget;le&&(this._draggingTarget=le,le.dragging=!0,this._x=qt.offsetX,this._y=qt.offsetY,this.handler.dispatchToElement(new ot(le,qt),"dragstart",qt.event))},Zt.prototype._drag=function(qt){var le=this._draggingTarget;if(le){var De=qt.offsetX,tr=qt.offsetY,nr=De-this._x,fe=tr-this._y;this._x=De,this._y=tr,le.drift(nr,fe,qt),this.handler.dispatchToElement(new ot(le,qt),"drag",qt.event);var Ee=this.handler.findHover(De,tr,le).target,ke=this._dropTarget;this._dropTarget=Ee,le!==Ee&&(ke&&Ee!==ke&&this.handler.dispatchToElement(new ot(ke,qt),"dragleave",qt.event),Ee&&Ee!==ke&&this.handler.dispatchToElement(new ot(Ee,qt),"dragenter",qt.event))}},Zt.prototype._dragEnd=function(qt){var le=this._draggingTarget;le&&(le.dragging=!1),this.handler.dispatchToElement(new ot(le,qt),"dragend",qt.event),this._dropTarget&&this.handler.dispatchToElement(new ot(this._dropTarget,qt),"drop",qt.event),this._draggingTarget=null,this._dropTarget=null},Zt}(),lt=gt,z=b("HIFk"),X=b("i5AE"),J=function(){function Zt(){this._track=[]}return Zt.prototype.recognize=function(qt,le,De){return this._doTrack(qt,le,De),this._recognize(qt)},Zt.prototype.clear=function(){return this._track.length=0,this},Zt.prototype._doTrack=function(qt,le,De){var tr=qt.touches;if(!!tr){for(var nr={points:[],touches:[],target:le,event:qt},fe=0,Ee=tr.length;fe<Ee;fe++){var ke=tr[fe],Re=X.b(De,ke,{});nr.points.push([Re.zrX,Re.zrY]),nr.touches.push(ke)}this._track.push(nr)}},Zt.prototype._recognize=function(qt){for(var le in Z)if(Z.hasOwnProperty(le)){var De=Z[le](this._track,qt);if(De)return De}},Zt}();function at(Zt){var qt=Zt[1][0]-Zt[0][0],le=Zt[1][1]-Zt[0][1];return Math.sqrt(qt*qt+le*le)}function F(Zt){return[(Zt[0][0]+Zt[1][0])/2,(Zt[0][1]+Zt[1][1])/2]}var Z={pinch:function(Zt,qt){var le=Zt.length;if(!!le){var De=(Zt[le-1]||{}).points,tr=(Zt[le-2]||{}).points||De;if(tr&&tr.length>1&&De&&De.length>1){var nr=at(De)/at(tr);!isFinite(nr)&&(nr=1),qt.pinchScale=nr;var fe=F(De);return qt.pinchX=fe[0],qt.pinchY=fe[1],{type:"pinch",target:Zt[0].target,event:qt}}}}},W="silent";function ht(Zt,qt,le){return{type:Zt,event:le,target:qt.target,topTarget:qt.topTarget,cancelBubble:!1,offsetX:le.zrX,offsetY:le.zrY,gestureEvent:le.gestureEvent,pinchX:le.pinchX,pinchY:le.pinchY,pinchScale:le.pinchScale,wheelDelta:le.zrDelta,zrByTouch:le.zrByTouch,which:le.which,stop:q}}function q(){X.g(this.event)}var g=function(Zt){Object(k.a)(qt,Zt);function qt(){var le=Zt!==null&&Zt.apply(this,arguments)||this;return le.handler=null,le}return qt.prototype.dispose=function(){},qt.prototype.setCursor=function(){},qt}(z.a),et=function(){function Zt(qt,le){this.x=qt,this.y=le}return Zt}(),$=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],N=function(Zt){Object(k.a)(qt,Zt);function qt(le,De,tr,nr){var fe=Zt.call(this)||this;return fe._hovered=new et(0,0),fe.storage=le,fe.painter=De,fe.painterRoot=nr,tr=tr||new g,fe.proxy=null,fe.setHandlerProxy(tr),fe._draggingMgr=new lt(fe),fe}return qt.prototype.setHandlerProxy=function(le){this.proxy&&this.proxy.dispose(),le&&(bt.k($,function(De){le.on&&le.on(De,this[De],this)},this),le.handler=this),this.proxy=le},qt.prototype.mousemove=function(le){var De=le.zrX,tr=le.zrY,nr=K(this,De,tr),fe=this._hovered,Ee=fe.target;Ee&&!Ee.__zr&&(fe=this.findHover(fe.x,fe.y),Ee=fe.target);var ke=this._hovered=nr?new et(De,tr):this.findHover(De,tr),Re=ke.target,Cr=this.proxy;Cr.setCursor&&Cr.setCursor(Re?Re.cursor:"default"),Ee&&Re!==Ee&&this.dispatchToElement(fe,"mouseout",le),this.dispatchToElement(ke,"mousemove",le),Re&&Re!==Ee&&this.dispatchToElement(ke,"mouseover",le)},qt.prototype.mouseout=function(le){var De=le.zrEventControl;De!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",le),De!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:le})},qt.prototype.resize=function(){this._hovered=new et(0,0)},qt.prototype.dispatch=function(le,De){var tr=this[le];tr&&tr.call(this,De)},qt.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},qt.prototype.setCursorStyle=function(le){var De=this.proxy;De.setCursor&&De.setCursor(le)},qt.prototype.dispatchToElement=function(le,De,tr){le=le||{};var nr=le.target;if(!(nr&&nr.silent)){for(var fe="on"+De,Ee=ht(De,le,tr);nr&&(nr[fe]&&(Ee.cancelBubble=!!nr[fe].call(nr,Ee)),nr.trigger(De,Ee),nr=nr.__hostTarget?nr.__hostTarget:nr.parent,!Ee.cancelBubble););Ee.cancelBubble||(this.trigger(De,Ee),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(ke){typeof ke[fe]=="function"&&ke[fe].call(ke,Ee),ke.trigger&&ke.trigger(De,Ee)}))}},qt.prototype.findHover=function(le,De,tr){for(var nr=this.storage.getDisplayList(),fe=new et(le,De),Ee=nr.length-1;Ee>=0;Ee--){var ke=void 0;if(nr[Ee]!==tr&&!nr[Ee].ignore&&(ke=Y(nr[Ee],le,De))&&(!fe.topTarget&&(fe.topTarget=nr[Ee]),ke!==W)){fe.target=nr[Ee];break}}return fe},qt.prototype.processGesture=function(le,De){this._gestureMgr||(this._gestureMgr=new J);var tr=this._gestureMgr;De==="start"&&tr.clear();var nr=tr.recognize(le,this.findHover(le.zrX,le.zrY,null).target,this.proxy.dom);if(De==="end"&&tr.clear(),nr){var fe=nr.type;le.gestureEvent=fe;var Ee=new et;Ee.target=nr.target,this.dispatchToElement(Ee,fe,nr.event)}},qt}(z.a);bt.k(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Zt){N.prototype[Zt]=function(qt){var le=qt.zrX,De=qt.zrY,tr=K(this,le,De),nr,fe;if((Zt!=="mouseup"||!tr)&&(nr=this.findHover(le,De),fe=nr.target),Zt==="mousedown")this._downEl=fe,this._downPoint=[qt.zrX,qt.zrY],this._upEl=fe;else if(Zt==="mouseup")this._upEl=fe;else if(Zt==="click"){if(this._downEl!==this._upEl||!this._downPoint||ft.f(this._downPoint,[qt.zrX,qt.zrY])>4)return;this._downPoint=null}this.dispatchToElement(nr,Zt,qt)}});function Y(Zt,qt,le){if(Zt[Zt.rectHover?"rectContain":"contain"](qt,le)){for(var De=Zt,tr=void 0,nr=!1;De;){if(De.ignoreClip&&(nr=!0),!nr){var fe=De.getClipPath();if(fe&&!fe.contain(qt,le))return!1;De.silent&&(tr=!0)}var Ee=De.__hostTarget;De=Ee||De.parent}return tr?W:!0}return!1}function K(Zt,qt,le){var De=Zt.painter;return qt<0||qt>De.getWidth()||le<0||le>De.getHeight()}var V=N,G=b("z80y"),I=b("teyC"),A=!1;function C(){A||(A=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function E(Zt,qt){return Zt.zlevel===qt.zlevel?Zt.z===qt.z?Zt.z2-qt.z2:Zt.z-qt.z:Zt.zlevel-qt.zlevel}var O=function(){function Zt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=E}return Zt.prototype.traverse=function(qt,le){for(var De=0;De<this._roots.length;De++)this._roots[De].traverse(qt,le)},Zt.prototype.getDisplayList=function(qt,le){le=le||!1;var De=this._displayList;return(qt||!De.length)&&this.updateDisplayList(le),De},Zt.prototype.updateDisplayList=function(qt){this._displayListLen=0;for(var le=this._roots,De=this._displayList,tr=0,nr=le.length;tr<nr;tr++)this._updateAndAddDisplayable(le[tr],null,qt);De.length=this._displayListLen,Object(G.a)(De,E)},Zt.prototype._updateAndAddDisplayable=function(qt,le,De){if(!(qt.ignore&&!De)){qt.beforeUpdate(),qt.update(),qt.afterUpdate();var tr=qt.getClipPath();if(qt.ignoreClip)le=null;else if(tr){le?le=le.slice():le=[];for(var nr=tr,fe=qt;nr;)nr.parent=fe,nr.updateTransform(),le.push(nr),fe=nr,nr=nr.getClipPath()}if(qt.childrenRef){for(var Ee=qt.childrenRef(),ke=0;ke<Ee.length;ke++){var Re=Ee[ke];qt.__dirty&&(Re.__dirty|=I.a),this._updateAndAddDisplayable(Re,le,De)}qt.__dirty=0}else{var Cr=qt;le&&le.length?Cr.__clipPaths=le:Cr.__clipPaths&&Cr.__clipPaths.length>0&&(Cr.__clipPaths=[]),isNaN(Cr.z)&&(C(),Cr.z=0),isNaN(Cr.z2)&&(C(),Cr.z2=0),isNaN(Cr.zlevel)&&(C(),Cr.zlevel=0),this._displayList[this._displayListLen++]=Cr}var Fr=qt.getDecalElement&&qt.getDecalElement();Fr&&this._updateAndAddDisplayable(Fr,le,De);var Hr=qt.getTextGuideLine();Hr&&this._updateAndAddDisplayable(Hr,le,De);var Jr=qt.getTextContent();Jr&&this._updateAndAddDisplayable(Jr,le,De)}},Zt.prototype.addRoot=function(qt){qt.__zr&&qt.__zr.storage===this||this._roots.push(qt)},Zt.prototype.delRoot=function(qt){if(qt instanceof Array){for(var le=0,De=qt.length;le<De;le++)this.delRoot(qt[le]);return}var tr=bt.r(this._roots,qt);tr>=0&&this._roots.splice(tr,1)},Zt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Zt.prototype.getRoots=function(){return this._roots},Zt.prototype.dispose=function(){this._displayList=null,this._roots=null},Zt}(),M=O,L=b("/FtT"),H=b("k/Px");function U(){return new Date().getTime()}var ct=function(Zt){Object(k.a)(qt,Zt);function qt(le){var De=Zt.call(this)||this;return De._running=!1,De._time=0,De._pausedTime=0,De._pauseStart=0,De._paused=!1,le=le||{},De.stage=le.stage||{},De}return qt.prototype.addClip=function(le){le.animation&&this.removeClip(le),this._head?(this._tail.next=le,le.prev=this._tail,le.next=null,this._tail=le):this._head=this._tail=le,le.animation=this},qt.prototype.addAnimator=function(le){le.animation=this;var De=le.getClip();De&&this.addClip(De)},qt.prototype.removeClip=function(le){if(!!le.animation){var De=le.prev,tr=le.next;De?De.next=tr:this._head=tr,tr?tr.prev=De:this._tail=De,le.next=le.prev=le.animation=null}},qt.prototype.removeAnimator=function(le){var De=le.getClip();De&&this.removeClip(De),le.animation=null},qt.prototype.update=function(le){for(var De=U()-this._pausedTime,tr=De-this._time,nr=this._head;nr;){var fe=nr.next,Ee=nr.step(De,tr);Ee&&(nr.ondestroy(),this.removeClip(nr)),nr=fe}this._time=De,le||(this.trigger("frame",tr),this.stage.update&&this.stage.update())},qt.prototype._startLoop=function(){var le=this;this._running=!0;function De(){le._running&&(Object(L.a)(De),!le._paused&&le.update())}Object(L.a)(De)},qt.prototype.start=function(){this._running||(this._time=U(),this._pausedTime=0,this._startLoop())},qt.prototype.stop=function(){this._running=!1},qt.prototype.pause=function(){this._paused||(this._pauseStart=U(),this._paused=!0)},qt.prototype.resume=function(){this._paused&&(this._pausedTime+=U()-this._pauseStart,this._paused=!1)},qt.prototype.clear=function(){for(var le=this._head;le;){var De=le.next;le.prev=le.next=le.animation=null,le=De}this._head=this._tail=null},qt.prototype.isFinished=function(){return this._head==null},qt.prototype.animate=function(le,De){De=De||{},this.start();var tr=new H.b(le,De.loop);return this.addAnimator(tr),tr},qt}(z.a),st=ct,vt=300,it=B.a.domSupported,dt=function(){var Zt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],qt=["touchstart","touchend","touchmove"],le={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},De=bt.H(Zt,function(tr){var nr=tr.replace("mouse","pointer");return le.hasOwnProperty(nr)?nr:tr});return{mouse:Zt,touch:qt,pointer:De}}(),St={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},ut=!1;function yt(Zt){var qt=Zt.pointerType;return qt==="pen"||qt==="touch"}function Ot(Zt){Zt.touching=!0,Zt.touchTimer!=null&&(clearTimeout(Zt.touchTimer),Zt.touchTimer=null),Zt.touchTimer=setTimeout(function(){Zt.touching=!1,Zt.touchTimer=null},700)}function At(Zt){Zt&&(Zt.zrByTouch=!0)}function It(Zt,qt){return Object(X.e)(Zt.dom,new Ft(Zt,qt),!0)}function Ct(Zt,qt){for(var le=qt,De=!1;le&&le.nodeType!==9&&!(De=le.domBelongToZr||le!==qt&&le===Zt.painterRoot);)le=le.parentNode;return De}var Ft=function(){function Zt(qt,le){this.stopPropagation=bt.L,this.stopImmediatePropagation=bt.L,this.preventDefault=bt.L,this.type=le.type,this.target=this.currentTarget=qt.dom,this.pointerType=le.pointerType,this.clientX=le.clientX,this.clientY=le.clientY}return Zt}(),zt={mousedown:function(Zt){Zt=Object(X.e)(this.dom,Zt),this.__mayPointerCapture=[Zt.zrX,Zt.zrY],this.trigger("mousedown",Zt)},mousemove:function(Zt){Zt=Object(X.e)(this.dom,Zt);var qt=this.__mayPointerCapture;qt&&(Zt.zrX!==qt[0]||Zt.zrY!==qt[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Zt)},mouseup:function(Zt){Zt=Object(X.e)(this.dom,Zt),this.__togglePointerCapture(!1),this.trigger("mouseup",Zt)},mouseout:function(Zt){Zt=Object(X.e)(this.dom,Zt);var qt=Zt.toElement||Zt.relatedTarget;Ct(this,qt)||(this.__pointerCapturing&&(Zt.zrEventControl="no_globalout"),this.trigger("mouseout",Zt))},wheel:function(Zt){ut=!0,Zt=Object(X.e)(this.dom,Zt),this.trigger("mousewheel",Zt)},mousewheel:function(Zt){ut||(Zt=Object(X.e)(this.dom,Zt),this.trigger("mousewheel",Zt))},touchstart:function(Zt){Zt=Object(X.e)(this.dom,Zt),At(Zt),this.__lastTouchMoment=new Date,this.handler.processGesture(Zt,"start"),zt.mousemove.call(this,Zt),zt.mousedown.call(this,Zt)},touchmove:function(Zt){Zt=Object(X.e)(this.dom,Zt),At(Zt),this.handler.processGesture(Zt,"change"),zt.mousemove.call(this,Zt)},touchend:function(Zt){Zt=Object(X.e)(this.dom,Zt),At(Zt),this.handler.processGesture(Zt,"end"),zt.mouseup.call(this,Zt),+new Date-+this.__lastTouchMoment<vt&&zt.click.call(this,Zt)},pointerdown:function(Zt){zt.mousedown.call(this,Zt)},pointermove:function(Zt){yt(Zt)||zt.mousemove.call(this,Zt)},pointerup:function(Zt){zt.mouseup.call(this,Zt)},pointerout:function(Zt){yt(Zt)||zt.mouseout.call(this,Zt)}};bt.k(["click","dblclick","contextmenu"],function(Zt){zt[Zt]=function(qt){qt=Object(X.e)(this.dom,qt),this.trigger(Zt,qt)}});var Xt={pointermove:function(Zt){yt(Zt)||Xt.mousemove.call(this,Zt)},pointerup:function(Zt){Xt.mouseup.call(this,Zt)},mousemove:function(Zt){this.trigger("mousemove",Zt)},mouseup:function(Zt){var qt=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Zt),qt&&(Zt.zrEventControl="only_globalout",this.trigger("mouseout",Zt))}};function ie(Zt,qt){var le=qt.domHandlers;B.a.pointerEventsSupported?bt.k(dt.pointer,function(De){he(qt,De,function(tr){le[De].call(Zt,tr)})}):(B.a.touchEventsSupported&&bt.k(dt.touch,function(De){he(qt,De,function(tr){le[De].call(Zt,tr),Ot(qt)})}),bt.k(dt.mouse,function(De){he(qt,De,function(tr){tr=Object(X.c)(tr),qt.touching||le[De].call(Zt,tr)})}))}function oe(Zt,qt){B.a.pointerEventsSupported?bt.k(St.pointer,le):B.a.touchEventsSupported||bt.k(St.mouse,le);function le(De){function tr(nr){nr=Object(X.c)(nr),Ct(Zt,nr.target)||(nr=It(Zt,nr),qt.domHandlers[De].call(Zt,nr))}he(qt,De,tr,{capture:!0})}}function he(Zt,qt,le,De){Zt.mounted[qt]=le,Zt.listenerOpts[qt]=De,Object(X.a)(Zt.domTarget,qt,le,De)}function be(Zt){var qt=Zt.mounted;for(var le in qt)qt.hasOwnProperty(le)&&Object(X.f)(Zt.domTarget,le,qt[le],Zt.listenerOpts[le]);Zt.mounted={}}var Ce=function(){function Zt(qt,le){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=qt,this.domHandlers=le}return Zt}(),Fe=function(Zt){Object(k.a)(qt,Zt);function qt(le,De){var tr=Zt.call(this)||this;return tr.__pointerCapturing=!1,tr.dom=le,tr.painterRoot=De,tr._localHandlerScope=new Ce(le,zt),it&&(tr._globalHandlerScope=new Ce(document,Xt)),ie(tr,tr._localHandlerScope),tr}return qt.prototype.dispose=function(){be(this._localHandlerScope),it&&be(this._globalHandlerScope)},qt.prototype.setCursor=function(le){this.dom.style&&(this.dom.style.cursor=le||"default")},qt.prototype.__togglePointerCapture=function(le){if(this.__mayPointerCapture=null,it&&+this.__pointerCapturing^+le){this.__pointerCapturing=le;var De=this._globalHandlerScope;le?oe(this,De):be(De)}},qt}(z.a),Bt=Fe,Tt=b("Xy3h"),Mt=b("y9SG"),Ut=b("fvwW");/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var se={},ge={};function He(Zt){delete ge[Zt]}function Me(Zt){if(!Zt)return!1;if(typeof Zt=="string")return Object(Tt.lum)(Zt,1)<Mt.b;if(Zt.colorStops){for(var qt=Zt.colorStops,le=0,De=qt.length,tr=0;tr<De;tr++)le+=Object(Tt.lum)(qt[tr].color,1);return le/=De,le<Mt.b}return!1}var We=function(){function Zt(qt,le,De){var tr=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,De=De||{},this.dom=le,this.id=qt;var nr=new M,fe=De.renderer||"canvas";se[fe]||(fe=bt.F(se)[0]),De.useDirtyRect=De.useDirtyRect==null?!1:De.useDirtyRect;var Ee=new se[fe](le,nr,De,qt),ke=De.ssr||Ee.ssrOnly;this.storage=nr,this.painter=Ee;var Re=!B.a.node&&!B.a.worker&&!ke?new Bt(Ee.getViewportRoot(),Ee.root):null;this.handler=new V(nr,Ee,Re,Ee.root),this.animation=new st({stage:{update:ke?null:function(){return tr._flush(!0)}}}),ke||this.animation.start()}return Zt.prototype.add=function(qt){!qt||(this.storage.addRoot(qt),qt.addSelfToZr(this),this.refresh())},Zt.prototype.remove=function(qt){!qt||(this.storage.delRoot(qt),qt.removeSelfFromZr(this),this.refresh())},Zt.prototype.configLayer=function(qt,le){this.painter.configLayer&&this.painter.configLayer(qt,le),this.refresh()},Zt.prototype.setBackgroundColor=function(qt){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(qt),this.refresh(),this._backgroundColor=qt,this._darkMode=Me(qt)},Zt.prototype.getBackgroundColor=function(){return this._backgroundColor},Zt.prototype.setDarkMode=function(qt){this._darkMode=qt},Zt.prototype.isDarkMode=function(){return this._darkMode},Zt.prototype.refreshImmediately=function(qt){qt||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},Zt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},Zt.prototype.flush=function(){this._flush(!1)},Zt.prototype._flush=function(qt){var le,De=U();this._needsRefresh&&(le=!0,this.refreshImmediately(qt)),this._needsRefreshHover&&(le=!0,this.refreshHoverImmediately());var tr=U();le?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:tr-De})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Zt.prototype.setSleepAfterStill=function(qt){this._sleepAfterStill=qt},Zt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},Zt.prototype.refreshHover=function(){this._needsRefreshHover=!0},Zt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},Zt.prototype.resize=function(qt){qt=qt||{},this.painter.resize(qt.width,qt.height),this.handler.resize()},Zt.prototype.clearAnimation=function(){this.animation.clear()},Zt.prototype.getWidth=function(){return this.painter.getWidth()},Zt.prototype.getHeight=function(){return this.painter.getHeight()},Zt.prototype.setCursorStyle=function(qt){this.handler.setCursorStyle(qt)},Zt.prototype.findHover=function(qt,le){return this.handler.findHover(qt,le)},Zt.prototype.on=function(qt,le,De){return this.handler.on(qt,le,De),this},Zt.prototype.off=function(qt,le){this.handler.off(qt,le)},Zt.prototype.trigger=function(qt,le){this.handler.trigger(qt,le)},Zt.prototype.clear=function(){for(var qt=this.storage.getRoots(),le=0;le<qt.length;le++)qt[le]instanceof Ut.a&&qt[le].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},Zt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,He(this.id)},Zt}();function Ke(Zt,qt){var le=new We(bt.p(),Zt,qt);return ge[le.id]=le,le}function qe(Zt){Zt.dispose()}function Qt(){for(var Zt in ge)ge.hasOwnProperty(Zt)&&ge[Zt].dispose();ge={}}function Se(Zt){return ge[Zt]}function Ve(Zt,qt){se[Zt]=qt}var Ie="5.3.0"},"1OoA":function(je,nt,b){"use strict";b.d(nt,"a",function(){return ot}),b.d(nt,"b",function(){return gt});var B=b("bPXU"),bt=b("Jx7q"),k=b("euZP"),ft=/\{@(.+?)\}/g,ot=function(){function lt(){}return lt.prototype.getDataParams=function(z,X){var J=this.getData(X),at=this.getRawValue(z,X),F=J.getRawIndex(z),Z=J.getName(z),W=J.getRawDataItem(z),ht=J.getItemVisual(z,"style"),q=ht&&ht[J.getItemVisual(z,"drawType")||"fill"],g=ht&&ht.stroke,et=this.mainType,$=et==="series",N=J.userOutput&&J.userOutput.get();return{componentType:et,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:$?this.subType:null,seriesIndex:this.seriesIndex,seriesId:$?this.id:null,seriesName:$?this.name:null,name:Z,dataIndex:F,data:W,dataType:X,value:at,color:q,borderColor:g,dimensionNames:N?N.fullDimensions:null,encode:N?N.encode:null,$vars:["seriesName","name","value"]}},lt.prototype.getFormattedLabel=function(z,X,J,at,F,Z){X=X||"normal";var W=this.getData(J),ht=this.getDataParams(z,J);if(Z&&(ht.value=Z.interpolatedValue),at!=null&&B.t(ht.value)&&(ht.value=ht.value[at]),!F){var q=W.getItemModel(z);F=q.get(X==="normal"?["label","formatter"]:[X,"label","formatter"])}if(B.w(F))return ht.status=X,ht.dimensionIndex=at,F(ht);if(B.C(F)){var g=Object(k.f)(F,ht);return g.replace(ft,function(et,$){var N=$.length,Y=$;Y.charAt(0)==="["&&Y.charAt(N-1)==="]"&&(Y=+Y.slice(1,N-1));var K=Object(bt.e)(W,z,Y);if(Z&&B.t(Z.interpolatedValue)){var V=W.getDimensionIndex(Y);V>=0&&(K=Z.interpolatedValue[V])}return K!=null?K+"":""})}},lt.prototype.getRawValue=function(z,X){return Object(bt.e)(this.getData(X),z)},lt.prototype.formatTooltip=function(z,X,J){},lt}();function gt(lt){var z,X;return B.A(lt)?lt.type&&(X=lt):z=lt,{text:z,frag:X}}},"1oYb":function(je,nt,b){"use strict";var B=b("bPXU"),bt=function(){function k(ft){this.type="cartesian",this._dimList=[],this._axes={},this.name=ft||""}return k.prototype.getAxis=function(ft){return this._axes[ft]},k.prototype.getAxes=function(){return B.H(this._dimList,function(ft){return this._axes[ft]},this)},k.prototype.getAxesByScale=function(ft){return ft=ft.toLowerCase(),B.n(this.getAxes(),function(ot){return ot.scale.type===ft})},k.prototype.addAxis=function(ft){var ot=ft.dim;this._axes[ot]=ft,this._dimList.push(ot)},k}();nt.a=bt},"20Jt":function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("v+az"),k=b("KapR"),ft=b("ryx4"),ot=b("bPXU"),gt=b("baNC"),lt=Object(ot.i)({strokeFirst:!0,font:gt.a,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ft.a),z=function(X){Object(B.a)(J,X);function J(){return X!==null&&X.apply(this,arguments)||this}return J.prototype.hasStroke=function(){var at=this.style,F=at.stroke;return F!=null&&F!=="none"&&at.lineWidth>0},J.prototype.hasFill=function(){var at=this.style,F=at.fill;return F!=null&&F!=="none"},J.prototype.createStyle=function(at){return Object(ot.g)(lt,at)},J.prototype.setBoundingRect=function(at){this._rect=at},J.prototype.getBoundingRect=function(){var at=this.style;if(!this._rect){var F=at.text;F!=null?F+="":F="";var Z=Object(k.d)(F,at.font,at.textAlign,at.textBaseline);if(Z.x+=at.x||0,Z.y+=at.y||0,this.hasStroke()){var W=at.lineWidth;Z.x-=W/2,Z.y-=W/2,Z.width+=W,Z.height+=W}this._rect=Z}return this._rect},J.initDefaultProps=function(){var at=J.prototype;at.dirtyRectTolerance=10}(),J}(bt.c);z.prototype.type="tspan",nt.a=z},"2zTA":function(je,nt,b){"use strict";var B=b("YN2f"),bt=function(){function k(ft){this._setting=ft||{},this._extent=[Infinity,-Infinity]}return k.prototype.getSetting=function(ft){return this._setting[ft]},k.prototype.unionExtent=function(ft){var ot=this._extent;ft[0]<ot[0]&&(ot[0]=ft[0]),ft[1]>ot[1]&&(ot[1]=ft[1])},k.prototype.unionExtentFromData=function(ft,ot){this.unionExtent(ft.getApproximateExtent(ot))},k.prototype.getExtent=function(){return this._extent.slice()},k.prototype.setExtent=function(ft,ot){var gt=this._extent;isNaN(ft)||(gt[0]=ft),isNaN(ot)||(gt[1]=ot)},k.prototype.isInExtentRange=function(ft){return this._extent[0]<=ft&&this._extent[1]>=ft},k.prototype.isBlank=function(){return this._isBlank},k.prototype.setBlank=function(ft){this._isBlank=ft},k}();B.c(bt),nt.a=bt},"3MMu":function(je,nt,b){"use strict";function B(bt){var k=new XMLHttpRequest;k.open("get",bt.url),k.responseType=bt.responseType||"text",bt.onprogress&&(k.onprogress=function(ft){if(ft.lengthComputable){var ot=ft.loaded/ft.total;bt.onprogress(ot,ft.loaded,ft.total)}else bt.onprogress(null)}),k.onload=function(ft){k.status>=400?bt.onerror&&bt.onerror():bt.onload&&bt.onload(k.response)},bt.onerror&&(k.onerror=bt.onerror),k.send(null)}nt.a={get:B}},"3Vaj":function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=b("bPXU"),ft=Math.PI,ot=ft*2,gt=Math.sin,lt=Math.cos,z=Math.acos,X=Math.atan2,J=Math.abs,at=Math.sqrt,F=Math.max,Z=Math.min,W=1e-4;function ht(K,V,G,I,A,C,E,O){var M=G-K,L=I-V,H=E-A,U=O-C,ct=U*M-H*L;if(!(ct*ct<W))return ct=(H*(V-C)-U*(K-A))/ct,[K+ct*M,V+ct*L]}function q(K,V,G,I,A,C,E){var O=K-G,M=V-I,L=(E?C:-C)/at(O*O+M*M),H=L*M,U=-L*O,ct=K+H,st=V+U,vt=G+H,it=I+U,dt=(ct+vt)/2,St=(st+it)/2,ut=vt-ct,yt=it-st,Ot=ut*ut+yt*yt,At=A-C,It=ct*it-vt*st,Ct=(yt<0?-1:1)*at(F(0,At*At*Ot-It*It)),Ft=(It*yt-ut*Ct)/Ot,zt=(-It*ut-yt*Ct)/Ot,Xt=(It*yt+ut*Ct)/Ot,ie=(-It*ut+yt*Ct)/Ot,oe=Ft-dt,he=zt-St,be=Xt-dt,Ce=ie-St;return oe*oe+he*he>be*be+Ce*Ce&&(Ft=Xt,zt=ie),{cx:Ft,cy:zt,x0:-H,y0:-U,x1:Ft*(A/At-1),y1:zt*(A/At-1)}}function g(K){var V;if(Object(k.t)(K)){var G=K.length;if(!G)return K;G===1?V=[K[0],K[0],0,0]:G===2?V=[K[0],K[0],K[1],K[1]]:G===3?V=K.concat(K[2]):V=K}else V=[K,K,K,K];return V}function et(K,V){var G,I=F(V.r,0),A=F(V.r0||0,0),C=I>0,E=A>0;if(!(!C&&!E)){if(C||(I=A,A=0),A>I){var O=I;I=A,A=O}var M=V.startAngle,L=V.endAngle;if(!(isNaN(M)||isNaN(L))){var H=V.cx,U=V.cy,ct=!!V.clockwise,st=J(L-M),vt=st>ot&&st%ot;if(vt>W&&(st=vt),!(I>W))K.moveTo(H,U);else if(st>ot-W)K.moveTo(H+I*lt(M),U+I*gt(M)),K.arc(H,U,I,M,L,!ct),A>W&&(K.moveTo(H+A*lt(L),U+A*gt(L)),K.arc(H,U,A,L,M,ct));else{var it=void 0,dt=void 0,St=void 0,ut=void 0,yt=void 0,Ot=void 0,At=void 0,It=void 0,Ct=void 0,Ft=void 0,zt=void 0,Xt=void 0,ie=void 0,oe=void 0,he=void 0,be=void 0,Ce=I*lt(M),Fe=I*gt(M),Bt=A*lt(L),Tt=A*gt(L),Mt=st>W;if(Mt){var Ut=V.cornerRadius;Ut&&(G=g(Ut),it=G[0],dt=G[1],St=G[2],ut=G[3]);var se=J(I-A)/2;if(yt=Z(se,St),Ot=Z(se,ut),At=Z(se,it),It=Z(se,dt),zt=Ct=F(yt,Ot),Xt=Ft=F(At,It),(Ct>W||Ft>W)&&(ie=I*lt(L),oe=I*gt(L),he=A*lt(M),be=A*gt(M),st<ft)){var ge=ht(Ce,Fe,he,be,ie,oe,Bt,Tt);if(ge){var He=Ce-ge[0],Me=Fe-ge[1],We=ie-ge[0],Ke=oe-ge[1],qe=1/gt(z((He*We+Me*Ke)/(at(He*He+Me*Me)*at(We*We+Ke*Ke)))/2),Qt=at(ge[0]*ge[0]+ge[1]*ge[1]);zt=Z(Ct,(I-Qt)/(qe+1)),Xt=Z(Ft,(A-Qt)/(qe-1))}}}if(!Mt)K.moveTo(H+Ce,U+Fe);else if(zt>W){var Se=Z(St,zt),Ve=Z(ut,zt),Ie=q(he,be,Ce,Fe,I,Se,ct),Zt=q(ie,oe,Bt,Tt,I,Ve,ct);K.moveTo(H+Ie.cx+Ie.x0,U+Ie.cy+Ie.y0),zt<Ct&&Se===Ve?K.arc(H+Ie.cx,U+Ie.cy,zt,X(Ie.y0,Ie.x0),X(Zt.y0,Zt.x0),!ct):(Se>0&&K.arc(H+Ie.cx,U+Ie.cy,Se,X(Ie.y0,Ie.x0),X(Ie.y1,Ie.x1),!ct),K.arc(H,U,I,X(Ie.cy+Ie.y1,Ie.cx+Ie.x1),X(Zt.cy+Zt.y1,Zt.cx+Zt.x1),!ct),Ve>0&&K.arc(H+Zt.cx,U+Zt.cy,Ve,X(Zt.y1,Zt.x1),X(Zt.y0,Zt.x0),!ct))}else K.moveTo(H+Ce,U+Fe),K.arc(H,U,I,M,L,!ct);if(!(A>W)||!Mt)K.lineTo(H+Bt,U+Tt);else if(Xt>W){var Se=Z(it,Xt),Ve=Z(dt,Xt),Ie=q(Bt,Tt,ie,oe,A,-Ve,ct),Zt=q(Ce,Fe,he,be,A,-Se,ct);K.lineTo(H+Ie.cx+Ie.x0,U+Ie.cy+Ie.y0),Xt<Ft&&Se===Ve?K.arc(H+Ie.cx,U+Ie.cy,Xt,X(Ie.y0,Ie.x0),X(Zt.y0,Zt.x0),!ct):(Ve>0&&K.arc(H+Ie.cx,U+Ie.cy,Ve,X(Ie.y0,Ie.x0),X(Ie.y1,Ie.x1),!ct),K.arc(H,U,A,X(Ie.cy+Ie.y1,Ie.cx+Ie.x1),X(Zt.cy+Zt.y1,Zt.cx+Zt.x1),ct),Se>0&&K.arc(H+Zt.cx,U+Zt.cy,Se,X(Zt.y1,Zt.x1),X(Zt.y0,Zt.x0),!ct))}else K.lineTo(H+Bt,U+Tt),K.arc(H,U,A,L,M,ct)}K.closePath()}}}var $=function(){function K(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return K}(),N=function(K){Object(B.a)(V,K);function V(G){return K.call(this,G)||this}return V.prototype.getDefaultShape=function(){return new $},V.prototype.buildPath=function(G,I){et(G,I)},V.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},V}(bt.b);N.prototype.type="sector";var Y=nt.a=N},"4ZEG":function(je,nt,b){"use strict";b.d(nt,"a",function(){return B});function B(bt,k,ft,ot,gt,lt,z){if(gt===0)return!1;var X=gt,J=0,at=bt;if(z>k+X&&z>ot+X||z<k-X&&z<ot-X||lt>bt+X&&lt>ft+X||lt<bt-X&&lt<ft-X)return!1;if(bt!==ft)J=(k-ot)/(bt-ft),at=(bt*ot-ft*k)/(bt-ft);else return Math.abs(lt-bt)<=X/2;var F=J*lt-z+at,Z=F*F/(J*J+1);return Z<=X/2*X/2}},"6wX1":function(je,nt,b){"use strict";b.d(nt,"c",function(){return ft}),b.d(nt,"b",function(){return ot}),b.d(nt,"a",function(){return gt});var B="\0__throttleOriginMethod",bt="\0__throttleRate",k="\0__throttleType";function ft(lt,z,X){var J,at=0,F=0,Z=null,W,ht,q,g;z=z||0;function et(){F=new Date().getTime(),Z=null,lt.apply(ht,q||[])}var $=function(){for(var N=[],Y=0;Y<arguments.length;Y++)N[Y]=arguments[Y];J=new Date().getTime(),ht=this,q=N;var K=g||z,V=g||X;g=null,W=J-(V?at:F)-K,clearTimeout(Z),V?Z=setTimeout(et,K):W>=0?et():Z=setTimeout(et,-W),at=J};return $.clear=function(){Z&&(clearTimeout(Z),Z=null)},$.debounceNextCall=function(N){g=N},$}function ot(lt,z,X,J){var at=lt[z];if(!!at){var F=at[B]||at,Z=at[k],W=at[bt];if(W!==X||Z!==J){if(X==null||!J)return lt[z]=F;at=lt[z]=ft(F,X,J==="debounce"),at[B]=F,at[k]=J,at[bt]=X}return at}}function gt(lt,z){var X=lt[z];X&&X[B]&&(X.clear&&X.clear(),lt[z]=X[B])}},"70Nz":function(je,nt,b){"use strict";b.d(nt,"a",function(){return k}),b.d(nt,"c",function(){return ot}),b.d(nt,"b",function(){return gt});var B=b("bPXU"),bt=b("xrhB");function k(lt,z,X){X=X||{};var J=X.byIndex,at=X.stackedCoordDimension,F,Z,W;ft(z)?F=z:(Z=z.schema,F=Z.dimensions,W=z.store);var ht=!!(lt&&lt.get("stack")),q,g,et,$;if(Object(B.k)(F,function(I,A){Object(B.C)(I)&&(F[A]=I={name:I}),ht&&!I.isExtraCoord&&(!J&&!q&&I.ordinalMeta&&(q=I),!g&&I.type!=="ordinal"&&I.type!=="time"&&(!at||at===I.coordDim)&&(g=I))}),g&&!J&&!q&&(J=!0),g){et="__\0ecstackresult_"+lt.id,$="__\0ecstackedover_"+lt.id,q&&(q.createInvertedIndices=!0);var N=g.coordDim,Y=g.type,K=0;Object(B.k)(F,function(I){I.coordDim===N&&K++});var V={name:et,coordDim:N,coordDimIndex:K,type:Y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:F.length},G={name:$,coordDim:$,coordDimIndex:K+1,type:Y,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:F.length+1};Z?(W&&(V.storeDimIndex=W.ensureCalculationDimension($,Y),G.storeDimIndex=W.ensureCalculationDimension(et,Y)),Z.appendCalculationDimension(V),Z.appendCalculationDimension(G)):(F.push(V),F.push(G))}return{stackedDimension:g&&g.name,stackedByDimension:q&&q.name,isStackedByIndex:J,stackedOverDimension:$,stackResultDimension:et}}function ft(lt){return!Object(bt.d)(lt.schema)}function ot(lt,z){return!!z&&z===lt.getCalculationInfo("stackedDimension")}function gt(lt,z){return ot(lt,z)?lt.getCalculationInfo("stackResultDimension"):z}},"7M1A":function(je,nt,b){"use strict";b.d(nt,"l",function(){return ot}),b.d(nt,"p",function(){return gt}),b.d(nt,"v",function(){return lt}),b.d(nt,"c",function(){return z}),b.d(nt,"g",function(){return X}),b.d(nt,"h",function(){return J}),b.d(nt,"f",function(){return at}),b.d(nt,"e",function(){return F}),b.d(nt,"b",function(){return Z}),b.d(nt,"a",function(){return W}),b.d(nt,"u",function(){return ht}),b.d(nt,"k",function(){return q}),b.d(nt,"o",function(){return et}),b.d(nt,"r",function(){return $}),b.d(nt,"s",function(){return N}),b.d(nt,"m",function(){return Y}),b.d(nt,"q",function(){return K}),b.d(nt,"t",function(){return V}),b.d(nt,"n",function(){return G}),b.d(nt,"j",function(){return I}),b.d(nt,"i",function(){return A}),b.d(nt,"d",function(){return E});var B=b("bPXU"),bt=1e-4,k=20;function ft(O){return O.replace(/^\s+|\s+$/g,"")}function ot(O,M,L,H){var U=M[0],ct=M[1],st=L[0],vt=L[1],it=ct-U,dt=vt-st;if(it===0)return dt===0?st:(st+vt)/2;if(H)if(it>0){if(O<=U)return st;if(O>=ct)return vt}else{if(O>=U)return st;if(O<=ct)return vt}else{if(O===U)return st;if(O===ct)return vt}return(O-U)/it*dt+st}function gt(O,M){switch(O){case"center":case"middle":O="50%";break;case"left":case"top":O="0%";break;case"right":case"bottom":O="100%";break}return B.C(O)?ft(O).match(/%$/)?parseFloat(O)/100*M:parseFloat(O):O==null?NaN:+O}function lt(O,M,L){return M==null&&(M=10),M=Math.min(Math.max(0,M),k),O=(+O).toFixed(M),L?O:+O}function z(O){return O.sort(function(M,L){return M-L}),O}function X(O){if(O=+O,isNaN(O))return 0;if(O>1e-14){for(var M=1,L=0;L<15;L++,M*=10)if(Math.round(O*M)/M===O)return L}return J(O)}function J(O){var M=O.toString().toLowerCase(),L=M.indexOf("e"),H=L>0?+M.slice(L+1):0,U=L>0?L:M.length,ct=M.indexOf("."),st=ct<0?0:U-1-ct;return Math.max(0,st-H)}function at(O,M){var L=Math.log,H=Math.LN10,U=Math.floor(L(O[1]-O[0])/H),ct=Math.round(L(Math.abs(M[1]-M[0]))/H),st=Math.min(Math.max(-U+ct,0),20);return isFinite(st)?st:20}function F(O,M,L){if(!O[M])return 0;var H=B.N(O,function(At,It){return At+(isNaN(It)?0:It)},0);if(H===0)return 0;for(var U=Math.pow(10,L),ct=B.H(O,function(At){return(isNaN(At)?0:At)/H*U*100}),st=U*100,vt=B.H(ct,function(At){return Math.floor(At)}),it=B.N(vt,function(At,It){return At+It},0),dt=B.H(ct,function(At,It){return At-vt[It]});it<st;){for(var St=Number.NEGATIVE_INFINITY,ut=null,yt=0,Ot=dt.length;yt<Ot;++yt)dt[yt]>St&&(St=dt[yt],ut=yt);++vt[ut],dt[ut]=0,++it}return vt[M]/U}function Z(O,M){var L=Math.max(X(O),X(M)),H=O+M;return L>k?H:lt(H,L)}var W=9007199254740991;function ht(O){var M=Math.PI*2;return(O%M+M)%M}function q(O){return O>-bt&&O<bt}var g=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function et(O){if(O instanceof Date)return O;if(B.C(O)){var M=g.exec(O);if(!M)return new Date(NaN);if(M[8]){var L=+M[4]||0;return M[8].toUpperCase()!=="Z"&&(L-=+M[8].slice(0,3)),new Date(Date.UTC(+M[1],+(M[2]||1)-1,+M[3]||1,L,+(M[5]||0),+M[6]||0,M[7]?+M[7].substring(0,3):0))}else return new Date(+M[1],+(M[2]||1)-1,+M[3]||1,+M[4]||0,+(M[5]||0),+M[6]||0,M[7]?+M[7].substring(0,3):0)}else if(O==null)return new Date(NaN);return new Date(Math.round(O))}function $(O){return Math.pow(10,N(O))}function N(O){if(O===0)return 0;var M=Math.floor(Math.log(O)/Math.LN10);return O/Math.pow(10,M)>=10&&M++,M}function Y(O,M){var L=N(O),H=Math.pow(10,L),U=O/H,ct;return M?U<1.5?ct=1:U<2.5?ct=2:U<4?ct=3:U<7?ct=5:ct=10:U<1?ct=1:U<2?ct=2:U<3?ct=3:U<5?ct=5:ct=10,O=ct*H,L>=-20?+O.toFixed(L<0?-L:0):O}function K(O,M){var L=(O.length-1)*M+1,H=Math.floor(L),U=+O[H-1],ct=L-H;return ct?U+ct*(O[H]-U):U}function V(O){O.sort(function(it,dt){return vt(it,dt,0)?-1:1});for(var M=-Infinity,L=1,H=0;H<O.length;){for(var U=O[H].interval,ct=O[H].close,st=0;st<2;st++)U[st]<=M&&(U[st]=M,ct[st]=st?1:1-L),M=U[st],L=ct[st];U[0]===U[1]&&ct[0]*ct[1]!=1?O.splice(H,1):H++}return O;function vt(it,dt,St){return it.interval[St]<dt.interval[St]||it.interval[St]===dt.interval[St]&&(it.close[St]-dt.close[St]==(St?-1:1)||!St&&vt(it,dt,1))}}function G(O){var M=parseFloat(O);return M==O&&(M!==0||!B.C(O)||O.indexOf("x")<=0)?M:NaN}function I(O){return!isNaN(G(O))}function A(){return Math.round(Math.random()*9)}function C(O,M){return M===0?O:C(M,O%M)}function E(O,M){return O==null?M:M==null?O:O*M/C(O,M)}},"8knM":function(je,nt){var b={}.toString;je.exports=Array.isArray||function(B){return b.call(B)=="[object Array]"}},"8yJK":function(je,nt,b){"use strict";b.d(nt,"c",function(){return et}),b.d(nt,"b",function(){return it}),b.d(nt,"a",function(){return dt});var B=b("v+az"),bt=b("I0j4"),k=b("SfWu"),ft=b("dTsX"),ot=b("ryx4"),gt=b("bSX3"),lt=b("20Jt"),z=b("bPXU"),X=b("avHQ"),J=b("teyC"),at=b("baNC"),F=new bt.a(!0);function Z(ut){var yt=ut.stroke;return!(yt==null||yt==="none"||!(ut.lineWidth>0))}function W(ut){return typeof ut=="string"&&ut!=="none"}function ht(ut){var yt=ut.fill;return yt!=null&&yt!=="none"}function q(ut,yt){if(yt.fillOpacity!=null&&yt.fillOpacity!==1){var Ot=ut.globalAlpha;ut.globalAlpha=yt.fillOpacity*yt.opacity,ut.fill(),ut.globalAlpha=Ot}else ut.fill()}function g(ut,yt){if(yt.strokeOpacity!=null&&yt.strokeOpacity!==1){var Ot=ut.globalAlpha;ut.globalAlpha=yt.strokeOpacity*yt.opacity,ut.stroke(),ut.globalAlpha=Ot}else ut.stroke()}function et(ut,yt,Ot){var At=Object(k.a)(yt.image,yt.__image,Ot);if(Object(k.c)(At)){var It=ut.createPattern(At,yt.repeat||"repeat");if(typeof DOMMatrix=="function"&&It&&It.setTransform){var Ct=new DOMMatrix;Ct.translateSelf(yt.x||0,yt.y||0),Ct.rotateSelf(0,0,(yt.rotation||0)*z.a),Ct.scaleSelf(yt.scaleX||1,yt.scaleY||1),It.setTransform(Ct)}return It}}function $(ut,yt,Ot,At){var It,Ct=Z(Ot),Ft=ht(Ot),zt=Ot.strokePercent,Xt=zt<1,ie=!yt.path;(!yt.silent||Xt)&&ie&&yt.createPathProxy();var oe=yt.path||F,he=yt.__dirty;if(!At){var be=Ot.fill,Ce=Ot.stroke,Fe=Ft&&!!be.colorStops,Bt=Ct&&!!Ce.colorStops,Tt=Ft&&!!be.image,Mt=Ct&&!!Ce.image,Ut=void 0,se=void 0,ge=void 0,He=void 0,Me=void 0;(Fe||Bt)&&(Me=yt.getBoundingRect()),Fe&&(Ut=he?Object(ft.a)(ut,be,Me):yt.__canvasFillGradient,yt.__canvasFillGradient=Ut),Bt&&(se=he?Object(ft.a)(ut,Ce,Me):yt.__canvasStrokeGradient,yt.__canvasStrokeGradient=se),Tt&&(ge=he||!yt.__canvasFillPattern?et(ut,be,yt):yt.__canvasFillPattern,yt.__canvasFillPattern=ge),Mt&&(He=he||!yt.__canvasStrokePattern?et(ut,Ce,yt):yt.__canvasStrokePattern,yt.__canvasStrokePattern=ge),Fe?ut.fillStyle=Ut:Tt&&(ge?ut.fillStyle=ge:Ft=!1),Bt?ut.strokeStyle=se:Mt&&(He?ut.strokeStyle=He:Ct=!1)}var We=yt.getGlobalScale();oe.setScale(We[0],We[1],yt.segmentIgnoreThreshold);var Ke,qe;ut.setLineDash&&Ot.lineDash&&(It=Object(X.a)(yt),Ke=It[0],qe=It[1]);var Qt=!0;(ie||he&J.b)&&(oe.setDPR(ut.dpr),Xt?oe.setContext(null):(oe.setContext(ut),Qt=!1),oe.reset(),yt.buildPath(oe,yt.shape,At),oe.toStatic(),yt.pathUpdated()),Qt&&oe.rebuildPath(ut,Xt?zt:1),Ke&&(ut.setLineDash(Ke),ut.lineDashOffset=qe),At||(Ot.strokeFirst?(Ct&&g(ut,Ot),Ft&&q(ut,Ot)):(Ft&&q(ut,Ot),Ct&&g(ut,Ot))),Ke&&ut.setLineDash([])}function N(ut,yt,Ot){var At=yt.__image=Object(k.a)(Ot.image,yt.__image,yt,yt.onload);if(!(!At||!Object(k.c)(At))){var It=Ot.x||0,Ct=Ot.y||0,Ft=yt.getWidth(),zt=yt.getHeight(),Xt=At.width/At.height;if(Ft==null&&zt!=null?Ft=zt*Xt:zt==null&&Ft!=null?zt=Ft/Xt:Ft==null&&zt==null&&(Ft=At.width,zt=At.height),Ot.sWidth&&Ot.sHeight){var ie=Ot.sx||0,oe=Ot.sy||0;ut.drawImage(At,ie,oe,Ot.sWidth,Ot.sHeight,It,Ct,Ft,zt)}else if(Ot.sx&&Ot.sy){var ie=Ot.sx,oe=Ot.sy,he=Ft-ie,be=zt-oe;ut.drawImage(At,ie,oe,he,be,It,Ct,Ft,zt)}else ut.drawImage(At,It,Ct,Ft,zt)}}function Y(ut,yt,Ot){var At,It=Ot.text;if(It!=null&&(It+=""),It){ut.font=Ot.font||at.a,ut.textAlign=Ot.textAlign,ut.textBaseline=Ot.textBaseline;var Ct=void 0,Ft=void 0;ut.setLineDash&&Ot.lineDash&&(At=Object(X.a)(yt),Ct=At[0],Ft=At[1]),Ct&&(ut.setLineDash(Ct),ut.lineDashOffset=Ft),Ot.strokeFirst?(Z(Ot)&&ut.strokeText(It,Ot.x,Ot.y),ht(Ot)&&ut.fillText(It,Ot.x,Ot.y)):(ht(Ot)&&ut.fillText(It,Ot.x,Ot.y),Z(Ot)&&ut.strokeText(It,Ot.x,Ot.y)),Ct&&ut.setLineDash([])}}var K=["shadowBlur","shadowOffsetX","shadowOffsetY"],V=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function G(ut,yt,Ot,At,It){var Ct=!1;if(!At&&(Ot=Ot||{},yt===Ot))return!1;if(At||yt.opacity!==Ot.opacity){st(ut,It),Ct=!0;var Ft=Math.max(Math.min(yt.opacity,1),0);ut.globalAlpha=isNaN(Ft)?B.b.opacity:Ft}(At||yt.blend!==Ot.blend)&&(Ct||(st(ut,It),Ct=!0),ut.globalCompositeOperation=yt.blend||B.b.blend);for(var zt=0;zt<K.length;zt++){var Xt=K[zt];(At||yt[Xt]!==Ot[Xt])&&(Ct||(st(ut,It),Ct=!0),ut[Xt]=ut.dpr*(yt[Xt]||0))}return(At||yt.shadowColor!==Ot.shadowColor)&&(Ct||(st(ut,It),Ct=!0),ut.shadowColor=yt.shadowColor||B.b.shadowColor),Ct}function I(ut,yt,Ot,At,It){var Ct=vt(yt,It.inHover),Ft=At?null:Ot&&vt(Ot,It.inHover)||{};if(Ct===Ft)return!1;var zt=G(ut,Ct,Ft,At,It);if((At||Ct.fill!==Ft.fill)&&(zt||(st(ut,It),zt=!0),W(Ct.fill)&&(ut.fillStyle=Ct.fill)),(At||Ct.stroke!==Ft.stroke)&&(zt||(st(ut,It),zt=!0),W(Ct.stroke)&&(ut.strokeStyle=Ct.stroke)),(At||Ct.opacity!==Ft.opacity)&&(zt||(st(ut,It),zt=!0),ut.globalAlpha=Ct.opacity==null?1:Ct.opacity),yt.hasStroke()){var Xt=Ct.lineWidth,ie=Xt/(Ct.strokeNoScale&&yt.getLineScale?yt.getLineScale():1);ut.lineWidth!==ie&&(zt||(st(ut,It),zt=!0),ut.lineWidth=ie)}for(var oe=0;oe<V.length;oe++){var he=V[oe],be=he[0];(At||Ct[be]!==Ft[be])&&(zt||(st(ut,It),zt=!0),ut[be]=Ct[be]||he[1])}return zt}function A(ut,yt,Ot,At,It){return G(ut,vt(yt,It.inHover),Ot&&vt(Ot,It.inHover),At,It)}function C(ut,yt){var Ot=yt.transform,At=ut.dpr||1;Ot?ut.setTransform(At*Ot[0],At*Ot[1],At*Ot[2],At*Ot[3],At*Ot[4],At*Ot[5]):ut.setTransform(At,0,0,At,0,0)}function E(ut,yt,Ot){for(var At=!1,It=0;It<ut.length;It++){var Ct=ut[It];At=At||Ct.isZeroArea(),C(yt,Ct),yt.beginPath(),Ct.buildPath(yt,Ct.shape),yt.clip()}Ot.allClipped=At}function O(ut,yt){return ut&&yt?ut[0]!==yt[0]||ut[1]!==yt[1]||ut[2]!==yt[2]||ut[3]!==yt[3]||ut[4]!==yt[4]||ut[5]!==yt[5]:!(!ut&&!yt)}var M=1,L=2,H=3,U=4;function ct(ut){var yt=ht(ut),Ot=Z(ut);return!(ut.lineDash||!(+yt^+Ot)||yt&&typeof ut.fill!="string"||Ot&&typeof ut.stroke!="string"||ut.strokePercent<1||ut.strokeOpacity<1||ut.fillOpacity<1)}function st(ut,yt){yt.batchFill&&ut.fill(),yt.batchStroke&&ut.stroke(),yt.batchFill="",yt.batchStroke=""}function vt(ut,yt){return yt&&ut.__hoverStyle||ut.style}function it(ut,yt){dt(ut,yt,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function dt(ut,yt,Ot,At){var It=yt.transform;if(!yt.shouldBePainted(Ot.viewWidth,Ot.viewHeight,!1,!1)){yt.__dirty&=~J.a,yt.__isRendered=!1;return}var Ct=yt.__clipPaths,Ft=Ot.prevElClipPaths,zt=!1,Xt=!1;if((!Ft||Object(ft.c)(Ct,Ft))&&(Ft&&Ft.length&&(st(ut,Ot),ut.restore(),Xt=zt=!0,Ot.prevElClipPaths=null,Ot.allClipped=!1,Ot.prevEl=null),Ct&&Ct.length&&(st(ut,Ot),ut.save(),E(Ct,ut,Ot),zt=!0),Ot.prevElClipPaths=Ct),Ot.allClipped){yt.__isRendered=!1;return}yt.beforeBrush&&yt.beforeBrush(),yt.innerBeforeBrush();var ie=Ot.prevEl;ie||(Xt=zt=!0);var oe=yt instanceof ot.b&&yt.autoBatch&&ct(yt.style);zt||O(It,ie.transform)?(st(ut,Ot),C(ut,yt)):oe||st(ut,Ot);var he=vt(yt,Ot.inHover);yt instanceof ot.b?(Ot.lastDrawType!==M&&(Xt=!0,Ot.lastDrawType=M),I(ut,yt,ie,Xt,Ot),(!oe||!Ot.batchFill&&!Ot.batchStroke)&&ut.beginPath(),$(ut,yt,he,oe),oe&&(Ot.batchFill=he.fill||"",Ot.batchStroke=he.stroke||"")):yt instanceof lt.a?(Ot.lastDrawType!==H&&(Xt=!0,Ot.lastDrawType=H),I(ut,yt,ie,Xt,Ot),Y(ut,yt,he)):yt instanceof gt.a?(Ot.lastDrawType!==L&&(Xt=!0,Ot.lastDrawType=L),A(ut,yt,ie,Xt,Ot),N(ut,yt,he)):yt.getTemporalDisplayables&&(Ot.lastDrawType!==U&&(Xt=!0,Ot.lastDrawType=U),St(ut,yt,Ot)),oe&&At&&st(ut,Ot),yt.innerAfterBrush(),yt.afterBrush&&yt.afterBrush(),Ot.prevEl=yt,yt.__dirty=0,yt.__isRendered=!0}function St(ut,yt,Ot){var At=yt.getDisplayables(),It=yt.getTemporalDisplayables();ut.save();var Ct={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:Ot.viewWidth,viewHeight:Ot.viewHeight,inHover:Ot.inHover},Ft,zt;for(Ft=yt.getCursor(),zt=At.length;Ft<zt;Ft++){var Xt=At[Ft];Xt.beforeBrush&&Xt.beforeBrush(),Xt.innerBeforeBrush(),dt(ut,Xt,Ct,Ft===zt-1),Xt.innerAfterBrush(),Xt.afterBrush&&Xt.afterBrush(),Ct.prevEl=Xt}for(var ie=0,oe=It.length;ie<oe;ie++){var Xt=It[ie];Xt.beforeBrush&&Xt.beforeBrush(),Xt.innerBeforeBrush(),dt(ut,Xt,Ct,ie===oe-1),Xt.innerAfterBrush(),Xt.afterBrush&&Xt.afterBrush(),Ct.prevEl=Xt}yt.clearTemporalDisplayables(),yt.notClear=!0,ut.restore()}},"8zGM":function(je,nt,b){"use strict";var B=b("bPXU"),bt=function(){function k(ft){this.otherDims={},ft!=null&&B.m(this,ft)}return k}();nt.a=bt},"9jB8":function(je,nt,b){"use strict";b.d(nt,"a",function(){return gt});var B=b("bPXU"),bt=b("KapR"),k=function(){function z(X,J,at){this._prepareParams(X,J,at)}return z.prototype._prepareParams=function(X,J,at){at[1]<at[0]&&(at=[NaN,NaN]),this._dataMin=at[0],this._dataMax=at[1];var F=this._isOrdinal=X.type==="ordinal";this._needCrossZero=X.type==="interval"&&J.getNeedCrossZero&&J.getNeedCrossZero();var Z=this._modelMinRaw=J.get("min",!0);Object(B.w)(Z)?this._modelMinNum=lt(X,Z({min:at[0],max:at[1]})):Z!=="dataMin"&&(this._modelMinNum=lt(X,Z));var W=this._modelMaxRaw=J.get("max",!0);if(Object(B.w)(W)?this._modelMaxNum=lt(X,W({min:at[0],max:at[1]})):W!=="dataMax"&&(this._modelMaxNum=lt(X,W)),F)this._axisDataLen=J.getCategories().length;else{var ht=J.get("boundaryGap"),q=Object(B.t)(ht)?ht:[ht||0,ht||0];typeof q[0]=="boolean"||typeof q[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Object(bt.g)(q[0],1),Object(bt.g)(q[1],1)]}},z.prototype.calculate=function(){var X=this._isOrdinal,J=this._dataMin,at=this._dataMax,F=this._axisDataLen,Z=this._boundaryGapInner,W=X?null:at-J||Math.abs(J),ht=this._modelMinRaw==="dataMin"?J:this._modelMinNum,q=this._modelMaxRaw==="dataMax"?at:this._modelMaxNum,g=ht!=null,et=q!=null;ht==null&&(ht=X?F?0:NaN:J-Z[0]*W),q==null&&(q=X?F?F-1:NaN:at+Z[1]*W),(ht==null||!isFinite(ht))&&(ht=NaN),(q==null||!isFinite(q))&&(q=NaN);var $=Object(B.l)(ht)||Object(B.l)(q)||X&&!F;this._needCrossZero&&(ht>0&&q>0&&!g&&(ht=0),ht<0&&q<0&&!et&&(q=0));var N=this._determinedMin,Y=this._determinedMax;return N!=null&&(ht=N,g=!0),Y!=null&&(q=Y,et=!0),{min:ht,max:q,minFixed:g,maxFixed:et,isBlank:$}},z.prototype.modifyDataMinMax=function(X,J){this[ot[X]]=J},z.prototype.setDeterminedMinMax=function(X,J){var at=ft[X];this[at]=J},z.prototype.freeze=function(){this.frozen=!0},z}(),ft={min:"_determinedMin",max:"_determinedMax"},ot={min:"_dataMin",max:"_dataMax"};function gt(z,X,J){var at=z.rawExtentInfo;return at||(at=new k(z,X,J),z.rawExtentInfo=at,at)}function lt(z,X){return X==null?null:Object(B.l)(X)?NaN:z.parse(X)}},AOUq:function(je,nt,b){"use strict";var B=function(){function ft(ot){this.value=ot}return ft}(),bt=function(){function ft(){this._len=0}return ft.prototype.insert=function(ot){var gt=new B(ot);return this.insertEntry(gt),gt},ft.prototype.insertEntry=function(ot){this.head?(this.tail.next=ot,ot.prev=this.tail,ot.next=null,this.tail=ot):this.head=this.tail=ot,this._len++},ft.prototype.remove=function(ot){var gt=ot.prev,lt=ot.next;gt?gt.next=lt:this.head=lt,lt?lt.prev=gt:this.tail=gt,ot.next=ot.prev=null,this._len--},ft.prototype.len=function(){return this._len},ft.prototype.clear=function(){this.head=this.tail=null,this._len=0},ft}(),k=function(){function ft(ot){this._list=new bt,this._maxSize=10,this._map={},this._maxSize=ot}return ft.prototype.put=function(ot,gt){var lt=this._list,z=this._map,X=null;if(z[ot]==null){var J=lt.len(),at=this._lastRemovedEntry;if(J>=this._maxSize&&J>0){var F=lt.head;lt.remove(F),delete z[F.key],X=F.value,this._lastRemovedEntry=F}at?at.value=gt:at=new B(gt),at.key=ot,lt.insertEntry(at),z[ot]=at}return X},ft.prototype.get=function(ot){var gt=this._map[ot],lt=this._list;if(gt!=null)return gt!==lt.tail&&(lt.remove(gt),lt.insertEntry(gt)),gt.value},ft.prototype.clear=function(){this._list.clear(),this._map={}},ft.prototype.len=function(){return this._list.len()},ft}();nt.a=k},BdbH:function(je,nt,b){"use strict";(function(B){b.d(nt,"p",function(){return gt}),b.d(nt,"j",function(){return z}),b.d(nt,"q",function(){return J}),b.d(nt,"e",function(){return F}),b.d(nt,"a",function(){return Z}),b.d(nt,"b",function(){return W}),b.d(nt,"i",function(){return ht}),b.d(nt,"h",function(){return q}),b.d(nt,"l",function(){return et}),b.d(nt,"n",function(){return N}),b.d(nt,"m",function(){return Y}),b.d(nt,"o",function(){return K}),b.d(nt,"k",function(){return V}),b.d(nt,"d",function(){return G}),b.d(nt,"f",function(){return I}),b.d(nt,"g",function(){return A}),b.d(nt,"c",function(){return C});var bt=b("bPXU"),k=b("Xy3h"),ft=b("QO9Q"),ot=Math.round;function gt(E){var O;if(!E||E==="transparent")E="none";else if(typeof E=="string"&&E.indexOf("rgba")>-1){var M=Object(k.parse)(E);M&&(E="rgb("+M[0]+","+M[1]+","+M[2]+")",O=M[3])}return{color:E,opacity:O==null?1:O}}var lt=1e-4;function z(E){return E<lt&&E>-lt}function X(E){return ot(E*1e3)/1e3}function J(E){return ot(E*1e4)/1e4}function at(E){return ot(E*10)/10}function F(E){return"matrix("+X(E[0])+","+X(E[1])+","+X(E[2])+","+X(E[3])+","+J(E[4])+","+J(E[5])+")"}var Z={left:"start",right:"end",center:"middle",middle:"middle"};function W(E,O,M){return M==="top"?E+=O/2:M==="bottom"&&(E-=O/2),E}function ht(E){return E&&(E.shadowBlur||E.shadowOffsetX||E.shadowOffsetY)}function q(E){var O=E.style,M=E.getGlobalScale();return[O.shadowColor,(O.shadowBlur||0).toFixed(2),(O.shadowOffsetX||0).toFixed(2),(O.shadowOffsetY||0).toFixed(2),M[0],M[1]].join(",")}function g(E){var O=[];if(E)for(var M=0;M<E.length;M++){var L=E[M];O.push(L.id)}return O.join(",")}function et(E){return E&&!!E.image}function $(E){return E&&!!E.svgElement}function N(E){return et(E)||$(E)}function Y(E){return E.type==="linear"}function K(E){return E.type==="radial"}function V(E){return E&&(E.type==="linear"||E.type==="radial")}function G(E){return"url(#"+E+")"}function I(E){var O=E.getGlobalScale(),M=Math.max(O[0],O[1]);return Math.max(Math.ceil(Math.log(M)/Math.log(10)),1)}function A(E){var O=E.x||0,M=E.y||0,L=(E.rotation||0)*bt.a,H=Object(bt.P)(E.scaleX,1),U=Object(bt.P)(E.scaleY,1),ct=E.skewX||0,st=E.skewY||0,vt=[];return(O||M)&&vt.push("translate("+O+"px,"+M+"px)"),L&&vt.push("rotate("+L+")"),(H!==1||U!==1)&&vt.push("scale("+H+","+U+")"),(ct||st)&&vt.push("skew("+ot(ct*bt.a)+"deg, "+ot(st*bt.a)+"deg)"),vt.join(" ")}var C=function(){return ft.a.hasGlobalWindow&&Object(bt.w)(window.btoa)?function(E){return window.btoa(unescape(E))}:typeof B!="undefined"?function(E){return B.from(E).toString("base64")}:function(E){return null}}()}).call(this,b("JX3P").Buffer)},BkaA:function(je,nt,b){"use strict";b.d(nt,"i",function(){return bt}),b.d(nt,"f",function(){return k}),b.d(nt,"c",function(){return ft}),b.d(nt,"e",function(){return ot}),b.d(nt,"d",function(){return gt}),b.d(nt,"g",function(){return lt}),b.d(nt,"h",function(){return z}),b.d(nt,"a",function(){return X}),b.d(nt,"b",function(){return J});var B=b("bPXU"),bt=Object(B.f)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),k="original",ft="arrayRows",ot="objectRows",gt="keyedColumns",lt="typedArray",z="unknown",X="column",J="row"},BubE:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=Math.PI*2;function bt(k){return k%=B,k<0&&(k+=B),k}},C9tP:function(je,nt,b){"use strict";b.d(nt,"c",function(){return ft}),b.d(nt,"a",function(){return ot}),b.d(nt,"b",function(){return gt}),b.d(nt,"d",function(){return lt});var B=b("bPXU"),bt=b("YN2f"),k=Math.round(Math.random()*10);function ft(z){return[z||"",k++].join("_")}function ot(z){var X={};z.registerSubTypeDefaulter=function(J,at){var F=Object(bt.f)(J);X[F.main]=at},z.determineSubType=function(J,at){var F=at.type;if(!F){var Z=Object(bt.f)(J).main;z.hasSubTypes(J)&&X[Z]&&(F=X[Z](at))}return F}}function gt(z,X){z.topologicalTravel=function(Z,W,ht,q){if(!Z.length)return;var g=J(W),et=g.graph,$=g.noEntryList,N={};for(B.k(Z,function(A){N[A]=!0});$.length;){var Y=$.pop(),K=et[Y],V=!!N[Y];V&&(ht.call(q,Y,K.originalDeps.slice()),delete N[Y]),B.k(K.successor,V?I:G)}B.k(N,function(){var A="";throw new Error(A)});function G(A){et[A].entryCount--,et[A].entryCount===0&&$.push(A)}function I(A){N[A]=!0,G(A)}};function J(Z){var W={},ht=[];return B.k(Z,function(q){var g=at(W,q),et=g.originalDeps=X(q),$=F(et,Z);g.entryCount=$.length,g.entryCount===0&&ht.push(q),B.k($,function(N){B.r(g.predecessor,N)<0&&g.predecessor.push(N);var Y=at(W,N);B.r(Y.successor,N)<0&&Y.successor.push(q)})}),{graph:W,noEntryList:ht}}function at(Z,W){return Z[W]||(Z[W]={predecessor:[],successor:[]}),Z[W]}function F(Z,W){var ht=[];return B.k(Z,function(q){B.r(W,q)>=0&&ht.push(q)}),ht}}function lt(z,X){return B.I(B.I({},z,!0),X,!0)}},CSOx:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("rU8e"),k=function(ft){Object(B.a)(ot,ft);function ot(gt,lt,z,X,J){var at=ft.call(this,X)||this;return at.x=gt==null?.5:gt,at.y=lt==null?.5:lt,at.r=z==null?.5:z,at.type="radial",at.global=J||!1,at}return ot}(bt.a);nt.a=k},EMIz:function(je,nt,b){"use strict";b.d(nt,"a",function(){return gt});var B=b("bPXU"),bt=b("t+3m");function k(lt){if(!lt.UTF8Encoding)return lt;var z=lt,X=z.UTF8Scale;X==null&&(X=1024);var J=z.features;return B.k(J,function(at){var F=at.geometry,Z=F.encodeOffsets,W=F.coordinates;if(!!Z)switch(F.type){case"LineString":F.coordinates=ot(W,Z,X);break;case"Polygon":ft(W,Z,X);break;case"MultiLineString":ft(W,Z,X);break;case"MultiPolygon":B.k(W,function(ht,q){return ft(ht,Z[q],X)})}}),z.UTF8Encoding=!1,z}function ft(lt,z,X){for(var J=0;J<lt.length;J++)lt[J]=ot(lt[J],z[J],X)}function ot(lt,z,X){for(var J=[],at=z[0],F=z[1],Z=0;Z<lt.length;Z+=2){var W=lt.charCodeAt(Z)-64,ht=lt.charCodeAt(Z+1)-64;W=W>>1^-(W&1),ht=ht>>1^-(ht&1),W+=at,ht+=F,at=W,F=ht,J.push([W/X,ht/X])}return J}function gt(lt,z){return lt=k(lt),B.H(B.n(lt.features,function(X){return X.geometry&&X.properties&&X.geometry.coordinates.length>0}),function(X){var J=X.properties,at=X.geometry,F=[];switch(at.type){case"Polygon":var Z=at.coordinates;F.push(new bt.b(Z[0],Z.slice(1)));break;case"MultiPolygon":B.k(at.coordinates,function(ht){ht[0]&&F.push(new bt.b(ht[0],ht.slice(1)))});break;case"LineString":F.push(new bt.a([at.coordinates]));break;case"MultiLineString":F.push(new bt.a(at.coordinates))}var W=new bt.c(J[z||"name"],F,J.cp);return W.properties=J,W})}},Eb29:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4");function k(X,J){var at=J.x,F=J.y,Z=J.width,W=J.height,ht=J.r,q,g,et,$;Z<0&&(at=at+Z,Z=-Z),W<0&&(F=F+W,W=-W),typeof ht=="number"?q=g=et=$=ht:ht instanceof Array?ht.length===1?q=g=et=$=ht[0]:ht.length===2?(q=et=ht[0],g=$=ht[1]):ht.length===3?(q=ht[0],g=$=ht[1],et=ht[2]):(q=ht[0],g=ht[1],et=ht[2],$=ht[3]):q=g=et=$=0;var N;q+g>Z&&(N=q+g,q*=Z/N,g*=Z/N),et+$>Z&&(N=et+$,et*=Z/N,$*=Z/N),g+et>W&&(N=g+et,g*=W/N,et*=W/N),q+$>W&&(N=q+$,q*=W/N,$*=W/N),X.moveTo(at+q,F),X.lineTo(at+Z-g,F),g!==0&&X.arc(at+Z-g,F+g,g,-Math.PI/2,0),X.lineTo(at+Z,F+W-et),et!==0&&X.arc(at+Z-et,F+W-et,et,0,Math.PI/2),X.lineTo(at+$,F+W),$!==0&&X.arc(at+$,F+W-$,$,Math.PI/2,Math.PI),X.lineTo(at,F+q),q!==0&&X.arc(at+q,F+q,q,Math.PI,Math.PI*1.5)}var ft=b("ZYtA"),ot=function(){function X(){this.x=0,this.y=0,this.width=0,this.height=0}return X}(),gt={},lt=function(X){Object(B.a)(J,X);function J(at){return X.call(this,at)||this}return J.prototype.getDefaultShape=function(){return new ot},J.prototype.buildPath=function(at,F){var Z,W,ht,q;if(this.subPixelOptimize){var g=Object(ft.c)(gt,F,this.style);Z=g.x,W=g.y,ht=g.width,q=g.height,g.r=F.r,F=g}else Z=F.x,W=F.y,ht=F.width,q=F.height;F.r?k(at,F):at.rect(Z,W,ht,q)},J.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},J}(bt.b);lt.prototype.type="rect";var z=nt.a=lt},FI5o:function(je,nt,b){"use strict";function B(ft){return ft==null?0:ft.length||1}function bt(ft){return ft}var k=function(){function ft(ot,gt,lt,z,X,J){this._old=ot,this._new=gt,this._oldKeyGetter=lt||bt,this._newKeyGetter=z||bt,this.context=X,this._diffModeMultiple=J==="multiple"}return ft.prototype.add=function(ot){return this._add=ot,this},ft.prototype.update=function(ot){return this._update=ot,this},ft.prototype.updateManyToOne=function(ot){return this._updateManyToOne=ot,this},ft.prototype.updateOneToMany=function(ot){return this._updateOneToMany=ot,this},ft.prototype.updateManyToMany=function(ot){return this._updateManyToMany=ot,this},ft.prototype.remove=function(ot){return this._remove=ot,this},ft.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},ft.prototype._executeOneToOne=function(){var ot=this._old,gt=this._new,lt={},z=new Array(ot.length),X=new Array(gt.length);this._initIndexMap(ot,null,z,"_oldKeyGetter"),this._initIndexMap(gt,lt,X,"_newKeyGetter");for(var J=0;J<ot.length;J++){var at=z[J],F=lt[at],Z=B(F);if(Z>1){var W=F.shift();F.length===1&&(lt[at]=F[0]),this._update&&this._update(W,J)}else Z===1?(lt[at]=null,this._update&&this._update(F,J)):this._remove&&this._remove(J)}this._performRestAdd(X,lt)},ft.prototype._executeMultiple=function(){var ot=this._old,gt=this._new,lt={},z={},X=[],J=[];this._initIndexMap(ot,lt,X,"_oldKeyGetter"),this._initIndexMap(gt,z,J,"_newKeyGetter");for(var at=0;at<X.length;at++){var F=X[at],Z=lt[F],W=z[F],ht=B(Z),q=B(W);if(ht>1&&q===1)this._updateManyToOne&&this._updateManyToOne(W,Z),z[F]=null;else if(ht===1&&q>1)this._updateOneToMany&&this._updateOneToMany(W,Z),z[F]=null;else if(ht===1&&q===1)this._update&&this._update(W,Z),z[F]=null;else if(ht>1&&q>1)this._updateManyToMany&&this._updateManyToMany(W,Z),z[F]=null;else if(ht>1)for(var g=0;g<ht;g++)this._remove&&this._remove(Z[g]);else this._remove&&this._remove(Z)}this._performRestAdd(J,z)},ft.prototype._performRestAdd=function(ot,gt){for(var lt=0;lt<ot.length;lt++){var z=ot[lt],X=gt[z],J=B(X);if(J>1)for(var at=0;at<J;at++)this._add&&this._add(X[at]);else J===1&&this._add&&this._add(X);gt[z]=null}},ft.prototype._initIndexMap=function(ot,gt,lt,z){for(var X=this._diffModeMultiple,J=0;J<ot.length;J++){var at="_ec_"+this[z](ot[J],J);if(X||(lt[J]=at),!!gt){var F=gt[at],Z=B(F);Z===0?(gt[at]=J,X&&lt.push(at)):Z===1?gt[at]=[F,J]:F.push(J)}}},ft}();nt.a=k},FLFE:function(je,nt,b){"use strict";b.d(nt,"e",function(){return B}),b.d(nt,"d",function(){return bt}),b.d(nt,"c",function(){return k}),b.d(nt,"p",function(){return ft}),b.d(nt,"a",function(){return ot}),b.d(nt,"o",function(){return gt}),b.d(nt,"q",function(){return lt}),b.d(nt,"i",function(){return z}),b.d(nt,"n",function(){return ht}),b.d(nt,"m",function(){return q}),b.d(nt,"h",function(){return g}),b.d(nt,"f",function(){return et}),b.d(nt,"g",function(){return N}),b.d(nt,"j",function(){return K}),b.d(nt,"b",function(){return V}),b.d(nt,"l",function(){return G}),b.d(nt,"k",function(){return I});function B(A,C){return A==null&&(A=0),C==null&&(C=0),[A,C]}function bt(A,C){return A[0]=C[0],A[1]=C[1],A}function k(A){return[A[0],A[1]]}function ft(A,C,E){return A[0]=C,A[1]=E,A}function ot(A,C,E){return A[0]=C[0]+E[0],A[1]=C[1]+E[1],A}function gt(A,C,E,O){return A[0]=C[0]+E[0]*O,A[1]=C[1]+E[1]*O,A}function lt(A,C,E){return A[0]=C[0]-E[0],A[1]=C[1]-E[1],A}function z(A){return Math.sqrt(J(A))}var X=z;function J(A){return A[0]*A[0]+A[1]*A[1]}var at=J;function F(A,C,E){return A[0]=C[0]*E[0],A[1]=C[1]*E[1],A}function Z(A,C,E){return A[0]=C[0]/E[0],A[1]=C[1]/E[1],A}function W(A,C){return A[0]*C[0]+A[1]*C[1]}function ht(A,C,E){return A[0]=C[0]*E,A[1]=C[1]*E,A}function q(A,C){var E=z(C);return E===0?(A[0]=0,A[1]=0):(A[0]=C[0]/E,A[1]=C[1]/E),A}function g(A,C){return Math.sqrt((A[0]-C[0])*(A[0]-C[0])+(A[1]-C[1])*(A[1]-C[1]))}var et=g;function $(A,C){return(A[0]-C[0])*(A[0]-C[0])+(A[1]-C[1])*(A[1]-C[1])}var N=$;function Y(A,C){return A[0]=-C[0],A[1]=-C[1],A}function K(A,C,E,O){return A[0]=C[0]+O*(E[0]-C[0]),A[1]=C[1]+O*(E[1]-C[1]),A}function V(A,C,E){var O=C[0],M=C[1];return A[0]=E[0]*O+E[2]*M+E[4],A[1]=E[1]*O+E[3]*M+E[5],A}function G(A,C,E){return A[0]=Math.min(C[0],E[0]),A[1]=Math.min(C[1],E[1]),A}function I(A,C,E){return A[0]=Math.max(C[0],E[0]),A[1]=Math.max(C[1],E[1]),A}},GBOm:function(je,nt,b){"use strict";b.d(nt,"b",function(){return k}),b.d(nt,"a",function(){return ft});var B=b("bPXU"),bt=Object(B.f)();function k(ot,gt){Object(B.b)(bt.get(ot)==null&&gt),bt.set(ot,gt)}function ft(ot,gt,lt){var z=bt.get(gt);if(!z)return lt;var X=z(ot);if(!X)return lt;if(!1)var J;return lt.concat(X)}},GUjm:function(je,nt,b){"use strict";b.d(nt,"d",function(){return F}),b.d(nt,"e",function(){return Z}),b.d(nt,"g",function(){return W}),b.d(nt,"a",function(){return ht}),b.d(nt,"j",function(){return q}),b.d(nt,"c",function(){return et}),b.d(nt,"b",function(){return $}),b.d(nt,"f",function(){return N}),b.d(nt,"i",function(){return Y}),b.d(nt,"h",function(){return K}),b.d(nt,"H",function(){return st}),b.d(nt,"G",function(){return Ot}),b.d(nt,"r",function(){return Ct}),b.d(nt,"C",function(){return Ft}),b.d(nt,"q",function(){return zt}),b.d(nt,"B",function(){return Xt}),b.d(nt,"s",function(){return ie}),b.d(nt,"D",function(){return oe}),b.d(nt,"k",function(){return be}),b.d(nt,"l",function(){return Fe}),b.d(nt,"m",function(){return Bt}),b.d(nt,"t",function(){return Tt}),b.d(nt,"x",function(){return Mt}),b.d(nt,"w",function(){return Ut}),b.d(nt,"K",function(){return se}),b.d(nt,"L",function(){return ge}),b.d(nt,"u",function(){return He}),b.d(nt,"o",function(){return Me}),b.d(nt,"J",function(){return Ke}),b.d(nt,"p",function(){return qe}),b.d(nt,"I",function(){return Ve}),b.d(nt,"F",function(){return Ie}),b.d(nt,"y",function(){return Zt}),b.d(nt,"n",function(){return qt}),b.d(nt,"v",function(){return le}),b.d(nt,"A",function(){return De}),b.d(nt,"z",function(){return tr}),b.d(nt,"E",function(){return nr});var B=b("AOUq"),bt=b("bPXU"),k=b("+aTT"),ft=b("Xy3h"),ot=b("ZXNb"),gt=b("ryx4"),lt=1,z={},X=Object(ot.o)(),J=Object(ot.o)(),at=0,F=1,Z=2,W=["emphasis","blur","select"],ht=["normal","emphasis","blur","select"],q=10,g=9,et="highlight",$="downplay",N="select",Y="unselect",K="toggleSelect";function V(fe){return fe!=null&&fe!=="none"}var G=new B.a(100);function I(fe){if(Object(bt.C)(fe)){var Ee=G.get(fe);return Ee||(Ee=ft.lift(fe,-.1),G.put(fe,Ee)),Ee}else if(Object(bt.x)(fe)){var ke=Object(bt.m)({},fe);return ke.colorStops=Object(bt.H)(fe.colorStops,function(Re){return{offset:Re.offset,color:ft.lift(Re.color,-.1)}}),ke}return fe}function A(fe,Ee,ke){fe.onHoverStateChange&&(fe.hoverState||0)!==ke&&fe.onHoverStateChange(Ee),fe.hoverState=ke}function C(fe){A(fe,"emphasis",Z)}function E(fe){fe.hoverState===Z&&A(fe,"normal",at)}function O(fe){A(fe,"blur",F)}function M(fe){fe.hoverState===F&&A(fe,"normal",at)}function L(fe){fe.selected=!0}function H(fe){fe.selected=!1}function U(fe,Ee,ke){Ee(fe,ke)}function ct(fe,Ee,ke){U(fe,Ee,ke),fe.isGroup&&fe.traverse(function(Re){U(Re,Ee,ke)})}function st(fe,Ee){switch(Ee){case"emphasis":fe.hoverState=Z;break;case"normal":fe.hoverState=at;break;case"blur":fe.hoverState=F;break;case"select":fe.selected=!0}}function vt(fe){fe.isGroup?fe.traverse(function(Ee){Ee.clearStates()}):fe.clearStates()}function it(fe,Ee,ke,Re){for(var Cr=fe.style,Fr={},Hr=0;Hr<Ee.length;Hr++){var Jr=Ee[Hr],Kn=Cr[Jr];Fr[Jr]=Kn==null?Re&&Re[Jr]:Kn}for(var Hr=0;Hr<fe.animators.length;Hr++){var Kr=fe.animators[Hr];Kr.__fromStateTransition&&Kr.__fromStateTransition.indexOf(ke)<0&&Kr.targetName==="style"&&Kr.saveTo(Fr,Ee)}return Fr}function dt(fe,Ee,ke,Re){var Cr=ke&&Object(bt.r)(ke,"select")>=0,Fr=!1;if(fe instanceof gt.b){var Hr=X(fe),Jr=Cr&&Hr.selectFill||Hr.normalFill,Kn=Cr&&Hr.selectStroke||Hr.normalStroke;if(V(Jr)||V(Kn)){Re=Re||{};var Kr=Re.style||{};Kr.fill==="inherit"?(Fr=!0,Re=Object(bt.m)({},Re),Kr=Object(bt.m)({},Kr),Kr.fill=Jr):!V(Kr.fill)&&V(Jr)?(Fr=!0,Re=Object(bt.m)({},Re),Kr=Object(bt.m)({},Kr),Kr.fill=I(Jr)):!V(Kr.stroke)&&V(Kn)&&(Fr||(Re=Object(bt.m)({},Re),Kr=Object(bt.m)({},Kr)),Kr.stroke=I(Kn)),Re.style=Kr}}if(Re&&Re.z2==null){Fr||(Re=Object(bt.m)({},Re));var li=fe.z2EmphasisLift;Re.z2=fe.z2+(li!=null?li:q)}return Re}function St(fe,Ee,ke){if(ke&&ke.z2==null){ke=Object(bt.m)({},ke);var Re=fe.z2SelectLift;ke.z2=fe.z2+(Re!=null?Re:g)}return ke}function ut(fe,Ee,ke){var Re=Object(bt.r)(fe.currentStates,Ee)>=0,Cr=fe.style.opacity,Fr=Re?null:it(fe,["opacity"],Ee,{opacity:1});ke=ke||{};var Hr=ke.style||{};return Hr.opacity==null&&(ke=Object(bt.m)({},ke),Hr=Object(bt.m)({opacity:Re?Cr:Fr.opacity*.1},Hr),ke.style=Hr),ke}function yt(fe,Ee){var ke=this.states[fe];if(this.style){if(fe==="emphasis")return dt(this,fe,Ee,ke);if(fe==="blur")return ut(this,fe,ke);if(fe==="select")return St(this,fe,ke)}return ke}function Ot(fe){fe.stateProxy=yt;var Ee=fe.getTextContent(),ke=fe.getTextGuideLine();Ee&&(Ee.stateProxy=yt),ke&&(ke.stateProxy=yt)}function At(fe,Ee){!he(fe,Ee)&&!fe.__highByOuter&&ct(fe,C)}function It(fe,Ee){!he(fe,Ee)&&!fe.__highByOuter&&ct(fe,E)}function Ct(fe,Ee){fe.__highByOuter|=1<<(Ee||0),ct(fe,C)}function Ft(fe,Ee){!(fe.__highByOuter&=~(1<<(Ee||0)))&&ct(fe,E)}function zt(fe){ct(fe,O)}function Xt(fe){ct(fe,M)}function ie(fe){ct(fe,L)}function oe(fe){ct(fe,H)}function he(fe,Ee){return fe.__highDownSilentOnTouch&&Ee.zrByTouch}function be(fe){var Ee=fe.getModel();Ee.eachComponent(function(ke,Re){var Cr=J(Re);if(Cr.isBlured){var Fr=ke==="series"?fe.getViewOfSeriesModel(Re):fe.getViewOfComponentModel(Re);Fr.group.traverse(function(Hr){M(Hr)})}Cr.isBlured=!1})}function Ce(fe,Ee,ke,Re){var Cr=Re.getModel();ke=ke||"coordinateSystem";function Fr(Kr,li){for(var ei=0;ei<li.length;ei++){var Xa=Kr.getItemGraphicEl(li[ei]);Xa&&Xt(Xa)}}if(fe!=null&&!(!Ee||Ee==="none")){var Hr=Cr.getSeriesByIndex(fe),Jr=Hr.coordinateSystem;Jr&&Jr.master&&(Jr=Jr.master);var Kn=[];Cr.eachSeries(function(Kr){var li=Hr===Kr,ei=Kr.coordinateSystem;ei&&ei.master&&(ei=ei.master);var Xa=ei&&Jr?ei===Jr:li;if(!(ke==="series"&&!li||ke==="coordinateSystem"&&!Xa||Ee==="series"&&li)){var Za=Re.getViewOfSeriesModel(Kr);if(Za.group.traverse(function(Aa){O(Aa)}),Object(bt.u)(Ee))Fr(Kr.getData(),Ee);else if(Object(bt.A)(Ee))for(var si=Object(bt.F)(Ee),lo=0;lo<si.length;lo++)Fr(Kr.getData(si[lo]),Ee[si[lo]]);Kn.push(Kr),J(Kr).isBlured=!0}}),Cr.eachComponent(function(Kr,li){if(Kr!=="series"){var ei=Re.getViewOfComponentModel(li);ei&&ei.blurSeries&&ei.blurSeries(Kn,Cr)}})}}function Fe(fe,Ee,ke){if(!(fe==null||Ee==null)){var Re=ke.getModel().getComponent(fe,Ee);if(!!Re){J(Re).isBlured=!0;var Cr=ke.getViewOfComponentModel(Re);!Cr||!Cr.focusBlurEnabled||Cr.group.traverse(function(Fr){O(Fr)})}}}function Bt(fe,Ee,ke){var Re=fe.seriesIndex,Cr=fe.getData(Ee.dataType);if(!!Cr){var Fr=Object(ot.u)(Cr,Ee);Fr=(Object(bt.t)(Fr)?Fr[0]:Fr)||0;var Hr=Cr.getItemGraphicEl(Fr);if(!Hr)for(var Jr=Cr.count(),Kn=0;!Hr&&Kn<Jr;)Hr=Cr.getItemGraphicEl(Kn++);if(Hr){var Kr=Object(k.a)(Hr);Ce(Re,Kr.focus,Kr.blurScope,ke)}else{var li=fe.get(["emphasis","focus"]),ei=fe.get(["emphasis","blurScope"]);li!=null&&Ce(Re,li,ei,ke)}}}function Tt(fe,Ee,ke,Re){var Cr={focusSelf:!1,dispatchers:null};if(fe==null||fe==="series"||Ee==null||ke==null)return Cr;var Fr=Re.getModel().getComponent(fe,Ee);if(!Fr)return Cr;var Hr=Re.getViewOfComponentModel(Fr);if(!Hr||!Hr.findHighDownDispatchers)return Cr;for(var Jr=Hr.findHighDownDispatchers(ke),Kn,Kr=0;Kr<Jr.length;Kr++)if(Object(k.a)(Jr[Kr]).focus==="self"){Kn=!0;break}return{focusSelf:Kn,dispatchers:Jr}}function Mt(fe,Ee,ke){var Re=Object(k.a)(fe),Cr=Tt(Re.componentMainType,Re.componentIndex,Re.componentHighDownName,ke),Fr=Cr.dispatchers,Hr=Cr.focusSelf;Fr?(Hr&&Fe(Re.componentMainType,Re.componentIndex,ke),Object(bt.k)(Fr,function(Jr){return At(Jr,Ee)})):(Ce(Re.seriesIndex,Re.focus,Re.blurScope,ke),Re.focus==="self"&&Fe(Re.componentMainType,Re.componentIndex,ke),At(fe,Ee))}function Ut(fe,Ee,ke){be(ke);var Re=Object(k.a)(fe),Cr=Tt(Re.componentMainType,Re.componentIndex,Re.componentHighDownName,ke).dispatchers;Cr?Object(bt.k)(Cr,function(Fr){return It(Fr,Ee)}):It(fe,Ee)}function se(fe,Ee,ke){if(!!De(Ee)){var Re=Ee.dataType,Cr=fe.getData(Re),Fr=Object(ot.u)(Cr,Ee);Object(bt.t)(Fr)||(Fr=[Fr]),fe[Ee.type===K?"toggleSelect":Ee.type===N?"select":"unselect"](Fr,Re)}}function ge(fe){var Ee=fe.getAllData();Object(bt.k)(Ee,function(ke){var Re=ke.data,Cr=ke.type;Re.eachItemGraphicEl(function(Fr,Hr){fe.isSelected(Hr,Cr)?ie(Fr):oe(Fr)})})}function He(fe){var Ee=[];return fe.eachSeries(function(ke){var Re=ke.getAllData();Object(bt.k)(Re,function(Cr){var Fr=Cr.data,Hr=Cr.type,Jr=ke.getSelectedDataIndices();if(Jr.length>0){var Kn={dataIndex:Jr,seriesIndex:ke.seriesIndex};Hr!=null&&(Kn.dataType=Hr),Ee.push(Kn)}})}),Ee}function Me(fe,Ee,ke){Ie(fe,!0),ct(fe,Ot),qe(fe,Ee,ke)}function We(fe){Ie(fe,!1)}function Ke(fe,Ee,ke,Re){Re?We(fe):Me(fe,Ee,ke)}function qe(fe,Ee,ke){var Re=Object(k.a)(fe);Ee!=null?(Re.focus=Ee,Re.blurScope=ke):Re.focus&&(Re.focus=null)}var Qt=["emphasis","blur","select"],Se={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Ve(fe,Ee,ke,Re){ke=ke||"itemStyle";for(var Cr=0;Cr<Qt.length;Cr++){var Fr=Qt[Cr],Hr=Ee.getModel([Fr,ke]),Jr=fe.ensureState(Fr);Jr.style=Re?Re(Hr):Hr[Se[ke]]()}}function Ie(fe,Ee){var ke=Ee===!1,Re=fe;fe.highDownSilentOnTouch&&(Re.__highDownSilentOnTouch=fe.highDownSilentOnTouch),(!ke||Re.__highDownDispatcher)&&(Re.__highByOuter=Re.__highByOuter||0,Re.__highDownDispatcher=!ke)}function Zt(fe){return!!(fe&&fe.__highDownDispatcher)}function qt(fe,Ee,ke){var Re=Object(k.a)(fe);Re.componentMainType=Ee.mainType,Re.componentIndex=Ee.componentIndex,Re.componentHighDownName=ke}function le(fe){var Ee=z[fe];return Ee==null&&lt<=32&&(Ee=z[fe]=lt++),Ee}function De(fe){var Ee=fe.type;return Ee===N||Ee===Y||Ee===K}function tr(fe){var Ee=fe.type;return Ee===et||Ee===$}function nr(fe){var Ee=X(fe);Ee.normalFill=fe.style.fill,Ee.normalStroke=fe.style.stroke;var ke=fe.states.select||{};Ee.selectFill=ke.style&&ke.style.fill||null,Ee.selectStroke=ke.style&&ke.style.stroke||null}},GYvh:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("7M1A"),k=b("euZP"),ft=b("2zTA"),ot=b("H9JY"),gt=bt.v,lt=function(z){Object(B.a)(X,z);function X(){var J=z!==null&&z.apply(this,arguments)||this;return J.type="interval",J._interval=0,J._intervalPrecision=2,J}return X.prototype.parse=function(J){return J},X.prototype.contain=function(J){return ot.a(J,this._extent)},X.prototype.normalize=function(J){return ot.f(J,this._extent)},X.prototype.scale=function(J){return ot.g(J,this._extent)},X.prototype.setExtent=function(J,at){var F=this._extent;isNaN(J)||(F[0]=parseFloat(J)),isNaN(at)||(F[1]=parseFloat(at))},X.prototype.unionExtent=function(J){var at=this._extent;J[0]<at[0]&&(at[0]=J[0]),J[1]>at[1]&&(at[1]=J[1]),this.setExtent(at[0],at[1])},X.prototype.getInterval=function(){return this._interval},X.prototype.setInterval=function(J){this._interval=J,this._niceExtent=this._extent.slice(),this._intervalPrecision=ot.b(J)},X.prototype.getTicks=function(J){var at=this._interval,F=this._extent,Z=this._niceExtent,W=this._intervalPrecision,ht=[];if(!at)return ht;var q=1e4;F[0]<Z[0]&&(J?ht.push({value:gt(Z[0]-at,W)}):ht.push({value:F[0]}));for(var g=Z[0];g<=Z[1]&&(ht.push({value:g}),g=gt(g+at,W),g!==ht[ht.length-1].value);)if(ht.length>q)return[];var et=ht.length?ht[ht.length-1].value:Z[1];return F[1]>et&&(J?ht.push({value:gt(et+at,W)}):ht.push({value:F[1]})),ht},X.prototype.getMinorTicks=function(J){for(var at=this.getTicks(!0),F=[],Z=this.getExtent(),W=1;W<at.length;W++){for(var ht=at[W],q=at[W-1],g=0,et=[],$=ht.value-q.value,N=$/J;g<J-1;){var Y=gt(q.value+(g+1)*N);Y>Z[0]&&Y<Z[1]&&et.push(Y),g++}F.push(et)}return F},X.prototype.getLabel=function(J,at){if(J==null)return"";var F=at&&at.precision;F==null?F=bt.g(J.value)||0:F==="auto"&&(F=this._intervalPrecision);var Z=gt(J.value,F,!0);return k.a(Z)},X.prototype.calcNiceTicks=function(J,at,F){J=J||5;var Z=this._extent,W=Z[1]-Z[0];if(!!isFinite(W)){W<0&&(W=-W,Z.reverse());var ht=ot.d(Z,J,at,F);this._intervalPrecision=ht.intervalPrecision,this._interval=ht.interval,this._niceExtent=ht.niceTickExtent}},X.prototype.calcNiceExtent=function(J){var at=this._extent;if(at[0]===at[1])if(at[0]!==0){var F=at[0];J.fixMax||(at[1]+=F/2),at[0]-=F/2}else at[1]=1;var Z=at[1]-at[0];isFinite(Z)||(at[0]=0,at[1]=1),this.calcNiceTicks(J.splitNumber,J.minInterval,J.maxInterval);var W=this._interval;J.fixMin||(at[0]=gt(Math.floor(at[0]/W)*W)),J.fixMax||(at[1]=gt(Math.ceil(at[1]/W)*W))},X.prototype.setNiceExtent=function(J,at){this._niceExtent=[J,at]},X.type="interval",X}(ft.a);ft.a.registerClass(lt),nt.a=lt},Gm52:function(je,nt,b){"use strict";b.d(nt,"b",function(){return ot}),b.d(nt,"a",function(){return ft});var B=b("ZXNb"),bt=Object(B.o)(),k=Object(B.o)(),ft=function(){function X(){}return X.prototype.getColorFromPalette=function(J,at,F){var Z=Object(B.r)(this.get("color",!0)),W=this.get("colorLayer",!0);return lt(this,bt,Z,W,J,at,F)},X.prototype.clearColorPalette=function(){z(this,bt)},X}();function ot(X,J,at,F){var Z=Object(B.r)(X.get(["aria","decal","decals"]));return lt(X,k,Z,null,J,at,F)}function gt(X,J){for(var at=X.length,F=0;F<at;F++)if(X[F].length>J)return X[F];return X[at-1]}function lt(X,J,at,F,Z,W,ht){W=W||X;var q=J(W),g=q.paletteIdx||0,et=q.paletteNameMap=q.paletteNameMap||{};if(et.hasOwnProperty(Z))return et[Z];var $=ht==null||!F?at:gt(F,ht);if($=$||at,!(!$||!$.length)){var N=$[g];return Z&&(et[Z]=N),q.paletteIdx=(g+1)%$.length,N}}function z(X,J){J(X).paletteIdx=0,J(X).paletteNameMap={}}},H9JY:function(je,nt,b){"use strict";b.d(nt,"e",function(){return k}),b.d(nt,"d",function(){return ft}),b.d(nt,"c",function(){return ot}),b.d(nt,"b",function(){return gt}),b.d(nt,"a",function(){return X}),b.d(nt,"f",function(){return J}),b.d(nt,"g",function(){return at});var B=b("7M1A");function bt(F){var Z=Math.pow(10,Object(B.s)(Math.abs(F))),W=Math.abs(F/Z);return W===0||W===1||W===2||W===3||W===5}function k(F){return F.type==="interval"||F.type==="log"}function ft(F,Z,W,ht){var q={},g=F[1]-F[0],et=q.interval=Object(B.m)(g/Z,!0);W!=null&&et<W&&(et=q.interval=W),ht!=null&&et>ht&&(et=q.interval=ht);var $=q.intervalPrecision=gt(et),N=q.niceTickExtent=[Object(B.v)(Math.ceil(F[0]/et)*et,$),Object(B.v)(Math.floor(F[1]/et)*et,$)];return z(N,F),q}function ot(F){var Z=Math.pow(10,Object(B.s)(F)),W=F/Z;return W?W===2?W=3:W===3?W=5:W*=2:W=1,Object(B.v)(W*Z)}function gt(F){return Object(B.g)(F)+2}function lt(F,Z,W){F[Z]=Math.max(Math.min(F[Z],W[1]),W[0])}function z(F,Z){!isFinite(F[0])&&(F[0]=Z[0]),!isFinite(F[1])&&(F[1]=Z[1]),lt(F,0,Z),lt(F,1,Z),F[0]>F[1]&&(F[0]=F[1])}function X(F,Z){return F>=Z[0]&&F<=Z[1]}function J(F,Z){return Z[1]===Z[0]?.5:(F-Z[0])/(Z[1]-Z[0])}function at(F,Z){return F*(Z[1]-Z[0])+Z[0]}},HIFk:function(je,nt,b){"use strict";var B=function(){function bt(k){k&&(this._$eventProcessor=k)}return bt.prototype.on=function(k,ft,ot,gt){this._$handlers||(this._$handlers={});var lt=this._$handlers;if(typeof ft=="function"&&(gt=ot,ot=ft,ft=null),!ot||!k)return this;var z=this._$eventProcessor;ft!=null&&z&&z.normalizeQuery&&(ft=z.normalizeQuery(ft)),lt[k]||(lt[k]=[]);for(var X=0;X<lt[k].length;X++)if(lt[k][X].h===ot)return this;var J={h:ot,query:ft,ctx:gt||this,callAtLast:ot.zrEventfulCallAtLast},at=lt[k].length-1,F=lt[k][at];return F&&F.callAtLast?lt[k].splice(at,0,J):lt[k].push(J),this},bt.prototype.isSilent=function(k){var ft=this._$handlers;return!ft||!ft[k]||!ft[k].length},bt.prototype.off=function(k,ft){var ot=this._$handlers;if(!ot)return this;if(!k)return this._$handlers={},this;if(ft){if(ot[k]){for(var gt=[],lt=0,z=ot[k].length;lt<z;lt++)ot[k][lt].h!==ft&&gt.push(ot[k][lt]);ot[k]=gt}ot[k]&&ot[k].length===0&&delete ot[k]}else delete ot[k];return this},bt.prototype.trigger=function(k){for(var ft=[],ot=1;ot<arguments.length;ot++)ft[ot-1]=arguments[ot];if(!this._$handlers)return this;var gt=this._$handlers[k],lt=this._$eventProcessor;if(gt)for(var z=ft.length,X=gt.length,J=0;J<X;J++){var at=gt[J];if(!(lt&&lt.filter&&at.query!=null&&!lt.filter(k,at.query)))switch(z){case 0:at.h.call(at.ctx);break;case 1:at.h.call(at.ctx,ft[0]);break;case 2:at.h.call(at.ctx,ft[0],ft[1]);break;default:at.h.apply(at.ctx,ft);break}}return lt&&lt.afterTrigger&&lt.afterTrigger(k),this},bt.prototype.triggerWithContext=function(k){for(var ft=[],ot=1;ot<arguments.length;ot++)ft[ot-1]=arguments[ot];if(!this._$handlers)return this;var gt=this._$handlers[k],lt=this._$eventProcessor;if(gt)for(var z=ft.length,X=ft[z-1],J=gt.length,at=0;at<J;at++){var F=gt[at];if(!(lt&&lt.filter&&F.query!=null&&!lt.filter(k,F.query)))switch(z){case 0:F.h.call(X);break;case 1:F.h.call(X,ft[0]);break;case 2:F.h.call(X,ft[0],ft[1]);break;default:F.h.apply(X,ft.slice(1,z-1));break}}return lt&&lt.afterTrigger&&lt.afterTrigger(k),this},bt}();nt.a=B},I0j4:function(je,nt,b){"use strict";var B=b("FLFE"),bt=b("uSNo"),k=b("y9SG"),ft=b("LFVZ"),ot=b("IyL0"),gt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},lt=[],z=[],X=[],J=[],at=[],F=[],Z=Math.min,W=Math.max,ht=Math.cos,q=Math.sin,g=Math.abs,et=Math.PI,$=et*2,N=typeof Float32Array!="undefined",Y=[];function K(I){var A=Math.round(I/et*1e8)/1e8;return A%2*et}function V(I,A){var C=K(I[0]);C<0&&(C+=$);var E=C-I[0],O=I[1];O+=E,!A&&O-C>=$?O=C+$:A&&C-O>=$?O=C-$:!A&&C>O?O=C+($-K(C-O)):A&&C<O&&(O=C-($-K(O-C))),I[0]=C,I[1]=O}var G=function(){function I(A){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,A&&(this._saveData=!1),this._saveData&&(this.data=[])}return I.prototype.increaseVersion=function(){this._version++},I.prototype.getVersion=function(){return this._version},I.prototype.setScale=function(A,C,E){E=E||0,E>0&&(this._ux=g(E/k.e/A)||0,this._uy=g(E/k.e/C)||0)},I.prototype.setDPR=function(A){this.dpr=A},I.prototype.setContext=function(A){this._ctx=A},I.prototype.getContext=function(){return this._ctx},I.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},I.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},I.prototype.moveTo=function(A,C){return this._drawPendingPt(),this.addData(gt.M,A,C),this._ctx&&this._ctx.moveTo(A,C),this._x0=A,this._y0=C,this._xi=A,this._yi=C,this},I.prototype.lineTo=function(A,C){var E=g(A-this._xi),O=g(C-this._yi),M=E>this._ux||O>this._uy;if(this.addData(gt.L,A,C),this._ctx&&M&&this._ctx.lineTo(A,C),M)this._xi=A,this._yi=C,this._pendingPtDist=0;else{var L=E*E+O*O;L>this._pendingPtDist&&(this._pendingPtX=A,this._pendingPtY=C,this._pendingPtDist=L)}return this},I.prototype.bezierCurveTo=function(A,C,E,O,M,L){return this._drawPendingPt(),this.addData(gt.C,A,C,E,O,M,L),this._ctx&&this._ctx.bezierCurveTo(A,C,E,O,M,L),this._xi=M,this._yi=L,this},I.prototype.quadraticCurveTo=function(A,C,E,O){return this._drawPendingPt(),this.addData(gt.Q,A,C,E,O),this._ctx&&this._ctx.quadraticCurveTo(A,C,E,O),this._xi=E,this._yi=O,this},I.prototype.arc=function(A,C,E,O,M,L){this._drawPendingPt(),Y[0]=O,Y[1]=M,V(Y,L),O=Y[0],M=Y[1];var H=M-O;return this.addData(gt.A,A,C,E,E,O,H,0,L?0:1),this._ctx&&this._ctx.arc(A,C,E,O,M,L),this._xi=ht(M)*E+A,this._yi=q(M)*E+C,this},I.prototype.arcTo=function(A,C,E,O,M){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(A,C,E,O,M),this},I.prototype.rect=function(A,C,E,O){return this._drawPendingPt(),this._ctx&&this._ctx.rect(A,C,E,O),this.addData(gt.R,A,C,E,O),this},I.prototype.closePath=function(){this._drawPendingPt(),this.addData(gt.Z);var A=this._ctx,C=this._x0,E=this._y0;return A&&A.closePath(),this._xi=C,this._yi=E,this},I.prototype.fill=function(A){A&&A.fill(),this.toStatic()},I.prototype.stroke=function(A){A&&A.stroke(),this.toStatic()},I.prototype.len=function(){return this._len},I.prototype.setData=function(A){var C=A.length;!(this.data&&this.data.length===C)&&N&&(this.data=new Float32Array(C));for(var E=0;E<C;E++)this.data[E]=A[E];this._len=C},I.prototype.appendPath=function(A){A instanceof Array||(A=[A]);for(var C=A.length,E=0,O=this._len,M=0;M<C;M++)E+=A[M].len();N&&this.data instanceof Float32Array&&(this.data=new Float32Array(O+E));for(var M=0;M<C;M++)for(var L=A[M].data,H=0;H<L.length;H++)this.data[O++]=L[H];this._len=O},I.prototype.addData=function(A,C,E,O,M,L,H,U,ct){if(!!this._saveData){var st=this.data;this._len+arguments.length>st.length&&(this._expandData(),st=this.data);for(var vt=0;vt<arguments.length;vt++)st[this._len++]=arguments[vt]}},I.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},I.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var A=[],C=0;C<this._len;C++)A[C]=this.data[C];this.data=A}},I.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var A=this.data;A instanceof Array&&(A.length=this._len,N&&this._len>11&&(this.data=new Float32Array(A)))}},I.prototype.getBoundingRect=function(){X[0]=X[1]=at[0]=at[1]=Number.MAX_VALUE,J[0]=J[1]=F[0]=F[1]=-Number.MAX_VALUE;var A=this.data,C=0,E=0,O=0,M=0,L;for(L=0;L<this._len;){var H=A[L++],U=L===1;switch(U&&(C=A[L],E=A[L+1],O=C,M=E),H){case gt.M:C=O=A[L++],E=M=A[L++],at[0]=O,at[1]=M,F[0]=O,F[1]=M;break;case gt.L:Object(ft.c)(C,E,A[L],A[L+1],at,F),C=A[L++],E=A[L++];break;case gt.C:Object(ft.b)(C,E,A[L++],A[L++],A[L++],A[L++],A[L],A[L+1],at,F),C=A[L++],E=A[L++];break;case gt.Q:Object(ft.e)(C,E,A[L++],A[L++],A[L],A[L+1],at,F),C=A[L++],E=A[L++];break;case gt.A:var ct=A[L++],st=A[L++],vt=A[L++],it=A[L++],dt=A[L++],St=A[L++]+dt;L+=1;var ut=!A[L++];U&&(O=ht(dt)*vt+ct,M=q(dt)*it+st),Object(ft.a)(ct,st,vt,it,dt,St,ut,at,F),C=ht(St)*vt+ct,E=q(St)*it+st;break;case gt.R:O=C=A[L++],M=E=A[L++];var yt=A[L++],Ot=A[L++];Object(ft.c)(O,M,O+yt,M+Ot,at,F);break;case gt.Z:C=O,E=M;break}B.l(X,X,at),B.k(J,J,F)}return L===0&&(X[0]=X[1]=J[0]=J[1]=0),new bt.a(X[0],X[1],J[0]-X[0],J[1]-X[1])},I.prototype._calculateLength=function(){var A=this.data,C=this._len,E=this._ux,O=this._uy,M=0,L=0,H=0,U=0;this._pathSegLen||(this._pathSegLen=[]);for(var ct=this._pathSegLen,st=0,vt=0,it=0;it<C;){var dt=A[it++],St=it===1;St&&(M=A[it],L=A[it+1],H=M,U=L);var ut=-1;switch(dt){case gt.M:M=H=A[it++],L=U=A[it++];break;case gt.L:{var yt=A[it++],Ot=A[it++],At=yt-M,It=Ot-L;(g(At)>E||g(It)>O||it===C-1)&&(ut=Math.sqrt(At*At+It*It),M=yt,L=Ot);break}case gt.C:{var Ct=A[it++],Ft=A[it++],yt=A[it++],Ot=A[it++],zt=A[it++],Xt=A[it++];ut=Object(ot.d)(M,L,Ct,Ft,yt,Ot,zt,Xt,10),M=zt,L=Xt;break}case gt.Q:{var Ct=A[it++],Ft=A[it++],yt=A[it++],Ot=A[it++];ut=Object(ot.k)(M,L,Ct,Ft,yt,Ot,10),M=yt,L=Ot;break}case gt.A:var ie=A[it++],oe=A[it++],he=A[it++],be=A[it++],Ce=A[it++],Fe=A[it++],Bt=Fe+Ce;it+=1;var Tt=!A[it++];St&&(H=ht(Ce)*he+ie,U=q(Ce)*be+oe),ut=W(he,be)*Z($,Math.abs(Fe)),M=ht(Bt)*he+ie,L=q(Bt)*be+oe;break;case gt.R:{H=M=A[it++],U=L=A[it++];var Mt=A[it++],Ut=A[it++];ut=Mt*2+Ut*2;break}case gt.Z:{var At=H-M,It=U-L;ut=Math.sqrt(At*At+It*It),M=H,L=U;break}}ut>=0&&(ct[vt++]=ut,st+=ut)}return this._pathLen=st,st},I.prototype.rebuildPath=function(A,C){var E=this.data,O=this._ux,M=this._uy,L=this._len,H,U,ct,st,vt,it,dt=C<1,St,ut,yt=0,Ot=0,At,It=0,Ct,Ft;if(dt&&(this._pathSegLen||this._calculateLength(),St=this._pathSegLen,ut=this._pathLen,At=C*ut,!At))return;t:for(var zt=0;zt<L;){var Xt=E[zt++],ie=zt===1;switch(ie&&(ct=E[zt],st=E[zt+1],H=ct,U=st),Xt!==gt.L&&It>0&&(A.lineTo(Ct,Ft),It=0),Xt){case gt.M:H=ct=E[zt++],U=st=E[zt++],A.moveTo(ct,st);break;case gt.L:{vt=E[zt++],it=E[zt++];var oe=g(vt-ct),he=g(it-st);if(oe>O||he>M){if(dt){var be=St[Ot++];if(yt+be>At){var Ce=(At-yt)/be;A.lineTo(ct*(1-Ce)+vt*Ce,st*(1-Ce)+it*Ce);break t}yt+=be}A.lineTo(vt,it),ct=vt,st=it,It=0}else{var Fe=oe*oe+he*he;Fe>It&&(Ct=vt,Ft=it,It=Fe)}break}case gt.C:{var Bt=E[zt++],Tt=E[zt++],Mt=E[zt++],Ut=E[zt++],se=E[zt++],ge=E[zt++];if(dt){var be=St[Ot++];if(yt+be>At){var Ce=(At-yt)/be;Object(ot.g)(ct,Bt,Mt,se,Ce,lt),Object(ot.g)(st,Tt,Ut,ge,Ce,z),A.bezierCurveTo(lt[1],z[1],lt[2],z[2],lt[3],z[3]);break t}yt+=be}A.bezierCurveTo(Bt,Tt,Mt,Ut,se,ge),ct=se,st=ge;break}case gt.Q:{var Bt=E[zt++],Tt=E[zt++],Mt=E[zt++],Ut=E[zt++];if(dt){var be=St[Ot++];if(yt+be>At){var Ce=(At-yt)/be;Object(ot.n)(ct,Bt,Mt,Ce,lt),Object(ot.n)(st,Tt,Ut,Ce,z),A.quadraticCurveTo(lt[1],z[1],lt[2],z[2]);break t}yt+=be}A.quadraticCurveTo(Bt,Tt,Mt,Ut),ct=Mt,st=Ut;break}case gt.A:var He=E[zt++],Me=E[zt++],We=E[zt++],Ke=E[zt++],qe=E[zt++],Qt=E[zt++],Se=E[zt++],Ve=!E[zt++],Ie=We>Ke?We:Ke,Zt=g(We-Ke)>.001,qt=qe+Qt,le=!1;if(dt){var be=St[Ot++];yt+be>At&&(qt=qe+Qt*(At-yt)/be,le=!0),yt+=be}if(Zt&&A.ellipse?A.ellipse(He,Me,We,Ke,Se,qe,qt,Ve):A.arc(He,Me,Ie,qe,qt,Ve),le)break t;ie&&(H=ht(qe)*We+He,U=q(qe)*Ke+Me),ct=ht(qt)*We+He,st=q(qt)*Ke+Me;break;case gt.R:H=ct=E[zt],U=st=E[zt+1],vt=E[zt++],it=E[zt++];var De=E[zt++],tr=E[zt++];if(dt){var be=St[Ot++];if(yt+be>At){var nr=At-yt;A.moveTo(vt,it),A.lineTo(vt+Z(nr,De),it),nr-=De,nr>0&&A.lineTo(vt+De,it+Z(nr,tr)),nr-=tr,nr>0&&A.lineTo(vt+W(De-nr,0),it+tr),nr-=De,nr>0&&A.lineTo(vt,it+W(tr-nr,0));break t}yt+=be}A.rect(vt,it,De,tr);break;case gt.Z:if(dt){var be=St[Ot++];if(yt+be>At){var Ce=(At-yt)/be;A.lineTo(ct*(1-Ce)+H*Ce,st*(1-Ce)+U*Ce);break t}yt+=be}A.closePath(),ct=H,st=U}}},I.prototype.clone=function(){var A=new I,C=this.data;return A.data=C.slice?C.slice():Array.prototype.slice.call(C),A._len=this._len,A},I.CMD=gt,I.initDefaultProps=function(){var A=I.prototype;A._saveData=!0,A._ux=0,A._uy=0,A._pendingPtDist=0,A._version=0}(),I}();nt.a=G},I79D:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ht});var B=b("c5Gk"),bt=b("bPXU"),k=b("QO9Q"),ft=b("ZXNb"),ot=b("/PGm"),gt=b("Gm52"),lt=b("1OoA"),z=b("RlS0"),X=b("M8IA"),J=b("YN2f"),at=b("skrI"),F=b("M9la"),Z=ft.o();function W(I,A){return I.getName(A)||I.getId(A)}var ht="__universalTransitionEnabled",q=function(I){Object(B.a)(A,I);function A(){var C=I!==null&&I.apply(this,arguments)||this;return C._selectedDataIndicesMap={},C}return A.prototype.init=function(C,E,O){this.seriesIndex=this.componentIndex,this.dataTask=Object(X.a)({count:$,reset:N}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(C,O);var M=Z(this).sourceManager=new at.a(this);M.prepareSource();var L=this.getInitialData(C,O);K(L,this),this.dataTask.context.data=L,Z(this).dataBeforeProcessed=L,g(this),this._initSelectedMapFromData(L)},A.prototype.mergeDefaultAndTheme=function(C,E){var O=Object(z.d)(this),M=O?Object(z.f)(C):{},L=this.subType;ot.a.hasClass(L)&&(L+="Series"),bt.I(C,E.getTheme().get(this.subType)),bt.I(C,this.getDefaultOption()),ft.f(C,"label",["show"]),this.fillDataTextStyle(C.data),O&&Object(z.h)(C,M,O)},A.prototype.mergeOption=function(C,E){C=bt.I(this.option,C,!0),this.fillDataTextStyle(C.data);var O=Object(z.d)(this);O&&Object(z.h)(this.option,C,O);var M=Z(this).sourceManager;M.dirty(),M.prepareSource();var L=this.getInitialData(C,E);K(L,this),this.dataTask.dirty(),this.dataTask.context.data=L,Z(this).dataBeforeProcessed=L,g(this),this._initSelectedMapFromData(L)},A.prototype.fillDataTextStyle=function(C){if(C&&!bt.E(C))for(var E=["show"],O=0;O<C.length;O++)C[O]&&C[O].label&&ft.f(C[O],"label",E)},A.prototype.getInitialData=function(C,E){},A.prototype.appendData=function(C){var E=this.getRawData();E.appendData(C.data)},A.prototype.getData=function(C){var E=G(this);if(E){var O=E.context.data;return C==null?O:O.getLinkedData(C)}else return Z(this).data},A.prototype.getAllData=function(){var C=this.getData();return C&&C.getLinkedDataAll?C.getLinkedDataAll():[{data:C}]},A.prototype.setData=function(C){var E=G(this);if(E){var O=E.context;O.outputData=C,E!==this.dataTask&&(O.data=C)}Z(this).data=C},A.prototype.getEncode=function(){var C=this.get("encode",!0);if(C)return bt.f(C)},A.prototype.getSourceManager=function(){return Z(this).sourceManager},A.prototype.getSource=function(){return this.getSourceManager().getSource()},A.prototype.getRawData=function(){return Z(this).dataBeforeProcessed},A.prototype.getColorBy=function(){var C=this.get("colorBy");return C||"series"},A.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},A.prototype.getBaseAxis=function(){var C=this.coordinateSystem;return C&&C.getBaseAxis&&C.getBaseAxis()},A.prototype.formatTooltip=function(C,E,O){return Object(F.a)({series:this,dataIndex:C,multipleSeries:E})},A.prototype.isAnimationEnabled=function(){var C=this.ecModel;if(k.a.node&&!(C&&C.ssr))return!1;var E=this.getShallow("animation");return E&&this.getData().count()>this.getShallow("animationThreshold")&&(E=!1),!!E},A.prototype.restoreData=function(){this.dataTask.dirty()},A.prototype.getColorFromPalette=function(C,E,O){var M=this.ecModel,L=gt.a.prototype.getColorFromPalette.call(this,C,E,O);return L||(L=M.getColorFromPalette(C,E,O)),L},A.prototype.coordDimToDataDim=function(C){return this.getRawData().mapDimensionsAll(C)},A.prototype.getProgressive=function(){return this.get("progressive")},A.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},A.prototype.select=function(C,E){this._innerSelect(this.getData(E),C)},A.prototype.unselect=function(C,E){var O=this.option.selectedMap;if(!!O){var M=this.option.selectedMode,L=this.getData(E);if(M==="series"||O==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var H=0;H<C.length;H++){var U=C[H],ct=W(L,U);O[ct]=!1,this._selectedDataIndicesMap[ct]=-1}}},A.prototype.toggleSelect=function(C,E){for(var O=[],M=0;M<C.length;M++)O[0]=C[M],this.isSelected(C[M],E)?this.unselect(O,E):this.select(O,E)},A.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var C=this._selectedDataIndicesMap,E=bt.F(C),O=[],M=0;M<E.length;M++){var L=C[E[M]];L>=0&&O.push(L)}return O},A.prototype.isSelected=function(C,E){var O=this.option.selectedMap;if(!O)return!1;var M=this.getData(E);return(O==="all"||O[W(M,C)])&&!M.getItemModel(C).get(["select","disabled"])},A.prototype.isUniversalTransitionEnabled=function(){if(this[ht])return!0;var C=this.option.universalTransition;return C?C===!0?!0:C&&C.enabled:!1},A.prototype._innerSelect=function(C,E){var O,M,L=this.option,H=L.selectedMode,U=E.length;if(!(!H||!U)){if(H==="series")L.selectedMap="all";else if(H==="multiple"){bt.A(L.selectedMap)||(L.selectedMap={});for(var ct=L.selectedMap,st=0;st<U;st++){var vt=E[st],it=W(C,vt);ct[it]=!0,this._selectedDataIndicesMap[it]=C.getRawIndex(vt)}}else if(H==="single"||H===!0){var dt=E[U-1],it=W(C,dt);L.selectedMap=(O={},O[it]=!0,O),this._selectedDataIndicesMap=(M={},M[it]=C.getRawIndex(dt),M)}}},A.prototype._initSelectedMapFromData=function(C){if(!this.option.selectedMap){var E=[];C.hasItemOption&&C.each(function(O){var M=C.getRawDataItem(O);M&&M.selected&&E.push(O)}),E.length>0&&this._innerSelect(C,E)}},A.registerClass=function(C){return ot.a.registerClass(C)},A.protoInitialize=function(){var C=A.prototype;C.type="series.__base__",C.seriesIndex=0,C.ignoreStyleOnData=!1,C.hasSymbolVisual=!1,C.defaultSymbol="circle",C.visualStyleAccessPath="itemStyle",C.visualDrawType="fill"}(),A}(ot.a);bt.K(q,lt.a),bt.K(q,gt.a),Object(J.e)(q,ot.a);function g(I){var A=I.name;ft.n(I)||(I.name=et(I)||A)}function et(I){var A=I.getRawData(),C=A.mapDimensionsAll("seriesName"),E=[];return bt.k(C,function(O){var M=A.getDimensionInfo(O);M.displayName&&E.push(M.displayName)}),E.join(" ")}function $(I){return I.model.getRawData().count()}function N(I){var A=I.model;return A.setData(A.getRawData().cloneShallow()),Y}function Y(I,A){A.outputData&&I.end>A.outputData.count()&&A.model.getRawData().cloneShallow(A.outputData)}function K(I,A){bt.k(bt.e(I.CHANGABLE_METHODS,I.DOWNSAMPLE_METHODS),function(C){I.wrapMethod(C,bt.h(V,A))})}function V(I,A){var C=G(I);return C&&C.setOutputEnd((A||this).count()),A}function G(I){var A=(I.ecModel||{}).scheduler,C=A&&A.getPipeline(I.uid);if(C){var E=C.currentTask;if(E){var O=E.agentStubMap;O&&(E=O.get(I.uid))}return E}}nt.b=q},IsQr:function(je,nt,b){"use strict";var B=b("bPXU"),bt=b("fvwW"),k=b("C9tP"),ft=b("YN2f"),ot=b("ZXNb"),gt=b("GUjm"),lt=b("M8IA"),z=b("pA6B"),X=b("Tukj"),J=ot.o(),at=Object(z.a)(),F=function(){function et(){this.group=new bt.a,this.uid=k.c("viewChart"),this.renderTask=Object(lt.a)({plan:ht,reset:q}),this.renderTask.context={view:this}}return et.prototype.init=function($,N){},et.prototype.render=function($,N,Y,K){},et.prototype.highlight=function($,N,Y,K){var V=$.getData(K&&K.dataType);!V||W(V,K,"emphasis")},et.prototype.downplay=function($,N,Y,K){var V=$.getData(K&&K.dataType);!V||W(V,K,"normal")},et.prototype.remove=function($,N){this.group.removeAll()},et.prototype.dispose=function($,N){},et.prototype.updateView=function($,N,Y,K){this.render($,N,Y,K)},et.prototype.updateLayout=function($,N,Y,K){this.render($,N,Y,K)},et.prototype.updateVisual=function($,N,Y,K){this.render($,N,Y,K)},et.prototype.eachRendered=function($){Object(X.traverseElements)(this.group,$)},et.markUpdateMethod=function($,N){J($).updateMethod=N},et.protoInitialize=function(){var $=et.prototype;$.type="chart"}(),et}();function Z(et,$,N){et&&Object(gt.y)(et)&&($==="emphasis"?gt.r:gt.C)(et,N)}function W(et,$,N){var Y=ot.u(et,$),K=$&&$.highlightKey!=null?Object(gt.v)($.highlightKey):null;Y!=null?Object(B.k)(ot.r(Y),function(V){Z(et.getItemGraphicEl(V),N,K)}):et.eachItemGraphicEl(function(V){Z(V,N,K)})}ft.b(F,["dispose"]),ft.c(F);function ht(et){return at(et.model)}function q(et){var $=et.model,N=et.ecModel,Y=et.api,K=et.payload,V=$.pipelineContext.progressiveRender,G=et.view,I=K&&J(K).updateMethod,A=V?"incrementalPrepareRender":I&&G[I]?I:"render";return A!=="render"&&G[A]($,N,Y,K),g[A]}var g={incrementalPrepareRender:{progress:function(et,$){$.view.incrementalRender(et,$.model,$.ecModel,$.api,$.payload)}},render:{forceFirstProgress:!0,progress:function(et,$){$.view.render($.model,$.ecModel,$.api,$.payload)}}};nt.a=F},IyL0:function(je,nt,b){"use strict";b.d(nt,"a",function(){return Z}),b.d(nt,"b",function(){return W}),b.d(nt,"f",function(){return ht}),b.d(nt,"c",function(){return q}),b.d(nt,"g",function(){return g}),b.d(nt,"e",function(){return et}),b.d(nt,"d",function(){return $}),b.d(nt,"h",function(){return N}),b.d(nt,"i",function(){return Y}),b.d(nt,"m",function(){return K}),b.d(nt,"j",function(){return V}),b.d(nt,"n",function(){return G}),b.d(nt,"l",function(){return I}),b.d(nt,"k",function(){return A});var B=b("FLFE"),bt=Math.pow,k=Math.sqrt,ft=1e-8,ot=1e-4,gt=k(3),lt=1/3,z=Object(B.e)(),X=Object(B.e)(),J=Object(B.e)();function at(C){return C>-ft&&C<ft}function F(C){return C>ft||C<-ft}function Z(C,E,O,M,L){var H=1-L;return H*H*(H*C+3*L*E)+L*L*(L*M+3*H*O)}function W(C,E,O,M,L){var H=1-L;return 3*(((E-C)*H+2*(O-E)*L)*H+(M-O)*L*L)}function ht(C,E,O,M,L,H){var U=M+3*(E-O)-C,ct=3*(O-E*2+C),st=3*(E-C),vt=C-L,it=ct*ct-3*U*st,dt=ct*st-9*U*vt,St=st*st-3*ct*vt,ut=0;if(at(it)&&at(dt))if(at(ct))H[0]=0;else{var yt=-st/ct;yt>=0&&yt<=1&&(H[ut++]=yt)}else{var Ot=dt*dt-4*it*St;if(at(Ot)){var At=dt/it,yt=-ct/U+At,It=-At/2;yt>=0&&yt<=1&&(H[ut++]=yt),It>=0&&It<=1&&(H[ut++]=It)}else if(Ot>0){var Ct=k(Ot),Ft=it*ct+1.5*U*(-dt+Ct),zt=it*ct+1.5*U*(-dt-Ct);Ft<0?Ft=-bt(-Ft,lt):Ft=bt(Ft,lt),zt<0?zt=-bt(-zt,lt):zt=bt(zt,lt);var yt=(-ct-(Ft+zt))/(3*U);yt>=0&&yt<=1&&(H[ut++]=yt)}else{var Xt=(2*it*ct-3*U*dt)/(2*k(it*it*it)),ie=Math.acos(Xt)/3,oe=k(it),he=Math.cos(ie),yt=(-ct-2*oe*he)/(3*U),It=(-ct+oe*(he+gt*Math.sin(ie)))/(3*U),be=(-ct+oe*(he-gt*Math.sin(ie)))/(3*U);yt>=0&&yt<=1&&(H[ut++]=yt),It>=0&&It<=1&&(H[ut++]=It),be>=0&&be<=1&&(H[ut++]=be)}}return ut}function q(C,E,O,M,L){var H=6*O-12*E+6*C,U=9*E+3*M-3*C-9*O,ct=3*E-3*C,st=0;if(at(U)){if(F(H)){var vt=-ct/H;vt>=0&&vt<=1&&(L[st++]=vt)}}else{var it=H*H-4*U*ct;if(at(it))L[0]=-H/(2*U);else if(it>0){var dt=k(it),vt=(-H+dt)/(2*U),St=(-H-dt)/(2*U);vt>=0&&vt<=1&&(L[st++]=vt),St>=0&&St<=1&&(L[st++]=St)}}return st}function g(C,E,O,M,L,H){var U=(E-C)*L+C,ct=(O-E)*L+E,st=(M-O)*L+O,vt=(ct-U)*L+U,it=(st-ct)*L+ct,dt=(it-vt)*L+vt;H[0]=C,H[1]=U,H[2]=vt,H[3]=dt,H[4]=dt,H[5]=it,H[6]=st,H[7]=M}function et(C,E,O,M,L,H,U,ct,st,vt,it){var dt,St=.005,ut=Infinity,yt,Ot,At,It;z[0]=st,z[1]=vt;for(var Ct=0;Ct<1;Ct+=.05)X[0]=Z(C,O,L,U,Ct),X[1]=Z(E,M,H,ct,Ct),At=Object(B.g)(z,X),At<ut&&(dt=Ct,ut=At);ut=Infinity;for(var Ft=0;Ft<32&&!(St<ot);Ft++)yt=dt-St,Ot=dt+St,X[0]=Z(C,O,L,U,yt),X[1]=Z(E,M,H,ct,yt),At=Object(B.g)(X,z),yt>=0&&At<ut?(dt=yt,ut=At):(J[0]=Z(C,O,L,U,Ot),J[1]=Z(E,M,H,ct,Ot),It=Object(B.g)(J,z),Ot<=1&&It<ut?(dt=Ot,ut=It):St*=.5);return it&&(it[0]=Z(C,O,L,U,dt),it[1]=Z(E,M,H,ct,dt)),k(ut)}function $(C,E,O,M,L,H,U,ct,st){for(var vt=C,it=E,dt=0,St=1/st,ut=1;ut<=st;ut++){var yt=ut*St,Ot=Z(C,O,L,U,yt),At=Z(E,M,H,ct,yt),It=Ot-vt,Ct=At-it;dt+=Math.sqrt(It*It+Ct*Ct),vt=Ot,it=At}return dt}function N(C,E,O,M){var L=1-M;return L*(L*C+2*M*E)+M*M*O}function Y(C,E,O,M){return 2*((1-M)*(E-C)+M*(O-E))}function K(C,E,O,M,L){var H=C-2*E+O,U=2*(E-C),ct=C-M,st=0;if(at(H)){if(F(U)){var vt=-ct/U;vt>=0&&vt<=1&&(L[st++]=vt)}}else{var it=U*U-4*H*ct;if(at(it)){var vt=-U/(2*H);vt>=0&&vt<=1&&(L[st++]=vt)}else if(it>0){var dt=k(it),vt=(-U+dt)/(2*H),St=(-U-dt)/(2*H);vt>=0&&vt<=1&&(L[st++]=vt),St>=0&&St<=1&&(L[st++]=St)}}return st}function V(C,E,O){var M=C+O-2*E;return M===0?.5:(C-E)/M}function G(C,E,O,M,L){var H=(E-C)*M+C,U=(O-E)*M+E,ct=(U-H)*M+H;L[0]=C,L[1]=H,L[2]=ct,L[3]=ct,L[4]=U,L[5]=O}function I(C,E,O,M,L,H,U,ct,st){var vt,it=.005,dt=Infinity;z[0]=U,z[1]=ct;for(var St=0;St<1;St+=.05){X[0]=N(C,O,L,St),X[1]=N(E,M,H,St);var ut=Object(B.g)(z,X);ut<dt&&(vt=St,dt=ut)}dt=Infinity;for(var yt=0;yt<32&&!(it<ot);yt++){var Ot=vt-it,At=vt+it;X[0]=N(C,O,L,Ot),X[1]=N(E,M,H,Ot);var ut=Object(B.g)(X,z);if(Ot>=0&&ut<dt)vt=Ot,dt=ut;else{J[0]=N(C,O,L,At),J[1]=N(E,M,H,At);var It=Object(B.g)(J,z);At<=1&&It<dt?(vt=At,dt=It):it*=.5}}return st&&(st[0]=N(C,O,L,vt),st[1]=N(E,M,H,vt)),k(dt)}function A(C,E,O,M,L,H,U){for(var ct=C,st=E,vt=0,it=1/U,dt=1;dt<=U;dt++){var St=dt*it,ut=N(C,O,L,St),yt=N(E,M,H,St),Ot=ut-ct,At=yt-st;vt+=Math.sqrt(Ot*Ot+At*At),ct=ut,st=yt}return vt}},J94c:function(je,nt,b){"use strict";var B=b("bPXU"),bt=b("PWZQ"),k=b("FI5o"),ft=b("Jx7q"),ot=b("PFVZ"),gt=b("8zGM"),lt=b("BkaA"),z=b("ZXNb"),X=b("+aTT"),J=b("iYbX"),at=b("zm8D"),F=b("xrhB"),Z=B.A,W=B.H,ht=typeof Int32Array=="undefined"?Array:Int32Array,q="e\0\0",g=-1,et=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],$=["_approximateExtent"],N,Y,K,V,G,I,A,C=function(){function E(O,M){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var L,H=!1;Object(F.d)(O)?(L=O.dimensions,this._dimOmitted=O.isDimensionOmitted(),this._schema=O):(H=!0,L=O),L=L||["x","y"];for(var U={},ct=[],st={},vt=!1,it={},dt=0;dt<L.length;dt++){var St=L[dt],ut=B.C(St)?new gt.a({name:St}):St instanceof gt.a?St:new gt.a(St),yt=ut.name;ut.type=ut.type||"float",ut.coordDim||(ut.coordDim=yt,ut.coordDimIndex=0);var Ot=ut.otherDims=ut.otherDims||{};ct.push(yt),U[yt]=ut,it[yt]!=null&&(vt=!0),ut.createInvertedIndices&&(st[yt]=[]),Ot.itemName===0&&(this._nameDimIdx=dt),Ot.itemId===0&&(this._idDimIdx=dt),H&&(ut.storeDimIndex=dt)}if(this.dimensions=ct,this._dimInfos=U,this._initGetDimensionInfo(vt),this.hostModel=M,this._invertedIndicesMap=st,this._dimOmitted){var At=this._dimIdxToName=B.f();B.k(ct,function(It){At.set(U[It].storeDimIndex,It)})}}return E.prototype.getDimension=function(O){var M=this._recognizeDimIndex(O);if(M==null)return O;if(M=O,!this._dimOmitted)return this.dimensions[M];var L=this._dimIdxToName.get(M);if(L!=null)return L;var H=this._schema.getSourceDimension(M);if(H)return H.name},E.prototype.getDimensionIndex=function(O){var M=this._recognizeDimIndex(O);if(M!=null)return M;if(O==null)return-1;var L=this._getDimInfo(O);return L?L.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(O):-1},E.prototype._recognizeDimIndex=function(O){if(B.z(O)||O!=null&&!isNaN(O)&&!this._getDimInfo(O)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(O)<0))return+O},E.prototype._getStoreDimIndex=function(O){var M=this.getDimensionIndex(O);return M},E.prototype.getDimensionInfo=function(O){return this._getDimInfo(this.getDimension(O))},E.prototype._initGetDimensionInfo=function(O){var M=this._dimInfos;this._getDimInfo=O?function(L){return M.hasOwnProperty(L)?M[L]:void 0}:function(L){return M[L]}},E.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},E.prototype.mapDimension=function(O,M){var L=this._dimSummary;if(M==null)return L.encodeFirstDimNotExtra[O];var H=L.encode[O];return H?H[M]:null},E.prototype.mapDimensionsAll=function(O){var M=this._dimSummary,L=M.encode[O];return(L||[]).slice()},E.prototype.getStore=function(){return this._store},E.prototype.initData=function(O,M,L){var H=this,U;if(O instanceof at.b&&(U=O),!U){var ct=this.dimensions,st=Object(J.e)(O)||B.u(O)?new ft.a(O,ct.length):O;U=new at.b;var vt=W(ct,function(it){return{type:H._dimInfos[it].type,property:it}});U.initData(st,vt,L)}this._store=U,this._nameList=(M||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,U.count()),this._dimSummary=Object(ot.b)(this,this._schema),this.userOutput=this._dimSummary.userOutput},E.prototype.appendData=function(O){var M=this._store.appendData(O);this._doInit(M[0],M[1])},E.prototype.appendValues=function(O,M){var L=this._store.appendValues(O,M.length),H=L.start,U=L.end,ct=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),M)for(var st=H;st<U;st++){var vt=st-H;this._nameList[st]=M[vt],ct&&A(this,st)}},E.prototype._updateOrdinalMeta=function(){for(var O=this._store,M=this.dimensions,L=0;L<M.length;L++){var H=this._dimInfos[M[L]];H.ordinalMeta&&O.collectOrdinalMeta(H.storeDimIndex,H.ordinalMeta)}},E.prototype._shouldMakeIdFromName=function(){var O=this._store.getProvider();return this._idDimIdx==null&&O.getSource().sourceFormat!==lt.g&&!O.fillStorage},E.prototype._doInit=function(O,M){if(!(O>=M)){var L=this._store,H=L.getProvider();this._updateOrdinalMeta();var U=this._nameList,ct=this._idList,st=H.getSource().sourceFormat,vt=st===lt.f;if(vt&&!H.pure)for(var it=[],dt=O;dt<M;dt++){var St=H.getItem(dt,it);if(!this.hasItemOption&&Object(z.m)(St)&&(this.hasItemOption=!0),St){var ut=St.name;U[dt]==null&&ut!=null&&(U[dt]=Object(z.e)(ut,null));var yt=St.id;ct[dt]==null&&yt!=null&&(ct[dt]=Object(z.e)(yt,null))}}if(this._shouldMakeIdFromName())for(var dt=O;dt<M;dt++)A(this,dt);N(this)}},E.prototype.getApproximateExtent=function(O){return this._approximateExtent[O]||this._store.getDataExtent(this._getStoreDimIndex(O))},E.prototype.setApproximateExtent=function(O,M){M=this.getDimension(M),this._approximateExtent[M]=O.slice()},E.prototype.getCalculationInfo=function(O){return this._calculationInfo[O]},E.prototype.setCalculationInfo=function(O,M){Z(O)?B.m(this._calculationInfo,O):this._calculationInfo[O]=M},E.prototype.getName=function(O){var M=this.getRawIndex(O),L=this._nameList[M];return L==null&&this._nameDimIdx!=null&&(L=K(this,this._nameDimIdx,M)),L==null&&(L=""),L},E.prototype._getCategory=function(O,M){var L=this._store.get(O,M),H=this._store.getOrdinalMeta(O);return H?H.categories[L]:L},E.prototype.getId=function(O){return Y(this,this.getRawIndex(O))},E.prototype.count=function(){return this._store.count()},E.prototype.get=function(O,M){var L=this._store,H=this._dimInfos[O];if(H)return L.get(H.storeDimIndex,M)},E.prototype.getByRawIndex=function(O,M){var L=this._store,H=this._dimInfos[O];if(H)return L.getByRawIndex(H.storeDimIndex,M)},E.prototype.getIndices=function(){return this._store.getIndices()},E.prototype.getDataExtent=function(O){return this._store.getDataExtent(this._getStoreDimIndex(O))},E.prototype.getSum=function(O){return this._store.getSum(this._getStoreDimIndex(O))},E.prototype.getMedian=function(O){return this._store.getMedian(this._getStoreDimIndex(O))},E.prototype.getValues=function(O,M){var L=this,H=this._store;return B.t(O)?H.getValues(W(O,function(U){return L._getStoreDimIndex(U)}),M):H.getValues(O)},E.prototype.hasValue=function(O){for(var M=this._dimSummary.dataDimIndicesOnCoord,L=0,H=M.length;L<H;L++)if(isNaN(this._store.get(M[L],O)))return!1;return!0},E.prototype.indexOfName=function(O){for(var M=0,L=this._store.count();M<L;M++)if(this.getName(M)===O)return M;return-1},E.prototype.getRawIndex=function(O){return this._store.getRawIndex(O)},E.prototype.indexOfRawIndex=function(O){return this._store.indexOfRawIndex(O)},E.prototype.rawIndexOf=function(O,M){var L=O&&this._invertedIndicesMap[O],H=L[M];return H==null||isNaN(H)?g:H},E.prototype.indicesOfNearest=function(O,M,L){return this._store.indicesOfNearest(this._getStoreDimIndex(O),M,L)},E.prototype.each=function(O,M,L){"use strict";B.w(O)&&(L=M,M=O,O=[]);var H=L||this,U=W(V(O),this._getStoreDimIndex,this);this._store.each(U,H?B.c(M,H):M)},E.prototype.filterSelf=function(O,M,L){"use strict";B.w(O)&&(L=M,M=O,O=[]);var H=L||this,U=W(V(O),this._getStoreDimIndex,this);return this._store=this._store.filter(U,H?B.c(M,H):M),this},E.prototype.selectRange=function(O){"use strict";var M=this,L={},H=B.F(O),U=[];return B.k(H,function(ct){var st=M._getStoreDimIndex(ct);L[st]=O[ct],U.push(st)}),this._store=this._store.selectRange(L),this},E.prototype.mapArray=function(O,M,L){"use strict";B.w(O)&&(L=M,M=O,O=[]),L=L||this;var H=[];return this.each(O,function(){H.push(M&&M.apply(this,arguments))},L),H},E.prototype.map=function(O,M,L,H){"use strict";var U=L||H||this,ct=W(V(O),this._getStoreDimIndex,this),st=I(this);return st._store=this._store.map(ct,U?B.c(M,U):M),st},E.prototype.modify=function(O,M,L,H){var U=this,ct=L||H||this,st=W(V(O),this._getStoreDimIndex,this);this._store.modify(st,ct?B.c(M,ct):M)},E.prototype.downSample=function(O,M,L,H){var U=I(this);return U._store=this._store.downSample(this._getStoreDimIndex(O),M,L,H),U},E.prototype.lttbDownSample=function(O,M){var L=I(this);return L._store=this._store.lttbDownSample(this._getStoreDimIndex(O),M),L},E.prototype.getRawDataItem=function(O){return this._store.getRawDataItem(O)},E.prototype.getItemModel=function(O){var M=this.hostModel,L=this.getRawDataItem(O);return new bt.a(L,M,M&&M.ecModel)},E.prototype.diff=function(O){var M=this;return new k.a(O?O.getStore().getIndices():[],this.getStore().getIndices(),function(L){return Y(O,L)},function(L){return Y(M,L)})},E.prototype.getVisual=function(O){var M=this._visual;return M&&M[O]},E.prototype.setVisual=function(O,M){this._visual=this._visual||{},Z(O)?B.m(this._visual,O):this._visual[O]=M},E.prototype.getItemVisual=function(O,M){var L=this._itemVisuals[O],H=L&&L[M];return H==null?this.getVisual(M):H},E.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},E.prototype.ensureUniqueItemVisual=function(O,M){var L=this._itemVisuals,H=L[O];H||(H=L[O]={});var U=H[M];return U==null&&(U=this.getVisual(M),B.t(U)?U=U.slice():Z(U)&&(U=B.m({},U)),H[M]=U),U},E.prototype.setItemVisual=function(O,M,L){var H=this._itemVisuals[O]||{};this._itemVisuals[O]=H,Z(M)?B.m(H,M):H[M]=L},E.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},E.prototype.setLayout=function(O,M){Z(O)?B.m(this._layout,O):this._layout[O]=M},E.prototype.getLayout=function(O){return this._layout[O]},E.prototype.getItemLayout=function(O){return this._itemLayouts[O]},E.prototype.setItemLayout=function(O,M,L){this._itemLayouts[O]=L?B.m(this._itemLayouts[O]||{},M):M},E.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},E.prototype.setItemGraphicEl=function(O,M){var L=this.hostModel&&this.hostModel.seriesIndex;Object(X.b)(L,this.dataType,O,M),this._graphicEls[O]=M},E.prototype.getItemGraphicEl=function(O){return this._graphicEls[O]},E.prototype.eachItemGraphicEl=function(O,M){B.k(this._graphicEls,function(L,H){L&&O&&O.call(M,L,H)})},E.prototype.cloneShallow=function(O){return O||(O=new E(this._schema?this._schema:W(this.dimensions,this._getDimInfo,this),this.hostModel)),G(O,this),O._store=this._store,O},E.prototype.wrapMethod=function(O,M){var L=this[O];!B.w(L)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(O),this[O]=function(){var H=L.apply(this,arguments);return M.apply(this,[H].concat(B.S(arguments)))})},E.internalField=function(){N=function(O){var M=O._invertedIndicesMap;B.k(M,function(L,H){var U=O._dimInfos[H],ct=U.ordinalMeta,st=O._store;if(ct){L=M[H]=new ht(ct.categories.length);for(var vt=0;vt<L.length;vt++)L[vt]=g;for(var vt=0;vt<st.count();vt++)L[st.get(U.storeDimIndex,vt)]=vt}})},K=function(O,M,L){return Object(z.e)(O._getCategory(M,L),null)},Y=function(O,M){var L=O._idList[M];return L==null&&O._idDimIdx!=null&&(L=K(O,O._idDimIdx,M)),L==null&&(L=q+M),L},V=function(O){return B.t(O)||(O=O!=null?[O]:[]),O},I=function(O){var M=new E(O._schema?O._schema:W(O.dimensions,O._getDimInfo,O),O.hostModel);return G(M,O),M},G=function(O,M){B.k(et.concat(M.__wrappedMethods||[]),function(L){M.hasOwnProperty(L)&&(O[L]=M[L])}),O.__wrappedMethods=M.__wrappedMethods,B.k($,function(L){O[L]=B.d(M[L])}),O._calculationInfo=B.m({},M._calculationInfo)},A=function(O,M){var L=O._nameList,H=O._idList,U=O._nameDimIdx,ct=O._idDimIdx,st=L[M],vt=H[M];if(st==null&&U!=null&&(L[M]=st=K(O,U,M)),vt==null&&ct!=null&&(H[M]=vt=K(O,ct,M)),vt==null&&st!=null){var it=O._nameRepeatCount,dt=it[st]=(it[st]||0)+1;vt=st,dt>1&&(vt+="__ec__"+dt),H[M]=vt}}}(),E}();nt.a=C},JFDN:function(je,nt,b){"use strict";var B=b("bPXU"),bt={},k=function(){function ft(){this._coordinateSystems=[]}return ft.prototype.create=function(ot,gt){var lt=[];B.k(bt,function(z,X){var J=z.create(ot,gt);lt=lt.concat(J||[])}),this._coordinateSystems=lt},ft.prototype.update=function(ot,gt){B.k(this._coordinateSystems,function(lt){lt.update&&lt.update(ot,gt)})},ft.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},ft.register=function(ot,gt){bt[ot]=gt},ft.get=function(ot){return bt[ot]},ft}();nt.a=k},JX3P:function(je,nt,b){"use strict";(function(B){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/var bt=b("ykqw"),k=b("/IPs"),ft=b("8knM");nt.Buffer=z,nt.SlowBuffer=et,nt.INSPECT_MAX_BYTES=50,z.TYPED_ARRAY_SUPPORT=B.TYPED_ARRAY_SUPPORT!==void 0?B.TYPED_ARRAY_SUPPORT:ot(),nt.kMaxLength=gt();function ot(){try{var Bt=new Uint8Array(1);return Bt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Bt.foo()===42&&typeof Bt.subarray=="function"&&Bt.subarray(1,1).byteLength===0}catch(Tt){return!1}}function gt(){return z.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function lt(Bt,Tt){if(gt()<Tt)throw new RangeError("Invalid typed array length");return z.TYPED_ARRAY_SUPPORT?(Bt=new Uint8Array(Tt),Bt.__proto__=z.prototype):(Bt===null&&(Bt=new z(Tt)),Bt.length=Tt),Bt}function z(Bt,Tt,Mt){if(!z.TYPED_ARRAY_SUPPORT&&!(this instanceof z))return new z(Bt,Tt,Mt);if(typeof Bt=="number"){if(typeof Tt=="string")throw new Error("If encoding is specified then the first argument must be a string");return F(this,Bt)}return X(this,Bt,Tt,Mt)}z.poolSize=8192,z._augment=function(Bt){return Bt.__proto__=z.prototype,Bt};function X(Bt,Tt,Mt,Ut){if(typeof Tt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&Tt instanceof ArrayBuffer?ht(Bt,Tt,Mt,Ut):typeof Tt=="string"?Z(Bt,Tt,Mt):q(Bt,Tt)}z.from=function(Bt,Tt,Mt){return X(null,Bt,Tt,Mt)},z.TYPED_ARRAY_SUPPORT&&(z.prototype.__proto__=Uint8Array.prototype,z.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&z[Symbol.species]===z&&Object.defineProperty(z,Symbol.species,{value:null,configurable:!0}));function J(Bt){if(typeof Bt!="number")throw new TypeError('"size" argument must be a number');if(Bt<0)throw new RangeError('"size" argument must not be negative')}function at(Bt,Tt,Mt,Ut){return J(Tt),Tt<=0?lt(Bt,Tt):Mt!==void 0?typeof Ut=="string"?lt(Bt,Tt).fill(Mt,Ut):lt(Bt,Tt).fill(Mt):lt(Bt,Tt)}z.alloc=function(Bt,Tt,Mt){return at(null,Bt,Tt,Mt)};function F(Bt,Tt){if(J(Tt),Bt=lt(Bt,Tt<0?0:g(Tt)|0),!z.TYPED_ARRAY_SUPPORT)for(var Mt=0;Mt<Tt;++Mt)Bt[Mt]=0;return Bt}z.allocUnsafe=function(Bt){return F(null,Bt)},z.allocUnsafeSlow=function(Bt){return F(null,Bt)};function Z(Bt,Tt,Mt){if((typeof Mt!="string"||Mt==="")&&(Mt="utf8"),!z.isEncoding(Mt))throw new TypeError('"encoding" must be a valid string encoding');var Ut=$(Tt,Mt)|0;Bt=lt(Bt,Ut);var se=Bt.write(Tt,Mt);return se!==Ut&&(Bt=Bt.slice(0,se)),Bt}function W(Bt,Tt){var Mt=Tt.length<0?0:g(Tt.length)|0;Bt=lt(Bt,Mt);for(var Ut=0;Ut<Mt;Ut+=1)Bt[Ut]=Tt[Ut]&255;return Bt}function ht(Bt,Tt,Mt,Ut){if(Tt.byteLength,Mt<0||Tt.byteLength<Mt)throw new RangeError("'offset' is out of bounds");if(Tt.byteLength<Mt+(Ut||0))throw new RangeError("'length' is out of bounds");return Mt===void 0&&Ut===void 0?Tt=new Uint8Array(Tt):Ut===void 0?Tt=new Uint8Array(Tt,Mt):Tt=new Uint8Array(Tt,Mt,Ut),z.TYPED_ARRAY_SUPPORT?(Bt=Tt,Bt.__proto__=z.prototype):Bt=W(Bt,Tt),Bt}function q(Bt,Tt){if(z.isBuffer(Tt)){var Mt=g(Tt.length)|0;return Bt=lt(Bt,Mt),Bt.length===0||Tt.copy(Bt,0,0,Mt),Bt}if(Tt){if(typeof ArrayBuffer!="undefined"&&Tt.buffer instanceof ArrayBuffer||"length"in Tt)return typeof Tt.length!="number"||Fe(Tt.length)?lt(Bt,0):W(Bt,Tt);if(Tt.type==="Buffer"&&ft(Tt.data))return W(Bt,Tt.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(Bt){if(Bt>=gt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gt().toString(16)+" bytes");return Bt|0}function et(Bt){return+Bt!=Bt&&(Bt=0),z.alloc(+Bt)}z.isBuffer=function(Tt){return!!(Tt!=null&&Tt._isBuffer)},z.compare=function(Tt,Mt){if(!z.isBuffer(Tt)||!z.isBuffer(Mt))throw new TypeError("Arguments must be Buffers");if(Tt===Mt)return 0;for(var Ut=Tt.length,se=Mt.length,ge=0,He=Math.min(Ut,se);ge<He;++ge)if(Tt[ge]!==Mt[ge]){Ut=Tt[ge],se=Mt[ge];break}return Ut<se?-1:se<Ut?1:0},z.isEncoding=function(Tt){switch(String(Tt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},z.concat=function(Tt,Mt){if(!ft(Tt))throw new TypeError('"list" argument must be an Array of Buffers');if(Tt.length===0)return z.alloc(0);var Ut;if(Mt===void 0)for(Mt=0,Ut=0;Ut<Tt.length;++Ut)Mt+=Tt[Ut].length;var se=z.allocUnsafe(Mt),ge=0;for(Ut=0;Ut<Tt.length;++Ut){var He=Tt[Ut];if(!z.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(se,ge),ge+=He.length}return se};function $(Bt,Tt){if(z.isBuffer(Bt))return Bt.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Bt)||Bt instanceof ArrayBuffer))return Bt.byteLength;typeof Bt!="string"&&(Bt=""+Bt);var Mt=Bt.length;if(Mt===0)return 0;for(var Ut=!1;;)switch(Tt){case"ascii":case"latin1":case"binary":return Mt;case"utf8":case"utf-8":case void 0:return ie(Bt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mt*2;case"hex":return Mt>>>1;case"base64":return be(Bt).length;default:if(Ut)return ie(Bt).length;Tt=(""+Tt).toLowerCase(),Ut=!0}}z.byteLength=$;function N(Bt,Tt,Mt){var Ut=!1;if((Tt===void 0||Tt<0)&&(Tt=0),Tt>this.length||((Mt===void 0||Mt>this.length)&&(Mt=this.length),Mt<=0)||(Mt>>>=0,Tt>>>=0,Mt<=Tt))return"";for(Bt||(Bt="utf8");;)switch(Bt){case"hex":return vt(this,Tt,Mt);case"utf8":case"utf-8":return L(this,Tt,Mt);case"ascii":return ct(this,Tt,Mt);case"latin1":case"binary":return st(this,Tt,Mt);case"base64":return M(this,Tt,Mt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,Tt,Mt);default:if(Ut)throw new TypeError("Unknown encoding: "+Bt);Bt=(Bt+"").toLowerCase(),Ut=!0}}z.prototype._isBuffer=!0;function Y(Bt,Tt,Mt){var Ut=Bt[Tt];Bt[Tt]=Bt[Mt],Bt[Mt]=Ut}z.prototype.swap16=function(){var Tt=this.length;if(Tt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Mt=0;Mt<Tt;Mt+=2)Y(this,Mt,Mt+1);return this},z.prototype.swap32=function(){var Tt=this.length;if(Tt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Mt=0;Mt<Tt;Mt+=4)Y(this,Mt,Mt+3),Y(this,Mt+1,Mt+2);return this},z.prototype.swap64=function(){var Tt=this.length;if(Tt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Mt=0;Mt<Tt;Mt+=8)Y(this,Mt,Mt+7),Y(this,Mt+1,Mt+6),Y(this,Mt+2,Mt+5),Y(this,Mt+3,Mt+4);return this},z.prototype.toString=function(){var Tt=this.length|0;return Tt===0?"":arguments.length===0?L(this,0,Tt):N.apply(this,arguments)},z.prototype.equals=function(Tt){if(!z.isBuffer(Tt))throw new TypeError("Argument must be a Buffer");return this===Tt?!0:z.compare(this,Tt)===0},z.prototype.inspect=function(){var Tt="",Mt=nt.INSPECT_MAX_BYTES;return this.length>0&&(Tt=this.toString("hex",0,Mt).match(/.{2}/g).join(" "),this.length>Mt&&(Tt+=" ... ")),"<Buffer "+Tt+">"},z.prototype.compare=function(Tt,Mt,Ut,se,ge){if(!z.isBuffer(Tt))throw new TypeError("Argument must be a Buffer");if(Mt===void 0&&(Mt=0),Ut===void 0&&(Ut=Tt?Tt.length:0),se===void 0&&(se=0),ge===void 0&&(ge=this.length),Mt<0||Ut>Tt.length||se<0||ge>this.length)throw new RangeError("out of range index");if(se>=ge&&Mt>=Ut)return 0;if(se>=ge)return-1;if(Mt>=Ut)return 1;if(Mt>>>=0,Ut>>>=0,se>>>=0,ge>>>=0,this===Tt)return 0;for(var He=ge-se,Me=Ut-Mt,We=Math.min(He,Me),Ke=this.slice(se,ge),qe=Tt.slice(Mt,Ut),Qt=0;Qt<We;++Qt)if(Ke[Qt]!==qe[Qt]){He=Ke[Qt],Me=qe[Qt];break}return He<Me?-1:Me<He?1:0};function K(Bt,Tt,Mt,Ut,se){if(Bt.length===0)return-1;if(typeof Mt=="string"?(Ut=Mt,Mt=0):Mt>2147483647?Mt=2147483647:Mt<-2147483648&&(Mt=-2147483648),Mt=+Mt,isNaN(Mt)&&(Mt=se?0:Bt.length-1),Mt<0&&(Mt=Bt.length+Mt),Mt>=Bt.length){if(se)return-1;Mt=Bt.length-1}else if(Mt<0)if(se)Mt=0;else return-1;if(typeof Tt=="string"&&(Tt=z.from(Tt,Ut)),z.isBuffer(Tt))return Tt.length===0?-1:V(Bt,Tt,Mt,Ut,se);if(typeof Tt=="number")return Tt=Tt&255,z.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(Bt,Tt,Mt):Uint8Array.prototype.lastIndexOf.call(Bt,Tt,Mt):V(Bt,[Tt],Mt,Ut,se);throw new TypeError("val must be string, number or Buffer")}function V(Bt,Tt,Mt,Ut,se){var ge=1,He=Bt.length,Me=Tt.length;if(Ut!==void 0&&(Ut=String(Ut).toLowerCase(),Ut==="ucs2"||Ut==="ucs-2"||Ut==="utf16le"||Ut==="utf-16le")){if(Bt.length<2||Tt.length<2)return-1;ge=2,He/=2,Me/=2,Mt/=2}function We(Ve,Ie){return ge===1?Ve[Ie]:Ve.readUInt16BE(Ie*ge)}var Ke;if(se){var qe=-1;for(Ke=Mt;Ke<He;Ke++)if(We(Bt,Ke)===We(Tt,qe===-1?0:Ke-qe)){if(qe===-1&&(qe=Ke),Ke-qe+1===Me)return qe*ge}else qe!==-1&&(Ke-=Ke-qe),qe=-1}else for(Mt+Me>He&&(Mt=He-Me),Ke=Mt;Ke>=0;Ke--){for(var Qt=!0,Se=0;Se<Me;Se++)if(We(Bt,Ke+Se)!==We(Tt,Se)){Qt=!1;break}if(Qt)return Ke}return-1}z.prototype.includes=function(Tt,Mt,Ut){return this.indexOf(Tt,Mt,Ut)!==-1},z.prototype.indexOf=function(Tt,Mt,Ut){return K(this,Tt,Mt,Ut,!0)},z.prototype.lastIndexOf=function(Tt,Mt,Ut){return K(this,Tt,Mt,Ut,!1)};function G(Bt,Tt,Mt,Ut){Mt=Number(Mt)||0;var se=Bt.length-Mt;Ut?(Ut=Number(Ut),Ut>se&&(Ut=se)):Ut=se;var ge=Tt.length;if(ge%2!=0)throw new TypeError("Invalid hex string");Ut>ge/2&&(Ut=ge/2);for(var He=0;He<Ut;++He){var Me=parseInt(Tt.substr(He*2,2),16);if(isNaN(Me))return He;Bt[Mt+He]=Me}return He}function I(Bt,Tt,Mt,Ut){return Ce(ie(Tt,Bt.length-Mt),Bt,Mt,Ut)}function A(Bt,Tt,Mt,Ut){return Ce(oe(Tt),Bt,Mt,Ut)}function C(Bt,Tt,Mt,Ut){return A(Bt,Tt,Mt,Ut)}function E(Bt,Tt,Mt,Ut){return Ce(be(Tt),Bt,Mt,Ut)}function O(Bt,Tt,Mt,Ut){return Ce(he(Tt,Bt.length-Mt),Bt,Mt,Ut)}z.prototype.write=function(Tt,Mt,Ut,se){if(Mt===void 0)se="utf8",Ut=this.length,Mt=0;else if(Ut===void 0&&typeof Mt=="string")se=Mt,Ut=this.length,Mt=0;else if(isFinite(Mt))Mt=Mt|0,isFinite(Ut)?(Ut=Ut|0,se===void 0&&(se="utf8")):(se=Ut,Ut=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ge=this.length-Mt;if((Ut===void 0||Ut>ge)&&(Ut=ge),Tt.length>0&&(Ut<0||Mt<0)||Mt>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var He=!1;;)switch(se){case"hex":return G(this,Tt,Mt,Ut);case"utf8":case"utf-8":return I(this,Tt,Mt,Ut);case"ascii":return A(this,Tt,Mt,Ut);case"latin1":case"binary":return C(this,Tt,Mt,Ut);case"base64":return E(this,Tt,Mt,Ut);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,Tt,Mt,Ut);default:if(He)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),He=!0}},z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(Bt,Tt,Mt){return Tt===0&&Mt===Bt.length?bt.fromByteArray(Bt):bt.fromByteArray(Bt.slice(Tt,Mt))}function L(Bt,Tt,Mt){Mt=Math.min(Bt.length,Mt);for(var Ut=[],se=Tt;se<Mt;){var ge=Bt[se],He=null,Me=ge>239?4:ge>223?3:ge>191?2:1;if(se+Me<=Mt){var We,Ke,qe,Qt;switch(Me){case 1:ge<128&&(He=ge);break;case 2:We=Bt[se+1],(We&192)==128&&(Qt=(ge&31)<<6|We&63,Qt>127&&(He=Qt));break;case 3:We=Bt[se+1],Ke=Bt[se+2],(We&192)==128&&(Ke&192)==128&&(Qt=(ge&15)<<12|(We&63)<<6|Ke&63,Qt>2047&&(Qt<55296||Qt>57343)&&(He=Qt));break;case 4:We=Bt[se+1],Ke=Bt[se+2],qe=Bt[se+3],(We&192)==128&&(Ke&192)==128&&(qe&192)==128&&(Qt=(ge&15)<<18|(We&63)<<12|(Ke&63)<<6|qe&63,Qt>65535&&Qt<1114112&&(He=Qt))}}He===null?(He=65533,Me=1):He>65535&&(He-=65536,Ut.push(He>>>10&1023|55296),He=56320|He&1023),Ut.push(He),se+=Me}return U(Ut)}var H=4096;function U(Bt){var Tt=Bt.length;if(Tt<=H)return String.fromCharCode.apply(String,Bt);for(var Mt="",Ut=0;Ut<Tt;)Mt+=String.fromCharCode.apply(String,Bt.slice(Ut,Ut+=H));return Mt}function ct(Bt,Tt,Mt){var Ut="";Mt=Math.min(Bt.length,Mt);for(var se=Tt;se<Mt;++se)Ut+=String.fromCharCode(Bt[se]&127);return Ut}function st(Bt,Tt,Mt){var Ut="";Mt=Math.min(Bt.length,Mt);for(var se=Tt;se<Mt;++se)Ut+=String.fromCharCode(Bt[se]);return Ut}function vt(Bt,Tt,Mt){var Ut=Bt.length;(!Tt||Tt<0)&&(Tt=0),(!Mt||Mt<0||Mt>Ut)&&(Mt=Ut);for(var se="",ge=Tt;ge<Mt;++ge)se+=Xt(Bt[ge]);return se}function it(Bt,Tt,Mt){for(var Ut=Bt.slice(Tt,Mt),se="",ge=0;ge<Ut.length;ge+=2)se+=String.fromCharCode(Ut[ge]+Ut[ge+1]*256);return se}z.prototype.slice=function(Tt,Mt){var Ut=this.length;Tt=~~Tt,Mt=Mt===void 0?Ut:~~Mt,Tt<0?(Tt+=Ut,Tt<0&&(Tt=0)):Tt>Ut&&(Tt=Ut),Mt<0?(Mt+=Ut,Mt<0&&(Mt=0)):Mt>Ut&&(Mt=Ut),Mt<Tt&&(Mt=Tt);var se;if(z.TYPED_ARRAY_SUPPORT)se=this.subarray(Tt,Mt),se.__proto__=z.prototype;else{var ge=Mt-Tt;se=new z(ge,void 0);for(var He=0;He<ge;++He)se[He]=this[He+Tt]}return se};function dt(Bt,Tt,Mt){if(Bt%1!=0||Bt<0)throw new RangeError("offset is not uint");if(Bt+Tt>Mt)throw new RangeError("Trying to access beyond buffer length")}z.prototype.readUIntLE=function(Tt,Mt,Ut){Tt=Tt|0,Mt=Mt|0,Ut||dt(Tt,Mt,this.length);for(var se=this[Tt],ge=1,He=0;++He<Mt&&(ge*=256);)se+=this[Tt+He]*ge;return se},z.prototype.readUIntBE=function(Tt,Mt,Ut){Tt=Tt|0,Mt=Mt|0,Ut||dt(Tt,Mt,this.length);for(var se=this[Tt+--Mt],ge=1;Mt>0&&(ge*=256);)se+=this[Tt+--Mt]*ge;return se},z.prototype.readUInt8=function(Tt,Mt){return Mt||dt(Tt,1,this.length),this[Tt]},z.prototype.readUInt16LE=function(Tt,Mt){return Mt||dt(Tt,2,this.length),this[Tt]|this[Tt+1]<<8},z.prototype.readUInt16BE=function(Tt,Mt){return Mt||dt(Tt,2,this.length),this[Tt]<<8|this[Tt+1]},z.prototype.readUInt32LE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),(this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16)+this[Tt+3]*16777216},z.prototype.readUInt32BE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),this[Tt]*16777216+(this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3])},z.prototype.readIntLE=function(Tt,Mt,Ut){Tt=Tt|0,Mt=Mt|0,Ut||dt(Tt,Mt,this.length);for(var se=this[Tt],ge=1,He=0;++He<Mt&&(ge*=256);)se+=this[Tt+He]*ge;return ge*=128,se>=ge&&(se-=Math.pow(2,8*Mt)),se},z.prototype.readIntBE=function(Tt,Mt,Ut){Tt=Tt|0,Mt=Mt|0,Ut||dt(Tt,Mt,this.length);for(var se=Mt,ge=1,He=this[Tt+--se];se>0&&(ge*=256);)He+=this[Tt+--se]*ge;return ge*=128,He>=ge&&(He-=Math.pow(2,8*Mt)),He},z.prototype.readInt8=function(Tt,Mt){return Mt||dt(Tt,1,this.length),this[Tt]&128?(255-this[Tt]+1)*-1:this[Tt]},z.prototype.readInt16LE=function(Tt,Mt){Mt||dt(Tt,2,this.length);var Ut=this[Tt]|this[Tt+1]<<8;return Ut&32768?Ut|4294901760:Ut},z.prototype.readInt16BE=function(Tt,Mt){Mt||dt(Tt,2,this.length);var Ut=this[Tt+1]|this[Tt]<<8;return Ut&32768?Ut|4294901760:Ut},z.prototype.readInt32LE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16|this[Tt+3]<<24},z.prototype.readInt32BE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),this[Tt]<<24|this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3]},z.prototype.readFloatLE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),k.read(this,Tt,!0,23,4)},z.prototype.readFloatBE=function(Tt,Mt){return Mt||dt(Tt,4,this.length),k.read(this,Tt,!1,23,4)},z.prototype.readDoubleLE=function(Tt,Mt){return Mt||dt(Tt,8,this.length),k.read(this,Tt,!0,52,8)},z.prototype.readDoubleBE=function(Tt,Mt){return Mt||dt(Tt,8,this.length),k.read(this,Tt,!1,52,8)};function St(Bt,Tt,Mt,Ut,se,ge){if(!z.isBuffer(Bt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Tt>se||Tt<ge)throw new RangeError('"value" argument is out of bounds');if(Mt+Ut>Bt.length)throw new RangeError("Index out of range")}z.prototype.writeUIntLE=function(Tt,Mt,Ut,se){if(Tt=+Tt,Mt=Mt|0,Ut=Ut|0,!se){var ge=Math.pow(2,8*Ut)-1;St(this,Tt,Mt,Ut,ge,0)}var He=1,Me=0;for(this[Mt]=Tt&255;++Me<Ut&&(He*=256);)this[Mt+Me]=Tt/He&255;return Mt+Ut},z.prototype.writeUIntBE=function(Tt,Mt,Ut,se){if(Tt=+Tt,Mt=Mt|0,Ut=Ut|0,!se){var ge=Math.pow(2,8*Ut)-1;St(this,Tt,Mt,Ut,ge,0)}var He=Ut-1,Me=1;for(this[Mt+He]=Tt&255;--He>=0&&(Me*=256);)this[Mt+He]=Tt/Me&255;return Mt+Ut},z.prototype.writeUInt8=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,1,255,0),z.TYPED_ARRAY_SUPPORT||(Tt=Math.floor(Tt)),this[Mt]=Tt&255,Mt+1};function ut(Bt,Tt,Mt,Ut){Tt<0&&(Tt=65535+Tt+1);for(var se=0,ge=Math.min(Bt.length-Mt,2);se<ge;++se)Bt[Mt+se]=(Tt&255<<8*(Ut?se:1-se))>>>(Ut?se:1-se)*8}z.prototype.writeUInt16LE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,2,65535,0),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt&255,this[Mt+1]=Tt>>>8):ut(this,Tt,Mt,!0),Mt+2},z.prototype.writeUInt16BE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,2,65535,0),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt>>>8,this[Mt+1]=Tt&255):ut(this,Tt,Mt,!1),Mt+2};function yt(Bt,Tt,Mt,Ut){Tt<0&&(Tt=4294967295+Tt+1);for(var se=0,ge=Math.min(Bt.length-Mt,4);se<ge;++se)Bt[Mt+se]=Tt>>>(Ut?se:3-se)*8&255}z.prototype.writeUInt32LE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,4,4294967295,0),z.TYPED_ARRAY_SUPPORT?(this[Mt+3]=Tt>>>24,this[Mt+2]=Tt>>>16,this[Mt+1]=Tt>>>8,this[Mt]=Tt&255):yt(this,Tt,Mt,!0),Mt+4},z.prototype.writeUInt32BE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,4,4294967295,0),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt>>>24,this[Mt+1]=Tt>>>16,this[Mt+2]=Tt>>>8,this[Mt+3]=Tt&255):yt(this,Tt,Mt,!1),Mt+4},z.prototype.writeIntLE=function(Tt,Mt,Ut,se){if(Tt=+Tt,Mt=Mt|0,!se){var ge=Math.pow(2,8*Ut-1);St(this,Tt,Mt,Ut,ge-1,-ge)}var He=0,Me=1,We=0;for(this[Mt]=Tt&255;++He<Ut&&(Me*=256);)Tt<0&&We===0&&this[Mt+He-1]!==0&&(We=1),this[Mt+He]=(Tt/Me>>0)-We&255;return Mt+Ut},z.prototype.writeIntBE=function(Tt,Mt,Ut,se){if(Tt=+Tt,Mt=Mt|0,!se){var ge=Math.pow(2,8*Ut-1);St(this,Tt,Mt,Ut,ge-1,-ge)}var He=Ut-1,Me=1,We=0;for(this[Mt+He]=Tt&255;--He>=0&&(Me*=256);)Tt<0&&We===0&&this[Mt+He+1]!==0&&(We=1),this[Mt+He]=(Tt/Me>>0)-We&255;return Mt+Ut},z.prototype.writeInt8=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,1,127,-128),z.TYPED_ARRAY_SUPPORT||(Tt=Math.floor(Tt)),Tt<0&&(Tt=255+Tt+1),this[Mt]=Tt&255,Mt+1},z.prototype.writeInt16LE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,2,32767,-32768),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt&255,this[Mt+1]=Tt>>>8):ut(this,Tt,Mt,!0),Mt+2},z.prototype.writeInt16BE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,2,32767,-32768),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt>>>8,this[Mt+1]=Tt&255):ut(this,Tt,Mt,!1),Mt+2},z.prototype.writeInt32LE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,4,2147483647,-2147483648),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt&255,this[Mt+1]=Tt>>>8,this[Mt+2]=Tt>>>16,this[Mt+3]=Tt>>>24):yt(this,Tt,Mt,!0),Mt+4},z.prototype.writeInt32BE=function(Tt,Mt,Ut){return Tt=+Tt,Mt=Mt|0,Ut||St(this,Tt,Mt,4,2147483647,-2147483648),Tt<0&&(Tt=4294967295+Tt+1),z.TYPED_ARRAY_SUPPORT?(this[Mt]=Tt>>>24,this[Mt+1]=Tt>>>16,this[Mt+2]=Tt>>>8,this[Mt+3]=Tt&255):yt(this,Tt,Mt,!1),Mt+4};function Ot(Bt,Tt,Mt,Ut,se,ge){if(Mt+Ut>Bt.length)throw new RangeError("Index out of range");if(Mt<0)throw new RangeError("Index out of range")}function At(Bt,Tt,Mt,Ut,se){return se||Ot(Bt,Tt,Mt,4,34028234663852886e22,-34028234663852886e22),k.write(Bt,Tt,Mt,Ut,23,4),Mt+4}z.prototype.writeFloatLE=function(Tt,Mt,Ut){return At(this,Tt,Mt,!0,Ut)},z.prototype.writeFloatBE=function(Tt,Mt,Ut){return At(this,Tt,Mt,!1,Ut)};function It(Bt,Tt,Mt,Ut,se){return se||Ot(Bt,Tt,Mt,8,17976931348623157e292,-17976931348623157e292),k.write(Bt,Tt,Mt,Ut,52,8),Mt+8}z.prototype.writeDoubleLE=function(Tt,Mt,Ut){return It(this,Tt,Mt,!0,Ut)},z.prototype.writeDoubleBE=function(Tt,Mt,Ut){return It(this,Tt,Mt,!1,Ut)},z.prototype.copy=function(Tt,Mt,Ut,se){if(Ut||(Ut=0),!se&&se!==0&&(se=this.length),Mt>=Tt.length&&(Mt=Tt.length),Mt||(Mt=0),se>0&&se<Ut&&(se=Ut),se===Ut||Tt.length===0||this.length===0)return 0;if(Mt<0)throw new RangeError("targetStart out of bounds");if(Ut<0||Ut>=this.length)throw new RangeError("sourceStart out of bounds");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),Tt.length-Mt<se-Ut&&(se=Tt.length-Mt+Ut);var ge=se-Ut,He;if(this===Tt&&Ut<Mt&&Mt<se)for(He=ge-1;He>=0;--He)Tt[He+Mt]=this[He+Ut];else if(ge<1e3||!z.TYPED_ARRAY_SUPPORT)for(He=0;He<ge;++He)Tt[He+Mt]=this[He+Ut];else Uint8Array.prototype.set.call(Tt,this.subarray(Ut,Ut+ge),Mt);return ge},z.prototype.fill=function(Tt,Mt,Ut,se){if(typeof Tt=="string"){if(typeof Mt=="string"?(se=Mt,Mt=0,Ut=this.length):typeof Ut=="string"&&(se=Ut,Ut=this.length),Tt.length===1){var ge=Tt.charCodeAt(0);ge<256&&(Tt=ge)}if(se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!z.isEncoding(se))throw new TypeError("Unknown encoding: "+se)}else typeof Tt=="number"&&(Tt=Tt&255);if(Mt<0||this.length<Mt||this.length<Ut)throw new RangeError("Out of range index");if(Ut<=Mt)return this;Mt=Mt>>>0,Ut=Ut===void 0?this.length:Ut>>>0,Tt||(Tt=0);var He;if(typeof Tt=="number")for(He=Mt;He<Ut;++He)this[He]=Tt;else{var Me=z.isBuffer(Tt)?Tt:ie(new z(Tt,se).toString()),We=Me.length;for(He=0;He<Ut-Mt;++He)this[He+Mt]=Me[He%We]}return this};var Ct=/[^+\/0-9A-Za-z-_]/g;function Ft(Bt){if(Bt=zt(Bt).replace(Ct,""),Bt.length<2)return"";for(;Bt.length%4!=0;)Bt=Bt+"=";return Bt}function zt(Bt){return Bt.trim?Bt.trim():Bt.replace(/^\s+|\s+$/g,"")}function Xt(Bt){return Bt<16?"0"+Bt.toString(16):Bt.toString(16)}function ie(Bt,Tt){Tt=Tt||Infinity;for(var Mt,Ut=Bt.length,se=null,ge=[],He=0;He<Ut;++He){if(Mt=Bt.charCodeAt(He),Mt>55295&&Mt<57344){if(!se){if(Mt>56319){(Tt-=3)>-1&&ge.push(239,191,189);continue}else if(He+1===Ut){(Tt-=3)>-1&&ge.push(239,191,189);continue}se=Mt;continue}if(Mt<56320){(Tt-=3)>-1&&ge.push(239,191,189),se=Mt;continue}Mt=(se-55296<<10|Mt-56320)+65536}else se&&(Tt-=3)>-1&&ge.push(239,191,189);if(se=null,Mt<128){if((Tt-=1)<0)break;ge.push(Mt)}else if(Mt<2048){if((Tt-=2)<0)break;ge.push(Mt>>6|192,Mt&63|128)}else if(Mt<65536){if((Tt-=3)<0)break;ge.push(Mt>>12|224,Mt>>6&63|128,Mt&63|128)}else if(Mt<1114112){if((Tt-=4)<0)break;ge.push(Mt>>18|240,Mt>>12&63|128,Mt>>6&63|128,Mt&63|128)}else throw new Error("Invalid code point")}return ge}function oe(Bt){for(var Tt=[],Mt=0;Mt<Bt.length;++Mt)Tt.push(Bt.charCodeAt(Mt)&255);return Tt}function he(Bt,Tt){for(var Mt,Ut,se,ge=[],He=0;He<Bt.length&&!((Tt-=2)<0);++He)Mt=Bt.charCodeAt(He),Ut=Mt>>8,se=Mt%256,ge.push(se),ge.push(Ut);return ge}function be(Bt){return bt.toByteArray(Ft(Bt))}function Ce(Bt,Tt,Mt,Ut){for(var se=0;se<Ut&&!(se+Mt>=Tt.length||se>=Bt.length);++se)Tt[se+Mt]=Bt[se];return se}function Fe(Bt){return Bt!==Bt}}).call(this,b("QLrv"))},Ju5J:function(je,nt,b){"use strict";b.d(nt,"b",function(){return X}),b.d(nt,"e",function(){return J}),b.d(nt,"d",function(){return F}),b.d(nt,"f",function(){return W}),b.d(nt,"c",function(){return ht}),b.d(nt,"a",function(){return q});var B=b("bPXU"),bt=b("7M1A"),k=b("70Nz"),ft=b("pA6B"),ot=b("Y8C1"),gt="__ec_stack_";function lt(N){return N.get("stack")||gt+N.seriesIndex}function z(N){return N.dim+N.index}function X(N){var Y=[],K=N.axis,V="axis0";if(K.type==="category"){for(var G=K.getBandWidth(),I=0;I<N.count;I++)Y.push(Object(B.i)({bandWidth:G,axisKey:V,stackId:gt+I},N));for(var A=Z(Y),C=[],I=0;I<N.count;I++){var E=A[V][gt+I];E.offsetCenter=E.offset+E.width/2,C.push(E)}return C}}function J(N,Y){var K=[];return Y.eachSeriesByType(N,function(V){g(V)&&K.push(V)}),K}function at(N){var Y={};Object(B.k)(N,function(E){var O=E.coordinateSystem,M=O.getBaseAxis();if(!(M.type!=="time"&&M.type!=="value"))for(var L=E.getData(),H=M.dim+"_"+M.index,U=L.getDimensionIndex(L.mapDimension(M.dim)),ct=L.getStore(),st=0,vt=ct.count();st<vt;++st){var it=ct.get(U,st);Y[H]?Y[H].push(it):Y[H]=[it]}});var K={};for(var V in Y)if(Y.hasOwnProperty(V)){var G=Y[V];if(G){G.sort(function(E,O){return E-O});for(var I=null,A=1;A<G.length;++A){var C=G[A]-G[A-1];C>0&&(I=I===null?C:Math.min(I,C))}K[V]=I}}return K}function F(N){var Y=at(N),K=[];return Object(B.k)(N,function(V){var G=V.coordinateSystem,I=G.getBaseAxis(),A=I.getExtent(),C;if(I.type==="category")C=I.getBandWidth();else if(I.type==="value"||I.type==="time"){var E=I.dim+"_"+I.index,O=Y[E],M=Math.abs(A[1]-A[0]),L=I.scale.getExtent(),H=Math.abs(L[1]-L[0]);C=O?M/H*O:M}else{var U=V.getData();C=Math.abs(A[1]-A[0])/U.count()}var ct=Object(bt.p)(V.get("barWidth"),C),st=Object(bt.p)(V.get("barMaxWidth"),C),vt=Object(bt.p)(V.get("barMinWidth")||(et(V)?.5:1),C),it=V.get("barGap"),dt=V.get("barCategoryGap");K.push({bandWidth:C,barWidth:ct,barMaxWidth:st,barMinWidth:vt,barGap:it,barCategoryGap:dt,axisKey:z(I),stackId:lt(V)})}),Z(K)}function Z(N){var Y={};Object(B.k)(N,function(V,G){var I=V.axisKey,A=V.bandWidth,C=Y[I]||{bandWidth:A,remainedWidth:A,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},E=C.stacks;Y[I]=C;var O=V.stackId;E[O]||C.autoWidthCount++,E[O]=E[O]||{width:0,maxWidth:0};var M=V.barWidth;M&&!E[O].width&&(E[O].width=M,M=Math.min(C.remainedWidth,M),C.remainedWidth-=M);var L=V.barMaxWidth;L&&(E[O].maxWidth=L);var H=V.barMinWidth;H&&(E[O].minWidth=H);var U=V.barGap;U!=null&&(C.gap=U);var ct=V.barCategoryGap;ct!=null&&(C.categoryGap=ct)});var K={};return Object(B.k)(Y,function(V,G){K[G]={};var I=V.stacks,A=V.bandWidth,C=V.categoryGap;if(C==null){var E=Object(B.F)(I).length;C=Math.max(35-E*4,15)+"%"}var O=Object(bt.p)(C,A),M=Object(bt.p)(V.gap,1),L=V.remainedWidth,H=V.autoWidthCount,U=(L-O)/(H+(H-1)*M);U=Math.max(U,0),Object(B.k)(I,function(it){var dt=it.maxWidth,St=it.minWidth;if(it.width){var ut=it.width;dt&&(ut=Math.min(ut,dt)),St&&(ut=Math.max(ut,St)),it.width=ut,L-=ut+M*ut,H--}else{var ut=U;dt&&dt<ut&&(ut=Math.min(dt,L)),St&&St>ut&&(ut=St),ut!==U&&(it.width=ut,L-=ut+M*ut,H--)}}),U=(L-O)/(H+(H-1)*M),U=Math.max(U,0);var ct=0,st;Object(B.k)(I,function(it,dt){it.width||(it.width=U),st=it,ct+=it.width*(1+M)}),st&&(ct-=st.width*M);var vt=-ct/2;Object(B.k)(I,function(it,dt){K[G][dt]=K[G][dt]||{bandWidth:A,offset:vt,width:it.width},vt+=it.width*(1+M)})}),K}function W(N,Y,K){if(N&&Y){var V=N[z(Y)];return V!=null&&K!=null?V[lt(K)]:V}}function ht(N,Y){var K=J(N,Y),V=F(K);Object(B.k)(K,function(G){var I=G.getData(),A=G.coordinateSystem,C=A.getBaseAxis(),E=lt(G),O=V[z(C)][E],M=O.offset,L=O.width;I.setLayout({bandWidth:O.bandWidth,offset:M,size:L})})}function q(N){return{seriesType:N,plan:Object(ft.a)(),reset:function(Y){if(!!g(Y)){var K=Y.getData(),V=Y.coordinateSystem,G=V.getBaseAxis(),I=V.getOtherAxis(G),A=K.getDimensionIndex(K.mapDimension(I.dim)),C=K.getDimensionIndex(K.mapDimension(G.dim)),E=Y.get("showBackground",!0),O=K.mapDimension(I.dim),M=K.getCalculationInfo("stackResultDimension"),L=Object(k.c)(K,O)&&!!K.getCalculationInfo("stackedOnSeries"),H=I.isHorizontal(),U=$(G,I),ct=et(Y),st=Y.get("barMinHeight")||0,vt=M&&K.getDimensionIndex(M),it=K.getLayout("size"),dt=K.getLayout("offset");return{progress:function(St,ut){for(var yt=St.count,Ot=ct&&Object(ot.a)(yt*3),At=ct&&E&&Object(ot.a)(yt*3),It=ct&&Object(ot.a)(yt),Ct=V.master.getRect(),Ft=H?Ct.width:Ct.height,zt,Xt=ut.getStore(),ie=0;(zt=St.next())!=null;){var oe=Xt.get(L?vt:A,zt),he=Xt.get(C,zt),be=U,Ce=void 0;L&&(Ce=+oe-Xt.get(A,zt));var Fe=void 0,Bt=void 0,Tt=void 0,Mt=void 0;if(H){var Ut=V.dataToPoint([oe,he]);if(L){var se=V.dataToPoint([Ce,he]);be=se[0]}Fe=be,Bt=Ut[1]+dt,Tt=Ut[0]-be,Mt=it,Math.abs(Tt)<st&&(Tt=(Tt<0?-1:1)*st)}else{var Ut=V.dataToPoint([he,oe]);if(L){var se=V.dataToPoint([he,Ce]);be=se[1]}Fe=Ut[0]+dt,Bt=be,Tt=it,Mt=Ut[1]-be,Math.abs(Mt)<st&&(Mt=(Mt<=0?-1:1)*st)}ct?(Ot[ie]=Fe,Ot[ie+1]=Bt,Ot[ie+2]=H?Tt:Mt,At&&(At[ie]=H?Ct.x:Fe,At[ie+1]=H?Bt:Ct.y,At[ie+2]=Ft),It[zt]=zt):ut.setItemLayout(zt,{x:Fe,y:Bt,width:Tt,height:Mt}),ie+=3}ct&&ut.setLayout({largePoints:Ot,largeDataIndices:It,largeBackgroundPoints:At,valueAxisHorizontal:H})}}}}}}function g(N){return N.coordinateSystem&&N.coordinateSystem.type==="cartesian2d"}function et(N){return N.pipelineContext&&N.pipelineContext.large}function $(N,Y){return Y.toGlobalCoord(Y.dataToCoord(Y.type==="log"?1:0))}},Jx7q:function(je,nt,b){"use strict";b.d(nt,"a",function(){return J}),b.d(nt,"c",function(){return Z}),b.d(nt,"b",function(){return q}),b.d(nt,"d",function(){return $}),b.d(nt,"e",function(){return Y});var B=b("bPXU"),bt=b("ZXNb"),k=b("iYbX"),ft=b("BkaA"),ot,gt,lt,z,X,J=function(){function V(G,I){var A=Object(k.e)(G)?G:Object(k.c)(G);this._source=A;var C=this._data=A.data;A.sourceFormat===ft.g&&(this._offset=0,this._dimSize=I,this._data=C),X(this,C,A)}return V.prototype.getSource=function(){return this._source},V.prototype.count=function(){return 0},V.prototype.getItem=function(G,I){},V.prototype.appendData=function(G){},V.prototype.clean=function(){},V.protoInitialize=function(){var G=V.prototype;G.pure=!1,G.persistent=!0}(),V.internalField=function(){var G;X=function(O,M,L){var H=L.sourceFormat,U=L.seriesLayoutBy,ct=L.startIndex,st=L.dimensionsDefine,vt=z[N(H,U)];if(Object(B.m)(O,vt),H===ft.g)O.getItem=I,O.count=C,O.fillStorage=A;else{var it=Z(H,U);O.getItem=Object(B.c)(it,null,M,ct,st);var dt=q(H,U);O.count=Object(B.c)(dt,null,M,ct,st)}};var I=function(O,M){O=O-this._offset,M=M||[];for(var L=this._data,H=this._dimSize,U=H*O,ct=0;ct<H;ct++)M[ct]=L[U+ct];return M},A=function(O,M,L,H){for(var U=this._data,ct=this._dimSize,st=0;st<ct;st++){for(var vt=H[st],it=vt[0]==null?Infinity:vt[0],dt=vt[1]==null?-Infinity:vt[1],St=M-O,ut=L[st],yt=0;yt<St;yt++){var Ot=U[yt*ct+st];ut[O+yt]=Ot,Ot<it&&(it=Ot),Ot>dt&&(dt=Ot)}vt[0]=it,vt[1]=dt}},C=function(){return this._data?this._data.length/this._dimSize:0};z=(G={},G[ft.c+"_"+ft.a]={pure:!0,appendData:E},G[ft.c+"_"+ft.b]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},G[ft.e]={pure:!0,appendData:E},G[ft.d]={pure:!0,appendData:function(O){var M=this._data;Object(B.k)(O,function(L,H){for(var U=M[H]||(M[H]=[]),ct=0;ct<(L||[]).length;ct++)U.push(L[ct])})}},G[ft.f]={appendData:E},G[ft.g]={persistent:!1,pure:!0,appendData:function(O){this._data=O},clean:function(){this._offset+=this.count(),this._data=null}},G);function E(O){for(var M=0;M<O.length;M++)this._data.push(O[M])}}(),V}(),at=function(V,G,I,A){return V[A]},F=(ot={},ot[ft.c+"_"+ft.a]=function(V,G,I,A){return V[A+G]},ot[ft.c+"_"+ft.b]=function(V,G,I,A,C){A+=G;for(var E=C||[],O=V,M=0;M<O.length;M++){var L=O[M];E[M]=L?L[A]:null}return E},ot[ft.e]=at,ot[ft.d]=function(V,G,I,A,C){for(var E=C||[],O=0;O<I.length;O++){var M=I[O].name,L=V[M];E[O]=L?L[A]:null}return E},ot[ft.f]=at,ot);function Z(V,G){var I=F[N(V,G)];return I}var W=function(V,G,I){return V.length},ht=(gt={},gt[ft.c+"_"+ft.a]=function(V,G,I){return Math.max(0,V.length-G)},gt[ft.c+"_"+ft.b]=function(V,G,I){var A=V[0];return A?Math.max(0,A.length-G):0},gt[ft.e]=W,gt[ft.d]=function(V,G,I){var A=I[0].name,C=V[A];return C?C.length:0},gt[ft.f]=W,gt);function q(V,G){var I=ht[N(V,G)];return I}var g=function(V,G,I){return V[G]},et=(lt={},lt[ft.c]=g,lt[ft.e]=function(V,G,I){return V[I]},lt[ft.d]=g,lt[ft.f]=function(V,G,I){var A=Object(bt.h)(V);return A instanceof Array?A[G]:A},lt[ft.g]=g,lt);function $(V){var G=et[V];return G}function N(V,G){return V===ft.c?V+"_"+G:V}function Y(V,G,I){if(!!V){var A=V.getRawDataItem(G);if(A!=null){var C=V.getStore(),E=C.getSource().sourceFormat;if(I!=null){var O=V.getDimensionIndex(I),M=C.getDimensionProperty(O);return $(E)(A,O,M)}else{var L=A;return E===ft.f&&(L=Object(bt.h)(A)),L}}}}function K(V,G,I){if(!!V){var A=V.getStore().getSource().sourceFormat;if(!(A!==ft.f&&A!==ft.e)){var C=V.getRawDataItem(G);if(A===ft.f&&!Object(B.A)(C)&&(C=null),C)return C[I]}}}},KapR:function(je,nt,b){"use strict";b.d(nt,"f",function(){return ot}),b.d(nt,"d",function(){return lt}),b.d(nt,"a",function(){return z}),b.d(nt,"b",function(){return X}),b.d(nt,"e",function(){return J}),b.d(nt,"g",function(){return F}),b.d(nt,"c",function(){return Z});var B=b("uSNo"),bt=b("AOUq"),k=b("baNC"),ft={};function ot(W,ht){ht=ht||k.a;var q=ft[ht];q||(q=ft[ht]=new bt.a(500));var g=q.get(W);return g==null&&(g=k.d.measureText(W,ht).width,q.put(W,g)),g}function gt(W,ht,q,g){var et=ot(W,ht),$=J(ht),N=z(0,et,q),Y=X(0,$,g),K=new B.a(N,Y,et,$);return K}function lt(W,ht,q,g){var et=((W||"")+"").split(`
`),$=et.length;if($===1)return gt(et[0],ht,q,g);for(var N=new B.a(0,0,0,0),Y=0;Y<et.length;Y++){var K=gt(et[Y],ht,q,g);Y===0?N.copy(K):N.union(K)}return N}function z(W,ht,q){return q==="right"?W-=ht:q==="center"&&(W-=ht/2),W}function X(W,ht,q){return q==="middle"?W-=ht/2:q==="bottom"&&(W-=ht),W}function J(W){return ot("\u56FD",W)}function at(W,ht){return k.d.measureText(W,ht)}function F(W,ht){return typeof W=="string"?W.lastIndexOf("%")>=0?parseFloat(W)/100*ht:parseFloat(W):W}function Z(W,ht,q){var g=ht.position||"inside",et=ht.distance!=null?ht.distance:5,$=q.height,N=q.width,Y=$/2,K=q.x,V=q.y,G="left",I="top";if(g instanceof Array)K+=F(g[0],q.width),V+=F(g[1],q.height),G=null,I=null;else switch(g){case"left":K-=et,V+=Y,G="right",I="middle";break;case"right":K+=et+N,V+=Y,I="middle";break;case"top":K+=N/2,V-=et,G="center",I="bottom";break;case"bottom":K+=N/2,V+=$+et,G="center";break;case"inside":K+=N/2,V+=Y,G="center",I="middle";break;case"insideLeft":K+=et,V+=Y,I="middle";break;case"insideRight":K+=N-et,V+=Y,G="right",I="middle";break;case"insideTop":K+=N/2,V+=et,G="center";break;case"insideBottom":K+=N/2,V+=$-et,G="center",I="bottom";break;case"insideTopLeft":K+=et,V+=et;break;case"insideTopRight":K+=N-et,V+=et,G="right";break;case"insideBottomLeft":K+=et,V+=$-et,I="bottom";break;case"insideBottomRight":K+=N-et,V+=$-et,G="right",I="bottom";break}return W=W||{},W.x=K,W.y=V,W.align=G,W.verticalAlign=I,W}},LFVZ:function(je,nt,b){"use strict";b.d(nt,"d",function(){return at}),b.d(nt,"c",function(){return F}),b.d(nt,"b",function(){return ht}),b.d(nt,"e",function(){return q}),b.d(nt,"a",function(){return g});var B=b("FLFE"),bt=b("IyL0"),k=Math.min,ft=Math.max,ot=Math.sin,gt=Math.cos,lt=Math.PI*2,z=B.e(),X=B.e(),J=B.e();function at(et,$,N){if(et.length!==0){for(var Y=et[0],K=Y[0],V=Y[0],G=Y[1],I=Y[1],A=1;A<et.length;A++)Y=et[A],K=k(K,Y[0]),V=ft(V,Y[0]),G=k(G,Y[1]),I=ft(I,Y[1]);$[0]=K,$[1]=G,N[0]=V,N[1]=I}}function F(et,$,N,Y,K,V){K[0]=k(et,N),K[1]=k($,Y),V[0]=ft(et,N),V[1]=ft($,Y)}var Z=[],W=[];function ht(et,$,N,Y,K,V,G,I,A,C){var E=bt.c,O=bt.a,M=E(et,N,K,G,Z);A[0]=Infinity,A[1]=Infinity,C[0]=-Infinity,C[1]=-Infinity;for(var L=0;L<M;L++){var H=O(et,N,K,G,Z[L]);A[0]=k(H,A[0]),C[0]=ft(H,C[0])}M=E($,Y,V,I,W);for(var L=0;L<M;L++){var U=O($,Y,V,I,W[L]);A[1]=k(U,A[1]),C[1]=ft(U,C[1])}A[0]=k(et,A[0]),C[0]=ft(et,C[0]),A[0]=k(G,A[0]),C[0]=ft(G,C[0]),A[1]=k($,A[1]),C[1]=ft($,C[1]),A[1]=k(I,A[1]),C[1]=ft(I,C[1])}function q(et,$,N,Y,K,V,G,I){var A=bt.j,C=bt.h,E=ft(k(A(et,N,K),1),0),O=ft(k(A($,Y,V),1),0),M=C(et,N,K,E),L=C($,Y,V,O);G[0]=k(et,K,M),G[1]=k($,V,L),I[0]=ft(et,K,M),I[1]=ft($,V,L)}function g(et,$,N,Y,K,V,G,I,A){var C=B.l,E=B.k,O=Math.abs(K-V);if(O%lt<1e-4&&O>1e-4){I[0]=et-N,I[1]=$-Y,A[0]=et+N,A[1]=$+Y;return}if(z[0]=gt(K)*N+et,z[1]=ot(K)*Y+$,X[0]=gt(V)*N+et,X[1]=ot(V)*Y+$,C(I,z,X),E(A,z,X),K=K%lt,K<0&&(K=K+lt),V=V%lt,V<0&&(V=V+lt),K>V&&!G?V+=lt:K<V&&G&&(K+=lt),G){var M=V;V=K,K=M}for(var L=0;L<V;L+=Math.PI/2)L>K&&(J[0]=gt(L)*N+et,J[1]=ot(L)*Y+$,C(I,J,I),E(A,J,A))}},LiF8:function(je,nt,b){"use strict";b.d(nt,"b",function(){return ht}),b.d(nt,"a",function(){return q});var B=b("BkaA"),bt=b("ZXNb"),k=b("bPXU"),ft=b("Jx7q"),ot=b("Nsp3"),gt=b("jbhN"),lt=b("iYbX"),z=function(){function $(){}return $.prototype.getRawData=function(){throw new Error("not supported")},$.prototype.getRawDataItem=function(N){throw new Error("not supported")},$.prototype.cloneRawData=function(){},$.prototype.getDimensionInfo=function(N){},$.prototype.cloneAllDimensionInfo=function(){},$.prototype.count=function(){},$.prototype.retrieveValue=function(N,Y){},$.prototype.retrieveValueFromItem=function(N,Y){},$.prototype.convertValue=function(N,Y){return Object(ot.d)(N,Y)},$}();function X($,N){var Y=new z,K=$.data,V=Y.sourceFormat=$.sourceFormat,G=$.startIndex,I="";$.seriesLayoutBy!==B.a&&Object(gt.c)(I);var A=[],C={},E=$.dimensionsDefine;if(E)Object(k.k)(E,function(ct,st){var vt=ct.name,it={index:st,name:vt,displayName:ct.displayName};if(A.push(it),vt!=null){var dt="";Object(k.q)(C,vt)&&Object(gt.c)(dt),C[vt]=it}});else for(var O=0;O<$.dimensionsDetectedCount;O++)A.push({index:O});var M=Object(ft.c)(V,B.a);N.__isBuiltIn&&(Y.getRawDataItem=function(ct){return M(K,G,A,ct)},Y.getRawData=Object(k.c)(J,null,$)),Y.cloneRawData=Object(k.c)(at,null,$);var L=Object(ft.b)(V,B.a);Y.count=Object(k.c)(L,null,K,G,A);var H=Object(ft.d)(V);Y.retrieveValue=function(ct,st){var vt=M(K,G,A,ct);return U(vt,st)};var U=Y.retrieveValueFromItem=function(ct,st){if(ct!=null){var vt=A[st];if(vt)return H(ct,st,vt.name)}};return Y.getDimensionInfo=Object(k.c)(F,null,A,C),Y.cloneAllDimensionInfo=Object(k.c)(Z,null,A),Y}function J($){var N=$.sourceFormat;if(!et(N)){var Y="";Object(gt.c)(Y)}return $.data}function at($){var N=$.sourceFormat,Y=$.data;if(!et(N)){var K="";Object(gt.c)(K)}if(N===B.c){for(var V=[],G=0,I=Y.length;G<I;G++)V.push(Y[G].slice());return V}else if(N===B.e){for(var V=[],G=0,I=Y.length;G<I;G++)V.push(Object(k.m)({},Y[G]));return V}}function F($,N,Y){if(Y!=null){if(Object(k.z)(Y)||!isNaN(Y)&&!Object(k.q)(N,Y))return $[Y];if(Object(k.q)(N,Y))return N[Y]}}function Z($){return Object(k.d)($)}var W=Object(k.f)();function ht($){$=Object(k.d)($);var N=$.type,Y="";N||Object(gt.c)(Y);var K=N.split(":");K.length!==2&&Object(gt.c)(Y);var V=!1;K[0]==="echarts"&&(N=K[1],V=!0),$.__isBuiltIn=V,W.set(N,$)}function q($,N,Y){var K=Object(bt.r)($),V=K.length,G="";V||Object(gt.c)(G);for(var I=0,A=V;I<A;I++){var C=K[I];N=g(C,N,Y,V===1?null:I),I!==A-1&&(N.length=Math.max(N.length,1))}return N}function g($,N,Y,K){var V="";N.length||Object(gt.c)(V),Object(k.A)($)||Object(gt.c)(V);var G=$.type,I=W.get(G);I||Object(gt.c)(V);var A=Object(k.H)(N,function(O){return X(O,I)}),C=Object(bt.r)(I.transform({upstream:A[0],upstreamList:A,config:Object(k.d)($.config)}));if(!1)var E;return Object(k.H)(C,function(O,M){var L="";Object(k.A)(O)||Object(gt.c)(L),O.data||Object(gt.c)(L);var H=Object(lt.d)(O.data);et(H)||Object(gt.c)(L);var U,ct=N[0];if(ct&&M===0&&!O.dimensions){var st=ct.startIndex;st&&(O.data=ct.data.slice(0,st).concat(O.data)),U={seriesLayoutBy:B.a,sourceHeader:st,dimensions:ct.metaRawOption.dimensions}}else U={seriesLayoutBy:B.a,sourceHeader:0,dimensions:O.dimensions};return Object(lt.b)(O.data,U,null)})}function et($){return $===B.c||$===B.e}},M8IA:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=b("bPXU");function bt(ot){return new k(ot)}var k=function(){function ot(gt){gt=gt||{},this._reset=gt.reset,this._plan=gt.plan,this._count=gt.count,this._onDirty=gt.onDirty,this._dirty=!0}return ot.prototype.perform=function(gt){var lt=this._upstream,z=gt&&gt.skip;if(this._dirty&&lt){var X=this.context;X.data=X.outputData=lt.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var J;this._plan&&!z&&(J=this._plan(this.context));var at=ht(this._modBy),F=this._modDataCount||0,Z=ht(gt&&gt.modBy),W=gt&&gt.modDataCount||0;(at!==Z||F!==W)&&(J="reset");function ht(V){return!(V>=1)&&(V=1),V}var q;(this._dirty||J==="reset")&&(this._dirty=!1,q=this._doReset(z)),this._modBy=Z,this._modDataCount=W;var g=gt&&gt.step;if(lt?this._dueEnd=lt._outputDueEnd:this._dueEnd=this._count?this._count(this.context):Infinity,this._progress){var et=this._dueIndex,$=Math.min(g!=null?this._dueIndex+g:Infinity,this._dueEnd);if(!z&&(q||et<$)){var N=this._progress;if(Object(B.t)(N))for(var Y=0;Y<N.length;Y++)this._doProgress(N[Y],et,$,Z,W);else this._doProgress(N,et,$,Z,W)}this._dueIndex=$;var K=this._settedOutputEnd!=null?this._settedOutputEnd:$;this._outputDueEnd=K}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},ot.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},ot.prototype._doProgress=function(gt,lt,z,X,J){ft.reset(lt,z,X,J),this._callingProgress=gt,this._callingProgress({start:lt,end:z,count:z-lt,next:ft.next},this.context)},ot.prototype._doReset=function(gt){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var lt,z;!gt&&this._reset&&(lt=this._reset(this.context),lt&&lt.progress&&(z=lt.forceFirstProgress,lt=lt.progress),Object(B.t)(lt)&&!lt.length&&(lt=null)),this._progress=lt,this._modBy=this._modDataCount=null;var X=this._downstream;return X&&X.dirty(),z},ot.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},ot.prototype.pipe=function(gt){(this._downstream!==gt||this._dirty)&&(this._downstream=gt,gt._upstream=this,gt.dirty())},ot.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},ot.prototype.getUpstream=function(){return this._upstream},ot.prototype.getDownstream=function(){return this._downstream},ot.prototype.setOutputEnd=function(gt){this._outputDueEnd=this._settedOutputEnd=gt},ot}(),ft=function(){var ot,gt,lt,z,X,J={reset:function(Z,W,ht,q){gt=Z,ot=W,lt=ht,z=q,X=Math.ceil(z/lt),J.next=lt>1&&z>0?F:at}};return J;function at(){return gt<ot?gt++:null}function F(){var Z=gt%X*lt+Math.ceil(gt/X),W=gt>=ot?null:Z<z?Z:gt;return gt++,W}}()},M9la:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ot});var B=b("bPXU"),bt=b("TxaN"),k=b("Jx7q"),ft=b("ZXNb");function ot(lt){var z=lt.series,X=lt.dataIndex,J=lt.multipleSeries,at=z.getData(),F=at.mapDimensionsAll("defaultedTooltip"),Z=F.length,W=z.getRawValue(X),ht=Object(B.t)(W),q=Object(bt.e)(z,X),g,et,$,N;if(Z>1||ht&&!Z){var Y=gt(W,z,X,F,q);g=Y.inlineValues,et=Y.inlineValueTypes,$=Y.blocks,N=Y.inlineValues[0]}else if(Z){var K=at.getDimensionInfo(F[0]);N=g=Object(k.e)(at,X,F[0]),et=K.type}else N=g=ht?W[0]:W;var V=Object(ft.n)(z),G=V&&z.name||"",I=at.getName(X),A=J?G:I;return Object(bt.c)("section",{header:G,noHeader:J||!V,sortParam:N,blocks:[Object(bt.c)("nameValue",{markerType:"item",markerColor:q,name:A,noName:!Object(B.T)(A),value:g,valueType:et})].concat($||[])})}function gt(lt,z,X,J,at){var F=z.getData(),Z=Object(B.N)(lt,function(et,$,N){var Y=F.getDimensionInfo(N);return et=et||Y&&Y.tooltip!==!1&&Y.displayName!=null},!1),W=[],ht=[],q=[];J.length?Object(B.k)(J,function(et){g(Object(k.e)(F,X,et),et)}):Object(B.k)(lt,g);function g(et,$){var N=F.getDimensionInfo($);!N||N.otherDims.tooltip===!1||(Z?q.push(Object(bt.c)("nameValue",{markerType:"subItem",markerColor:at,name:N.displayName,value:et,valueType:N.type})):(W.push(et),ht.push(N.type)))}return{inlineValues:W,inlineValueTypes:ht,blocks:q}}},MiEP:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=function(){function ot(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return ot}(),ft=function(ot){Object(B.a)(gt,ot);function gt(lt){return ot.call(this,lt)||this}return gt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},gt.prototype.getDefaultShape=function(){return new k},gt.prototype.buildPath=function(lt,z){var X=z.cx,J=z.cy,at=Math.max(z.r,0),F=z.startAngle,Z=z.endAngle,W=z.clockwise,ht=Math.cos(F),q=Math.sin(F);lt.moveTo(ht*at+X,q*at+J),lt.arc(X,J,at,F,Z,!W)},gt}(bt.b);ft.prototype.type="arc",nt.a=ft},Nsp3:function(je,nt,b){"use strict";b.d(nt,"d",function(){return ft}),b.d(nt,"c",function(){return gt}),b.d(nt,"a",function(){return X}),b.d(nt,"b",function(){return at});var B=b("7M1A"),bt=b("bPXU"),k=b("jbhN");function ft(F,Z){var W=Z&&Z.type;return W==="ordinal"?F:(W==="time"&&!Object(bt.z)(F)&&F!=null&&F!=="-"&&(F=+Object(B.o)(F)),F==null||F===""?NaN:+F)}var ot=Object(bt.f)({number:function(F){return parseFloat(F)},time:function(F){return+Object(B.o)(F)},trim:function(F){return Object(bt.C)(F)?Object(bt.T)(F):F}});function gt(F){return ot.get(F)}var lt={lt:function(F,Z){return F<Z},lte:function(F,Z){return F<=Z},gt:function(F,Z){return F>Z},gte:function(F,Z){return F>=Z}},z=function(){function F(Z,W){if(!Object(bt.z)(W)){var ht="";Object(k.c)(ht)}this._opFn=lt[Z],this._rvalFloat=Object(B.n)(W)}return F.prototype.evaluate=function(Z){return Object(bt.z)(Z)?this._opFn(Z,this._rvalFloat):this._opFn(Object(B.n)(Z),this._rvalFloat)},F}(),X=function(){function F(Z,W){var ht=Z==="desc";this._resultLT=ht?1:-1,W==null&&(W=ht?"min":"max"),this._incomparable=W==="min"?-Infinity:Infinity}return F.prototype.evaluate=function(Z,W){var ht=Object(bt.z)(Z)?Z:Object(B.n)(Z),q=Object(bt.z)(W)?W:Object(B.n)(W),g=isNaN(ht),et=isNaN(q);if(g&&(ht=this._incomparable),et&&(q=this._incomparable),g&&et){var $=Object(bt.C)(Z),N=Object(bt.C)(W);$&&(ht=N?Z:0),N&&(q=$?W:0)}return ht<q?this._resultLT:ht>q?-this._resultLT:0},F}(),J=function(){function F(Z,W){this._rval=W,this._isEQ=Z,this._rvalTypeof=typeof W,this._rvalFloat=Object(B.n)(W)}return F.prototype.evaluate=function(Z){var W=Z===this._rval;if(!W){var ht=typeof Z;ht!==this._rvalTypeof&&(ht==="number"||this._rvalTypeof==="number")&&(W=Object(B.n)(Z)===this._rvalFloat)}return this._isEQ?W:!W},F}();function at(F,Z){return F==="eq"||F==="ne"?new J(F==="eq",Z):Object(bt.q)(lt,F)?new z(F,Z):null}},OGI8:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=function(){function ot(){this.cx=0,this.cy=0,this.r=0}return ot}(),ft=function(ot){Object(B.a)(gt,ot);function gt(lt){return ot.call(this,lt)||this}return gt.prototype.getDefaultShape=function(){return new k},gt.prototype.buildPath=function(lt,z){lt.moveTo(z.cx+z.r,z.cy),lt.arc(z.cx,z.cy,z.r,0,Math.PI*2)},gt}(bt.b);ft.prototype.type="circle",nt.a=ft},OjCH:function(je,nt,b){"use strict";b.d(nt,"c",function(){return B}),b.d(nt,"d",function(){return bt}),b.d(nt,"b",function(){return k}),b.d(nt,"f",function(){return ft}),b.d(nt,"i",function(){return ot}),b.d(nt,"g",function(){return gt}),b.d(nt,"h",function(){return lt}),b.d(nt,"e",function(){return z}),b.d(nt,"a",function(){return X});function B(){return[1,0,0,1,0,0]}function bt(J){return J[0]=1,J[1]=0,J[2]=0,J[3]=1,J[4]=0,J[5]=0,J}function k(J,at){return J[0]=at[0],J[1]=at[1],J[2]=at[2],J[3]=at[3],J[4]=at[4],J[5]=at[5],J}function ft(J,at,F){var Z=at[0]*F[0]+at[2]*F[1],W=at[1]*F[0]+at[3]*F[1],ht=at[0]*F[2]+at[2]*F[3],q=at[1]*F[2]+at[3]*F[3],g=at[0]*F[4]+at[2]*F[5]+at[4],et=at[1]*F[4]+at[3]*F[5]+at[5];return J[0]=Z,J[1]=W,J[2]=ht,J[3]=q,J[4]=g,J[5]=et,J}function ot(J,at,F){return J[0]=at[0],J[1]=at[1],J[2]=at[2],J[3]=at[3],J[4]=at[4]+F[0],J[5]=at[5]+F[1],J}function gt(J,at,F){var Z=at[0],W=at[2],ht=at[4],q=at[1],g=at[3],et=at[5],$=Math.sin(F),N=Math.cos(F);return J[0]=Z*N+q*$,J[1]=-Z*$+q*N,J[2]=W*N+g*$,J[3]=-W*$+N*g,J[4]=N*ht+$*et,J[5]=N*et-$*ht,J}function lt(J,at,F){var Z=F[0],W=F[1];return J[0]=at[0]*Z,J[1]=at[1]*W,J[2]=at[2]*Z,J[3]=at[3]*W,J[4]=at[4]*Z,J[5]=at[5]*W,J}function z(J,at){var F=at[0],Z=at[2],W=at[4],ht=at[1],q=at[3],g=at[5],et=F*q-ht*Z;return et?(et=1/et,J[0]=q*et,J[1]=-ht*et,J[2]=-Z*et,J[3]=F*et,J[4]=(Z*g-q*W)*et,J[5]=(ht*W-F*g)*et,J):null}function X(J){var at=B();return k(at,J),at}},PFVZ:function(je,nt,b){"use strict";b.d(nt,"b",function(){return ft}),b.d(nt,"a",function(){return gt});var B=b("bPXU"),bt=b("BkaA"),k=function(){function z(X,J){this._encode=X,this._schema=J}return z.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},z.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},z}();function ft(z,X){var J={},at=J.encode={},F=Object(B.f)(),Z=[],W=[],ht={};Object(B.k)(z.dimensions,function(N){var Y=z.getDimensionInfo(N),K=Y.coordDim;if(K){var V=Y.coordDimIndex;ot(at,K)[V]=N,Y.isExtraCoord||(F.set(K,1),lt(Y.type)&&(Z[0]=N),ot(ht,K)[V]=z.getDimensionIndex(Y.name)),Y.defaultTooltip&&W.push(N)}bt.i.each(function(G,I){var A=ot(at,I),C=Y.otherDims[I];C!=null&&C!==!1&&(A[C]=Y.name)})});var q=[],g={};F.each(function(N,Y){var K=at[Y];g[Y]=K[0],q=q.concat(K)}),J.dataDimsOnCoord=q,J.dataDimIndicesOnCoord=Object(B.H)(q,function(N){return z.getDimensionInfo(N).storeDimIndex}),J.encodeFirstDimNotExtra=g;var et=at.label;et&&et.length&&(Z=et.slice());var $=at.tooltip;return $&&$.length?W=$.slice():W.length||(W=Z.slice()),at.defaultedLabel=Z,at.defaultedTooltip=W,J.userOutput=new k(ht,X),J}function ot(z,X){return z.hasOwnProperty(X)||(z[X]=[]),z[X]}function gt(z){return z==="category"?"ordinal":z==="time"?"time":"float"}function lt(z){return!(z==="ordinal"||z==="time")}},PWZQ:function(je,nt,b){"use strict";var B=b("QO9Q"),bt=b("YN2f"),k=b("o7EO"),ft=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],ot=Object(k.a)(ft),gt=function(){function $(){}return $.prototype.getAreaStyle=function(N,Y){return ot(this,N,Y)},$}(),lt=b("u1in"),z=b("To/5"),X=["textStyle","color"],J=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],at=new z.a,F=function(){function $(){}return $.prototype.getTextColor=function(N){var Y=this.ecModel;return this.getShallow("color")||(!N&&Y?Y.get(X):null)},$.prototype.getFont=function(){return Object(lt.d)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},$.prototype.getTextRect=function(N){for(var Y={text:N,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},K=0;K<J.length;K++)Y[J[K]]=this.getShallow(J[K]);return at.useStyle(Y),at.update(),at.getBoundingRect()},$}(),Z=F,W=b("qQml"),ht=b("a58V"),q=b("bPXU"),g=function(){function $(N,Y,K){this.parentModel=Y,this.ecModel=K,this.option=N}return $.prototype.init=function(N,Y,K){for(var V=[],G=3;G<arguments.length;G++)V[G-3]=arguments[G]},$.prototype.mergeOption=function(N,Y){Object(q.I)(this.option,N,!0)},$.prototype.get=function(N,Y){return N==null?this.option:this._doGet(this.parsePath(N),!Y&&this.parentModel)},$.prototype.getShallow=function(N,Y){var K=this.option,V=K==null?K:K[N];if(V==null&&!Y){var G=this.parentModel;G&&(V=G.getShallow(N))}return V},$.prototype.getModel=function(N,Y){var K=N!=null,V=K?this.parsePath(N):null,G=K?this._doGet(V):this.option;return Y=Y||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(V)),new $(G,Y,this.ecModel)},$.prototype.isEmpty=function(){return this.option==null},$.prototype.restoreData=function(){},$.prototype.clone=function(){var N=this.constructor;return new N(Object(q.d)(this.option))},$.prototype.parsePath=function(N){return typeof N=="string"?N.split("."):N},$.prototype.resolveParentPath=function(N){return N},$.prototype.isAnimationEnabled=function(){if(!B.a.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},$.prototype._doGet=function(N,Y){var K=this.option;if(!N)return K;for(var V=0;V<N.length&&!(!!N[V]&&(K=K&&typeof K=="object"?K[N[V]]:null,K==null));V++);return K==null&&Y&&(K=Y._doGet(this.resolveParentPath(N),Y.parentModel)),K},$}();Object(bt.b)(g),Object(bt.a)(g),Object(q.K)(g,W.b),Object(q.K)(g,ht.b),Object(q.K)(g,gt),Object(q.K)(g,Z);var et=nt.a=g},QFdq:function(je,nt,b){"use strict";b.d(nt,"a",function(){return B});function B(bt,k,ft){for(var ot;bt&&!(k(bt)&&(ot=bt,ft));)bt=bt.__hostTarget||bt.parent;return ot}},QO9Q:function(je,nt,b){"use strict";var B=function(){function ot(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return ot}(),bt=function(){function ot(){this.browser=new B,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window!="undefined"}return ot}(),k=new bt;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(k.wxa=!0,k.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?k.worker=!0:typeof navigator=="undefined"?(k.node=!0,k.svgSupported=!0):ft(navigator.userAgent,k);function ft(ot,gt){var lt=gt.browser,z=ot.match(/Firefox\/([\d.]+)/),X=ot.match(/MSIE\s([\d.]+)/)||ot.match(/Trident\/.+?rv:(([\d.]+))/),J=ot.match(/Edge?\/([\d.]+)/),at=/micromessenger/i.test(ot);z&&(lt.firefox=!0,lt.version=z[1]),X&&(lt.ie=!0,lt.version=X[1]),J&&(lt.edge=!0,lt.version=J[1],lt.newEdge=+J[1].split(".")[0]>18),at&&(lt.weChat=!0),gt.svgSupported=typeof SVGRect!="undefined",gt.touchEventsSupported="ontouchstart"in window&&!lt.ie&&!lt.edge,gt.pointerEventsSupported="onpointerdown"in window&&(lt.edge||lt.ie&&+lt.version>=11),gt.domSupported=typeof document!="undefined";var F=document.documentElement.style;gt.transform3dSupported=(lt.ie&&"transition"in F||lt.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in F)&&!("OTransition"in F),gt.transformSupported=gt.transform3dSupported||lt.ie&&+lt.version>=9}nt.a=k},QrW4:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=b("ZYtA"),ft={},ot=function(){function lt(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return lt}(),gt=function(lt){Object(B.a)(z,lt);function z(X){return lt.call(this,X)||this}return z.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},z.prototype.getDefaultShape=function(){return new ot},z.prototype.buildPath=function(X,J){var at,F,Z,W;if(this.subPixelOptimize){var ht=Object(k.b)(ft,J,this.style);at=ht.x1,F=ht.y1,Z=ht.x2,W=ht.y2}else at=J.x1,F=J.y1,Z=J.x2,W=J.y2;var q=J.percent;q!==0&&(X.moveTo(at,F),q<1&&(Z=at*(1-q)+Z*q,W=F*(1-q)+W*q),X.lineTo(Z,W))},z.prototype.pointAt=function(X){var J=this.shape;return[J.x1*(1-X)+J.x2*X,J.y1*(1-X)+J.y2*X]},z}(bt.b);gt.prototype.type="line",nt.a=gt},RUxA:function(je,nt,b){"use strict";var B=b("bPXU"),bt=b("ZXNb"),k=Object(bt.o)();function ft(Z){var W=Z.mainData,ht=Z.datas;ht||(ht={main:W},Z.datasAttr={main:"data"}),Z.datas=Z.mainData=null,at(W,ht,Z),Object(B.k)(ht,function(q){Object(B.k)(W.TRANSFERABLE_METHODS,function(g){q.wrapMethod(g,Object(B.h)(ot,Z))})}),W.wrapMethod("cloneShallow",Object(B.h)(lt,Z)),Object(B.k)(W.CHANGABLE_METHODS,function(q){W.wrapMethod(q,Object(B.h)(gt,Z))}),Object(B.b)(ht[W.dataType]===W)}function ot(Z,W){if(J(this)){var ht=Object(B.m)({},k(this).datas);ht[this.dataType]=W,at(W,ht,Z)}else F(W,this.dataType,k(this).mainData,Z);return W}function gt(Z,W){return Z.struct&&Z.struct.update(),W}function lt(Z,W){return Object(B.k)(k(W).datas,function(ht,q){ht!==W&&F(ht.cloneShallow(),q,W,Z)}),W}function z(Z){var W=k(this).mainData;return Z==null||W==null?W:k(W).datas[Z]}function X(){var Z=k(this).mainData;return Z==null?[{data:Z}]:Object(B.H)(Object(B.F)(k(Z).datas),function(W){return{type:W,data:k(Z).datas[W]}})}function J(Z){return k(Z).mainData===Z}function at(Z,W,ht){k(Z).datas={},Object(B.k)(W,function(q,g){F(q,g,Z,ht)})}function F(Z,W,ht,q){k(ht).datas[W]=Z,k(Z).mainData=ht,Z.dataType=W,q.struct&&(Z[q.structAttr]=q.struct,q.struct[q.datasAttr[W]]=Z),Z.getLinkedData=z,Z.getLinkedDataAll=X}nt.a=ft},RlS0:function(je,nt,b){"use strict";b.d(nt,"a",function(){return gt}),b.d(nt,"b",function(){return X}),b.d(nt,"e",function(){return F}),b.d(nt,"g",function(){return Z}),b.d(nt,"i",function(){return W}),b.d(nt,"j",function(){return ht}),b.d(nt,"d",function(){return q}),b.d(nt,"h",function(){return g}),b.d(nt,"f",function(){return et}),b.d(nt,"c",function(){return $});var B=b("bPXU"),bt=b("uSNo"),k=b("7M1A"),ft=b("euZP"),ot=B.k,gt=["left","right","top","bottom","width","height"],lt=[["width","left","right"],["height","top","bottom"]];function z(N,Y,K,V,G){var I=0,A=0;V==null&&(V=Infinity),G==null&&(G=Infinity);var C=0;Y.eachChild(function(E,O){var M=E.getBoundingRect(),L=Y.childAt(O+1),H=L&&L.getBoundingRect(),U,ct;if(N==="horizontal"){var st=M.width+(H?-H.x+M.x:0);U=I+st,U>V||E.newline?(I=0,U=st,A+=C+K,C=M.height):C=Math.max(C,M.height)}else{var vt=M.height+(H?-H.y+M.y:0);ct=A+vt,ct>G||E.newline?(I+=C+K,A=0,ct=vt,C=M.width):C=Math.max(C,M.width)}E.newline||(E.x=I,E.y=A,E.markRedraw(),N==="horizontal"?I=U+K:A=ct+K)})}var X=z,J=B.h(z,"vertical"),at=B.h(z,"horizontal");function F(N,Y,K){var V=Y.width,G=Y.height,I=Object(k.p)(N.left,V),A=Object(k.p)(N.top,G),C=Object(k.p)(N.right,V),E=Object(k.p)(N.bottom,G);return(isNaN(I)||isNaN(parseFloat(N.left)))&&(I=0),(isNaN(C)||isNaN(parseFloat(N.right)))&&(C=V),(isNaN(A)||isNaN(parseFloat(N.top)))&&(A=0),(isNaN(E)||isNaN(parseFloat(N.bottom)))&&(E=G),K=ft.j(K||0),{width:Math.max(C-I-K[1]-K[3],0),height:Math.max(E-A-K[0]-K[2],0)}}function Z(N,Y,K){K=ft.j(K||0);var V=Y.width,G=Y.height,I=Object(k.p)(N.left,V),A=Object(k.p)(N.top,G),C=Object(k.p)(N.right,V),E=Object(k.p)(N.bottom,G),O=Object(k.p)(N.width,V),M=Object(k.p)(N.height,G),L=K[2]+K[0],H=K[1]+K[3],U=N.aspect;switch(isNaN(O)&&(O=V-C-H-I),isNaN(M)&&(M=G-E-L-A),U!=null&&(isNaN(O)&&isNaN(M)&&(U>V/G?O=V*.8:M=G*.8),isNaN(O)&&(O=U*M),isNaN(M)&&(M=O/U)),isNaN(I)&&(I=V-C-O-H),isNaN(A)&&(A=G-E-M-L),N.left||N.right){case"center":I=V/2-O/2-K[3];break;case"right":I=V-O-H;break}switch(N.top||N.bottom){case"middle":case"center":A=G/2-M/2-K[0];break;case"bottom":A=G-M-L;break}I=I||0,A=A||0,isNaN(O)&&(O=V-H-I-(C||0)),isNaN(M)&&(M=G-L-A-(E||0));var ct=new bt.a(I+K[3],A+K[0],O,M);return ct.margin=K,ct}function W(N,Y,K,V,G,I){var A=!G||!G.hv||G.hv[0],C=!G||!G.hv||G.hv[1],E=G&&G.boundingMode||"all";if(I=I||N,I.x=N.x,I.y=N.y,!A&&!C)return!1;var O;if(E==="raw")O=N.type==="group"?new bt.a(0,0,+Y.width||0,+Y.height||0):N.getBoundingRect();else if(O=N.getBoundingRect(),N.needLocalTransform()){var M=N.getLocalTransform();O=O.clone(),O.applyTransform(M)}var L=Z(B.i({width:O.width,height:O.height},Y),K,V),H=A?L.x-O.x:0,U=C?L.y-O.y:0;return E==="raw"?(I.x=H,I.y=U):(I.x+=H,I.y+=U),I===N&&N.markRedraw(),!0}function ht(N,Y){return N[lt[Y][0]]!=null||N[lt[Y][1]]!=null&&N[lt[Y][2]]!=null}function q(N){var Y=N.layoutMode||N.constructor.layoutMode;return B.A(Y)?Y:Y?{type:Y}:null}function g(N,Y,K){var V=K&&K.ignoreSize;!B.t(V)&&(V=[V,V]);var G=A(lt[0],0),I=A(lt[1],1);O(lt[0],N,G),O(lt[1],N,I);function A(M,L){var H={},U=0,ct={},st=0,vt=2;if(ot(M,function(St){ct[St]=N[St]}),ot(M,function(St){C(Y,St)&&(H[St]=ct[St]=Y[St]),E(H,St)&&U++,E(ct,St)&&st++}),V[L])return E(Y,M[1])?ct[M[2]]=null:E(Y,M[2])&&(ct[M[1]]=null),ct;if(st===vt||!U)return ct;if(U>=vt)return H;for(var it=0;it<M.length;it++){var dt=M[it];if(!C(H,dt)&&C(N,dt)){H[dt]=N[dt];break}}return H}function C(M,L){return M.hasOwnProperty(L)}function E(M,L){return M[L]!=null&&M[L]!=="auto"}function O(M,L,H){ot(M,function(U){L[U]=H[U]})}}function et(N){return $({},N)}function $(N,Y){return Y&&N&&ot(gt,function(K){Y.hasOwnProperty(K)&&(N[K]=Y[K])}),N}},SfWu:function(je,nt,b){"use strict";b.d(nt,"b",function(){return ft}),b.d(nt,"a",function(){return ot}),b.d(nt,"c",function(){return lt});var B=b("AOUq"),bt=b("baNC"),k=new B.a(50);function ft(z){if(typeof z=="string"){var X=k.get(z);return X&&X.image}else return z}function ot(z,X,J,at,F){if(z)if(typeof z=="string"){if(X&&X.__zrImageSrc===z||!J)return X;var Z=k.get(z),W={hostEl:J,cb:at,cbPayload:F};if(Z)X=Z.image,!lt(X)&&Z.pending.push(W);else{var ht=bt.d.loadImage(z,gt,gt);ht.__zrImageSrc=z,k.put(z,ht.__cachedImgObj={image:ht,pending:[W]})}return X}else return z;else return X}function gt(){var z=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var X=0;X<z.pending.length;X++){var J=z.pending[X],at=J.cb;at&&at(this,J.cbPayload),J.hostEl.dirty()}z.pending.length=0}function lt(z){return z&&z.width&&z.height}},SuLH:function(je,nt,b){"use strict";var B=b("bPXU"),bt=b("7M1A"),k=b("KapR"),ft=b("ZXNb"),ot=b("htXI"),gt=Object(ft.o)();function lt(A){return A.type==="category"?X(A):F(A)}function z(A,C){return A.type==="category"?at(A,C):{ticks:B.H(A.scale.getTicks(),function(E){return E.value})}}function X(A){var C=A.getLabelModel(),E=J(A,C);return!C.get("show")||A.scale.isBlank()?{labels:[],labelCategoryInterval:E.labelCategoryInterval}:E}function J(A,C){var E=Z(A,"labels"),O=Object(ot.e)(C),M=W(E,O);if(M)return M;var L,H;return B.w(O)?L=N(A,O):(H=O==="auto"?q(A):O,L=$(A,H)),ht(E,O,{labels:L,labelCategoryInterval:H})}function at(A,C){var E=Z(A,"ticks"),O=Object(ot.e)(C),M=W(E,O);if(M)return M;var L,H;if((!C.get("show")||A.scale.isBlank())&&(L=[]),B.w(O))L=N(A,O,!0);else if(O==="auto"){var U=J(A,A.getLabelModel());H=U.labelCategoryInterval,L=B.H(U.labels,function(ct){return ct.tickValue})}else H=O,L=$(A,H,!0);return ht(E,O,{ticks:L,tickCategoryInterval:H})}function F(A){var C=A.scale.getTicks(),E=Object(ot.h)(A);return{labels:B.H(C,function(O,M){return{level:O.level,formattedLabel:E(O,M),rawLabel:A.scale.getLabel(O),tickValue:O.value}})}}function Z(A,C){return gt(A)[C]||(gt(A)[C]=[])}function W(A,C){for(var E=0;E<A.length;E++)if(A[E].key===C)return A[E].value}function ht(A,C,E){return A.push({key:C,value:E}),E}function q(A){var C=gt(A).autoInterval;return C!=null?C:gt(A).autoInterval=A.calculateCategoryInterval()}function g(A){var C=et(A),E=Object(ot.h)(A),O=(C.axisRotate-C.labelRotate)/180*Math.PI,M=A.scale,L=M.getExtent(),H=M.count();if(L[1]-L[0]<1)return 0;var U=1;H>40&&(U=Math.max(1,Math.floor(H/40)));for(var ct=L[0],st=A.dataToCoord(ct+1)-A.dataToCoord(ct),vt=Math.abs(st*Math.cos(O)),it=Math.abs(st*Math.sin(O)),dt=0,St=0;ct<=L[1];ct+=U){var ut=0,yt=0,Ot=k.d(E({value:ct}),C.font,"center","top");ut=Ot.width*1.3,yt=Ot.height*1.3,dt=Math.max(dt,ut,7),St=Math.max(St,yt,7)}var At=dt/vt,It=St/it;isNaN(At)&&(At=Infinity),isNaN(It)&&(It=Infinity);var Ct=Math.max(0,Math.floor(Math.min(At,It))),Ft=gt(A.model),zt=A.getExtent(),Xt=Ft.lastAutoInterval,ie=Ft.lastTickCount;return Xt!=null&&ie!=null&&Math.abs(Xt-Ct)<=1&&Math.abs(ie-H)<=1&&Xt>Ct&&Ft.axisExtent0===zt[0]&&Ft.axisExtent1===zt[1]?Ct=Xt:(Ft.lastTickCount=H,Ft.lastAutoInterval=Ct,Ft.axisExtent0=zt[0],Ft.axisExtent1=zt[1]),Ct}function et(A){var C=A.getLabelModel();return{axisRotate:A.getRotate?A.getRotate():A.isHorizontal&&!A.isHorizontal()?90:0,labelRotate:C.get("rotate")||0,font:C.getFont()}}function $(A,C,E){var O=Object(ot.h)(A),M=A.scale,L=M.getExtent(),H=A.getLabelModel(),U=[],ct=Math.max((C||0)+1,1),st=L[0],vt=M.count();st!==0&&ct>1&&vt/ct>2&&(st=Math.round(Math.ceil(st/ct)*ct));var it=Object(ot.j)(A),dt=H.get("showMinLabel")||it,St=H.get("showMaxLabel")||it;dt&&st!==L[0]&&yt(L[0]);for(var ut=st;ut<=L[1];ut+=ct)yt(ut);St&&ut-ct!==L[1]&&yt(L[1]);function yt(Ot){var At={value:Ot};U.push(E?Ot:{formattedLabel:O(At),rawLabel:M.getLabel(At),tickValue:Ot})}return U}function N(A,C,E){var O=A.scale,M=Object(ot.h)(A),L=[];return B.k(O.getTicks(),function(H){var U=O.getLabel(H),ct=H.value;C(H.value,U)&&L.push(E?ct:{formattedLabel:M(H),rawLabel:U,tickValue:ct})}),L}var Y=[0,1],K=function(){function A(C,E,O){this.onBand=!1,this.inverse=!1,this.dim=C,this.scale=E,this._extent=O||[0,0]}return A.prototype.contain=function(C){var E=this._extent,O=Math.min(E[0],E[1]),M=Math.max(E[0],E[1]);return C>=O&&C<=M},A.prototype.containData=function(C){return this.scale.contain(C)},A.prototype.getExtent=function(){return this._extent.slice()},A.prototype.getPixelPrecision=function(C){return Object(bt.f)(C||this.scale.getExtent(),this._extent)},A.prototype.setExtent=function(C,E){var O=this._extent;O[0]=C,O[1]=E},A.prototype.dataToCoord=function(C,E){var O=this._extent,M=this.scale;return C=M.normalize(C),this.onBand&&M.type==="ordinal"&&(O=O.slice(),V(O,M.count())),Object(bt.l)(C,Y,O,E)},A.prototype.coordToData=function(C,E){var O=this._extent,M=this.scale;this.onBand&&M.type==="ordinal"&&(O=O.slice(),V(O,M.count()));var L=Object(bt.l)(C,O,Y,E);return this.scale.scale(L)},A.prototype.pointToData=function(C,E){},A.prototype.getTicksCoords=function(C){C=C||{};var E=C.tickModel||this.getTickModel(),O=z(this,E),M=O.ticks,L=Object(B.H)(M,function(U){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(U):U),tickValue:U}},this),H=E.get("alignWithLabel");return G(this,L,H,C.clamp),L},A.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var C=this.model.getModel("minorTick"),E=C.get("splitNumber");E>0&&E<100||(E=5);var O=this.scale.getMinorTicks(E),M=Object(B.H)(O,function(L){return Object(B.H)(L,function(H){return{coord:this.dataToCoord(H),tickValue:H}},this)},this);return M},A.prototype.getViewLabels=function(){return lt(this).labels},A.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},A.prototype.getTickModel=function(){return this.model.getModel("axisTick")},A.prototype.getBandWidth=function(){var C=this._extent,E=this.scale.getExtent(),O=E[1]-E[0]+(this.onBand?1:0);O===0&&(O=1);var M=Math.abs(C[1]-C[0]);return Math.abs(M)/O},A.prototype.calculateCategoryInterval=function(){return g(this)},A}();function V(A,C){var E=A[1]-A[0],O=C,M=E/O/2;A[0]+=M,A[1]-=M}function G(A,C,E,O){var M=C.length;if(!A.onBand||E||!M)return;var L=A.getExtent(),H,U;if(M===1)C[0].coord=L[0],H=C[1]={coord:L[0]};else{var ct=C[M-1].tickValue-C[0].tickValue,st=(C[M-1].coord-C[0].coord)/ct;Object(B.k)(C,function(St){St.coord-=st/2});var vt=A.scale.getExtent();U=1+vt[1]-C[M-1].tickValue,H={coord:C[M-1].coord+st*U},C.push(H)}var it=L[0]>L[1];dt(C[0].coord,L[0])&&(O?C[0].coord=L[0]:C.shift()),O&&dt(L[0],C[0].coord)&&C.unshift({coord:L[0]}),dt(L[1],H.coord)&&(O?H.coord=L[1]:C.pop()),O&&dt(H.coord,L[1])&&C.push({coord:L[1]});function dt(St,ut){return St=Object(bt.v)(St),ut=Object(bt.v)(ut),it?St>ut:St<ut}}var I=nt.a=K},"Tey+":function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("v+az"),k=b("uSNo"),ft=[],ot=function(gt){Object(B.a)(lt,gt);function lt(){var z=gt!==null&&gt.apply(this,arguments)||this;return z.notClear=!0,z.incremental=!0,z._displayables=[],z._temporaryDisplayables=[],z._cursor=0,z}return lt.prototype.traverse=function(z,X){z.call(X,this)},lt.prototype.useStyle=function(){this.style={}},lt.prototype.getCursor=function(){return this._cursor},lt.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},lt.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},lt.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},lt.prototype.addDisplayable=function(z,X){X?this._temporaryDisplayables.push(z):this._displayables.push(z),this.markRedraw()},lt.prototype.addDisplayables=function(z,X){X=X||!1;for(var J=0;J<z.length;J++)this.addDisplayable(z[J],X)},lt.prototype.getDisplayables=function(){return this._displayables},lt.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},lt.prototype.eachPendingDisplayable=function(z){for(var X=this._cursor;X<this._displayables.length;X++)z&&z(this._displayables[X]);for(var X=0;X<this._temporaryDisplayables.length;X++)z&&z(this._temporaryDisplayables[X])},lt.prototype.update=function(){this.updateTransform();for(var z=this._cursor;z<this._displayables.length;z++){var X=this._displayables[z];X.parent=this,X.update(),X.parent=null}for(var z=0;z<this._temporaryDisplayables.length;z++){var X=this._temporaryDisplayables[z];X.parent=this,X.update(),X.parent=null}},lt.prototype.getBoundingRect=function(){if(!this._rect){for(var z=new k.a(Infinity,Infinity,-Infinity,-Infinity),X=0;X<this._displayables.length;X++){var J=this._displayables[X],at=J.getBoundingRect().clone();J.needLocalTransform()&&at.applyTransform(J.getLocalTransform(ft)),z.union(at)}this._rect=z}return this._rect},lt.prototype.contain=function(z,X){var J=this.transformCoordToLocal(z,X),at=this.getBoundingRect();if(at.contain(J[0],J[1]))for(var F=0;F<this._displayables.length;F++){var Z=this._displayables[F];if(Z.contain(z,X))return!0}return!1},lt}(bt.c);nt.a=ot},"To/5":function(je,nt,b){"use strict";b.d(nt,"c",function(){return et}),b.d(nt,"b",function(){return N});var B=b("c5Gk"),bt=b("V07C"),k=b("20Jt"),ft=b("bPXU"),ot=b("KapR"),gt=b("bSX3"),lt=b("Eb29"),z=b("uSNo"),X=b("v+az"),J=b("baNC"),at={fill:"#000"},F=2,Z={style:Object(ft.i)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},X.a.style)},W=function(E){Object(B.a)(O,E);function O(M){var L=E.call(this)||this;return L.type="text",L._children=[],L._defaultStyle=at,L.attr(M),L}return O.prototype.childrenRef=function(){return this._children},O.prototype.update=function(){E.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var M=0;M<this._children.length;M++){var L=this._children[M];L.zlevel=this.zlevel,L.z=this.z,L.z2=this.z2,L.culling=this.culling,L.cursor=this.cursor,L.invisible=this.invisible}},O.prototype.updateTransform=function(){var M=this.innerTransformable;M?(M.updateTransform(),M.transform&&(this.transform=M.transform)):E.prototype.updateTransform.call(this)},O.prototype.getLocalTransform=function(M){var L=this.innerTransformable;return L?L.getLocalTransform(M):E.prototype.getLocalTransform.call(this,M)},O.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),E.prototype.getComputedTransform.call(this)},O.prototype._updateSubTexts=function(){this._childCursor=0,Y(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},O.prototype.addSelfToZr=function(M){E.prototype.addSelfToZr.call(this,M);for(var L=0;L<this._children.length;L++)this._children[L].__zr=M},O.prototype.removeSelfFromZr=function(M){E.prototype.removeSelfFromZr.call(this,M);for(var L=0;L<this._children.length;L++)this._children[L].__zr=null},O.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var M=new z.a(0,0,0,0),L=this._children,H=[],U=null,ct=0;ct<L.length;ct++){var st=L[ct],vt=st.getBoundingRect(),it=st.getLocalTransform(H);it?(M.copy(vt),M.applyTransform(it),U=U||M.clone(),U.union(M)):(U=U||vt.clone(),U.union(vt))}this._rect=U||M}return this._rect},O.prototype.setDefaultTextStyle=function(M){this._defaultStyle=M||at},O.prototype.setTextContent=function(M){},O.prototype._mergeStyle=function(M,L){if(!L)return M;var H=L.rich,U=M.rich||H&&{};return Object(ft.m)(M,L),H&&U?(this._mergeRich(U,H),M.rich=U):U&&(M.rich=U),M},O.prototype._mergeRich=function(M,L){for(var H=Object(ft.F)(L),U=0;U<H.length;U++){var ct=H[U];M[ct]=M[ct]||{},Object(ft.m)(M[ct],L[ct])}},O.prototype.getAnimationStyleProps=function(){return Z},O.prototype._getOrCreateChild=function(M){var L=this._children[this._childCursor];return(!L||!(L instanceof M))&&(L=new M),this._children[this._childCursor++]=L,L.__zr=this.__zr,L.parent=this,L},O.prototype._updatePlainTexts=function(){var M=this.style,L=M.font||J.a,H=M.padding,U=A(M),ct=Object(bt.a)(U,M),st=C(M),vt=!!M.backgroundColor,it=ct.outerHeight,dt=ct.outerWidth,St=ct.contentWidth,ut=ct.lines,yt=ct.lineHeight,Ot=this._defaultStyle,At=M.x||0,It=M.y||0,Ct=M.align||Ot.align||"left",Ft=M.verticalAlign||Ot.verticalAlign||"top",zt=At,Xt=Object(ot.b)(It,ct.contentHeight,Ft);if(st||H){var ie=Object(ot.a)(At,dt,Ct),oe=Object(ot.b)(It,it,Ft);st&&this._renderBackground(M,M,ie,oe,dt,it)}Xt+=yt/2,H&&(zt=I(At,Ct,H),Ft==="top"?Xt+=H[0]:Ft==="bottom"&&(Xt-=H[2]));for(var he=0,be=!1,Ce=G("fill"in M?M.fill:(be=!0,Ot.fill)),Fe=V("stroke"in M?M.stroke:!vt&&(!Ot.autoStroke||be)?(he=F,Ot.stroke):null),Bt=M.textShadowBlur>0,Tt=M.width!=null&&(M.overflow==="truncate"||M.overflow==="break"||M.overflow==="breakAll"),Mt=ct.calculatedLineHeight,Ut=0;Ut<ut.length;Ut++){var se=this._getOrCreateChild(k.a),ge=se.createStyle();se.useStyle(ge),ge.text=ut[Ut],ge.x=zt,ge.y=Xt,Ct&&(ge.textAlign=Ct),ge.textBaseline="middle",ge.opacity=M.opacity,ge.strokeFirst=!0,Bt&&(ge.shadowBlur=M.textShadowBlur||0,ge.shadowColor=M.textShadowColor||"transparent",ge.shadowOffsetX=M.textShadowOffsetX||0,ge.shadowOffsetY=M.textShadowOffsetY||0),ge.stroke=Fe,ge.fill=Ce,Fe&&(ge.lineWidth=M.lineWidth||he,ge.lineDash=M.lineDash,ge.lineDashOffset=M.lineDashOffset||0),ge.font=L,$(ge,M),Xt+=yt,Tt&&se.setBoundingRect(new z.a(Object(ot.a)(ge.x,M.width,ge.textAlign),Object(ot.b)(ge.y,Mt,ge.textBaseline),St,Mt))}},O.prototype._updateRichTexts=function(){var M=this.style,L=A(M),H=Object(bt.b)(L,M),U=H.width,ct=H.outerWidth,st=H.outerHeight,vt=M.padding,it=M.x||0,dt=M.y||0,St=this._defaultStyle,ut=M.align||St.align,yt=M.verticalAlign||St.verticalAlign,Ot=Object(ot.a)(it,ct,ut),At=Object(ot.b)(dt,st,yt),It=Ot,Ct=At;vt&&(It+=vt[3],Ct+=vt[0]);var Ft=It+U;C(M)&&this._renderBackground(M,M,Ot,At,ct,st);for(var zt=!!M.backgroundColor,Xt=0;Xt<H.lines.length;Xt++){for(var ie=H.lines[Xt],oe=ie.tokens,he=oe.length,be=ie.lineHeight,Ce=ie.width,Fe=0,Bt=It,Tt=Ft,Mt=he-1,Ut=void 0;Fe<he&&(Ut=oe[Fe],!Ut.align||Ut.align==="left");)this._placeToken(Ut,M,be,Ct,Bt,"left",zt),Ce-=Ut.width,Bt+=Ut.width,Fe++;for(;Mt>=0&&(Ut=oe[Mt],Ut.align==="right");)this._placeToken(Ut,M,be,Ct,Tt,"right",zt),Ce-=Ut.width,Tt-=Ut.width,Mt--;for(Bt+=(U-(Bt-It)-(Ft-Tt)-Ce)/2;Fe<=Mt;)Ut=oe[Fe],this._placeToken(Ut,M,be,Ct,Bt+Ut.width/2,"center",zt),Bt+=Ut.width,Fe++;Ct+=be}},O.prototype._placeToken=function(M,L,H,U,ct,st,vt){var it=L.rich[M.styleName]||{};it.text=M.text;var dt=M.verticalAlign,St=U+H/2;dt==="top"?St=U+M.height/2:dt==="bottom"&&(St=U+H-M.height/2);var ut=!M.isLineHolder&&C(it);ut&&this._renderBackground(it,L,st==="right"?ct-M.width:st==="center"?ct-M.width/2:ct,St-M.height/2,M.width,M.height);var yt=!!it.backgroundColor,Ot=M.textPadding;Ot&&(ct=I(ct,st,Ot),St-=M.height/2-Ot[0]-M.innerHeight/2);var At=this._getOrCreateChild(k.a),It=At.createStyle();At.useStyle(It);var Ct=this._defaultStyle,Ft=!1,zt=0,Xt=G("fill"in it?it.fill:"fill"in L?L.fill:(Ft=!0,Ct.fill)),ie=V("stroke"in it?it.stroke:"stroke"in L?L.stroke:!yt&&!vt&&(!Ct.autoStroke||Ft)?(zt=F,Ct.stroke):null),oe=it.textShadowBlur>0||L.textShadowBlur>0;It.text=M.text,It.x=ct,It.y=St,oe&&(It.shadowBlur=it.textShadowBlur||L.textShadowBlur||0,It.shadowColor=it.textShadowColor||L.textShadowColor||"transparent",It.shadowOffsetX=it.textShadowOffsetX||L.textShadowOffsetX||0,It.shadowOffsetY=it.textShadowOffsetY||L.textShadowOffsetY||0),It.textAlign=st,It.textBaseline="middle",It.font=M.font||J.a,It.opacity=Object(ft.Q)(it.opacity,L.opacity,1),$(It,it),ie&&(It.lineWidth=Object(ft.Q)(it.lineWidth,L.lineWidth,zt),It.lineDash=Object(ft.P)(it.lineDash,L.lineDash),It.lineDashOffset=L.lineDashOffset||0,It.stroke=ie),Xt&&(It.fill=Xt);var he=M.contentWidth,be=M.contentHeight;At.setBoundingRect(new z.a(Object(ot.a)(It.x,he,It.textAlign),Object(ot.b)(It.y,be,It.textBaseline),he,be))},O.prototype._renderBackground=function(M,L,H,U,ct,st){var vt=M.backgroundColor,it=M.borderWidth,dt=M.borderColor,St=vt&&vt.image,ut=vt&&!St,yt=M.borderRadius,Ot=this,At,It;if(ut||M.lineHeight||it&&dt){At=this._getOrCreateChild(lt.a),At.useStyle(At.createStyle()),At.style.fill=null;var Ct=At.shape;Ct.x=H,Ct.y=U,Ct.width=ct,Ct.height=st,Ct.r=yt,At.dirtyShape()}if(ut){var Ft=At.style;Ft.fill=vt||null,Ft.fillOpacity=Object(ft.P)(M.fillOpacity,1)}else if(St){It=this._getOrCreateChild(gt.a),It.onload=function(){Ot.dirtyStyle()};var zt=It.style;zt.image=vt.image,zt.x=H,zt.y=U,zt.width=ct,zt.height=st}if(it&&dt){var Ft=At.style;Ft.lineWidth=it,Ft.stroke=dt,Ft.strokeOpacity=Object(ft.P)(M.strokeOpacity,1),Ft.lineDash=M.borderDash,Ft.lineDashOffset=M.borderDashOffset||0,At.strokeContainThreshold=0,At.hasFill()&&At.hasStroke()&&(Ft.strokeFirst=!0,Ft.lineWidth*=2)}var Xt=(At||It).style;Xt.shadowBlur=M.shadowBlur||0,Xt.shadowColor=M.shadowColor||"transparent",Xt.shadowOffsetX=M.shadowOffsetX||0,Xt.shadowOffsetY=M.shadowOffsetY||0,Xt.opacity=Object(ft.Q)(M.opacity,L.opacity,1)},O.makeFont=function(M){var L="";return N(M)&&(L=[M.fontStyle,M.fontWeight,et(M.fontSize),M.fontFamily||"sans-serif"].join(" ")),L&&Object(ft.T)(L)||M.textFont||M.font},O}(X.c),ht={left:!0,right:1,center:1},q={top:1,bottom:1,middle:1},g=["fontStyle","fontWeight","fontSize","fontFamily"];function et(E){return typeof E=="string"&&(E.indexOf("px")!==-1||E.indexOf("rem")!==-1||E.indexOf("em")!==-1)?E:isNaN(+E)?J.c+"px":E+"px"}function $(E,O){for(var M=0;M<g.length;M++){var L=g[M],H=O[L];H!=null&&(E[L]=H)}}function N(E){return E.fontSize!=null||E.fontFamily||E.fontWeight}function Y(E){return K(E),Object(ft.k)(E.rich,K),E}function K(E){if(E){E.font=W.makeFont(E);var O=E.align;O==="middle"&&(O="center"),E.align=O==null||ht[O]?O:"left";var M=E.verticalAlign;M==="center"&&(M="middle"),E.verticalAlign=M==null||q[M]?M:"top";var L=E.padding;L&&(E.padding=Object(ft.M)(E.padding))}}function V(E,O){return E==null||O<=0||E==="transparent"||E==="none"?null:E.image||E.colorStops?"#000":E}function G(E){return E==null||E==="none"?null:E.image||E.colorStops?"#000":E}function I(E,O,M){return O==="right"?E-M[1]:O==="center"?E+M[3]/2-M[1]/2:E+M[3]}function A(E){var O=E.text;return O!=null&&(O+=""),O}function C(E){return!!(E.backgroundColor||E.lineHeight||E.borderWidth&&E.borderColor)}nt.a=W},Tukj:function(je,nt,b){"use strict";b.r(nt),b.d(nt,"extendShape",function(){return U}),b.d(nt,"extendPath",function(){return st}),b.d(nt,"registerShape",function(){return vt}),b.d(nt,"getShapeClass",function(){return it}),b.d(nt,"makePath",function(){return dt}),b.d(nt,"makeImage",function(){return St}),b.d(nt,"mergePath",function(){return yt}),b.d(nt,"resizePath",function(){return Ot}),b.d(nt,"subPixelOptimizeLine",function(){return At}),b.d(nt,"subPixelOptimizeRect",function(){return It}),b.d(nt,"subPixelOptimize",function(){return Ct}),b.d(nt,"getTransform",function(){return Ft}),b.d(nt,"applyTransform",function(){return zt}),b.d(nt,"transformDirection",function(){return Xt}),b.d(nt,"groupTransition",function(){return he}),b.d(nt,"clipPointsByRect",function(){return be}),b.d(nt,"clipRectByRect",function(){return Ce}),b.d(nt,"createIcon",function(){return Fe}),b.d(nt,"linePolygonIntersect",function(){return Bt}),b.d(nt,"lineLineIntersect",function(){return Tt}),b.d(nt,"setTooltipConfig",function(){return se}),b.d(nt,"traverseElements",function(){return He});var B=b("UHcy"),bt=b("OjCH"),k=b("FLFE"),ft=b("ryx4");b.d(nt,"Path",function(){return ft.b});var ot=b("eASH"),gt=b("bSX3");b.d(nt,"Image",function(){return gt.a});var lt=b("fvwW");b.d(nt,"Group",function(){return lt.a});var z=b("To/5");b.d(nt,"Text",function(){return z.a});var X=b("OGI8");b.d(nt,"Circle",function(){return X.a});var J=b("mjKY");b.d(nt,"Ellipse",function(){return J.a});var at=b("3Vaj");b.d(nt,"Sector",function(){return at.a});var F=b("yuVo");b.d(nt,"Ring",function(){return F.a});var Z=b("WMlo");b.d(nt,"Polygon",function(){return Z.a});var W=b("syXZ");b.d(nt,"Polyline",function(){return W.a});var ht=b("Eb29");b.d(nt,"Rect",function(){return ht.a});var q=b("QrW4");b.d(nt,"Line",function(){return q.a});var g=b("dfBh");b.d(nt,"BezierCurve",function(){return g.a});var et=b("MiEP");b.d(nt,"Arc",function(){return et.a});var $=b("mSnZ");b.d(nt,"CompoundPath",function(){return $.a});var N=b("zLe5");b.d(nt,"LinearGradient",function(){return N.a});var Y=b("CSOx");b.d(nt,"RadialGradient",function(){return Y.a});var K=b("uSNo");b.d(nt,"BoundingRect",function(){return K.a});var V=b("zhsV");b.d(nt,"OrientedBoundingRect",function(){return V.a});var G=b("iAFd");b.d(nt,"Point",function(){return G.a});var I=b("Tey+");b.d(nt,"IncrementalDisplayable",function(){return I.a});var A=b("ZYtA"),C=b("bPXU"),E=b("+aTT"),O=b("eV5c");b.d(nt,"updateProps",function(){return O.h}),b.d(nt,"initProps",function(){return O.c}),b.d(nt,"removeElement",function(){return O.e}),b.d(nt,"removeElementWithFadeOut",function(){return O.f}),b.d(nt,"isElementRemoved",function(){return O.d});var M=Math.max,L=Math.min,H={};function U(Me){return ft.b.extend(Me)}var ct=B.c;function st(Me,We){return ct(Me,We)}function vt(Me,We){H[Me]=We}function it(Me){if(H.hasOwnProperty(Me))return H[Me]}function dt(Me,We,Ke,qe){var Qt=B.b(Me,We);return Ke&&(qe==="center"&&(Ke=ut(Ke,Qt.getBoundingRect())),Ot(Qt,Ke)),Qt}function St(Me,We,Ke){var qe=new gt.a({style:{image:Me,x:We.x,y:We.y,width:We.width,height:We.height},onload:function(Qt){if(Ke==="center"){var Se={width:Qt.width,height:Qt.height};qe.setStyle(ut(We,Se))}}});return qe}function ut(Me,We){var Ke=We.width/We.height,qe=Me.height*Ke,Qt;qe<=Me.width?Qt=Me.height:(qe=Me.width,Qt=qe/Ke);var Se=Me.x+Me.width/2,Ve=Me.y+Me.height/2;return{x:Se-qe/2,y:Ve-Qt/2,width:qe,height:Qt}}var yt=B.d;function Ot(Me,We){if(!!Me.applyTransform){var Ke=Me.getBoundingRect(),qe=Ke.calculateTransform(We);Me.applyTransform(qe)}}function At(Me){return A.b(Me.shape,Me.shape,Me.style),Me}function It(Me){return A.c(Me.shape,Me.shape,Me.style),Me}var Ct=A.a;function Ft(Me,We){for(var Ke=bt.d([]);Me&&Me!==We;)bt.f(Ke,Me.getLocalTransform(),Ke),Me=Me.parent;return Ke}function zt(Me,We,Ke){return We&&!Object(C.u)(We)&&(We=ot.c.getLocalTransform(We)),Ke&&(We=bt.e([],We)),k.b([],Me,We)}function Xt(Me,We,Ke){var qe=We[4]===0||We[5]===0||We[0]===0?1:Math.abs(2*We[4]/We[0]),Qt=We[4]===0||We[5]===0||We[2]===0?1:Math.abs(2*We[4]/We[2]),Se=[Me==="left"?-qe:Me==="right"?qe:0,Me==="top"?-Qt:Me==="bottom"?Qt:0];return Se=zt(Se,We,Ke),Math.abs(Se[0])>Math.abs(Se[1])?Se[0]>0?"right":"left":Se[1]>0?"bottom":"top"}function ie(Me){return!Me.isGroup}function oe(Me){return Me.shape!=null}function he(Me,We,Ke){if(!Me||!We)return;function qe(Ve){var Ie={};return Ve.traverse(function(Zt){ie(Zt)&&Zt.anid&&(Ie[Zt.anid]=Zt)}),Ie}function Qt(Ve){var Ie={x:Ve.x,y:Ve.y,rotation:Ve.rotation};return oe(Ve)&&(Ie.shape=Object(C.m)({},Ve.shape)),Ie}var Se=qe(Me);We.traverse(function(Ve){if(ie(Ve)&&Ve.anid){var Ie=Se[Ve.anid];if(Ie){var Zt=Qt(Ve);Ve.attr(Qt(Ie)),Object(O.h)(Ve,Zt,Ke,Object(E.a)(Ve).dataIndex)}}})}function be(Me,We){return Object(C.H)(Me,function(Ke){var qe=Ke[0];qe=M(qe,We.x),qe=L(qe,We.x+We.width);var Qt=Ke[1];return Qt=M(Qt,We.y),Qt=L(Qt,We.y+We.height),[qe,Qt]})}function Ce(Me,We){var Ke=M(Me.x,We.x),qe=L(Me.x+Me.width,We.x+We.width),Qt=M(Me.y,We.y),Se=L(Me.y+Me.height,We.y+We.height);if(qe>=Ke&&Se>=Qt)return{x:Ke,y:Qt,width:qe-Ke,height:Se-Qt}}function Fe(Me,We,Ke){var qe=Object(C.m)({rectHover:!0},We),Qt=qe.style={strokeNoScale:!0};if(Ke=Ke||{x:-1,y:-1,width:2,height:2},Me)return Me.indexOf("image://")===0?(Qt.image=Me.slice(8),Object(C.i)(Qt,Ke),new gt.a(qe)):dt(Me.replace("path://",""),qe,Ke,"center")}function Bt(Me,We,Ke,qe,Qt){for(var Se=0,Ve=Qt[Qt.length-1];Se<Qt.length;Se++){var Ie=Qt[Se];if(Tt(Me,We,Ke,qe,Ie[0],Ie[1],Ve[0],Ve[1]))return!0;Ve=Ie}}function Tt(Me,We,Ke,qe,Qt,Se,Ve,Ie){var Zt=Ke-Me,qt=qe-We,le=Ve-Qt,De=Ie-Se,tr=Mt(le,De,Zt,qt);if(Ut(tr))return!1;var nr=Me-Qt,fe=We-Se,Ee=Mt(nr,fe,Zt,qt)/tr;if(Ee<0||Ee>1)return!1;var ke=Mt(nr,fe,le,De)/tr;return!(ke<0||ke>1)}function Mt(Me,We,Ke,qe){return Me*qe-Ke*We}function Ut(Me){return Me<=1e-6&&Me>=-1e-6}function se(Me){var We=Me.itemTooltipOption,Ke=Me.componentModel,qe=Me.itemName,Qt=Object(C.C)(We)?{formatter:We}:We,Se=Ke.mainType,Ve=Ke.componentIndex,Ie={componentType:Se,name:qe,$vars:["name"]};Ie[Se+"Index"]=Ve;var Zt=Me.formatterParamsExtra;Zt&&Object(C.k)(Object(C.F)(Zt),function(le){Object(C.q)(Ie,le)||(Ie[le]=Zt[le],Ie.$vars.push(le))});var qt=Object(E.a)(Me.el);qt.componentMainType=Se,qt.componentIndex=Ve,qt.tooltipConfig={name:qe,option:Object(C.i)({content:qe,formatterParams:Ie},Qt)}}function ge(Me,We){var Ke;Me.isGroup&&(Ke=We(Me)),Ke||Me.traverse(We)}function He(Me,We){if(Me)if(Object(C.t)(Me))for(var Ke=0;Ke<Me.length;Ke++)ge(Me[Ke],We);else ge(Me,We)}vt("circle",X.a),vt("ellipse",J.a),vt("sector",at.a),vt("ring",F.a),vt("polygon",Z.a),vt("polyline",W.a),vt("rect",ht.a),vt("line",q.a),vt("bezierCurve",g.a),vt("arc",et.a)},TxaN:function(je,nt,b){"use strict";b.d(nt,"c",function(){return X}),b.d(nt,"b",function(){return ht}),b.d(nt,"e",function(){return K}),b.d(nt,"d",function(){return V}),b.d(nt,"a",function(){return G});var B=b("euZP"),bt=b("bPXU"),k=b("Nsp3"),ft=b("7M1A"),ot="line-height:1";function gt(I,A){var C=I.color||"#6e7079",E=I.fontSize||12,O=I.fontWeight||"400",M=I.color||"#464646",L=I.fontSize||14,H=I.fontWeight||"900";return A==="html"?{nameStyle:"font-size:"+Object(B.d)(E+"")+"px;color:"+Object(B.d)(C)+";font-weight:"+Object(B.d)(O+""),valueStyle:"font-size:"+Object(B.d)(L+"")+"px;color:"+Object(B.d)(M)+";font-weight:"+Object(B.d)(H+"")}:{nameStyle:{fontSize:E,fill:C,fontWeight:O},valueStyle:{fontSize:L,fill:M,fontWeight:H}}}var lt=[0,10,20,30],z=["",`
`,`

`,`


`];function X(I,A){return A.type=I,A}function J(I){return I.type==="section"}function at(I){return J(I)?Z:W}function F(I){if(J(I)){var A=0,C=I.blocks.length,E=C>1||C>0&&!I.noHeader;return Object(bt.k)(I.blocks,function(O){var M=F(O);M>=A&&(A=M+ +(E&&(!M||J(O)&&!O.noHeader)))}),A}return 0}function Z(I,A,C,E){var O=A.noHeader,M=q(F(A)),L=[],H=A.blocks||[];Object(bt.b)(!H||Object(bt.t)(H)),H=H||[];var U=I.orderMode;if(A.sortBlocks&&U){H=H.slice();var ct={valueAsc:"asc",valueDesc:"desc"};if(Object(bt.q)(ct,U)){var st=new k.a(ct[U],null);H.sort(function(St,ut){return st.evaluate(St.sortParam,ut.sortParam)})}else U==="seriesDesc"&&H.reverse()}Object(bt.k)(H,function(St,ut){var yt=A.valueFormatter,Ot=at(St)(yt?Object(bt.m)(Object(bt.m)({},I),{valueFormatter:yt}):I,St,ut>0?M.html:0,E);Ot!=null&&L.push(Ot)});var vt=I.renderMode==="richText"?L.join(M.richText):g(L.join(""),O?C:M.html);if(O)return vt;var it=Object(B.i)(A.header,"ordinal",I.useUTC),dt=gt(E,I.renderMode).nameStyle;return I.renderMode==="richText"?N(I,it,dt)+M.richText+vt:g('<div style="'+dt+";"+ot+';">'+Object(B.d)(it)+"</div>"+vt,C)}function W(I,A,C,E){var O=I.renderMode,M=A.noName,L=A.noValue,H=!A.markerType,U=A.name,ct=I.useUTC,st=A.valueFormatter||I.valueFormatter||function(Ct){return Ct=Object(bt.t)(Ct)?Ct:[Ct],Object(bt.H)(Ct,function(Ft,zt){return Object(B.i)(Ft,Object(bt.t)(dt)?dt[zt]:dt,ct)})};if(!(M&&L)){var vt=H?"":I.markupStyleCreator.makeTooltipMarker(A.markerType,A.markerColor||"#333",O),it=M?"":Object(B.i)(U,"ordinal",ct),dt=A.valueType,St=L?[]:st(A.value),ut=!H||!M,yt=!H&&M,Ot=gt(E,O),At=Ot.nameStyle,It=Ot.valueStyle;return O==="richText"?(H?"":vt)+(M?"":N(I,it,At))+(L?"":Y(I,St,ut,yt,It)):g((H?"":vt)+(M?"":et(it,!H,At))+(L?"":$(St,ut,yt,It)),C)}}function ht(I,A,C,E,O,M){if(!!I){var L=at(I),H={useUTC:O,renderMode:C,orderMode:E,markupStyleCreator:A,valueFormatter:I.valueFormatter};return L(H,I,0,M)}}function q(I){return{html:lt[I],richText:z[I]}}function g(I,A){var C='<div style="clear:both"></div>',E="margin: "+A+"px 0 0";return'<div style="'+E+";"+ot+';">'+I+C+"</div>"}function et(I,A,C){var E=A?"margin-left:2px":"";return'<span style="'+C+";"+E+'">'+Object(B.d)(I)+"</span>"}function $(I,A,C,E){var O=C?"10px":"20px",M=A?"float:right;margin-left:"+O:"";return I=Object(bt.t)(I)?I:[I],'<span style="'+M+";"+E+'">'+Object(bt.H)(I,function(L){return Object(B.d)(L)}).join("&nbsp;&nbsp;")+"</span>"}function N(I,A,C){return I.markupStyleCreator.wrapRichTextStyle(A,C)}function Y(I,A,C,E,O){var M=[O],L=E?10:20;return C&&M.push({padding:[0,0,0,L],align:"right"}),I.markupStyleCreator.wrapRichTextStyle(Object(bt.t)(A)?A.join("  "):A,M)}function K(I,A){var C=I.getData().getItemVisual(A,"style"),E=C[I.visualDrawType];return Object(B.c)(E)}function V(I,A){var C=I.get("padding");return C!=null?C:A==="richText"?[8,10]:10}var G=function(){function I(){this.richTextStyles={},this._nextStyleNameId=Object(ft.i)()}return I.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},I.prototype.makeTooltipMarker=function(A,C,E){var O=E==="richText"?this._generateStyleName():null,M=Object(B.h)({color:C,type:A,renderMode:E,markerId:O});return Object(bt.C)(M)?M:(this.richTextStyles[O]=M.style,M.content)},I.prototype.wrapRichTextStyle=function(A,C){var E={};Object(bt.t)(C)?Object(bt.k)(C,function(M){return Object(bt.m)(E,M)}):Object(bt.m)(E,C);var O=this._generateStyleName();return this.richTextStyles[O]=E,"{"+O+"|"+A+"}"},I}()},TyZM:function(je,nt,b){"use strict";(function(B){var bt=b("3MMu"),k,ft={};ft.supportWebGL=function(){if(k==null)try{var gt=document.createElement("canvas"),lt=gt.getContext("webgl")||gt.getContext("experimental-webgl");if(!lt)throw new Error}catch(z){k=!1}return k},ft.Int8Array=typeof Int8Array=="undefined"?Array:Int8Array,ft.Uint8Array=typeof Uint8Array=="undefined"?Array:Uint8Array,ft.Uint16Array=typeof Uint16Array=="undefined"?Array:Uint16Array,ft.Uint32Array=typeof Uint32Array=="undefined"?Array:Uint32Array,ft.Int16Array=typeof Int16Array=="undefined"?Array:Int16Array,ft.Float32Array=typeof Float32Array=="undefined"?Array:Float32Array,ft.Float64Array=typeof Float64Array=="undefined"?Array:Float64Array;var ot={};typeof window!="undefined"?ot=window:typeof B!="undefined"&&(ot=B),ft.requestAnimationFrame=ot.requestAnimationFrame||ot.msRequestAnimationFrame||ot.mozRequestAnimationFrame||ot.webkitRequestAnimationFrame||function(gt){setTimeout(gt,16)},ft.createCanvas=function(){return document.createElement("canvas")},ft.createImage=function(){return new ot.Image},ft.request={get:bt.a.get},ft.addEventListener=function(gt,lt,z,X){gt.addEventListener(lt,z,X)},ft.removeEventListener=function(gt,lt,z){gt.removeEventListener(lt,z)},nt.a=ft}).call(this,b("QLrv"))},U3bR:function(je,nt,b){"use strict";var B=b("fvwW"),bt=b("C9tP"),k=b("YN2f"),ft=function(){function ot(){this.group=new B.a,this.uid=bt.c("viewComponent")}return ot.prototype.init=function(gt,lt){},ot.prototype.render=function(gt,lt,z,X){},ot.prototype.dispose=function(gt,lt){},ot.prototype.updateView=function(gt,lt,z,X){},ot.prototype.updateLayout=function(gt,lt,z,X){},ot.prototype.updateVisual=function(gt,lt,z,X){},ot.prototype.blurSeries=function(gt,lt){},ot.prototype.eachRendered=function(gt){var lt=this.group;lt&&lt.traverse(gt)},ot}();k.b(ft),k.c(ft),nt.a=ft},UHcy:function(je,nt,b){"use strict";b.d(nt,"b",function(){return I}),b.d(nt,"c",function(){return A}),b.d(nt,"d",function(){return C}),b.d(nt,"a",function(){return E});var B=b("c5Gk"),bt=b("ryx4"),k=b("I0j4"),ft=b("FLFE"),ot=k.a.CMD,gt=[[],[],[]],lt=Math.sqrt,z=Math.atan2;function X(O,M){if(!!M){var L=O.data,H=O.len(),U,ct,st,vt,it,dt,St=ot.M,ut=ot.C,yt=ot.L,Ot=ot.R,At=ot.A,It=ot.Q;for(st=0,vt=0;st<H;){switch(U=L[st++],vt=st,ct=0,U){case St:ct=1;break;case yt:ct=1;break;case ut:ct=3;break;case It:ct=2;break;case At:var Ct=M[4],Ft=M[5],zt=lt(M[0]*M[0]+M[1]*M[1]),Xt=lt(M[2]*M[2]+M[3]*M[3]),ie=z(-M[1]/Xt,M[0]/zt);L[st]*=zt,L[st++]+=Ct,L[st]*=Xt,L[st++]+=Ft,L[st++]*=zt,L[st++]*=Xt,L[st++]+=ie,L[st++]+=ie,st+=2,vt=st;break;case Ot:dt[0]=L[st++],dt[1]=L[st++],Object(ft.b)(dt,dt,M),L[vt++]=dt[0],L[vt++]=dt[1],dt[0]+=L[st++],dt[1]+=L[st++],Object(ft.b)(dt,dt,M),L[vt++]=dt[0],L[vt++]=dt[1]}for(it=0;it<ct;it++){var oe=gt[it];oe[0]=L[st++],oe[1]=L[st++],Object(ft.b)(oe,oe,M),L[vt++]=oe[0],L[vt++]=oe[1]}}O.increaseVersion()}}var J=b("bPXU"),at=Math.sqrt,F=Math.sin,Z=Math.cos,W=Math.PI;function ht(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])}function q(O,M){return(O[0]*M[0]+O[1]*M[1])/(ht(O)*ht(M))}function g(O,M){return(O[0]*M[1]<O[1]*M[0]?-1:1)*Math.acos(q(O,M))}function et(O,M,L,H,U,ct,st,vt,it,dt,St){var ut=it*(W/180),yt=Z(ut)*(O-L)/2+F(ut)*(M-H)/2,Ot=-1*F(ut)*(O-L)/2+Z(ut)*(M-H)/2,At=yt*yt/(st*st)+Ot*Ot/(vt*vt);At>1&&(st*=at(At),vt*=at(At));var It=(U===ct?-1:1)*at((st*st*(vt*vt)-st*st*(Ot*Ot)-vt*vt*(yt*yt))/(st*st*(Ot*Ot)+vt*vt*(yt*yt)))||0,Ct=It*st*Ot/vt,Ft=It*-vt*yt/st,zt=(O+L)/2+Z(ut)*Ct-F(ut)*Ft,Xt=(M+H)/2+F(ut)*Ct+Z(ut)*Ft,ie=g([1,0],[(yt-Ct)/st,(Ot-Ft)/vt]),oe=[(yt-Ct)/st,(Ot-Ft)/vt],he=[(-1*yt-Ct)/st,(-1*Ot-Ft)/vt],be=g(oe,he);if(q(oe,he)<=-1&&(be=W),q(oe,he)>=1&&(be=0),be<0){var Ce=Math.round(be/W*1e6)/1e6;be=W*2+Ce%2*W}St.addData(dt,zt,Xt,st,vt,ie,be,ut,ct)}var $=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,N=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Y(O){var M=new k.a;if(!O)return M;var L=0,H=0,U=L,ct=H,st,vt=k.a.CMD,it=O.match($);if(!it)return M;for(var dt=0;dt<it.length;dt++){for(var St=it[dt],ut=St.charAt(0),yt=void 0,Ot=St.match(N)||[],At=Ot.length,It=0;It<At;It++)Ot[It]=parseFloat(Ot[It]);for(var Ct=0;Ct<At;){var Ft=void 0,zt=void 0,Xt=void 0,ie=void 0,oe=void 0,he=void 0,be=void 0,Ce=L,Fe=H,Bt=void 0,Tt=void 0;switch(ut){case"l":L+=Ot[Ct++],H+=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"L":L=Ot[Ct++],H=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"m":L+=Ot[Ct++],H+=Ot[Ct++],yt=vt.M,M.addData(yt,L,H),U=L,ct=H,ut="l";break;case"M":L=Ot[Ct++],H=Ot[Ct++],yt=vt.M,M.addData(yt,L,H),U=L,ct=H,ut="L";break;case"h":L+=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"H":L=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"v":H+=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"V":H=Ot[Ct++],yt=vt.L,M.addData(yt,L,H);break;case"C":yt=vt.C,M.addData(yt,Ot[Ct++],Ot[Ct++],Ot[Ct++],Ot[Ct++],Ot[Ct++],Ot[Ct++]),L=Ot[Ct-2],H=Ot[Ct-1];break;case"c":yt=vt.C,M.addData(yt,Ot[Ct++]+L,Ot[Ct++]+H,Ot[Ct++]+L,Ot[Ct++]+H,Ot[Ct++]+L,Ot[Ct++]+H),L+=Ot[Ct-2],H+=Ot[Ct-1];break;case"S":Ft=L,zt=H,Bt=M.len(),Tt=M.data,st===vt.C&&(Ft+=L-Tt[Bt-4],zt+=H-Tt[Bt-3]),yt=vt.C,Ce=Ot[Ct++],Fe=Ot[Ct++],L=Ot[Ct++],H=Ot[Ct++],M.addData(yt,Ft,zt,Ce,Fe,L,H);break;case"s":Ft=L,zt=H,Bt=M.len(),Tt=M.data,st===vt.C&&(Ft+=L-Tt[Bt-4],zt+=H-Tt[Bt-3]),yt=vt.C,Ce=L+Ot[Ct++],Fe=H+Ot[Ct++],L+=Ot[Ct++],H+=Ot[Ct++],M.addData(yt,Ft,zt,Ce,Fe,L,H);break;case"Q":Ce=Ot[Ct++],Fe=Ot[Ct++],L=Ot[Ct++],H=Ot[Ct++],yt=vt.Q,M.addData(yt,Ce,Fe,L,H);break;case"q":Ce=Ot[Ct++]+L,Fe=Ot[Ct++]+H,L+=Ot[Ct++],H+=Ot[Ct++],yt=vt.Q,M.addData(yt,Ce,Fe,L,H);break;case"T":Ft=L,zt=H,Bt=M.len(),Tt=M.data,st===vt.Q&&(Ft+=L-Tt[Bt-4],zt+=H-Tt[Bt-3]),L=Ot[Ct++],H=Ot[Ct++],yt=vt.Q,M.addData(yt,Ft,zt,L,H);break;case"t":Ft=L,zt=H,Bt=M.len(),Tt=M.data,st===vt.Q&&(Ft+=L-Tt[Bt-4],zt+=H-Tt[Bt-3]),L+=Ot[Ct++],H+=Ot[Ct++],yt=vt.Q,M.addData(yt,Ft,zt,L,H);break;case"A":Xt=Ot[Ct++],ie=Ot[Ct++],oe=Ot[Ct++],he=Ot[Ct++],be=Ot[Ct++],Ce=L,Fe=H,L=Ot[Ct++],H=Ot[Ct++],yt=vt.A,et(Ce,Fe,L,H,he,be,Xt,ie,oe,yt,M);break;case"a":Xt=Ot[Ct++],ie=Ot[Ct++],oe=Ot[Ct++],he=Ot[Ct++],be=Ot[Ct++],Ce=L,Fe=H,L+=Ot[Ct++],H+=Ot[Ct++],yt=vt.A,et(Ce,Fe,L,H,he,be,Xt,ie,oe,yt,M);break}}(ut==="z"||ut==="Z")&&(yt=vt.Z,M.addData(yt),L=U,H=ct),st=yt}return M.toStatic(),M}var K=function(O){Object(B.a)(M,O);function M(){return O!==null&&O.apply(this,arguments)||this}return M.prototype.applyTransform=function(L){},M}(bt.b);function V(O){return O.setData!=null}function G(O,M){var L=Y(O),H=Object(J.m)({},M);return H.buildPath=function(U){if(V(U)){U.setData(L.data);var ct=U.getContext();ct&&U.rebuildPath(ct,1)}else{var ct=U;L.rebuildPath(ct,1)}},H.applyTransform=function(U){X(L,U),this.dirtyShape()},H}function I(O,M){return new K(G(O,M))}function A(O,M){var L=G(O,M),H=function(U){Object(B.a)(ct,U);function ct(st){var vt=U.call(this,st)||this;return vt.applyTransform=L.applyTransform,vt.buildPath=L.buildPath,vt}return ct}(K);return H}function C(O,M){for(var L=[],H=O.length,U=0;U<H;U++){var ct=O[U];L.push(ct.getUpdatedPathProxy(!0))}var st=new bt.b(M);return st.createPathProxy(),st.buildPath=function(vt){if(V(vt)){vt.appendPath(L);var it=vt.getContext();it&&vt.rebuildPath(it,1)}},st}function E(O,M){M=M||{};var L=new bt.b;return O.shape&&L.setShape(O.shape),L.setStyle(O.style),M.bakeTransform?X(L.path,O.getComputedTransform()):M.toLocal?L.setLocalTransform(O.getComputedTransform()):L.copyTransform(O),L.buildPath=O.buildPath,L.applyTransform=L.applyTransform,L.z=O.z,L.z2=O.z2,L.zlevel=O.zlevel,L}},UNs0:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("2zTA"),k=b("Z7PX"),ft=b("H9JY"),ot=b("bPXU"),gt=function(lt){Object(B.a)(z,lt);function z(X){var J=lt.call(this,X)||this;J.type="ordinal";var at=J.getSetting("ordinalMeta");return at||(at=new k.a({})),Object(ot.t)(at)&&(at=new k.a({categories:Object(ot.H)(at,function(F){return Object(ot.A)(F)?F.value:F})})),J._ordinalMeta=at,J._extent=J.getSetting("extent")||[0,at.categories.length-1],J}return z.prototype.parse=function(X){return Object(ot.C)(X)?this._ordinalMeta.getOrdinal(X):Math.round(X)},z.prototype.contain=function(X){return X=this.parse(X),ft.a(X,this._extent)&&this._ordinalMeta.categories[X]!=null},z.prototype.normalize=function(X){return X=this._getTickNumber(this.parse(X)),ft.f(X,this._extent)},z.prototype.scale=function(X){return X=Math.round(ft.g(X,this._extent)),this.getRawOrdinalNumber(X)},z.prototype.getTicks=function(){for(var X=[],J=this._extent,at=J[0];at<=J[1];)X.push({value:at}),at++;return X},z.prototype.getMinorTicks=function(X){},z.prototype.setSortInfo=function(X){if(X==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var J=X.ordinalNumbers,at=this._ordinalNumbersByTick=[],F=this._ticksByOrdinalNumber=[],Z=0,W=this._ordinalMeta.categories.length,ht=Math.min(W,J.length);Z<ht;++Z){var q=J[Z];at[Z]=q,F[q]=Z}for(var g=0;Z<W;++Z){for(;F[g]!=null;)g++;at.push(g),F[g]=Z}},z.prototype._getTickNumber=function(X){var J=this._ticksByOrdinalNumber;return J&&X>=0&&X<J.length?J[X]:X},z.prototype.getRawOrdinalNumber=function(X){var J=this._ordinalNumbersByTick;return J&&X>=0&&X<J.length?J[X]:X},z.prototype.getLabel=function(X){if(!this.isBlank()){var J=this.getRawOrdinalNumber(X.value),at=this._ordinalMeta.categories[J];return at==null?"":at+""}},z.prototype.count=function(){return this._extent[1]-this._extent[0]+1},z.prototype.unionExtentFromData=function(X,J){this.unionExtent(X.getApproximateExtent(J))},z.prototype.isInExtentRange=function(X){return X=this._getTickNumber(X),this._extent[0]<=X&&this._extent[1]>=X},z.prototype.getOrdinalMeta=function(){return this._ordinalMeta},z.prototype.calcNiceTicks=function(){},z.prototype.calcNiceExtent=function(){},z.type="ordinal",z}(bt.a);bt.a.registerClass(gt),nt.a=gt},V07C:function(je,nt,b){"use strict";b.d(nt,"c",function(){return ot}),b.d(nt,"a",function(){return X}),b.d(nt,"b",function(){return Z});var B=b("SfWu"),bt=b("bPXU"),k=b("KapR"),ft=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ot($,N,Y,K,V){if(!N)return"";var G=($+"").split(`
`);V=gt(N,Y,K,V);for(var I=0,A=G.length;I<A;I++)G[I]=lt(G[I],V);return G.join(`
`)}function gt($,N,Y,K){K=K||{};var V=Object(bt.m)({},K);V.font=N,Y=Object(bt.P)(Y,"..."),V.maxIterations=Object(bt.P)(K.maxIterations,2);var G=V.minChar=Object(bt.P)(K.minChar,0);V.cnCharWidth=Object(k.f)("\u56FD",N);var I=V.ascCharWidth=Object(k.f)("a",N);V.placeholder=Object(bt.P)(K.placeholder,"");for(var A=$=Math.max(0,$-1),C=0;C<G&&A>=I;C++)A-=I;var E=Object(k.f)(Y,N);return E>A&&(Y="",E=0),A=$-E,V.ellipsis=Y,V.ellipsisWidth=E,V.contentWidth=A,V.containerWidth=$,V}function lt($,N){var Y=N.containerWidth,K=N.font,V=N.contentWidth;if(!Y)return"";var G=Object(k.f)($,K);if(G<=Y)return $;for(var I=0;;I++){if(G<=V||I>=N.maxIterations){$+=N.ellipsis;break}var A=I===0?z($,V,N.ascCharWidth,N.cnCharWidth):G>0?Math.floor($.length*V/G):0;$=$.substr(0,A),G=Object(k.f)($,K)}return $===""&&($=N.placeholder),$}function z($,N,Y,K){for(var V=0,G=0,I=$.length;G<I&&V<N;G++){var A=$.charCodeAt(G);V+=0<=A&&A<=127?Y:K}return G}function X($,N){$!=null&&($+="");var Y=N.overflow,K=N.padding,V=N.font,G=Y==="truncate",I=Object(k.e)(V),A=Object(bt.P)(N.lineHeight,I),C=!!N.backgroundColor,E=N.lineOverflow==="truncate",O=N.width,M;O!=null&&(Y==="break"||Y==="breakAll")?M=$?et($,N.font,O,Y==="breakAll",0).lines:[]:M=$?$.split(`
`):[];var L=M.length*A,H=Object(bt.P)(N.height,L);if(L>H&&E){var U=Math.floor(H/A);M=M.slice(0,U)}if($&&G&&O!=null)for(var ct=gt(O,V,N.ellipsis,{minChar:N.truncateMinChar,placeholder:N.placeholder}),st=0;st<M.length;st++)M[st]=lt(M[st],ct);for(var vt=H,it=0,st=0;st<M.length;st++)it=Math.max(Object(k.f)(M[st],V),it);O==null&&(O=it);var dt=it;return K&&(vt+=K[0]+K[2],dt+=K[1]+K[3],O+=K[1]+K[3]),C&&(dt=O),{lines:M,height:H,outerWidth:dt,outerHeight:vt,lineHeight:A,calculatedLineHeight:I,contentWidth:it,contentHeight:L,width:O}}var J=function(){function $(){}return $}(),at=function(){function $(N){this.tokens=[],N&&(this.tokens=N)}return $}(),F=function(){function $(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return $}();function Z($,N){var Y=new F;if($!=null&&($+=""),!$)return Y;for(var K=N.width,V=N.height,G=N.overflow,I=(G==="break"||G==="breakAll")&&K!=null?{width:K,accumWidth:0,breakAll:G==="breakAll"}:null,A=ft.lastIndex=0,C;(C=ft.exec($))!=null;){var E=C.index;E>A&&W(Y,$.substring(A,E),N,I),W(Y,C[2],N,I,C[1]),A=ft.lastIndex}A<$.length&&W(Y,$.substring(A,$.length),N,I);var O=[],M=0,L=0,H=N.padding,U=G==="truncate",ct=N.lineOverflow==="truncate";function st(Ce,Fe,Bt){Ce.width=Fe,Ce.lineHeight=Bt,M+=Bt,L=Math.max(L,Fe)}t:for(var vt=0;vt<Y.lines.length;vt++){for(var it=Y.lines[vt],dt=0,St=0,ut=0;ut<it.tokens.length;ut++){var yt=it.tokens[ut],Ot=yt.styleName&&N.rich[yt.styleName]||{},At=yt.textPadding=Ot.padding,It=At?At[1]+At[3]:0,Ct=yt.font=Ot.font||N.font;yt.contentHeight=Object(k.e)(Ct);var Ft=Object(bt.P)(Ot.height,yt.contentHeight);if(yt.innerHeight=Ft,At&&(Ft+=At[0]+At[2]),yt.height=Ft,yt.lineHeight=Object(bt.Q)(Ot.lineHeight,N.lineHeight,Ft),yt.align=Ot&&Ot.align||N.align,yt.verticalAlign=Ot&&Ot.verticalAlign||"middle",ct&&V!=null&&M+yt.lineHeight>V){ut>0?(it.tokens=it.tokens.slice(0,ut),st(it,St,dt),Y.lines=Y.lines.slice(0,vt+1)):Y.lines=Y.lines.slice(0,vt);break t}var zt=Ot.width,Xt=zt==null||zt==="auto";if(typeof zt=="string"&&zt.charAt(zt.length-1)==="%")yt.percentWidth=zt,O.push(yt),yt.contentWidth=Object(k.f)(yt.text,Ct);else{if(Xt){var ie=Ot.backgroundColor,oe=ie&&ie.image;oe&&(oe=B.b(oe),B.c(oe)&&(yt.width=Math.max(yt.width,oe.width*Ft/oe.height)))}var he=U&&K!=null?K-St:null;he!=null&&he<yt.width?!Xt||he<It?(yt.text="",yt.width=yt.contentWidth=0):(yt.text=ot(yt.text,he-It,Ct,N.ellipsis,{minChar:N.truncateMinChar}),yt.width=yt.contentWidth=Object(k.f)(yt.text,Ct)):yt.contentWidth=Object(k.f)(yt.text,Ct)}yt.width+=It,St+=yt.width,Ot&&(dt=Math.max(dt,yt.lineHeight))}st(it,St,dt)}Y.outerWidth=Y.width=Object(bt.P)(K,L),Y.outerHeight=Y.height=Object(bt.P)(V,M),Y.contentHeight=M,Y.contentWidth=L,H&&(Y.outerWidth+=H[1]+H[3],Y.outerHeight+=H[0]+H[2]);for(var vt=0;vt<O.length;vt++){var yt=O[vt],be=yt.percentWidth;yt.width=parseInt(be,10)/100*Y.width}return Y}function W($,N,Y,K,V){var G=N==="",I=V&&Y.rich[V]||{},A=$.lines,C=I.font||Y.font,E=!1,O,M;if(K){var L=I.padding,H=L?L[1]+L[3]:0;if(I.width!=null&&I.width!=="auto"){var U=Object(k.g)(I.width,K.width)+H;A.length>0&&U+K.accumWidth>K.width&&(O=N.split(`
`),E=!0),K.accumWidth=U}else{var ct=et(N,C,K.width,K.breakAll,K.accumWidth);K.accumWidth=ct.accumWidth+H,M=ct.linesWidths,O=ct.lines}}else O=N.split(`
`);for(var st=0;st<O.length;st++){var vt=O[st],it=new J;if(it.styleName=V,it.text=vt,it.isLineHolder=!vt&&!G,typeof I.width=="number"?it.width=I.width:it.width=M?M[st]:Object(k.f)(vt,C),!st&&!E){var dt=(A[A.length-1]||(A[0]=new at)).tokens,St=dt.length;St===1&&dt[0].isLineHolder?dt[0]=it:(vt||!St||G)&&dt.push(it)}else A.push(new at([it]))}}function ht($){var N=$.charCodeAt(0);return N>=33&&N<=383}var q=Object(bt.N)(",&?/;] ".split(""),function($,N){return $[N]=!0,$},{});function g($){return ht($)?!!q[$]:!0}function et($,N,Y,K,V){for(var G=[],I=[],A="",C="",E=0,O=0,M=0;M<$.length;M++){var L=$.charAt(M);if(L===`
`){C&&(A+=C,O+=E),G.push(A),I.push(O),A="",C="",E=0,O=0;continue}var H=Object(k.f)(L,N),U=K?!1:!g(L);if(G.length?O+H>Y:V+O+H>Y){O?(A||C)&&(U?(A||(A=C,C="",E=0,O=E),G.push(A),I.push(O-E),C+=L,E+=H,A="",O=E):(C&&(A+=C,C="",E=0),G.push(A),I.push(O),A=L,O=H)):U?(G.push(C),I.push(E),C=L,E=H):(G.push(L),I.push(H));continue}O+=H,U?(C+=L,E+=H):(C&&(A+=C,C="",E=0),A+=L)}return!G.length&&!A&&(A=$,C="",E=0),C&&(A+=C),A&&(G.push(A),I.push(O)),G.length===1&&(O+=V),{accumWidth:O,lines:G,linesWidths:I}}},VDD2:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function bt(k,ft){if(k==="china"){var ot=B[ft.name];if(ot){var gt=ft.getCenter();gt[0]+=ot[0]/10.5,gt[1]+=-ot[1]/(10.5/.75),ft.setCenter(gt)}}}},"VtB+":function(je,nt,b){"use strict";var B=b("bPXU");function bt(lt){return"_EC_"+lt}var k=function(){function lt(z){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=z||!1}return lt.prototype.isDirected=function(){return this._directed},lt.prototype.addNode=function(z,X){z=z==null?""+X:""+z;var J=this._nodesMap;if(!J[bt(z)]){var at=new ft(z,X);return at.hostGraph=this,this.nodes.push(at),J[bt(z)]=at,at}},lt.prototype.getNodeByIndex=function(z){var X=this.data.getRawIndex(z);return this.nodes[X]},lt.prototype.getNodeById=function(z){return this._nodesMap[bt(z)]},lt.prototype.addEdge=function(z,X,J){var at=this._nodesMap,F=this._edgesMap;if(B.z(z)&&(z=this.nodes[z]),B.z(X)&&(X=this.nodes[X]),z instanceof ft||(z=at[bt(z)]),X instanceof ft||(X=at[bt(X)]),!(!z||!X)){var Z=z.id+"-"+X.id,W=new ot(z,X,J);return W.hostGraph=this,this._directed&&(z.outEdges.push(W),X.inEdges.push(W)),z.edges.push(W),z!==X&&X.edges.push(W),this.edges.push(W),F[Z]=W,W}},lt.prototype.getEdgeByIndex=function(z){var X=this.edgeData.getRawIndex(z);return this.edges[X]},lt.prototype.getEdge=function(z,X){z instanceof ft&&(z=z.id),X instanceof ft&&(X=X.id);var J=this._edgesMap;return this._directed?J[z+"-"+X]:J[z+"-"+X]||J[X+"-"+z]},lt.prototype.eachNode=function(z,X){for(var J=this.nodes,at=J.length,F=0;F<at;F++)J[F].dataIndex>=0&&z.call(X,J[F],F)},lt.prototype.eachEdge=function(z,X){for(var J=this.edges,at=J.length,F=0;F<at;F++)J[F].dataIndex>=0&&J[F].node1.dataIndex>=0&&J[F].node2.dataIndex>=0&&z.call(X,J[F],F)},lt.prototype.breadthFirstTraverse=function(z,X,J,at){if(X instanceof ft||(X=this._nodesMap[bt(X)]),!!X){for(var F=J==="out"?"outEdges":J==="in"?"inEdges":"edges",Z=0;Z<this.nodes.length;Z++)this.nodes[Z].__visited=!1;if(!z.call(at,X,null))for(var W=[X];W.length;)for(var ht=W.shift(),q=ht[F],Z=0;Z<q.length;Z++){var g=q[Z],et=g.node1===ht?g.node2:g.node1;if(!et.__visited){if(z.call(at,et,ht))return;W.push(et),et.__visited=!0}}}},lt.prototype.update=function(){for(var z=this.data,X=this.edgeData,J=this.nodes,at=this.edges,F=0,Z=J.length;F<Z;F++)J[F].dataIndex=-1;for(var F=0,Z=z.count();F<Z;F++)J[z.getRawIndex(F)].dataIndex=F;X.filterSelf(function(W){var ht=at[X.getRawIndex(W)];return ht.node1.dataIndex>=0&&ht.node2.dataIndex>=0});for(var F=0,Z=at.length;F<Z;F++)at[F].dataIndex=-1;for(var F=0,Z=X.count();F<Z;F++)at[X.getRawIndex(F)].dataIndex=F},lt.prototype.clone=function(){for(var z=new lt(this._directed),X=this.nodes,J=this.edges,at=0;at<X.length;at++)z.addNode(X[at].id,X[at].dataIndex);for(var at=0;at<J.length;at++){var F=J[at];z.addEdge(F.node1.id,F.node2.id,F.dataIndex)}return z},lt}(),ft=function(){function lt(z,X){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=z==null?"":z,this.dataIndex=X==null?-1:X}return lt.prototype.degree=function(){return this.edges.length},lt.prototype.inDegree=function(){return this.inEdges.length},lt.prototype.outDegree=function(){return this.outEdges.length},lt.prototype.getModel=function(z){if(!(this.dataIndex<0)){var X=this.hostGraph,J=X.data.getItemModel(this.dataIndex);return J.getModel(z)}},lt.prototype.getAdjacentDataIndices=function(){for(var z={edge:[],node:[]},X=0;X<this.edges.length;X++){var J=this.edges[X];J.dataIndex<0||(z.edge.push(J.dataIndex),z.node.push(J.node1.dataIndex,J.node2.dataIndex))}return z},lt}(),ot=function(){function lt(z,X,J){this.dataIndex=-1,this.node1=z,this.node2=X,this.dataIndex=J==null?-1:J}return lt.prototype.getModel=function(z){if(!(this.dataIndex<0)){var X=this.hostGraph,J=X.edgeData.getItemModel(this.dataIndex);return J.getModel(z)}},lt.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},lt}();function gt(lt,z){return{getValue:function(X){var J=this[lt][z];return J.getStore().get(J.getDimensionIndex(X||"value"),this.dataIndex)},setVisual:function(X,J){this.dataIndex>=0&&this[lt][z].setItemVisual(this.dataIndex,X,J)},getVisual:function(X){return this[lt][z].getItemVisual(this.dataIndex,X)},setLayout:function(X,J){this.dataIndex>=0&&this[lt][z].setItemLayout(this.dataIndex,X,J)},getLayout:function(){return this[lt][z].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[lt][z].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[lt][z].getRawIndex(this.dataIndex)}}}B.K(ft,gt("hostGraph","data")),B.K(ot,gt("hostGraph","edgeData")),nt.a=k},WMlo:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=b("s9sj"),ft=function(){function gt(){this.points=null,this.smooth=0,this.smoothConstraint=null}return gt}(),ot=function(gt){Object(B.a)(lt,gt);function lt(z){return gt.call(this,z)||this}return lt.prototype.getDefaultShape=function(){return new ft},lt.prototype.buildPath=function(z,X){k.a(z,X,!0)},lt}(bt.b);ot.prototype.type="polygon",nt.a=ot},WsGc:function(je,nt,b){"use strict";b.d(nt,"b",function(){return bt}),b.d(nt,"a",function(){return k});var B={};function bt(ft,ot){B[ft]=ot}function k(ft){return B[ft]}},X0MA:function(je,nt,b){"use strict";b.d(nt,"a",function(){return z});var B=b("c5Gk"),bt=b("/PGm"),k=b("U3bR"),ft=b("BkaA"),ot=b("skrI"),gt=function(X){Object(B.a)(J,X);function J(){var at=X!==null&&X.apply(this,arguments)||this;return at.type="dataset",at}return J.prototype.init=function(at,F,Z){X.prototype.init.call(this,at,F,Z),this._sourceManager=new ot.a(this),Object(ot.b)(this)},J.prototype.mergeOption=function(at,F){X.prototype.mergeOption.call(this,at,F),Object(ot.b)(this)},J.prototype.optionUpdated=function(){this._sourceManager.dirty()},J.prototype.getSourceManager=function(){return this._sourceManager},J.type="dataset",J.defaultOption={seriesLayoutBy:ft.a},J}(bt.a),lt=function(X){Object(B.a)(J,X);function J(){var at=X!==null&&X.apply(this,arguments)||this;return at.type="dataset",at}return J.type="dataset",J}(k.a);function z(X){X.registerComponentModel(gt),X.registerComponentView(lt)}},XZR5:function(je,nt,b){"use strict";b.d(nt,"a",function(){return Vo}),b.d(nt,"d",function(){return Ls}),b.d(nt,"l",function(){return po}),b.d(nt,"m",function(){return la}),b.d(nt,"j",function(){return Ol}),b.d(nt,"k",function(){return mu}),b.d(nt,"o",function(){return Zo}),b.d(nt,"e",function(){return Ra}),b.d(nt,"f",function(){return Na}),b.d(nt,"b",function(){return kr}),b.d(nt,"g",function(){return ja}),b.d(nt,"p",function(){return xa}),b.d(nt,"h",function(){return yu}),b.d(nt,"i",function(){return Vi}),b.d(nt,"c",function(){return qi}),b.d(nt,"n",function(){return _a});var B=b("c5Gk"),bt=b("08kU"),k=b("bPXU"),ft=b("QO9Q"),ot=b("z80y"),gt=b("HIFk"),lt=b("ZXNb"),z=b("PWZQ"),X=b("/PGm"),J="";typeof navigator!="undefined"&&(J=navigator.platform||"");var at="rgba(0, 0, 0, 0.2)",F={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:at,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:at,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:at,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:at,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:at,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:at,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:J.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Z=b("ZlUk"),W=b("GBOm"),ht=b("Gm52"),q=b("jbhN"),g,et,$,N="\0_ec_inner",Y=1,K={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},V={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},G={};function I(jt){Object(k.k)(jt,function(Ht,Rt){if(!X.a.hasClass(Rt)){var Wt=K[Rt];Wt&&!G[Wt]&&(Object(q.b)("Component "+Rt+` is used but not imported.
import { `+Wt+` } from 'echarts/components';
echarts.use([`+Wt+"]);"),G[Wt]=!0)}})}var A=function(jt){Object(B.a)(Ht,jt);function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return Ht.prototype.init=function(Rt,Wt,Yt,re,ve,Ze){re=re||{},this.option=null,this._theme=new z.a(re),this._locale=new z.a(ve),this._optionManager=Ze},Ht.prototype.setOption=function(Rt,Wt,Yt){var re=L(Wt);this._optionManager.setOption(Rt,Yt,re),this._resetOption(null,re)},Ht.prototype.resetOption=function(Rt,Wt){return this._resetOption(Rt,L(Wt))},Ht.prototype._resetOption=function(Rt,Wt){var Yt=!1,re=this._optionManager;if(!Rt||Rt==="recreate"){var ve=re.mountOption(Rt==="recreate");!this.option||Rt==="recreate"?$(this,ve):(this.restoreData(),this._mergeOption(ve,Wt)),Yt=!0}if((Rt==="timeline"||Rt==="media")&&this.restoreData(),!Rt||Rt==="recreate"||Rt==="timeline"){var Ze=re.getTimelineOption(this);Ze&&(Yt=!0,this._mergeOption(Ze,Wt))}if(!Rt||Rt==="recreate"||Rt==="media"){var Ue=re.getMediaOption(this);Ue.length&&Object(k.k)(Ue,function(er){Yt=!0,this._mergeOption(er,Wt)},this)}return Yt},Ht.prototype.mergeOption=function(Rt){this._mergeOption(Rt,null)},Ht.prototype._mergeOption=function(Rt,Wt){var Yt=this.option,re=this._componentsMap,ve=this._componentsCount,Ze=[],Ue=Object(k.f)(),er=Wt&&Wt.replaceMergeMainTypeMap;Object(Z.g)(this),Object(k.k)(Rt,function(ue,Te){ue!=null&&(X.a.hasClass(Te)?Te&&(Ze.push(Te),Ue.set(Te,!0)):Yt[Te]=Yt[Te]==null?Object(k.d)(ue):Object(k.I)(Yt[Te],ue,!0))}),er&&er.each(function(ue,Te){X.a.hasClass(Te)&&!Ue.get(Te)&&(Ze.push(Te),Ue.set(Te,!0))}),X.a.topologicalTravel(Ze,X.a.getAllClassMainTypes(),lr,this);function lr(ue){var Te=Object(W.a)(this,ue,lt.r(Rt[ue])),ye=re.get(ue),ze=ye?er&&er.get(ue)?"replaceMerge":"normalMerge":"replaceAll",Ye=lt.q(ye,Te,ze);lt.x(Ye,ue,X.a),Yt[ue]=null,re.set(ue,null),ve.set(ue,0);var ir=[],ur=[],Or=0,yr,zr;Object(k.k)(Ye,function(en,Ar){var pn=en.existing,Oi=en.newOption;if(!Oi)pn&&(pn.mergeOption({},this),pn.optionUpdated({},!1));else{var wn=ue==="series",Gi=X.a.getClass(ue,en.keyInfo.subType,!wn);if(!Gi){if(!1)var Ba,xu;return}if(ue==="tooltip"){if(yr)return;yr=!0}if(pn&&pn.constructor===Gi)pn.name=en.keyInfo.name,pn.mergeOption(Oi,this),pn.optionUpdated(Oi,!1);else{var Yo=Object(k.m)({componentIndex:Ar},en.keyInfo);pn=new Gi(Oi,this,this,Yo),Object(k.m)(pn,Yo),en.brandNew&&(pn.__requireNewView=!0),pn.init(Oi,this,this),pn.optionUpdated(null,!0)}}pn?(ir.push(pn.option),ur.push(pn),Or++):(ir.push(void 0),ur.push(void 0))},this),Yt[ue]=ir,re.set(ue,ur),ve.set(ue,Or),ue==="series"&&g(this)}this._seriesIndices||g(this)},Ht.prototype.getOption=function(){var Rt=Object(k.d)(this.option);return Object(k.k)(Rt,function(Wt,Yt){if(X.a.hasClass(Yt)){for(var re=lt.r(Wt),ve=re.length,Ze=!1,Ue=ve-1;Ue>=0;Ue--)re[Ue]&&!lt.l(re[Ue])?Ze=!0:(re[Ue]=null,!Ze&&ve--);re.length=ve,Rt[Yt]=re}}),delete Rt[N],Rt},Ht.prototype.getTheme=function(){return this._theme},Ht.prototype.getLocaleModel=function(){return this._locale},Ht.prototype.setUpdatePayload=function(Rt){this._payload=Rt},Ht.prototype.getUpdatePayload=function(){return this._payload},Ht.prototype.getComponent=function(Rt,Wt){var Yt=this._componentsMap.get(Rt);if(Yt){var re=Yt[Wt||0];if(re)return re;if(Wt==null){for(var ve=0;ve<Yt.length;ve++)if(Yt[ve])return Yt[ve]}}},Ht.prototype.queryComponents=function(Rt){var Wt=Rt.mainType;if(!Wt)return[];var Yt=Rt.index,re=Rt.id,ve=Rt.name,Ze=this._componentsMap.get(Wt);if(!Ze||!Ze.length)return[];var Ue;return Yt!=null?(Ue=[],Object(k.k)(lt.r(Yt),function(er){Ze[er]&&Ue.push(Ze[er])})):re!=null?Ue=O("id",re,Ze):ve!=null?Ue=O("name",ve,Ze):Ue=Object(k.n)(Ze,function(er){return!!er}),M(Ue,Rt)},Ht.prototype.findComponents=function(Rt){var Wt=Rt.query,Yt=Rt.mainType,re=Ze(Wt),ve=re?this.queryComponents(re):Object(k.n)(this._componentsMap.get(Yt),function(er){return!!er});return Ue(M(ve,Rt));function Ze(er){var lr=Yt+"Index",ue=Yt+"Id",Te=Yt+"Name";return er&&(er[lr]!=null||er[ue]!=null||er[Te]!=null)?{mainType:Yt,index:er[lr],id:er[ue],name:er[Te]}:null}function Ue(er){return Rt.filter?Object(k.n)(er,Rt.filter):er}},Ht.prototype.eachComponent=function(Rt,Wt,Yt){var re=this._componentsMap;if(Object(k.w)(Rt)){var ve=Wt,Ze=Rt;re.each(function(ue,Te){for(var ye=0;ue&&ye<ue.length;ye++){var ze=ue[ye];ze&&Ze.call(ve,Te,ze,ze.componentIndex)}})}else for(var Ue=Object(k.C)(Rt)?re.get(Rt):Object(k.A)(Rt)?this.findComponents(Rt):null,er=0;Ue&&er<Ue.length;er++){var lr=Ue[er];lr&&Wt.call(Yt,lr,lr.componentIndex)}},Ht.prototype.getSeriesByName=function(Rt){var Wt=lt.e(Rt,null);return Object(k.n)(this._componentsMap.get("series"),function(Yt){return!!Yt&&Wt!=null&&Yt.name===Wt})},Ht.prototype.getSeriesByIndex=function(Rt){return this._componentsMap.get("series")[Rt]},Ht.prototype.getSeriesByType=function(Rt){return Object(k.n)(this._componentsMap.get("series"),function(Wt){return!!Wt&&Wt.subType===Rt})},Ht.prototype.getSeries=function(){return Object(k.n)(this._componentsMap.get("series"),function(Rt){return!!Rt})},Ht.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ht.prototype.eachSeries=function(Rt,Wt){et(this),Object(k.k)(this._seriesIndices,function(Yt){var re=this._componentsMap.get("series")[Yt];Rt.call(Wt,re,Yt)},this)},Ht.prototype.eachRawSeries=function(Rt,Wt){Object(k.k)(this._componentsMap.get("series"),function(Yt){Yt&&Rt.call(Wt,Yt,Yt.componentIndex)})},Ht.prototype.eachSeriesByType=function(Rt,Wt,Yt){et(this),Object(k.k)(this._seriesIndices,function(re){var ve=this._componentsMap.get("series")[re];ve.subType===Rt&&Wt.call(Yt,ve,re)},this)},Ht.prototype.eachRawSeriesByType=function(Rt,Wt,Yt){return Object(k.k)(this.getSeriesByType(Rt),Wt,Yt)},Ht.prototype.isSeriesFiltered=function(Rt){return et(this),this._seriesIndicesMap.get(Rt.componentIndex)==null},Ht.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ht.prototype.filterSeries=function(Rt,Wt){et(this);var Yt=[];Object(k.k)(this._seriesIndices,function(re){var ve=this._componentsMap.get("series")[re];Rt.call(Wt,ve,re)&&Yt.push(re)},this),this._seriesIndices=Yt,this._seriesIndicesMap=Object(k.f)(Yt)},Ht.prototype.restoreData=function(Rt){g(this);var Wt=this._componentsMap,Yt=[];Wt.each(function(re,ve){X.a.hasClass(ve)&&Yt.push(ve)}),X.a.topologicalTravel(Yt,X.a.getAllClassMainTypes(),function(re){Object(k.k)(Wt.get(re),function(ve){ve&&(re!=="series"||!C(ve,Rt))&&ve.restoreData()})})},Ht.internalField=function(){g=function(Rt){var Wt=Rt._seriesIndices=[];Object(k.k)(Rt._componentsMap.get("series"),function(Yt){Yt&&Wt.push(Yt.componentIndex)}),Rt._seriesIndicesMap=Object(k.f)(Wt)},et=function(Rt){},$=function(Rt,Wt){Rt.option={},Rt.option[N]=Y,Rt._componentsMap=Object(k.f)({series:[]}),Rt._componentsCount=Object(k.f)();var Yt=Wt.aria;Object(k.A)(Yt)&&Yt.enabled==null&&(Yt.enabled=!0),E(Wt,Rt._theme.option),Object(k.I)(Wt,F,!1),Rt._mergeOption(Wt,null)}}(),Ht}(z.a);function C(jt,Ht){if(Ht){var Rt=Ht.seriesIndex,Wt=Ht.seriesId,Yt=Ht.seriesName;return Rt!=null&&jt.componentIndex!==Rt||Wt!=null&&jt.id!==Wt||Yt!=null&&jt.name!==Yt}}function E(jt,Ht){var Rt=jt.color&&!jt.colorLayer;Object(k.k)(Ht,function(Wt,Yt){Yt==="colorLayer"&&Rt||X.a.hasClass(Yt)||(typeof Wt=="object"?jt[Yt]=jt[Yt]?Object(k.I)(jt[Yt],Wt,!1):Object(k.d)(Wt):jt[Yt]==null&&(jt[Yt]=Wt))})}function O(jt,Ht,Rt){if(Object(k.t)(Ht)){var Wt=Object(k.f)();return Object(k.k)(Ht,function(re){if(re!=null){var ve=lt.e(re,null);ve!=null&&Wt.set(re,!0)}}),Object(k.n)(Rt,function(re){return re&&Wt.get(re[jt])})}else{var Yt=lt.e(Ht,null);return Object(k.n)(Rt,function(re){return re&&Yt!=null&&re[jt]===Yt})}}function M(jt,Ht){return Ht.hasOwnProperty("subType")?Object(k.n)(jt,function(Rt){return Rt&&Rt.subType===Ht.subType}):jt}function L(jt){var Ht=Object(k.f)();return jt&&Object(k.k)(lt.r(jt.replaceMerge),function(Rt){Ht.set(Rt,!0)}),{replaceMergeMainTypeMap:Ht}}Object(k.K)(A,ht.a);var H=A,U=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ct=function(){function jt(Ht){k.k(U,function(Rt){this[Rt]=k.c(Ht[Rt],Ht)},this)}return jt}(),st=ct,vt=b("JFDN"),it=/^(min|max)?(.+)$/,dt=function(){function jt(Ht){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ht}return jt.prototype.setOption=function(Ht,Rt,Wt){Ht&&(Object(k.k)(Object(lt.r)(Ht.series),function(ve){ve&&ve.data&&Object(k.E)(ve.data)&&Object(k.R)(ve.data)}),Object(k.k)(Object(lt.r)(Ht.dataset),function(ve){ve&&ve.source&&Object(k.E)(ve.source)&&Object(k.R)(ve.source)})),Ht=Object(k.d)(Ht);var Yt=this._optionBackup,re=St(Ht,Rt,!Yt);this._newBaseOption=re.baseOption,Yt?(re.timelineOptions.length&&(Yt.timelineOptions=re.timelineOptions),re.mediaList.length&&(Yt.mediaList=re.mediaList),re.mediaDefault&&(Yt.mediaDefault=re.mediaDefault)):this._optionBackup=re},jt.prototype.mountOption=function(Ht){var Rt=this._optionBackup;return this._timelineOptions=Rt.timelineOptions,this._mediaList=Rt.mediaList,this._mediaDefault=Rt.mediaDefault,this._currentMediaIndices=[],Object(k.d)(Ht?Rt.baseOption:this._newBaseOption)},jt.prototype.getTimelineOption=function(Ht){var Rt,Wt=this._timelineOptions;if(Wt.length){var Yt=Ht.getComponent("timeline");Yt&&(Rt=Object(k.d)(Wt[Yt.getCurrentIndex()]))}return Rt},jt.prototype.getMediaOption=function(Ht){var Rt=this._api.getWidth(),Wt=this._api.getHeight(),Yt=this._mediaList,re=this._mediaDefault,ve=[],Ze=[];if(!Yt.length&&!re)return Ze;for(var Ue=0,er=Yt.length;Ue<er;Ue++)ut(Yt[Ue].query,Rt,Wt)&&ve.push(Ue);return!ve.length&&re&&(ve=[-1]),ve.length&&!Ot(ve,this._currentMediaIndices)&&(Ze=Object(k.H)(ve,function(lr){return Object(k.d)(lr===-1?re.option:Yt[lr].option)})),this._currentMediaIndices=ve,Ze},jt}();function St(jt,Ht,Rt){var Wt=[],Yt,re,ve=jt.baseOption,Ze=jt.timeline,Ue=jt.options,er=jt.media,lr=!!jt.media,ue=!!(Ue||Ze||ve&&ve.timeline);ve?(re=ve,re.timeline||(re.timeline=Ze)):((ue||lr)&&(jt.options=jt.media=null),re=jt),lr&&Object(k.t)(er)&&Object(k.k)(er,function(ye){ye&&ye.option&&(ye.query?Wt.push(ye):Yt||(Yt=ye))}),Te(re),Object(k.k)(Ue,function(ye){return Te(ye)}),Object(k.k)(Wt,function(ye){return Te(ye.option)});function Te(ye){Object(k.k)(Ht,function(ze){ze(ye,Rt)})}return{baseOption:re,timelineOptions:Ue||[],mediaDefault:Yt,mediaList:Wt}}function ut(jt,Ht,Rt){var Wt={width:Ht,height:Rt,aspectratio:Ht/Rt},Yt=!0;return Object(k.k)(jt,function(re,ve){var Ze=ve.match(it);if(!(!Ze||!Ze[1]||!Ze[2])){var Ue=Ze[1],er=Ze[2].toLowerCase();yt(Wt[er],re,Ue)||(Yt=!1)}}),Yt}function yt(jt,Ht,Rt){return Rt==="min"?jt>=Ht:Rt==="max"?jt<=Ht:jt===Ht}function Ot(jt,Ht){return jt.join(",")===Ht.join(",")}var At=dt,It=k.k,Ct=k.A,Ft=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function zt(jt){var Ht=jt&&jt.itemStyle;if(!!Ht)for(var Rt=0,Wt=Ft.length;Rt<Wt;Rt++){var Yt=Ft[Rt],re=Ht.normal,ve=Ht.emphasis;re&&re[Yt]&&(jt[Yt]=jt[Yt]||{},jt[Yt].normal?k.I(jt[Yt].normal,re[Yt]):jt[Yt].normal=re[Yt],re[Yt]=null),ve&&ve[Yt]&&(jt[Yt]=jt[Yt]||{},jt[Yt].emphasis?k.I(jt[Yt].emphasis,ve[Yt]):jt[Yt].emphasis=ve[Yt],ve[Yt]=null)}}function Xt(jt,Ht,Rt){if(jt&&jt[Ht]&&(jt[Ht].normal||jt[Ht].emphasis)){var Wt=jt[Ht].normal,Yt=jt[Ht].emphasis;Wt&&(Rt?(jt[Ht].normal=jt[Ht].emphasis=null,k.i(jt[Ht],Wt)):jt[Ht]=Wt),Yt&&(jt.emphasis=jt.emphasis||{},jt.emphasis[Ht]=Yt,Yt.focus&&(jt.emphasis.focus=Yt.focus),Yt.blurScope&&(jt.emphasis.blurScope=Yt.blurScope))}}function ie(jt){Xt(jt,"itemStyle"),Xt(jt,"lineStyle"),Xt(jt,"areaStyle"),Xt(jt,"label"),Xt(jt,"labelLine"),Xt(jt,"upperLabel"),Xt(jt,"edgeLabel")}function oe(jt,Ht){var Rt=Ct(jt)&&jt[Ht],Wt=Ct(Rt)&&Rt.textStyle;if(Wt)for(var Yt=0,re=lt.c.length;Yt<re;Yt++){var ve=lt.c[Yt];Wt.hasOwnProperty(ve)&&(Rt[ve]=Wt[ve])}}function he(jt){jt&&(ie(jt),oe(jt,"label"),jt.emphasis&&oe(jt.emphasis,"label"))}function be(jt){if(!!Ct(jt)){zt(jt),ie(jt),oe(jt,"label"),oe(jt,"upperLabel"),oe(jt,"edgeLabel"),jt.emphasis&&(oe(jt.emphasis,"label"),oe(jt.emphasis,"upperLabel"),oe(jt.emphasis,"edgeLabel"));var Ht=jt.markPoint;Ht&&(zt(Ht),he(Ht));var Rt=jt.markLine;Rt&&(zt(Rt),he(Rt));var Wt=jt.markArea;Wt&&he(Wt);var Yt=jt.data;if(jt.type==="graph"){Yt=Yt||jt.nodes;var re=jt.links||jt.edges;if(re&&!k.E(re))for(var ve=0;ve<re.length;ve++)he(re[ve]);k.k(jt.categories,function(er){ie(er)})}if(Yt&&!k.E(Yt))for(var ve=0;ve<Yt.length;ve++)he(Yt[ve]);if(Ht=jt.markPoint,Ht&&Ht.data)for(var Ze=Ht.data,ve=0;ve<Ze.length;ve++)he(Ze[ve]);if(Rt=jt.markLine,Rt&&Rt.data)for(var Ue=Rt.data,ve=0;ve<Ue.length;ve++)k.t(Ue[ve])?(he(Ue[ve][0]),he(Ue[ve][1])):he(Ue[ve]);jt.type==="gauge"?(oe(jt,"axisLabel"),oe(jt,"title"),oe(jt,"detail")):jt.type==="treemap"?(Xt(jt.breadcrumb,"itemStyle"),k.k(jt.levels,function(er){ie(er)})):jt.type==="tree"&&ie(jt.leaves)}}function Ce(jt){return k.t(jt)?jt:jt?[jt]:[]}function Fe(jt){return(k.t(jt)?jt[0]:jt)||{}}function Bt(jt,Ht){It(Ce(jt.series),function(Wt){Ct(Wt)&&be(Wt)});var Rt=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ht&&Rt.push("valueAxis","categoryAxis","logAxis","timeAxis"),It(Rt,function(Wt){It(Ce(jt[Wt]),function(Yt){Yt&&(oe(Yt,"axisLabel"),oe(Yt.axisPointer,"label"))})}),It(Ce(jt.parallel),function(Wt){var Yt=Wt&&Wt.parallelAxisDefault;oe(Yt,"axisLabel"),oe(Yt&&Yt.axisPointer,"label")}),It(Ce(jt.calendar),function(Wt){Xt(Wt,"itemStyle"),oe(Wt,"dayLabel"),oe(Wt,"monthLabel"),oe(Wt,"yearLabel")}),It(Ce(jt.radar),function(Wt){oe(Wt,"name"),Wt.name&&Wt.axisName==null&&(Wt.axisName=Wt.name,delete Wt.name),Wt.nameGap!=null&&Wt.axisNameGap==null&&(Wt.axisNameGap=Wt.nameGap,delete Wt.nameGap)}),It(Ce(jt.geo),function(Wt){Ct(Wt)&&(he(Wt),It(Ce(Wt.regions),function(Yt){he(Yt)}))}),It(Ce(jt.timeline),function(Wt){he(Wt),Xt(Wt,"label"),Xt(Wt,"itemStyle"),Xt(Wt,"controlStyle",!0);var Yt=Wt.data;k.t(Yt)&&k.k(Yt,function(re){k.A(re)&&(Xt(re,"label"),Xt(re,"itemStyle"))})}),It(Ce(jt.toolbox),function(Wt){Xt(Wt,"iconStyle"),It(Wt.feature,function(Yt){Xt(Yt,"iconStyle")})}),oe(Fe(jt.axisPointer),"label"),oe(Fe(jt.tooltip).axisPointer,"label")}function Tt(jt,Ht){for(var Rt=Ht.split(","),Wt=jt,Yt=0;Yt<Rt.length&&(Wt=Wt&&Wt[Rt[Yt]],Wt!=null);Yt++);return Wt}function Mt(jt,Ht,Rt,Wt){for(var Yt=Ht.split(","),re=jt,ve,Ze=0;Ze<Yt.length-1;Ze++)ve=Yt[Ze],re[ve]==null&&(re[ve]={}),re=re[ve];(Wt||re[Yt[Ze]]==null)&&(re[Yt[Ze]]=Rt)}function Ut(jt){jt&&Object(k.k)(se,function(Ht){Ht[0]in jt&&!(Ht[1]in jt)&&(jt[Ht[1]]=jt[Ht[0]])})}var se=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],ge=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],He=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Me(jt){var Ht=jt&&jt.itemStyle;if(Ht)for(var Rt=0;Rt<He.length;Rt++){var Wt=He[Rt][1],Yt=He[Rt][0];Ht[Wt]!=null&&(Ht[Yt]=Ht[Wt])}}function We(jt){!jt||jt.alignTo==="edge"&&jt.margin!=null&&jt.edgeDistance==null&&(jt.edgeDistance=jt.margin)}function Ke(jt){!jt||jt.downplay&&!jt.blur&&(jt.blur=jt.downplay)}function qe(jt){!jt||jt.focusNodeAdjacency!=null&&(jt.emphasis=jt.emphasis||{},jt.emphasis.focus==null&&(jt.emphasis.focus="adjacency"))}function Qt(jt,Ht){if(jt)for(var Rt=0;Rt<jt.length;Rt++)Ht(jt[Rt]),jt[Rt]&&Qt(jt[Rt].children,Ht)}function Se(jt,Ht){Bt(jt,Ht),jt.series=Object(lt.r)(jt.series),Object(k.k)(jt.series,function(Rt){if(!!Object(k.A)(Rt)){var Wt=Rt.type;if(Wt==="line")Rt.clipOverflow!=null&&(Rt.clip=Rt.clipOverflow);else if(Wt==="pie"||Wt==="gauge"){Rt.clockWise!=null&&(Rt.clockwise=Rt.clockWise),We(Rt.label);var Yt=Rt.data;if(Yt&&!Object(k.E)(Yt))for(var re=0;re<Yt.length;re++)We(Yt[re]);Rt.hoverOffset!=null&&(Rt.emphasis=Rt.emphasis||{},(Rt.emphasis.scaleSize=null)&&(Rt.emphasis.scaleSize=Rt.hoverOffset))}else if(Wt==="gauge"){var ve=Tt(Rt,"pointer.color");ve!=null&&Mt(Rt,"itemStyle.color",ve)}else if(Wt==="bar"){Me(Rt),Me(Rt.backgroundStyle),Me(Rt.emphasis);var Yt=Rt.data;if(Yt&&!Object(k.E)(Yt))for(var re=0;re<Yt.length;re++)typeof Yt[re]=="object"&&(Me(Yt[re]),Me(Yt[re]&&Yt[re].emphasis))}else if(Wt==="sunburst"){var Ze=Rt.highlightPolicy;Ze&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis.focus||(Rt.emphasis.focus=Ze)),Ke(Rt),Qt(Rt.data,Ke)}else Wt==="graph"||Wt==="sankey"?qe(Rt):Wt==="map"&&(Rt.mapType&&!Rt.map&&(Rt.map=Rt.mapType),Rt.mapLocation&&Object(k.i)(Rt,Rt.mapLocation));Rt.hoverAnimation!=null&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis&&Rt.emphasis.scale==null&&(Rt.emphasis.scale=Rt.hoverAnimation)),Ut(Rt)}}),jt.dataRange&&(jt.visualMap=jt.dataRange),Object(k.k)(ge,function(Rt){var Wt=jt[Rt];Wt&&(Object(k.t)(Wt)||(Wt=[Wt]),Object(k.k)(Wt,function(Yt){Ut(Yt)}))})}var Ve=b("7M1A");function Ie(jt){var Ht=Object(k.f)();jt.eachSeries(function(Rt){var Wt=Rt.get("stack");if(Wt){var Yt=Ht.get(Wt)||Ht.set(Wt,[]),re=Rt.getData(),ve={stackResultDimension:re.getCalculationInfo("stackResultDimension"),stackedOverDimension:re.getCalculationInfo("stackedOverDimension"),stackedDimension:re.getCalculationInfo("stackedDimension"),stackedByDimension:re.getCalculationInfo("stackedByDimension"),isStackedByIndex:re.getCalculationInfo("isStackedByIndex"),data:re,seriesModel:Rt};if(!ve.stackedDimension||!(ve.isStackedByIndex||ve.stackedByDimension))return;Yt.length&&re.setCalculationInfo("stackedOnSeries",Yt[Yt.length-1].seriesModel),Yt.push(ve)}}),Ht.each(Zt)}function Zt(jt){Object(k.k)(jt,function(Ht,Rt){var Wt=[],Yt=[NaN,NaN],re=[Ht.stackResultDimension,Ht.stackedOverDimension],ve=Ht.data,Ze=Ht.isStackedByIndex;ve.modify(re,function(Ue,er,lr){var ue=ve.get(Ht.stackedDimension,lr);if(isNaN(ue))return Yt;var Te,ye;Ze?ye=ve.getRawIndex(lr):Te=ve.get(Ht.stackedByDimension,lr);for(var ze=NaN,Ye=Rt-1;Ye>=0;Ye--){var ir=jt[Ye];if(Ze||(ye=ir.data.rawIndexOf(ir.stackedByDimension,Te)),ye>=0){var ur=ir.data.getByRawIndex(ir.stackResultDimension,ye);if(ue>=0&&ur>0||ue<=0&&ur<0){ue=Object(Ve.b)(ue,ur),ze=ur;break}}}return Wt[0]=ue,Wt[1]=ze,Wt})})}var qt=b("I79D"),le=b("U3bR"),De=b("IsQr"),tr=b("Eb29"),nr=b("bSX3"),fe=b("eV5c"),Ee=b("ryx4"),ke=b("+aTT"),Re=b("GUjm"),Cr=b("6wX1"),Fr=b("o7EO"),Hr=b("a58V"),Jr=b("qQml"),Kn=Object(lt.o)(),Kr={itemStyle:Object(Fr.a)(Hr.a,!0),lineStyle:Object(Fr.a)(Jr.a,!0)},li={lineStyle:"stroke",itemStyle:"fill"};function ei(jt,Ht){var Rt=jt.visualStyleMapper||Kr[Ht];return Rt||(console.warn("Unkown style type '"+Ht+"'."),Kr.itemStyle)}function Xa(jt,Ht){var Rt=jt.visualDrawType||li[Ht];return Rt||(console.warn("Unkown style type '"+Ht+"'."),"fill")}var Za={createOnAllSeries:!0,performRawSeries:!0,reset:function(jt,Ht){var Rt=jt.getData(),Wt=jt.visualStyleAccessPath||"itemStyle",Yt=jt.getModel(Wt),re=ei(jt,Wt),ve=re(Yt),Ze=Yt.getShallow("decal");Ze&&(Rt.setVisual("decal",Ze),Ze.dirty=!0);var Ue=Xa(jt,Wt),er=ve[Ue],lr=Object(k.w)(er)?er:null,ue=ve.fill==="auto"||ve.stroke==="auto";if(!ve[Ue]||lr||ue){var Te=jt.getColorFromPalette(jt.name,null,Ht.getSeriesCount());ve[Ue]||(ve[Ue]=Te,Rt.setVisual("colorFromPalette",!0)),ve.fill=ve.fill==="auto"||Object(k.w)(ve.fill)?Te:ve.fill,ve.stroke=ve.stroke==="auto"||Object(k.w)(ve.stroke)?Te:ve.stroke}if(Rt.setVisual("style",ve),Rt.setVisual("drawType",Ue),!Ht.isSeriesFiltered(jt)&&lr)return Rt.setVisual("colorFromPalette",!1),{dataEach:function(ye,ze){var Ye=jt.getDataParams(ze),ir=Object(k.m)({},ve);ir[Ue]=lr(Ye),ye.setItemVisual(ze,"style",ir)}}}},si=new z.a,lo={createOnAllSeries:!0,performRawSeries:!0,reset:function(jt,Ht){if(!(jt.ignoreStyleOnData||Ht.isSeriesFiltered(jt))){var Rt=jt.getData(),Wt=jt.visualStyleAccessPath||"itemStyle",Yt=ei(jt,Wt),re=Rt.getVisual("drawType");return{dataEach:Rt.hasItemOption?function(ve,Ze){var Ue=ve.getRawDataItem(Ze);if(Ue&&Ue[Wt]){si.option=Ue[Wt];var er=Yt(si),lr=ve.ensureUniqueItemVisual(Ze,"style");Object(k.m)(lr,er),si.option.decal&&(ve.setItemVisual(Ze,"decal",si.option.decal),si.option.decal.dirty=!0),re in er&&ve.setItemVisual(Ze,"colorFromPalette",!1)}}:null}}}},Aa={performRawSeries:!0,overallReset:function(jt){var Ht=Object(k.f)();jt.eachSeries(function(Rt){var Wt=Rt.getColorBy();if(!Rt.isColorBySeries()){var Yt=Rt.type+"-"+Wt,re=Ht.get(Yt);re||(re={},Ht.set(Yt,re)),Kn(Rt).scope=re}}),jt.eachSeries(function(Rt){if(!(Rt.isColorBySeries()||jt.isSeriesFiltered(Rt))){var Wt=Rt.getRawData(),Yt={},re=Rt.getData(),ve=Kn(Rt).scope,Ze=Rt.visualStyleAccessPath||"itemStyle",Ue=Xa(Rt,Ze);re.each(function(er){var lr=re.getRawIndex(er);Yt[lr]=er}),Wt.each(function(er){var lr=Yt[er],ue=re.getItemVisual(lr,"colorFromPalette");if(ue){var Te=re.ensureUniqueItemVisual(lr,"style"),ye=Wt.getName(er)||er+"",ze=Wt.count();Te[Ue]=Rt.getColorFromPalette(ye,ve,ze)}})}})}},aa=b("fvwW"),yl=b("To/5"),Fn=b("MiEP"),uo=Math.PI;function df(jt,Ht){Ht=Ht||{},k.i(Ht,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Rt=new aa.a,Wt=new tr.a({style:{fill:Ht.maskColor},zlevel:Ht.zlevel,z:1e4});Rt.add(Wt);var Yt=new yl.a({style:{text:Ht.text,fill:Ht.textColor,fontSize:Ht.fontSize,fontWeight:Ht.fontWeight,fontStyle:Ht.fontStyle,fontFamily:Ht.fontFamily},zlevel:Ht.zlevel,z:10001}),re=new tr.a({style:{fill:"none"},textContent:Yt,textConfig:{position:"right",distance:10},zlevel:Ht.zlevel,z:10001});Rt.add(re);var ve;return Ht.showSpinner&&(ve=new Fn.a({shape:{startAngle:-uo/2,endAngle:-uo/2+.1,r:Ht.spinnerRadius},style:{stroke:Ht.color,lineCap:"round",lineWidth:Ht.lineWidth},zlevel:Ht.zlevel,z:10001}),ve.animateShape(!0).when(1e3,{endAngle:uo*3/2}).start("circularInOut"),ve.animateShape(!0).when(1e3,{startAngle:uo*3/2}).delay(300).start("circularInOut"),Rt.add(ve)),Rt.resize=function(){var Ze=Yt.getBoundingRect().width,Ue=Ht.showSpinner?Ht.spinnerRadius:0,er=(jt.getWidth()-Ue*2-(Ht.showSpinner&&Ze?10:0)-Ze)/2-(Ht.showSpinner&&Ze?0:5+Ze/2)+(Ht.showSpinner?0:Ze/2)+(Ze?0:Ue),lr=jt.getHeight()/2;Ht.showSpinner&&ve.setShape({cx:er,cy:lr}),re.setShape({x:er-Ue,y:lr-Ue,width:Ue*2,height:Ue*2}),Wt.setShape({x:0,y:0,width:jt.getWidth(),height:jt.getHeight()})},Rt.resize(),Rt}var pr=b("M8IA"),uu=b("C9tP"),vn=function(){function jt(Ht,Rt,Wt,Yt){this._stageTaskMap=Object(k.f)(),this.ecInstance=Ht,this.api=Rt,Wt=this._dataProcessorHandlers=Wt.slice(),Yt=this._visualHandlers=Yt.slice(),this._allHandlers=Wt.concat(Yt)}return jt.prototype.restoreData=function(Ht,Rt){Ht.restoreData(Rt),this._stageTaskMap.each(function(Wt){var Yt=Wt.overallTask;Yt&&Yt.dirty()})},jt.prototype.getPerformArgs=function(Ht,Rt){if(!!Ht.__pipeline){var Wt=this._pipelineMap.get(Ht.__pipeline.id),Yt=Wt.context,re=!Rt&&Wt.progressiveEnabled&&(!Yt||Yt.progressiveRender)&&Ht.__idxInPipeline>Wt.blockIndex,ve=re?Wt.step:null,Ze=Yt&&Yt.modDataCount,Ue=Ze!=null?Math.ceil(Ze/ve):null;return{step:ve,modBy:Ue,modDataCount:Ze}}},jt.prototype.getPipeline=function(Ht){return this._pipelineMap.get(Ht)},jt.prototype.updateStreamModes=function(Ht,Rt){var Wt=this._pipelineMap.get(Ht.uid),Yt=Ht.getData(),re=Yt.count(),ve=Wt.progressiveEnabled&&Rt.incrementalPrepareRender&&re>=Wt.threshold,Ze=Ht.get("large")&&re>=Ht.get("largeThreshold"),Ue=Ht.get("progressiveChunkMode")==="mod"?re:null;Ht.pipelineContext=Wt.context={progressiveRender:ve,modDataCount:Ue,large:Ze}},jt.prototype.restorePipelines=function(Ht){var Rt=this,Wt=Rt._pipelineMap=Object(k.f)();Ht.eachSeries(function(Yt){var re=Yt.getProgressive(),ve=Yt.uid;Wt.set(ve,{id:ve,head:null,tail:null,threshold:Yt.getProgressiveThreshold(),progressiveEnabled:re&&!(Yt.preventIncremental&&Yt.preventIncremental()),blockIndex:-1,step:Math.round(re||700),count:0}),Rt._pipe(Yt,Yt.dataTask)})},jt.prototype.prepareStageTasks=function(){var Ht=this._stageTaskMap,Rt=this.api.getModel(),Wt=this.api;Object(k.k)(this._allHandlers,function(Yt){var re=Ht.get(Yt.uid)||Ht.set(Yt.uid,{}),ve="";Object(k.b)(!(Yt.reset&&Yt.overallReset),ve),Yt.reset&&this._createSeriesStageTask(Yt,re,Rt,Wt),Yt.overallReset&&this._createOverallStageTask(Yt,re,Rt,Wt)},this)},jt.prototype.prepareView=function(Ht,Rt,Wt,Yt){var re=Ht.renderTask,ve=re.context;ve.model=Rt,ve.ecModel=Wt,ve.api=Yt,re.__block=!Ht.incrementalPrepareRender,this._pipe(Rt,re)},jt.prototype.performDataProcessorTasks=function(Ht,Rt){this._performStageTasks(this._dataProcessorHandlers,Ht,Rt,{block:!0})},jt.prototype.performVisualTasks=function(Ht,Rt,Wt){this._performStageTasks(this._visualHandlers,Ht,Rt,Wt)},jt.prototype._performStageTasks=function(Ht,Rt,Wt,Yt){Yt=Yt||{};var re=!1,ve=this;Object(k.k)(Ht,function(Ue,er){if(!(Yt.visualType&&Yt.visualType!==Ue.visualType)){var lr=ve._stageTaskMap.get(Ue.uid),ue=lr.seriesTaskMap,Te=lr.overallTask;if(Te){var ye,ze=Te.agentStubMap;ze.each(function(ir){Ze(Yt,ir)&&(ir.dirty(),ye=!0)}),ye&&Te.dirty(),ve.updatePayload(Te,Wt);var Ye=ve.getPerformArgs(Te,Yt.block);ze.each(function(ir){ir.perform(Ye)}),Te.perform(Ye)&&(re=!0)}else ue&&ue.each(function(ir,ur){Ze(Yt,ir)&&ir.dirty();var Or=ve.getPerformArgs(ir,Yt.block);Or.skip=!Ue.performRawSeries&&Rt.isSeriesFiltered(ir.context.model),ve.updatePayload(ir,Wt),ir.perform(Or)&&(re=!0)})}});function Ze(Ue,er){return Ue.setDirty&&(!Ue.dirtyMap||Ue.dirtyMap.get(er.__pipeline.id))}this.unfinished=re||this.unfinished},jt.prototype.performSeriesTasks=function(Ht){var Rt;Ht.eachSeries(function(Wt){Rt=Wt.dataTask.perform()||Rt}),this.unfinished=Rt||this.unfinished},jt.prototype.plan=function(){this._pipelineMap.each(function(Ht){var Rt=Ht.tail;do{if(Rt.__block){Ht.blockIndex=Rt.__idxInPipeline;break}Rt=Rt.getUpstream()}while(Rt)})},jt.prototype.updatePayload=function(Ht,Rt){Rt!=="remain"&&(Ht.context.payload=Rt)},jt.prototype._createSeriesStageTask=function(Ht,Rt,Wt,Yt){var re=this,ve=Rt.seriesTaskMap,Ze=Rt.seriesTaskMap=Object(k.f)(),Ue=Ht.seriesType,er=Ht.getTargetSeries;Ht.createOnAllSeries?Wt.eachRawSeries(lr):Ue?Wt.eachRawSeriesByType(Ue,lr):er&&er(Wt,Yt).each(lr);function lr(ue){var Te=ue.uid,ye=Ze.set(Te,ve&&ve.get(Te)||Object(pr.a)({plan:fu,reset:Pe,count:cn}));ye.context={model:ue,ecModel:Wt,api:Yt,useClearVisual:Ht.isVisual&&!Ht.isLayout,plan:Ht.plan,reset:Ht.reset,scheduler:re},re._pipe(ue,ye)}},jt.prototype._createOverallStageTask=function(Ht,Rt,Wt,Yt){var re=this,ve=Rt.overallTask=Rt.overallTask||Object(pr.a)({reset:vr});ve.context={ecModel:Wt,api:Yt,overallReset:Ht.overallReset,scheduler:re};var Ze=ve.agentStubMap,Ue=ve.agentStubMap=Object(k.f)(),er=Ht.seriesType,lr=Ht.getTargetSeries,ue=!0,Te=!1,ye="";Object(k.b)(!Ht.createOnAllSeries,ye),er?Wt.eachRawSeriesByType(er,ze):lr?lr(Wt,Yt).each(ze):(ue=!1,Object(k.k)(Wt.getSeries(),ze));function ze(Ye){var ir=Ye.uid,ur=Ue.set(ir,Ze&&Ze.get(ir)||(Te=!0,Object(pr.a)({reset:jr,onDirty:An})));ur.context={model:Ye,overallProgress:ue},ur.agent=ve,ur.__block=ue,re._pipe(Ye,ur)}Te&&ve.dirty()},jt.prototype._pipe=function(Ht,Rt){var Wt=Ht.uid,Yt=this._pipelineMap.get(Wt);!Yt.head&&(Yt.head=Rt),Yt.tail&&Yt.tail.pipe(Rt),Yt.tail=Rt,Rt.__idxInPipeline=Yt.count++,Rt.__pipeline=Yt},jt.wrapStageHandler=function(Ht,Rt){return Object(k.w)(Ht)&&(Ht={overallReset:Ht,seriesType:Pr(Ht)}),Ht.uid=Object(uu.c)("stageHandler"),Rt&&(Ht.visualType=Rt),Ht},jt}();function vr(jt){jt.overallReset(jt.ecModel,jt.api,jt.payload)}function jr(jt){return jt.overallProgress&&Oe}function Oe(){this.agent.dirty(),this.getDownstream().dirty()}function An(){this.agent&&this.agent.dirty()}function fu(jt){return jt.plan?jt.plan(jt.model,jt.ecModel,jt.api,jt.payload):null}function Pe(jt){jt.useClearVisual&&jt.data.clearAllVisual();var Ht=jt.resetDefines=Object(lt.r)(jt.reset(jt.model,jt.ecModel,jt.api,jt.payload));return Ht.length>1?Object(k.H)(Ht,function(Rt,Wt){return Mn(Wt)}):va}var va=Mn(0);function Mn(jt){return function(Ht,Rt){var Wt=Rt.data,Yt=Rt.resetDefines[jt];if(Yt&&Yt.dataEach)for(var re=Ht.start;re<Ht.end;re++)Yt.dataEach(Wt,re);else Yt&&Yt.progress&&Yt.progress(Ht,Wt)}}function cn(jt){return jt.data.count()}function Pr(jt){cr=null;try{jt(fo,cu)}catch(Ht){}return cr}var fo={},cu={},cr;_r(fo,H),_r(cu,st),fo.eachSeriesByType=fo.eachRawSeriesByType=function(jt){cr=jt},fo.eachComponent=function(jt){jt.mainType==="series"&&jt.subType&&(cr=jt.subType)};function _r(jt,Ht){for(var Rt in Ht.prototype)jt[Rt]=k.L}var br=vn,ar=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Nr={color:ar,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ar]},zn="#B9B8CE",Bo="#100C2A",xr=function(){return{axisLine:{lineStyle:{color:zn}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},hn=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Ni={darkMode:!0,color:hn,backgroundColor:Bo,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:zn}},textStyle:{color:zn},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:zn}},dataZoom:{borderColor:"#71708A",textStyle:{color:zn},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:zn}},timeline:{lineStyle:{color:zn},label:{color:zn},controlStyle:{color:zn,borderColor:zn}},calendar:{itemStyle:{color:Bo},dayLabel:{color:zn},monthLabel:{color:zn},yearLabel:{color:zn}},timeAxis:xr(),logAxis:xr(),valueAxis:xr(),categoryAxis:xr(),line:{symbol:"circle"},graph:{color:hn},gauge:{title:{color:zn},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:zn},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Ni.categoryAxis.splitLine.show=!1;var oa=Ni,hr=b("YN2f"),bs=function(){function jt(){}return jt.prototype.normalizeQuery=function(Ht){var Rt={},Wt={},Yt={};if(k.C(Ht)){var re=Object(hr.f)(Ht);Rt.mainType=re.main||null,Rt.subType=re.sub||null}else{var ve=["Index","Name","Id"],Ze={name:1,dataIndex:1,dataType:1};k.k(Ht,function(Ue,er){for(var lr=!1,ue=0;ue<ve.length;ue++){var Te=ve[ue],ye=er.lastIndexOf(Te);if(ye>0&&ye===er.length-Te.length){var ze=er.slice(0,ye);ze!=="data"&&(Rt.mainType=ze,Rt[Te.toLowerCase()]=Ue,lr=!0)}}Ze.hasOwnProperty(er)&&(Wt[er]=Ue,lr=!0),lr||(Yt[er]=Ue)})}return{cptQuery:Rt,dataQuery:Wt,otherQuery:Yt}},jt.prototype.filter=function(Ht,Rt){var Wt=this.eventInfo;if(!Wt)return!0;var Yt=Wt.targetEl,re=Wt.packedEvent,ve=Wt.model,Ze=Wt.view;if(!ve||!Ze)return!0;var Ue=Rt.cptQuery,er=Rt.dataQuery;return lr(Ue,ve,"mainType")&&lr(Ue,ve,"subType")&&lr(Ue,ve,"index","componentIndex")&&lr(Ue,ve,"name")&&lr(Ue,ve,"id")&&lr(er,re,"name")&&lr(er,re,"dataIndex")&&lr(er,re,"dataType")&&(!Ze.filterForExposedEvent||Ze.filterForExposedEvent(Ht,Rt.otherQuery,Yt,re));function lr(ue,Te,ye,ze){return ue[ye]==null||Te[ze||ye]===ue[ye]}},jt.prototype.afterTrigger=function(){this.eventInfo=null},jt}(),Ya=["symbol","symbolSize","symbolRotate","symbolOffset"],Fo=Ya.concat(["symbolKeepAspect"]),Wr={createOnAllSeries:!0,performRawSeries:!0,reset:function(jt,Ht){var Rt=jt.getData();if(jt.legendIcon&&Rt.setVisual("legendIcon",jt.legendIcon),!jt.hasSymbolVisual)return;for(var Wt={},Yt={},re=!1,ve=0;ve<Ya.length;ve++){var Ze=Ya[ve],Ue=jt.get(Ze);Object(k.w)(Ue)?(re=!0,Yt[Ze]=Ue):Wt[Ze]=Ue}if(Wt.symbol=Wt.symbol||jt.defaultSymbol,Rt.setVisual(Object(k.m)({legendIcon:jt.legendIcon||Wt.symbol,symbolKeepAspect:jt.get("symbolKeepAspect")},Wt)),Ht.isSeriesFiltered(jt))return;var er=Object(k.F)(Yt);function lr(ue,Te){for(var ye=jt.getRawValue(Te),ze=jt.getDataParams(Te),Ye=0;Ye<er.length;Ye++){var ir=er[Ye];ue.setItemVisual(Te,ir,Yt[ir](ye,ze))}}return{dataEach:re?lr:null}}},mr={createOnAllSeries:!0,performRawSeries:!0,reset:function(jt,Ht){if(!jt.hasSymbolVisual||Ht.isSeriesFiltered(jt))return;var Rt=jt.getData();function Wt(Yt,re){for(var ve=Yt.getItemModel(re),Ze=0;Ze<Fo.length;Ze++){var Ue=Fo[Ze],er=ve.getShallow(Ue,!0);er!=null&&Yt.setItemVisual(re,Ue,er)}}return{dataEach:Rt.hasItemOption?Wt:null}}},Un=b("c51C"),qr=b("wHov"),an=b("LiF8"),wr=b("qB7j"),dn=b("QFdq"),zo=b("ZAG4");function co(jt,Ht){jt.eachRawSeries(function(Rt){if(!jt.isSeriesFiltered(Rt)){var Wt=Rt.getData();Wt.hasItemVisual()&&Wt.each(function(ve){var Ze=Wt.getItemVisual(ve,"decal");if(Ze){var Ue=Wt.ensureUniqueItemVisual(ve,"style");Ue.decal=Object(zo.a)(Ze,Ht)}});var Yt=Wt.getVisual("decal");if(Yt){var re=Wt.getVisual("style");re.decal=Object(zo.a)(Yt,Ht)}}})}var Be=new gt.a,Br=Be,ji=b("baNC"),Xi=b("WsGc"),Ma=typeof window!="undefined",da="5.3.0",Ss={zrender:"5.3.0"},Ts=1,Si=800,hu=900,Ln=1e3,Qr=2e3,In=5e3,Le=1e3,Os=1100,As=2e3,pa=3e3,Zi=4e3,Vn=4500,Ir=4600,Er=5e3,Ci=6e3,ga=7e3,Vo={PROCESSOR:{FILTER:Ln,SERIES_FILTER:Si,STATISTIC:In},VISUAL:{LAYOUT:Le,PROGRESSIVE_LAYOUT:Os,GLOBAL:As,CHART:pa,POST_CHART_LAYOUT:Ir,COMPONENT:Zi,BRUSH:Er,CHART_ITEM:Vn,ARIA:Ci,DECAL:ga}},vi="__flagInMainProcess",Hn="__pendingUpdate",Ms="__needsUpdateStatus",vu=/^[a-zA-Z0-9_]+$/,Go="__connectUpdateStatus",Xr=0,du=1,xl=2;function Da(jt){return function(){for(var Ht=[],Rt=0;Rt<arguments.length;Rt++)Ht[Rt]=arguments[Rt];if(this.isDisposed()){ui(this.id);return}return Ds(this,jt,Ht)}}function _l(jt){return function(){for(var Ht=[],Rt=0;Rt<arguments.length;Rt++)Ht[Rt]=arguments[Rt];return Ds(this,jt,Ht)}}function Ds(jt,Ht,Rt){return Rt[0]=Rt[0]&&Rt[0].toLowerCase(),gt.a.prototype[Ht].apply(jt,Rt)}var Yi=function(jt){Object(B.a)(Ht,jt);function Ht(){return jt!==null&&jt.apply(this,arguments)||this}return Ht}(gt.a),Ea=Yi.prototype;Ea.on=_l("on"),Ea.off=_l("off");var ri,Ca,Bi,Qn,ma,tn,Es,Ti,Fi,Pa,sa,yn,pu,Cs,Gn,Uo,zi,Dn,Ho=function(jt){Object(B.a)(Ht,jt);function Ht(Rt,Wt,Yt){var re=jt.call(this,new bs)||this;re._chartsViews=[],re._chartsMap={},re._componentsViews=[],re._componentsMap={},re._pendingActions=[],Yt=Yt||{},Object(k.C)(Wt)&&(Wt=ws[Wt]),re._dom=Rt;var ve="canvas",Ze=!1;if(!1)var Ue,er;var lr=re._zr=bt.init(Rt,{renderer:Yt.renderer||ve,devicePixelRatio:Yt.devicePixelRatio,width:Yt.width,height:Yt.height,ssr:Yt.ssr,useDirtyRect:Yt.useDirtyRect==null?Ze:Yt.useDirtyRect});re._ssr=Yt.ssr,re._throttledZrFlush=Object(Cr.c)(Object(k.c)(lr.flush,lr),17),Wt=Object(k.d)(Wt),Wt&&Se(Wt,!0),re._theme=Wt,re._locale=Object(wr.b)(Yt.locale||wr.a),re._coordSysMgr=new vt.a;var ue=re._api=Gn(re);function Te(ye,ze){return ye.__prio-ze.__prio}return Object(ot.a)(Wo,Te),Object(ot.a)(bl,Te),re._scheduler=new br(re,ue,bl,Wo),re._messageCenter=new Yi,re._initEvents(),re.resize=Object(k.c)(re.resize,re),lr.animation.on("frame",re._onframe,re),Pa(lr,re),sa(lr,re),Object(k.R)(re),re}return Ht.prototype._onframe=function(){if(!this._disposed){Dn(this);var Rt=this._scheduler;if(this[Hn]){var Wt=this[Hn].silent;this[vi]=!0;try{ri(this),Qn.update.call(this,null,this[Hn].updateParams)}catch(Ue){throw this[vi]=!1,this[Hn]=null,Ue}this._zr.flush(),this[vi]=!1,this[Hn]=null,Ti.call(this,Wt),Fi.call(this,Wt)}else if(Rt.unfinished){var Yt=Ts,re=this._model,ve=this._api;Rt.unfinished=!1;do{var Ze=+new Date;Rt.performSeriesTasks(re),Rt.performDataProcessorTasks(re),tn(this,re),Rt.performVisualTasks(re),Cs(this,this._model,ve,"remain",{}),Yt-=+new Date-Ze}while(Yt>0&&Rt.unfinished);Rt.unfinished||this._zr.flush()}}},Ht.prototype.getDom=function(){return this._dom},Ht.prototype.getId=function(){return this.id},Ht.prototype.getZr=function(){return this._zr},Ht.prototype.isSSR=function(){return this._ssr},Ht.prototype.setOption=function(Rt,Wt,Yt){if(!this[vi]){if(this._disposed){ui(this.id);return}var re,ve,Ze;if(Object(k.A)(Wt)&&(Yt=Wt.lazyUpdate,re=Wt.silent,ve=Wt.replaceMerge,Ze=Wt.transition,Wt=Wt.notMerge),this[vi]=!0,!this._model||Wt){var Ue=new At(this._api),er=this._theme,lr=this._model=new H;lr.scheduler=this._scheduler,lr.ssr=this._ssr,lr.init(null,null,null,er,this._locale,Ue)}this._model.setOption(Rt,{replaceMerge:ve},wa);var ue={seriesTransition:Ze,optionChanged:!0};if(Yt)this[Hn]={silent:re,updateParams:ue},this[vi]=!1,this.getZr().wakeUp();else{try{ri(this),Qn.update.call(this,null,ue)}catch(Te){throw this[Hn]=null,this[vi]=!1,Te}this._ssr||this._zr.flush(),this[Hn]=null,this[vi]=!1,Ti.call(this,re),Fi.call(this,re)}}},Ht.prototype.setTheme=function(){Object(q.a)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ht.prototype.getModel=function(){return this._model},Ht.prototype.getOption=function(){return this._model&&this._model.getOption()},Ht.prototype.getWidth=function(){return this._zr.getWidth()},Ht.prototype.getHeight=function(){return this._zr.getHeight()},Ht.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ma&&window.devicePixelRatio||1},Ht.prototype.getRenderedCanvas=function(Rt){return this.renderToCanvas(Rt)},Ht.prototype.renderToCanvas=function(Rt){Rt=Rt||{};var Wt=this._zr.painter;return Wt.getRenderedCanvas({backgroundColor:Rt.backgroundColor||this._model.get("backgroundColor"),pixelRatio:Rt.pixelRatio||this.getDevicePixelRatio()})},Ht.prototype.renderToSVGString=function(Rt){Rt=Rt||{};var Wt=this._zr.painter;return Wt.renderToString({useViewBox:Rt.useViewBox})},Ht.prototype.getSvgDataURL=function(){if(!!ft.a.svgSupported){var Rt=this._zr,Wt=Rt.storage.getDisplayList();return Object(k.k)(Wt,function(Yt){Yt.stopAnimation(null,!0)}),Rt.painter.toDataURL()}},Ht.prototype.getDataURL=function(Rt){if(this._disposed){ui(this.id);return}Rt=Rt||{};var Wt=Rt.excludeComponents,Yt=this._model,re=[],ve=this;Object(k.k)(Wt,function(Ue){Yt.eachComponent({mainType:Ue},function(er){var lr=ve._componentsMap[er.__viewId];lr.group.ignore||(re.push(lr),lr.group.ignore=!0)})});var Ze=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(Rt).toDataURL("image/"+(Rt&&Rt.type||"png"));return Object(k.k)(re,function(Ue){Ue.group.ignore=!1}),Ze},Ht.prototype.getConnectedDataURL=function(Rt){if(this._disposed){ui(this.id);return}var Wt=Rt.type==="svg",Yt=this.group,re=Math.min,ve=Math.max,Ze=Infinity;if(Ia[Yt]){var Ue=Ze,er=Ze,lr=-Ze,ue=-Ze,Te=[],ye=Rt&&Rt.pixelRatio||this.getDevicePixelRatio();Object(k.k)(La,function(yr,zr){if(yr.group===Yt){var en=Wt?yr.getZr().painter.getSvgDom().innerHTML:yr.renderToCanvas(Object(k.d)(Rt)),Ar=yr.getDom().getBoundingClientRect();Ue=re(Ar.left,Ue),er=re(Ar.top,er),lr=ve(Ar.right,lr),ue=ve(Ar.bottom,ue),Te.push({dom:en,left:Ar.left,top:Ar.top})}}),Ue*=ye,er*=ye,lr*=ye,ue*=ye;var ze=lr-Ue,Ye=ue-er,ir=ji.d.createCanvas(),ur=bt.init(ir,{renderer:Wt?"svg":"canvas"});if(ur.resize({width:ze,height:Ye}),Wt){var Or="";return Object(k.k)(Te,function(yr){var zr=yr.left-Ue,en=yr.top-er;Or+='<g transform="translate('+zr+","+en+')">'+yr.dom+"</g>"}),ur.painter.getSvgRoot().innerHTML=Or,Rt.connectedBackgroundColor&&ur.painter.setBackgroundColor(Rt.connectedBackgroundColor),ur.refreshImmediately(),ur.painter.toDataURL()}else return Rt.connectedBackgroundColor&&ur.add(new tr.a({shape:{x:0,y:0,width:ze,height:Ye},style:{fill:Rt.connectedBackgroundColor}})),Object(k.k)(Te,function(yr){var zr=new nr.a({style:{x:yr.left*ye-Ue,y:yr.top*ye-er,image:yr.dom}});ur.add(zr)}),ur.refreshImmediately(),ir.toDataURL("image/"+(Rt&&Rt.type||"png"))}else return this.getDataURL(Rt)},Ht.prototype.convertToPixel=function(Rt,Wt){return ma(this,"convertToPixel",Rt,Wt)},Ht.prototype.convertFromPixel=function(Rt,Wt){return ma(this,"convertFromPixel",Rt,Wt)},Ht.prototype.containPixel=function(Rt,Wt){if(this._disposed){ui(this.id);return}var Yt=this._model,re,ve=lt.s(Yt,Rt);return Object(k.k)(ve,function(Ze,Ue){Ue.indexOf("Models")>=0&&Object(k.k)(Ze,function(er){var lr=er.coordinateSystem;if(lr&&lr.containPoint)re=re||!!lr.containPoint(Wt);else if(Ue==="seriesModels"){var ue=this._chartsMap[er.__viewId];ue&&ue.containPoint&&(re=re||ue.containPoint(Wt,er))}},this)},this),!!re},Ht.prototype.getVisual=function(Rt,Wt){var Yt=this._model,re=lt.s(Yt,Rt,{defaultMainType:"series"}),ve=re.seriesModel,Ze=ve.getData(),Ue=re.hasOwnProperty("dataIndexInside")?re.dataIndexInside:re.hasOwnProperty("dataIndex")?Ze.indexOfRawIndex(re.dataIndex):null;return Ue!=null?Object(Un.a)(Ze,Ue,Wt):Object(Un.b)(Ze,Wt)},Ht.prototype.getViewOfComponentModel=function(Rt){return this._componentsMap[Rt.__viewId]},Ht.prototype.getViewOfSeriesModel=function(Rt){return this._chartsMap[Rt.__viewId]},Ht.prototype._initEvents=function(){var Rt=this;Object(k.k)(ho,function(Wt){var Yt=function(re){var ve=Rt.getModel(),Ze=re.target,Ue,er=Wt==="globalout";if(er?Ue={}:Ze&&Object(dn.a)(Ze,function(ze){var Ye=Object(ke.a)(ze);if(Ye&&Ye.dataIndex!=null){var ir=Ye.dataModel||ve.getSeriesByIndex(Ye.seriesIndex);return Ue=ir&&ir.getDataParams(Ye.dataIndex,Ye.dataType)||{},!0}else if(Ye.eventData)return Ue=Object(k.m)({},Ye.eventData),!0},!0),Ue){var lr=Ue.componentType,ue=Ue.componentIndex;(lr==="markLine"||lr==="markPoint"||lr==="markArea")&&(lr="series",ue=Ue.seriesIndex);var Te=lr&&ue!=null&&ve.getComponent(lr,ue),ye=Te&&Rt[Te.mainType==="series"?"_chartsMap":"_componentsMap"][Te.__viewId];Ue.event=re,Ue.type=Wt,Rt._$eventProcessor.eventInfo={targetEl:Ze,packedEvent:Ue,model:Te,view:ye},Rt.trigger(Wt,Ue)}};Yt.zrEventfulCallAtLast=!0,Rt._zr.on(Wt,Yt,Rt)}),Object(k.k)(ya,function(Wt,Yt){Rt._messageCenter.on(Yt,function(re){this.trigger(Yt,re)},Rt)}),Object(k.k)(["selectchanged"],function(Wt){Rt._messageCenter.on(Wt,function(Yt){this.trigger(Wt,Yt)},Rt)}),Object(qr.b)(this._messageCenter,this,this._api)},Ht.prototype.isDisposed=function(){return this._disposed},Ht.prototype.clear=function(){if(this._disposed){ui(this.id);return}this.setOption({series:[]},!0)},Ht.prototype.dispose=function(){if(this._disposed){ui(this.id);return}this._disposed=!0;var Rt=this.getDom();Rt&&lt.w(this.getDom(),$i,"");var Wt=this,Yt=Wt._api,re=Wt._model;Object(k.k)(Wt._componentsViews,function(ve){ve.dispose(re,Yt)}),Object(k.k)(Wt._chartsViews,function(ve){ve.dispose(re,Yt)}),Wt._zr.dispose(),Wt._dom=Wt._model=Wt._chartsMap=Wt._componentsMap=Wt._chartsViews=Wt._componentsViews=Wt._scheduler=Wt._api=Wt._zr=Wt._throttledZrFlush=Wt._theme=Wt._coordSysMgr=Wt._messageCenter=null,delete La[Wt.id]},Ht.prototype.resize=function(Rt){if(!this[vi]){if(this._disposed){ui(this.id);return}this._zr.resize(Rt);var Wt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!Wt){var Yt=Wt.resetOption("media"),re=Rt&&Rt.silent;this[Hn]&&(re==null&&(re=this[Hn].silent),Yt=!0,this[Hn]=null),this[vi]=!0;try{Yt&&ri(this),Qn.update.call(this,{type:"resize",animation:Object(k.m)({duration:0},Rt&&Rt.animation)})}catch(ve){throw this[vi]=!1,ve}this[vi]=!1,Ti.call(this,re),Fi.call(this,re)}}},Ht.prototype.showLoading=function(Rt,Wt){if(this._disposed){ui(this.id);return}if(Object(k.A)(Rt)&&(Wt=Rt,Rt=""),Rt=Rt||"default",this.hideLoading(),!!ko[Rt]){var Yt=ko[Rt](this._api,Wt),re=this._zr;this._loadingFX=Yt,re.add(Yt)}},Ht.prototype.hideLoading=function(){if(this._disposed){ui(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Ht.prototype.makeActionFromEvent=function(Rt){var Wt=Object(k.m)({},Rt);return Wt.type=ya[Rt.type],Wt},Ht.prototype.dispatchAction=function(Rt,Wt){if(this._disposed){ui(this.id);return}if(Object(k.A)(Wt)||(Wt={silent:!!Wt}),!!Ka[Rt.type]&&!!this._model){if(this[vi]){this._pendingActions.push(Rt);return}var Yt=Wt.silent;Es.call(this,Rt,Yt);var re=Wt.flush;re?this._zr.flush():re!==!1&&ft.a.browser.weChat&&this._throttledZrFlush(),Ti.call(this,Yt),Fi.call(this,Yt)}},Ht.prototype.updateLabelLayout=function(){Br.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ht.prototype.appendData=function(Rt){if(this._disposed){ui(this.id);return}var Wt=Rt.seriesIndex,Yt=this.getModel(),re=Yt.getSeriesByIndex(Wt);re.appendData(Rt),this._scheduler.unfinished=!0,this.getZr().wakeUp()},Ht.internalField=function(){ri=function(ue){var Te=ue._scheduler;Te.restorePipelines(ue._model),Te.prepareStageTasks(),Ca(ue,!0),Ca(ue,!1),Te.plan()},Ca=function(ue,Te){for(var ye=ue._model,ze=ue._scheduler,Ye=Te?ue._componentsViews:ue._chartsViews,ir=Te?ue._componentsMap:ue._chartsMap,ur=ue._zr,Or=ue._api,yr=0;yr<Ye.length;yr++)Ye[yr].__alive=!1;Te?ye.eachComponent(function(Ar,pn){Ar!=="series"&&zr(pn)}):ye.eachSeries(zr);function zr(Ar){var pn=Ar.__requireNewView;Ar.__requireNewView=!1;var Oi="_ec_"+Ar.id+"_"+Ar.type,wn=!pn&&ir[Oi];if(!wn){var Gi=Object(hr.f)(Ar.type),Ba=Te?le.a.getClass(Gi.main,Gi.sub):De.a.getClass(Gi.sub);wn=new Ba,wn.init(ye,Or),ir[Oi]=wn,Ye.push(wn),ur.add(wn.group)}Ar.__viewId=wn.__id=Oi,wn.__alive=!0,wn.__model=Ar,wn.group.__ecComponentInfo={mainType:Ar.mainType,index:Ar.componentIndex},!Te&&ze.prepareView(wn,Ar,ye,Or)}for(var yr=0;yr<Ye.length;){var en=Ye[yr];en.__alive?yr++:(!Te&&en.renderTask.dispose(),ur.remove(en.group),en.dispose(ye,Or),Ye.splice(yr,1),ir[en.__id]===en&&delete ir[en.__id],en.__id=en.group.__ecComponentInfo=null)}},Bi=function(ue,Te,ye,ze,Ye){var ir=ue._model;if(ir.setUpdatePayload(ye),!ze){Object(k.k)([].concat(ue._componentsViews).concat(ue._chartsViews),en);return}var ur={};ur[ze+"Id"]=ye[ze+"Id"],ur[ze+"Index"]=ye[ze+"Index"],ur[ze+"Name"]=ye[ze+"Name"];var Or={mainType:ze,query:ur};Ye&&(Or.subType=Ye);var yr=ye.excludeSeriesId,zr;yr!=null&&(zr=Object(k.f)(),Object(k.k)(lt.r(yr),function(Ar){var pn=lt.e(Ar,null);pn!=null&&zr.set(pn,!0)})),ir&&ir.eachComponent(Or,function(Ar){var pn=zr&&zr.get(Ar.id)!==null;if(!pn)if(Object(Re.z)(ye))if(Ar instanceof qt.b)ye.type===Re.c&&!ye.notBlur&&!Ar.get(["emphasis","disabled"])&&Object(Re.m)(Ar,ye,ue._api);else{var Oi=Object(Re.t)(Ar.mainType,Ar.componentIndex,ye.name,ue._api),wn=Oi.focusSelf,Gi=Oi.dispatchers;ye.type===Re.c&&wn&&!ye.notBlur&&Object(Re.l)(Ar.mainType,Ar.componentIndex,ue._api),Gi&&Object(k.k)(Gi,function(Ba){ye.type===Re.c?Object(Re.r)(Ba):Object(Re.C)(Ba)})}else Object(Re.A)(ye)&&Ar instanceof qt.b&&(Object(Re.K)(Ar,ye,ue._api),Object(Re.L)(Ar),zi(ue))},ue),ir&&ir.eachComponent(Or,function(Ar){var pn=zr&&zr.get(Ar.id)!==null;pn||en(ue[ze==="series"?"_chartsMap":"_componentsMap"][Ar.__viewId])},ue);function en(Ar){Ar&&Ar.__alive&&Ar[Te]&&Ar[Te](Ar.__model,ir,ue._api,ye)}},Qn={prepareAndUpdate:function(ue){ri(this),Qn.update.call(this,ue,{optionChanged:ue.newOption!=null})},update:function(ue,Te){var ye=this._model,ze=this._api,Ye=this._zr,ir=this._coordSysMgr,ur=this._scheduler;if(!!ye){ye.setUpdatePayload(ue),ur.restoreData(ye,ue),ur.performSeriesTasks(ye),ir.create(ye,ze),ur.performDataProcessorTasks(ye,ue),tn(this,ye),ir.update(ye,ze),Rt(ye),ur.performVisualTasks(ye,ue),yn(this,ye,ze,ue,Te);var Or=ye.get("backgroundColor")||"transparent",yr=ye.get("darkMode");Ye.setBackgroundColor(Or),yr!=null&&yr!=="auto"&&Ye.setDarkMode(yr),Br.trigger("afterupdate",ye,ze)}},updateTransform:function(ue){var Te=this,ye=this._model,ze=this._api;if(!!ye){ye.setUpdatePayload(ue);var Ye=[];ye.eachComponent(function(ur,Or){if(ur!=="series"){var yr=Te.getViewOfComponentModel(Or);if(yr&&yr.__alive)if(yr.updateTransform){var zr=yr.updateTransform(Or,ye,ze,ue);zr&&zr.update&&Ye.push(yr)}else Ye.push(yr)}});var ir=Object(k.f)();ye.eachSeries(function(ur){var Or=Te._chartsMap[ur.__viewId];if(Or.updateTransform){var yr=Or.updateTransform(ur,ye,ze,ue);yr&&yr.update&&ir.set(ur.uid,1)}else ir.set(ur.uid,1)}),Rt(ye),this._scheduler.performVisualTasks(ye,ue,{setDirty:!0,dirtyMap:ir}),Cs(this,ye,ze,ue,{},ir),Br.trigger("afterupdate",ye,ze)}},updateView:function(ue){var Te=this._model;!Te||(Te.setUpdatePayload(ue),De.a.markUpdateMethod(ue,"updateView"),Rt(Te),this._scheduler.performVisualTasks(Te,ue,{setDirty:!0}),yn(this,Te,this._api,ue,{}),Br.trigger("afterupdate",Te,this._api))},updateVisual:function(ue){var Te=this,ye=this._model;!ye||(ye.setUpdatePayload(ue),ye.eachSeries(function(ze){ze.getData().clearAllVisual()}),De.a.markUpdateMethod(ue,"updateVisual"),Rt(ye),this._scheduler.performVisualTasks(ye,ue,{visualType:"visual",setDirty:!0}),ye.eachComponent(function(ze,Ye){if(ze!=="series"){var ir=Te.getViewOfComponentModel(Ye);ir&&ir.__alive&&ir.updateVisual(Ye,ye,Te._api,ue)}}),ye.eachSeries(function(ze){var Ye=Te._chartsMap[ze.__viewId];Ye.updateVisual(ze,ye,Te._api,ue)}),Br.trigger("afterupdate",ye,this._api))},updateLayout:function(ue){Qn.update.call(this,ue)}},ma=function(ue,Te,ye,ze){if(ue._disposed){ui(ue.id);return}for(var Ye=ue._model,ir=ue._coordSysMgr.getCoordinateSystems(),ur,Or=lt.s(Ye,ye),yr=0;yr<ir.length;yr++){var zr=ir[yr];if(zr[Te]&&(ur=zr[Te](Ye,Or,ze))!=null)return ur}},tn=function(ue,Te){var ye=ue._chartsMap,ze=ue._scheduler;Te.eachSeries(function(Ye){ze.updateStreamModes(Ye,ye[Ye.__viewId])})},Es=function(ue,Te){var ye=this,ze=this.getModel(),Ye=ue.type,ir=ue.escapeConnect,ur=Ka[Ye],Or=ur.actionInfo,yr=(Or.update||"update").split(":"),zr=yr.pop(),en=yr[0]!=null&&Object(hr.f)(yr[0]);this[vi]=!0;var Ar=[ue],pn=!1;ue.batch&&(pn=!0,Ar=Object(k.H)(ue.batch,function(gn){return gn=Object(k.i)(Object(k.m)({},gn),ue),gn.batch=null,gn}));var Oi=[],wn,Gi=Object(Re.A)(ue),Ba=Object(Re.z)(ue);if(Ba&&Object(Re.k)(this._api),Object(k.k)(Ar,function(gn){if(wn=ur.action(gn,ye._model,ye._api),wn=wn||Object(k.m)({},gn),wn.type=Or.event||wn.type,Oi.push(wn),Ba){var $n=lt.t(ue),ih=$n.queryOptionMap,Al=$n.mainTypeSpecified,Rs=Al?ih.keys()[0]:"series";Bi(ye,zr,gn,Rs),zi(ye)}else Gi?(Bi(ye,zr,gn,"series"),zi(ye)):en&&Bi(ye,zr,gn,en.main,en.sub)}),zr!=="none"&&!Ba&&!Gi&&!en)try{this[Hn]?(ri(this),Qn.update.call(this,ue),this[Hn]=null):Qn[zr].call(this,ue)}catch(gn){throw this[vi]=!1,gn}if(pn?wn={type:Or.event||Ye,escapeConnect:ir,batch:Oi}:wn=Oi[0],this[vi]=!1,!Te){var xu=this._messageCenter;if(xu.trigger(wn.type,wn),Gi){var Yo={type:"selectchanged",escapeConnect:ir,selected:Object(Re.u)(ze),isFromClick:ue.isFromClick||!1,fromAction:ue.type,fromActionPayload:ue};xu.trigger(Yo.type,Yo)}}},Ti=function(ue){for(var Te=this._pendingActions;Te.length;){var ye=Te.shift();Es.call(this,ye,ue)}},Fi=function(ue){!ue&&this.trigger("updated")},Pa=function(ue,Te){ue.on("rendered",function(ye){Te.trigger("rendered",ye),ue.animation.isFinished()&&!Te[Hn]&&!Te._scheduler.unfinished&&!Te._pendingActions.length&&Te.trigger("finished")})},sa=function(ue,Te){ue.on("mouseover",function(ye){var ze=ye.target,Ye=Object(dn.a)(ze,Re.y);Ye&&(Object(Re.x)(Ye,ye,Te._api),zi(Te))}).on("mouseout",function(ye){var ze=ye.target,Ye=Object(dn.a)(ze,Re.y);Ye&&(Object(Re.w)(Ye,ye,Te._api),zi(Te))}).on("click",function(ye){var ze=ye.target,Ye=Object(dn.a)(ze,function(Or){return Object(ke.a)(Or).dataIndex!=null},!0);if(Ye){var ir=Ye.selected?"unselect":"select",ur=Object(ke.a)(Ye);Te._api.dispatchAction({type:ir,dataType:ur.dataType,dataIndexInside:ur.dataIndex,seriesIndex:ur.seriesIndex,isFromClick:!0})}})};function Rt(ue){ue.clearColorPalette(),ue.eachSeries(function(Te){Te.clearColorPalette()})}function Wt(ue){var Te=[],ye=[],ze=!1;if(ue.eachComponent(function(Or,yr){var zr=yr.get("zlevel")||0,en=yr.get("z")||0,Ar=yr.getZLevelKey();ze=ze||!!Ar,(Or==="series"?ye:Te).push({zlevel:zr,z:en,idx:yr.componentIndex,type:Or,key:Ar})}),ze){var Ye=Te.concat(ye),ir,ur;Object(ot.a)(Ye,function(Or,yr){return Or.zlevel===yr.zlevel?Or.z-yr.z:Or.zlevel-yr.zlevel}),Object(k.k)(Ye,function(Or){var yr=ue.getComponent(Or.type,Or.idx),zr=Or.zlevel,en=Or.key;ir!=null&&(zr=Math.max(ir,zr)),en?(zr===ir&&en!==ur&&zr++,ur=en):ur&&(zr===ir&&zr++,ur=""),ir=zr,yr.setZLevel(zr)})}}yn=function(ue,Te,ye,ze,Ye){Wt(Te),pu(ue,Te,ye,ze,Ye),Object(k.k)(ue._chartsViews,function(ir){ir.__alive=!1}),Cs(ue,Te,ye,ze,Ye),Object(k.k)(ue._chartsViews,function(ir){ir.__alive||ir.remove(Te,ye)})},pu=function(ue,Te,ye,ze,Ye,ir){Object(k.k)(ir||ue._componentsViews,function(ur){var Or=ur.__model;er(Or,ur),ur.render(Or,Te,ye,ze),Ze(Or,ur),lr(Or,ur)})},Cs=function(ue,Te,ye,ze,Ye,ir){var ur=ue._scheduler;Ye=Object(k.m)(Ye||{},{updatedSeries:Te.getSeries()}),Br.trigger("series:beforeupdate",Te,ye,Ye);var Or=!1;Te.eachSeries(function(yr){var zr=ue._chartsMap[yr.__viewId];zr.__alive=!0;var en=zr.renderTask;ur.updatePayload(en,ze),er(yr,zr),ir&&ir.get(yr.uid)&&en.dirty(),en.perform(ur.getPerformArgs(en))&&(Or=!0),zr.group.silent=!!yr.get("silent"),ve(yr,zr),Object(Re.L)(yr)}),ur.unfinished=Or||ur.unfinished,Br.trigger("series:layoutlabels",Te,ye,Ye),Br.trigger("series:transition",Te,ye,Ye),Te.eachSeries(function(yr){var zr=ue._chartsMap[yr.__viewId];Ze(yr,zr),lr(yr,zr)}),re(ue,Te),Br.trigger("series:afterupdate",Te,ye,Ye)},zi=function(ue){ue[Ms]=!0,ue.getZr().wakeUp()},Dn=function(ue){!ue[Ms]||(ue.getZr().storage.traverse(function(Te){fe.d(Te)||Yt(Te)}),ue[Ms]=!1)};function Yt(ue){for(var Te=[],ye=ue.currentStates,ze=0;ze<ye.length;ze++){var Ye=ye[ze];Ye==="emphasis"||Ye==="blur"||Ye==="select"||Te.push(Ye)}ue.selected&&ue.states.select&&Te.push("select"),ue.hoverState===Re.e&&ue.states.emphasis?Te.push("emphasis"):ue.hoverState===Re.d&&ue.states.blur&&Te.push("blur"),ue.useStates(Te)}function re(ue,Te){var ye=ue._zr,ze=ye.storage,Ye=0;ze.traverse(function(ir){ir.isGroup||Ye++}),Ye>Te.get("hoverLayerThreshold")&&!ft.a.node&&!ft.a.worker&&Te.eachSeries(function(ir){if(!ir.preventUsingHoverLayer){var ur=ue._chartsMap[ir.__viewId];ur.__alive&&ur.eachRendered(function(Or){Or.states.emphasis&&(Or.states.emphasis.hoverLayer=!0)})}})}function ve(ue,Te){var ye=ue.get("blendMode")||null;Te.eachRendered(function(ze){ze.isGroup||(ze.style.blend=ye)})}function Ze(ue,Te){if(!ue.preventAutoZ){var ye=ue.get("z")||0,ze=ue.get("zlevel")||0;Te.eachRendered(function(Ye){return Ue(Ye,ye,ze,-Infinity),!0})}}function Ue(ue,Te,ye,ze){var Ye=ue.getTextContent(),ir=ue.getTextGuideLine(),ur=ue.isGroup;if(ur)for(var Or=ue.childrenRef(),yr=0;yr<Or.length;yr++)ze=Math.max(Ue(Or[yr],Te,ye,ze),ze);else ue.z=Te,ue.zlevel=ye,ze=Math.max(ue.z2,ze);if(Ye&&(Ye.z=Te,Ye.zlevel=ye,isFinite(ze)&&(Ye.z2=ze+2)),ir){var zr=ue.textGuideLineConfig;ir.z=Te,ir.zlevel=ye,isFinite(ze)&&(ir.z2=ze+(zr&&zr.showAbove?1:-1))}return ze}function er(ue,Te){Te.eachRendered(function(ye){if(!fe.d(ye)){var ze=ye.getTextContent(),Ye=ye.getTextGuideLine();ye.stateTransition&&(ye.stateTransition=null),ze&&ze.stateTransition&&(ze.stateTransition=null),Ye&&Ye.stateTransition&&(Ye.stateTransition=null),ye.hasState()?(ye.prevStates=ye.currentStates,ye.clearStates()):ye.prevStates&&(ye.prevStates=null)}})}function lr(ue,Te){var ye=ue.getModel("stateAnimation"),ze=ue.isAnimationEnabled(),Ye=ye.get("duration"),ir=Ye>0?{duration:Ye,delay:ye.get("delay"),easing:ye.get("easing")}:null;Te.eachRendered(function(ur){if(ur.states&&ur.states.emphasis){if(fe.d(ur))return;if(ur instanceof Ee.b&&Object(Re.E)(ur),ur.__dirty){var Or=ur.prevStates;Or&&ur.useStates(Or)}if(ze){ur.stateTransition=ir;var yr=ur.getTextContent(),zr=ur.getTextGuideLine();yr&&(yr.stateTransition=ir),zr&&(zr.stateTransition=ir)}ur.__dirty&&Yt(ur)}})}Gn=function(ue){return new(function(Te){Object(B.a)(ye,Te);function ye(){return Te!==null&&Te.apply(this,arguments)||this}return ye.prototype.getCoordinateSystems=function(){return ue._coordSysMgr.getCoordinateSystems()},ye.prototype.getComponentByElement=function(ze){for(;ze;){var Ye=ze.__ecComponentInfo;if(Ye!=null)return ue._model.getComponent(Ye.mainType,Ye.index);ze=ze.parent}},ye.prototype.enterEmphasis=function(ze,Ye){Object(Re.r)(ze,Ye),zi(ue)},ye.prototype.leaveEmphasis=function(ze,Ye){Object(Re.C)(ze,Ye),zi(ue)},ye.prototype.enterBlur=function(ze){Object(Re.q)(ze),zi(ue)},ye.prototype.leaveBlur=function(ze){Object(Re.B)(ze),zi(ue)},ye.prototype.enterSelect=function(ze){Object(Re.s)(ze),zi(ue)},ye.prototype.leaveSelect=function(ze){Object(Re.D)(ze),zi(ue)},ye.prototype.getModel=function(){return ue.getModel()},ye.prototype.getViewOfComponentModel=function(ze){return ue.getViewOfComponentModel(ze)},ye.prototype.getViewOfSeriesModel=function(ze){return ue.getViewOfSeriesModel(ze)},ye}(st))(ue)},Uo=function(ue){function Te(ye,ze){for(var Ye=0;Ye<ye.length;Ye++){var ir=ye[Ye];ir[Go]=ze}}Object(k.k)(ya,function(ye,ze){ue._messageCenter.on(ze,function(Ye){if(Ia[ue.group]&&ue[Go]!==Xr){if(Ye&&Ye.escapeConnect)return;var ir=ue.makeActionFromEvent(Ye),ur=[];Object(k.k)(La,function(Or){Or!==ue&&Or.group===ue.group&&ur.push(Or)}),Te(ur,Xr),Object(k.k)(ur,function(Or){Or[Go]!==du&&Or.dispatchAction(ir)}),Te(ur,xl)}})})}}(),Ht}(gt.a),Ps=Ho.prototype;Ps.on=Da("on"),Ps.off=Da("off"),Ps.one=function(jt,Ht,Rt){var Wt=this;Object(q.a)("ECharts#one is deprecated.");function Yt(){for(var re=[],ve=0;ve<arguments.length;ve++)re[ve]=arguments[ve];Ht&&Ht.apply&&Ht.apply(this,re),Wt.off(jt,Yt)}this.on.call(this,jt,Yt,Rt)};var ho=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function ui(jt){}var Ka={},ya={},bl=[],wa=[],Wo=[],ws={},ko={},La={},Ia={},pf=+new Date-0,gf=+new Date-0,$i="_echarts_instance_";function Ls(jt,Ht,Rt){var Wt=!(Rt&&Rt.ssr);if(Wt){var Yt=vo(jt);if(Yt)return Yt}var re=new Ho(jt,Ht,Rt);return re.id="ec_"+pf++,La[re.id]=re,Wt&&lt.w(jt,$i,re.id),Uo(re),Br.trigger("afterinit",re),re}function Sl(jt){if(Object(k.t)(jt)){var Ht=jt;jt=null,Object(k.k)(Ht,function(Rt){Rt.group!=null&&(jt=Rt.group)}),jt=jt||"g_"+gf++,Object(k.k)(Ht,function(Rt){Rt.group=jt})}return Ia[jt]=!0,jt}function gu(jt){Ia[jt]=!1}var Tl=gu;function Xo(jt){Object(k.C)(jt)?jt=La[jt]:jt instanceof Ho||(jt=vo(jt)),jt instanceof Ho&&!jt.isDisposed()&&jt.dispose()}function vo(jt){return La[lt.g(jt,$i)]}function mf(jt){return La[jt]}function Jn(jt,Ht){ws[jt]=Ht}function po(jt){Object(k.r)(wa,jt)<0&&wa.push(jt)}function la(jt,Ht){Wn(bl,jt,Ht,Qr)}function Ol(jt){Zo("afterinit",jt)}function mu(jt){Zo("afterupdate",jt)}function Zo(jt,Ht){Br.on(jt,Ht)}function Ra(jt,Ht,Rt){Object(k.w)(Ht)&&(Rt=Ht,Ht="");var Wt=Object(k.A)(jt)?jt.type:[jt,jt={event:Ht}][0];jt.event=(jt.event||Wt).toLowerCase(),Ht=jt.event,!ya[Ht]&&(Object(k.b)(vu.test(Wt)&&vu.test(Ht)),Ka[Wt]||(Ka[Wt]={action:Rt,actionInfo:jt}),ya[Ht]=Wt)}function Na(jt,Ht){vt.a.register(jt,Ht)}function kr(jt){var Ht=vt.a.get(jt);if(Ht)return Ht.getDimensionsInfo?Ht.getDimensionsInfo():Ht.dimensions.slice()}function ja(jt,Ht){Wn(Wo,jt,Ht,Le,"layout")}function xa(jt,Ht){Wn(Wo,jt,Ht,pa,"visual")}var Qa=[];function Wn(jt,Ht,Rt,Wt,Yt){if((Object(k.w)(Ht)||Object(k.A)(Ht))&&(Rt=Ht,Ht=Wt),!(Object(k.r)(Qa,Rt)>=0)){Qa.push(Rt);var re=br.wrapStageHandler(Rt,Yt);re.__prio=Ht,re.__raw=Rt,jt.push(re)}}function yu(jt,Ht){ko[jt]=Ht}function Is(jt){Object(ji.e)({createCanvas:jt})}function Vi(jt,Ht,Rt){var Wt=Object(Xi.a)("registerMap");Wt&&Wt(jt,Ht,Rt)}function qi(jt){var Ht=Object(Xi.a)("getMap");return Ht&&Ht(jt)}var _a=an.b;xa(As,Za),xa(Vn,lo),xa(Vn,Aa),xa(As,Wr),xa(Vn,mr),xa(ga,co),po(Se),la(hu,Ie),yu("default",df),Ra({type:Re.c,event:Re.c,update:Re.c},k.L),Ra({type:Re.b,event:Re.b,update:Re.b},k.L),Ra({type:Re.f,event:Re.f,update:Re.f},k.L),Ra({type:Re.i,event:Re.i,update:Re.i},k.L),Ra({type:Re.h,event:Re.h,update:Re.h},k.L),Jn("light",Nr),Jn("dark",oa);var Pn={}},Xy3h:function(je,nt,b){"use strict";b.r(nt),b.d(nt,"parse",function(){return ht}),b.d(nt,"lift",function(){return et}),b.d(nt,"toHex",function(){return $}),b.d(nt,"fastLerp",function(){return N}),b.d(nt,"fastMapToColor",function(){return Y}),b.d(nt,"lerp",function(){return K}),b.d(nt,"mapToColor",function(){return V}),b.d(nt,"modifyHSL",function(){return G}),b.d(nt,"modifyAlpha",function(){return I}),b.d(nt,"stringify",function(){return A}),b.d(nt,"lum",function(){return C}),b.d(nt,"random",function(){return E});var B=b("AOUq"),bt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function k(O){return O=Math.round(O),O<0?0:O>255?255:O}function ft(O){return O=Math.round(O),O<0?0:O>360?360:O}function ot(O){return O<0?0:O>1?1:O}function gt(O){var M=O;return M.length&&M.charAt(M.length-1)==="%"?k(parseFloat(M)/100*255):k(parseInt(M,10))}function lt(O){var M=O;return M.length&&M.charAt(M.length-1)==="%"?ot(parseFloat(M)/100):ot(parseFloat(M))}function z(O,M,L){return L<0?L+=1:L>1&&(L-=1),L*6<1?O+(M-O)*L*6:L*2<1?M:L*3<2?O+(M-O)*(2/3-L)*6:O}function X(O,M,L){return O+(M-O)*L}function J(O,M,L,H,U){return O[0]=M,O[1]=L,O[2]=H,O[3]=U,O}function at(O,M){return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O}var F=new B.a(20),Z=null;function W(O,M){Z&&at(Z,M),Z=F.put(O,Z||M.slice())}function ht(O,M){if(!!O){M=M||[];var L=F.get(O);if(L)return at(M,L);O=O+"";var H=O.replace(/ /g,"").toLowerCase();if(H in bt)return at(M,bt[H]),W(O,M),M;var U=H.length;if(H.charAt(0)==="#"){if(U===4||U===5){var ct=parseInt(H.slice(1,4),16);if(!(ct>=0&&ct<=4095)){J(M,0,0,0,1);return}return J(M,(ct&3840)>>4|(ct&3840)>>8,ct&240|(ct&240)>>4,ct&15|(ct&15)<<4,U===5?parseInt(H.slice(4),16)/15:1),W(O,M),M}else if(U===7||U===9){var ct=parseInt(H.slice(1,7),16);if(!(ct>=0&&ct<=16777215)){J(M,0,0,0,1);return}return J(M,(ct&16711680)>>16,(ct&65280)>>8,ct&255,U===9?parseInt(H.slice(7),16)/255:1),W(O,M),M}return}var st=H.indexOf("("),vt=H.indexOf(")");if(st!==-1&&vt+1===U){var it=H.substr(0,st),dt=H.substr(st+1,vt-(st+1)).split(","),St=1;switch(it){case"rgba":if(dt.length!==4)return dt.length===3?J(M,+dt[0],+dt[1],+dt[2],1):J(M,0,0,0,1);St=lt(dt.pop());case"rgb":if(dt.length!==3){J(M,0,0,0,1);return}return J(M,gt(dt[0]),gt(dt[1]),gt(dt[2]),St),W(O,M),M;case"hsla":if(dt.length!==4){J(M,0,0,0,1);return}return dt[3]=lt(dt[3]),q(dt,M),W(O,M),M;case"hsl":if(dt.length!==3){J(M,0,0,0,1);return}return q(dt,M),W(O,M),M;default:return}}J(M,0,0,0,1)}}function q(O,M){var L=(parseFloat(O[0])%360+360)%360/360,H=lt(O[1]),U=lt(O[2]),ct=U<=.5?U*(H+1):U+H-U*H,st=U*2-ct;return M=M||[],J(M,k(z(st,ct,L+1/3)*255),k(z(st,ct,L)*255),k(z(st,ct,L-1/3)*255),1),O.length===4&&(M[3]=O[3]),M}function g(O){if(!!O){var M=O[0]/255,L=O[1]/255,H=O[2]/255,U=Math.min(M,L,H),ct=Math.max(M,L,H),st=ct-U,vt=(ct+U)/2,it,dt;if(st===0)it=0,dt=0;else{vt<.5?dt=st/(ct+U):dt=st/(2-ct-U);var St=((ct-M)/6+st/2)/st,ut=((ct-L)/6+st/2)/st,yt=((ct-H)/6+st/2)/st;M===ct?it=yt-ut:L===ct?it=1/3+St-yt:H===ct&&(it=2/3+ut-St),it<0&&(it+=1),it>1&&(it-=1)}var Ot=[it*360,dt,vt];return O[3]!=null&&Ot.push(O[3]),Ot}}function et(O,M){var L=ht(O);if(L){for(var H=0;H<3;H++)M<0?L[H]=L[H]*(1-M)|0:L[H]=(255-L[H])*M+L[H]|0,L[H]>255?L[H]=255:L[H]<0&&(L[H]=0);return A(L,L.length===4?"rgba":"rgb")}}function $(O){var M=ht(O);if(M)return((1<<24)+(M[0]<<16)+(M[1]<<8)+ +M[2]).toString(16).slice(1)}function N(O,M,L){if(!(!(M&&M.length)||!(O>=0&&O<=1))){L=L||[];var H=O*(M.length-1),U=Math.floor(H),ct=Math.ceil(H),st=M[U],vt=M[ct],it=H-U;return L[0]=k(X(st[0],vt[0],it)),L[1]=k(X(st[1],vt[1],it)),L[2]=k(X(st[2],vt[2],it)),L[3]=ot(X(st[3],vt[3],it)),L}}var Y=N;function K(O,M,L){if(!(!(M&&M.length)||!(O>=0&&O<=1))){var H=O*(M.length-1),U=Math.floor(H),ct=Math.ceil(H),st=ht(M[U]),vt=ht(M[ct]),it=H-U,dt=A([k(X(st[0],vt[0],it)),k(X(st[1],vt[1],it)),k(X(st[2],vt[2],it)),ot(X(st[3],vt[3],it))],"rgba");return L?{color:dt,leftIndex:U,rightIndex:ct,value:H}:dt}}var V=K;function G(O,M,L,H){var U=ht(O);if(O)return U=g(U),M!=null&&(U[0]=ft(M)),L!=null&&(U[1]=lt(L)),H!=null&&(U[2]=lt(H)),A(q(U),"rgba")}function I(O,M){var L=ht(O);if(L&&M!=null)return L[3]=ot(M),A(L,"rgba")}function A(O,M){if(!(!O||!O.length)){var L=O[0]+","+O[1]+","+O[2];return(M==="rgba"||M==="hsva"||M==="hsla")&&(L+=","+O[3]),M+"("+L+")"}}function C(O,M){var L=ht(O);return L?(.299*L[0]+.587*L[1]+.114*L[2])*L[3]/255+(1-L[3])*M:0}function E(){return A([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}},"Y/G1":function(je,nt,b){"use strict";b.d(nt,"d",function(){return q}),b.d(nt,"a",function(){return $}),b.d(nt,"c",function(){return N}),b.d(nt,"b",function(){return Y});var B=b("bPXU"),bt=b("ryx4"),k=b("QrW4"),ft=b("Eb29"),ot=b("OGI8"),gt=b("Tukj"),lt=b("uSNo"),z=b("KapR"),X=b("7M1A"),J=bt.b.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(K,V){var G=V.cx,I=V.cy,A=V.width/2,C=V.height/2;K.moveTo(G,I-C),K.lineTo(G+A,I+C),K.lineTo(G-A,I+C),K.closePath()}}),at=bt.b.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(K,V){var G=V.cx,I=V.cy,A=V.width/2,C=V.height/2;K.moveTo(G,I-C),K.lineTo(G+A,I),K.lineTo(G,I+C),K.lineTo(G-A,I),K.closePath()}}),F=bt.b.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(K,V){var G=V.x,I=V.y,A=V.width/5*3,C=Math.max(A,V.height),E=A/2,O=E*E/(C-E),M=I-C+E+O,L=Math.asin(O/E),H=Math.cos(L)*E,U=Math.sin(L),ct=Math.cos(L),st=E*.6,vt=E*.7;K.moveTo(G-H,M+O),K.arc(G,M,E,Math.PI-L,Math.PI*2+L),K.bezierCurveTo(G+H-U*st,M+O+ct*st,G,I-vt,G,I),K.bezierCurveTo(G,I-vt,G-H+U*st,M+O+ct*st,G-H,M+O),K.closePath()}}),Z=bt.b.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(K,V){var G=V.height,I=V.width,A=V.x,C=V.y,E=I/3*2;K.moveTo(A,C),K.lineTo(A+E,C+G),K.lineTo(A,C+G/4*3),K.lineTo(A-E,C+G),K.lineTo(A,C),K.closePath()}}),W={line:k.a,rect:ft.a,roundRect:ft.a,square:ft.a,circle:ot.a,diamond:at,pin:F,arrow:Z,triangle:J},ht={line:function(K,V,G,I,A){A.x1=K,A.y1=V+I/2,A.x2=K+G,A.y2=V+I/2},rect:function(K,V,G,I,A){A.x=K,A.y=V,A.width=G,A.height=I},roundRect:function(K,V,G,I,A){A.x=K,A.y=V,A.width=G,A.height=I,A.r=Math.min(G,I)/4},square:function(K,V,G,I,A){var C=Math.min(G,I);A.x=K,A.y=V,A.width=C,A.height=C},circle:function(K,V,G,I,A){A.cx=K+G/2,A.cy=V+I/2,A.r=Math.min(G,I)/2},diamond:function(K,V,G,I,A){A.cx=K+G/2,A.cy=V+I/2,A.width=G,A.height=I},pin:function(K,V,G,I,A){A.x=K+G/2,A.y=V+I/2,A.width=G,A.height=I},arrow:function(K,V,G,I,A){A.x=K+G/2,A.y=V+I/2,A.width=G,A.height=I},triangle:function(K,V,G,I,A){A.cx=K+G/2,A.cy=V+I/2,A.width=G,A.height=I}},q={};Object(B.k)(W,function(K,V){q[V]=new K});var g=bt.b.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(K,V,G){var I=Object(z.c)(K,V,G),A=this.shape;return A&&A.symbolType==="pin"&&V.position==="inside"&&(I.y=G.y+G.height*.4),I},buildPath:function(K,V,G){var I=V.symbolType;if(I!=="none"){var A=q[I];A||(I="rect",A=q[I]),ht[I](V.x,V.y,V.width,V.height,A.shape),A.buildPath(K,A.shape,G)}}});function et(K,V){if(this.type!=="image"){var G=this.style;this.__isEmptyBrush?(G.stroke=K,G.fill=V||"#fff",G.lineWidth=2):this.shape.symbolType==="line"?G.stroke=K:G.fill=K,this.markRedraw()}}function $(K,V,G,I,A,C,E){var O=K.indexOf("empty")===0;O&&(K=K.substr(5,1).toLowerCase()+K.substr(6));var M;return K.indexOf("image://")===0?M=gt.makeImage(K.slice(8),new lt.a(V,G,I,A),E?"center":"cover"):K.indexOf("path://")===0?M=gt.makePath(K.slice(7),{},new lt.a(V,G,I,A),E?"center":"cover"):M=new g({shape:{symbolType:K,x:V,y:G,width:I,height:A}}),M.__isEmptyBrush=O,M.setColor=et,C&&M.setColor(C),M}function N(K){return Object(B.t)(K)||(K=[+K,+K]),[K[0]||0,K[1]||0]}function Y(K,V){if(K!=null)return Object(B.t)(K)||(K=[K,K]),[Object(X.p)(K[0],V[0])||0,Object(X.p)(Object(B.P)(K[1],K[0]),V[1])||0]}},Y8C1:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft});var B=b("bPXU"),bt=typeof Float32Array!="undefined",k=bt?Float32Array:Array;function ft(ot){return Object(B.t)(ot)?bt?new Float32Array(ot):ot:new k(ot)}},YN2f:function(je,nt,b){"use strict";b.d(nt,"f",function(){return gt}),b.d(nt,"d",function(){return z}),b.d(nt,"b",function(){return X}),b.d(nt,"e",function(){return at}),b.d(nt,"a",function(){return Z}),b.d(nt,"c",function(){return q});var B=b("c5Gk"),bt=b("bPXU"),k=".",ft="___EC__COMPONENT__CONTAINER___",ot="___EC__EXTENDED_CLASS___";function gt(g){var et={main:"",sub:""};if(g){var $=g.split(k);et.main=$[0]||"",et.sub=$[1]||""}return et}function lt(g){bt.b(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(g),'componentType "'+g+'" illegal')}function z(g){return!!(g&&g[ot])}function X(g,et){g.$constructor=g,g.extend=function($){var N=this,Y;return J(N)?Y=function(K){Object(B.a)(V,K);function V(){return K.apply(this,arguments)||this}return V}(N):(Y=function(){($.$constructor||N).apply(this,arguments)},bt.s(Y,this)),bt.m(Y.prototype,$),Y[ot]=!0,Y.extend=this.extend,Y.superCall=W,Y.superApply=ht,Y.superClass=N,Y}}function J(g){return bt.w(g)&&/^class\s/.test(Function.prototype.toString.call(g))}function at(g,et){g.extend=et.extend}var F=Math.round(Math.random()*10);function Z(g){var et=["__\0is_clz",F++].join("_");g.prototype[et]=!0,g.isInstance=function($){return!!($&&$[et])}}function W(g,et){for(var $=[],N=2;N<arguments.length;N++)$[N-2]=arguments[N];return this.superClass.prototype[et].apply(g,$)}function ht(g,et,$){return this.superClass.prototype[et].apply(g,$)}function q(g){var et={};g.registerClass=function(N){var Y=N.type||N.prototype.type;if(Y){lt(Y),N.prototype.type=Y;var K=gt(Y);if(!K.sub)et[K.main]=N;else if(K.sub!==ft){var V=$(K);V[K.sub]=N}}return N},g.getClass=function(N,Y,K){var V=et[N];if(V&&V[ft]&&(V=Y?V[Y]:null),K&&!V)throw new Error(Y?"Component "+N+"."+(Y||"")+" is used but not imported.":N+".type should be specified.");return V},g.getClassesByMainType=function(N){var Y=gt(N),K=[],V=et[Y.main];return V&&V[ft]?bt.k(V,function(G,I){I!==ft&&K.push(G)}):K.push(V),K},g.hasClass=function(N){var Y=gt(N);return!!et[Y.main]},g.getAllClassMainTypes=function(){var N=[];return bt.k(et,function(Y,K){N.push(K)}),N},g.hasSubTypes=function(N){var Y=gt(N),K=et[Y.main];return K&&K[ft]};function $(N){var Y=et[N.main];return(!Y||!Y[ft])&&(Y=et[N.main]={},Y[ft]=!0),Y}}},Z7PX:function(je,nt,b){"use strict";var B=b("bPXU"),bt=0,k=function(){function ot(gt){this.categories=gt.categories||[],this._needCollect=gt.needCollect,this._deduplication=gt.deduplication,this.uid=++bt}return ot.createByAxisModel=function(gt){var lt=gt.option,z=lt.data,X=z&&Object(B.H)(z,ft);return new ot({categories:X,needCollect:!X,deduplication:lt.dedplication!==!1})},ot.prototype.getOrdinal=function(gt){return this._getOrCreateMap().get(gt)},ot.prototype.parseAndCollect=function(gt){var lt,z=this._needCollect;if(!Object(B.C)(gt)&&!z)return gt;if(z&&!this._deduplication)return lt=this.categories.length,this.categories[lt]=gt,lt;var X=this._getOrCreateMap();return lt=X.get(gt),lt==null&&(z?(lt=this.categories.length,this.categories[lt]=gt,X.set(gt,lt)):lt=NaN),lt},ot.prototype._getOrCreateMap=function(){return this._map||(this._map=Object(B.f)(this.categories))},ot}();function ft(ot){return Object(B.A)(ot)&&ot.value!=null?ot.value:ot+""}nt.a=k},ZAG4:function(je,nt,b){"use strict";b.d(nt,"a",function(){return W});var B=Math.round(Math.random()*9),bt=typeof Object.defineProperty=="function",k=function(){function N(){this._id="__ec_inner_"+B++}return N.prototype.get=function(Y){return this._guard(Y)[this._id]},N.prototype.set=function(Y,K){var V=this._guard(Y);return bt?Object.defineProperty(V,this._id,{value:K,enumerable:!1,configurable:!0}):V[this._id]=K,this},N.prototype.delete=function(Y){return this.has(Y)?(delete this._guard(Y)[this._id],!0):!1},N.prototype.has=function(Y){return!!this._guard(Y)[this._id]},N.prototype._guard=function(Y){if(Y!==Object(Y))throw TypeError("Value of WeakMap is not a non-null object.");return Y},N}(),ft=k,ot=b("AOUq"),gt=b("bPXU"),lt=b("7M1A"),z=b("Y/G1"),X=b("8yJK"),J=b("baNC"),at=new ft,F=new ot.a(100),Z=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function W(N,Y){if(N==="none")return null;var K=Y.getDevicePixelRatio(),V=Y.getZr(),G=V.painter.type==="svg";N.dirty&&at.delete(N);var I=at.get(N);if(I)return I;var A=Object(gt.i)(N,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});A.backgroundColor==="none"&&(A.backgroundColor=null);var C={repeat:"repeat"};return E(C),C.rotation=A.rotation,C.scaleX=C.scaleY=G?1:1/K,at.set(N,C),N.dirty=!1,C;function E(O){for(var M=[K],L=!0,H=0;H<Z.length;++H){var U=A[Z[H]];if(U!=null&&!Object(gt.t)(U)&&!Object(gt.C)(U)&&!Object(gt.z)(U)&&typeof U!="boolean"){L=!1;break}M.push(U)}var ct;if(L){ct=M.join(",")+(G?"-svg":"");var st=F.get(ct);st&&(G?O.svgElement=st:O.image=st)}var vt=q(A.dashArrayX),it=g(A.dashArrayY),dt=ht(A.symbol),St=et(vt),ut=$(it),yt=!G&&J.d.createCanvas(),Ot=G&&{tag:"g",attrs:{},key:"dcl",children:[]},At=Ct(),It;yt&&(yt.width=At.width*K,yt.height=At.height*K,It=yt.getContext("2d")),Ft(),L&&F.put(ct,yt||Ot),O.image=yt,O.svgElement=Ot,O.svgWidth=At.width,O.svgHeight=At.height;function Ct(){for(var zt=1,Xt=0,ie=St.length;Xt<ie;++Xt)zt=Object(lt.d)(zt,St[Xt]);for(var oe=1,Xt=0,ie=dt.length;Xt<ie;++Xt)oe=Object(lt.d)(oe,dt[Xt].length);zt*=oe;var he=ut*St.length*dt.length;if(!1)var be;return{width:Math.max(1,Math.min(zt,A.maxTileWidth)),height:Math.max(1,Math.min(he,A.maxTileHeight))}}function Ft(){It&&(It.clearRect(0,0,yt.width,yt.height),A.backgroundColor&&(It.fillStyle=A.backgroundColor,It.fillRect(0,0,yt.width,yt.height)));for(var zt=0,Xt=0;Xt<it.length;++Xt)zt+=it[Xt];if(zt<=0)return;for(var ie=-ut,oe=0,he=0,be=0;ie<At.height;){if(oe%2==0){for(var Ce=he/2%dt.length,Fe=0,Bt=0,Tt=0;Fe<At.width*2;){for(var Mt=0,Xt=0;Xt<vt[be].length;++Xt)Mt+=vt[be][Xt];if(Mt<=0)break;if(Bt%2==0){var Ut=(1-A.symbolSize)*.5,se=Fe+vt[be][Bt]*Ut,ge=ie+it[oe]*Ut,He=vt[be][Bt]*A.symbolSize,Me=it[oe]*A.symbolSize,We=Tt/2%dt[Ce].length;Ke(se,ge,He,Me,dt[Ce][We])}Fe+=vt[be][Bt],++Tt,++Bt,Bt===vt[be].length&&(Bt=0)}++be,be===vt.length&&(be=0)}ie+=it[oe],++he,++oe,oe===it.length&&(oe=0)}function Ke(qe,Qt,Se,Ve,Ie){var Zt=G?1:K,qt=Object(z.a)(Ie,qe*Zt,Qt*Zt,Se*Zt,Ve*Zt,A.color,A.symbolKeepAspect);if(G){var le=V.painter.renderOneToVNode(qt);le&&Ot.children.push(le)}else Object(X.b)(It,qt)}}}}function ht(N){if(!N||N.length===0)return[["rect"]];if(Object(gt.C)(N))return[[N]];for(var Y=!0,K=0;K<N.length;++K)if(!Object(gt.C)(N[K])){Y=!1;break}if(Y)return ht([N]);for(var V=[],K=0;K<N.length;++K)Object(gt.C)(N[K])?V.push([N[K]]):V.push(N[K]);return V}function q(N){if(!N||N.length===0)return[[0,0]];if(Object(gt.z)(N)){var Y=Math.ceil(N);return[[Y,Y]]}for(var K=!0,V=0;V<N.length;++V)if(!Object(gt.z)(N[V])){K=!1;break}if(K)return q([N]);for(var G=[],V=0;V<N.length;++V)if(Object(gt.z)(N[V])){var Y=Math.ceil(N[V]);G.push([Y,Y])}else{var Y=Object(gt.H)(N[V],function(C){return Math.ceil(C)});Y.length%2==1?G.push(Y.concat(Y)):G.push(Y)}return G}function g(N){if(!N||typeof N=="object"&&N.length===0)return[0,0];if(Object(gt.z)(N)){var Y=Math.ceil(N);return[Y,Y]}var K=Object(gt.H)(N,function(V){return Math.ceil(V)});return N.length%2?K.concat(K):K}function et(N){return Object(gt.H)(N,function(Y){return $(Y)})}function $(N){for(var Y=0,K=0;K<N.length;++K)Y+=N[K];return N.length%2==1?Y*2:Y}},ZEdI:function(je,nt,b){"use strict";b.d(nt,"a",function(){return K});var B=b("ZXNb"),bt=b("uSNo"),k=b("eV5c"),ft=b("+aTT"),ot=b("7M1A"),gt=b("eASH"),lt=b("j4cP"),z=b("bPXU"),X=b("alXq"),J=b("u1in");function at(V){if(V){for(var G=[],I=0;I<V.length;I++)G.push(V[I].slice());return G}}function F(V,G){var I=V.label,A=G&&G.getTextGuideLine();return{dataIndex:V.dataIndex,dataType:V.dataType,seriesIndex:V.seriesModel.seriesIndex,text:V.label.style.text,rect:V.hostRect,labelRect:V.rect,align:I.style.align,verticalAlign:I.style.verticalAlign,labelLinePoints:at(A&&A.shape.points)}}var Z=["align","verticalAlign","width","height","fontSize"],W=new gt.c,ht=Object(B.o)(),q=Object(B.o)();function g(V,G,I){for(var A=0;A<I.length;A++){var C=I[A];G[C]!=null&&(V[C]=G[C])}}var et=["x","y","rotation"],$=function(){function V(){this._labelList=[],this._chartViewList=[]}return V.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},V.prototype._addLabel=function(G,I,A,C,E){var O=C.style,M=C.__hostTarget,L=M.textConfig||{},H=C.getComputedTransform(),U=C.getBoundingRect().plain();bt.a.applyTransform(U,U,H),H?W.setLocalTransform(H):(W.x=W.y=W.rotation=W.originX=W.originY=0,W.scaleX=W.scaleY=1);var ct=C.__hostTarget,st;if(ct){st=ct.getBoundingRect().plain();var vt=ct.getComputedTransform();bt.a.applyTransform(st,st,vt)}var it=st&&ct.getTextGuideLine();this._labelList.push({label:C,labelLine:it,seriesModel:A,dataIndex:G,dataType:I,layoutOption:E,computedLayoutOption:null,rect:U,hostRect:st,priority:st?st.width*st.height:0,defaultAttr:{ignore:C.ignore,labelGuideIgnore:it&&it.ignore,x:W.x,y:W.y,scaleX:W.scaleX,scaleY:W.scaleY,rotation:W.rotation,style:{x:O.x,y:O.y,align:O.align,verticalAlign:O.verticalAlign,width:O.width,height:O.height,fontSize:O.fontSize},cursor:C.cursor,attachedPos:L.position,attachedRot:L.rotation}})},V.prototype.addLabelsOfSeries=function(G){var I=this;this._chartViewList.push(G);var A=G.__model,C=A.get("labelLayout");!(Object(z.w)(C)||Object(z.F)(C).length)||G.group.traverse(function(E){if(E.ignore)return!0;var O=E.getTextContent(),M=Object(ft.a)(E);O&&!O.disableLabelLayout&&I._addLabel(M.dataIndex,M.dataType,A,O,C)})},V.prototype.updateLayoutConfig=function(G){var I=G.getWidth(),A=G.getHeight();function C(Ot,At){return function(){Object(lt.e)(Ot,At)}}for(var E=0;E<this._labelList.length;E++){var O=this._labelList[E],M=O.label,L=M.__hostTarget,H=O.defaultAttr,U=void 0;Object(z.w)(O.layoutOption)?U=O.layoutOption(F(O,L)):U=O.layoutOption,U=U||{},O.computedLayoutOption=U;var ct=Math.PI/180;L&&L.setTextConfig({local:!1,position:U.x!=null||U.y!=null?null:H.attachedPos,rotation:U.rotate!=null?U.rotate*ct:H.attachedRot,offset:[U.dx||0,U.dy||0]});var st=!1;if(U.x!=null?(M.x=Object(ot.p)(U.x,I),M.setStyle("x",0),st=!0):(M.x=H.x,M.setStyle("x",H.style.x)),U.y!=null?(M.y=Object(ot.p)(U.y,A),M.setStyle("y",0),st=!0):(M.y=H.y,M.setStyle("y",H.style.y)),U.labelLinePoints){var vt=L.getTextGuideLine();vt&&(vt.setShape({points:U.labelLinePoints}),st=!1)}var it=ht(M);it.needsUpdateLabelLine=st,M.rotation=U.rotate!=null?U.rotate*ct:H.rotation,M.scaleX=H.scaleX,M.scaleY=H.scaleY;for(var dt=0;dt<Z.length;dt++){var St=Z[dt];M.setStyle(St,U[St]!=null?U[St]:H.style[St])}if(U.draggable){if(M.draggable=!0,M.cursor="move",L){var ut=O.seriesModel;if(O.dataIndex!=null){var yt=O.seriesModel.getData(O.dataType);ut=yt.getItemModel(O.dataIndex)}M.on("drag",C(L,ut.getModel("labelLine")))}}else M.off("drag"),M.cursor=H.cursor}},V.prototype.layout=function(G){var I=G.getWidth(),A=G.getHeight(),C=Object(X.b)(this._labelList),E=Object(z.n)(C,function(L){return L.layoutOption.moveOverlap==="shiftX"}),O=Object(z.n)(C,function(L){return L.layoutOption.moveOverlap==="shiftY"});Object(X.c)(E,0,I),Object(X.d)(O,0,A);var M=Object(z.n)(C,function(L){return L.layoutOption.hideOverlap});Object(X.a)(M)},V.prototype.processLabelsOverall=function(){var G=this;Object(z.k)(this._chartViewList,function(I){var A=I.__model,C=I.ignoreLabelLineUpdate,E=A.isAnimationEnabled();I.group.traverse(function(O){if(O.ignore&&!O.forceLabelAnimation)return!0;var M=!C,L=O.getTextContent();!M&&L&&(M=ht(L).needsUpdateLabelLine),M&&G._updateLabelLine(O,A),E&&G._animateLabels(O,A)})})},V.prototype._updateLabelLine=function(G,I){var A=G.getTextContent(),C=Object(ft.a)(G),E=C.dataIndex;if(A&&E!=null){var O=I.getData(C.dataType),M=O.getItemModel(E),L={},H=O.getItemVisual(E,"style"),U=O.getVisual("drawType");L.stroke=H[U];var ct=M.getModel("labelLine");Object(lt.d)(G,Object(lt.a)(M),L),Object(lt.e)(G,ct)}},V.prototype._animateLabels=function(G,I){var A=G.getTextContent(),C=G.getTextGuideLine();if(A&&(G.forceLabelAnimation||!A.ignore&&!A.invisible&&!G.disableLabelAnimation&&!Object(k.d)(G))){var E=ht(A),O=E.oldLayout,M=Object(ft.a)(G),L=M.dataIndex,H={x:A.x,y:A.y,rotation:A.rotation},U=I.getData(M.dataType);if(O){A.attr(O);var st=G.prevStates;st&&(Object(z.r)(st,"select")>=0&&A.attr(E.oldLayoutSelect),Object(z.r)(st,"emphasis")>=0&&A.attr(E.oldLayoutEmphasis)),Object(k.h)(A,H,I,L)}else if(A.attr(H),!Object(J.f)(A).valueAnimation){var ct=Object(z.P)(A.style.opacity,1);A.style.opacity=0,Object(k.c)(A,{style:{opacity:ct}},I,L)}if(E.oldLayout=H,A.states.select){var vt=E.oldLayoutSelect={};g(vt,H,et),g(vt,A.states.select,et)}if(A.states.emphasis){var it=E.oldLayoutEmphasis={};g(it,H,et),g(it,A.states.emphasis,et)}Object(J.a)(A,L,U,I,I)}if(C&&!C.ignore&&!C.invisible){var E=q(C),O=E.oldLayout,dt={points:C.shape.points};O?(C.attr({shape:O}),Object(k.h)(C,{shape:dt},I)):(C.setShape(dt),C.style.strokePercent=0,Object(k.c)(C,{style:{strokePercent:1}},I)),E.oldLayout=dt}},V}(),N=$,Y=Object(B.o)();function K(V){V.registerUpdateLifecycle("series:beforeupdate",function(G,I,A){var C=Y(I).labelManager;C||(C=Y(I).labelManager=new N),C.clearLabels()}),V.registerUpdateLifecycle("series:layoutlabels",function(G,I,A){var C=Y(I).labelManager;A.updatedSeries.forEach(function(E){C.addLabelsOfSeries(I.getViewOfSeriesModel(E))}),C.updateLayoutConfig(I),C.layout(I),C.processLabelsOverall()})}},ZSbJ:function(je,nt,b){"use strict";b.d(nt,"n",function(){return gt.d}),b.d(nt,"v",function(){return gt.l}),b.d(nt,"t",function(){return gt.j}),b.d(nt,"u",function(){return gt.k}),b.d(nt,"j",function(){return gt.b}),b.d(nt,"s",function(){return gt.i}),b.d(nt,"k",function(){return gt.c}),b.d(nt,"y",function(){return F}),b.d(nt,"h",function(){return Z}),b.d(nt,"m",function(){return B}),b.d(nt,"w",function(){return L.a}),b.d(nt,"q",function(){return H.a}),b.d(nt,"r",function(){return H.a}),b.d(nt,"p",function(){return bt}),b.d(nt,"l",function(){return k}),b.d(nt,"i",function(){return ft}),b.d(nt,"x",function(){return ot}),b.d(nt,"e",function(){return at.a}),b.d(nt,"f",function(){return et.a}),b.d(nt,"a",function(){return Mt.a}),b.d(nt,"c",function(){return lt.a}),b.d(nt,"d",function(){return z.a}),b.d(nt,"g",function(){return X.b}),b.d(nt,"b",function(){return J.a}),b.d(nt,"o",function(){return Ut.b});var B={};b.r(B),b.d(B,"createList",function(){return A}),b.d(B,"getLayoutRect",function(){return $.g}),b.d(B,"createDimensions",function(){return V.a}),b.d(B,"dataStack",function(){return C}),b.d(B,"createSymbol",function(){return G.a}),b.d(B,"createScale",function(){return E}),b.d(B,"mixinAxisModelCommonMethods",function(){return O}),b.d(B,"getECData",function(){return Y.a}),b.d(B,"enableHoverEmphasis",function(){return I.o}),b.d(B,"createTextStyle",function(){return M});var bt={};b.r(bt),b.d(bt,"linearMap",function(){return U.l}),b.d(bt,"round",function(){return U.v}),b.d(bt,"asc",function(){return U.c}),b.d(bt,"getPrecision",function(){return U.g}),b.d(bt,"getPrecisionSafe",function(){return U.h}),b.d(bt,"getPixelPrecision",function(){return U.f}),b.d(bt,"getPercentWithPrecision",function(){return U.e}),b.d(bt,"MAX_SAFE_INTEGER",function(){return U.a}),b.d(bt,"remRadian",function(){return U.u}),b.d(bt,"isRadianAroundZero",function(){return U.k}),b.d(bt,"parseDate",function(){return U.o}),b.d(bt,"quantity",function(){return U.r}),b.d(bt,"quantityExponent",function(){return U.s}),b.d(bt,"nice",function(){return U.m}),b.d(bt,"quantile",function(){return U.q}),b.d(bt,"reformIntervals",function(){return U.t}),b.d(bt,"isNumeric",function(){return U.j}),b.d(bt,"numericToNumber",function(){return U.n});var k={};b.r(k),b.d(k,"extendShape",function(){return ct.extendShape}),b.d(k,"extendPath",function(){return ct.extendPath}),b.d(k,"makePath",function(){return ct.makePath}),b.d(k,"makeImage",function(){return ct.makeImage}),b.d(k,"mergePath",function(){return ct.mergePath}),b.d(k,"resizePath",function(){return ct.resizePath}),b.d(k,"createIcon",function(){return ct.createIcon}),b.d(k,"updateProps",function(){return st.h}),b.d(k,"initProps",function(){return st.c}),b.d(k,"getTransform",function(){return ct.getTransform}),b.d(k,"clipPointsByRect",function(){return ct.clipPointsByRect}),b.d(k,"clipRectByRect",function(){return ct.clipRectByRect}),b.d(k,"registerShape",function(){return ct.registerShape}),b.d(k,"getShapeClass",function(){return ct.getShapeClass}),b.d(k,"Group",function(){return vt.a}),b.d(k,"Image",function(){return it.a}),b.d(k,"Text",function(){return dt.a}),b.d(k,"Circle",function(){return St.a}),b.d(k,"Ellipse",function(){return ut.a}),b.d(k,"Sector",function(){return yt.a}),b.d(k,"Ring",function(){return Ot.a}),b.d(k,"Polygon",function(){return At.a}),b.d(k,"Polyline",function(){return It.a}),b.d(k,"Rect",function(){return Ct.a}),b.d(k,"Line",function(){return Ft.a}),b.d(k,"BezierCurve",function(){return zt.a}),b.d(k,"Arc",function(){return Xt.a}),b.d(k,"IncrementalDisplayable",function(){return ie.a}),b.d(k,"CompoundPath",function(){return oe.a}),b.d(k,"LinearGradient",function(){return he.a}),b.d(k,"RadialGradient",function(){return be.a}),b.d(k,"BoundingRect",function(){return Ce.a});var ft={};b.r(ft),b.d(ft,"addCommas",function(){return Fe.a}),b.d(ft,"toCamelCase",function(){return Fe.k}),b.d(ft,"normalizeCssArray",function(){return Fe.j}),b.d(ft,"encodeHTML",function(){return Fe.d}),b.d(ft,"formatTpl",function(){return Fe.f}),b.d(ft,"getTooltipMarker",function(){return Fe.h}),b.d(ft,"formatTime",function(){return Fe.e}),b.d(ft,"capitalFirst",function(){return Fe.b}),b.d(ft,"truncateText",function(){return Bt.c}),b.d(ft,"getTextRect",function(){return Tt.a});var ot={};b.r(ot),b.d(ot,"map",function(){return W.H}),b.d(ot,"each",function(){return W.k}),b.d(ot,"indexOf",function(){return W.r}),b.d(ot,"inherits",function(){return W.s}),b.d(ot,"reduce",function(){return W.N}),b.d(ot,"filter",function(){return W.n}),b.d(ot,"bind",function(){return W.c}),b.d(ot,"curry",function(){return W.h}),b.d(ot,"isArray",function(){return W.t}),b.d(ot,"isString",function(){return W.C}),b.d(ot,"isObject",function(){return W.A}),b.d(ot,"isFunction",function(){return W.w}),b.d(ot,"extend",function(){return W.m}),b.d(ot,"defaults",function(){return W.i}),b.d(ot,"clone",function(){return W.d}),b.d(ot,"merge",function(){return W.I});var gt=b("XZR5"),lt=b("/PGm"),z=b("U3bR"),X=b("I79D"),J=b("IsQr"),at=b("J94c"),F=b("08kU"),Z=b("Xy3h"),W=b("bPXU"),ht=b("q1fN"),q=b("htXI"),g=b("aFB9"),et=b("PWZQ"),$=b("RlS0"),N=b("70Nz"),Y=b("+aTT"),K=b("u1in"),V=b("dk5l"),G=b("Y/G1"),I=b("GUjm");function A(Ke){return Object(ht.a)(null,Ke)}var C={isDimensionStacked:N.c,enableDataStack:N.a,getStackedDimension:N.b};function E(Ke,qe){var Qt=qe;qe instanceof et.a||(Qt=new et.a(qe));var Se=q.a(Qt);return Se.setExtent(Ke[0],Ke[1]),q.i(Se,Qt),Se}function O(Ke){W.K(Ke,g.a)}function M(Ke,qe){return qe=qe||{},Object(K.c)(Ke,null,null,qe.state!=="normal")}var L=b("vliS"),H=b("EMIz"),U=b("7M1A"),ct=b("Tukj"),st=b("eV5c"),vt=b("fvwW"),it=b("bSX3"),dt=b("To/5"),St=b("OGI8"),ut=b("mjKY"),yt=b("3Vaj"),Ot=b("yuVo"),At=b("WMlo"),It=b("syXZ"),Ct=b("Eb29"),Ft=b("QrW4"),zt=b("dfBh"),Xt=b("MiEP"),ie=b("Tey+"),oe=b("mSnZ"),he=b("zLe5"),be=b("CSOx"),Ce=b("uSNo"),Fe=b("euZP"),Bt=b("V07C"),Tt=b("eQ2i"),Mt=b("SuLH"),Ut=b("8yJK");function se(Ke){var qe=lt.a.extend(Ke);return lt.a.registerClass(qe),qe}function ge(Ke){var qe=z.a.extend(Ke);return z.a.registerClass(qe),qe}function He(Ke){var qe=X.b.extend(Ke);return X.b.registerClass(qe),qe}function Me(Ke){var qe=J.a.extend(Ke);return J.a.registerClass(qe),qe}var We=b("ZEdI");Object(L.a)(We.a)},ZXNb:function(je,nt,b){"use strict";b.d(nt,"r",function(){return lt}),b.d(nt,"f",function(){return z}),b.d(nt,"c",function(){return X}),b.d(nt,"h",function(){return J}),b.d(nt,"m",function(){return at}),b.d(nt,"q",function(){return F}),b.d(nt,"e",function(){return Y}),b.d(nt,"n",function(){return G}),b.d(nt,"l",function(){return I}),b.d(nt,"p",function(){return A}),b.d(nt,"x",function(){return C}),b.d(nt,"d",function(){return O}),b.d(nt,"u",function(){return M}),b.d(nt,"o",function(){return L}),b.d(nt,"s",function(){return U}),b.d(nt,"t",function(){return ct}),b.d(nt,"b",function(){return st}),b.d(nt,"a",function(){return vt}),b.d(nt,"v",function(){return it}),b.d(nt,"w",function(){return dt}),b.d(nt,"g",function(){return St}),b.d(nt,"i",function(){return ut}),b.d(nt,"j",function(){return yt}),b.d(nt,"k",function(){return Ot});var B=b("bPXU"),bt=b("QO9Q"),k=b("7M1A");function ft(At,It,Ct){return(It-At)*Ct+At}var ot="series\0",gt="\0_ec_\0";function lt(At){return At instanceof Array?At:At==null?[]:[At]}function z(At,It,Ct){if(At){At[It]=At[It]||{},At.emphasis=At.emphasis||{},At.emphasis[It]=At.emphasis[It]||{};for(var Ft=0,zt=Ct.length;Ft<zt;Ft++){var Xt=Ct[Ft];!At.emphasis[It].hasOwnProperty(Xt)&&At[It].hasOwnProperty(Xt)&&(At.emphasis[It][Xt]=At[It][Xt])}}}var X=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function J(At){return Object(B.A)(At)&&!Object(B.t)(At)&&!(At instanceof Date)?At.value:At}function at(At){return Object(B.A)(At)&&!(At instanceof Array)}function F(At,It,Ct){var Ft=Ct==="normalMerge",zt=Ct==="replaceMerge",Xt=Ct==="replaceAll";At=At||[],It=(It||[]).slice();var ie=Object(B.f)();Object(B.k)(It,function(he,be){if(!Object(B.A)(he)){It[be]=null;return}});var oe=Z(At,ie,Ct);return(Ft||zt)&&W(oe,At,ie,It),Ft&&ht(oe,It),Ft||zt?q(oe,It,zt):Xt&&g(oe,It),et(oe),oe}function Z(At,It,Ct){var Ft=[];if(Ct==="replaceAll")return Ft;for(var zt=0;zt<At.length;zt++){var Xt=At[zt];Xt&&Xt.id!=null&&It.set(Xt.id,zt),Ft.push({existing:Ct==="replaceMerge"||I(Xt)?null:Xt,newOption:null,keyInfo:null,brandNew:null})}return Ft}function W(At,It,Ct,Ft){Object(B.k)(Ft,function(zt,Xt){if(!(!zt||zt.id==null)){var ie=N(zt.id),oe=Ct.get(ie);if(oe!=null){var he=At[oe];Object(B.b)(!he.newOption,'Duplicated option on id "'+ie+'".'),he.newOption=zt,he.existing=It[oe],Ft[Xt]=null}}})}function ht(At,It){Object(B.k)(It,function(Ct,Ft){if(!(!Ct||Ct.name==null))for(var zt=0;zt<At.length;zt++){var Xt=At[zt].existing;if(!At[zt].newOption&&Xt&&(Xt.id==null||Ct.id==null)&&!I(Ct)&&!I(Xt)&&$("name",Xt,Ct)){At[zt].newOption=Ct,It[Ft]=null;return}}})}function q(At,It,Ct){Object(B.k)(It,function(Ft){if(!!Ft){for(var zt,Xt=0;(zt=At[Xt])&&(zt.newOption||I(zt.existing)||zt.existing&&Ft.id!=null&&!$("id",Ft,zt.existing));)Xt++;zt?(zt.newOption=Ft,zt.brandNew=Ct):At.push({newOption:Ft,brandNew:Ct,existing:null,keyInfo:null}),Xt++}})}function g(At,It){Object(B.k)(It,function(Ct){At.push({newOption:Ct,brandNew:!0,existing:null,keyInfo:null})})}function et(At){var It=Object(B.f)();Object(B.k)(At,function(Ct){var Ft=Ct.existing;Ft&&It.set(Ft.id,Ct)}),Object(B.k)(At,function(Ct){var Ft=Ct.newOption;Object(B.b)(!Ft||Ft.id==null||!It.get(Ft.id)||It.get(Ft.id)===Ct,"id duplicates: "+(Ft&&Ft.id)),Ft&&Ft.id!=null&&It.set(Ft.id,Ct),!Ct.keyInfo&&(Ct.keyInfo={})}),Object(B.k)(At,function(Ct,Ft){var zt=Ct.existing,Xt=Ct.newOption,ie=Ct.keyInfo;if(!!Object(B.A)(Xt)){if(ie.name=Xt.name!=null?N(Xt.name):zt?zt.name:ot+Ft,zt)ie.id=N(zt.id);else if(Xt.id!=null)ie.id=N(Xt.id);else{var oe=0;do ie.id="\0"+ie.name+"\0"+oe++;while(It.get(ie.id))}It.set(ie.id,Ct)}})}function $(At,It,Ct){var Ft=Y(It[At],null),zt=Y(Ct[At],null);return Ft!=null&&zt!=null&&Ft===zt}function N(At){return Y(At,"")}function Y(At,It){return At==null?It:Object(B.C)(At)?At:Object(B.z)(At)||Object(B.D)(At)?At+"":It}function K(At){}function V(At){return Object(B.D)(At)||Object(k.j)(At)}function G(At){var It=At.name;return!!(It&&It.indexOf(ot))}function I(At){return At&&At.id!=null&&N(At.id).indexOf(gt)===0}function A(At){return gt+At}function C(At,It,Ct){Object(B.k)(At,function(Ft){var zt=Ft.newOption;Object(B.A)(zt)&&(Ft.keyInfo.mainType=It,Ft.keyInfo.subType=E(It,zt,Ft.existing,Ct))})}function E(At,It,Ct,Ft){var zt=It.type?It.type:Ct?Ct.subType:Ft.determineSubType(At,It);return zt}function O(At,It){var Ct={},Ft={};return zt(At||[],Ct),zt(It||[],Ft,Ct),[Xt(Ct),Xt(Ft)];function zt(ie,oe,he){for(var be=0,Ce=ie.length;be<Ce;be++){var Fe=Y(ie[be].seriesId,null);if(Fe==null)return;for(var Bt=lt(ie[be].dataIndex),Tt=he&&he[Fe],Mt=0,Ut=Bt.length;Mt<Ut;Mt++){var se=Bt[Mt];Tt&&Tt[se]?Tt[se]=null:(oe[Fe]||(oe[Fe]={}))[se]=1}}}function Xt(ie,oe){var he=[];for(var be in ie)if(ie.hasOwnProperty(be)&&ie[be]!=null)if(oe)he.push(+be);else{var Ce=Xt(ie[be],!0);Ce.length&&he.push({seriesId:be,dataIndex:Ce})}return he}}function M(At,It){if(It.dataIndexInside!=null)return It.dataIndexInside;if(It.dataIndex!=null)return Object(B.t)(It.dataIndex)?Object(B.H)(It.dataIndex,function(Ct){return At.indexOfRawIndex(Ct)}):At.indexOfRawIndex(It.dataIndex);if(It.name!=null)return Object(B.t)(It.name)?Object(B.H)(It.name,function(Ct){return At.indexOfName(Ct)}):At.indexOfName(It.name)}function L(){var At="__ec_inner_"+H++;return function(It){return It[At]||(It[At]={})}}var H=Object(k.i)();function U(At,It,Ct){var Ft=ct(It,Ct),zt=Ft.mainTypeSpecified,Xt=Ft.queryOptionMap,ie=Ft.others,oe=ie,he=Ct?Ct.defaultMainType:null;return!zt&&he&&Xt.set(he,{}),Xt.each(function(be,Ce){var Fe=it(At,Ce,be,{useDefault:he===Ce,enableAll:Ct&&Ct.enableAll!=null?Ct.enableAll:!0,enableNone:Ct&&Ct.enableNone!=null?Ct.enableNone:!0});oe[Ce+"Models"]=Fe.models,oe[Ce+"Model"]=Fe.models[0]}),oe}function ct(At,It){var Ct;if(Object(B.C)(At)){var Ft={};Ft[At+"Index"]=0,Ct=Ft}else Ct=At;var zt=Object(B.f)(),Xt={},ie=!1;return Object(B.k)(Ct,function(oe,he){if(he==="dataIndex"||he==="dataIndexInside"){Xt[he]=oe;return}var be=he.match(/^(\w+)(Index|Id|Name)$/)||[],Ce=be[1],Fe=(be[2]||"").toLowerCase();if(!(!Ce||!Fe||It&&It.includeMainTypes&&Object(B.r)(It.includeMainTypes,Ce)<0)){ie=ie||!!Ce;var Bt=zt.get(Ce)||zt.set(Ce,{});Bt[Fe]=oe}}),{mainTypeSpecified:ie,queryOptionMap:zt,others:Xt}}var st={useDefault:!0,enableAll:!1,enableNone:!1},vt={useDefault:!1,enableAll:!0,enableNone:!0};function it(At,It,Ct,Ft){Ft=Ft||st;var zt=Ct.index,Xt=Ct.id,ie=Ct.name,oe={models:null,specified:zt!=null||Xt!=null||ie!=null};if(!oe.specified){var he=void 0;return oe.models=Ft.useDefault&&(he=At.getComponent(It))?[he]:[],oe}return zt==="none"||zt===!1?(Object(B.b)(Ft.enableNone,'`"none"` or `false` is not a valid value on index option.'),oe.models=[],oe):(zt==="all"&&(Object(B.b)(Ft.enableAll,'`"all"` is not a valid value on index option.'),zt=Xt=ie=null),oe.models=At.queryComponents({mainType:It,index:zt,id:Xt,name:ie}),oe)}function dt(At,It,Ct){At.setAttribute?At.setAttribute(It,Ct):At[It]=Ct}function St(At,It){return At.getAttribute?At.getAttribute(It):At[It]}function ut(At){return At==="auto"?bt.a.domSupported?"html":"richText":At||"html"}function yt(At,It){var Ct=Object(B.f)(),Ft=[];return Object(B.k)(At,function(zt){var Xt=It(zt);(Ct.get(Xt)||(Ft.push(Xt),Ct.set(Xt,[]))).push(zt)}),{keys:Ft,buckets:Ct}}function Ot(At,It,Ct,Ft,zt){var Xt=It==null||It==="auto";if(Ft==null)return Ft;if(Object(B.z)(Ft)){var ie=ft(Ct||0,Ft,zt);return Object(k.v)(ie,Xt?Math.max(Object(k.g)(Ct||0),Object(k.g)(Ft)):It)}else{if(Object(B.C)(Ft))return zt<1?Ct:Ft;for(var oe=[],he=Ct,be=Ft,Ce=Math.max(he?he.length:0,be.length),Fe=0;Fe<Ce;++Fe){var Bt=At.getDimensionInfo(Fe);if(Bt&&Bt.type==="ordinal")oe[Fe]=(zt<1&&he?he:be)[Fe];else{var Tt=he&&he[Fe]?he[Fe]:0,Mt=be[Fe],ie=ft(Tt,Mt,zt);oe[Fe]=Object(k.v)(ie,Xt?Math.max(Object(k.g)(Tt),Object(k.g)(Mt)):It)}}return oe}}},ZYtA:function(je,nt,b){"use strict";b.d(nt,"b",function(){return bt}),b.d(nt,"c",function(){return k}),b.d(nt,"a",function(){return ft});var B=Math.round;function bt(ot,gt,lt){if(!!gt){var z=gt.x1,X=gt.x2,J=gt.y1,at=gt.y2;ot.x1=z,ot.x2=X,ot.y1=J,ot.y2=at;var F=lt&&lt.lineWidth;return F&&(B(z*2)===B(X*2)&&(ot.x1=ot.x2=ft(z,F,!0)),B(J*2)===B(at*2)&&(ot.y1=ot.y2=ft(J,F,!0))),ot}}function k(ot,gt,lt){if(!!gt){var z=gt.x,X=gt.y,J=gt.width,at=gt.height;ot.x=z,ot.y=X,ot.width=J,ot.height=at;var F=lt&&lt.lineWidth;return F&&(ot.x=ft(z,F,!0),ot.y=ft(X,F,!0),ot.width=Math.max(ft(z+J,F,!1)-ot.x,J===0?0:1),ot.height=Math.max(ft(X+at,F,!1)-ot.y,at===0?0:1)),ot}}function ft(ot,gt,lt){if(!gt)return ot;var z=B(ot*2);return(z+B(gt))%2==0?z/2:(z+(lt?1:-1))/2}},ZevI:function(je,nt,b){"use strict";var B=b("ZSbJ"),bt=b("vliS"),k=b("XZR5"),ft=b("gYKv"),ot=b("X0MA"),gt=b("ZEdI");Object(bt.a)([ft.a,ot.a]);var lt={init:function(){return k.d.apply(null,arguments)}};Object(bt.a)(gt.a);function z(t,i,l){typeof i=="object"&&(l=i,i=null);var f=this,h;if(!(t instanceof Function)){h=[];for(var p in t)t.hasOwnProperty(p)&&h.push(p)}var y=function(S){if(f.apply(this,arguments),t instanceof Function?X(this,t.call(this,S)):J(this,t,h),this.constructor===y)for(var P=y.__initializers__,j=0;j<P.length;j++)P[j].apply(this,arguments)};y.__super__=f,f.__initializers__?y.__initializers__=f.__initializers__.slice():y.__initializers__=[],i&&y.__initializers__.push(i);var _=function(){};return _.prototype=f.prototype,y.prototype=new _,y.prototype.constructor=y,X(y.prototype,l),y.extend=f.extend,y.derive=f.extend,y}function X(t,i){if(!!i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l])}function J(t,i,l){for(var f=0;f<l.length;f++){var h=l[f];t[h]=i[h]}}var at={extend:z,derive:z};function F(t,i){this.action=t,this.context=i}var Z={trigger:function(t){if(!!this.hasOwnProperty("__handlers__")&&!!this.__handlers__.hasOwnProperty(t)){var i=this.__handlers__[t],l=i.length,f=-1,h=arguments;switch(h.length){case 1:for(;++f<l;)i[f].action.call(i[f].context);return;case 2:for(;++f<l;)i[f].action.call(i[f].context,h[1]);return;case 3:for(;++f<l;)i[f].action.call(i[f].context,h[1],h[2]);return;case 4:for(;++f<l;)i[f].action.call(i[f].context,h[1],h[2],h[3]);return;case 5:for(;++f<l;)i[f].action.call(i[f].context,h[1],h[2],h[3],h[4]);return;default:for(;++f<l;)i[f].action.apply(i[f].context,Array.prototype.slice.call(h,1));return}}},on:function(t,i,l){if(!(!t||!i)){var f=this.__handlers__||(this.__handlers__={});if(!f[t])f[t]=[];else if(this.has(t,i))return;var h=new F(i,l||this);return f[t].push(h),this}},once:function(t,i,l){if(!t||!i)return;var f=this;function h(){f.off(t,h),i.apply(this,arguments)}return this.on(t,h,l)},before:function(t,i,l){if(!(!t||!i))return t="before"+t,this.on(t,i,l)},after:function(t,i,l){if(!(!t||!i))return t="after"+t,this.on(t,i,l)},success:function(t,i){return this.once("success",t,i)},error:function(t,i){return this.once("error",t,i)},off:function(t,i){var l=this.__handlers__||(this.__handlers__={});if(!i){l[t]=[];return}if(l[t]){for(var f=l[t],h=[],p=0;p<f.length;p++)i&&f[p].action!==i&&h.push(f[p]);l[t]=h}return this},has:function(t,i){var l=this.__handlers__;if(!l||!l[t])return!1;for(var f=l[t],h=0;h<f.length;h++)if(f[h].action===i)return!0}},W=Z,ht=0,q=Array.prototype,g=q.forEach,et={genGUID:function(){return++ht},relative2absolute:function(t,i){if(!i||t.match(/^\//))return t;for(var l=t.split("/"),f=i.split("/"),h=l[0];h==="."||h==="..";)h===".."&&f.pop(),l.shift(),h=l[0];return f.join("/")+"/"+l.join("/")},extend:function(t,i){if(i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l]);return t},defaults:function(t,i){if(i)for(var l in i)t[l]===void 0&&(t[l]=i[l]);return t},extendWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var h=l[f];t[h]=i[h]}return t},defaultsWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var h=l[f];t[h]==null&&(t[h]=i[h])}return t},each:function(t,i,l){if(!!(t&&i))if(t.forEach&&t.forEach===g)t.forEach(i,l);else if(t.length===+t.length)for(var f=0,h=t.length;f<h;f++)i.call(l,t[f],f,t);else for(var p in t)t.hasOwnProperty(p)&&i.call(l,t[p],p,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return t?t.length===+t.length:!1},clone:function(t){if(et.isObject(t)){if(et.isArray(t))return t.slice();if(et.isArrayLike(t)){for(var i=new t.constructor(t.length),l=0;l<t.length;l++)i[l]=t[l];return i}else return et.extend({},t)}else return t}},$=et,N=function(){this.__uid__=$.genGUID()};N.__initializers__=[function(t){$.extend(this,t)}],$.extend(N,at),$.extend(N.prototype,W);var Y=N,K=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],V=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function G(t){for(var i={},l={},f=0;f<K.length;f++){var h=K[f];y(h)}for(var f=0;f<V.length;f++){var p=V[f];l[p]=t.getParameter(t[p])}this.getExtension=function(_){return _ in i||y(_),i[_]},this.getParameter=function(_){return l[_]};function y(_){if(t.getExtension){var S=t.getExtension(_);S||(S=t.getExtension("MOZ_"+_)),S||(S=t.getExtension("WEBKIT_"+_)),i[_]=S}}}var I=G,A={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},C=b("TyZM"),E=function(){this.head=null,this.tail=null,this._length=0};E.prototype.insert=function(t){var i=new E.Entry(t);return this.insertEntry(i),i},E.prototype.insertAt=function(t,i){if(!(t<0)){for(var l=this.head,f=0;l&&f!=t;)l=l.next,f++;if(l){var h=new E.Entry(i),p=l.prev;p?(p.next=h,h.prev=p):this.head=h,h.next=l,l.prev=h}else this.insert(i)}},E.prototype.insertBeforeEntry=function(t,i){var l=new E.Entry(t),f=i.prev;f?(f.next=l,l.prev=f):this.head=l,l.next=i,i.prev=l,this._length++},E.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},E.prototype.remove=function(t){var i=t.prev,l=t.next;i?i.next=l:this.head=l,l?l.prev=i:this.tail=i,t.next=t.prev=null,this._length--},E.prototype.removeAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;if(i)return this.remove(i),i.value}},E.prototype.getHead=function(){if(this.head)return this.head.value},E.prototype.getTail=function(){if(this.tail)return this.tail.value},E.prototype.getAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;return i.value}},E.prototype.indexOf=function(t){for(var i=this.head,l=0;i;){if(i.value===t)return l;i=i.next,l++}},E.prototype.length=function(){return this._length},E.prototype.isEmpty=function(){return this._length===0},E.prototype.forEach=function(t,i){for(var l=this.head,f=0,h=typeof i!="undefined";l;)h?t.call(i,l.value,f):t(l.value,f),l=l.next,f++},E.prototype.clear=function(){this.tail=this.head=null,this._length=0},E.Entry=function(t){this.value=t,this.next=null,this.prev=null};var O=E,M=function(t){this._list=new O,this._map={},this._maxSize=t||10};M.prototype.setMaxSize=function(t){this._maxSize=t},M.prototype.put=function(t,i){if(!this._map.hasOwnProperty(t)){var l=this._list.length();if(l>=this._maxSize&&l>0){var f=this._list.head;this._list.remove(f),delete this._map[f.key]}var h=this._list.insert(i);h.key=t,this._map[t]=h}},M.prototype.get=function(t){var i=this._map[t];if(this._map.hasOwnProperty(t))return i!==this._list.tail&&(this._list.remove(i),this._list.insertEntry(i)),i.value},M.prototype.remove=function(t){var i=this._map[t];typeof i!="undefined"&&(delete this._map[t],this._list.remove(i))},M.prototype.clear=function(){this._list.clear(),this._map={}};var L=M,H={},U={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ct(t){return t=Math.round(t),t<0?0:t>255?255:t}function st(t){return t=Math.round(t),t<0?0:t>360?360:t}function vt(t){return t<0?0:t>1?1:t}function it(t){return t.length&&t.charAt(t.length-1)==="%"?ct(parseFloat(t)/100*255):ct(parseInt(t,10))}function dt(t){return t.length&&t.charAt(t.length-1)==="%"?vt(parseFloat(t)/100):vt(parseFloat(t))}function St(t,i,l){return l<0?l+=1:l>1&&(l-=1),l*6<1?t+(i-t)*l*6:l*2<1?i:l*3<2?t+(i-t)*(2/3-l)*6:t}function ut(t,i,l){return t+(i-t)*l}function yt(t,i,l,f,h){return t[0]=i,t[1]=l,t[2]=f,t[3]=h,t}function Ot(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t}var At=new L(20),It=null;function Ct(t,i){It&&Ot(It,i),It=At.put(t,It||i.slice())}H.parse=function(t,i){if(!!t){i=i||[];var l=At.get(t);if(l)return Ot(i,l);t=t+"";var f=t.replace(/ /g,"").toLowerCase();if(f in U)return Ot(i,U[f]),Ct(t,i),i;if(f.charAt(0)==="#"){if(f.length===4){var h=parseInt(f.substr(1),16);if(!(h>=0&&h<=4095)){yt(i,0,0,0,1);return}return yt(i,(h&3840)>>4|(h&3840)>>8,h&240|(h&240)>>4,h&15|(h&15)<<4,1),Ct(t,i),i}else if(f.length===7){var h=parseInt(f.substr(1),16);if(!(h>=0&&h<=16777215)){yt(i,0,0,0,1);return}return yt(i,(h&16711680)>>16,(h&65280)>>8,h&255,1),Ct(t,i),i}return}var p=f.indexOf("("),y=f.indexOf(")");if(p!==-1&&y+1===f.length){var _=f.substr(0,p),S=f.substr(p+1,y-(p+1)).split(","),P=1;switch(_){case"rgba":if(S.length!==4){yt(i,0,0,0,1);return}P=dt(S.pop());case"rgb":if(S.length!==3){yt(i,0,0,0,1);return}return yt(i,it(S[0]),it(S[1]),it(S[2]),P),Ct(t,i),i;case"hsla":if(S.length!==4){yt(i,0,0,0,1);return}return S[3]=dt(S[3]),Ft(S,i),Ct(t,i),i;case"hsl":if(S.length!==3){yt(i,0,0,0,1);return}return Ft(S,i),Ct(t,i),i;default:return}}yt(i,0,0,0,1)}},H.parseToFloat=function(t,i){if(i=H.parse(t,i),!!i)return i[0]/=255,i[1]/=255,i[2]/=255,i};function Ft(t,i){var l=(parseFloat(t[0])%360+360)%360/360,f=dt(t[1]),h=dt(t[2]),p=h<=.5?h*(f+1):h+f-h*f,y=h*2-p;return i=i||[],yt(i,ct(St(y,p,l+1/3)*255),ct(St(y,p,l)*255),ct(St(y,p,l-1/3)*255),1),t.length===4&&(i[3]=t[3]),i}function zt(t){if(!!t){var i=t[0]/255,l=t[1]/255,f=t[2]/255,h=Math.min(i,l,f),p=Math.max(i,l,f),y=p-h,_=(p+h)/2,S,P;if(y===0)S=0,P=0;else{_<.5?P=y/(p+h):P=y/(2-p-h);var j=((p-i)/6+y/2)/y,tt=((p-l)/6+y/2)/y,_t=((p-f)/6+y/2)/y;i===p?S=_t-tt:l===p?S=1/3+j-_t:f===p&&(S=2/3+tt-j),S<0&&(S+=1),S>1&&(S-=1)}var xt=[S*360,P,_];return t[3]!=null&&xt.push(t[3]),xt}}H.lift=function(t,i){var l=H.parse(t);if(l){for(var f=0;f<3;f++)i<0?l[f]=l[f]*(1-i)|0:l[f]=(255-l[f])*i+l[f]|0;return H.stringify(l,l.length===4?"rgba":"rgb")}},H.toHex=function(t){var i=H.parse(t);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1)},H.fastLerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){l=l||[];var f=t*(i.length-1),h=Math.floor(f),p=Math.ceil(f),y=i[h],_=i[p],S=f-h;return l[0]=ct(ut(y[0],_[0],S)),l[1]=ct(ut(y[1],_[1],S)),l[2]=ct(ut(y[2],_[2],S)),l[3]=vt(ut(y[3],_[3],S)),l}},H.fastMapToColor=H.fastLerp,H.lerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){var f=t*(i.length-1),h=Math.floor(f),p=Math.ceil(f),y=H.parse(i[h]),_=H.parse(i[p]),S=f-h,P=H.stringify([ct(ut(y[0],_[0],S)),ct(ut(y[1],_[1],S)),ct(ut(y[2],_[2],S)),vt(ut(y[3],_[3],S))],"rgba");return l?{color:P,leftIndex:h,rightIndex:p,value:f}:P}},H.mapToColor=H.lerp,H.modifyHSL=function(t,i,l,f){if(t=H.parse(t),t)return t=zt(t),i!=null&&(t[0]=st(i)),l!=null&&(t[1]=dt(l)),f!=null&&(t[2]=dt(f)),H.stringify(Ft(t),"rgba")},H.modifyAlpha=function(t,i){if(t=H.parse(t),t&&i!=null)return t[3]=vt(i),H.stringify(t,"rgba")},H.stringify=function(t,i){if(!(!t||!t.length)){var l=t[0]+","+t[1]+","+t[2];return(i==="rgba"||i==="hsva"||i==="hsla")&&(l+=","+t[3]),i+"("+l+")"}};var Xt=H,ie=Xt.parseToFloat,oe={};function he(t){var i=Object.keys(t);i.sort();for(var l=[],f=0;f<i.length;f++){var h=i[f],p=t[h];p===null?l.push(h):l.push(h+" "+p.toString())}return l.join(`
`)}function be(t,i,l){l.sort();for(var f=[],h=0;h<l.length;h++){var p=l[h];f.push(p)}var y=he(t)+`
`+he(i)+`
`+f.join(`
`);if(oe[y])return oe[y];var _=$.genGUID();return oe[y]=_,_}var Ce=Y.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(t,i){i===void 0&&console.warn('Uniform value "'+t+'" is undefined');var l=this.uniforms[t];l&&(typeof i=="string"&&(i=ie(i)||i),l.value=i,this.autoUpdateTextureStatus&&l.type==="t"&&(i?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var i in t){var l=t[i];this.setUniform(i,l)}},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,i){if(typeof t=="object")for(var l in t){var f=t[l];this.setUniform(l,f)}else this.setUniform(t,i)},get:function(t){var i=this.uniforms[t];if(i)return i.value},attachShader:function(t,i){var l=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var f=this.uniforms;this._enabledUniforms=Object.keys(f),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(P){var j=this.uniforms[P].type;return j==="t"||j==="tv"},this);var h=this.vertexDefines,p=this.fragmentDefines;if(this.vertexDefines=$.clone(t.vertexDefines),this.fragmentDefines=$.clone(t.fragmentDefines),i){for(var y in l)f[y]&&(f[y].value=l[y].value);$.defaults(this.vertexDefines,h),$.defaults(this.fragmentDefines,p)}var _={};for(var S in t.textures)_[S]={shaderType:t.textures[S].shaderType,type:t.textures[S].type,enabled:i&&this._textureStatus[S]?this._textureStatus[S].enabled:!1};this._textureStatus=_,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var i in this.uniforms)t.uniforms[i].value=this.uniforms[i].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=$.clone(this.vertexDefines),t.fragmentDefines=$.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,i,l){var f=this.vertexDefines,h=this.fragmentDefines;t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<3&&(l=i,i=t,t="both"),l=l!=null?l:null,(t==="vertex"||t==="both")&&f[i]!==l&&(f[i]=l,this._programKey=""),(t==="fragment"||t==="both")&&h[i]!==l&&(h[i]=l,t!=="both"&&(this._programKey=""))},undefine:function(t,i){t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<2&&(i=t,t="both"),(t==="vertex"||t==="both")&&this.isDefined("vertex",i)&&(delete this.vertexDefines[i],this._programKey=""),(t==="fragment"||t==="both")&&this.isDefined("fragment",i)&&(delete this.fragmentDefines[i],t!=="both"&&(this._programKey=""))},isDefined:function(t,i){switch(t){case"vertex":return this.vertexDefines[i]!==void 0;case"fragment":return this.fragmentDefines[i]!==void 0}},getDefine:function(t,i){switch(t){case"vertex":return this.vertexDefines[i];case"fragment":return this.fragmentDefines[i]}},enableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.enableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=l.enabled;f||(l.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.disableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=!l.enabled;f||(l.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var i=this._textureStatus;return!!i[t]&&i[t].enabled},getEnabledTextures:function(){var t=[],i=this._textureStatus;for(var l in i)i[l].enabled&&t.push(l);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=be(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),Fe=Ce,Bt=1e-6,Tt=Array,Mt=Math.random,Ut={};Ut.create=function(){var t=new Tt(2);return t[0]=0,t[1]=0,t},Ut.clone=function(t){var i=new Tt(2);return i[0]=t[0],i[1]=t[1],i},Ut.fromValues=function(t,i){var l=new Tt(2);return l[0]=t,l[1]=i,l},Ut.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t},Ut.set=function(t,i,l){return t[0]=i,t[1]=l,t},Ut.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t},Ut.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t},Ut.sub=Ut.subtract,Ut.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t},Ut.mul=Ut.multiply,Ut.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t},Ut.div=Ut.divide,Ut.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t},Ut.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t},Ut.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t},Ut.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t},Ut.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return Math.sqrt(l*l+f*f)},Ut.dist=Ut.distance,Ut.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return l*l+f*f},Ut.sqrDist=Ut.squaredDistance,Ut.length=function(t){var i=t[0],l=t[1];return Math.sqrt(i*i+l*l)},Ut.len=Ut.length,Ut.squaredLength=function(t){var i=t[0],l=t[1];return i*i+l*l},Ut.sqrLen=Ut.squaredLength,Ut.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t},Ut.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t},Ut.normalize=function(t,i){var l=i[0],f=i[1],h=l*l+f*f;return h>0&&(h=1/Math.sqrt(h),t[0]=i[0]*h,t[1]=i[1]*h),t},Ut.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]},Ut.cross=function(t,i,l){var f=i[0]*l[1]-i[1]*l[0];return t[0]=t[1]=0,t[2]=f,t},Ut.lerp=function(t,i,l,f){var h=i[0],p=i[1];return t[0]=h+f*(l[0]-h),t[1]=p+f*(l[1]-p),t},Ut.random=function(t,i){i=i||1;var l=GLMAT_RANDOM()*2*Math.PI;return t[0]=Math.cos(l)*i,t[1]=Math.sin(l)*i,t},Ut.transformMat2=function(t,i,l){var f=i[0],h=i[1];return t[0]=l[0]*f+l[2]*h,t[1]=l[1]*f+l[3]*h,t},Ut.transformMat2d=function(t,i,l){var f=i[0],h=i[1];return t[0]=l[0]*f+l[2]*h+l[4],t[1]=l[1]*f+l[3]*h+l[5],t},Ut.transformMat3=function(t,i,l){var f=i[0],h=i[1];return t[0]=l[0]*f+l[3]*h+l[6],t[1]=l[1]*f+l[4]*h+l[7],t},Ut.transformMat4=function(t,i,l){var f=i[0],h=i[1];return t[0]=l[0]*f+l[4]*h+l[12],t[1]=l[1]*f+l[5]*h+l[13],t},Ut.forEach=function(){var t=Ut.create();return function(i,l,f,h,p,y){var _,S;for(l||(l=2),f||(f=0),h?S=Math.min(h*l+f,i.length):S=i.length,_=f;_<S;_+=l)t[0]=i[_],t[1]=i[_+1],p(t,t,y),i[_]=t[0],i[_+1]=t[1];return i}}();var se=Ut,ge=function(t,i){t=t||0,i=i||0,this.array=se.fromValues(t,i),this._dirty=!0};if(ge.prototype={constructor:ge,add:function(t){return se.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i){return this.array[0]=t,this.array[1]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new ge(this.x,this.y)},copy:function(t){return se.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return se.cross(t.array,this.array,i.array),t._dirty=!0,this},dist:function(t){return se.dist(this.array,t.array)},distance:function(t){return se.distance(this.array,t.array)},div:function(t){return se.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return se.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return se.dot(this.array,t.array)},len:function(){return se.len(this.array)},length:function(){return se.length(this.array)},lerp:function(t,i,l){return se.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return se.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return se.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return se.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return se.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return se.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return se.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return se.random(this.array,t),this._dirty=!0,this},scale:function(t){return se.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return se.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return se.sqrDist(this.array,t.array)},squaredDistance:function(t){return se.squaredDistance(this.array,t.array)},sqrLen:function(){return se.sqrLen(this.array)},squaredLength:function(){return se.squaredLength(this.array)},sub:function(t){return se.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return se.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return se.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return se.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return se.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return se.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var He=ge.prototype;Object.defineProperty(He,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(He,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}ge.add=function(t,i,l){return se.add(t.array,i.array,l.array),t._dirty=!0,t},ge.set=function(t,i,l){return se.set(t.array,i,l),t._dirty=!0,t},ge.copy=function(t,i){return se.copy(t.array,i.array),t._dirty=!0,t},ge.cross=function(t,i,l){return se.cross(t.array,i.array,l.array),t._dirty=!0,t},ge.dist=function(t,i){return se.distance(t.array,i.array)},ge.distance=ge.dist,ge.div=function(t,i,l){return se.divide(t.array,i.array,l.array),t._dirty=!0,t},ge.divide=ge.div,ge.dot=function(t,i){return se.dot(t.array,i.array)},ge.len=function(t){return se.length(t.array)},ge.lerp=function(t,i,l,f){return se.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},ge.min=function(t,i,l){return se.min(t.array,i.array,l.array),t._dirty=!0,t},ge.max=function(t,i,l){return se.max(t.array,i.array,l.array),t._dirty=!0,t},ge.mul=function(t,i,l){return se.multiply(t.array,i.array,l.array),t._dirty=!0,t},ge.multiply=ge.mul,ge.negate=function(t,i){return se.negate(t.array,i.array),t._dirty=!0,t},ge.normalize=function(t,i){return se.normalize(t.array,i.array),t._dirty=!0,t},ge.random=function(t,i){return se.random(t.array,i),t._dirty=!0,t},ge.scale=function(t,i,l){return se.scale(t.array,i.array,l),t._dirty=!0,t},ge.scaleAndAdd=function(t,i,l,f){return se.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},ge.sqrDist=function(t,i){return se.sqrDist(t.array,i.array)},ge.squaredDistance=ge.sqrDist,ge.sqrLen=function(t){return se.sqrLen(t.array)},ge.squaredLength=ge.sqrLen,ge.sub=function(t,i,l){return se.subtract(t.array,i.array,l.array),t._dirty=!0,t},ge.subtract=ge.sub,ge.transformMat2=function(t,i,l){return se.transformMat2(t.array,i.array,l.array),t._dirty=!0,t},ge.transformMat2d=function(t,i,l){return se.transformMat2d(t.array,i.array,l.array),t._dirty=!0,t},ge.transformMat3=function(t,i,l){return se.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},ge.transformMat4=function(t,i,l){return se.transformMat4(t.array,i.array,l.array),t._dirty=!0,t};var Me=ge,We=1,Ke=2,qe=3,Qt={};function Se(t){for(var i=t.split(`
`),l=0,f=i.length;l<f;l++)i[l]=l+1+": "+i[l];return i.join(`
`)}function Ve(t,i,l){if(!t.getShaderParameter(i,t.COMPILE_STATUS))return[t.getShaderInfoLog(i),Se(l)].join(`
`)}var Ie=new C.a.Float32Array(16),Zt=Y.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var i=this._locations[t];return i!=null},useTextureSlot:function(t,i,l){i&&(t.gl.activeTexture(t.gl.TEXTURE0+l),i.isRenderable()?i.bind(t):i.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,i){var l=this._textureSlot;return this.useTextureSlot(t,i,l),this._textureSlot++,l},setUniform:function(t,i,l,f){var h=this._locations,p=h[l];if(p==null)return!1;switch(i){case"m4":if(!(f instanceof Float32Array)){for(var y=0;y<f.length;y++)Ie[y]=f[y];f=Ie}t.uniformMatrix4fv(p,!1,f);break;case"2i":t.uniform2i(p,f[0],f[1]);break;case"2f":t.uniform2f(p,f[0],f[1]);break;case"3i":t.uniform3i(p,f[0],f[1],f[2]);break;case"3f":t.uniform3f(p,f[0],f[1],f[2]);break;case"4i":t.uniform4i(p,f[0],f[1],f[2],f[3]);break;case"4f":t.uniform4f(p,f[0],f[1],f[2],f[3]);break;case"1i":t.uniform1i(p,f);break;case"1f":t.uniform1f(p,f);break;case"1fv":t.uniform1fv(p,f);break;case"1iv":t.uniform1iv(p,f);break;case"2iv":t.uniform2iv(p,f);break;case"2fv":t.uniform2fv(p,f);break;case"3iv":t.uniform3iv(p,f);break;case"3fv":t.uniform3fv(p,f);break;case"4iv":t.uniform4iv(p,f);break;case"4fv":t.uniform4fv(p,f);break;case"m2":case"m2v":t.uniformMatrix2fv(p,!1,f);break;case"m3":case"m3v":t.uniformMatrix3fv(p,!1,f);break;case"m4v":if(Array.isArray(f)&&Array.isArray(f[0])){for(var _=new C.a.Float32Array(f.length*16),S=0,y=0;y<f.length;y++)for(var P=f[y],j=0;j<16;j++)_[S++]=P[j];t.uniformMatrix4fv(p,!1,_)}else t.uniformMatrix4fv(p,!1,f);break}return!0},setUniformOfSemantic:function(t,i,l){var f=this.uniformSemantics[i];return f?this.setUniform(t,f.type,f.symbol,l):!1},enableAttributes:function(t,i,l){var f=t.gl,h=this._program,p=this._locations,y;l?y=l.__enabledAttributeList:y=Qt[t.__uid__],y||(l?y=l.__enabledAttributeList=[]:y=Qt[t.__uid__]=[]);for(var _=[],S=0;S<i.length;S++){var P=i[S];if(!this.attributes[P]){_[S]=-1;continue}var j=p[P];if(j==null){if(j=f.getAttribLocation(h,P),j===-1){_[S]=-1;continue}p[P]=j}_[S]=j,y[j]?y[j]=Ke:y[j]=We}for(var S=0;S<y.length;S++)switch(y[S]){case We:f.enableVertexAttribArray(S),y[S]=qe;break;case Ke:y[S]=qe;break;case qe:f.disableVertexAttribArray(S),y[S]=0;break}return _},getAttribLocation:function(t,i){var l=this._locations,f=l[i];return f==null&&(f=t.getAttribLocation(this._program,i),l[i]=f),f},buildProgram:function(t,i,l,f){var h=t.createShader(t.VERTEX_SHADER),p=t.createProgram();t.shaderSource(h,l),t.compileShader(h);var y=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(y,f),t.compileShader(y);var _=Ve(t,h,l);if(_||(_=Ve(t,y,f),_))return _;if(t.attachShader(p,h),t.attachShader(p,y),i.attributeSemantics.POSITION)t.bindAttribLocation(p,0,i.attributeSemantics.POSITION.symbol);else{var S=Object.keys(this.attributes);t.bindAttribLocation(p,0,S[0])}if(t.linkProgram(p),t.deleteShader(h),t.deleteShader(y),this._program=p,this.vertexCode=l,this.fragmentCode=f,!t.getProgramParameter(p,t.LINK_STATUS))return`Could not link program
`+t.getProgramInfoLog(p);for(var P=0;P<i.uniforms.length;P++){var j=i.uniforms[P];this._locations[j]=t.getUniformLocation(p,j)}}}),qt=Zt,le=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function De(t,i,l){function f(y,_,S,P){var j="";isNaN(_)&&(_ in i?_=i[_]:_=h[_]),isNaN(S)&&(S in i?S=i[S]:S=h[S]);for(var tt=parseInt(_);tt<parseInt(S);tt++)j+="{"+P.replace(/float\s*\(\s*_idx_\s*\)/g,tt.toFixed(1)).replace(/_idx_/g,tt)+"}";return j}var h={};for(var p in l)h[p+"_COUNT"]=l[p];return t.replace(le,f)}function tr(t,i,l){var f=[];if(i)for(var h in i){var p=i[h];p>0&&f.push("#define "+h.toUpperCase()+"_COUNT "+p)}if(l)for(var y=0;y<l.length;y++){var _=l[y];f.push("#define "+_.toUpperCase()+"_ENABLED")}for(var _ in t){var S=t[_];S===null?f.push("#define "+_):f.push("#define "+_+" "+S.toString())}return f.join(`
`)}function nr(t){for(var i=[],l=0;l<t.length;l++)i.push("#extension GL_"+t[l]+" : enable");return i.join(`
`)}function fe(t){return["precision",t,"float"].join(" ")+`;
`+["precision",t,"int"].join(" ")+`;
`+["precision",t,"sampler2D"].join(" ")+`;
`}function Ee(t){this._renderer=t,this._cache={}}Ee.prototype.getProgram=function(t,i,l){var f=this._cache,h=t.isSkinnedMesh&&t.isSkinnedMesh(),p=t.isInstancedMesh&&t.isInstancedMesh(),y="s"+i.shader.shaderID+"m"+i.getProgramKey();l&&(y+="se"+l.getProgramKey(t.lightGroup)),h&&(y+=",sk"+t.joints.length),p&&(y+=",is");var _=f[y];if(_)return _;var S=l?l.getLightsNumbers(t.lightGroup):{},P=this._renderer,j=P.gl,tt=i.getEnabledTextures(),_t="";if(h){var xt={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>P.getMaxJointNumber()&&(xt.USE_SKIN_MATRICES_TEXTURE=null),_t+=`
`+tr(xt)+`
`}p&&(_t+=`
#define INSTANCING
`);var Et=_t+tr(i.vertexDefines,S,tt),Pt=_t+tr(i.fragmentDefines,S,tt),Vt=Et+`
`+i.shader.vertex,kt=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(de){return P.getGLExtension(de)!=null});kt.indexOf("EXT_shader_texture_lod")>=0&&(Pt+=`
#define SUPPORT_TEXTURE_LOD`),kt.indexOf("OES_standard_derivatives")>=0&&(Pt+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var ee=nr(kt)+`
`+fe(i.precision)+`
`+Pt+`
`+i.shader.fragment,Jt=De(Vt,i.vertexDefines,S),$t=De(ee,i.fragmentDefines,S),_=new qt;_.uniformSemantics=i.shader.uniformSemantics,_.attributes=i.shader.attributes;var ce=_.buildProgram(j,i.shader,Jt,$t);return _.__error=ce,f[y]=_,_};var ke=Ee,Re=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Cr=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,Fr=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Hr={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function Jr(t){for(var i=[],l=0;l<t;l++)i[l]=0;return i}var Kn={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return Jr(2)},vec3:function(){return Jr(3)},vec4:function(){return Jr(4)},ivec2:function(){return Jr(2)},ivec3:function(){return Jr(3)},ivec4:function(){return Jr(4)},mat2:function(){return Jr(4)},mat3:function(){return Jr(9)},mat4:function(){return Jr(16)},array:function(){return[]}},Kr=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],li=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],ei=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Xa={vec4:4,vec3:3,vec2:2,float:1},Za={},si={};function lo(t,i){var l="vertex:"+t+"fragment:"+i;if(Za[l])return Za[l];var f=$.genGUID();return Za[l]=f,si[f]={vertex:t,fragment:i},f}function Aa(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function aa(){console.error("Wrong uniform/attributes syntax")}function yl(t,i){for(var l=/[,=\(\):]/,f=i.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),h=[],p=0;p<f.length;p++)f[p].match(l)?h.push(f[p].charAt(0),f[p].slice(1)):h.push(f[p]);f=h;var y=0,_=1,S=2,P=3,j=4,tt=5,_t=y,xt={},Et=null,Pt;Vt(f[0]);function Vt(Jt){Jt||aa();var $t=Jt.match(/\[(.*?)\]/);Pt=Jt.replace(/\[(.*?)\]/,""),xt[Pt]={},$t&&(xt[Pt].isArray=!0,xt[Pt].arraySize=$t[1])}for(var p=1;p<f.length;p++){var kt=f[p];if(!!kt){if(kt==="="){if(_t!==y&&_t!==P){aa();break}_t=_;continue}else if(kt===":"){_t=j;continue}else if(kt===","){if(_t===S){if(!(Et instanceof Array)){aa();break}Et.push(+f[++p])}else _t=tt;continue}else if(kt===")"){xt[Pt].value=new C.a.Float32Array(Et),Et=null,_t=tt;continue}else if(kt==="("){if(_t!==S){aa();break}if(!(Et instanceof Array)){aa();break}Et.push(+f[++p]);continue}else if(kt.indexOf("vec")>=0){if(_t!==_&&_t!==j){aa();break}_t=S,Et=[];continue}else if(_t===_){t==="bool"?xt[Pt].value=kt==="true":xt[Pt].value=parseFloat(kt),Et=null;continue}else if(_t===j){var ee=kt;Kr.indexOf(ee)>=0||li.indexOf(ee)>=0||ei.indexOf(ee)>=0?xt[Pt].semantic=ee:ee==="ignore"||ee==="unconfigurable"?xt[Pt].ignore=!0:t==="bool"?xt[Pt].value=ee==="true":xt[Pt].value=parseFloat(ee);continue}Vt(kt),_t=y}}return xt}function Fn(t,i){typeof t=="object"&&(i=t.fragment,t=t.vertex),t=Aa(t),i=Aa(i),this._shaderID=lo(t,i),this._vertexCode=Fn.parseImport(t),this._fragmentCode=Fn.parseImport(i),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Fn.prototype={constructor:Fn,createUniforms:function(){var t={};for(var i in this.uniformTemplates){var l=this.uniformTemplates[i];t[i]={type:l.type,value:l.value()}}return t},_parseImport:function(){this._vertexCode=Fn.parseImport(this.vertex),this._fragmentCode=Fn.parseImport(this.fragment)},_addSemanticUniform:function(t,i,l){if(Kr.indexOf(l)>=0)this.attributeSemantics[l]={symbol:t,type:i};else if(ei.indexOf(l)>=0){var f=!1,h=l;l.match(/TRANSPOSE$/)&&(f=!0,h=l.slice(0,-9)),this.matrixSemantics[l]={symbol:t,type:i,isTranspose:f,semanticNoTranspose:h}}else li.indexOf(l)>=0&&(this.uniformSemantics[l]={symbol:t,type:i})},_addMaterialUniform:function(t,i,l,f,h,p){p[t]={type:l,value:h?Kn.array:f||Kn[i],semantic:null}},_parseUniforms:function(){var t={},i=this,l="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(Re,h),l="fragment",this._fragmentCode=this._fragmentCode.replace(Re,h),i.matrixSemanticKeys=Object.keys(this.matrixSemantics);function f(p){return p!=null?function(){return p}:null}function h(p,y,_){var S=yl(y,_),P=[];for(var j in S){var tt=S[j],_t=tt.semantic,xt=j,Et=Hr[y],Pt=f(S[j].value);S[j].isArray&&(xt+="["+S[j].arraySize+"]",Et+="v"),P.push(xt),i._uniformList.push(j),tt.ignore||((y==="sampler2D"||y==="samplerCube")&&(i.textures[j]={shaderType:l,type:y}),_t?i._addSemanticUniform(j,Et,_t):i._addMaterialUniform(j,y,Et,Pt,S[j].isArray,t))}return P.length>0?"uniform "+y+" "+P.join(",")+`;
`:""}this.uniformTemplates=t},_parseAttributes:function(){var t={},i=this;this._vertexCode=this._vertexCode.replace(Cr,l);function l(f,h,p){var y=yl(h,p),_=Xa[h]||1,S=[];for(var P in y){var j=y[P].semantic;if(t[P]={type:"float",size:_,semantic:j||null},j){if(Kr.indexOf(j)<0)throw new Error('Unkown semantic "'+j+'"');i.attributeSemantics[j]={symbol:P,type:h}}S.push(P)}return"attribute "+h+" "+S.join(",")+`;
`}this.attributes=t},_parseDefines:function(){var t=this,i="vertex";this._vertexCode=this._vertexCode.replace(Fr,l),i="fragment",this._fragmentCode=this._fragmentCode.replace(Fr,l);function l(f,h,p){var y=i==="vertex"?t.vertexDefines:t.fragmentDefines;return y[h]||(p==="false"?y[h]=!1:p==="true"?y[h]=!0:y[h]=p?isNaN(parseFloat(p))?p.trim():parseFloat(p):null),""}},clone:function(){var t=si[this._shaderID],i=new Fn(t.vertex,t.fragment);return i}},Object.defineProperty&&(Object.defineProperty(Fn.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Fn.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Fn.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Fn.prototype,"uniforms",{get:function(){return this._uniformList}}));var uo=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Fn.parseImport=function(t){return t=t.replace(uo,function(i,l,f){var i=Fn.source(f);return i?Fn.parseImport(i):(console.error('Shader chunk "'+f+'" not existed in library'),"")}),t};var df=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Fn.import=function(t){t.replace(df,function(i,l,f,h){var h=h.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(h){for(var p=f.split("."),y=Fn.codes,_=0,S;_<p.length-1;)S=p[_++],y[S]||(y[S]={}),y=y[S];S=p[_],y[S]=h}return h})},Fn.codes={},Fn.source=function(t){for(var i=t.split("."),l=Fn.codes,f=0;l&&f<i.length;){var h=i[f++];l=l[h]}return typeof l!="string"?(console.error('Shader "'+t+'" not existed in library'),""):l};var pr=Fn,uu=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`,vn={};vn.create=function(){var t=new Tt(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vn.clone=function(t){var i=new Tt(16);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},vn.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},vn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vn.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],h=i[3],p=i[6],y=i[7],_=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=l,t[6]=i[9],t[7]=i[13],t[8]=f,t[9]=p,t[11]=i[14],t[12]=h,t[13]=y,t[14]=_}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t},vn.invert=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=i[6],P=i[7],j=i[8],tt=i[9],_t=i[10],xt=i[11],Et=i[12],Pt=i[13],Vt=i[14],kt=i[15],ee=l*_-f*y,Jt=l*S-h*y,$t=l*P-p*y,ce=f*S-h*_,de=f*P-p*_,we=h*P-p*S,Ae=j*Pt-tt*Et,Ge=j*Vt-_t*Et,rr=j*kt-xt*Et,Qe=tt*Vt-_t*Pt,sr=tt*kt-xt*Pt,fr=_t*kt-xt*Vt,$e=ee*fr-Jt*sr+$t*Qe+ce*rr-de*Ge+we*Ae;return $e?($e=1/$e,t[0]=(_*fr-S*sr+P*Qe)*$e,t[1]=(h*sr-f*fr-p*Qe)*$e,t[2]=(Pt*we-Vt*de+kt*ce)*$e,t[3]=(_t*de-tt*we-xt*ce)*$e,t[4]=(S*rr-y*fr-P*Ge)*$e,t[5]=(l*fr-h*rr+p*Ge)*$e,t[6]=(Vt*$t-Et*we-kt*Jt)*$e,t[7]=(j*we-_t*$t+xt*Jt)*$e,t[8]=(y*sr-_*rr+P*Ae)*$e,t[9]=(f*rr-l*sr-p*Ae)*$e,t[10]=(Et*de-Pt*$t+kt*ee)*$e,t[11]=(tt*$t-j*de-xt*ee)*$e,t[12]=(_*Ge-y*Qe-S*Ae)*$e,t[13]=(l*Qe-f*Ge+h*Ae)*$e,t[14]=(Pt*Jt-Et*ce-Vt*ee)*$e,t[15]=(j*ce-tt*Jt+_t*ee)*$e,t):null},vn.adjoint=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=i[6],P=i[7],j=i[8],tt=i[9],_t=i[10],xt=i[11],Et=i[12],Pt=i[13],Vt=i[14],kt=i[15];return t[0]=_*(_t*kt-xt*Vt)-tt*(S*kt-P*Vt)+Pt*(S*xt-P*_t),t[1]=-(f*(_t*kt-xt*Vt)-tt*(h*kt-p*Vt)+Pt*(h*xt-p*_t)),t[2]=f*(S*kt-P*Vt)-_*(h*kt-p*Vt)+Pt*(h*P-p*S),t[3]=-(f*(S*xt-P*_t)-_*(h*xt-p*_t)+tt*(h*P-p*S)),t[4]=-(y*(_t*kt-xt*Vt)-j*(S*kt-P*Vt)+Et*(S*xt-P*_t)),t[5]=l*(_t*kt-xt*Vt)-j*(h*kt-p*Vt)+Et*(h*xt-p*_t),t[6]=-(l*(S*kt-P*Vt)-y*(h*kt-p*Vt)+Et*(h*P-p*S)),t[7]=l*(S*xt-P*_t)-y*(h*xt-p*_t)+j*(h*P-p*S),t[8]=y*(tt*kt-xt*Pt)-j*(_*kt-P*Pt)+Et*(_*xt-P*tt),t[9]=-(l*(tt*kt-xt*Pt)-j*(f*kt-p*Pt)+Et*(f*xt-p*tt)),t[10]=l*(_*kt-P*Pt)-y*(f*kt-p*Pt)+Et*(f*P-p*_),t[11]=-(l*(_*xt-P*tt)-y*(f*xt-p*tt)+j*(f*P-p*_)),t[12]=-(y*(tt*Vt-_t*Pt)-j*(_*Vt-S*Pt)+Et*(_*_t-S*tt)),t[13]=l*(tt*Vt-_t*Pt)-j*(f*Vt-h*Pt)+Et*(f*_t-h*tt),t[14]=-(l*(_*Vt-S*Pt)-y*(f*Vt-h*Pt)+Et*(f*S-h*_)),t[15]=l*(_*_t-S*tt)-y*(f*_t-h*tt)+j*(f*S-h*_),t},vn.determinant=function(t){var i=t[0],l=t[1],f=t[2],h=t[3],p=t[4],y=t[5],_=t[6],S=t[7],P=t[8],j=t[9],tt=t[10],_t=t[11],xt=t[12],Et=t[13],Pt=t[14],Vt=t[15],kt=i*y-l*p,ee=i*_-f*p,Jt=i*S-h*p,$t=l*_-f*y,ce=l*S-h*y,de=f*S-h*_,we=P*Et-j*xt,Ae=P*Pt-tt*xt,Ge=P*Vt-_t*xt,rr=j*Pt-tt*Et,Qe=j*Vt-_t*Et,sr=tt*Vt-_t*Pt;return kt*sr-ee*Qe+Jt*rr+$t*Ge-ce*Ae+de*we},vn.multiply=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=i[6],j=i[7],tt=i[8],_t=i[9],xt=i[10],Et=i[11],Pt=i[12],Vt=i[13],kt=i[14],ee=i[15],Jt=l[0],$t=l[1],ce=l[2],de=l[3];return t[0]=Jt*f+$t*_+ce*tt+de*Pt,t[1]=Jt*h+$t*S+ce*_t+de*Vt,t[2]=Jt*p+$t*P+ce*xt+de*kt,t[3]=Jt*y+$t*j+ce*Et+de*ee,Jt=l[4],$t=l[5],ce=l[6],de=l[7],t[4]=Jt*f+$t*_+ce*tt+de*Pt,t[5]=Jt*h+$t*S+ce*_t+de*Vt,t[6]=Jt*p+$t*P+ce*xt+de*kt,t[7]=Jt*y+$t*j+ce*Et+de*ee,Jt=l[8],$t=l[9],ce=l[10],de=l[11],t[8]=Jt*f+$t*_+ce*tt+de*Pt,t[9]=Jt*h+$t*S+ce*_t+de*Vt,t[10]=Jt*p+$t*P+ce*xt+de*kt,t[11]=Jt*y+$t*j+ce*Et+de*ee,Jt=l[12],$t=l[13],ce=l[14],de=l[15],t[12]=Jt*f+$t*_+ce*tt+de*Pt,t[13]=Jt*h+$t*S+ce*_t+de*Vt,t[14]=Jt*p+$t*P+ce*xt+de*kt,t[15]=Jt*y+$t*j+ce*Et+de*ee,t},vn.multiplyAffine=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[4],_=i[5],S=i[6],P=i[8],j=i[9],tt=i[10],_t=i[12],xt=i[13],Et=i[14],Pt=l[0],Vt=l[1],kt=l[2];return t[0]=Pt*f+Vt*y+kt*P,t[1]=Pt*h+Vt*_+kt*j,t[2]=Pt*p+Vt*S+kt*tt,Pt=l[4],Vt=l[5],kt=l[6],t[4]=Pt*f+Vt*y+kt*P,t[5]=Pt*h+Vt*_+kt*j,t[6]=Pt*p+Vt*S+kt*tt,Pt=l[8],Vt=l[9],kt=l[10],t[8]=Pt*f+Vt*y+kt*P,t[9]=Pt*h+Vt*_+kt*j,t[10]=Pt*p+Vt*S+kt*tt,Pt=l[12],Vt=l[13],kt=l[14],t[12]=Pt*f+Vt*y+kt*P+_t,t[13]=Pt*h+Vt*_+kt*j+xt,t[14]=Pt*p+Vt*S+kt*tt+Et,t},vn.mul=vn.multiply,vn.mulAffine=vn.multiplyAffine,vn.translate=function(t,i,l){var f=l[0],h=l[1],p=l[2],y,_,S,P,j,tt,_t,xt,Et,Pt,Vt,kt;return i===t?(t[12]=i[0]*f+i[4]*h+i[8]*p+i[12],t[13]=i[1]*f+i[5]*h+i[9]*p+i[13],t[14]=i[2]*f+i[6]*h+i[10]*p+i[14],t[15]=i[3]*f+i[7]*h+i[11]*p+i[15]):(y=i[0],_=i[1],S=i[2],P=i[3],j=i[4],tt=i[5],_t=i[6],xt=i[7],Et=i[8],Pt=i[9],Vt=i[10],kt=i[11],t[0]=y,t[1]=_,t[2]=S,t[3]=P,t[4]=j,t[5]=tt,t[6]=_t,t[7]=xt,t[8]=Et,t[9]=Pt,t[10]=Vt,t[11]=kt,t[12]=y*f+j*h+Et*p+i[12],t[13]=_*f+tt*h+Pt*p+i[13],t[14]=S*f+_t*h+Vt*p+i[14],t[15]=P*f+xt*h+kt*p+i[15]),t},vn.scale=function(t,i,l){var f=l[0],h=l[1],p=l[2];return t[0]=i[0]*f,t[1]=i[1]*f,t[2]=i[2]*f,t[3]=i[3]*f,t[4]=i[4]*h,t[5]=i[5]*h,t[6]=i[6]*h,t[7]=i[7]*h,t[8]=i[8]*p,t[9]=i[9]*p,t[10]=i[10]*p,t[11]=i[11]*p,t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},vn.rotate=function(t,i,l,f){var h=f[0],p=f[1],y=f[2],_=Math.sqrt(h*h+p*p+y*y),S,P,j,tt,_t,xt,Et,Pt,Vt,kt,ee,Jt,$t,ce,de,we,Ae,Ge,rr,Qe,sr,fr,$e,dr;return Math.abs(_)<Bt?null:(_=1/_,h*=_,p*=_,y*=_,S=Math.sin(l),P=Math.cos(l),j=1-P,tt=i[0],_t=i[1],xt=i[2],Et=i[3],Pt=i[4],Vt=i[5],kt=i[6],ee=i[7],Jt=i[8],$t=i[9],ce=i[10],de=i[11],we=h*h*j+P,Ae=p*h*j+y*S,Ge=y*h*j-p*S,rr=h*p*j-y*S,Qe=p*p*j+P,sr=y*p*j+h*S,fr=h*y*j+p*S,$e=p*y*j-h*S,dr=y*y*j+P,t[0]=tt*we+Pt*Ae+Jt*Ge,t[1]=_t*we+Vt*Ae+$t*Ge,t[2]=xt*we+kt*Ae+ce*Ge,t[3]=Et*we+ee*Ae+de*Ge,t[4]=tt*rr+Pt*Qe+Jt*sr,t[5]=_t*rr+Vt*Qe+$t*sr,t[6]=xt*rr+kt*Qe+ce*sr,t[7]=Et*rr+ee*Qe+de*sr,t[8]=tt*fr+Pt*$e+Jt*dr,t[9]=_t*fr+Vt*$e+$t*dr,t[10]=xt*fr+kt*$e+ce*dr,t[11]=Et*fr+ee*$e+de*dr,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},vn.rotateX=function(t,i,l){var f=Math.sin(l),h=Math.cos(l),p=i[4],y=i[5],_=i[6],S=i[7],P=i[8],j=i[9],tt=i[10],_t=i[11];return i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=p*h+P*f,t[5]=y*h+j*f,t[6]=_*h+tt*f,t[7]=S*h+_t*f,t[8]=P*h-p*f,t[9]=j*h-y*f,t[10]=tt*h-_*f,t[11]=_t*h-S*f,t},vn.rotateY=function(t,i,l){var f=Math.sin(l),h=Math.cos(l),p=i[0],y=i[1],_=i[2],S=i[3],P=i[8],j=i[9],tt=i[10],_t=i[11];return i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*h-P*f,t[1]=y*h-j*f,t[2]=_*h-tt*f,t[3]=S*h-_t*f,t[8]=p*f+P*h,t[9]=y*f+j*h,t[10]=_*f+tt*h,t[11]=S*f+_t*h,t},vn.rotateZ=function(t,i,l){var f=Math.sin(l),h=Math.cos(l),p=i[0],y=i[1],_=i[2],S=i[3],P=i[4],j=i[5],tt=i[6],_t=i[7];return i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*h+P*f,t[1]=y*h+j*f,t[2]=_*h+tt*f,t[3]=S*h+_t*f,t[4]=P*h-p*f,t[5]=j*h-y*f,t[6]=tt*h-_*f,t[7]=_t*h-S*f,t},vn.fromRotationTranslation=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=f+f,S=h+h,P=p+p,j=f*_,tt=f*S,_t=f*P,xt=h*S,Et=h*P,Pt=p*P,Vt=y*_,kt=y*S,ee=y*P;return t[0]=1-(xt+Pt),t[1]=tt+ee,t[2]=_t-kt,t[3]=0,t[4]=tt-ee,t[5]=1-(j+Pt),t[6]=Et+Vt,t[7]=0,t[8]=_t+kt,t[9]=Et-Vt,t[10]=1-(j+xt),t[11]=0,t[12]=l[0],t[13]=l[1],t[14]=l[2],t[15]=1,t},vn.fromQuat=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=l+l,_=f+f,S=h+h,P=l*y,j=f*y,tt=f*_,_t=h*y,xt=h*_,Et=h*S,Pt=p*y,Vt=p*_,kt=p*S;return t[0]=1-tt-Et,t[1]=j+kt,t[2]=_t-Vt,t[3]=0,t[4]=j-kt,t[5]=1-P-Et,t[6]=xt+Pt,t[7]=0,t[8]=_t+Vt,t[9]=xt-Pt,t[10]=1-P-tt,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vn.frustum=function(t,i,l,f,h,p,y){var _=1/(l-i),S=1/(h-f),P=1/(p-y);return t[0]=p*2*_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p*2*S,t[6]=0,t[7]=0,t[8]=(l+i)*_,t[9]=(h+f)*S,t[10]=(y+p)*P,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*p*2*P,t[15]=0,t},vn.perspective=function(t,i,l,f,h){var p=1/Math.tan(i/2),y=1/(f-h);return t[0]=p/l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(h+f)*y,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*h*f*y,t[15]=0,t},vn.ortho=function(t,i,l,f,h,p,y){var _=1/(i-l),S=1/(f-h),P=1/(p-y);return t[0]=-2*_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*S,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*P,t[11]=0,t[12]=(i+l)*_,t[13]=(h+f)*S,t[14]=(y+p)*P,t[15]=1,t},vn.lookAt=function(t,i,l,f){var h,p,y,_,S,P,j,tt,_t,xt,Et=i[0],Pt=i[1],Vt=i[2],kt=f[0],ee=f[1],Jt=f[2],$t=l[0],ce=l[1],de=l[2];return Math.abs(Et-$t)<Bt&&Math.abs(Pt-ce)<Bt&&Math.abs(Vt-de)<Bt?vn.identity(t):(j=Et-$t,tt=Pt-ce,_t=Vt-de,xt=1/Math.sqrt(j*j+tt*tt+_t*_t),j*=xt,tt*=xt,_t*=xt,h=ee*_t-Jt*tt,p=Jt*j-kt*_t,y=kt*tt-ee*j,xt=Math.sqrt(h*h+p*p+y*y),xt?(xt=1/xt,h*=xt,p*=xt,y*=xt):(h=0,p=0,y=0),_=tt*y-_t*p,S=_t*h-j*y,P=j*p-tt*h,xt=Math.sqrt(_*_+S*S+P*P),xt?(xt=1/xt,_*=xt,S*=xt,P*=xt):(_=0,S=0,P=0),t[0]=h,t[1]=_,t[2]=j,t[3]=0,t[4]=p,t[5]=S,t[6]=tt,t[7]=0,t[8]=y,t[9]=P,t[10]=_t,t[11]=0,t[12]=-(h*Et+p*Pt+y*Vt),t[13]=-(_*Et+S*Pt+P*Vt),t[14]=-(j*Et+tt*Pt+_t*Vt),t[15]=1,t)},vn.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var vr=vn,jr={};jr.create=function(){var t=new Tt(3);return t[0]=0,t[1]=0,t[2]=0,t},jr.clone=function(t){var i=new Tt(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i},jr.fromValues=function(t,i,l){var f=new Tt(3);return f[0]=t,f[1]=i,f[2]=l,f},jr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},jr.set=function(t,i,l,f){return t[0]=i,t[1]=l,t[2]=f,t},jr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t},jr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t},jr.sub=jr.subtract,jr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t},jr.mul=jr.multiply,jr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t},jr.div=jr.divide,jr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t},jr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t},jr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t},jr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t},jr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],h=i[2]-t[2];return Math.sqrt(l*l+f*f+h*h)},jr.dist=jr.distance,jr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],h=i[2]-t[2];return l*l+f*f+h*h},jr.sqrDist=jr.squaredDistance,jr.length=function(t){var i=t[0],l=t[1],f=t[2];return Math.sqrt(i*i+l*l+f*f)},jr.len=jr.length,jr.squaredLength=function(t){var i=t[0],l=t[1],f=t[2];return i*i+l*l+f*f},jr.sqrLen=jr.squaredLength,jr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t},jr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t},jr.normalize=function(t,i){var l=i[0],f=i[1],h=i[2],p=l*l+f*f+h*h;return p>0&&(p=1/Math.sqrt(p),t[0]=i[0]*p,t[1]=i[1]*p,t[2]=i[2]*p),t},jr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},jr.cross=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=l[0],_=l[1],S=l[2];return t[0]=h*S-p*_,t[1]=p*y-f*S,t[2]=f*_-h*y,t},jr.lerp=function(t,i,l,f){var h=i[0],p=i[1],y=i[2];return t[0]=h+f*(l[0]-h),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t},jr.random=function(t,i){i=i||1;var l=Mt()*2*Math.PI,f=Mt()*2-1,h=Math.sqrt(1-f*f)*i;return t[0]=Math.cos(l)*h,t[1]=Math.sin(l)*h,t[2]=f*i,t},jr.transformMat4=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=l[3]*f+l[7]*h+l[11]*p+l[15];return y=y||1,t[0]=(l[0]*f+l[4]*h+l[8]*p+l[12])/y,t[1]=(l[1]*f+l[5]*h+l[9]*p+l[13])/y,t[2]=(l[2]*f+l[6]*h+l[10]*p+l[14])/y,t},jr.transformMat3=function(t,i,l){var f=i[0],h=i[1],p=i[2];return t[0]=f*l[0]+h*l[3]+p*l[6],t[1]=f*l[1]+h*l[4]+p*l[7],t[2]=f*l[2]+h*l[5]+p*l[8],t},jr.transformQuat=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=l[0],_=l[1],S=l[2],P=l[3],j=P*f+_*p-S*h,tt=P*h+S*f-y*p,_t=P*p+y*h-_*f,xt=-y*f-_*h-S*p;return t[0]=j*P+xt*-y+tt*-S-_t*-_,t[1]=tt*P+xt*-_+_t*-y-j*-S,t[2]=_t*P+xt*-S+j*-_-tt*-y,t},jr.rotateX=function(t,i,l,f){var h=[],p=[];return h[0]=i[0]-l[0],h[1]=i[1]-l[1],h[2]=i[2]-l[2],p[0]=h[0],p[1]=h[1]*Math.cos(f)-h[2]*Math.sin(f),p[2]=h[1]*Math.sin(f)+h[2]*Math.cos(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},jr.rotateY=function(t,i,l,f){var h=[],p=[];return h[0]=i[0]-l[0],h[1]=i[1]-l[1],h[2]=i[2]-l[2],p[0]=h[2]*Math.sin(f)+h[0]*Math.cos(f),p[1]=h[1],p[2]=h[2]*Math.cos(f)-h[0]*Math.sin(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},jr.rotateZ=function(t,i,l,f){var h=[],p=[];return h[0]=i[0]-l[0],h[1]=i[1]-l[1],h[2]=i[2]-l[2],p[0]=h[0]*Math.cos(f)-h[1]*Math.sin(f),p[1]=h[0]*Math.sin(f)+h[1]*Math.cos(f),p[2]=h[2],t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},jr.forEach=function(){var t=jr.create();return function(i,l,f,h,p,y){var _,S;for(l||(l=3),f||(f=0),h?S=Math.min(h*l+f,i.length):S=i.length,_=f;_<S;_+=l)t[0]=i[_],t[1]=i[_+1],t[2]=i[_+2],p(t,t,y),i[_]=t[0],i[_+1]=t[1],i[_+2]=t[2];return i}}(),jr.angle=function(t,i){var l=jr.fromValues(t[0],t[1],t[2]),f=jr.fromValues(i[0],i[1],i[2]);jr.normalize(l,l),jr.normalize(f,f);var h=jr.dot(l,f);return h>1?0:Math.acos(h)};var Oe=jr;pr.import(uu);var An=vr.create,fu={};function Pe(t){return t.material}function va(t,i,l){return i.uniforms[l].value}function Mn(t,i,l,f){return l!==f}function cn(t){return!0}function Pr(){}var fo={float:A.FLOAT,byte:A.BYTE,ubyte:A.UNSIGNED_BYTE,short:A.SHORT,ushort:A.UNSIGNED_SHORT};function cu(t,i,l){this.availableAttributes=t,this.availableAttributeSymbols=i,this.indicesBuffer=l,this.vao=null}function cr(t){var i,l;this.bind=function(f){i||(i=C.a.createCanvas(),i.width=i.height=1,i.getContext("2d"));var h=f.gl,p=!l;p&&(l=h.createTexture()),h.bindTexture(h.TEXTURE_2D,l),p&&h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,i)},this.unbind=function(f){f.gl.bindTexture(f.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var _r=Y.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=C.a.createCanvas());var t=this.canvas;try{var i={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!this.gl)throw new Error;this._glinfo=new I(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(l){throw"Error creating WebGL Context "+l}this._programMgr=new ke(this),this._placeholderTexture=new cr(this)},{resize:function(t,i){var l=this.canvas,f=this.devicePixelRatio;t!=null?(l.style&&(l.style.width=t+"px",l.style.height=i+"px"),l.width=t*f,l.height=i*f,this._width=t,this._height=i):(this._width=l.width/f,this._height=l.height/f),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,i,l,f,h){if(typeof t=="object"){var p=t;t=p.x,i=p.y,l=p.width,f=p.height,h=p.devicePixelRatio}h=h||this.devicePixelRatio,this.gl.viewport(t*h,i*h,l*h,f*h),this.viewport={x:t,y:i,width:l,height:f,devicePixelRatio:h}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,i,l,f){var h=this.gl,p=this.clearColor;if(this.clearBit){h.colorMask(!0,!0,!0,!0),h.depthMask(!0);var y=this.viewport,_=!1,S=y.devicePixelRatio;(y.width!==this._width||y.height!==this._height||S&&S!==this.devicePixelRatio||y.x||y.y)&&(_=!0,h.enable(h.SCISSOR_TEST),h.scissor(y.x*S,y.y*S,y.width*S,y.height*S)),h.clearColor(p[0],p[1],p[2],p[3]),h.clear(this.clearBit),_&&h.disable(h.SCISSOR_TEST)}if(l||t.update(!1),t.updateLights(),i=i||t.getMainCamera(),!i){console.error("Can't find camera in the scene.");return}i.update();var P=t.updateRenderList(i,!0);this._sceneRendering=t;var j=P.opaque,tt=P.transparent,_t=t.material;t.trigger("beforerender",this,t,i,P),f?(this.renderPreZ(j,t,i),h.depthFunc(h.LEQUAL)):h.depthFunc(h.LESS);for(var xt=An(),Et=Oe.create(),Pt=0;Pt<tt.length;Pt++){var Vt=tt[Pt];vr.multiplyAffine(xt,i.viewMatrix.array,Vt.worldTransform.array),Oe.transformMat4(Et,Vt.position.array,xt),Vt.__depth=Et[2]}this.renderPass(j,i,{getMaterial:function(kt){return _t||kt.material},sortCompare:this.opaqueSortCompare}),this.renderPass(tt,i,{getMaterial:function(kt){return _t||kt.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,i,P),this._sceneRendering=null},getProgram:function(t,i,l){return i=i||t.material,this._programMgr.getProgram(t,i,l)},validateProgram:function(t){if(t.__error){var i=t.__error;if(fu[t.__uid__])return;if(fu[t.__uid__]=!0,this.throwError)throw new Error(i);this.trigger("error",i)}},updatePrograms:function(t,i,l){var f=l&&l.getMaterial||Pe;i=i||null;for(var h=0;h<t.length;h++){var p=t[h],y=f.call(this,p);if(h>0){var _=t[h-1],S=_.joints?_.joints.length:0,P=p.joints?p.joints.length:0;if(P===S&&p.material===_.material&&p.lightGroup===_.lightGroup){p.__program=_.__program;continue}}var j=this._programMgr.getProgram(p,y,i);this.validateProgram(j),p.__program=j}},renderPass:function(t,i,l){this.trigger("beforerenderpass",this,t,i,l),l=l||{},l.getMaterial=l.getMaterial||Pe,l.getUniform=l.getUniform||va,l.isMaterialChanged=l.isMaterialChanged||Mn,l.beforeRender=l.beforeRender||Pr,l.afterRender=l.afterRender||Pr;var f=l.ifRender||cn;this.updatePrograms(t,this._sceneRendering,l),l.sortCompare&&t.sort(l.sortCompare);var h=this.viewport,p=h.devicePixelRatio,y=[h.x*p,h.y*p,h.width*p,h.height*p],_=this.devicePixelRatio,S=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*_,this._height*_],P=[y[2],y[3]],j=Date.now();i?(vr.copy(br.VIEW,i.viewMatrix.array),vr.copy(br.PROJECTION,i.projectionMatrix.array),vr.copy(br.VIEWINVERSE,i.worldTransform.array)):(vr.identity(br.VIEW),vr.identity(br.PROJECTION),vr.identity(br.VIEWINVERSE)),vr.multiply(br.VIEWPROJECTION,br.PROJECTION,br.VIEW),vr.invert(br.PROJECTIONINVERSE,br.PROJECTION),vr.invert(br.VIEWPROJECTIONINVERSE,br.VIEWPROJECTION);for(var tt=this.gl,_t=this._sceneRendering,xt,Et,Pt,Vt,kt,ee,Jt,$t,ce,de,we,Ae,Ge=null,rr=0;rr<t.length;rr++){var Qe=t[rr],sr=Qe.worldTransform!=null,fr;if(!!f(Qe)){sr&&(fr=Qe.isSkinnedMesh&&Qe.isSkinnedMesh()?Qe.offsetMatrix?Qe.offsetMatrix.array:br.IDENTITY:Qe.worldTransform.array);var $e=Qe.geometry,dr=l.getMaterial.call(this,Qe),Sr=Qe.__program,Lr=dr.shader,gr=$e.__uid__+"-"+Sr.__uid__,ln=gr!==de;de=gr,ln&&Ge&&Ge.bindVertexArrayOES(null),sr&&(vr.copy(br.WORLD,fr),vr.multiply(br.WORLDVIEWPROJECTION,br.VIEWPROJECTION,fr),vr.multiplyAffine(br.WORLDVIEW,br.VIEW,fr),(Lr.matrixSemantics.WORLDINVERSE||Lr.matrixSemantics.WORLDINVERSETRANSPOSE)&&vr.invert(br.WORLDINVERSE,fr),(Lr.matrixSemantics.WORLDVIEWINVERSE||Lr.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&vr.invert(br.WORLDVIEWINVERSE,br.WORLDVIEW),(Lr.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||Lr.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&vr.invert(br.WORLDVIEWPROJECTIONINVERSE,br.WORLDVIEWPROJECTION)),Qe.beforeRender&&Qe.beforeRender(this),l.beforeRender.call(this,Qe,dr,xt);var Dr=Sr!==Et;Dr?(Sr.bind(this),Sr.setUniformOfSemantic(tt,"VIEWPORT",y),Sr.setUniformOfSemantic(tt,"WINDOW_SIZE",S),i&&(Sr.setUniformOfSemantic(tt,"NEAR",i.near),Sr.setUniformOfSemantic(tt,"FAR",i.far)),Sr.setUniformOfSemantic(tt,"DEVICEPIXELRATIO",p),Sr.setUniformOfSemantic(tt,"TIME",j),Sr.setUniformOfSemantic(tt,"VIEWPORT_SIZE",P),_t&&_t.setLightUniforms(Sr,Qe.lightGroup,this)):Sr=Et,(Dr||l.isMaterialChanged(Qe,Pt,dr,xt))&&(dr.depthTest!==Vt&&(dr.depthTest?tt.enable(tt.DEPTH_TEST):tt.disable(tt.DEPTH_TEST),Vt=dr.depthTest),dr.depthMask!==kt&&(tt.depthMask(dr.depthMask),kt=dr.depthMask),dr.transparent!==ce&&(dr.transparent?tt.enable(tt.BLEND):tt.disable(tt.BLEND),ce=dr.transparent),dr.transparent&&(dr.blend?dr.blend(tt):(tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD),tt.blendFuncSeparate(tt.SRC_ALPHA,tt.ONE_MINUS_SRC_ALPHA,tt.ONE,tt.ONE_MINUS_SRC_ALPHA))),Ae=this._bindMaterial(Qe,dr,Sr,Pt||null,xt||null,Et||null,l.getUniform),xt=dr);var Tn=Lr.matrixSemanticKeys;if(sr)for(var un=0;un<Tn.length;un++){var En=Tn[un],Cn=Lr.matrixSemantics[En],nn=br[En];if(Cn.isTranspose){var $r=br[Cn.semanticNoTranspose];vr.transpose(nn,$r)}Sr.setUniform(tt,Cn.type,Cn.symbol,nn)}Qe.cullFace!==Jt&&(Jt=Qe.cullFace,tt.cullFace(Jt)),Qe.frontFace!==$t&&($t=Qe.frontFace,tt.frontFace($t)),Qe.culling!==ee&&(ee=Qe.culling,ee?tt.enable(tt.CULL_FACE):tt.disable(tt.CULL_FACE)),this._updateSkeleton(Qe,Sr,Ae),ln&&(we=this._bindVAO(Ge,Lr,$e,Sr)),this._renderObject(Qe,we,Sr),l.afterRender(this,Qe),Qe.afterRender&&Qe.afterRender(this),Et=Sr,Pt=Qe}}Ge&&Ge.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,t,i,l)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,i,l){var f=this.gl,h=t.skeleton;if(h)if(h.update(),t.joints.length>this.getMaxJointNumber()){var p=h.getSubSkinMatricesTexture(t.__uid__,t.joints);i.useTextureSlot(this,p,l),i.setUniform(f,"1i","skinMatricesTexture",l),i.setUniform(f,"1f","skinMatricesTextureSize",p.width)}else{var y=h.getSubSkinMatrices(t.__uid__,t.joints);i.setUniformOfSemantic(f,"SKIN_MATRIX",y)}},_renderObject:function(t,i,l){var f=this.gl,h=t.geometry,p=t.mode;p==null&&(p=4);var y=null,_=t.isInstancedMesh&&t.isInstancedMesh();if(_&&(y=this.getGLExtension("ANGLE_instanced_arrays"),!y)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var S;if(_&&(S=this._bindInstancedAttributes(t,l,y)),i.indicesBuffer){var P=this.getGLExtension("OES_element_index_uint"),j=P&&h.indices instanceof Uint32Array,tt=j?f.UNSIGNED_INT:f.UNSIGNED_SHORT;_?y.drawElementsInstancedANGLE(p,i.indicesBuffer.count,tt,0,t.getInstanceCount()):f.drawElements(p,i.indicesBuffer.count,tt,0)}else _?y.drawArraysInstancedANGLE(p,0,h.vertexCount,t.getInstanceCount()):f.drawArrays(p,0,h.vertexCount);if(_)for(var _t=0;_t<S.length;_t++)f.disableVertexAttribArray(S[_t])},_bindInstancedAttributes:function(t,i,l){for(var f=this.gl,h=t.getInstancedAttributesBuffers(this),p=[],y=0;y<h.length;y++){var _=h[y],S=i.getAttribLocation(f,_.symbol);if(!(S<0)){var P=fo[_.type]||f.FLOAT;f.enableVertexAttribArray(S),f.bindBuffer(f.ARRAY_BUFFER,_.buffer),f.vertexAttribPointer(S,_.size,P,!1,0,0),l.vertexAttribDivisorANGLE(S,_.divisor),p.push(S)}}return p},_bindMaterial:function(t,i,l,f,h,p,y){for(var _=this.gl,S=p===l,P=l.currentTextureSlot(),j=i.getEnabledUniforms(),tt=i.getTextureUniforms(),_t=this._placeholderTexture,xt=0;xt<tt.length;xt++){var Et=tt[xt],Pt=y(t,i,Et),Vt=i.uniforms[Et].type;if(Vt==="t"&&Pt)Pt.__slot=-1;else if(Vt==="tv")for(var kt=0;kt<Pt.length;kt++)Pt[kt]&&(Pt[kt].__slot=-1)}_t.__slot=-1;for(var xt=0;xt<j.length;xt++){var Et=j[xt],ee=i.uniforms[Et],Pt=y(t,i,Et),Vt=ee.type,Jt=Vt==="t";if(Jt&&(!Pt||!Pt.isRenderable())&&(Pt=_t),h&&S){var $t=y(f,h,Et);if(Jt&&(!$t||!$t.isRenderable())&&($t=_t),$t===Pt){if(Jt)l.takeCurrentTextureSlot(this,null);else if(Vt==="tv"&&Pt)for(var kt=0;kt<Pt.length;kt++)l.takeCurrentTextureSlot(this,null);continue}}if(Pt!=null)if(Jt)if(Pt.__slot<0){var ce=l.currentTextureSlot(),de=l.setUniform(_,"1i",Et,ce);de&&(l.takeCurrentTextureSlot(this,Pt),Pt.__slot=ce)}else l.setUniform(_,"1i",Et,Pt.__slot);else if(Array.isArray(Pt)){if(Pt.length===0)continue;if(Vt==="tv"){if(!l.hasUniform(Et))continue;for(var we=[],kt=0;kt<Pt.length;kt++){var Ae=Pt[kt];if(Ae.__slot<0){var ce=l.currentTextureSlot();we.push(ce),l.takeCurrentTextureSlot(this,Ae),Ae.__slot=ce}else we.push(Ae.__slot)}l.setUniform(_,"1iv",Et,we)}else l.setUniform(_,ee.type,Et,Pt)}else l.setUniform(_,ee.type,Et,Pt)}var Ge=l.currentTextureSlot();return l.resetTextureSlot(P),Ge},_bindVAO:function(t,i,l,f){var h=!l.dynamic,p=this.gl,y=this.__uid__+"-"+f.__uid__,_=l.__vaoCache[y];if(!_){var S=l.getBufferChunks(this);if(!S||!S.length)return;for(var P=S[0],j=P.attributeBuffers,$t=P.indicesBuffer,Jt=[],tt=[],_t=0;_t<j.length;_t++){var xt=j[_t],Et=xt.name,Pt=xt.semantic,Vt;if(Pt){var kt=i.attributeSemantics[Pt];Vt=kt&&kt.symbol}else Vt=Et;Vt&&f.attributes[Vt]&&(Jt.push(xt),tt.push(Vt))}_=new cu(Jt,tt,$t),h&&(l.__vaoCache[y]=_)}var ee=!0;t&&h&&(_.vao==null?_.vao=t.createVertexArrayOES():ee=!1,t.bindVertexArrayOES(_.vao));var Jt=_.availableAttributes,$t=_.indicesBuffer;if(ee){for(var ce=f.enableAttributes(this,_.availableAttributeSymbols,t&&h&&_),_t=0;_t<Jt.length;_t++){var de=ce[_t];if(de!==-1){var xt=Jt[_t],we=xt.buffer,Ae=xt.size,Ge=fo[xt.type]||p.FLOAT;p.bindBuffer(p.ARRAY_BUFFER,we),p.vertexAttribPointer(de,Ae,Ge,!1,0,0)}}l.isUseIndices()&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,$t.buffer)}return _},renderPreZ:function(t,i,l){var f=this.gl,h=this._prezMaterial||new Fe({shader:new pr(pr.source("clay.prez.vertex"),pr.source("clay.prez.fragment"))});this._prezMaterial=h,f.colorMask(!1,!1,!1,!1),f.depthMask(!0),this.renderPass(t,l,{ifRender:function(p){return!p.ignorePreZ},isMaterialChanged:function(p,y){var _=p.material,S=y.material;return _.get("diffuseMap")!==S.get("diffuseMap")||(_.get("alphaCutoff")||0)!==(S.get("alphaCutoff")||0)},getUniform:function(p,y,_){if(_==="alphaMap")return p.material.get("diffuseMap");if(_==="alphaCutoff"){if(p.material.isDefined("fragment","ALPHA_TEST")&&p.material.get("diffuseMap")){var S=p.material.get("alphaCutoff");return S||0}return 0}else return _==="uvRepeat"?p.material.get("uvRepeat"):_==="uvOffset"?p.material.get("uvOffset"):y.get(_)},getMaterial:function(){return h},sort:this.opaqueSortCompare}),f.colorMask(!0,!0,!0,!0),f.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,i,l){t.getParent()&&t.getParent().remove(t);var f={};t.traverse(function(h){var p=h.material;if(h.geometry&&i&&h.geometry.dispose(this),l&&p&&!f[p.__uid__]){for(var y=p.getTextureUniforms(),_=0;_<y.length;_++){var S=y[_],P=p.uniforms[S].value,j=p.uniforms[S].type;if(!!P){if(j==="t")P.dispose&&P.dispose(this);else if(j==="tv")for(var tt=0;tt<P.length;tt++)P[tt]&&P[tt].dispose&&P[tt].dispose(this)}}f[p.__uid__]=!0}h.dispose&&h.dispose(this)},this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,i,l){l||(l=new Me),i=this._height-i;var f=this.viewport,h=l.array;return h[0]=(t-f.x)/f.width,h[0]=h[0]*2-1,h[1]=(i-f.y)/f.height,h[1]=h[1]*2-1,l}});_r.opaqueSortCompare=_r.prototype.opaqueSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.renderOrder-i.renderOrder},_r.transparentSortCompare=_r.prototype.transparentSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__depth===i.__depth?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.__depth-i.__depth:t.renderOrder-i.renderOrder};var br={IDENTITY:An(),WORLD:An(),VIEW:An(),PROJECTION:An(),WORLDVIEW:An(),VIEWPROJECTION:An(),WORLDVIEWPROJECTION:An(),WORLDINVERSE:An(),VIEWINVERSE:An(),PROJECTIONINVERSE:An(),WORLDVIEWINVERSE:An(),VIEWPROJECTIONINVERSE:An(),WORLDVIEWPROJECTIONINVERSE:An(),WORLDTRANSPOSE:An(),VIEWTRANSPOSE:An(),PROJECTIONTRANSPOSE:An(),WORLDVIEWTRANSPOSE:An(),VIEWPROJECTIONTRANSPOSE:An(),WORLDVIEWPROJECTIONTRANSPOSE:An(),WORLDINVERSETRANSPOSE:An(),VIEWINVERSETRANSPOSE:An(),PROJECTIONINVERSETRANSPOSE:An(),WORLDVIEWINVERSETRANSPOSE:An(),VIEWPROJECTIONINVERSETRANSPOSE:An(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:An()};_r.COLOR_BUFFER_BIT=A.COLOR_BUFFER_BIT,_r.DEPTH_BUFFER_BIT=A.DEPTH_BUFFER_BIT,_r.STENCIL_BUFFER_BIT=A.STENCIL_BUFFER_BIT;var ar=_r,Nr=function(t,i,l){t=t||0,i=i||0,l=l||0,this.array=Oe.fromValues(t,i,l),this._dirty=!0};Nr.prototype={constructor:Nr,add:function(t){return Oe.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new Nr(this.x,this.y,this.z)},copy:function(t){return Oe.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return Oe.cross(this.array,t.array,i.array),this._dirty=!0,this},dist:function(t){return Oe.dist(this.array,t.array)},distance:function(t){return Oe.distance(this.array,t.array)},div:function(t){return Oe.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Oe.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Oe.dot(this.array,t.array)},len:function(){return Oe.len(this.array)},length:function(){return Oe.length(this.array)},lerp:function(t,i,l){return Oe.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return Oe.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Oe.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Oe.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Oe.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Oe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Oe.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Oe.random(this.array,t),this._dirty=!0,this},scale:function(t){return Oe.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return Oe.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return Oe.sqrDist(this.array,t.array)},squaredDistance:function(t){return Oe.squaredDistance(this.array,t.array)},sqrLen:function(){return Oe.sqrLen(this.array)},squaredLength:function(){return Oe.squaredLength(this.array)},sub:function(t){return Oe.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Oe.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return Oe.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Oe.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return Oe.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var i=this.array;if(t=t.array,t[15]===0){var l=-1/i[2];i[0]=t[0]*i[0]*l,i[1]=t[5]*i[1]*l,i[2]=(t[10]*i[2]+t[14])*l}else i[0]=t[0]*i[0]+t[12],i[1]=t[5]*i[1]+t[13],i[2]=t[10]*i[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,i){Nr.eulerFromQuat(this,t,i)},eulerFromMat3:function(t,i){Nr.eulerFromMat3(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var zn=Object.defineProperty;if(zn){var Bo=Nr.prototype;zn(Bo,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),zn(Bo,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),zn(Bo,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}Nr.add=function(t,i,l){return Oe.add(t.array,i.array,l.array),t._dirty=!0,t},Nr.set=function(t,i,l,f){Oe.set(t.array,i,l,f),t._dirty=!0},Nr.copy=function(t,i){return Oe.copy(t.array,i.array),t._dirty=!0,t},Nr.cross=function(t,i,l){return Oe.cross(t.array,i.array,l.array),t._dirty=!0,t},Nr.dist=function(t,i){return Oe.distance(t.array,i.array)},Nr.distance=Nr.dist,Nr.div=function(t,i,l){return Oe.divide(t.array,i.array,l.array),t._dirty=!0,t},Nr.divide=Nr.div,Nr.dot=function(t,i){return Oe.dot(t.array,i.array)},Nr.len=function(t){return Oe.length(t.array)},Nr.lerp=function(t,i,l,f){return Oe.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},Nr.min=function(t,i,l){return Oe.min(t.array,i.array,l.array),t._dirty=!0,t},Nr.max=function(t,i,l){return Oe.max(t.array,i.array,l.array),t._dirty=!0,t},Nr.mul=function(t,i,l){return Oe.multiply(t.array,i.array,l.array),t._dirty=!0,t},Nr.multiply=Nr.mul,Nr.negate=function(t,i){return Oe.negate(t.array,i.array),t._dirty=!0,t},Nr.normalize=function(t,i){return Oe.normalize(t.array,i.array),t._dirty=!0,t},Nr.random=function(t,i){return Oe.random(t.array,i),t._dirty=!0,t},Nr.scale=function(t,i,l){return Oe.scale(t.array,i.array,l),t._dirty=!0,t},Nr.scaleAndAdd=function(t,i,l,f){return Oe.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},Nr.sqrDist=function(t,i){return Oe.sqrDist(t.array,i.array)},Nr.squaredDistance=Nr.sqrDist,Nr.sqrLen=function(t){return Oe.sqrLen(t.array)},Nr.squaredLength=Nr.sqrLen,Nr.sub=function(t,i,l){return Oe.subtract(t.array,i.array,l.array),t._dirty=!0,t},Nr.subtract=Nr.sub,Nr.transformMat3=function(t,i,l){return Oe.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},Nr.transformMat4=function(t,i,l){return Oe.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},Nr.transformQuat=function(t,i,l){return Oe.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};function xr(t,i,l){return t<i?i:t>l?l:t}var hn=Math.atan2,Ni=Math.asin,oa=Math.abs;Nr.eulerFromQuat=function(t,i,l){t._dirty=!0,i=i.array;var f=t.array,h=i[0],p=i[1],y=i[2],_=i[3],S=h*h,P=p*p,j=y*y,tt=_*_,l=(l||"XYZ").toUpperCase();switch(l){case"XYZ":f[0]=hn(2*(h*_-p*y),tt-S-P+j),f[1]=Ni(xr(2*(h*y+p*_),-1,1)),f[2]=hn(2*(y*_-h*p),tt+S-P-j);break;case"YXZ":f[0]=Ni(xr(2*(h*_-p*y),-1,1)),f[1]=hn(2*(h*y+p*_),tt-S-P+j),f[2]=hn(2*(h*p+y*_),tt-S+P-j);break;case"ZXY":f[0]=Ni(xr(2*(h*_+p*y),-1,1)),f[1]=hn(2*(p*_-y*h),tt-S-P+j),f[2]=hn(2*(y*_-h*p),tt-S+P-j);break;case"ZYX":f[0]=hn(2*(h*_+y*p),tt-S-P+j),f[1]=Ni(xr(2*(p*_-h*y),-1,1)),f[2]=hn(2*(h*p+y*_),tt+S-P-j);break;case"YZX":f[0]=hn(2*(h*_-y*p),tt-S+P-j),f[1]=hn(2*(p*_-h*y),tt+S-P-j),f[2]=Ni(xr(2*(h*p+y*_),-1,1));break;case"XZY":f[0]=hn(2*(h*_+p*y),tt-S+P-j),f[1]=hn(2*(h*y+p*_),tt+S-P-j),f[2]=Ni(xr(2*(y*_-h*p),-1,1));break;default:console.warn("Unkown order: "+l)}return t},Nr.eulerFromMat3=function(t,i,l){var f=i.array,h=f[0],p=f[3],y=f[6],_=f[1],S=f[4],P=f[7],j=f[2],tt=f[5],_t=f[8],xt=t.array,l=(l||"XYZ").toUpperCase();switch(l){case"XYZ":xt[1]=Ni(xr(y,-1,1)),oa(y)<.99999?(xt[0]=hn(-P,_t),xt[2]=hn(-p,h)):(xt[0]=hn(tt,S),xt[2]=0);break;case"YXZ":xt[0]=Ni(-xr(P,-1,1)),oa(P)<.99999?(xt[1]=hn(y,_t),xt[2]=hn(_,S)):(xt[1]=hn(-j,h),xt[2]=0);break;case"ZXY":xt[0]=Ni(xr(tt,-1,1)),oa(tt)<.99999?(xt[1]=hn(-j,_t),xt[2]=hn(-p,S)):(xt[1]=0,xt[2]=hn(_,h));break;case"ZYX":xt[1]=Ni(-xr(j,-1,1)),oa(j)<.99999?(xt[0]=hn(tt,_t),xt[2]=hn(_,h)):(xt[0]=0,xt[2]=hn(-p,S));break;case"YZX":xt[2]=Ni(xr(_,-1,1)),oa(_)<.99999?(xt[0]=hn(-P,S),xt[1]=hn(-j,h)):(xt[0]=0,xt[1]=hn(y,_t));break;case"XZY":xt[2]=Ni(-xr(p,-1,1)),oa(p)<.99999?(xt[0]=hn(tt,S),xt[1]=hn(y,h)):(xt[0]=hn(-P,_t),xt[1]=0);break;default:console.warn("Unkown order: "+l)}return t._dirty=!0,t},Object.defineProperties(Nr,{POSITIVE_X:{get:function(){return new Nr(1,0,0)}},NEGATIVE_X:{get:function(){return new Nr(-1,0,0)}},POSITIVE_Y:{get:function(){return new Nr(0,1,0)}},NEGATIVE_Y:{get:function(){return new Nr(0,-1,0)}},POSITIVE_Z:{get:function(){return new Nr(0,0,1)}},NEGATIVE_Z:{get:function(){return new Nr(0,0,-1)}},UP:{get:function(){return new Nr(0,1,0)}},ZERO:{get:function(){return new Nr}}});var hr=Nr,bs=1e-5,Ya=function(t,i){this.origin=t||new hr,this.direction=i||new hr};Ya.prototype={constructor:Ya,intersectPlane:function(t,i){var l=t.normal.array,f=t.distance,h=this.origin.array,p=this.direction.array,y=Oe.dot(l,p);if(y===0)return null;i||(i=new hr);var _=(Oe.dot(l,h)-f)/y;return Oe.scaleAndAdd(i.array,h,p,-_),i._dirty=!0,i},mirrorAgainstPlane:function(t){var i=Oe.dot(t.normal.array,this.direction.array);Oe.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,-i*2),this.direction._dirty=!0},distanceToPoint:function(){var t=Oe.create();return function(i){Oe.sub(t,i,this.origin.array);var l=Oe.dot(t,this.direction.array);if(l<0)return Oe.distance(this.origin.array,i);var f=Oe.lenSquared(t);return Math.sqrt(f-l*l)}}(),intersectSphere:function(){var t=Oe.create();return function(i,l,f){var h=this.origin.array,p=this.direction.array;i=i.array,Oe.sub(t,i,h);var y=Oe.dot(t,p),_=Oe.squaredLength(t),S=_-y*y,P=l*l;if(!(S>P)){var j=Math.sqrt(P-S),tt=y-j,_t=y+j;return f||(f=new hr),tt<0?_t<0?null:(Oe.scaleAndAdd(f.array,h,p,_t),f):(Oe.scaleAndAdd(f.array,h,p,tt),f)}}}(),intersectBoundingBox:function(t,i){var l=this.direction.array,f=this.origin.array,h=t.min.array,p=t.max.array,y=1/l[0],_=1/l[1],S=1/l[2],P,j,tt,_t,xt,Et;if(y>=0?(P=(h[0]-f[0])*y,j=(p[0]-f[0])*y):(j=(h[0]-f[0])*y,P=(p[0]-f[0])*y),_>=0?(tt=(h[1]-f[1])*_,_t=(p[1]-f[1])*_):(_t=(h[1]-f[1])*_,tt=(p[1]-f[1])*_),P>_t||tt>j||((tt>P||P!==P)&&(P=tt),(_t<j||j!==j)&&(j=_t),S>=0?(xt=(h[2]-f[2])*S,Et=(p[2]-f[2])*S):(Et=(h[2]-f[2])*S,xt=(p[2]-f[2])*S),P>Et||xt>j)||((xt>P||P!==P)&&(P=xt),(Et<j||j!==j)&&(j=Et),j<0))return null;var Pt=P>=0?P:j;return i||(i=new hr),Oe.scaleAndAdd(i.array,f,l,Pt),i},intersectTriangle:function(){var t=Oe.create(),i=Oe.create(),l=Oe.create(),f=Oe.create();return function(h,p,y,_,S,P){var j=this.direction.array,tt=this.origin.array;h=h.array,p=p.array,y=y.array,Oe.sub(t,p,h),Oe.sub(i,y,h),Oe.cross(f,i,j);var _t=Oe.dot(t,f);if(_){if(_t>-bs)return null}else if(_t>-bs&&_t<bs)return null;Oe.sub(l,tt,h);var xt=Oe.dot(f,l)/_t;if(xt<0||xt>1)return null;Oe.cross(f,t,l);var Et=Oe.dot(j,f)/_t;if(Et<0||Et>1||xt+Et>1)return null;Oe.cross(f,t,i);var Pt=-Oe.dot(l,f)/_t;return Pt<0?null:(S||(S=new hr),P&&hr.set(P,1-xt-Et,xt,Et),Oe.scaleAndAdd(S.array,tt,j,Pt),S)}}(),applyTransform:function(t){hr.add(this.direction,this.direction,this.origin),hr.transformMat4(this.origin,this.origin,t),hr.transformMat4(this.direction,this.direction,t),hr.sub(this.direction,this.direction,this.origin),hr.normalize(this.direction,this.direction)},copy:function(t){hr.copy(this.origin,t.origin),hr.copy(this.direction,t.direction)},clone:function(){var t=new Ya;return t.copy(this),t}};var Fo=Ya,Wr={};Wr.create=function(){var t=new Tt(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Wr.clone=function(t){var i=new Tt(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},Wr.fromValues=function(t,i,l,f){var h=new Tt(4);return h[0]=t,h[1]=i,h[2]=l,h[3]=f,h},Wr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},Wr.set=function(t,i,l,f,h){return t[0]=i,t[1]=l,t[2]=f,t[3]=h,t},Wr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t[3]=i[3]+l[3],t},Wr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t[3]=i[3]-l[3],t},Wr.sub=Wr.subtract,Wr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t[3]=i[3]*l[3],t},Wr.mul=Wr.multiply,Wr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t[3]=i[3]/l[3],t},Wr.div=Wr.divide,Wr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t[3]=Math.min(i[3],l[3]),t},Wr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t[3]=Math.max(i[3],l[3]),t},Wr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t[3]=i[3]*l,t},Wr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t[3]=i[3]+l[3]*f,t},Wr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],h=i[2]-t[2],p=i[3]-t[3];return Math.sqrt(l*l+f*f+h*h+p*p)},Wr.dist=Wr.distance,Wr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],h=i[2]-t[2],p=i[3]-t[3];return l*l+f*f+h*h+p*p},Wr.sqrDist=Wr.squaredDistance,Wr.length=function(t){var i=t[0],l=t[1],f=t[2],h=t[3];return Math.sqrt(i*i+l*l+f*f+h*h)},Wr.len=Wr.length,Wr.squaredLength=function(t){var i=t[0],l=t[1],f=t[2],h=t[3];return i*i+l*l+f*f+h*h},Wr.sqrLen=Wr.squaredLength,Wr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=-i[3],t},Wr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t[3]=1/i[3],t},Wr.normalize=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=l*l+f*f+h*h+p*p;return y>0&&(y=1/Math.sqrt(y),t[0]=i[0]*y,t[1]=i[1]*y,t[2]=i[2]*y,t[3]=i[3]*y),t},Wr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]},Wr.lerp=function(t,i,l,f){var h=i[0],p=i[1],y=i[2],_=i[3];return t[0]=h+f*(l[0]-h),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t[3]=_+f*(l[3]-_),t},Wr.random=function(t,i){return i=i||1,t[0]=Mt(),t[1]=Mt(),t[2]=Mt(),t[3]=Mt(),Wr.normalize(t,t),Wr.scale(t,t,i),t},Wr.transformMat4=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3];return t[0]=l[0]*f+l[4]*h+l[8]*p+l[12]*y,t[1]=l[1]*f+l[5]*h+l[9]*p+l[13]*y,t[2]=l[2]*f+l[6]*h+l[10]*p+l[14]*y,t[3]=l[3]*f+l[7]*h+l[11]*p+l[15]*y,t},Wr.transformQuat=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=l[0],_=l[1],S=l[2],P=l[3],j=P*f+_*p-S*h,tt=P*h+S*f-y*p,_t=P*p+y*h-_*f,xt=-y*f-_*h-S*p;return t[0]=j*P+xt*-y+tt*-S-_t*-_,t[1]=tt*P+xt*-_+_t*-y-j*-S,t[2]=_t*P+xt*-S+j*-_-tt*-y,t},Wr.forEach=function(){var t=Wr.create();return function(i,l,f,h,p,y){var _,S;for(l||(l=4),f||(f=0),h?S=Math.min(h*l+f,i.length):S=i.length,_=f;_<S;_+=l)t[0]=i[_],t[1]=i[_+1],t[2]=i[_+2],t[3]=i[_+3],p(t,t,y),i[_]=t[0],i[_+1]=t[1],i[_+2]=t[2],i[_+3]=t[3];return i}}();var mr=Wr,Un={};Un.create=function(){var t=new Tt(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Un.fromMat4=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[4],t[4]=i[5],t[5]=i[6],t[6]=i[8],t[7]=i[9],t[8]=i[10],t},Un.clone=function(t){var i=new Tt(9);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i},Un.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},Un.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Un.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],h=i[5];t[1]=i[3],t[2]=i[6],t[3]=l,t[5]=i[7],t[6]=f,t[7]=h}else t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8];return t},Un.invert=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=i[6],P=i[7],j=i[8],tt=j*y-_*P,_t=-j*p+_*S,xt=P*p-y*S,Et=l*tt+f*_t+h*xt;return Et?(Et=1/Et,t[0]=tt*Et,t[1]=(-j*f+h*P)*Et,t[2]=(_*f-h*y)*Et,t[3]=_t*Et,t[4]=(j*l-h*S)*Et,t[5]=(-_*l+h*p)*Et,t[6]=xt*Et,t[7]=(-P*l+f*S)*Et,t[8]=(y*l-f*p)*Et,t):null},Un.adjoint=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=i[6],P=i[7],j=i[8];return t[0]=y*j-_*P,t[1]=h*P-f*j,t[2]=f*_-h*y,t[3]=_*S-p*j,t[4]=l*j-h*S,t[5]=h*p-l*_,t[6]=p*P-y*S,t[7]=f*S-l*P,t[8]=l*y-f*p,t},Un.determinant=function(t){var i=t[0],l=t[1],f=t[2],h=t[3],p=t[4],y=t[5],_=t[6],S=t[7],P=t[8];return i*(P*p-y*S)+l*(-P*h+y*_)+f*(S*h-p*_)},Un.multiply=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=i[6],j=i[7],tt=i[8],_t=l[0],xt=l[1],Et=l[2],Pt=l[3],Vt=l[4],kt=l[5],ee=l[6],Jt=l[7],$t=l[8];return t[0]=_t*f+xt*y+Et*P,t[1]=_t*h+xt*_+Et*j,t[2]=_t*p+xt*S+Et*tt,t[3]=Pt*f+Vt*y+kt*P,t[4]=Pt*h+Vt*_+kt*j,t[5]=Pt*p+Vt*S+kt*tt,t[6]=ee*f+Jt*y+$t*P,t[7]=ee*h+Jt*_+$t*j,t[8]=ee*p+Jt*S+$t*tt,t},Un.mul=Un.multiply,Un.translate=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=i[6],j=i[7],tt=i[8],_t=l[0],xt=l[1];return t[0]=f,t[1]=h,t[2]=p,t[3]=y,t[4]=_,t[5]=S,t[6]=_t*f+xt*y+P,t[7]=_t*h+xt*_+j,t[8]=_t*p+xt*S+tt,t},Un.rotate=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=i[6],j=i[7],tt=i[8],_t=Math.sin(l),xt=Math.cos(l);return t[0]=xt*f+_t*y,t[1]=xt*h+_t*_,t[2]=xt*p+_t*S,t[3]=xt*y-_t*f,t[4]=xt*_-_t*h,t[5]=xt*S-_t*p,t[6]=P,t[7]=j,t[8]=tt,t},Un.scale=function(t,i,l){var f=l[0],h=l[1];return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=h*i[3],t[4]=h*i[4],t[5]=h*i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},Un.fromMat2d=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=0,t[3]=i[2],t[4]=i[3],t[5]=0,t[6]=i[4],t[7]=i[5],t[8]=1,t},Un.fromQuat=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=l+l,_=f+f,S=h+h,P=l*y,j=f*y,tt=f*_,_t=h*y,xt=h*_,Et=h*S,Pt=p*y,Vt=p*_,kt=p*S;return t[0]=1-tt-Et,t[3]=j-kt,t[6]=_t+Vt,t[1]=j+kt,t[4]=1-P-Et,t[7]=xt-Pt,t[2]=_t-Vt,t[5]=xt+Pt,t[8]=1-P-tt,t},Un.normalFromMat4=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=i[6],P=i[7],j=i[8],tt=i[9],_t=i[10],xt=i[11],Et=i[12],Pt=i[13],Vt=i[14],kt=i[15],ee=l*_-f*y,Jt=l*S-h*y,$t=l*P-p*y,ce=f*S-h*_,de=f*P-p*_,we=h*P-p*S,Ae=j*Pt-tt*Et,Ge=j*Vt-_t*Et,rr=j*kt-xt*Et,Qe=tt*Vt-_t*Pt,sr=tt*kt-xt*Pt,fr=_t*kt-xt*Vt,$e=ee*fr-Jt*sr+$t*Qe+ce*rr-de*Ge+we*Ae;return $e?($e=1/$e,t[0]=(_*fr-S*sr+P*Qe)*$e,t[1]=(S*rr-y*fr-P*Ge)*$e,t[2]=(y*sr-_*rr+P*Ae)*$e,t[3]=(h*sr-f*fr-p*Qe)*$e,t[4]=(l*fr-h*rr+p*Ge)*$e,t[5]=(f*rr-l*sr-p*Ae)*$e,t[6]=(Pt*we-Vt*de+kt*ce)*$e,t[7]=(Vt*$t-Et*we-kt*Jt)*$e,t[8]=(Et*de-Pt*$t+kt*ee)*$e,t):null},Un.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var qr=Un,an={};an.create=function(){var t=new Tt(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},an.rotationTo=function(){var t=Oe.create(),i=Oe.fromValues(1,0,0),l=Oe.fromValues(0,1,0);return function(f,h,p){var y=Oe.dot(h,p);return y<-.999999?(Oe.cross(t,i,h),Oe.length(t)<1e-6&&Oe.cross(t,l,h),Oe.normalize(t,t),an.setAxisAngle(f,t,Math.PI),f):y>.999999?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(Oe.cross(t,h,p),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=1+y,an.normalize(f,f))}}(),an.setAxes=function(){var t=qr.create();return function(i,l,f,h){return t[0]=f[0],t[3]=f[1],t[6]=f[2],t[1]=h[0],t[4]=h[1],t[7]=h[2],t[2]=-l[0],t[5]=-l[1],t[8]=-l[2],an.normalize(i,an.fromMat3(i,t))}}(),an.clone=mr.clone,an.fromValues=mr.fromValues,an.copy=mr.copy,an.set=mr.set,an.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},an.setAxisAngle=function(t,i,l){l=l*.5;var f=Math.sin(l);return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=Math.cos(l),t},an.add=mr.add,an.multiply=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=l[0],S=l[1],P=l[2],j=l[3];return t[0]=f*j+y*_+h*P-p*S,t[1]=h*j+y*S+p*_-f*P,t[2]=p*j+y*P+f*S-h*_,t[3]=y*j-f*_-h*S-p*P,t},an.mul=an.multiply,an.scale=mr.scale,an.rotateX=function(t,i,l){l*=.5;var f=i[0],h=i[1],p=i[2],y=i[3],_=Math.sin(l),S=Math.cos(l);return t[0]=f*S+y*_,t[1]=h*S+p*_,t[2]=p*S-h*_,t[3]=y*S-f*_,t},an.rotateY=function(t,i,l){l*=.5;var f=i[0],h=i[1],p=i[2],y=i[3],_=Math.sin(l),S=Math.cos(l);return t[0]=f*S-p*_,t[1]=h*S+y*_,t[2]=p*S+f*_,t[3]=y*S-h*_,t},an.rotateZ=function(t,i,l){l*=.5;var f=i[0],h=i[1],p=i[2],y=i[3],_=Math.sin(l),S=Math.cos(l);return t[0]=f*S+h*_,t[1]=h*S-f*_,t[2]=p*S+y*_,t[3]=y*S-p*_,t},an.calculateW=function(t,i){var l=i[0],f=i[1],h=i[2];return t[0]=l,t[1]=f,t[2]=h,t[3]=Math.sqrt(Math.abs(1-l*l-f*f-h*h)),t},an.dot=mr.dot,an.lerp=mr.lerp,an.slerp=function(t,i,l,f){var h=i[0],p=i[1],y=i[2],_=i[3],S=l[0],P=l[1],j=l[2],tt=l[3],_t,xt,Et,Pt,Vt;return xt=h*S+p*P+y*j+_*tt,xt<0&&(xt=-xt,S=-S,P=-P,j=-j,tt=-tt),1-xt>1e-6?(_t=Math.acos(xt),Et=Math.sin(_t),Pt=Math.sin((1-f)*_t)/Et,Vt=Math.sin(f*_t)/Et):(Pt=1-f,Vt=f),t[0]=Pt*h+Vt*S,t[1]=Pt*p+Vt*P,t[2]=Pt*y+Vt*j,t[3]=Pt*_+Vt*tt,t},an.invert=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=l*l+f*f+h*h+p*p,_=y?1/y:0;return t[0]=-l*_,t[1]=-f*_,t[2]=-h*_,t[3]=p*_,t},an.conjugate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=i[3],t},an.length=mr.length,an.len=an.length,an.squaredLength=mr.squaredLength,an.sqrLen=an.squaredLength,an.normalize=mr.normalize,an.fromMat3=function(t,i){var l=i[0]+i[4]+i[8],f;if(l>0)f=Math.sqrt(l+1),t[3]=.5*f,f=.5/f,t[0]=(i[5]-i[7])*f,t[1]=(i[6]-i[2])*f,t[2]=(i[1]-i[3])*f;else{var h=0;i[4]>i[0]&&(h=1),i[8]>i[h*3+h]&&(h=2);var p=(h+1)%3,y=(h+2)%3;f=Math.sqrt(i[h*3+h]-i[p*3+p]-i[y*3+y]+1),t[h]=.5*f,f=.5/f,t[3]=(i[p*3+y]-i[y*3+p])*f,t[p]=(i[p*3+h]+i[h*3+p])*f,t[y]=(i[y*3+h]+i[h*3+y])*f}return t};var wr=an,dn=function(){this._axisX=new hr,this._axisY=new hr,this._axisZ=new hr,this.array=vr.create(),this._dirty=!0};dn.prototype={constructor:dn,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return vr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new dn().copy(this)},copy:function(t){return vr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return vr.determinant(this.array)},fromQuat:function(t){return vr.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,i){return vr.fromRotationTranslation(this.array,t.array,i.array),this._dirty=!0,this},fromMat2d:function(t){return dn.fromMat2d(this,t),this},frustum:function(t,i,l,f,h,p){return vr.frustum(this.array,t,i,l,f,h,p),this._dirty=!0,this},identity:function(){return vr.identity(this.array),this._dirty=!0,this},invert:function(){return vr.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,i,l){return vr.lookAt(this.array,t.array,i.array,l.array),this._dirty=!0,this},mul:function(t){return vr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return vr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return vr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return vr.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,i,l,f,h,p){return vr.ortho(this.array,t,i,l,f,h,p),this._dirty=!0,this},perspective:function(t,i,l,f){return vr.perspective(this.array,t,i,l,f),this._dirty=!0,this},rotate:function(t,i){return vr.rotate(this.array,this.array,t,i.array),this._dirty=!0,this},rotateX:function(t){return vr.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return vr.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return vr.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return vr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return vr.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return vr.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=Oe.create(),i=Oe.create(),l=Oe.create(),f=qr.create();return function(h,p,y){var _=this.array;Oe.set(t,_[0],_[1],_[2]),Oe.set(i,_[4],_[5],_[6]),Oe.set(l,_[8],_[9],_[10]);var S=Oe.length(t),P=Oe.length(i),j=Oe.length(l),tt=this.determinant();tt<0&&(S=-S),h&&h.set(S,P,j),y.set(_[12],_[13],_[14]),qr.fromMat4(f,_),f[0]/=S,f[1]/=S,f[2]/=S,f[3]/=P,f[4]/=P,f[5]/=P,f[6]/=j,f[7]/=j,f[8]/=j,wr.fromMat3(p.array,f),wr.normalize(p.array,p.array),p._dirty=!0,y._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var zo=Object.defineProperty;if(zo){var co=dn.prototype;zo(co,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var i=this.array;t=t.array,i[8]=t[0],i[9]=t[1],i[10]=t[2],this._dirty=!0}}),zo(co,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var i=this.array;t=t.array,i[4]=t[0],i[5]=t[1],i[6]=t[2],this._dirty=!0}}),zo(co,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var i=this.array;t=t.array,i[0]=t[0],i[1]=t[1],i[2]=t[2],this._dirty=!0}})}dn.adjoint=function(t,i){return vr.adjoint(t.array,i.array),t._dirty=!0,t},dn.copy=function(t,i){return vr.copy(t.array,i.array),t._dirty=!0,t},dn.determinant=function(t){return vr.determinant(t.array)},dn.identity=function(t){return vr.identity(t.array),t._dirty=!0,t},dn.ortho=function(t,i,l,f,h,p,y){return vr.ortho(t.array,i,l,f,h,p,y),t._dirty=!0,t},dn.perspective=function(t,i,l,f,h){return vr.perspective(t.array,i,l,f,h),t._dirty=!0,t},dn.lookAt=function(t,i,l,f){return vr.lookAt(t.array,i.array,l.array,f.array),t._dirty=!0,t},dn.invert=function(t,i){return vr.invert(t.array,i.array),t._dirty=!0,t},dn.mul=function(t,i,l){return vr.mul(t.array,i.array,l.array),t._dirty=!0,t},dn.multiply=dn.mul,dn.fromQuat=function(t,i){return vr.fromQuat(t.array,i.array),t._dirty=!0,t},dn.fromRotationTranslation=function(t,i,l){return vr.fromRotationTranslation(t.array,i.array,l.array),t._dirty=!0,t},dn.fromMat2d=function(t,i){t._dirty=!0;var i=i.array,t=t.array;return t[0]=i[0],t[4]=i[2],t[12]=i[4],t[1]=i[1],t[5]=i[3],t[13]=i[5],t},dn.rotate=function(t,i,l,f){return vr.rotate(t.array,i.array,l,f.array),t._dirty=!0,t},dn.rotateX=function(t,i,l){return vr.rotateX(t.array,i.array,l),t._dirty=!0,t},dn.rotateY=function(t,i,l){return vr.rotateY(t.array,i.array,l),t._dirty=!0,t},dn.rotateZ=function(t,i,l){return vr.rotateZ(t.array,i.array,l),t._dirty=!0,t},dn.scale=function(t,i,l){return vr.scale(t.array,i.array,l.array),t._dirty=!0,t},dn.transpose=function(t,i){return vr.transpose(t.array,i.array),t._dirty=!0,t},dn.translate=function(t,i,l){return vr.translate(t.array,i.array,l.array),t._dirty=!0,t};var Be=dn,Br=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f===void 0?1:f,this.array=wr.fromValues(t,i,l,f),this._dirty=!0};Br.prototype={constructor:Br,add:function(t){return wr.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return wr.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new Br(this.x,this.y,this.z,this.w)},conjugate:function(){return wr.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return wr.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return wr.dot(this.array,t.array)},fromMat3:function(t){return wr.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=qr.create();return function(i){return qr.fromMat4(t,i.array),qr.transpose(t,t),wr.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return wr.identity(this.array),this._dirty=!0,this},invert:function(){return wr.invert(this.array,this.array),this._dirty=!0,this},len:function(){return wr.len(this.array)},length:function(){return wr.length(this.array)},lerp:function(t,i,l){return wr.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},mul:function(t){return wr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return wr.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return wr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return wr.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return wr.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return wr.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return wr.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return wr.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,i){return wr.rotationTo(this.array,t.array,i.array),this._dirty=!0,this},setAxes:function(t,i,l){return wr.setAxes(this.array,t.array,i.array,l.array),this._dirty=!0,this},setAxisAngle:function(t,i){return wr.setAxisAngle(this.array,t.array,i),this._dirty=!0,this},slerp:function(t,i,l){return wr.slerp(this.array,t.array,i.array,l),this._dirty=!0,this},sqrLen:function(){return wr.sqrLen(this.array)},squaredLength:function(){return wr.squaredLength(this.array)},fromEuler:function(t,i){return Br.fromEuler(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ji=Object.defineProperty;if(ji){var Xi=Br.prototype;ji(Xi,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ji(Xi,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ji(Xi,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),ji(Xi,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}Br.add=function(t,i,l){return wr.add(t.array,i.array,l.array),t._dirty=!0,t},Br.set=function(t,i,l,f,h){wr.set(t.array,i,l,f,h),t._dirty=!0},Br.copy=function(t,i){return wr.copy(t.array,i.array),t._dirty=!0,t},Br.calculateW=function(t,i){return wr.calculateW(t.array,i.array),t._dirty=!0,t},Br.conjugate=function(t,i){return wr.conjugate(t.array,i.array),t._dirty=!0,t},Br.identity=function(t){return wr.identity(t.array),t._dirty=!0,t},Br.invert=function(t,i){return wr.invert(t.array,i.array),t._dirty=!0,t},Br.dot=function(t,i){return wr.dot(t.array,i.array)},Br.len=function(t){return wr.length(t.array)},Br.lerp=function(t,i,l,f){return wr.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},Br.slerp=function(t,i,l,f){return wr.slerp(t.array,i.array,l.array,f),t._dirty=!0,t},Br.mul=function(t,i,l){return wr.multiply(t.array,i.array,l.array),t._dirty=!0,t},Br.multiply=Br.mul,Br.rotateX=function(t,i,l){return wr.rotateX(t.array,i.array,l),t._dirty=!0,t},Br.rotateY=function(t,i,l){return wr.rotateY(t.array,i.array,l),t._dirty=!0,t},Br.rotateZ=function(t,i,l){return wr.rotateZ(t.array,i.array,l),t._dirty=!0,t},Br.setAxisAngle=function(t,i,l){return wr.setAxisAngle(t.array,i.array,l),t._dirty=!0,t},Br.normalize=function(t,i){return wr.normalize(t.array,i.array),t._dirty=!0,t},Br.sqrLen=function(t){return wr.sqrLen(t.array)},Br.squaredLength=Br.sqrLen,Br.fromMat3=function(t,i){return wr.fromMat3(t.array,i.array),t._dirty=!0,t},Br.setAxes=function(t,i,l,f){return wr.setAxes(t.array,i.array,l.array,f.array),t._dirty=!0,t},Br.rotationTo=function(t,i,l){return wr.rotationTo(t.array,i.array,l.array),t._dirty=!0,t},Br.fromEuler=function(t,i,l){t._dirty=!0,i=i.array;var f=t.array,h=Math.cos(i[0]/2),p=Math.cos(i[1]/2),y=Math.cos(i[2]/2),_=Math.sin(i[0]/2),S=Math.sin(i[1]/2),P=Math.sin(i[2]/2),l=(l||"XYZ").toUpperCase();switch(l){case"XYZ":f[0]=_*p*y+h*S*P,f[1]=h*S*y-_*p*P,f[2]=h*p*P+_*S*y,f[3]=h*p*y-_*S*P;break;case"YXZ":f[0]=_*p*y+h*S*P,f[1]=h*S*y-_*p*P,f[2]=h*p*P-_*S*y,f[3]=h*p*y+_*S*P;break;case"ZXY":f[0]=_*p*y-h*S*P,f[1]=h*S*y+_*p*P,f[2]=h*p*P+_*S*y,f[3]=h*p*y-_*S*P;break;case"ZYX":f[0]=_*p*y-h*S*P,f[1]=h*S*y+_*p*P,f[2]=h*p*P-_*S*y,f[3]=h*p*y+_*S*P;break;case"YZX":f[0]=_*p*y+h*S*P,f[1]=h*S*y+_*p*P,f[2]=h*p*P-_*S*y,f[3]=h*p*y-_*S*P;break;case"XZY":f[0]=_*p*y-h*S*P,f[1]=h*S*y-_*p*P,f[2]=h*p*P+_*S*y,f[3]=h*p*y+_*S*P;break}};var Ma=Br,da=Oe.set,Ss=Oe.copy,Ts=function(t,i){this.min=t||new hr(Infinity,Infinity,Infinity),this.max=i||new hr(-Infinity,-Infinity,-Infinity),this.vertices=null};Ts.prototype={constructor:Ts,updateFromVertices:function(t){if(t.length>0){var i=this.min,l=this.max,f=i.array,h=l.array;Ss(f,t[0]),Ss(h,t[0]);for(var p=1;p<t.length;p++){var y=t[p];y[0]<f[0]&&(f[0]=y[0]),y[1]<f[1]&&(f[1]=y[1]),y[2]<f[2]&&(f[2]=y[2]),y[0]>h[0]&&(h[0]=y[0]),y[1]>h[1]&&(h[1]=y[1]),y[2]>h[2]&&(h[2]=y[2])}i._dirty=!0,l._dirty=!0}},union:function(t){var i=this.min,l=this.max;return Oe.min(i.array,i.array,t.min.array),Oe.max(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersection:function(t){var i=this.min,l=this.max;return Oe.max(i.array,i.array,t.min.array),Oe.min(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersectBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,h=t.max.array;return!(i[0]>h[0]||i[1]>h[1]||i[2]>h[2]||l[0]<f[0]||l[1]<f[1]||l[2]<f[2])},containBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,h=t.max.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=h[0]&&l[1]>=h[1]&&l[2]>=h[2]},containPoint:function(t){var i=this.min.array,l=this.max.array,f=t.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=f[0]&&l[1]>=f[1]&&l[2]>=f[2]},isFinite:function(){var t=this.min.array,i=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(i[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=Oe.create(),i=Oe.create(),l=Oe.create(),f=Oe.create(),h=Oe.create(),p=Oe.create();return function(y,_){var S=y.min.array,P=y.max.array,j=_.array;return t[0]=j[0]*S[0],t[1]=j[1]*S[0],t[2]=j[2]*S[0],i[0]=j[0]*P[0],i[1]=j[1]*P[0],i[2]=j[2]*P[0],l[0]=j[4]*S[1],l[1]=j[5]*S[1],l[2]=j[6]*S[1],f[0]=j[4]*P[1],f[1]=j[5]*P[1],f[2]=j[6]*P[1],h[0]=j[8]*S[2],h[1]=j[9]*S[2],h[2]=j[10]*S[2],p[0]=j[8]*P[2],p[1]=j[9]*P[2],p[2]=j[10]*P[2],S=this.min.array,P=this.max.array,S[0]=Math.min(t[0],i[0])+Math.min(l[0],f[0])+Math.min(h[0],p[0])+j[12],S[1]=Math.min(t[1],i[1])+Math.min(l[1],f[1])+Math.min(h[1],p[1])+j[13],S[2]=Math.min(t[2],i[2])+Math.min(l[2],f[2])+Math.min(h[2],p[2])+j[14],P[0]=Math.max(t[0],i[0])+Math.max(l[0],f[0])+Math.max(h[0],p[0])+j[12],P[1]=Math.max(t[1],i[1])+Math.max(l[1],f[1])+Math.max(h[1],p[1])+j[13],P[2]=Math.max(t[2],i[2])+Math.max(l[2],f[2])+Math.max(h[2],p[2])+j[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var i=this.min.array,l=this.max.array,f=t.array,h=i[0],p=i[1],y=i[2],_=l[0],S=l[1],P=i[2],j=l[0],tt=l[1],_t=l[2];if(f[15]===1)i[0]=f[0]*h+f[12],i[1]=f[5]*p+f[13],l[2]=f[10]*y+f[14],l[0]=f[0]*j+f[12],l[1]=f[5]*tt+f[13],i[2]=f[10]*_t+f[14];else{var xt=-1/y;i[0]=f[0]*h*xt,i[1]=f[5]*p*xt,l[2]=(f[10]*y+f[14])*xt,xt=-1/P,l[0]=f[0]*_*xt,l[1]=f[5]*S*xt,xt=-1/_t,i[2]=(f[10]*_t+f[14])*xt}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var i=0;i<8;i++)t[i]=Oe.fromValues(0,0,0);this.vertices=t}var l=this.min.array,f=this.max.array;return da(t[0],l[0],l[1],l[2]),da(t[1],l[0],f[1],l[2]),da(t[2],f[0],l[1],l[2]),da(t[3],f[0],f[1],l[2]),da(t[4],l[0],l[1],f[2]),da(t[5],l[0],f[1],f[2]),da(t[6],f[0],l[1],f[2]),da(t[7],f[0],f[1],f[2]),this},copy:function(t){var i=this.min,l=this.max;return Ss(i.array,t.min.array),Ss(l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},clone:function(){var t=new Ts;return t.copy(this),t}};var Si=Ts,hu=0,Ln=Y.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+hu++),this.position||(this.position=new hr),this.rotation||(this.rotation=new Ma),this.scale||(this.scale=new hr(1,1,1)),this.worldTransform=new Be,this.localTransform=new Be,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var i=this._scene;if(i){var l=i._nodeRepository;delete l[this.name],l[t]=this}this.name=t},add:function(t){var i=t._parent;if(i!==this){i&&i.remove(t),t._parent=this,this._children.push(t);var l=this._scene;l&&l!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var i=this._children,l=i.indexOf(t);l<0||(i.splice(l,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,i=0;i<t.length;i++)t[i]._parent=null,this._scene&&t[i].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){for(var i=t._parent;i;){if(i===this)return!0;i=i._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var i=this._children,l=0;l<i.length;l++)if(i[l].name===t)return i[l]},getDescendantByName:function(t){for(var i=this._children,l=0;l<i.length;l++){var f=i[l];if(f.name===t)return f;var h=f.getDescendantByName(t);if(h)return h}},queryNode:function(t){if(!!t){for(var i=t.split("/"),l=this,f=0;f<i.length;f++){var h=i[f];if(!!h){for(var p=!1,y=l._children,_=0;_<y.length;_++){var S=y[_];if(S.name===h){l=S,p=!0;break}}if(!p)return}}return l}},getPath:function(t){if(!this._parent)return"/";for(var i=this._parent,l=this.name;i._parent&&(l=i.name+"/"+l,i._parent!=t);)i=i._parent;return!i._parent&&t?null:l},traverse:function(t,i){t.call(i,this);for(var l=this._children,f=0,h=l.length;f<h;f++)l[f].traverse(t,i)},eachChild:function(t,i){for(var l=this._children,f=0,h=l.length;f<h;f++){var p=l[f];t.call(i,p,f)}},setLocalTransform:function(t){vr.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){var i=t?null:this.scale;this.localTransform.decomposeMatrix(i,this.rotation,this.position)},setWorldTransform:function(t){vr.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=vr.create();return function(i){var l=this.localTransform,f=this.worldTransform;this._parent?(vr.invert(t,this._parent.worldTransform.array),vr.multiply(l.array,t,f.array)):vr.copy(l.array,f.array);var h=i?null:this.scale;l.decomposeMatrix(h,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,i=this.rotation,l=this.scale;if(this.transformNeedsUpdate()){var f=this.localTransform.array;vr.fromRotationTranslation(f,i.array,t.array),vr.scale(f,f,l.array),i._dirty=!1,l._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,i=this.worldTransform.array;this._parent?vr.multiplyAffine(i,this._parent.worldTransform.array,t):vr.copy(i,t)},updateWorldTransform:function(){for(var t=this;t&&t.getParent()&&t.getParent().transformNeedsUpdate();)t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var i=this._children,l=0,f=i.length;l<f;l++)i[l].update(t)},getBoundingBox:function(){function t(h){return!h.invisible&&h.geometry}var i=new Si,l=new Be,f=new Be;return function(h,p){return p=p||new Si,h=h||t,this._parent?Be.invert(f,this._parent.worldTransform):Be.identity(f),this.traverse(function(y){y.geometry&&y.geometry.boundingBox&&(i.copy(y.geometry.boundingBox),Be.multiply(l,f,y.worldTransform),i.applyTransform(l),p.union(i))},this,t),p}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var i=this.worldTransform.array;if(t){var l=t.array;return l[0]=i[12],l[1]=i[13],l[2]=i[14],t}else return new hr(i[12],i[13],i[14])},clone:function(){var t=new this.constructor,i=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var l=0;l<i.length;l++)t.add(i[l].clone());return t},rotateAround:function(){var t=new hr,i=new Be;return function(l,f,h){t.copy(this.position).subtract(l);var p=this.localTransform;p.identity(),p.translate(l),p.rotate(h,f),i.fromRotationTranslation(this.rotation,t),p.multiply(i),p.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new Be;return function(i,l){t.lookAt(this.position,i,l||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=i}}()}),Qr=Ln,In=Qr.extend({material:null,geometry:null,mode:A.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:A.BACK,frontFace:A.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,i){},getBoundingBox:function(t,i){return i=Qr.prototype.getBoundingBox.call(this,t,i),this.geometry&&this.geometry.boundingBox&&i.union(this.geometry.boundingBox),i},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var i=Qr.prototype.clone.call(this);i.geometry=this.geometry,i.material=this.material;for(var l=0;l<t.length;l++){var f=t[l];i[f]!==this[f]&&(i[f]=this[f])}return i}}()});In.POINTS=A.POINTS,In.LINES=A.LINES,In.LINE_LOOP=A.LINE_LOOP,In.LINE_STRIP=A.LINE_STRIP,In.TRIANGLES=A.TRIANGLES,In.TRIANGLE_STRIP=A.TRIANGLE_STRIP,In.TRIANGLE_FAN=A.TRIANGLE_FAN,In.BACK=A.BACK,In.FRONT=A.FRONT,In.FRONT_AND_BACK=A.FRONT_AND_BACK,In.CW=A.CW,In.CCW=A.CCW;var Le=In,Os=Y.extend({scene:null,camera:null,renderer:null},function(){this._ray=new Fo,this._ndc=new Me},{pick:function(t,i,l){var f=this.pickAll(t,i,[],l);return f[0]||null},pickAll:function(t,i,l,f){return this.renderer.screenToNDC(t,i,this._ndc),this.camera.castRay(this._ndc,this._ray),l=l||[],this._intersectNode(this.scene,l,f||!1),l.sort(this._intersectionCompareFunc),l},_intersectNode:function(t,i,l){t instanceof Le&&t.isRenderable()&&(!t.ignorePicking||l)&&(t.mode===A.TRIANGLES&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)&&this._intersectRenderable(t,i);for(var f=0;f<t._children.length;f++)this._intersectNode(t._children[f],i,l)},_intersectRenderable:function(){var t=new hr,i=new hr,l=new hr,f=new Fo,h=new Be;return function(p,y){var _=p.isSkinnedMesh();f.copy(this._ray),Be.invert(h,p.worldTransform),_||f.applyTransform(h);var S=p.geometry,P=_?p.skeleton.boundingBox:S.boundingBox;if(!(P&&!f.intersectBoundingBox(P))){if(S.pick){S.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,p,y);return}else if(S.pickByRay){S.pickByRay(f,p,y);return}var j=p.cullFace===A.BACK&&p.frontFace===A.CCW||p.cullFace===A.FRONT&&p.frontFace===A.CW,tt,_t=S.indices,xt=S.attributes.position,Et=S.attributes.weight,Pt=S.attributes.joint,Vt,kt=[];if(!(!xt||!xt.value||!_t)){if(_){Vt=p.skeleton.getSubSkinMatrices(p.__uid__,p.joints);for(var ee=0;ee<p.joints.length;ee++){kt[ee]=kt[ee]||[];for(var Jt=0;Jt<16;Jt++)kt[ee][Jt]=Vt[ee*16+Jt]}var $t=[],ce=[],de=[],we=[],Ae=[],Ge=S.attributes.skinnedPosition;(!Ge||!Ge.value)&&(S.createAttribute("skinnedPosition","f",3),Ge=S.attributes.skinnedPosition,Ge.init(S.vertexCount));for(var ee=0;ee<S.vertexCount;ee++){xt.get(ee,$t),Et.get(ee,ce),Pt.get(ee,de),ce[3]=1-ce[0]-ce[1]-ce[2],Oe.set(we,0,0,0);for(var Jt=0;Jt<4;Jt++)de[Jt]>=0&&ce[Jt]>1e-4&&(Oe.transformMat4(Ae,$t,kt[de[Jt]]),Oe.scaleAndAdd(we,we,Ae,ce[Jt]));Ge.set(ee,we)}}for(var ee=0;ee<_t.length;ee+=3){var rr=_t[ee],Qe=_t[ee+1],sr=_t[ee+2],fr=_?S.attributes.skinnedPosition:xt;if(fr.get(rr,t.array),fr.get(Qe,i.array),fr.get(sr,l.array),j?tt=f.intersectTriangle(t,i,l,p.culling):tt=f.intersectTriangle(t,l,i,p.culling),tt){var $e=new hr;_?hr.copy($e,tt):hr.transformMat4($e,tt,p.worldTransform),y.push(new Os.Intersection(tt,$e,p,[rr,Qe,sr],ee/3,hr.dist($e,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,i){return t.distance-i.distance}});Os.Intersection=function(t,i,l,f,h,p){this.point=t,this.pointWorld=i,this.target=l,this.triangle=f,this.triangleIndex=h,this.distance=p};var As=Os,pa="__dt__",Zi=function(){this._contextId=0,this._caches=[],this._context={}};Zi.prototype={use:function(t,i){var l=this._caches;l[t]||(l[t]={},i&&(l[t]=i())),this._contextId=t,this._context=l[t]},put:function(t,i){this._context[t]=i},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var i=pa+t;this.put(i,!0)},dirtyAll:function(t){t=t||"";for(var i=pa+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!0)},fresh:function(t){t=t||"";var i=pa+t;this.put(i,!1)},freshAll:function(t){t=t||"";for(var i=pa+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!1)},isDirty:function(t){t=t||"";var i=pa+t,l=this._context;return!l.hasOwnProperty(i)||l[i]===!0},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,i){var l=Object.keys(this._caches);l.forEach(function(f){t&&t.call(i,f)})},miss:function(t){return!this._context.hasOwnProperty(t)}},Zi.prototype.constructor=Zi;var Vn=Zi,Ir=Y.extend({width:512,height:512,type:A.UNSIGNED_BYTE,format:A.RGBA,wrapS:A.REPEAT,wrapT:A.REPEAT,minFilter:A.LINEAR_MIPMAP_LINEAR,magFilter:A.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new Vn},{getWebGLTexture:function(t){var i=t.gl,l=this._cache;return l.use(t.__uid__),l.miss("webgl_texture")&&l.put("webgl_texture",i.createTexture()),this.dynamic?this.update(t):l.isDirty()&&(this.update(t),l.fresh()),l.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var i=t.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===A.DEPTH_COMPONENT&&(this.useMipmap=!1);var l=t.getGLExtension("EXT_sRGB");this.format===Ir.SRGB&&!l&&(this.format=Ir.RGB),this.format===Ir.SRGB_ALPHA&&!l&&(this.format=Ir.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?A.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?A.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===A.NEAREST_MIPMAP_NEAREST||t===A.NEAREST_MIPMAP_LINEAR?A.NEAREST:t===A.LINEAR_MIPMAP_LINEAR||t===A.LINEAR_MIPMAP_NEAREST?A.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var i=1;i<32;i<<=1)t=t|t>>i;return t+1},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("webgl_texture");l&&t.gl.deleteTexture(l),i.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Ir.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(Ir.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),Ir.BYTE=A.BYTE,Ir.UNSIGNED_BYTE=A.UNSIGNED_BYTE,Ir.SHORT=A.SHORT,Ir.UNSIGNED_SHORT=A.UNSIGNED_SHORT,Ir.INT=A.INT,Ir.UNSIGNED_INT=A.UNSIGNED_INT,Ir.FLOAT=A.FLOAT,Ir.HALF_FLOAT=36193,Ir.UNSIGNED_INT_24_8_WEBGL=34042,Ir.DEPTH_COMPONENT=A.DEPTH_COMPONENT,Ir.DEPTH_STENCIL=A.DEPTH_STENCIL,Ir.ALPHA=A.ALPHA,Ir.RGB=A.RGB,Ir.RGBA=A.RGBA,Ir.LUMINANCE=A.LUMINANCE,Ir.LUMINANCE_ALPHA=A.LUMINANCE_ALPHA,Ir.SRGB=35904,Ir.SRGB_ALPHA=35906,Ir.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,Ir.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,Ir.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,Ir.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,Ir.NEAREST=A.NEAREST,Ir.LINEAR=A.LINEAR,Ir.NEAREST_MIPMAP_NEAREST=A.NEAREST_MIPMAP_NEAREST,Ir.LINEAR_MIPMAP_NEAREST=A.LINEAR_MIPMAP_NEAREST,Ir.NEAREST_MIPMAP_LINEAR=A.NEAREST_MIPMAP_LINEAR,Ir.LINEAR_MIPMAP_LINEAR=A.LINEAR_MIPMAP_LINEAR,Ir.REPEAT=A.REPEAT,Ir.CLAMP_TO_EDGE=A.CLAMP_TO_EDGE,Ir.MIRRORED_REPEAT=A.MIRRORED_REPEAT;var Er=Ir,Ci=Le.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=Le.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});Ci.POINTS=A.POINTS,Ci.LINES=A.LINES,Ci.LINE_LOOP=A.LINE_LOOP,Ci.LINE_STRIP=A.LINE_STRIP,Ci.TRIANGLES=A.TRIANGLES,Ci.TRIANGLE_STRIP=A.TRIANGLE_STRIP,Ci.TRIANGLE_FAN=A.TRIANGLE_FAN,Ci.BACK=A.BACK,Ci.FRONT=A.FRONT,Ci.FRONT_AND_BACK=A.FRONT_AND_BACK,Ci.CW=A.CW,Ci.CCW=A.CCW;var ga=Ci,Vo={};Vo.isPowerOfTwo=function(t){return(t&t-1)==0},Vo.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},Vo.nearestPowerOfTwo=function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))};var vi=Vo,Hn=vi.isPowerOfTwo;function Ms(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function vu(t,i){var l=Ms(t.width),f=Ms(t.height);i=i||document.createElement("canvas"),i.width=l,i.height=f;var h=i.getContext("2d");return h.drawImage(t.image,0,0,l,f),i}var Go=Er.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type,h=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===Er.REPEAT||this.wrapT===Er.REPEAT)&&this.NPOT);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,h?this.wrapS:this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,h?this.wrapT:this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,h?this.magFilter:this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,h?this.minFilter:this.getAvailableMinFilter());var p=t.getGLExtension("EXT_texture_filter_anisotropic");if(p&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_2D,p.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var y=t.getGLExtension("OES_texture_half_float");y||(f=A.FLOAT)}if(this.mipmaps.length)for(var _=this.width,S=this.height,P=0;P<this.mipmaps.length;P++){var j=this.mipmaps[P];this._updateTextureData(i,j,P,_,S,l,f,!1),_/=2,S/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f,h),this.useMipmap&&(!this.NPOT||h)&&i.generateMipmap(i.TEXTURE_2D);i.bindTexture(i.TEXTURE_2D,null)},_updateTextureData:function(t,i,l,f,h,p,y,_){if(i.image){var S=i.image;_&&(this._potCanvas=vu(this,this._potCanvas),S=this._potCanvas),t.texImage2D(t.TEXTURE_2D,l,p,p,y,S)}else p<=Er.COMPRESSED_RGBA_S3TC_DXT5_EXT&&p>=Er.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,l,p,f,h,0,i.pixels):t.texImage2D(t.TEXTURE_2D,l,p,f,h,0,p,y,i.pixels)},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_2D))},isPowerOfTwo:function(){return Hn(this.width)&&Hn(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,i){var l=C.a.createImage();i&&(l.crossOrigin=i);var f=this;return l.onload=function(){f.dirty(),f.trigger("success",f)},l.onerror=function(){f.trigger("error",f)},l.src=t,this.image=l,this}});Object.defineProperty(Go.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Go.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});var Xr=Go;function du(t){return{byte:C.a.Int8Array,ubyte:C.a.Uint8Array,short:C.a.Int16Array,ushort:C.a.Uint16Array}[t]||C.a.Float32Array}function xl(t){return"attr_"+t}function Da(t,i,l,f){switch(this.name=t,this.type=i,this.size=l,this.semantic=f||"",this.value=null,l){case 1:this.get=function(h){return this.value[h]},this.set=function(h,p){this.value[h]=p},this.copy=function(h,p){this.value[h]=this.value[h]};break;case 2:this.get=function(h,p){var y=this.value;return p[0]=y[h*2],p[1]=y[h*2+1],p},this.set=function(h,p){var y=this.value;y[h*2]=p[0],y[h*2+1]=p[1]},this.copy=function(h,p){var y=this.value;p*=2,h*=2,y[h]=y[p],y[h+1]=y[p+1]};break;case 3:this.get=function(h,p){var y=h*3,_=this.value;return p[0]=_[y],p[1]=_[y+1],p[2]=_[y+2],p},this.set=function(h,p){var y=h*3,_=this.value;_[y]=p[0],_[y+1]=p[1],_[y+2]=p[2]},this.copy=function(h,p){var y=this.value;p*=3,h*=3,y[h]=y[p],y[h+1]=y[p+1],y[h+2]=y[p+2]};break;case 4:this.get=function(h,p){var y=this.value,_=h*4;return p[0]=y[_],p[1]=y[_+1],p[2]=y[_+2],p[3]=y[_+3],p},this.set=function(h,p){var y=this.value,_=h*4;y[_]=p[0],y[_+1]=p[1],y[_+2]=p[2],y[_+3]=p[3]},this.copy=function(h,p){var y=this.value;p*=4,h*=4,y[h]=y[p],y[h+1]=y[p+1],y[h+2]=y[p+2],y[h+3]=y[p+3]}}}Da.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var i=du(this.type);this.value=new i(t*this.size)}},Da.prototype.fromArray=function(t){var i=du(this.type),l;if(t[0]&&t[0].length){var f=0,h=this.size;l=new i(t.length*h);for(var p=0;p<t.length;p++)for(var y=0;y<h;y++)l[f++]=t[p][y]}else l=new i(t);this.value=l},Da.prototype.clone=function(t){var i=new Da(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),i};function _l(t,i,l,f,h){this.name=t,this.type=i,this.buffer=l,this.size=f,this.semantic=h,this.symbol="",this.needsRemove=!1}function Ds(t){this.buffer=t,this.count=0}var Yi=Y.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new Vn,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),i=0;i<t.length;i++)this.dirtyAttribute(t[i]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(xl(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,i){if(t<this.triangleCount&&t>=0){i||(i=[]);var l=this.indices;return i[0]=l[t*3],i[1]=l[t*3+1],i[2]=l[t*3+2],i}},setTriangleIndices:function(t,i){var l=this.indices;l[t*3]=i[0],l[t*3+1]=i[1],l[t*3+2]=i[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var i,l=this.vertexCount>65535?C.a.Uint32Array:C.a.Uint16Array;if(t[0]&&t[0].length){var f=0,h=3;i=new l(t.length*h);for(var p=0;p<t.length;p++)for(var y=0;y<h;y++)i[f++]=t[p][y]}else i=new l(t);this.indices=i},createAttribute:function(t,i,l,f){var h=new Da(t,i,l,f);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=h,this._attributeList.push(t),h},removeAttribute:function(t){var i=this._attributeList,l=i.indexOf(t);return l>=0?(i.splice(l,1),delete this.attributes[t],!0):!1},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,i=this._attributeList;if(t)return t;for(var l=[],f=this.vertexCount,h=0;h<i.length;h++){var p=i[h],y=this.attributes[p];y.value&&y.value.length===f*y.size&&l.push(p)}return this._enabledAttributes=l,l},getBufferChunks:function(t){var i=this._cache;i.use(t.__uid__);var l=i.isDirty("attributes"),f=i.isDirty("indices");if(l||f){this._updateBuffer(t.gl,l,f);for(var h=this.getEnabledAttributes(),p=0;p<h.length;p++)i.fresh(xl(h[p]));i.fresh("attributes"),i.fresh("indices")}return i.fresh("any"),i.get("chunks")},_updateBuffer:function(t,i,l){var f=this._cache,h=f.get("chunks"),p=!1;h||(h=[],h[0]={attributeBuffers:[],indicesBuffer:null},f.put("chunks",h),p=!0);var y=h[0],_=y.attributeBuffers,S=y.indicesBuffer;if(i||p){var P=this.getEnabledAttributes(),j={};if(!p)for(var tt=0;tt<_.length;tt++)j[_[tt].name]=_[tt];for(var _t=0;_t<P.length;_t++){var xt=P[_t],Et=this.attributes[xt],Pt;p||(Pt=j[xt]);var Vt;Pt?Vt=Pt.buffer:Vt=t.createBuffer(),f.isDirty(xl(xt))&&(t.bindBuffer(t.ARRAY_BUFFER,Vt),t.bufferData(t.ARRAY_BUFFER,Et.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),_[_t]=new _l(xt,Et.type,Vt,Et.size,Et.semantic)}for(var tt=_t;tt<_.length;tt++)t.deleteBuffer(_[tt].buffer);_.length=_t}this.isUseIndices()&&(l||p)&&(S||(S=new Ds(t.createBuffer()),y.indicesBuffer=S),S.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,S.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var h=l[f],p=0;p<h.attributeBuffers.length;p++){var y=h.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}h.indicesBuffer&&t.gl.deleteBuffer(h.indicesBuffer.buffer)}if(this.__vaoCache){var _=t.getGLExtension("OES_vertex_array_object");for(var S in this.__vaoCache){var P=this.__vaoCache[S].vao;P&&_.deleteVertexArrayOES(P)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(Yi.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),!t||!t.value?0:t.value.length/t.size}}),Object.defineProperty(Yi.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}})),Yi.STATIC_DRAW=A.STATIC_DRAW,Yi.DYNAMIC_DRAW=A.DYNAMIC_DRAW,Yi.STREAM_DRAW=A.STREAM_DRAW,Yi.AttributeBuffer=_l,Yi.IndicesBuffer=Ds,Yi.Attribute=Da;var Ea=Yi,ri=Oe.create,Ca=Oe.add,Bi=Oe.set,Qn=Ea.Attribute,ma=Ea.extend(function(){return{attributes:{position:new Qn("position","float",3,"POSITION"),texcoord0:new Qn("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Qn("texcoord1","float",2,"TEXCOORD_1"),normal:new Qn("normal","float",3,"NORMAL"),tangent:new Qn("tangent","float",4,"TANGENT"),color:new Qn("color","float",4,"COLOR"),weight:new Qn("weight","float",3,"WEIGHT"),joint:new Qn("joint","float",4,"JOINT"),barycentric:new Qn("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new Si);var i=this.attributes.position.value;if(i&&i.length){var l=t.min,f=t.max,h=l.array,p=f.array;Oe.set(h,i[0],i[1],i[2]),Oe.set(p,i[0],i[1],i[2]);for(var y=3;y<i.length;){var _=i[y++],S=i[y++],P=i[y++];_<h[0]&&(h[0]=_),S<h[1]&&(h[1]=S),P<h[2]&&(h[2]=P),_>p[0]&&(p[0]=_),S>p[1]&&(p[1]=S),P>p[2]&&(p[2]=P)}l._dirty=!0,f._dirty=!0}},generateVertexNormals:function(){if(!!this.vertexCount){var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value;if(!f||f.length!==l.length)f=i.normal.value=new C.a.Float32Array(l.length);else for(var h=0;h<f.length;h++)f[h]=0;for(var p=ri(),y=ri(),_=ri(),S=ri(),P=ri(),j=ri(),tt=t?t.length:this.vertexCount,_t,xt,Et,Pt=0;Pt<tt;){t?(_t=t[Pt++],xt=t[Pt++],Et=t[Pt++]):(_t=Pt++,xt=Pt++,Et=Pt++),Bi(p,l[_t*3],l[_t*3+1],l[_t*3+2]),Bi(y,l[xt*3],l[xt*3+1],l[xt*3+2]),Bi(_,l[Et*3],l[Et*3+1],l[Et*3+2]),Oe.sub(S,p,y),Oe.sub(P,y,_),Oe.cross(j,S,P);for(var h=0;h<3;h++)f[_t*3+h]=f[_t*3+h]+j[h],f[xt*3+h]=f[xt*3+h]+j[h],f[Et*3+h]=f[Et*3+h]+j[h]}for(var h=0;h<f.length;)Bi(j,f[h],f[h+1],f[h+2]),Oe.normalize(j,j),f[h++]=j[0],f[h++]=j[1],f[h++]=j[2];this.dirty()}},generateFaceNormals:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value,h=ri(),p=ri(),y=ri(),_=ri(),S=ri(),P=ri();f||(f=i.normal.value=new Float32Array(l.length));for(var j=t?t.length:this.vertexCount,tt,_t,xt,Et=0;Et<j;){t?(tt=t[Et++],_t=t[Et++],xt=t[Et++]):(tt=Et++,_t=Et++,xt=Et++),Bi(h,l[tt*3],l[tt*3+1],l[tt*3+2]),Bi(p,l[_t*3],l[_t*3+1],l[_t*3+2]),Bi(y,l[xt*3],l[xt*3+1],l[xt*3+2]),Oe.sub(_,h,p),Oe.sub(S,p,y),Oe.cross(P,_,S),Oe.normalize(P,P);for(var Pt=0;Pt<3;Pt++)f[tt*3+Pt]=P[Pt],f[_t*3+Pt]=P[Pt],f[xt*3+Pt]=P[Pt]}this.dirty()}},generateTangents:function(){if(!!this.vertexCount){var t=this.vertexCount,i=this.attributes;i.tangent.value||(i.tangent.value=new Float32Array(t*4));var l=i.texcoord0.value,f=i.position.value,h=i.tangent.value,p=i.normal.value;if(!l){console.warn("Geometry without texcoords can't generate tangents.");return}for(var y=[],_=[],S=0;S<t;S++)y[S]=[0,0,0],_[S]=[0,0,0];for(var P=[0,0,0],j=[0,0,0],tt=this.indices,_t=tt?tt.length:this.vertexCount,xt,Et,Pt,S=0;S<_t;){tt?(xt=tt[S++],Et=tt[S++],Pt=tt[S++]):(xt=S++,Et=S++,Pt=S++);var Vt=l[xt*2],kt=l[Et*2],ee=l[Pt*2],Jt=l[xt*2+1],$t=l[Et*2+1],ce=l[Pt*2+1],de=f[xt*3],we=f[Et*3],Ae=f[Pt*3],Ge=f[xt*3+1],rr=f[Et*3+1],Qe=f[Pt*3+1],sr=f[xt*3+2],fr=f[Et*3+2],$e=f[Pt*3+2],dr=we-de,Sr=Ae-de,Lr=rr-Ge,gr=Qe-Ge,ln=fr-sr,Dr=$e-sr,Tn=kt-Vt,un=ee-Vt,En=$t-Jt,Cn=ce-Jt,nn=1/(Tn*Cn-En*un);P[0]=(Cn*dr-En*Sr)*nn,P[1]=(Cn*Lr-En*gr)*nn,P[2]=(Cn*ln-En*Dr)*nn,j[0]=(Tn*Sr-un*dr)*nn,j[1]=(Tn*gr-un*Lr)*nn,j[2]=(Tn*Dr-un*ln)*nn,Ca(y[xt],y[xt],P),Ca(y[Et],y[Et],P),Ca(y[Pt],y[Pt],P),Ca(_[xt],_[xt],j),Ca(_[Et],_[Et],j),Ca(_[Pt],_[Pt],j)}for(var $r=ri(),jn=ri(),oi=ri(),S=0;S<t;S++){oi[0]=p[S*3],oi[1]=p[S*3+1],oi[2]=p[S*3+2];var Mi=y[S];Oe.scale($r,oi,Oe.dot(oi,Mi)),Oe.sub($r,Mi,$r),Oe.normalize($r,$r),Oe.cross(jn,oi,Mi),h[S*4]=$r[0],h[S*4+1]=$r[1],h[S*4+2]=$r[2],h[S*4+3]=Oe.dot(jn,_[S])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new C.a.Uint32Array(this.indices));for(var t=this.attributes,i=this.indices,l=this.getEnabledAttributes(),f={},h=0;h<l.length;h++){var p=l[h];f[p]=t[p].value,t[p].init(this.indices.length)}for(var y=0,_=0;_<i.length;_++){for(var S=i[_],h=0;h<l.length;h++)for(var p=l[h],P=t[p].value,j=t[p].size,tt=0;tt<j;tt++)P[y*j+tt]=f[p][S*j+tt];i[_]=y,y++}this.dirty()}},generateBarycentric:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,i=t.barycentric.value,l=this.indices;if(!(i&&i.length===l.length*3)){i=t.barycentric.value=new Float32Array(l.length*3);for(var f=0;f<(l?l.length:this.vertexCount/3);)for(var h=0;h<3;h++){var p=l?l[f++]:f*3+h;i[p*3+h]=1}this.dirty()}}},applyTransform:function(t){var i=this.attributes,l=i.position.value,f=i.normal.value,h=i.tangent.value;t=t.array;var p=vr.create();vr.invert(p,t),vr.transpose(p,p);var y=Oe.transformMat4,_=Oe.forEach;_(l,3,0,null,y,t),f&&_(f,3,0,null,y,p),h&&_(h,4,0,null,y,p),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var h=l[f],p=0;p<h.attributeBuffers.length;p++){var y=h.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}h.indicesBuffer&&t.gl.deleteBuffer(h.indicesBuffer.buffer)}if(this.__vaoCache){var _=t.getGLExtension("OES_vertex_array_object");for(var S in this.__vaoCache){var P=this.__vaoCache[S].vao;P&&_.deleteVertexArrayOES(P)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});ma.STATIC_DRAW=Ea.STATIC_DRAW,ma.DYNAMIC_DRAW=Ea.DYNAMIC_DRAW,ma.STREAM_DRAW=Ea.STREAM_DRAW,ma.AttributeBuffer=Ea.AttributeBuffer,ma.IndicesBuffer=Ea.IndicesBuffer,ma.Attribute=Qn;var tn=ma,Es=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`,Ti="uniform vec3 ",Fi="uniform float ",Pa="@export clay.header.",sa="@end",yn=":unconfigurable;",pu=[Pa+"directional_light",Ti+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+yn,Ti+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+yn,sa,Pa+"ambient_light",Ti+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+yn,sa,Pa+"ambient_sh_light",Ti+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+yn,Ti+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+yn,Es,sa,Pa+"ambient_cubemap_light",Ti+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+yn,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+yn,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+yn,sa,Pa+"point_light",Ti+"pointLightPosition[POINT_LIGHT_COUNT]"+yn,Fi+"pointLightRange[POINT_LIGHT_COUNT]"+yn,Ti+"pointLightColor[POINT_LIGHT_COUNT]"+yn,sa,Pa+"spot_light",Ti+"spotLightPosition[SPOT_LIGHT_COUNT]"+yn,Ti+"spotLightDirection[SPOT_LIGHT_COUNT]"+yn,Fi+"spotLightRange[SPOT_LIGHT_COUNT]"+yn,Fi+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+yn,Fi+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+yn,Fi+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+yn,Ti+"spotLightColor[SPOT_LIGHT_COUNT]"+yn,sa].join(`
`);pr.import(pu);var Cs=Qr.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var t=Qr.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}}),Gn=Cs,Uo=function(t,i){this.normal=t||new hr(0,1,0),this.distance=i||0};Uo.prototype={constructor:Uo,distanceToPoint:function(t){return Oe.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,i){i||(i=new hr);var l=this.distanceToPoint(t);return Oe.scaleAndAdd(i.array,t.array,this.normal.array,-l),i._dirty=!0,i},normalize:function(){var t=1/Oe.len(this.normal.array);Oe.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var i=t.vertices,l=this.normal.array,f=Oe.dot(i[0].array,l)>this.distance,h=1;h<8;h++)if(Oe.dot(i[h].array,l)>this.distance!=f)return!0},intersectLine:function(){var t=Oe.create();return function(i,l,f){var h=this.distanceToPoint(i),p=this.distanceToPoint(l);if(h>0&&p>0||h<0&&p<0)return null;var y=this.normal.array,_=this.distance,S=i.array;Oe.sub(t,l.array,i.array),Oe.normalize(t,t);var P=Oe.dot(y,t);if(P===0)return null;f||(f=new hr);var j=(Oe.dot(y,S)-_)/P;return Oe.scaleAndAdd(f.array,S,t,-j),f._dirty=!0,f}}(),applyTransform:function(){var t=vr.create(),i=mr.create(),l=mr.create();return l[3]=1,function(f){f=f.array,Oe.scale(l,this.normal.array,this.distance),mr.transformMat4(l,l,f),this.distance=Oe.dot(l,this.normal.array),vr.invert(t,f),vr.transpose(t,t),i[3]=0,Oe.copy(i,this.normal.array),mr.transformMat4(i,i,t),Oe.copy(this.normal.array,i)}}(),copy:function(t){Oe.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new Uo;return t.copy(this),t}};var zi=Uo,Dn=Oe.set,Ho=Oe.copy,Ps=Oe.transformMat4,ho=Math.min,ui=Math.max,Ka=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new zi);this.boundingBox=new Si,this.vertices=[];for(var t=0;t<8;t++)this.vertices[t]=Oe.fromValues(0,0,0)};Ka.prototype={setFromProjection:function(t){var i=this.planes,l=t.array,f=l[0],h=l[1],p=l[2],y=l[3],_=l[4],S=l[5],P=l[6],j=l[7],tt=l[8],_t=l[9],xt=l[10],Et=l[11],Pt=l[12],Vt=l[13],kt=l[14],ee=l[15];Dn(i[0].normal.array,y-f,j-_,Et-tt),i[0].distance=-(ee-Pt),i[0].normalize(),Dn(i[1].normal.array,y+f,j+_,Et+tt),i[1].distance=-(ee+Pt),i[1].normalize(),Dn(i[2].normal.array,y+h,j+S,Et+_t),i[2].distance=-(ee+Vt),i[2].normalize(),Dn(i[3].normal.array,y-h,j-S,Et-_t),i[3].distance=-(ee-Vt),i[3].normalize(),Dn(i[4].normal.array,y-p,j-P,Et-xt),i[4].distance=-(ee-kt),i[4].normalize(),Dn(i[5].normal.array,y+p,j+P,Et+xt),i[5].distance=-(ee+kt),i[5].normalize();var Jt=this.boundingBox,$t=this.vertices;if(ee===0){var ce=S/f,de=-kt/(xt-1),we=-kt/(xt+1),Ae=-we/S,Ge=-de/S;Jt.min.set(-Ae*ce,-Ae,we),Jt.max.set(Ae*ce,Ae,de),Dn($t[0],-Ae*ce,-Ae,we),Dn($t[1],-Ae*ce,Ae,we),Dn($t[2],Ae*ce,-Ae,we),Dn($t[3],Ae*ce,Ae,we),Dn($t[4],-Ge*ce,-Ge,de),Dn($t[5],-Ge*ce,Ge,de),Dn($t[6],Ge*ce,-Ge,de),Dn($t[7],Ge*ce,Ge,de)}else{var rr=(-1-Pt)/f,Qe=(1-Pt)/f,sr=(1-Vt)/S,fr=(-1-Vt)/S,$e=(-1-kt)/xt,dr=(1-kt)/xt;Jt.min.set(Math.min(rr,Qe),Math.min(fr,sr),Math.min(dr,$e)),Jt.max.set(Math.max(Qe,rr),Math.max(sr,fr),Math.max($e,dr));var Sr=Jt.min.array,Lr=Jt.max.array;Dn($t[0],Sr[0],Sr[1],Sr[2]),Dn($t[1],Sr[0],Lr[1],Sr[2]),Dn($t[2],Lr[0],Sr[1],Sr[2]),Dn($t[3],Lr[0],Lr[1],Sr[2]),Dn($t[4],Sr[0],Sr[1],Lr[2]),Dn($t[5],Sr[0],Lr[1],Lr[2]),Dn($t[6],Lr[0],Sr[1],Lr[2]),Dn($t[7],Lr[0],Lr[1],Lr[2])}},getTransformedBoundingBox:function(){var t=Oe.create();return function(i,l){var f=this.vertices,h=l.array,p=i.min,y=i.max,_=p.array,S=y.array,P=f[0];Ps(t,P,h),Ho(_,t),Ho(S,t);for(var j=1;j<8;j++)P=f[j],Ps(t,P,h),_[0]=ho(t[0],_[0]),_[1]=ho(t[1],_[1]),_[2]=ho(t[2],_[2]),S[0]=ui(t[0],S[0]),S[1]=ui(t[1],S[1]),S[2]=ui(t[2],S[2]);return p._dirty=!0,y._dirty=!0,i}}()};var ya=Ka,bl=Qr.extend(function(){return{projectionMatrix:new Be,invProjectionMatrix:new Be,viewMatrix:new Be,frustum:new ya}},function(){this.update(!0)},{update:function(t){Qr.prototype.update.call(this,t),Be.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Be.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){Be.copy(this.viewMatrix,t),Be.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){Be.copy(this.projectionMatrix,t),Be.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=mr.create();return function(i,l){var f=l!==void 0?l:new Fo,h=i.array[0],p=i.array[1];return mr.set(t,h,p,-1,1),mr.transformMat4(t,t,this.invProjectionMatrix.array),mr.transformMat4(t,t,this.worldTransform.array),Oe.scale(f.origin.array,t,1/t[3]),mr.set(t,h,p,1,1),mr.transformMat4(t,t,this.invProjectionMatrix.array),mr.transformMat4(t,t,this.worldTransform.array),Oe.scale(t,t,1/t[3]),Oe.sub(f.direction.array,t,f.origin.array),Oe.normalize(f.direction.array,f.direction.array),f.direction._dirty=!0,f.origin._dirty=!0,f}}()}),wa=bl,Wo=vr.create(),ws=vr.create(),ko={};function La(t){var i=[],l=Object.keys(t);l.sort();for(var f=0;f<l.length;f++){var h=l[f];i.push(h+" "+t[h])}var p=i.join(`
`);if(ko[p])return ko[p];var y=$.genGUID();return ko[p]=y,y}function Ia(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}Ia.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},Ia.prototype.add=function(t,i){i?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},Ia.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var pf=Qr.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Si,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new L(20)}},function(){this._scene=this},{addToScene:function(t){t instanceof wa?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof Gn&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var i;t instanceof wa?(i=this._cameraList.indexOf(t),i>=0&&this._cameraList.splice(i,1)):t instanceof Gn&&(i=this.lights.indexOf(t),i>=0&&this.lights.splice(i,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var i=this._cameraList.indexOf(t);i>=0&&this._cameraList.splice(i,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var i={},l=0;l<t.length;l++){var f=t[l];if(!f.invisible){var h=f.group;i[h]||(i[h]={}),i[h][f.type]=i[h][f.type]||0,i[h][f.type]++}}this._lightNumber=i;for(var p in i)this._lightProgramKeys[p]=La(i[p]);this._updateLightUniforms()},cloneNode:function(t){var i=t.clone(),l={};function f(h,p){l[h.__uid__]=p;for(var y=0;y<h._children.length;y++){var _=h._children[y],S=p._children[y];f(_,S)}}return f(t,i),i.traverse(function(h){h.skeleton&&(h.skeleton=h.skeleton.clone(l)),h.material&&(h.material=h.material.clone())}),i},updateRenderList:function(t,i){var l=t.__uid__,f=this._renderLists.get(l);f||(f=new Ia,this._renderLists.put(l,f)),f.startCount(),i&&(this.viewBoundingBoxLastFrame.min.set(Infinity,Infinity,Infinity),this.viewBoundingBoxLastFrame.max.set(-Infinity,-Infinity,-Infinity));var h=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,h,f,i),f.endCount(),f},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,i,l,f,h){if(!t.invisible)for(var p=0;p<t._children.length;p++){var y=t._children[p];if(y.isRenderable()){var _=y.isSkinnedMesh()?Wo:y.worldTransform.array,S=y.geometry;vr.multiplyAffine(ws,i.viewMatrix.array,_),(h&&!S.boundingBox||!this.isFrustumCulled(y,i,ws))&&f.add(y,y.material.transparent||l)}y._children.length>0&&this._doUpdateRenderList(y,i,l,f,h)}},isFrustumCulled:function(){var t=new Si,i=new Be;return function(l,f,h){var p=l.boundingBox;if(p||(l.skeleton&&l.skeleton.boundingBox?p=l.skeleton.boundingBox:p=l.geometry.boundingBox),!p)return!1;if(i.array=h,t.transformFrom(p,i),l.castShadow&&this.viewBoundingBoxLastFrame.union(t),l.frustumCulling){if(!t.intersectBoundingBox(f.frustum.boundingBox))return!0;i.array=f.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(i);var y=t.min.array,_=t.max.array;if(_[0]<-1||y[0]>1||_[1]<-1||y[1]>1||_[2]<-1||y[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(gf);var i=this._lightUniforms;for(var l in i)for(var f in i[l])i[l][f].value.length=0;for(var h=0;h<t.length;h++){var p=t[h];if(!p.invisible){var l=p.group;for(var f in p.uniformTemplates){var y=p.uniformTemplates[f],_=y.value(p);if(_!=null){i[l]||(i[l]={}),i[l][f]||(i[l][f]={type:"",value:[]});var S=i[l][f];switch(S.type=y.type+"v",y.type){case"1i":case"1f":case"t":S.value.push(_);break;case"2f":case"3f":case"4f":for(var P=0;P<_.length;P++)S.value.push(_[P]);break;default:console.error("Unkown light uniform type "+y.type)}}}}}},getLightGroups:function(){var t=[];for(var i in this._lightNumber)t.push(i);return t},getNumberChangedLightGroups:function(){var t=[];for(var i in this._lightNumber)this.isLightNumberChanged(i)&&t.push(i);return t},isLightNumberChanged:function(t){var i=this._previousLightNumber,l=this._lightNumber;for(var f in l[t])if(!i[t]||l[t][f]!==i[t][f])return!0;for(var f in i[t])if(!l[t]||l[t][f]!==i[t][f])return!0;return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(i,l,f){for(var h in i){var p=i[h];if(p.type==="tv"){if(!l.hasUniform(h))continue;for(var y=[],_=0;_<p.value.length;_++){var S=p.value[_],P=l.takeCurrentTextureSlot(f,S);y.push(P)}l.setUniform(f.gl,"1iv",h,y)}else l.setUniform(f.gl,p.type,h,p.value)}}return function(i,l,f){t(this._lightUniforms[l],i,f),t(this.shadowUniforms,i,f)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function gf(t,i){if(i.castShadow&&!t.castShadow)return!0}var $i=pf,Ls=b("AOUq"),Sl=vi.isPowerOfTwo,gu=["px","nx","py","ny","pz","nz"],Tl=Er.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type;i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var h=t.getGLExtension("EXT_texture_filter_anisotropic");if(h&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_CUBE_MAP,h.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var p=t.getGLExtension("OES_texture_half_float");p||(f=A.FLOAT)}if(this.mipmaps.length)for(var y=this.width,_=this.height,S=0;S<this.mipmaps.length;S++){var P=this.mipmaps[S];this._updateTextureData(i,P,S,y,_,l,f),y/=2,_/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f),!this.NPOT&&this.useMipmap&&i.generateMipmap(i.TEXTURE_CUBE_MAP);i.bindTexture(i.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,i,l,f,h,p,y){for(var _=0;_<6;_++){var S=gu[_],P=i.image&&i.image[S];P?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,l,p,p,y,P):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,l,p,f,h,0,p,y,i.pixels&&i.pixels[S])}},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?Sl(this.image.px.width)&&Sl(this.image.px.height):Sl(this.width)&&Sl(this.height)},isRenderable:function(){return this.image.px?Xo(this.image.px)&&Xo(this.image.nx)&&Xo(this.image.py)&&Xo(this.image.ny)&&Xo(this.image.pz)&&Xo(this.image.nz):!!(this.width&&this.height)},load:function(t,i){var l=0,f=this;return $.each(t,function(h,p){var y=C.a.createImage();i&&(y.crossOrigin=i),y.onload=function(){l--,l===0&&(f.dirty(),f.trigger("success",f))},y.onerror=function(){l--},l++,y.src=h,f.image[p]=y}),this}});Object.defineProperty(Tl.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Tl.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});function Xo(t){return t.width>0&&t.height>0}var vo=Tl,mf=wa.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,i=Math.atan(1/t[5])*2;this.fov=i/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=wa.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}}),Jn=mf,po="framebuffer",la="renderbuffer",Ol=la+"_width",mu=la+"_height",Zo=la+"_attached",Ra="depthtexture_attached",Na=A.FRAMEBUFFER,kr=A.RENDERBUFFER,ja=A.DEPTH_ATTACHMENT,xa=A.COLOR_ATTACHMENT0,Qa=Y.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new Vn,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var i=t.gl;i.bindFramebuffer(Na,this._getFrameBufferGL(t)),this._boundRenderer=t;var l=this._cache;l.put("viewport",t.viewport);var f=!1,h,p;for(var y in this._textures){f=!0;var _=this._textures[y];_&&(h=_.texture.width,p=_.texture.height,this._doAttach(t,_.texture,y,_.target))}this._width=h,this._height=p,!f&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,h,p,1);var S=l.get("attached_textures");if(S){for(var y in S)if(!this._textures[y]){var P=S[y];this._doDetach(i,y,P)}}if(!l.get(Ra)&&this.depthBuffer){l.miss(la)&&l.put(la,i.createRenderbuffer());var j=l.get(la);(h!==l.get(Ol)||p!==l.get(mu))&&(i.bindRenderbuffer(kr,j),i.renderbufferStorage(kr,i.DEPTH_COMPONENT16,h,p),l.put(Ol,h),l.put(mu,p),i.bindRenderbuffer(kr,null)),l.get(Zo)||(i.framebufferRenderbuffer(Na,ja,kr,j),l.put(Zo,!0))}},unbind:function(t){t.__currentFrameBuffer=null;var i=t.gl;i.bindFramebuffer(Na,null),this._boundRenderer=null,this._cache.use(t.__uid__);var l=this._cache.get("viewport");l&&t.setViewport(l),this.updateMipmap(t)},updateMipmap:function(t){var i=t.gl;for(var l in this._textures){var f=this._textures[l];if(f){var h=f.texture;if(!h.NPOT&&h.useMipmap&&h.minFilter===Er.LINEAR_MIPMAP_LINEAR){var p=h.textureType==="textureCube"?A.TEXTURE_CUBE_MAP:A.TEXTURE_2D;i.bindTexture(p,h.getWebGLTexture(t)),i.generateMipmap(p),i.bindTexture(p,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(Na)},_getFrameBufferGL:function(t){var i=this._cache;return i.use(t.__uid__),i.miss(po)&&i.put(po,t.gl.createFramebuffer()),i.get(po)},attach:function(t,i,l){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");i=i||xa,l=l||A.TEXTURE_2D;var f=this._boundRenderer,h=f&&f.gl,p;if(h){var y=this._cache;y.use(f.__uid__),p=y.get("attached_textures")}var _=this._textures[i];if(!(_&&_.target===l&&_.texture===t&&p&&p[i]!=null)){var S=!0;f&&(S=this._doAttach(f,t,i,l),this.viewport||f.setViewport(0,0,t.width,t.height,1)),S&&(this._textures[i]=this._textures[i]||{},this._textures[i].texture=t,this._textures[i].target=l)}},_doAttach:function(t,i,l,f){var h=t.gl,p=i.getWebGLTexture(t),y=this._cache.get("attached_textures");if(y&&y[l]){var _=y[l];if(_.texture===i&&_.target===f)return}l=+l;var S=!0;if(l===ja||l===A.DEPTH_STENCIL_ATTACHMENT){var P=t.getGLExtension("WEBGL_depth_texture");if(P||(console.error("Depth texture is not supported by the browser"),S=!1),i.format!==A.DEPTH_COMPONENT&&i.format!==A.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),S=!1),S){var j=this._cache.get(la);j&&(h.framebufferRenderbuffer(Na,ja,kr,null),h.deleteRenderbuffer(j),this._cache.put(la,!1)),this._cache.put(Zo,!1),this._cache.put(Ra,!0)}}return h.framebufferTexture2D(Na,l,f,p,0),y||(y={},this._cache.put("attached_textures",y)),y[l]=y[l]||{},y[l].texture=i,y[l].target=f,S},_doDetach:function(t,i,l){t.framebufferTexture2D(Na,i,l,null,0);var f=this._cache.get("attached_textures");f&&f[i]&&(f[i]=null),(i===ja||i===A.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(Ra,!1)},detach:function(t,i){if(this._textures[t]=null,this._boundRenderer){var l=this._cache;l.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,i)}},dispose:function(t){var i=t.gl,l=this._cache;l.use(t.__uid__);var f=l.get(la);f&&i.deleteRenderbuffer(f);var h=l.get(po);h&&i.deleteFramebuffer(h),l.deleteContext(t.__uid__),this._textures={}}});Qa.DEPTH_ATTACHMENT=ja,Qa.COLOR_ATTACHMENT0=xa,Qa.STENCIL_ATTACHMENT=A.STENCIL_ATTACHMENT,Qa.DEPTH_STENCIL_ATTACHMENT=A.DEPTH_STENCIL_ATTACHMENT;var Wn=Qa,yu=["px","nx","py","ny","pz","nz"],Is=Y.extend(function(){var t={position:new hr,far:1e3,near:.1,texture:null,shadowMapPass:null},i=t._cameras={px:new Jn({fov:90}),nx:new Jn({fov:90}),py:new Jn({fov:90}),ny:new Jn({fov:90}),pz:new Jn({fov:90}),nz:new Jn({fov:90})};return i.px.lookAt(hr.POSITIVE_X,hr.NEGATIVE_Y),i.nx.lookAt(hr.NEGATIVE_X,hr.NEGATIVE_Y),i.py.lookAt(hr.POSITIVE_Y,hr.POSITIVE_Z),i.ny.lookAt(hr.NEGATIVE_Y,hr.NEGATIVE_Z),i.pz.lookAt(hr.POSITIVE_Z,hr.NEGATIVE_Y),i.nz.lookAt(hr.NEGATIVE_Z,hr.NEGATIVE_Y),t._frameBuffer=new Wn,t},{getCamera:function(t){return this._cameras[t]},render:function(t,i,l){var f=t.gl;l||i.update();for(var h=this.texture.width,p=2*Math.atan(h/(h-.5))/Math.PI*180,y=0;y<6;y++){var _=yu[y],S=this._cameras[_];if(hr.copy(S.position,this.position),S.far=this.far,S.near=this.near,S.fov=p,this.shadowMapPass){S.update();var P=i.getBoundingBox();P.applyTransform(S.viewMatrix),i.viewBoundingBoxLastFrame.copy(P),this.shadowMapPass.render(t,i,S,!0)}this._frameBuffer.attach(this.texture,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+y),this._frameBuffer.bind(t),t.render(i,S,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}}),Vi=Is,qi=tn.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,i=this.widthSegments,l=this.attributes,f=[],h=[],p=[],y=[],_=0;_<=t;_++)for(var S=_/t,P=0;P<=i;P++){var j=P/i;if(f.push([2*j-1,2*S-1,0]),h&&h.push([j,S]),p&&p.push([0,0,1]),P<i&&_<t){var tt=P+_*(i+1);y.push([tt,tt+1,tt+i+1]),y.push([tt+i+1,tt+1,tt+i+2])}}l.position.fromArray(f),l.texcoord0.fromArray(h),l.normal.fromArray(p),this.initIndicesFromArray(y),this.boundingBox=new Si,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),_a=qi,Pn=new Be,jt=tn.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var t={px:Ht("px",this.depthSegments,this.heightSegments),nx:Ht("nx",this.depthSegments,this.heightSegments),py:Ht("py",this.widthSegments,this.depthSegments),ny:Ht("ny",this.widthSegments,this.depthSegments),pz:Ht("pz",this.widthSegments,this.heightSegments),nz:Ht("nz",this.widthSegments,this.heightSegments)},i=["position","texcoord0","normal"],l=0,f=0;for(var h in t)l+=t[h].vertexCount,f+=t[h].indices.length;for(var p=0;p<i.length;p++)this.attributes[i[p]].init(l);this.indices=new C.a.Uint16Array(f);var y=0,_=0;for(var h in t){for(var S=t[h],p=0;p<i.length;p++)for(var P=i[p],j=S.attributes[P].value,tt=S.attributes[P].size,_t=P==="normal",xt=0;xt<j.length;xt++){var Et=j[xt];this.inside&&_t&&(Et=-Et),this.attributes[P].value[xt+tt*_]=Et}for(var Pt=S.indices.length,xt=0;xt<S.indices.length;xt++)this.indices[xt+y]=_+S.indices[this.inside?Pt-xt-1:xt];y+=S.indices.length,_+=S.vertexCount}this.boundingBox=new Si,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Ht(t,i,l){Pn.identity();var f=new _a({widthSegments:i,heightSegments:l});switch(t){case"px":Be.translate(Pn,Pn,hr.POSITIVE_X),Be.rotateY(Pn,Pn,Math.PI/2);break;case"nx":Be.translate(Pn,Pn,hr.NEGATIVE_X),Be.rotateY(Pn,Pn,-Math.PI/2);break;case"py":Be.translate(Pn,Pn,hr.POSITIVE_Y),Be.rotateX(Pn,Pn,-Math.PI/2);break;case"ny":Be.translate(Pn,Pn,hr.NEGATIVE_Y),Be.rotateX(Pn,Pn,Math.PI/2);break;case"pz":Be.translate(Pn,Pn,hr.POSITIVE_Z);break;case"nz":Be.translate(Pn,Pn,hr.NEGATIVE_Z),Be.rotateY(Pn,Pn,Math.PI);break}return f.applyTransform(Pn),f}var Rt=jt,Wt=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;pr.import(Wt);var Yt=ga.extend(function(){var t=new pr({vertex:pr.source("clay.skybox.vertex"),fragment:pr.source("clay.skybox.fragment")}),i=new Fe({shader:t,depthMask:!1});return{scene:null,geometry:new Rt,material:i,environmentMap:null,culling:!1,_dummyCamera:new Jn}},function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){t.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),t.minFilter=Er.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,i,l){this.renderSkybox(t,l)},renderSkybox:function(t,i){var l=this._dummyCamera;l.aspect=t.getViewportAspect(),l.fov=i.fov||50,l.updateProjectionMatrix(),Be.invert(l.invProjectionMatrix,l.projectionMatrix),l.worldTransform.copy(i.worldTransform),l.viewMatrix.copy(i.viewMatrix),this.position.copy(i.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],l)}}),re=Yt,ve=re,Ze=542327876,Ue=1,er=2,lr=4,ue=8,Te=4096,ye=131072,ze=524288,Ye=8388608,ir=8,ur=4194304,Or=4096,yr=512,zr=1024,en=2048,Ar=4096,pn=8192,Oi=16384,wn=32768,Gi=2097152,Ba=1,xu=2,Yo=4,gn=64,$n=512,ih=131072;function Al(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function Rs(t){return String.fromCharCode(t&255,t>>8&255,t>>16&255,t>>24&255)}var _u=31,o0=Al("DXT1"),ah=Al("DXT3"),Zd=Al("DXT5"),yf=0,Yd=1,Kd=2,oh=3,Qd=4,Jd=7,Ns=20,sh=21,di=27,$d=28,xn=29,Rr=30,xf={parse:function(t,i){var l=new Int32Array(t,0,_u);if(l[yf]!==Ze||!l(Ns)&Yo)return null;var f=l(sh),h=l[Qd],p=l[oh],y=l[$d]&yr,_=l[Kd]&ye,S,P;switch(f){case o0:S=8,P=Er.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case ah:S=16,P=Er.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Zd:S=16,P=Er.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var j=l[Yd]+4,tt=y?6:1,_t=1;_&&(_t=Math.max(1,l[Jd]));for(var xt=[],Et=0;Et<tt;Et++){var Pt=h,Vt=p;xt[Et]=new Xr({width:Pt,height:Vt,format:P});for(var kt=[],ee=0;ee<_t;ee++){var Jt=Math.max(4,Pt)/4*Math.max(4,Vt)/4*S,$t=new Uint8Array(t,j,Jt);j+=Jt,Pt*=.5,Vt*=.5,kt[ee]=$t}xt[Et].pixels=kt[0],_&&(xt[Et].mipmaps=kt)}if(i)i.width=xt[0].width,i.height=xt[0].height,i.format=xt[0].format,i.pixels=xt[0].pixels,i.mipmaps=xt[0].mipmaps;else return xt[0]}},lh=xf,bu=String.fromCharCode,qd=8,ba=32767;function tp(t,i,l,f){if(t[3]>0){var h=Math.pow(2,t[3]-128-8+f);i[l+0]=t[0]*h,i[l+1]=t[1]*h,i[l+2]=t[2]*h}else i[l+0]=0,i[l+1]=0,i[l+2]=0;return i[l+3]=1,i}function ep(t,i,l){for(var f="",h=i;h<l;h++)f+=bu(t[h]);return f}function _f(t,i){i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]}function bf(t,i,l,f){for(var h=0,p=0,y=f;y>0;)if(t[p][0]=i[l++],t[p][1]=i[l++],t[p][2]=i[l++],t[p][3]=i[l++],t[p][0]===1&&t[p][1]===1&&t[p][2]===1){for(var _=t[p][3]<<h>>>0;_>0;_--)_f(t[p-1],t[p]),p++,y--;h+=8}else p++,y--,h=0;return l}function uh(t,i,l,f){if(f<qd|f>ba)return bf(t,i,l,f);var h=i[l++];if(h!=2)return bf(t,i,l-1,f);if(t[0][1]=i[l++],t[0][2]=i[l++],h=i[l++],(t[0][2]<<8>>>0|h)>>>0!==f)return null;for(var h=0;h<4;h++)for(var p=0;p<f;){var y=i[l++];if(y>128){y=(y&127)>>>0;for(var _=i[l++];y--;)t[p++][h]=_}else for(;y--;)t[p++][h]=i[l++]}return l}var js={parseRGBE:function(t,i,l){l==null&&(l=0);var f=new Uint8Array(t),h=f.length;if(ep(f,0,2)==="#?"){for(var p=2;p<h&&!(bu(f[p])===`
`&&bu(f[p+1])===`
`);p++);if(!(p>=h)){p+=2;for(var y="";p<h;p++){var _=bu(f[p]);if(_===`
`)break;y+=_}var S=y.split(" "),P=parseInt(S[1]),j=parseInt(S[3]);if(!(!j||!P)){for(var tt=p+1,_t=[],xt=0;xt<j;xt++){_t[xt]=[];for(var Et=0;Et<4;Et++)_t[xt][Et]=0}for(var Pt=new Float32Array(j*P*4),Vt=0,kt=0;kt<P;kt++){var tt=uh(_t,f,tt,j);if(!tt)return null;for(var xt=0;xt<j;xt++)tp(_t[xt],Pt,Vt,l),Vt+=4}return i||(i=new Xr),i.width=j,i.height=P,i.pixels=Pt,i.type=Er.FLOAT,i}}}},parseRGBEFromPNG:function(t){}},Su=js,Bs={loadTexture:function(t,i,l,f){var h;if(typeof i=="function"?(l=i,f=l,i={}):i=i||{},typeof t=="string"){if(t.match(/.hdr$/)||i.fileType==="hdr")return h=new Xr({width:0,height:0,sRGB:!1}),Bs._fetchTexture(t,function(p){Su.parseRGBE(p,h,i.exposure),h.dirty(),l&&l(h)},f),h;t.match(/.dds$/)||i.fileType==="dds"?(h=new Xr({width:0,height:0}),Bs._fetchTexture(t,function(p){lh.parse(p,h),h.dirty(),l&&l(h)},f)):(h=new Xr,h.load(t),h.success(l),h.error(f))}else typeof t=="object"&&typeof t.px!="undefined"&&(h=new vo,h.load(t),h.success(l),h.error(f));return h},loadPanorama:function(t,i,l,f,h,p){var y=this;typeof f=="function"?(h=f,p=h,f={}):f=f||{},Bs.loadTexture(i,f,function(_){_.flipY=f.flipY||!1,y.panoramaToCubeMap(t,_,l,f),_.dispose(t),h&&h(l)},p)},panoramaToCubeMap:function(t,i,l,f){var h=new Vi,p=new ve({scene:new $i});return p.setEnvironmentMap(i),f=f||{},f.encodeRGBM&&p.material.define("fragment","RGBM_ENCODE"),l.sRGB=i.sRGB,h.texture=l,h.render(t,p.scene),h.texture=null,h.dispose(t),l},heightToNormal:function(t,i){var l=document.createElement("canvas"),f=l.width=t.width,h=l.height=t.height,p=l.getContext("2d");p.drawImage(t,0,0,f,h),i=i||!1;for(var y=p.getImageData(0,0,f,h),_=p.createImageData(f,h),S=0;S<y.data.length;S+=4){if(i){var P=y.data[S],j=y.data[S+1],tt=y.data[S+2],_t=Math.abs(P-j)+Math.abs(j-tt);if(_t>20)return console.warn("Given image is not a height map"),t}var xt,Et,Pt,Vt;S%(f*4)==0?(xt=y.data[S],Pt=y.data[S+4]):S%(f*4)==(f-1)*4?(xt=y.data[S-4],Pt=y.data[S]):(xt=y.data[S-4],Pt=y.data[S+4]),S<f*4?(Et=y.data[S],Vt=y.data[S+f*4]):S>f*(h-1)*4?(Et=y.data[S-f*4],Vt=y.data[S]):(Et=y.data[S-f*4],Vt=y.data[S+f*4]),_.data[S]=xt-Pt+127,_.data[S+1]=Et-Vt+127,_.data[S+2]=255,_.data[S+3]=255}return p.putImageData(_,0,0),l},isHeightImage:function(t,i,l){if(!t||!t.width||!t.height)return!1;var f=document.createElement("canvas"),h=f.getContext("2d"),p=i||32;l=l||20,f.width=f.height=p,h.drawImage(t,0,0,p,p);for(var y=h.getImageData(0,0,p,p),_=0;_<y.data.length;_+=4){var S=y.data[_],P=y.data[_+1],j=y.data[_+2],tt=Math.abs(S-P)+Math.abs(P-j);if(tt>l)return!1}return!0},_fetchTexture:function(t,i,l){C.a.request.get({url:t,responseType:"arraybuffer",onload:i,onerror:l})},createChessboard:function(t,i,l,f){t=t||512,i=i||64,l=l||"black",f=f||"white";var h=Math.ceil(t/i),p=document.createElement("canvas");p.width=t,p.height=t;var y=p.getContext("2d");y.fillStyle=f,y.fillRect(0,0,t,t),y.fillStyle=l;for(var _=0;_<h;_++)for(var S=0;S<h;S++){var P=S%2?_%2:_%2-1;P&&y.fillRect(_*i,S*i,i,i)}var j=new Xr({image:p,anisotropic:8});return j},createBlank:function(t){var i=document.createElement("canvas");i.width=1,i.height=1;var l=i.getContext("2d");l.fillStyle=t,l.fillRect(0,0,1,1);var f=new Xr({image:i});return f}},go=Bs,Sf=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function Ml(t){return"_on"+t}var Tu=function(t){var i=this;this._texture=new Xr({anisotropic:32,flipY:!1,surface:this,dispose:function(l){i.dispose(),Xr.prototype.dispose.call(this,l)}}),Sf.forEach(function(l){this[Ml(l)]=function(f){!f.triangle||this._meshes.forEach(function(h){this.dispatchEvent(l,h,f.triangle,f.point)},this)}},this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};Tu.prototype={constructor:Tu,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var i=t.getDom();if(!(i instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),i=document.createElement("canvas");else{var l=this,f=t.getZr(),h=f.__oldRefreshImmediately||f.refreshImmediately;f.refreshImmediately=function(){h.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},f.__oldRefreshImmediately=h}this._texture.image=i,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new hr,i=new hr,l=new hr,f=new Me,h=new Me,p=new Me,y=new Me,_=new hr;return function(S,P,j,tt){var _t=P.geometry,xt=_t.attributes.position,Et=_t.attributes.texcoord0,Pt=hr.dot,Vt=hr.cross;xt.get(j[0],t.array),xt.get(j[1],i.array),xt.get(j[2],l.array),Et.get(j[0],f.array),Et.get(j[1],h.array),Et.get(j[2],p.array),Vt(_,i,l);var kt=Pt(t,_),ee=Pt(tt,_)/kt;Vt(_,l,t);var Jt=Pt(tt,_)/kt;Vt(_,t,i);var $t=Pt(tt,_)/kt;Me.scale(y,f,ee),Me.scaleAndAdd(y,y,h,Jt),Me.scaleAndAdd(y,y,p,$t);var ce=y.x*this._chart.getWidth(),de=y.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(S,{zrX:ce,zrY:de})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(Sf.forEach(function(i){t.on(i,this[Ml(i)],this)},this),this._meshes.push(t))},detachFromMesh:function(t){var i=this._meshes.indexOf(t);i>=0&&this._meshes.splice(i,1),Sf.forEach(function(l){t.off(l,this[Ml(l)])},this)},dispose:function(){this._meshes.forEach(function(t){this.detachFromMesh(t)},this)}};var fh=Tu,rp=wa.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=wa.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}}),Fs=rp,Ui=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;pr.import(Ui);var fi=new _a,Ja=new ga({geometry:fi,frustumCulling:!1}),Ko=new Fs,ch=Y.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var t=new pr(pr.source("clay.compositor.vertex"),this.fragment),i=new Fe({shader:t});i.enableTexturesAll(),this.material=i},{setUniform:function(t,i){this.material.setUniform(t,i)},getUniform:function(t){var i=this.material.uniforms[t];if(i)return i.value},attachOutput:function(t,i){this.outputs||(this.outputs={}),i=i||A.COLOR_ATTACHMENT0,this.outputs[i]=t},detachOutput:function(t){for(var i in this.outputs)this.outputs[i]===t&&(this.outputs[i]=null)},bind:function(t,i){if(this.outputs)for(var l in this.outputs){var f=this.outputs[l];f&&i.attach(f,l)}i&&i.bind(t)},unbind:function(t,i){i.unbind(t)},render:function(t,i){var l=t.gl;if(i){this.bind(t,i);var f=t.getGLExtension("EXT_draw_buffers");if(f&&this.outputs){var h=[];for(var p in this.outputs)p=+p,p>=l.COLOR_ATTACHMENT0&&p<=l.COLOR_ATTACHMENT0+8&&h.push(p);f.drawBuffersEXT(h)}}this.trigger("beforerender",this,t);var y=this.clearDepth?l.DEPTH_BUFFER_BIT:0;if(l.depthMask(!0),this.clearColor){y=y|l.COLOR_BUFFER_BIT,l.colorMask(!0,!0,!0,!0);var _=this.clearColor;Array.isArray(_)&&l.clearColor(_[0],_[1],_[2],_[3])}l.clear(y),this.blendWithPrevious?(l.enable(l.BLEND),this.material.transparent=!0):(l.disable(l.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),i&&this.unbind(t,i)},renderQuad:function(t){Ja.material=this.material,t.renderPass([Ja],Ko)},dispose:function(t){}}),ni=ch,np=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,ua=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`,mo={},Ou=["px","nx","py","ny","pz","nz"];mo.prefilterEnvironmentMap=function(t,i,l,f,h){(!h||!f)&&(f=mo.generateNormalDistribution(),h=mo.integrateBRDF(t,f)),l=l||{};var p=l.width||64,y=l.height||64,_=l.type||i.type,S=new vo({width:p,height:y,type:_,flipY:!1,mipmaps:[]});S.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var P=Math.min(p,y),j=Math.log(P)/Math.log(2)+1,tt=new Fe({shader:new pr({vertex:pr.source("clay.skybox.vertex"),fragment:ua})});tt.set("normalDistribution",f),l.encodeRGBM&&tt.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&tt.define("fragment","RGBM_DECODE");var _t=new $i,xt;if(i.textureType==="texture2D"){var Et=new vo({width:p,height:y,type:_===Er.FLOAT?Er.HALF_FLOAT:_});go.panoramaToCubeMap(t,i,Et,{encodeRGBM:l.decodeRGBM}),i=Et}xt=new re({scene:_t,material:tt}),xt.material.set("environmentMap",i);var Pt=new Vi({texture:S});l.encodeRGBM&&(_=S.type=Er.UNSIGNED_BYTE);for(var Vt=new Xr({width:p,height:y,type:_}),kt=new Wn({depthBuffer:!1}),ee=C.a[_===Er.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],Jt=0;Jt<j;Jt++){S.mipmaps[Jt]={pixels:{}},xt.material.set("roughness",Jt/(j-1));for(var $t=Vt.width,ce=2*Math.atan($t/($t-.5))/Math.PI*180,de=0;de<Ou.length;de++){var we=new ee(Vt.width*Vt.height*4);kt.attach(Vt),kt.bind(t);var Ae=Pt.getCamera(Ou[de]);Ae.fov=ce,t.render(_t,Ae),t.gl.readPixels(0,0,Vt.width,Vt.height,Er.RGBA,_,we),kt.unbind(t),S.mipmaps[Jt].pixels[Ou[de]]=we}Vt.width/=2,Vt.height/=2,Vt.dirty()}return kt.dispose(t),Vt.dispose(t),xt.dispose(t),f.dispose(t),{environmentMap:S,brdfLookup:h,normalDistribution:f,maxMipmapLevel:j}},mo.integrateBRDF=function(t,i){i=i||mo.generateNormalDistribution();var l=new Wn({depthBuffer:!1}),f=new ni({fragment:np}),h=new Xr({width:512,height:256,type:Er.HALF_FLOAT,wrapS:Er.CLAMP_TO_EDGE,wrapT:Er.CLAMP_TO_EDGE,minFilter:Er.NEAREST,magFilter:Er.NEAREST,useMipmap:!1});return f.setUniform("normalDistribution",i),f.setUniform("viewportSize",[512,256]),f.attachOutput(h),f.render(t,l),l.dispose(t),h},mo.generateNormalDistribution=function(t,i){for(var t=t||256,i=i||1024,l=new Xr({width:t,height:i,type:Er.FLOAT,minFilter:Er.NEAREST,magFilter:Er.NEAREST,wrapS:Er.CLAMP_TO_EDGE,wrapT:Er.CLAMP_TO_EDGE,useMipmap:!1}),f=new Float32Array(i*t*4),h=[],p=0;p<t;p++){for(var y=p/t,_=y*y,S=0;S<i;S++){var P=(S<<16|S>>>16)>>>0;P=((P&1431655765)<<1|(P&2863311530)>>>1)>>>0,P=((P&858993459)<<2|(P&3435973836)>>>2)>>>0,P=((P&252645135)<<4|(P&4042322160)>>>4)>>>0,P=(((P&16711935)<<8|(P&4278255360)>>>8)>>>0)/4294967296;var j=Math.sqrt((1-P)/(1+(_*_-1)*P));h[S]=j}for(var S=0;S<i;S++){var tt=(S*t+p)*4,j=h[S],_t=Math.sqrt(1-j*j),xt=S/i,Et=2*Math.PI*xt;f[tt]=_t*Math.cos(Et),f[tt+1]=j,f[tt+2]=_t*Math.sin(Et),f[tt+3]=1}}return l.pixels=f,l};var Dl=mo,ip=Gn.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,i){if(!t.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=Dl.generateNormalDistribution(),this._brdfLookup=Dl.integrateBRDF(t,this._normalDistribution));var l=this.cubemap;if(!l.__prefiltered){var f=Dl.prefilterEnvironmentMap(t,l,{encodeRGBM:!0,width:i,height:i},this._normalDistribution,this._brdfLookup);this.cubemap=f.environmentMap,this.cubemap.__prefiltered=!0,l.dispose(t)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}}),ap=ip,op=Gn.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new C.a.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var i=t._coefficientsTmpArr,l=0;l<t.coefficients.length;l++)i[l]=t.coefficients[l];return i}}}}),$a=op,sp=`uniform samplerCube environmentMap;
varying vec2 v_Texcoord;
#define TEXTURE_SIZE 16
mat3 front = mat3(
 1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, 1.0
);
mat3 back = mat3(
 -1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, -1.0
);
mat3 left = mat3(
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0,
 1.0, 0.0, 0.0
);
mat3 right = mat3(
 0.0, 0.0, 1.0,
 0.0, 1.0, 0.0,
 -1.0, 0.0, 0.0
);
mat3 up = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, 1.0,
 0.0, -1.0, 0.0
);
mat3 down = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0
);
float harmonics(vec3 normal){
 int index = int(gl_FragCoord.x);
 float x = normal.x;
 float y = normal.y;
 float z = normal.z;
 if(index==0){
 return 1.0;
 }
 else if(index==1){
 return x;
 }
 else if(index==2){
 return y;
 }
 else if(index==3){
 return z;
 }
 else if(index==4){
 return x*z;
 }
 else if(index==5){
 return y*z;
 }
 else if(index==6){
 return x*y;
 }
 else if(index==7){
 return 3.0*z*z - 1.0;
 }
 else{
 return x*x - y*y;
 }
}
vec3 sampleSide(mat3 rot)
{
 vec3 result = vec3(0.0);
 float divider = 0.0;
 for (int i = 0; i < TEXTURE_SIZE * TEXTURE_SIZE; i++) {
 float x = mod(float(i), float(TEXTURE_SIZE));
 float y = float(i / TEXTURE_SIZE);
 vec2 sidecoord = ((vec2(x, y) + vec2(0.5, 0.5)) / vec2(TEXTURE_SIZE)) * 2.0 - 1.0;
 vec3 normal = normalize(vec3(sidecoord, -1.0));
 vec3 fetchNormal = rot * normal;
 vec3 texel = textureCube(environmentMap, fetchNormal).rgb;
 result += harmonics(fetchNormal) * texel * -normal.z;
 divider += -normal.z;
 }
 return result / divider;
}
void main()
{
 vec3 result = (
 sampleSide(front) +
 sampleSide(back) +
 sampleSide(left) +
 sampleSide(right) +
 sampleSide(up) +
 sampleSide(down)
 ) / 6.0;
 gl_FragColor = vec4(result, 1.0);
}`,hh={},Qo=["px","nx","py","ny","pz","nz"];function s0(t,i){var l=new Xr({width:9,height:1,type:Er.FLOAT}),f=new ni({fragment:sp});f.material.define("fragment","TEXTURE_SIZE",i.width),f.setUniform("environmentMap",i);var h=new Wn;h.attach(l),f.render(t,h),h.bind(t);var p=new C.a.Float32Array(9*4);t.gl.readPixels(0,0,9,1,Er.RGBA,Er.FLOAT,p);for(var y=new C.a.Float32Array(9*3),_=0;_<9;_++)y[_*3]=p[_*4],y[_*3+1]=p[_*4+1],y[_*3+2]=p[_*4+2];return h.unbind(t),h.dispose(t),f.dispose(t),y}function lp(t,i){var l=t[0],f=t[1],h=t[2];return i===0?1:i===1?l:i===2?f:i===3?h:i===4?l*h:i===5?f*h:i===6?l*f:i===7?3*h*h-1:l*l-f*f}var Tf={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function up(t,i,l,f){for(var h=new C.a.Float32Array(9*3),p=Oe.create(),y=Oe.create(),_=Oe.create(),S=0;S<9;S++){for(var P=Oe.create(),j=0;j<Qo.length;j++){for(var tt=i[Qo[j]],_t=Oe.create(),xt=0,Et=0,Pt=Tf[Qo[j]],Vt=0;Vt<f;Vt++)for(var kt=0;kt<l;kt++){p[0]=kt/(l-1)*2-1,p[1]=Vt/(f-1)*2-1,p[2]=-1,Oe.normalize(p,p),_[0]=p[Pt[0]]*Pt[3],_[1]=p[Pt[1]]*Pt[4],_[2]=p[Pt[2]]*Pt[5],y[0]=tt[Et++]/255,y[1]=tt[Et++]/255,y[2]=tt[Et++]/255;var ee=tt[Et++]/255*8.12;y[0]*=ee,y[1]*=ee,y[2]*=ee,Oe.scaleAndAdd(_t,_t,y,lp(_,S)*-p[2]),xt+=-p[2]}Oe.scaleAndAdd(P,P,_t,1/xt)}h[S*3]=P[0]/6,h[S*3+1]=P[1]/6,h[S*3+2]=P[2]/6}return h}hh.projectEnvironmentMap=function(t,i,l){l=l||{},l.lod=l.lod||0;var f,h=new $i,p=64;i.textureType==="texture2D"?f=new ve({scene:h,environmentMap:i}):(p=i.image&&i.image.px?i.image.px.width:i.width,f=new re({scene:h,environmentMap:i}));var y=Math.ceil(p/Math.pow(2,l.lod)),_=Math.ceil(p/Math.pow(2,l.lod)),S=new Xr({width:y,height:_}),P=new Wn;f.material.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&f.material.define("fragment","RGBM_DECODE"),f.material.set("lod",l.lod);for(var j=new Vi({texture:S}),tt={},_t=0;_t<Qo.length;_t++){tt[Qo[_t]]=new Uint8Array(y*_*4);var xt=j.getCamera(Qo[_t]);xt.fov=90,P.attach(S),P.bind(t),t.render(h,xt),t.gl.readPixels(0,0,y,_,Er.RGBA,Er.UNSIGNED_BYTE,tt[Qo[_t]]),P.unbind(t)}return f.dispose(t),P.dispose(t),S.dispose(t),up(t,tt,y,_)};var Of=hh,fp={firstNotNull:function(){for(var t=0,i=arguments.length;t<i;t++)if(arguments[t]!=null)return arguments[t]},queryDataIndex:function(t,i){if(i.dataIndexInside!=null)return i.dataIndexInside;if(i.dataIndex!=null)return B.x.isArray(i.dataIndex)?B.x.map(i.dataIndex,function(l){return t.indexOfRawIndex(l)}):t.indexOfRawIndex(i.dataIndex);if(i.name!=null)return B.x.isArray(i.name)?B.x.map(i.name,function(l){return t.indexOfName(l)}):t.indexOfName(i.name)}},Zr=fp,El=tn.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,i=this.widthSegments,l=this.attributes.position,f=this.attributes.texcoord0,h=this.attributes.normal,p=(i+1)*(t+1);l.init(p),f.init(p),h.init(p);var y=p>65535?Uint32Array:Uint16Array,_=this.indices=new y(i*t*6),S,P,j,tt,_t,xt,Et,Pt=this.radius,Vt=this.phiStart,kt=this.phiLength,ee=this.thetaStart,Jt=this.thetaLength,Pt=this.radius,$t=[],ce=[],de=0,we=1/Pt;for(Et=0;Et<=t;Et++)for(xt=0;xt<=i;xt++)tt=xt/i,_t=Et/t,S=-Pt*Math.cos(Vt+tt*kt)*Math.sin(ee+_t*Jt),P=Pt*Math.cos(ee+_t*Jt),j=Pt*Math.sin(Vt+tt*kt)*Math.sin(ee+_t*Jt),$t[0]=S,$t[1]=P,$t[2]=j,ce[0]=tt,ce[1]=_t,l.set(de,$t),f.set(de,ce),$t[0]*=we,$t[1]*=we,$t[2]*=we,h.set(de,$t),de++;var Ae,Ge,rr,Qe,sr=i+1,fr=0;for(Et=0;Et<t;Et++)for(xt=0;xt<i;xt++)Ge=Et*sr+xt,Ae=Et*sr+xt+1,Qe=(Et+1)*sr+xt+1,rr=(Et+1)*sr+xt,_[fr++]=Ae,_[fr++]=Ge,_[fr++]=Qe,_[fr++]=Ge,_[fr++]=rr,_[fr++]=Qe;this.boundingBox=new Si,this.boundingBox.max.set(Pt,Pt,Pt),this.boundingBox.min.set(-Pt,-Pt,-Pt)}}),vh=El,cp=Gn.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}}}),Jo=cp,Af=Gn.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new hr,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Gn.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),dh=Af,ph=Gn.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Gn.prototype.clone.call(this);return t.range=this.range,t}}),hp=ph,vp=Gn.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new hr,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Gn.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Mf=vp,on=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f||0,this.array=mr.fromValues(t,i,l,f),this._dirty=!0};on.prototype={constructor:on,add:function(t){return mr.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new on(this.x,this.y,this.z,this.w)},copy:function(t){return mr.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return mr.dist(this.array,t.array)},distance:function(t){return mr.distance(this.array,t.array)},div:function(t){return mr.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return mr.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return mr.dot(this.array,t.array)},len:function(){return mr.len(this.array)},length:function(){return mr.length(this.array)},lerp:function(t,i,l){return mr.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return mr.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return mr.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return mr.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return mr.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return mr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return mr.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return mr.random(this.array,t),this._dirty=!0,this},scale:function(t){return mr.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return mr.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return mr.sqrDist(this.array,t.array)},squaredDistance:function(t){return mr.squaredDistance(this.array,t.array)},sqrLen:function(){return mr.sqrLen(this.array)},squaredLength:function(){return mr.squaredLength(this.array)},sub:function(t){return mr.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return mr.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return mr.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return mr.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var zs=Object.defineProperty;if(zs){var Au=on.prototype;zs(Au,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),zs(Au,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),zs(Au,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),zs(Au,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}on.add=function(t,i,l){return mr.add(t.array,i.array,l.array),t._dirty=!0,t},on.set=function(t,i,l,f,h){mr.set(t.array,i,l,f,h),t._dirty=!0},on.copy=function(t,i){return mr.copy(t.array,i.array),t._dirty=!0,t},on.dist=function(t,i){return mr.distance(t.array,i.array)},on.distance=on.dist,on.div=function(t,i,l){return mr.divide(t.array,i.array,l.array),t._dirty=!0,t},on.divide=on.div,on.dot=function(t,i){return mr.dot(t.array,i.array)},on.len=function(t){return mr.length(t.array)},on.lerp=function(t,i,l,f){return mr.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},on.min=function(t,i,l){return mr.min(t.array,i.array,l.array),t._dirty=!0,t},on.max=function(t,i,l){return mr.max(t.array,i.array,l.array),t._dirty=!0,t},on.mul=function(t,i,l){return mr.multiply(t.array,i.array,l.array),t._dirty=!0,t},on.multiply=on.mul,on.negate=function(t,i){return mr.negate(t.array,i.array),t._dirty=!0,t},on.normalize=function(t,i){return mr.normalize(t.array,i.array),t._dirty=!0,t},on.random=function(t,i){return mr.random(t.array,i),t._dirty=!0,t},on.scale=function(t,i,l){return mr.scale(t.array,i.array,l),t._dirty=!0,t},on.scaleAndAdd=function(t,i,l,f){return mr.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},on.sqrDist=function(t,i){return mr.sqrDist(t.array,i.array)},on.squaredDistance=on.sqrDist,on.sqrLen=function(t){return mr.sqrLen(t.array)},on.squaredLength=on.sqrLen,on.sub=function(t,i,l){return mr.subtract(t.array,i.array,l.array),t._dirty=!0,t},on.subtract=on.sub,on.transformMat4=function(t,i,l){return mr.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},on.transformQuat=function(t,i,l){return mr.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};var l0=on,Pi={};Pi.create=function(){var t=new Tt(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Pi.clone=function(t){var i=new Tt(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},Pi.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},Pi.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Pi.transpose=function(t,i){if(t===i){var l=i[1];t[1]=i[2],t[2]=l}else t[0]=i[0],t[1]=i[2],t[2]=i[1],t[3]=i[3];return t},Pi.invert=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=l*p-h*f;return y?(y=1/y,t[0]=p*y,t[1]=-f*y,t[2]=-h*y,t[3]=l*y,t):null},Pi.adjoint=function(t,i){var l=i[0];return t[0]=i[3],t[1]=-i[1],t[2]=-i[2],t[3]=l,t},Pi.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Pi.multiply=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=l[0],S=l[1],P=l[2],j=l[3];return t[0]=f*_+p*S,t[1]=h*_+y*S,t[2]=f*P+p*j,t[3]=h*P+y*j,t},Pi.mul=Pi.multiply,Pi.rotate=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=Math.sin(l),S=Math.cos(l);return t[0]=f*S+p*_,t[1]=h*S+y*_,t[2]=f*-_+p*S,t[3]=h*-_+y*S,t},Pi.scale=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=l[0],S=l[1];return t[0]=f*_,t[1]=h*_,t[2]=p*S,t[3]=y*S,t},Pi.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},Pi.LDU=function(t,i,l,f){return t[2]=f[2]/f[0],l[0]=f[0],l[1]=f[1],l[3]=f[3]-t[2]*l[1],[t,i,l]};var kn=Pi,wi=function(){this.array=kn.create(),this._dirty=!0};wi.prototype={constructor:wi,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new wi().copy(this)},copy:function(t){return kn.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return kn.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return kn.determinant(this.array)},identity:function(){return kn.identity(this.array),this._dirty=!0,this},invert:function(){return kn.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return kn.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return kn.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return kn.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return kn.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return kn.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return kn.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return kn.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},wi.adjoint=function(t,i){return kn.adjoint(t.array,i.array),t._dirty=!0,t},wi.copy=function(t,i){return kn.copy(t.array,i.array),t._dirty=!0,t},wi.determinant=function(t){return kn.determinant(t.array)},wi.identity=function(t){return kn.identity(t.array),t._dirty=!0,t},wi.invert=function(t,i){return kn.invert(t.array,i.array),t._dirty=!0,t},wi.mul=function(t,i,l){return kn.mul(t.array,i.array,l.array),t._dirty=!0,t},wi.multiply=wi.mul,wi.rotate=function(t,i,l){return kn.rotate(t.array,i.array,l),t._dirty=!0,t},wi.scale=function(t,i,l){return kn.scale(t.array,i.array,l.array),t._dirty=!0,t},wi.transpose=function(t,i){return kn.transpose(t.array,i.array),t._dirty=!0,t};var dp=wi,Ki={};Ki.create=function(){var t=new Tt(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Ki.clone=function(t){var i=new Tt(6);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i},Ki.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t},Ki.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Ki.invert=function(t,i){var l=i[0],f=i[1],h=i[2],p=i[3],y=i[4],_=i[5],S=l*p-f*h;return S?(S=1/S,t[0]=p*S,t[1]=-f*S,t[2]=-h*S,t[3]=l*S,t[4]=(h*_-p*y)*S,t[5]=(f*y-l*_)*S,t):null},Ki.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},Ki.multiply=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=l[0],j=l[1],tt=l[2],_t=l[3],xt=l[4],Et=l[5];return t[0]=f*P+p*j,t[1]=h*P+y*j,t[2]=f*tt+p*_t,t[3]=h*tt+y*_t,t[4]=f*xt+p*Et+_,t[5]=h*xt+y*Et+S,t},Ki.mul=Ki.multiply,Ki.rotate=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=Math.sin(l),j=Math.cos(l);return t[0]=f*j+p*P,t[1]=h*j+y*P,t[2]=f*-P+p*j,t[3]=h*-P+y*j,t[4]=_,t[5]=S,t},Ki.scale=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=l[0],j=l[1];return t[0]=f*P,t[1]=h*P,t[2]=p*j,t[3]=y*j,t[4]=_,t[5]=S,t},Ki.translate=function(t,i,l){var f=i[0],h=i[1],p=i[2],y=i[3],_=i[4],S=i[5],P=l[0],j=l[1];return t[0]=f,t[1]=h,t[2]=p,t[3]=y,t[4]=f*P+p*j+_,t[5]=h*P+y*j+S,t},Ki.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var ii=Ki,Hi=function(){this.array=ii.create(),this._dirty=!0};Hi.prototype={constructor:Hi,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new Hi().copy(this)},copy:function(t){return ii.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return ii.determinant(this.array)},identity:function(){return ii.identity(this.array),this._dirty=!0,this},invert:function(){return ii.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return ii.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return ii.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return ii.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return ii.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return ii.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return ii.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return ii.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Hi.copy=function(t,i){return ii.copy(t.array,i.array),t._dirty=!0,t},Hi.determinant=function(t){return ii.determinant(t.array)},Hi.identity=function(t){return ii.identity(t.array),t._dirty=!0,t},Hi.invert=function(t,i){return ii.invert(t.array,i.array),t._dirty=!0,t},Hi.mul=function(t,i,l){return ii.mul(t.array,i.array,l.array),t._dirty=!0,t},Hi.multiply=Hi.mul,Hi.rotate=function(t,i,l){return ii.rotate(t.array,i.array,l),t._dirty=!0,t},Hi.scale=function(t,i,l){return ii.scale(t.array,i.array,l.array),t._dirty=!0,t},Hi.translate=function(t,i,l){return ii.translate(t.array,i.array,l.array),t._dirty=!0,t};var pp=Hi,_n=function(){this.array=qr.create(),this._dirty=!0};_n.prototype={constructor:_n,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return qr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new _n().copy(this)},copy:function(t){return qr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return qr.determinant(this.array)},fromMat2d:function(t){return qr.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return qr.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return qr.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return qr.identity(this.array),this._dirty=!0,this},invert:function(){return qr.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return qr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return qr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return qr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return qr.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return qr.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return qr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return qr.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return qr.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return qr.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},_n.adjoint=function(t,i){return qr.adjoint(t.array,i.array),t._dirty=!0,t},_n.copy=function(t,i){return qr.copy(t.array,i.array),t._dirty=!0,t},_n.determinant=function(t){return qr.determinant(t.array)},_n.identity=function(t){return qr.identity(t.array),t._dirty=!0,t},_n.invert=function(t,i){return qr.invert(t.array,i.array),t},_n.mul=function(t,i,l){return qr.mul(t.array,i.array,l.array),t._dirty=!0,t},_n.multiply=_n.mul,_n.fromMat2d=function(t,i){return qr.fromMat2d(t.array,i.array),t._dirty=!0,t},_n.fromMat4=function(t,i){return qr.fromMat4(t.array,i.array),t._dirty=!0,t},_n.fromQuat=function(t,i){return qr.fromQuat(t.array,i.array),t._dirty=!0,t},_n.normalFromMat4=function(t,i){return qr.normalFromMat4(t.array,i.array),t._dirty=!0,t},_n.rotate=function(t,i,l){return qr.rotate(t.array,i.array,l),t._dirty=!0,t},_n.scale=function(t,i,l){return qr.scale(t.array,i.array,l.array),t._dirty=!0,t},_n.transpose=function(t,i){return qr.transpose(t.array,i.array),t._dirty=!0,t},_n.translate=function(t,i,l){return qr.translate(t.array,i.array,l.array),t._dirty=!0,t};var gp=_n,mp=b("k/Px"),Xn={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,i){this._animators=this._animators||[];var l=this,f;if(t){for(var h=t.split("."),p=l,y=0,_=h.length;y<_;y++)!p||(p=p[h[y]]);p&&(f=p)}else f=l;if(f==null)throw new Error("Target "+t+" not exists");var S=this._animators,P=new mp.b(f,i),j=this;return P.during(function(){j.__zr&&j.__zr.refresh()}).done(function(){var tt=S.indexOf(P);tt>=0&&S.splice(tt,1)}),S.push(P),this.__zr&&this.__zr.animation.addAnimator(P),P},stopAnimation:function(t){this._animators=this._animators||[];for(var i=this._animators,l=i.length,f=0;f<l;f++)i[f].stop(t);return i.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.addAnimator(this._animators[i])},removeAnimatorsFromZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.removeAnimator(this._animators[i])}},yp=Xn,gh=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,Cl=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,Mu=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,xp=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,_p=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,$o=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,mh=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Qr.prototype,yp),pr.import(gh),pr.import(uu),pr.import(Cl),pr.import(Mu),pr.import(xp),pr.import(_p),pr.import($o),pr.import(mh);function bp(t){return!t||t==="none"}function yh(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}function Sp(t){return t.getZr&&t.setOption}var Tp=$i.prototype.addToScene,Op=$i.prototype.removeFromScene;$i.prototype.addToScene=function(t){if(Tp.call(this,t),this.__zr){var i=this.__zr;t.traverse(function(l){l.__zr=i,l.addAnimatorsToZr&&l.addAnimatorsToZr(i)})}},$i.prototype.removeFromScene=function(t){Op.call(this,t),t.traverse(function(i){var l=i.__zr;i.__zr=null,l&&i.removeAnimatorsFromZr&&i.removeAnimatorsFromZr(l)})},Fe.prototype.setTextureImage=function(t,i,l,f){if(!!this.shader){var h=l.getZr(),p=this,y;return p.autoUpdateTextureStatus=!1,p.disableTexture(t),bp(i)||(y=Gr.loadTexture(i,l,f,function(_){p.enableTexture(t),h&&h.refresh()}),p.set(t,y)),y}};var Gr={};Gr.Renderer=ar,Gr.Node=Qr,Gr.Mesh=ga,Gr.Shader=pr,Gr.Material=Fe,Gr.Texture=Er,Gr.Texture2D=Xr,Gr.Geometry=tn,Gr.SphereGeometry=vh,Gr.PlaneGeometry=_a,Gr.CubeGeometry=Rt,Gr.AmbientLight=Jo,Gr.DirectionalLight=dh,Gr.PointLight=hp,Gr.SpotLight=Mf,Gr.PerspectiveCamera=Jn,Gr.OrthographicCamera=Fs,Gr.Vector2=Me,Gr.Vector3=hr,Gr.Vector4=l0,Gr.Quaternion=Ma,Gr.Matrix2=dp,Gr.Matrix2d=pp,Gr.Matrix3=gp,Gr.Matrix4=Be,Gr.Plane=zi,Gr.Ray=Fo,Gr.BoundingBox=Si,Gr.Frustum=ya;var Du=null;function Ap(){return Du!==null||(Du=go.createBlank("rgba(255,255,255,0)").image),Du}function xh(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function Df(t){if((t.wrapS===Er.REPEAT||t.wrapT===Er.REPEAT)&&t.image){var i=xh(t.width),l=xh(t.height);if(i!==t.width||l!==t.height){var f=document.createElement("canvas");f.width=i,f.height=l;var h=f.getContext("2d");h.drawImage(t.image,0,0,i,l),t.image=f}}}Gr.loadTexture=function(t,i,l,f){typeof l=="function"&&(f=l,l={}),l=l||{};for(var h=Object.keys(l).sort(),p="",y=0;y<h.length;y++)p+=h[y]+"_"+l[h[y]]+"_";var _=i.__textureCache=i.__textureCache||new Ls.a(20);if(Sp(t)){var S=t.__textureid__,P=_.get(p+S);if(P)P.texture.surface.setECharts(t),f&&f(P.texture);else{var j=new fh(t);j.onupdate=function(){i.getZr().refresh()},P={texture:j.getTexture()};for(var y=0;y<h.length;y++)P.texture[h[y]]=l[h[y]];S=t.__textureid__||"__ecgl_ec__"+P.texture.__uid__,t.__textureid__=S,_.put(p+S,P),f&&f(P.texture)}return P.texture}else if(yh(t)){var S=t.__textureid__,P=_.get(p+S);if(!P){P={texture:new Gr.Texture2D({image:t})};for(var y=0;y<h.length;y++)P.texture[h[y]]=l[h[y]];S=t.__textureid__||"__ecgl_image__"+P.texture.__uid__,t.__textureid__=S,_.put(p+S,P),Df(P.texture),f&&f(P.texture)}return P.texture}else{var P=_.get(p+t);if(P)P.callbacks?P.callbacks.push(f):f&&f(P.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){P={callbacks:[f]};var tt=go.loadTexture(t,{exposure:l.exposure,fileType:"hdr"},function(){tt.dirty(),P.callbacks.forEach(function(Et){Et&&Et(tt)}),P.callbacks=null});P.texture=tt,_.put(p+t,P)}else{for(var tt=new Gr.Texture2D({image:new Image}),y=0;y<h.length;y++)tt[h[y]]=l[h[y]];P={texture:tt,callbacks:[f]};var _t=tt.image;_t.onload=function(){tt.image=_t,Df(tt),tt.dirty(),P.callbacks.forEach(function(Pt){Pt&&Pt(tt)}),P.callbacks=null},_t.crossOrigin="Anonymous",_t.src=t,tt.image=Ap(),_.put(p+t,P)}return P.texture}},Gr.createAmbientCubemap=function(t,i,l,f){t=t||{};var h=t.texture,p=Zr.firstNotNull(t.exposure,1),y=new ap({intensity:Zr.firstNotNull(t.specularIntensity,1)}),_=new $a({intensity:Zr.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return y.cubemap=Gr.loadTexture(h,l,{exposure:p},function(){if(y.cubemap.flipY=!1,!1)var S;if(y.prefilter(i,32),!1)var P;_.coefficients=Of.projectEnvironmentMap(i,y.cubemap,{lod:1}),f&&f()}),{specular:y,diffuse:_}},Gr.createBlankTexture=go.createBlank,Gr.isImage=yh,Gr.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)},Gr.parseColor=function(t,i){return t instanceof Array?(i||(i=[]),i[0]=t[0],i[1]=t[1],i[2]=t[2],t.length>3?i[3]=t[3]:i[3]=1,i):(i=B.h.parse(t||"#000",i)||[0,0,0,0],i[0]/=255,i[1]/=255,i[2]/=255,i)},Gr.directionFromAlphaBeta=function(t,i){var l=t/180*Math.PI+Math.PI/2,f=-i/180*Math.PI+Math.PI/2,h=[],p=Math.sin(l);return h[0]=p*Math.cos(f),h[1]=-Math.cos(l),h[2]=p*Math.sin(f),h},Gr.getShadowResolution=function(t){var i=1024;switch(t){case"low":i=512;break;case"medium":break;case"high":i=2048;break;case"ultra":i=4096;break}return i},Gr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],Gr.createShader=function(t){t==="ecgl.shadow"&&(t="ecgl.displayShadow");var i=pr.source(t+".vertex"),l=pr.source(t+".fragment");i||console.error("Vertex shader of '%s' not exits",t),l||console.error("Fragment shader of '%s' not exits",t);var f=new pr(i,l);return f.name=t,f},Gr.createMaterial=function(t,i){i instanceof Array||(i=[i]);var l=Gr.createShader(t),f=new Fe({shader:l});return i.forEach(function(h){typeof h=="string"&&f.define(h)}),f},Gr.setMaterialFromModel=function(t,i,l,f){i.autoUpdateTextureStatus=!1;var h=l.getModel(t+"Material"),p=h.get("detailTexture"),y=Zr.firstNotNull(h.get("textureTiling"),1),_=Zr.firstNotNull(h.get("textureOffset"),0);typeof y=="number"&&(y=[y,y]),typeof _=="number"&&(_=[_,_]);var S=y[0]>1||y[1]>1?Gr.Texture.REPEAT:Gr.Texture.CLAMP_TO_EDGE,P={anisotropic:8,wrapS:S,wrapT:S};if(t==="realistic"){var j=h.get("roughness"),tt=h.get("metalness");tt!=null?isNaN(tt)&&(i.setTextureImage("metalnessMap",tt,f,P),tt=Zr.firstNotNull(h.get("metalnessAdjust"),.5)):tt=0,j!=null?isNaN(j)&&(i.setTextureImage("roughnessMap",j,f,P),j=Zr.firstNotNull(h.get("roughnessAdjust"),.5)):j=.5;var _t=h.get("normalTexture");i.setTextureImage("detailMap",p,f,P),i.setTextureImage("normalMap",_t,f,P),i.set({roughness:j,metalness:tt,detailUvRepeat:y,detailUvOffset:_})}else if(t==="lambert")i.setTextureImage("detailMap",p,f,P),i.set({detailUvRepeat:y,detailUvOffset:_});else if(t==="color")i.setTextureImage("detailMap",p,f,P),i.set({detailUvRepeat:y,detailUvOffset:_});else if(t==="hatching"){var xt=h.get("hatchingTextures")||[];xt.length<6;for(var Et=0;Et<6;Et++)i.setTextureImage("hatch"+(Et+1),xt[Et],f,{anisotropic:8,wrapS:Gr.Texture.REPEAT,wrapT:Gr.Texture.REPEAT});i.set({detailUvRepeat:y,detailUvOffset:_})}},Gr.updateVertexAnimation=function(t,i,l,f){var h=f.get("animation"),p=f.get("animationDurationUpdate"),y=f.get("animationEasingUpdate"),_=l.shadowDepthMaterial;if(h&&i&&p>0&&i.geometry.vertexCount===l.geometry.vertexCount){l.material.define("vertex","VERTEX_ANIMATION"),l.ignorePreZ=!0,_&&_.define("vertex","VERTEX_ANIMATION");for(var S=0;S<t.length;S++)l.geometry.attributes[t[S][0]].value=i.geometry.attributes[t[S][1]].value;l.geometry.dirty(),l.__percent=0,l.material.set("percent",0),l.stopAnimation(),l.animate().when(p,{__percent:1}).during(function(){l.material.set("percent",l.__percent),_&&_.set("percent",l.__percent)}).done(function(){l.ignorePreZ=!1,l.material.undefine("vertex","VERTEX_ANIMATION"),_&&_.undefine("vertex","VERTEX_ANIMATION")}).start(y)}else l.material.undefine("vertex","VERTEX_ANIMATION"),_&&_.undefine("vertex","VERTEX_ANIMATION")};var ae=Gr,Vs=b("/FtT"),Sn=function(t,i){this.id=t,this.zr=i;try{this.renderer=new ar({clearBit:0,devicePixelRatio:i.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(i.painter.getWidth(),i.painter.getHeight())}catch(f){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(f);return}this.onglobalout=this.onglobalout.bind(this),i.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var l=this.dom.style;l.position="absolute",l.left="0",l.top="0",this.views=[],this._picking=new As({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new B.l.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};Sn.prototype.setUnpainted=function(){},Sn.prototype.addView=function(t){if(t.layer!==this){var i=this._viewsToDispose.indexOf(t);i>=0&&this._viewsToDispose.splice(i,1),this.views.push(t),t.layer=this;var l=this.zr;t.scene.traverse(function(f){f.__zr=l,f.addAnimatorsToZr&&f.addAnimatorsToZr(l)})}};function _h(t){var i=t.__zr;t.__zr=null,i&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(i)}Sn.prototype.removeView=function(t){if(t.layer===this){var i=this.views.indexOf(t);i>=0&&(this.views.splice(i,1),t.scene.traverse(_h,this),t.layer=null,this._viewsToDispose.push(t))}},Sn.prototype.removeViewsAll=function(){this.views.forEach(function(t){t.scene.traverse(_h,this),t.layer=null,this._viewsToDispose.push(t)},this),this.views.length=0},Sn.prototype.resize=function(t,i){var l=this.renderer;l.resize(t,i)},Sn.prototype.clear=function(){var t=this.renderer.gl,i=this._backgroundColor||[0,0,0,0];t.clearColor(i[0],i[1],i[2],i[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)},Sn.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)},Sn.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},Sn.prototype.needsRefresh=function(){this.zr.refresh()},Sn.prototype.refresh=function(t){this._backgroundColor=t?ae.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var i=0;i<this.views.length;i++)this.views[i].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var i=0;i<this._viewsToDispose.length;i++)this._viewsToDispose[i].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},Sn.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)},Sn.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var i=0;i<this.views.length;i++)this.views[i].render(this.renderer,t);this.renderer.restoreViewport()},Sn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var Mp=1;Sn.prototype._startAccumulating=function(t){var i=this;this._stopAccumulating();for(var l=!1,f=0;f<this.views.length;f++)l=this.views[f].needsAccumulate()||l;if(!l)return;function h(p){if(!(!i._accumulatingId||p!==i._accumulatingId)){for(var y=!0,_=0;_<i.views.length;_++)y=i.views[_].isAccumulateFinished()&&l;y||(i._doRender(!0),t?h(p):Object(Vs.a)(function(){h(p)}))}}this._accumulatingId=Mp++,t?h(i._accumulatingId):this._accumulatingTimeout=setTimeout(function(){h(i._accumulatingId)},50)},Sn.prototype._trackAndClean=function(){var t=[],i=[];this._textureList&&(Pl(this._textureList),Pl(this._geometriesList));for(var l=0;l<this.views.length;l++)Ef(this.views[l].scene,t,i);this._textureList&&(Gs(this.renderer,this._textureList),Gs(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=i};function Pl(t){for(var i=0;i<t.length;i++)t[i].__used__=0}function Gs(t,i){for(var l=0;l<i.length;l++)i[l].__used__||i[l].dispose(t)}function Eu(t,i){t.__used__=t.__used__||0,t.__used__++,t.__used__===1&&i.push(t)}function Ef(t,i,l){var f,h;t.traverse(function(y){if(y.isRenderable()){var _=y.geometry,S=y.material;if(S!==f)for(var P=S.getTextureUniforms(),j=0;j<P.length;j++){var tt=P[j],_t=S.uniforms[tt].value;if(!!_t){if(_t instanceof Er)Eu(_t,i);else if(_t instanceof Array)for(var xt=0;xt<_t.length;xt++)_t[xt]instanceof Er&&Eu(_t[xt],i)}}_!==h&&Eu(_,l),f=S,h=_}});for(var p=0;p<t.lights.length;p++)t.lights[p].cubemap&&Eu(t.lights[p].cubemap,i)}Sn.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Pl(this._textureList),Pl(this._geometriesList),Gs(this.renderer,this._textureList),Gs(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},Sn.prototype.onmousedown=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mousedown",t,i),this._dispatchDataEvent("mousedown",t,i)),this._downX=t.offsetX,this._downY=t.offsetY}},Sn.prototype.onmousemove=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY),l=i&&i.target,f=this._hovered;this._hovered=i,f&&l!==f.target&&(f.relatedTarget=l,this._dispatchEvent("mouseout",t,f),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,i),i&&(this.zr.setCursorStyle("pointer"),(!f||l!==f.target)&&this._dispatchEvent("mouseover",t,i)),this._dispatchDataEvent("mousemove",t,i)}},Sn.prototype.onmouseup=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mouseup",t,i),this._dispatchDataEvent("mouseup",t,i)),this._upX=t.offsetX,this._upY=t.offsetY}},Sn.prototype.onclick=Sn.prototype.dblclick=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){var i=this._upX-this._downX,l=this._upY-this._downY;if(!(Math.sqrt(i*i+l*l)>20)){t=t.event;var f=this.pickObject(t.offsetX,t.offsetY);f&&(this._dispatchEvent(t.type,t,f),this._dispatchDataEvent(t.type,t,f));var h=this._clickToSetFocusPoint(t);if(h){var p=h.view.setDOFFocusOnPoint(h.distance);p&&this.zr.refresh()}}}},Sn.prototype._clickToSetFocusPoint=function(t){for(var i=this.renderer,l=i.viewport,f=this.views.length-1;f>=0;f--){var h=this.views[f];if(h.hasDOF()&&h.containPoint(t.offsetX,t.offsetY)){this._picking.scene=h.scene,this._picking.camera=h.camera,i.viewport=h.viewport;var p=this._picking.pick(t.offsetX,t.offsetY,!0);if(p)return p.view=h,p}}i.viewport=l},Sn.prototype.onglobalout=function(t){var i=this._hovered;i&&this._dispatchEvent("mouseout",t,{target:i.target})},Sn.prototype.pickObject=function(t,i){for(var l=[],f=this.renderer,h=f.viewport,p=0;p<this.views.length;p++){var y=this.views[p];y.containPoint(t,i)&&(this._picking.scene=y.scene,this._picking.camera=y.camera,f.viewport=y.viewport,this._picking.pickAll(t,i,l))}return f.viewport=h,l.sort(function(_,S){return _.distance-S.distance}),l[0]},Sn.prototype._dispatchEvent=function(t,i,l){l||(l={});var f=l.target;for(l.cancelBubble=!1,l.event=i,l.type=t,l.offsetX=i.offsetX,l.offsetY=i.offsetY;f&&(f.trigger(t,l),f=f.getParent(),!l.cancelBubble););this._dispatchToView(t,l)},Sn.prototype._dispatchDataEvent=function(t,i,l){var f=l&&l.target,h=f&&f.dataIndex,p=f&&f.seriesIndex,y=f&&f.eventData,_=!1,S=this._zrEventProxy;S.x=i.offsetX,S.y=i.offsetY,S.update();var P={target:S};const j=B.m.getECData(S);t==="mousemove"&&(h!=null?h!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(j.dataIndex=this._lastDataIndex,j.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(P,"mouseout",i)),_=!0):y!=null&&y!==this._lastEventData&&(this._lastEventData!=null&&(j.eventData=this._lastEventData,this.zr.handler.dispatchToElement(P,"mouseout",i)),_=!0),this._lastEventData=y,this._lastDataIndex=h,this._lastSeriesIndex=p),j.eventData=y,j.dataIndex=h,j.seriesIndex=p,(y!=null||parseInt(h,10)>=0&&parseInt(p,10)>=0)&&(this.zr.handler.dispatchToElement(P,t,i),_&&this.zr.handler.dispatchToElement(P,"mouseover",i))},Sn.prototype._dispatchToView=function(t,i){for(var l=0;l<this.views.length;l++)this.views[l].containPoint(i.offsetX,i.offsetY)&&this.views[l].trigger(t,i)},Object.assign(Sn.prototype,W);var Cf=Sn,Cu=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function qa(t,i){if(t&&t[i]&&(t[i].normal||t[i].emphasis)){var l=t[i].normal,f=t[i].emphasis;l&&(t[i]=l),f&&(t.emphasis=t.emphasis||{},t.emphasis[i]=f)}}function Pf(t){qa(t,"itemStyle"),qa(t,"lineStyle"),qa(t,"areaStyle"),qa(t,"label")}function Us(t){!t||(t instanceof Array||(t=[t]),B.x.each(t,function(i){if(i.axisLabel){var l=i.axisLabel;Object.assign(l,l.textStyle),l.textStyle=null}}))}var Dp=function(t){B.x.each(t.series,function(i){B.x.indexOf(Cu,i.type)>=0&&(Pf(i),i.coordinateSystem==="mapbox"&&(i.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))}),Us(t.xAxis3D),Us(t.yAxis3D),Us(t.zAxis3D),Us(t.grid3D),qa(t.geo3D)};function Hs(t){this._layers={},this._zr=t}Hs.prototype.update=function(t,i){var l=this,f=i.getZr();if(!f.getWidth()||!f.getHeight()){console.warn("Dom has no width or height");return}function h(_){f.setSleepAfterStill(0);var S;_.coordinateSystem&&_.coordinateSystem.model,S=_.get("zlevel");var P=l._layers,j=P[S];if(!j){if(j=P[S]=new Cf("gl-"+S,f),f.painter.isSingleCanvas()){j.virtual=!0;var tt=new B.l.Image({z:1e4,style:{image:j.renderer.canvas},silent:!0});j.__hostImage=tt,f.add(tt)}f.painter.insertLayer(S,j)}return j.__hostImage&&j.__hostImage.setStyle({width:j.renderer.getWidth(),height:j.renderer.getHeight()}),j}function p(_,S){_&&_.traverse(function(P){P.isRenderable&&P.isRenderable()&&(P.ignorePicking=P.$ignorePicking!=null?P.$ignorePicking:S)})}for(var y in this._layers)this._layers[y].removeViewsAll();t.eachComponent(function(_,S){if(_!=="series"){var P=i.getViewOfComponentModel(S),j=S.coordinateSystem;if(P.__ecgl__){var tt;if(j){if(!j.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+S.id);return}tt=j.viewGL}else{if(!S.viewGL){console.error("Can't find viewGL of component "+S.id);return}tt=j.viewGL}var tt=j.viewGL,_t=h(S);_t.addView(tt),P.afterRender&&P.afterRender(S,t,i,_t),p(P.groupGL,S.get("silent"))}}}),t.eachSeries(function(_){var S=i.getViewOfSeriesModel(_),P=_.coordinateSystem;if(S.__ecgl__){if(P&&!P.viewGL&&!S.viewGL){console.error("Can't find viewGL of series "+S.id);return}var j=P&&P.viewGL||S.viewGL,tt=h(_);tt.addView(j),S.afterRender&&S.afterRender(_,t,i,tt),p(S.groupGL,_.get("silent"))}})},B.t(function(t){var i=t.getZr(),l=i.painter.dispose;i.painter.dispose=function(){this.eachOtherLayer(function(f){f instanceof Cf&&f.dispose()}),l.call(this)},i.painter.getRenderedCanvas=function(f){if(f=f||{},this._singleCanvas)return this._layers[0].dom;var h=document.createElement("canvas"),p=f.pixelRatio||this.dpr;h.width=this.getWidth()*p,h.height=this.getHeight()*p;var y=h.getContext("2d");y.dpr=p,y.clearRect(0,0,h.width,h.height),f.backgroundColor&&(y.fillStyle=f.backgroundColor,y.fillRect(0,0,h.width,h.height));var _=this.storage.getDisplayList(!0),S={},P,j=this;function tt(Pt,Vt){var kt=j._zlevelList;Pt==null&&(Pt=-Infinity);for(var ee,Jt=0;Jt<kt.length;Jt++){var $t=kt[Jt],ce=j._layers[$t];if(!ce.__builtin__&&$t>Pt&&$t<Vt){ee=ce;break}}ee&&ee.renderToCanvas&&(y.save(),ee.renderToCanvas(y),y.restore())}for(var _t={ctx:y},xt=0;xt<_.length;xt++){var Et=_[xt];Et.zlevel!==P&&(tt(P,Et.zlevel),P=Et.zlevel),this._doPaintEl(Et,_t,!0,null,S)}return tt(P,Infinity),h}}),B.u(function(t,i){var l=i.getZr(),f=l.__egl=l.__egl||new Hs(l);f.update(t,i)}),B.v(Dp);var u0=Hs,qo={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},t.alpha!=null&&(this.option.viewControl.alpha=t.alpha),t.beta!=null&&(this.option.viewControl.beta=t.beta),t.distance!=null&&(this.option.viewControl.distance=t.distance),t.center!=null&&(this.option.viewControl.center=t.center)}},Ws={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},ts={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}},ks=B.c.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});B.x.merge(ks.prototype,qo),B.x.merge(ks.prototype,Ws),B.x.merge(ks.prototype,ts);var Pu=ks,wl=b("u1in"),yo=Zr.firstNotNull,wf={left:0,middle:1,right:2};function bh(t){return t instanceof Array||(t=[t,t]),t}var Lf=Y.extend(function(){return{zr:null,viewGL:null,_center:new hr,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-Infinity,maxBeta:Infinity,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new Me,_panVelocity:new Me,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(t){this[t]=this[t].bind(this)},this)},{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,i){i=i||{};var l=i.baseDistance||0,f=i.baseOrthoSize||1,h=t.get("projection");h!=="perspective"&&h!=="orthographic"&&h!=="isometric"&&(h="perspective"),this._projection=h,this.viewGL.setProjection(h);var p=t.get("distance")+l,y=t.get("orthographicSize")+f;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-Infinity],["maxBeta",Infinity],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(_t){this[_t[0]]=yo(t.get(_t[0]),_t[1])},this),this.minDistance+=l,this.maxDistance+=l,this.minOrthographicSize+=f,this.maxOrthographicSize+=f;var _=t.ecModel,S={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(_t){S[_t]=yo(t.get(_t),_&&_.get(_t))});var P=yo(i.alpha,t.get("alpha"))||0,j=yo(i.beta,t.get("beta"))||0,tt=yo(i.center,t.get("center"))||[0,0,0];S.animation&&S.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:P,beta:j,center:tt,distance:p,orthographicSize:y,easing:S.animationEasingUpdate,duration:S.animationDurationUpdate}):(this.setDistance(p),this.setAlpha(P),this.setBeta(j),this.setCenter(tt),this.setOrthographicSize(y)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(t){var i=this.zr,l=this,f={},h={};return t.distance!=null&&(f.distance=this.getDistance(),h.distance=t.distance),t.orthographicSize!=null&&(f.orthographicSize=this.getOrthographicSize(),h.orthographicSize=t.orthographicSize),t.alpha!=null&&(f.alpha=this.getAlpha(),h.alpha=t.alpha),t.beta!=null&&(f.beta=this.getBeta(),h.beta=t.beta),t.center!=null&&(f.center=this.getCenter(),h.center=t.center),this._addAnimator(i.animation.animate(f).when(t.duration||1e3,h).during(function(){f.alpha!=null&&l.setAlpha(f.alpha),f.beta!=null&&l.setBeta(f.beta),f.distance!=null&&l.setDistance(f.distance),f.center!=null&&l.setCenter(f.center),f.orthographicSize!=null&&l.setOrthographicSize(f.orthographicSize),l._needsUpdate=!0})).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var i=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=i*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),!!this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var i=this._rotateVelocity;this._phi=i.y*t/20+this._phi,this._theta=i.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(i,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var i=this.getCamera(),l=this._orthoSize,f=l/this.viewGL.viewport.height*this.viewGL.viewport.width;i.left=-f/2,i.right=f/2,i.top=l/2,i.bottom=-l/2},_updatePan:function(t){var i=this._panVelocity,l=this._distance,f=this.getCamera(),h=f.worldTransform.y,p=f.worldTransform.x;this._center.scaleAndAdd(p,-i.x*l/200).scaleAndAdd(h,-i.y*l/200),this._vectorDamping(i,0)},_updateTransform:function(){var t=this.getCamera(),i=new hr,l=this._theta+Math.PI/2,f=this._phi+Math.PI/2,h=Math.sin(l);i.x=h*Math.cos(f),i.y=-Math.cos(l),i.z=h*Math.sin(f),t.position.copy(this._center).scaleAndAdd(i,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,i=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout(function(){i._rotating=!0},t*1e3))},_vectorDamping:function(t,i){var l=t.len();l=l*i,l<1e-4&&(l=0),t.normalize().scale(l)},_decomposeTransform:function(){if(!!this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,i=Math.asin(t.y),l=Math.atan2(t.x,t.z);this._theta=i,this._phi=-l,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){if(!t.target&&!this._isAnimating()){var i=t.offsetX,l=t.offsetY;this.viewGL&&!this.viewGL.containPoint(i,l)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?t.event.targetTouches.length===1&&(this._mode="rotate"):t.event.button===wf[this.rotateMouseButton]?this._mode="rotate":t.event.button===wf[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)}},_mouseMoveHandler:function(t){if(!(t.target&&t.target.__isGLToZRProxy)&&!this._isAnimating()){var i=bh(this.panSensitivity),l=bh(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*l[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*l[1]):this._mode==="pan"&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*i[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*i[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){if(!this._isAnimating()){var i=t.event.wheelDelta||-t.event.detail;this._zoomHandler(t,i)}},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,i){if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var h;this._projection==="perspective"?h=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):h=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(i>0?-1:1)*h*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),t.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var i=this._animators;return i.push(t),t.done(function(){var l=i.indexOf(t);l>=0&&i.splice(l,1)}),t}});Object.defineProperty(Lf.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});var Ll=Lf,Xs={convertToDynamicArray:function(t){t&&this.resetOffset();var i=this.attributes;for(var l in i)t||!i[l].value?i[l].value=[]:i[l].value=Array.prototype.slice.call(i[l].value);t||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var i in t)t[i].value&&t[i].value.length>0?t[i].value=new Float32Array(t[i].value):t[i].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},fa={vec2:se,vec3:Oe,vec4:mr,mat2:kn,mat2d:ii,mat3:qr,mat4:vr,quat:wr},qn=fa,Wi=qn.vec3,Sh=[[0,0],[1,1]],Th=tn.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new tn.Attribute("position","float",3,"POSITION"),positionPrev:new tn.Attribute("positionPrev","float",3),positionNext:new tn.Attribute("positionNext","float",3),prevPositionPrev:new tn.Attribute("prevPositionPrev","float",3),prevPosition:new tn.Attribute("prevPosition","float",3),prevPositionNext:new tn.Attribute("prevPositionNext","float",3),offset:new tn.Attribute("offset","float",1),color:new tn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.positionPrev.init(t),i.positionNext.init(t),i.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var h=Wi.dist(t,i)+Wi.dist(l,i)+Wi.dist(f,l),p=1/(h+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var h=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/h);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var h=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/h);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Sh)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Sh)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?0:Math.max(i-1,0)*2},addCubicCurve:function(t,i,l,f,h,p){p==null&&(p=1);for(var y=t[0],_=t[1],S=t[2],P=i[0],j=i[1],tt=i[2],_t=l[0],xt=l[1],Et=l[2],Pt=f[0],Vt=f[1],kt=f[2],ee=this._getCubicCurveApproxStep(t,i,l,f),Jt=ee*ee,$t=Jt*ee,ce=3*ee,de=3*Jt,we=6*Jt,Ae=6*$t,Ge=y-P*2+_t,rr=_-j*2+xt,Qe=S-tt*2+Et,sr=(P-_t)*3-y+Pt,fr=(j-xt)*3-_+Vt,$e=(tt-Et)*3-S+kt,dr=y,Sr=_,Lr=S,gr=(P-y)*ce+Ge*de+sr*$t,ln=(j-_)*ce+rr*de+fr*$t,Dr=(tt-S)*ce+Qe*de+$e*$t,Tn=Ge*we+sr*Ae,un=rr*we+fr*Ae,En=Qe*we+$e*Ae,Cn=sr*Ae,nn=fr*Ae,$r=$e*Ae,jn=0,oi=0,Mi=Math.ceil(1/ee),yi=new Float32Array((Mi+1)*3),yi=[],xi=0,oi=0;oi<Mi+1;oi++)yi[xi++]=dr,yi[xi++]=Sr,yi[xi++]=Lr,dr+=gr,Sr+=ln,Lr+=Dr,gr+=Tn,ln+=un,Dr+=En,Tn+=Cn,un+=nn,En+=$r,jn+=ee,jn>1&&(dr=gr>0?Math.min(dr,Pt):Math.max(dr,Pt),Sr=ln>0?Math.min(Sr,Vt):Math.max(Sr,Vt),Lr=Dr>0?Math.min(Lr,kt):Math.max(Lr,kt));return this.addPolyline(yi,h,p)},addLine:function(t,i,l,f){return this.addPolyline([t,i],l,f)},addPolyline:function(t,i,l,f,h){if(!!t.length){var p=typeof t[0]!="number";if(h==null&&(h=p?t.length:t.length/3),!(h<2)){f==null&&(f=0),l==null&&(l=1),this._itemVertexOffsets.push(this._vertexOffset);var p=typeof t[0]!="number",y=p?typeof i[0]!="number":i.length/4===h,_=this.attributes.position,S=this.attributes.positionPrev,P=this.attributes.positionNext,j=this.attributes.color,tt=this.attributes.offset,_t=this.indices,xt=this._vertexOffset,Et,Pt;l=Math.max(l,.01);for(var Vt=f;Vt<h;Vt++){if(p)Et=t[Vt],y?Pt=i[Vt]:Pt=i;else{var kt=Vt*3;if(Et=Et||[],Et[0]=t[kt],Et[1]=t[kt+1],Et[2]=t[kt+2],y){var ee=Vt*4;Pt=Pt||[],Pt[0]=i[ee],Pt[1]=i[ee+1],Pt[2]=i[ee+2],Pt[3]=i[ee+3]}else Pt=i}if(this.useNativeLine?Vt>1&&(_.copy(xt,xt-1),j.copy(xt,xt-1),xt++):(Vt<h-1&&(S.set(xt+2,Et),S.set(xt+3,Et)),Vt>0&&(P.set(xt-2,Et),P.set(xt-1,Et)),_.set(xt,Et),_.set(xt+1,Et),j.set(xt,Pt),j.set(xt+1,Pt),tt.set(xt,l/2),tt.set(xt+1,-l/2),xt+=2),this.useNativeLine)j.set(xt,Pt),_.set(xt,Et),xt++;else if(Vt>0){var Jt=this._triangleOffset*3,_t=this.indices;_t[Jt]=xt-4,_t[Jt+1]=xt-3,_t[Jt+2]=xt-2,_t[Jt+3]=xt-3,_t[Jt+4]=xt-1,_t[Jt+5]=xt-2,this._triangleOffset+=2}}if(!this.useNativeLine){var $t=this._vertexOffset,ce=this._vertexOffset+h*2;S.copy($t,$t+2),S.copy($t+1,$t+3),P.copy(ce-1,ce-3),P.copy(ce-2,ce-4)}return this._vertexOffset=xt,this._vertexOffset}}},setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,h=l;h<f;h++)this.attributes.color.set(h,i);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});B.x.defaults(Th.prototype,Xs);var xo=Th;function wu(t,i,l,f,h,p,y){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=f,this.height=h,this.offsetX=i,this.offsetY=l,this.dpr=y,this.gap=p}wu.prototype={constructor:wu,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,i,l){var f=t.getBoundingRect();i==null&&(i=f.width),l==null&&(l=f.height),i*=this.dpr,l*=this.dpr,this._fitElement(t,i,l);var h=this._x,p=this._y,y=this.width*this.dpr,_=this.height*this.dpr,S=this.gap;if(h+i+S>y&&(h=this._x=0,p+=this._rowHeight+S,this._y=p,this._rowHeight=0),this._x+=i+S,this._rowHeight=Math.max(this._rowHeight,l),p+l+S>_)return null;t.x+=this.offsetX*this.dpr+h,t.y+=this.offsetY*this.dpr+p,this._zr.add(t);var P=[this.offsetX/this.width,this.offsetY/this.height],j=[[h/y+P[0],p/_+P[1]],[(h+i)/y+P[0],(p+l)/_+P[1]]];return j},_fitElement:function(t,i,l){var f=t.getBoundingRect(),h=i/f.width,p=l/f.height;t.x=-f.x*h,t.y=-f.y*p,t.scaleX=h,t.scaleY=p,t.update()}};function Oh(t){t=t||{},t.width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=t.gap==null?2:t.gap;var i=document.createElement("canvas");i.width=t.width*t.devicePixelRatio,i.height=t.height*t.devicePixelRatio,this._canvas=i,this._texture=new Xr({image:i,flipY:!1});var l=this;this._zr=B.y.init(i);var f=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){f.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new wu(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}Oh.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,i=this._textureAtlasNodes,l=i.length,f=l*this._nodeWidth%t,h=Math.floor(l*this._nodeWidth/t)*this._nodeHeight;if(!(h>=t)){var p=(f+this._nodeWidth)*this._dpr,y=(h+this._nodeHeight)*this._dpr;try{this._zr.resize({width:p,height:y})}catch(S){this._canvas.width=p,this._canvas.height=y}var _=new wu(this._zr,f,h,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(_),_}},add:function(t,i,l){if(this._coords[t.id])return this._coords[t.id];var f=this._getCurrentNode().add(t,i,l);if(!f){var h=this._expand();if(!h)return;f=h.add(t,i,l)}return this._coords[t.id]=f,f},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};var Zs=Oh;function If(){}If.prototype={constructor:If,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new ae.DirectionalLight({shadowBias:.005}),this.ambientLight=new ae.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var i=this.mainLight,l=this.ambientLight,f=t.getModel("light"),h=f.getModel("main"),p=f.getModel("ambient");i.intensity=h.get("intensity"),l.intensity=p.get("intensity"),i.color=ae.parseColor(h.get("color")).slice(0,3),l.color=ae.parseColor(p.get("color")).slice(0,3);var y=h.get("alpha")||0,_=h.get("beta")||0;i.position.setArray(ae.directionFromAlphaBeta(y,_)),i.lookAt(ae.Vector3.ZERO),i.castShadow=h.get("shadow"),i.shadowResolution=ae.getShadowResolution(h.get("shadowQuality"))},updateAmbientCubemap:function(t,i,l){var f=i.getModel("light.ambientCubemap"),h=f.get("texture");if(h){this._cubemapLightsCache=this._cubemapLightsCache||{};var p=this._cubemapLightsCache[h];if(!p){var y=this;p=this._cubemapLightsCache[h]=ae.createAmbientCubemap(f.option,t,l,function(){y._isSkyboxFromAmbientCubemap&&y._skybox.setEnvironmentMap(p.specular.cubemap),l.getZr().refresh()})}this._lightRoot.add(p.diffuse),this._lightRoot.add(p.specular),this._currentCubemapLights=p}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,i,l){var f=i.get("environment"),h=this;function p(){return h._skybox=h._skybox||new re,h._skybox}var y=p();if(f&&f!=="none")if(f==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var _=this._currentCubemapLights.specular.cubemap;y.setEnvironmentMap(_),this._scene&&y.attachScene(this._scene),y.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof f=="object"&&f.colorStops||typeof f=="string"&&B.h.parse(f)){this._isSkyboxFromAmbientCubemap=!1;var S=new ae.Texture2D({anisotropic:8,flipY:!1});y.setEnvironmentMap(S);var P=S.image=document.createElement("canvas");P.width=P.height=16;var j=P.getContext("2d"),tt=new B.l.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:f}});B.o(j,tt),y.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var S=ae.loadTexture(f,l,{anisotropic:8,flipY:!1});y.setEnvironmentMap(S),y.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var _t=i.coordinateSystem;if(this._skybox)if(_t&&_t.viewGL&&f!=="auto"&&!(f.match&&f.match(/.hdr$/))){var xt=_t.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[xt]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var _o=If,es=qn.vec3,Rf=tn.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new tn.Attribute("position","float",3,"POSITION"),normal:new tn.Attribute("normal","float",3,"NORMAL"),color:new tn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var i=this.attributes,l=this.getQuadVertexCount()*t,f=this.getQuadTriangleCount()*t;this.vertexCount!==l&&(i.position.init(l),i.normal.init(l),i.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=es.create(),i=es.create(),l=es.create(),f=[0,3,1,3,2,1];return function(h,p){var y=this.attributes.position,_=this.attributes.normal,S=this.attributes.color;es.sub(t,h[1],h[0]),es.sub(i,h[2],h[1]),es.cross(l,t,i),es.normalize(l,l);for(var P=0;P<4;P++)y.set(this._vertexOffset+P,h[P]),S.set(this._vertexOffset+P,p),_.set(this._vertexOffset+P,l);for(var j=this._faceOffset*3,P=0;P<6;P++)this.indices[j+P]=f[P]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});B.x.defaults(Rf.prototype,Xs);var Ah=Rf,Nf=Zr.firstNotNull,Mh={x:0,y:2,z:1};function Ep(t,i,l,f){var h=[0,0,0],p=f<0?l.getExtentMin():l.getExtentMax();h[Mh[l.dim]]=p,t.position.setArray(h),t.rotation.identity(),i.distance=-Math.abs(p),i.normal.set(0,0,0),l.dim==="x"?(t.rotation.rotateY(f*Math.PI/2),i.normal.x=-f):l.dim==="z"?(t.rotation.rotateX(-f*Math.PI/2),i.normal.y=-f):(f>0&&t.rotation.rotateY(Math.PI),i.normal.z=-f)}function Il(t,i,l){this.rootNode=new ae.Node;var f=new ae.Mesh({geometry:new xo({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),h=new ae.Mesh({geometry:new Ah,material:l,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(h),this.rootNode.add(f),this.faceInfo=t,this.plane=new ae.Plane,this.linesMesh=f,this.quadsMesh=h}Il.prototype.update=function(t,i,l){var f=t.coordinateSystem,h=[f.getAxis(this.faceInfo[0]),f.getAxis(this.faceInfo[1])],p=this.linesMesh.geometry,y=this.quadsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0),this._updateSplitLines(p,h,t,l),this._udpateSplitAreas(y,h,t,l),p.convertToTypedArray(),y.convertToTypedArray();var _=f.getAxis(this.faceInfo[2]);Ep(this.rootNode,this.plane,_,this.faceInfo[3])},Il.prototype._updateSplitLines=function(t,i,l,f){var h=f.getDevicePixelRatio();i.forEach(function(p,y){var _=p.model,S=i[1-y].getExtent();if(!p.scale.isBlank()){var P=_.getModel("splitLine",l.getModel("splitLine"));if(P.get("show")){var j=P.getModel("lineStyle"),tt=j.get("color"),_t=Nf(j.get("opacity"),1),xt=Nf(j.get("width"),1);tt=B.x.isArray(tt)?tt:[tt];for(var Et=p.getTicksCoords({tickModel:P}),Pt=0,Vt=0;Vt<Et.length;Vt++){var kt=Et[Vt].coord,ee=ae.parseColor(tt[Pt%tt.length]);ee[3]*=_t;var Jt=[0,0,0],$t=[0,0,0];Jt[y]=$t[y]=kt,Jt[1-y]=S[0],$t[1-y]=S[1],t.addLine(Jt,$t,ee,xt*h),Pt++}}}})},Il.prototype._udpateSplitAreas=function(t,i,l,f){i.forEach(function(h,p){var y=h.model,_=i[1-p].getExtent();if(!h.scale.isBlank()){var S=y.getModel("splitArea",l.getModel("splitArea"));if(S.get("show")){var P=S.getModel("areaStyle"),j=P.get("color"),tt=Nf(P.get("opacity"),1);j=B.x.isArray(j)?j:[j];for(var _t=h.getTicksCoords({tickModel:S,clamp:!0}),xt=0,Et=[0,0,0],Pt=[0,0,0],Vt=0;Vt<_t.length;Vt++){var kt=_t[Vt].coord,ee=[0,0,0],Jt=[0,0,0];if(ee[p]=Jt[p]=kt,ee[1-p]=_[0],Jt[1-p]=_[1],Vt===0){Et=ee,Pt=Jt;continue}var $t=ae.parseColor(j[xt%j.length]);$t[3]*=tt,t.addQuad([Et,ee,Jt,Pt],$t),Et=ee,Pt=Jt,xt++}}}})};var Cp=Il,Dh=[0,1,2,0,2,3],Eh=tn.extend(function(){return{attributes:{position:new tn.Attribute("position","float",3,"POSITION"),texcoord:new tn.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new tn.Attribute("offset","float",2),color:new tn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var i=t*4,l=t*2;this.vertexCount!==i&&(this.attributes.position.init(i),this.attributes.offset.init(i),this.attributes.color.init(i)),this.triangleCount!==l&&(this.indices=i>65535?new Uint32Array(l*3):new Uint16Array(l*3))},setSpriteAlign:function(t,i,l,f,h){l==null&&(l="left"),f==null&&(f="top");var p,y,_,S;switch(h=h||0,l){case"left":p=h,_=i[0]+h;break;case"center":case"middle":p=-i[0]/2,_=i[0]/2;break;case"right":p=-i[0]-h,_=-h;break}switch(f){case"bottom":y=h,S=i[1]+h;break;case"middle":y=-i[1]/2,S=i[1]/2;break;case"top":y=-i[1]-h,S=-h;break}var P=t*4,j=this.attributes.offset;j.set(P,[p,S]),j.set(P+1,[_,S]),j.set(P+2,[_,y]),j.set(P+3,[p,y])},addSprite:function(t,i,l,f,h,p){var y=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,i,l,f,h,p);for(var _=0;_<Dh.length;_++)this.indices[this._faceOffset*3+_]=Dh[_]+y;return this._faceOffset+=2,this._vertexOffset+=4,y/4},setSprite:function(t,i,l,f,h,p,y){for(var _=t*4,S=this.attributes,P=0;P<4;P++)S.position.set(_+P,i);var j=S.texcoord;j.set(_,[f[0][0],f[0][1]]),j.set(_+1,[f[1][0],f[0][1]]),j.set(_+2,[f[1][0],f[1][1]]),j.set(_+3,[f[0][0],f[1][1]]),this.setSpriteAlign(t,l,h,p,y)}});B.x.defaults(Eh.prototype,Xs);var Pp=Eh,wp=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;ae.Shader.import(wp);var Rl=ae.Mesh.extend(function(){var t=new Pp({dynamic:!0}),i=new ae.Material({shader:ae.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:t,material:i,culling:!1,castShadow:!1,ignorePicking:!0}}),bo=Zr.firstNotNull,ta={x:0,y:2,z:1};function to(t,i){var l=new ae.Mesh({geometry:new xo({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,renderOrder:2}),f=new Rl;f.material.depthMask=!1;var h=new ae.Node;h.add(l),h.add(f),this.rootNode=h,this.dim=t,this.linesMesh=l,this.labelsMesh=f,this.axisLineCoords=null,this.labelElements=[]}var So={x:"y",y:"x",z:"y"};to.prototype.update=function(t,i,l){var f=t.coordinateSystem,h=f.getAxis(this.dim),p=this.linesMesh.geometry,y=this.labelsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0);var _=h.model,S=h.getExtent(),P=l.getDevicePixelRatio(),j=_.getModel("axisLine",t.getModel("axisLine")),tt=_.getModel("axisTick",t.getModel("axisTick")),_t=_.getModel("axisLabel",t.getModel("axisLabel")),xt=j.get("lineStyle.color");if(j.get("show")){var Et=j.getModel("lineStyle"),Pt=[0,0,0],Vt=[0,0,0],kt=ta[h.dim];Pt[kt]=S[0],Vt[kt]=S[1],this.axisLineCoords=[Pt,Vt];var ee=ae.parseColor(xt),Jt=bo(Et.get("width"),1),$t=bo(Et.get("opacity"),1);ee[3]*=$t,p.addLine(Pt,Vt,ee,Jt*P)}if(tt.get("show")){var ce=tt.getModel("lineStyle"),de=ae.parseColor(bo(ce.get("color"),xt)),Jt=bo(ce.get("width"),1);de[3]*=bo(ce.get("opacity"),1);for(var we=h.getTicksCoords(),Ae=tt.get("length"),Ge=0;Ge<we.length;Ge++){var rr=we[Ge].coord,Pt=[0,0,0],Vt=[0,0,0],kt=ta[h.dim],Qe=ta[So[h.dim]];Pt[kt]=Vt[kt]=rr,Vt[Qe]=Ae,p.addLine(Pt,Vt,de,Jt*P)}}this.labelElements=[];var P=l.getDevicePixelRatio();if(_t.get("show"))for(var we=h.getTicksCoords(),sr=_.get("data"),fr=_t.get("margin"),$e=h.getViewLabels(),Ge=0;Ge<$e.length;Ge++){var dr=$e[Ge].tickValue,Sr=$e[Ge].formattedLabel,Lr=$e[Ge].rawLabel,rr=h.dataToCoord(dr),gr=[0,0,0],kt=ta[h.dim],Qe=ta[So[h.dim]];gr[kt]=gr[kt]=rr,gr[Qe]=fr;var ln=_t;sr&&sr[dr]&&sr[dr].textStyle&&(ln=new B.f(sr[dr].textStyle,_t,_.ecModel));var Dr=bo(ln.get("color"),xt),Tn=new B.l.Text({style:Object(wl.c)(ln,{text:Sr,fill:typeof Dr=="function"?Dr(h.type==="category"?Lr:h.type==="value"?dr+"":dr,Ge):Dr,verticalAlign:"top",align:"left"})}),un=i.add(Tn),En=Tn.getBoundingRect();y.addSprite(gr,[En.width*P,En.height*P],un),this.labelElements.push(Tn)}if(_.get("name")){var Cn=_.getModel("nameTextStyle"),gr=[0,0,0],kt=ta[h.dim],Qe=ta[So[h.dim]],nn=bo(Cn.get("color"),xt),$r=Cn.get("borderColor"),Jt=Cn.get("borderWidth");gr[kt]=gr[kt]=(S[0]+S[1])/2,gr[Qe]=_.get("nameGap");var Tn=new B.l.Text({style:Object(wl.c)(Cn,{text:_.get("name"),fill:nn,stroke:$r,lineWidth:Jt})}),un=i.add(Tn),En=Tn.getBoundingRect();y.addSprite(gr,[En.width*P,En.height*P],un),Tn.__idx=this.labelElements.length,this.nameLabelElement=Tn}this.labelsMesh.material.set("textureAtlas",i.getTexture()),this.labelsMesh.material.set("uvScale",i.getCoordsScale()),p.convertToTypedArray(),y.convertToTypedArray()},to.prototype.setSpriteAlign=function(t,i,l){for(var f=l.getDevicePixelRatio(),h=this.labelsMesh.geometry,p=0;p<this.labelElements.length;p++){var y=this.labelElements[p],_=y.getBoundingRect();h.setSpriteAlign(p,[_.width*f,_.height*f],t,i)}var S=this.nameLabelElement;if(S){var _=S.getBoundingRect();h.setSpriteAlign(S.__idx,[_.width*f,_.height*f],t,i),h.dirty()}this.textAlign=t,this.textVerticalAlign=i};var Lp=to,Lu=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`,Ch=Zr.firstNotNull;ae.Shader.import(Lu);var rs={x:0,y:2,z:1},Ip=B.d.extend({type:"grid3D",__ecgl__:!0,init:function(t,i){var l=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],f=["x","y","z"],h=new ae.Material({shader:ae.createShader("ecgl.color"),depthMask:!1,transparent:!0}),p=new ae.Material({shader:ae.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});h.define("fragment","DOUBLE_SIDED"),h.define("both","VERTEX_COLOR"),this.groupGL=new ae.Node,this._control=new Ll({zr:i.getZr()}),this._control.init(),this._faces=l.map(function(_){var S=new Cp(_,p,h);return this.groupGL.add(S.rootNode),S},this),this._axes=f.map(function(_){var S=new Lp(_,p);return this.groupGL.add(S.rootNode),S},this);var y=i.getDevicePixelRatio();this._axisLabelSurface=new Zs({width:256,height:256,devicePixelRatio:y}),this._axisLabelSurface.onupdate=function(){i.getZr().refresh()},this._axisPointerLineMesh=new ae.Mesh({geometry:new xo({useNativeLine:!1}),material:p,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new Zs({width:128,height:128,devicePixelRatio:y}),this._axisPointerLabelsMesh=new Rl({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new ae.Node,this._sceneHelper=new _o,this._sceneHelper.initLight(this._lightRoot)},render:function(t,i,l){this._model=t,this._api=l;var f=t.coordinateSystem;f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var h=this._control;h.setViewGL(f.viewGL);var p=t.getModel("viewControl");h.setFromViewControlModel(p,0),this._axisLabelSurface.clear(),h.off("update"),t.get("show")&&(this._faces.forEach(function(y){y.update(t,i,l)},this),this._axes.forEach(function(y){y.update(t,this._axisLabelSurface,l)},this)),h.on("update",this._onCameraChange.bind(this,t,l),this),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,i,l,f){var h=f.renderer;this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l)},showAxisPointer:function(t,i,l,f){this._doShowAxisPointer(),this._updateAxisPointer(f.value)},hideAxisPointer:function(t,i,l,f){this._doHideAxisPointer()},_initMouseHandler:function(t){var i=t.coordinateSystem,l=i.viewGL;t.get("show")&&t.get("axisPointer.show")?l.on("mousemove",this._updateAxisPointerOnMousePosition,this):l.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var i=this._model,l=i.coordinateSystem,f=l.viewGL,h=f.castRay(t.offsetX,t.offsetY,new ae.Ray),p,y=0;y<this._faces.length;y++){var _=this._faces[y];if(!_.rootNode.invisible){_.plane.normal.dot(f.camera.worldTransform.z)<0&&_.plane.normal.negate();var S=h.intersectPlane(_.plane);if(!!S){var P=l.getAxis(_.faceInfo[0]),j=l.getAxis(_.faceInfo[1]),tt=rs[_.faceInfo[0]],_t=rs[_.faceInfo[1]];P.contain(S.array[tt])&&j.contain(S.array[_t])&&(p=S)}}}if(p){var xt=l.pointToData(p.array,[],!0);this._updateAxisPointer(xt),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,i){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var l=this._control;i.dispatchAction({type:"grid3DChangeCamera",alpha:l.getAlpha(),beta:l.getBeta(),distance:l.getDistance(),center:l.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),i=new ae.Vector3;t.update();for(var l=0;l<this._faces.length/2;l++){for(var f=[],h=0;h<2;h++){var p=this._faces[l*2+h];p.rootNode.getWorldPosition(i),i.transformMat4(t.viewMatrix),f[h]=i.z}var y=f[0]>f[1]?0:1,_=this._faces[l*2+y],S=this._faces[l*2+1-y];_.rootNode.invisible=!0,S.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,i=t.getAxis("x"),l=t.getAxis("y"),f=t.getAxis("z"),h=f.getExtentMax(),p=f.getExtentMin(),y=i.getExtentMin(),_=i.getExtentMax(),S=l.getExtentMax(),P=l.getExtentMin(),j=this._axes[0].rootNode,tt=this._axes[1].rootNode,_t=this._axes[2].rootNode,xt=this._faces,Et=xt[4].rootNode.invisible?P:S,Pt=xt[2].rootNode.invisible?h:p,Vt=xt[0].rootNode.invisible?y:_,kt=xt[2].rootNode.invisible?h:p,ee=xt[0].rootNode.invisible?_:y,Jt=xt[4].rootNode.invisible?P:S;j.rotation.identity(),tt.rotation.identity(),_t.rotation.identity(),xt[4].rootNode.invisible&&(this._axes[0].flipped=!0,j.rotation.rotateX(Math.PI)),xt[0].rootNode.invisible&&(this._axes[1].flipped=!0,tt.rotation.rotateZ(Math.PI)),xt[4].rootNode.invisible&&(this._axes[2].flipped=!0,_t.rotation.rotateY(Math.PI)),j.position.set(0,Pt,Et),tt.position.set(Vt,kt,0),_t.position.set(ee,0,Jt),j.update(),tt.update(),_t.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),i=[new ae.Vector4,new ae.Vector4],l=new ae.Vector4;this.groupGL.getWorldPosition(l),l.w=1,l.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),l.x/=l.w,l.y/=l.w,this._axes.forEach(function(f){for(var h=f.axisLineCoords,p=f.labelsMesh.geometry,y=0;y<i.length;y++)i[y].setArray(h[y]),i[y].w=1,i[y].transformMat4(f.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),i[y].x/=i[y].w,i[y].y/=i[y].w;var _=i[1].x-i[0].x,S=i[1].y-i[0].y,P=(i[1].x+i[0].x)/2,j=(i[1].y+i[0].y)/2,tt,_t;Math.abs(S/_)<.5?(tt="center",_t=j>l.y?"bottom":"top"):(_t="middle",tt=P>l.x?"left":"right"),f.setSpriteAlign(tt,_t,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var i=this._model.coordinateSystem,l=i.dataToPoint(t),f=this._axisPointerLineMesh,h=f.geometry,p=this._model.getModel("axisPointer"),y=this._api.getDevicePixelRatio();h.convertToDynamicArray(!0);function _(Ae){return Zr.firstNotNull(Ae.model.get("axisPointer.show"),p.get("show"))}function S(Ae){var Ge=Ae.model.getModel("axisPointer",p),rr=Ge.getModel("lineStyle"),Qe=ae.parseColor(rr.get("color")),sr=Ch(rr.get("width"),1),fr=Ch(rr.get("opacity"),1);return Qe[3]*=fr,{color:Qe,lineWidth:sr}}for(var P=0;P<this._faces.length;P++){var j=this._faces[P];if(!j.rootNode.invisible){for(var tt=j.faceInfo,_t=tt[3]<0?i.getAxis(tt[2]).getExtentMin():i.getAxis(tt[2]).getExtentMax(),xt=rs[tt[2]],Et=0;Et<2;Et++){var Pt=tt[Et],Vt=tt[1-Et],kt=i.getAxis(Pt),ee=i.getAxis(Vt);if(!!_(kt)){var Jt=[0,0,0],$t=[0,0,0],ce=rs[Pt],de=rs[Vt];Jt[ce]=$t[ce]=l[ce],Jt[xt]=$t[xt]=_t,Jt[de]=ee.getExtentMin(),$t[de]=ee.getExtentMax();var we=S(kt);h.addLine(Jt,$t,we.color,we.lineWidth*y)}}if(_(i.getAxis(tt[2]))){var Jt=l.slice(),$t=l.slice();$t[xt]=_t;var we=S(i.getAxis(tt[2]));h.addLine(Jt,$t,we.color,we.lineWidth*y)}}}h.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var i=this._model,l=this._axisPointerLabelsMesh,f=this._axisPointerLabelsSurface,h=i.coordinateSystem,p=i.getModel("axisPointer");l.geometry.convertToDynamicArray(!0),f.clear();var y={x:"y",y:"x",z:"y"};this._axes.forEach(function(_,S){var P=h.getAxis(_.dim),j=P.model,tt=j.getModel("axisPointer",p),_t=tt.getModel("label"),xt=tt.get("lineStyle.color");if(!(!_t.get("show")||!tt.get("show"))){var Et=t[S],Pt=_t.get("formatter"),Vt=P.scale.getLabel({value:Et});if(Pt!=null)Vt=Pt(Vt,t);else if(P.scale.type==="interval"||P.scale.type==="log"){var kt=B.p.getPrecisionSafe(P.scale.getTicks()[0]);Vt=Et.toFixed(kt+2)}var ee=_t.get("color"),Jt=new B.l.Text({style:Object(wl.c)(_t,{text:Vt,fill:ee||xt,align:"left",verticalAlign:"top"})}),$t=f.add(Jt),ce=Jt.getBoundingRect(),de=this._api.getDevicePixelRatio(),we=_.rootNode.position.toArray(),Ae=rs[y[_.dim]];we[Ae]+=(_.flipped?-1:1)*_t.get("margin"),we[rs[_.dim]]=P.dataToCoord(t[S]),l.geometry.addSprite(we,[ce.width*de,ce.height*de],$t,_.textAlign,_.textVerticalAlign)}},this),f.getZr().refreshImmediately(),l.material.set("uvScale",f.getCoordsScale()),l.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}}),Ph=b("1oYb");function Iu(t){Ph.a.call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Iu.prototype={constructor:Iu,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").dataToCoord(t[0],l),i[2]=this.getAxis("y").dataToCoord(t[1],l),i[1]=this.getAxis("z").dataToCoord(t[2],l),i},pointToData:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").coordToData(t[0],l),i[1]=this.getAxis("y").coordToData(t[2],l),i[2]=this.getAxis("z").coordToData(t[1],l),i}},B.x.inherits(Iu,Ph.a);var wh=Iu;function To(t,i,l){B.a.call(this,t,i,l)}To.prototype={constructor:To,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},B.x.inherits(To,B.a);var eo=To,Ys=b("RlS0"),Oo=function(){this._pool={},this._allocatedTextures=[]};Oo.prototype={constructor:Oo,get:function(t){var i=Lh(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];if(!l.length){var f=new Xr(t);return this._allocatedTextures.push(f),f}return l.pop()},put:function(t){var i=Lh(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];l.push(t)},clear:function(t){for(var i=0;i<this._allocatedTextures.length;i++)this._allocatedTextures[i].dispose(t);this._pool={},this._allocatedTextures=[]}};var Ru={width:512,height:512,type:A.UNSIGNED_BYTE,format:A.RGBA,wrapS:A.CLAMP_TO_EDGE,wrapT:A.CLAMP_TO_EDGE,minFilter:A.LINEAR_MIPMAP_LINEAR,magFilter:A.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},jf=Object.keys(Ru);function Lh(t){$.defaultsWithPropList(t,Ru,jf),Rp(t);for(var i="",l=0;l<jf.length;l++){var f=jf[l],h=t[f].toString();i+=h}return i}function Rp(t){var i=Ih(t.width,t.height);t.format===A.DEPTH_COMPONENT&&(t.useMipmap=!1),(!i||!t.useMipmap)&&(t.minFilter==A.NEAREST_MIPMAP_NEAREST||t.minFilter==A.NEAREST_MIPMAP_LINEAR?t.minFilter=A.NEAREST:(t.minFilter==A.LINEAR_MIPMAP_LINEAR||t.minFilter==A.LINEAR_MIPMAP_NEAREST)&&(t.minFilter=A.LINEAR)),i||(t.wrapS=A.CLAMP_TO_EDGE,t.wrapT=A.CLAMP_TO_EDGE)}function Ih(t,i){return(t&t-1)==0&&(i&i-1)==0}var Nl=Oo,Rh=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`,Ao=["px","nx","py","ny","pz","nz"];pr.import(Rh);function Nu(t,i,l){if(l==="alphaMap")return t.material.get("diffuseMap");if(l==="alphaCutoff"){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var f=t.material.get("alphaCutoff");return f||0}return 0}else return l==="uvRepeat"?t.material.get("uvRepeat"):l==="uvOffset"?t.material.get("uvOffset"):i.get(l)}function Bf(t,i){var l=t.material,f=i.material;return l.get("diffuseMap")!==f.get("diffuseMap")||(l.get("alphaCutoff")||0)!==(f.get("alphaCutoff")||0)}var Sa=Y.extend(function(){return{softShadow:Sa.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Wn,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Nl}},function(){this._gaussianPassH=new ni({fragment:pr.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new ni({fragment:pr.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new ni({fragment:pr.source("clay.sm.debug_depth")})},{render:function(t,i,l,f){l||(l=i.getMainCamera()),this.trigger("beforerender",this,t,i,l),this._renderShadowPass(t,i,l,f),this.trigger("afterrender",this,t,i,l)},renderDebug:function(t,i){t.saveClear();var l=t.viewport,f=0,h=0,p=i||l.width/4,y=p;this.softShadow===Sa.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var _ in this._textures){var S=this._textures[_];t.setViewport(f,h,p*S.width/S.height,y),this._outputDepthPass.setUniform("depthMap",S),this._outputDepthPass.render(t),f+=p*S.width/S.height}t.setViewport(l),t.restoreClear()},_updateReceivers:function(t,i){if(i.receiveShadow?(this._receivers.push(i),i.material.set("shadowEnabled",1),i.material.set("pcfKernel",this.kernelPCF)):i.material.set("shadowEnabled",0),this.softShadow===Sa.VSM)i.material.define("fragment","USE_VSM"),i.material.undefine("fragment","PCF_KERNEL_SIZE");else{i.material.undefine("fragment","USE_VSM");var l=this.kernelPCF;l&&l.length?i.material.define("fragment","PCF_KERNEL_SIZE",l.length/2):i.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,i){var l=this;i.traverse(function(p){p.isRenderable()&&l._updateReceivers(t,p)});for(var f=0;f<i.lights.length;f++){var h=i.lights[f];h.castShadow&&!h.invisible&&this._lightsCastShadow.push(h)}},_renderShadowPass:function(t,i,l,f){for(var h in this._shadowMapNumber)this._shadowMapNumber[h]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var p=t.gl;if(f||i.update(),l&&l.update(),i.updateLights(),this._update(t,i),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,p.enable(p.DEPTH_TEST),p.depthMask(!0),p.disable(p.BLEND),p.clearColor(1,1,1,1);for(var y=[],_=[],S=[],P=[],j=[],tt=[],_t,xt=0;xt<this._lightsCastShadow.length;xt++){var Et=this._lightsCastShadow[xt];if(Et.type==="DIRECTIONAL_LIGHT"){if(_t){console.warn("Only one direectional light supported with shadow cascade");continue}if(Et.shadowCascade>4){console.warn("Support at most 4 cascade");continue}Et.shadowCascade>1&&(_t=Et),this.renderDirectionalLightShadow(t,i,l,Et,j,P,S)}else Et.type==="SPOT_LIGHT"?this.renderSpotLightShadow(t,i,Et,_,y):Et.type==="POINT_LIGHT"&&this.renderPointLightShadow(t,i,Et,tt);this._shadowMapNumber[Et.type]++}for(var Pt in this._shadowMapNumber)for(var Vt=this._shadowMapNumber[Pt],kt=Pt+"_SHADOWMAP_COUNT",xt=0;xt<this._receivers.length;xt++){var ee=this._receivers[xt],Jt=ee.material;Jt.fragmentDefines[kt]!==Vt&&(Vt>0?Jt.define("fragment",kt,Vt):Jt.isDefined("fragment",kt)&&Jt.undefine("fragment",kt))}for(var xt=0;xt<this._receivers.length;xt++){var ee=this._receivers[xt],Jt=ee.material;_t?Jt.define("fragment","SHADOW_CASCADE",_t.shadowCascade):Jt.undefine("fragment","SHADOW_CASCADE")}var $t=i.shadowUniforms;function ce(rr){return rr.height}if(S.length>0){var de=S.map(ce);if($t.directionalLightShadowMaps={value:S,type:"tv"},$t.directionalLightMatrices={value:P,type:"m4v"},$t.directionalLightShadowMapSizes={value:de,type:"1fv"},_t){var we=j.slice(),Ae=j.slice();we.pop(),Ae.shift(),we.reverse(),Ae.reverse(),P.reverse(),$t.shadowCascadeClipsNear={value:we,type:"1fv"},$t.shadowCascadeClipsFar={value:Ae,type:"1fv"}}}if(y.length>0){var Ge=y.map(ce),$t=i.shadowUniforms;$t.spotLightShadowMaps={value:y,type:"tv"},$t.spotLightMatrices={value:_,type:"m4v"},$t.spotLightShadowMapSizes={value:Ge,type:"1fv"}}tt.length>0&&($t.pointLightShadowMaps={value:tt,type:"tv"})},renderDirectionalLightShadow:function(){var t=new ya,i=new Be,l=new Si,f=new Be,h=new Be,p=new Be,y=new Be;return function(_,S,P,j,tt,_t,xt){var Et=this._getDepthMaterial(j),Pt={getMaterial:function(En){return En.shadowDepthMaterial||Et},isMaterialChanged:Bf,getUniform:Nu,ifRender:function(En){return En.castShadow},sortCompare:ar.opaqueSortCompare};if(!S.viewBoundingBoxLastFrame.isFinite()){var Vt=S.getBoundingBox();S.viewBoundingBoxLastFrame.copy(Vt).applyTransform(P.viewMatrix)}var kt=Math.min(-S.viewBoundingBoxLastFrame.min.z,P.far),ee=Math.max(-S.viewBoundingBoxLastFrame.max.z,P.near),Jt=this._getDirectionalLightCamera(j,S,P),$t=p.array;y.copy(Jt.projectionMatrix),vr.invert(h.array,Jt.worldTransform.array),vr.multiply(h.array,h.array,P.worldTransform.array),vr.multiply($t,y.array,h.array);for(var ce=[],de=P instanceof Jn,we=(P.near+P.far)/(P.near-P.far),Ae=2*P.near*P.far/(P.near-P.far),Ge=0;Ge<=j.shadowCascade;Ge++){var rr=ee*Math.pow(kt/ee,Ge/j.shadowCascade),Qe=ee+(kt-ee)*Ge/j.shadowCascade,sr=rr*j.cascadeSplitLogFactor+Qe*(1-j.cascadeSplitLogFactor);ce.push(sr),tt.push(-(-sr*we+Ae)/-sr)}var fr=this._getTexture(j,j.shadowCascade);xt.push(fr);var $e=_.viewport,dr=_.gl;this._frameBuffer.attach(fr),this._frameBuffer.bind(_),dr.clear(dr.COLOR_BUFFER_BIT|dr.DEPTH_BUFFER_BIT);for(var Ge=0;Ge<j.shadowCascade;Ge++){var Sr=ce[Ge],Lr=ce[Ge+1];de?vr.perspective(i.array,P.fov/180*Math.PI,P.aspect,Sr,Lr):vr.ortho(i.array,P.left,P.right,P.bottom,P.top,Sr,Lr),t.setFromProjection(i),t.getTransformedBoundingBox(l,h),l.applyProjection(y);var gr=l.min.array,ln=l.max.array;gr[0]=Math.max(gr[0],-1),gr[1]=Math.max(gr[1],-1),ln[0]=Math.min(ln[0],1),ln[1]=Math.min(ln[1],1),f.ortho(gr[0],ln[0],gr[1],ln[1],1,-1),Jt.projectionMatrix.multiplyLeft(f);var Dr=j.shadowResolution||512;_.setViewport((j.shadowCascade-Ge-1)*Dr,0,Dr,Dr,1);var Tn=S.updateRenderList(Jt);_.renderPass(Tn.opaque,Jt,Pt),this.softShadow===Sa.VSM&&this._gaussianFilter(_,fr,fr.width);var un=new Be;un.copy(Jt.viewMatrix).multiplyLeft(Jt.projectionMatrix),_t.push(un.array),Jt.projectionMatrix.copy(y)}this._frameBuffer.unbind(_),_.setViewport($e)}}(),renderSpotLightShadow:function(t,i,l,f,h){var p=this._getTexture(l),y=this._getSpotLightCamera(l),_=t.gl;this._frameBuffer.attach(p),this._frameBuffer.bind(t),_.clear(_.COLOR_BUFFER_BIT|_.DEPTH_BUFFER_BIT);var S=this._getDepthMaterial(l),P={getMaterial:function(_t){return _t.shadowDepthMaterial||S},isMaterialChanged:Bf,getUniform:Nu,ifRender:function(_t){return _t.castShadow},sortCompare:ar.opaqueSortCompare},j=i.updateRenderList(y);t.renderPass(j.opaque,y,P),this._frameBuffer.unbind(t),this.softShadow===Sa.VSM&&this._gaussianFilter(t,p,p.width);var tt=new Be;tt.copy(y.worldTransform).invert().multiplyLeft(y.projectionMatrix),h.push(p),f.push(tt.array)},renderPointLightShadow:function(t,i,l,f){var h=this._getTexture(l),p=t.gl;f.push(h);var y=this._getDepthMaterial(l),_={getMaterial:function(ee){return ee.shadowDepthMaterial||y},getUniform:Nu,sortCompare:ar.opaqueSortCompare},S={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},P=new Si,j=l.getWorldPosition().array,tt=new Si,_t=l.range;tt.min.setArray(j),tt.max.setArray(j);var xt=new hr(_t,_t,_t);tt.max.add(xt),tt.min.sub(xt);var Et={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};i.traverse(function(ee){if(ee.isRenderable()&&ee.castShadow){var Jt=ee.geometry;if(!Jt.boundingBox){for(var $t=0;$t<Ao.length;$t++)S[Ao[$t]].push(ee);return}if(P.transformFrom(Jt.boundingBox,ee.worldTransform),!P.intersectBoundingBox(tt))return;P.updateVertices();for(var $t=0;$t<Ao.length;$t++)Et[Ao[$t]]=!1;for(var $t=0;$t<8;$t++){var ce=P.vertices[$t],de=ce[0]-j[0],we=ce[1]-j[1],Ae=ce[2]-j[2],Ge=Math.abs(de),rr=Math.abs(we),Qe=Math.abs(Ae);Ge>rr?Ge>Qe?Et[de>0?"px":"nx"]=!0:Et[Ae>0?"pz":"nz"]=!0:rr>Qe?Et[we>0?"py":"ny"]=!0:Et[Ae>0?"pz":"nz"]=!0}for(var $t=0;$t<Ao.length;$t++)Et[Ao[$t]]&&S[Ao[$t]].push(ee)}});for(var Pt=0;Pt<6;Pt++){var Vt=Ao[Pt],kt=this._getPointLightCamera(l,Vt);this._frameBuffer.attach(h,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+Pt),this._frameBuffer.bind(t),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),t.renderPass(S[Vt],kt,_)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var i=this._lightMaterials[t.__uid__],l=t.type==="POINT_LIGHT";if(!i){var f=l?"clay.sm.distance.":"clay.sm.depth.";i=new Fe({precision:this.precision,shader:new pr(pr.source(f+"vertex"),pr.source(f+"fragment"))}),this._lightMaterials[t.__uid__]=i}return t.shadowSlopeScale!=null&&i.setUniform("slopeScale",t.shadowSlopeScale),t.shadowBias!=null&&i.setUniform("bias",t.shadowBias),this.softShadow===Sa.VSM?i.define("fragment","USE_VSM"):i.undefine("fragment","USE_VSM"),l&&(i.set("lightPosition",t.getWorldPosition().array),i.set("range",t.range)),i},_gaussianFilter:function(t,i,l){var f={width:l,height:l,type:Er.FLOAT},h=this._texturePool.get(f);this._frameBuffer.attach(h),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",i),this._gaussianPassH.setUniform("textureWidth",l),this._gaussianPassH.render(t),this._frameBuffer.attach(i),this._gaussianPassV.setUniform("texture",h),this._gaussianPassV.setUniform("textureHeight",l),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(h)},_getTexture:function(t,i){var l=t.__uid__,f=this._textures[l],h=t.shadowResolution||512;return i=i||1,f||(t.type==="POINT_LIGHT"?f=new vo:f=new Xr,f.width=h*i,f.height=h,this.softShadow===Sa.VSM?(f.type=Er.FLOAT,f.anisotropic=4):(f.minFilter=A.NEAREST,f.magFilter=A.NEAREST,f.useMipmap=!1),this._textures[l]=f),f},_getPointLightCamera:function(t,i){this._lightCameras.point||(this._lightCameras.point={px:new Jn,nx:new Jn,py:new Jn,ny:new Jn,pz:new Jn,nz:new Jn});var l=this._lightCameras.point[i];switch(l.far=t.range,l.fov=90,l.position.set(0,0,0),i){case"px":l.lookAt(hr.POSITIVE_X,hr.NEGATIVE_Y);break;case"nx":l.lookAt(hr.NEGATIVE_X,hr.NEGATIVE_Y);break;case"py":l.lookAt(hr.POSITIVE_Y,hr.POSITIVE_Z);break;case"ny":l.lookAt(hr.NEGATIVE_Y,hr.NEGATIVE_Z);break;case"pz":l.lookAt(hr.POSITIVE_Z,hr.NEGATIVE_Y);break;case"nz":l.lookAt(hr.NEGATIVE_Z,hr.NEGATIVE_Y);break}return t.getWorldPosition(l.position),l.update(),l},_getDirectionalLightCamera:function(){var t=new Be,i=new Si,l=new Si;return function(f,h,p){this._lightCameras.directional||(this._lightCameras.directional=new Fs);var y=this._lightCameras.directional;i.copy(h.viewBoundingBoxLastFrame),i.intersection(p.frustum.boundingBox),y.position.copy(i.min).add(i.max).scale(.5).transformMat4(p.worldTransform),y.rotation.copy(f.rotation),y.scale.copy(f.scale),y.updateWorldTransform(),Be.invert(t,y.worldTransform),Be.multiply(t,t,p.worldTransform),l.copy(i).applyTransform(t);var _=l.min.array,S=l.max.array;return y.position.set((_[0]+S[0])/2,(_[1]+S[1])/2,S[2]).transformMat4(y.worldTransform),y.near=0,y.far=-_[2]+S[2],isNaN(this.lightFrustumBias)?y.far*=4:y.far+=this.lightFrustumBias,y.left=_[0],y.right=S[0],y.top=S[1],y.bottom=_[1],y.update(!0),y}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new Jn);var i=this._lightCameras.spot;return i.fov=t.penumbraAngle*2,i.far=t.range,i.worldTransform.copy(t.worldTransform),i.updateProjectionMatrix(),vr.invert(i.viewMatrix.array,i.worldTransform.array),i},dispose:function(t){var i=t.gl||t;this._frameBuffer&&this._frameBuffer.dispose(i);for(var l in this._textures)this._textures[l].dispose(i);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var f=0;f<this._receivers.length;f++){var h=this._receivers[f];if(h.material){var p=h.material;p.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),p.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),p.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),p.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});Sa.VSM=1,Sa.PCF=2;var Nh=Sa,jh=Y.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,h=l._parametersCopy;if(h||(h=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(h[p]=f[p]);var y,_;return f.width instanceof Function?y=f.width.call(this,i):y=f.width,f.height instanceof Function?_=f.height.call(this,i):_=f.height,(h.width!==y||h.height!==_)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i.gl),h.width=y,h.height=_,h},setParameter:function(t,i){},getParameter:function(t){},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},render:function(){},getOutput:function(t,i){if(i==null)return i=t,this._outputTextures[i];var l=this.outputs[i];if(!!l)return this._rendered?l.outputLastFrame?this._prevOutputTextures[i]:this._outputTextures[i]:this._rendering?(this._prevOutputTextures[i]||(this._prevOutputTextures[i]=this._compositor.allocateTexture(l.parameters||{})),this._prevOutputTextures[i]):(this.render(t),this._outputTextures[i])},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,i,l){this.inputLinks[t]={node:i,pin:l},i.outputLinks[l]||(i.outputLinks[l]=[]),i.outputLinks[l].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){this._rendering=!0;for(var i in this.inputLinks){var l=this.inputLinks[i];l.node.updateReference(l.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){this._rendered=!1;for(var t in this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),Ks=jh,Bh=Y.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){typeof t=="string"&&(t=this.getNodeByName(t));var i=this.nodes.indexOf(t);i>=0&&(this.nodes.splice(i,1),this._dirty=!0)},getNodeByName:function(t){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].name===t)return this.nodes[i]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];if(!!i.inputs){for(var l in i.inputs)if(!!i.inputs[l]){if(i.pass&&!i.pass.material.isUniformEnabled(l)){console.warn("Pin "+i.name+"."+l+" not used.");continue}var f=i.inputs[l],h=this.findPin(f);h?i.link(l,h.node,h.pin):typeof f=="string"?console.warn("Node "+f+" not exist"):console.warn("Pin of "+f.node+"."+f.pin+" not exist")}}}},findPin:function(t){var i;if((typeof t=="string"||t instanceof Ks)&&(t={node:t}),typeof t.node=="string")for(var l=0;l<this.nodes.length;l++){var f=this.nodes[l];f.name===t.node&&(i=f)}else i=t.node;if(i){var h=t.pin;if(h||i.outputs&&(h=Object.keys(i.outputs)[0]),i.outputs[h])return{node:i,pin:h}}}}),Fh=Bh,Np=Fh.extend(function(){return{_outputs:[],_texturePool:new Nl,_frameBuffer:new Wn({depthBuffer:!1})}},{addNode:function(t){Fh.prototype.addNode.call(this,t),t._compositor=this},render:function(t,i){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var l=0;l<this.nodes.length;l++)this.nodes[l].outputs||this._outputs.push(this.nodes[l])}for(var l=0;l<this.nodes.length;l++)this.nodes[l].beforeFrame();for(var l=0;l<this._outputs.length;l++)this._outputs[l].updateReference();for(var l=0;l<this._outputs.length;l++)this._outputs[l].render(t,i);for(var l=0;l<this.nodes.length;l++)this.nodes[l].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),jp=Np,Bp=Ks.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Wn},{render:function(t){this._rendering=!0;var i=t.gl;this.trigger("beforerender");var l;if(!this.outputs)l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var f=this.frameBuffer;for(var h in this.outputs){var p=this.updateParameter(h,t),y=this.outputs[h],_=this._compositor.allocateTexture(p);this._outputTextures[h]=_;var S=y.attachment||i.COLOR_ATTACHMENT0;typeof S=="string"&&(S=i[S]),f.attach(_,S)}f.bind(t);var P=t.getGLExtension("EXT_draw_buffers");if(P){var j=[];for(var S in this.outputs)S=parseInt(S),S>=i.COLOR_ATTACHMENT0&&S<=i.COLOR_ATTACHMENT0+8&&j.push(S);P.drawBuffersEXT(j)}t.saveClear(),t.clearBit=A.DEPTH_BUFFER_BIT|A.COLOR_BUFFER_BIT,l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),f.unbind(t)}this.trigger("afterrender",l),this._rendering=!1,this._rendered=!0}}),Fp=Bp,zp=Ks.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(t,i){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),Vp=zp,zh=Ks.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new ni({fragment:this.shader});this.pass=t},{render:function(t,i){this.trigger("beforerender",t),this._rendering=!0;var l=t.gl;for(var f in this.inputLinks){var h=this.inputLinks[f],p=h.node.getOutput(t,h.pin);this.pass.setUniform(f,p)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,i);else{this.pass.outputs={};var y={};for(var _ in this.outputs){var S=this.updateParameter(_,t);isNaN(S.width)&&this.updateParameter(_,t);var P=this.outputs[_],j=this._compositor.allocateTexture(S);this._outputTextures[_]=j;var tt=P.attachment||l.COLOR_ATTACHMENT0;typeof tt=="string"&&(tt=l[tt]),y[tt]=j}this._compositor.getFrameBuffer().bind(t);for(var tt in y)this._compositor.getFrameBuffer().attach(y[tt],tt);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}for(var f in this.inputLinks){var h=this.inputLinks[f];h.node.removeReference(h.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,h=l._parametersCopy;if(h||(h=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(h[p]=f[p]);var y,_;return typeof f.width=="function"?y=f.width.call(this,i):y=f.width,typeof f.height=="function"?_=f.height.call(this,i):_=f.height,y=Math.ceil(y),_=Math.ceil(_),(h.width!==y||h.height!==_)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i),h.width=y,h.height=_,h},setParameter:function(t,i){this.pass.setUniform(t,i)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},define:function(t,i){this.pass.material.define("fragment",t,i)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){Ks.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),Gp=zh,Vh=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,Qs=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,Up=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,Ff=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,Gh=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,zf=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Vf=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,Gf=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,Uh=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,Hh=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Hp=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,Uf=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,Wh=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function Wp(t){t.import(Vh),t.import(Qs),t.import(Up),t.import(Ff),t.import(Gh),t.import(zf),t.import(Vf),t.import(Gf),t.import(Uh),t.import(Hh),t.import(Hp),t.import(Uf),t.import(Wh)}Wp(pr);var kh=/^#source\((.*?)\)/;function Hf(t,i){var l=new jp;i=i||{};var f={textures:{},parameters:{}},h=function(_,S){for(var P=0;P<t.nodes.length;P++){var j=t.nodes[P],tt=Xh(j,f,i);tt&&l.addNode(tt)}};for(var p in t.parameters){var y=t.parameters[p];f.parameters[p]=Wf(y)}return Zh(t,f,i,function(_){f.textures=_,h()}),l}function Xh(t,i,l){var f=t.type||"filter",h,p,y;if(f==="filter"){var _=t.shader.trim(),S=kh.exec(_);if(S?h=pr.source(S[1].trim()):_.charAt(0)==="#"&&(h=i.shaders[_.substr(1)]),h||(h=_),!h)return}if(t.inputs){p={};for(var P in t.inputs)typeof t.inputs[P]=="string"?p[P]=t.inputs[P]:p[P]={node:t.inputs[P].node,pin:t.inputs[P].pin}}if(t.outputs){y={};for(var P in t.outputs){var j=t.outputs[P];y[P]={},j.attachment!=null&&(y[P].attachment=j.attachment),j.keepLastFrame!=null&&(y[P].keepLastFrame=j.keepLastFrame),j.outputLastFrame!=null&&(y[P].outputLastFrame=j.outputLastFrame),j.parameters&&(y[P].parameters=Wf(j.parameters))}}var tt;if(f==="scene"?tt=new Fp({name:t.name,scene:l.scene,camera:l.camera,outputs:y}):f==="texture"?tt=new Vp({name:t.name,outputs:y}):tt=new Gp({name:t.name,shader:h,inputs:p,outputs:y}),tt){if(t.parameters)for(var P in t.parameters){var _t=t.parameters[P];typeof _t=="string"?(_t=_t.trim(),_t.charAt(0)==="#"?_t=i.textures[_t.substr(1)]:tt.on("beforerender",Zp(P,Kh(_t)))):typeof _t=="function"&&tt.on("beforerender",_t),tt.setParameter(P,_t)}if(t.defines&&tt.pass)for(var P in t.defines){var _t=t.defines[P];tt.pass.material.define("fragment",P,_t)}}return tt}function kp(t,i){return t}function Xp(t,i){return i}function Wf(t){var i={};if(!t)return i;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(f){var h=t[f];h!=null&&(typeof h=="string"&&(h=Er[h]),i[f]=h)});var l=t.scale||1;return["width","height"].forEach(function(f){if(t[f]!=null){var h=t[f];typeof h=="string"?(h=h.trim(),i[f]=Yh(f,Kh(h),l)):i[f]=h}}),i.width||(i.width=kp),i.height||(i.height=Xp),t.useMipmap!=null&&(i.useMipmap=t.useMipmap),i}function Zh(t,i,l,f){if(!t.textures){f({});return}var h={},p=0,y=!1,_=l.textureRootPath;$.each(t.textures,function(S,P){var j,tt=S.path,_t=Wf(S.parameters);if(Array.isArray(tt)&&tt.length===6)_&&(tt=tt.map(function(xt){return $.relative2absolute(xt,_)})),j=new vo(_t);else if(typeof tt=="string")_&&(tt=$.relative2absolute(tt,_)),j=new Xr(_t);else return;j.load(tt),p++,j.once("success",function(){h[P]=j,p--,p===0&&(f(h),y=!0)})}),p===0&&!y&&f(h)}function Zp(t,i){return function(l){var f=l.getDevicePixelRatio(),h=l.getWidth(),p=l.getHeight(),y=i(h,p,f);this.setParameter(t,y)}}function Yh(t,i,l){return l=l||1,function(f){var h=f.getDevicePixelRatio(),p=f.getWidth()*l,y=f.getHeight()*l;return i(p,y,h)}}function Kh(t){var i=/^expr\((.*)\)$/.exec(t);if(i)try{var l=new Function("width","height","dpr","return "+i[1]);return l(1,1),l}catch(f){throw new Error("Invalid expression.")}}var Yp=Hf,Kp=Yp;function Qh(t,i){for(var l=0,f=1/i,h=t;h>0;)l=l+f*(h%i),h=Math.floor(h/i),f=f/i;return l}var Fa=Qh,Qp=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;pr.import(Qp);function Jh(t){for(var i=new Uint8Array(t*t*4),l=0,f=new hr,h=0;h<t;h++)for(var p=0;p<t;p++)f.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),i[l++]=(f.x*.5+.5)*255,i[l++]=(f.y*.5+.5)*255,i[l++]=0,i[l++]=255;return i}function $h(t){return new Xr({pixels:Jh(t),wrapS:Er.REPEAT,wrapT:Er.REPEAT,width:t,height:t})}function kf(t,i,l){var f=new Float32Array(t*3);i=i||0;for(var h=0;h<t;h++){var p=Fa(h+i,2)*(l?1:2)*Math.PI,y=Fa(h+i,3)*Math.PI,_=Math.random(),S=Math.cos(p)*Math.sin(y)*_,P=Math.cos(y)*_,j=Math.sin(p)*Math.sin(y)*_;f[h*3]=S,f[h*3+1]=P,f[h*3+2]=j}return f}function Ta(t){t=t||{},this._ssaoPass=new ni({fragment:pr.source("ecgl.ssao.estimate")}),this._blurPass=new ni({fragment:pr.source("ecgl.ssao.blur")}),this._framebuffer=new Wn({depthBuffer:!1}),this._ssaoTexture=new Xr,this._blurTexture=new Xr,this._blurTexture2=new Xr,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),t.radius!=null&&this.setParameter("radius",t.radius),t.power!=null&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}Ta.prototype.setDepthTexture=function(t){this._depthTex=t},Ta.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},Ta.prototype.update=function(t,i,l){var f=t.getWidth(),h=t.getHeight(),p=this._ssaoPass,y=this._blurPass;p.setUniform("kernel",this._kernels[l%this._kernels.length]),p.setUniform("depthTex",this._depthTex),this._normalTex!=null&&p.setUniform("normalTex",this._normalTex),p.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var _=new Be;Be.transpose(_,i.worldTransform),p.setUniform("projection",i.projectionMatrix.array),p.setUniform("projectionInv",i.invProjectionMatrix.array),p.setUniform("viewInverseTranspose",_.array);var S=this._ssaoTexture,P=this._blurTexture,j=this._blurTexture2;S.width=f/2,S.height=h/2,P.width=f,P.height=h,j.width=f,j.height=h,this._framebuffer.attach(S),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),p.render(t),y.setUniform("textureSize",[f/2,h/2]),y.setUniform("projection",i.projectionMatrix.array),this._framebuffer.attach(P),y.setUniform("direction",0),y.setUniform("ssaoTexture",S),y.render(t),this._framebuffer.attach(j),y.setUniform("textureSize",[f,h]),y.setUniform("direction",1),y.setUniform("ssaoTexture",P),y.render(t),this._framebuffer.unbind(t);var tt=t.clearColor;t.gl.clearColor(tt[0],tt[1],tt[2],tt[3])},Ta.prototype.getTargetTexture=function(){return this._blurTexture2},Ta.prototype.setParameter=function(t,i){t==="noiseTexSize"?this.setNoiseSize(i):t==="kernelSize"?this.setKernelSize(i):t==="intensity"?this._ssaoPass.material.set("intensity",i):this._ssaoPass.setUniform(t,i)},Ta.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var i=0;i<30;i++)this._kernels[i]=kf(t,i*t,!!this._normalTex)},Ta.prototype.setNoiseSize=function(t){var i=this._ssaoPass.getUniform("noiseTex");i?(i.data=Jh(t),i.width=i.height=t,i.dirty()):(i=$h(t),this._ssaoPass.setUniform("noiseTex",$h(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])},Ta.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};var Jp=Ta,$p=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;pr.import($p);function ro(t){t=t||{},this._ssrPass=new ni({fragment:pr.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new ni({fragment:pr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new ni({fragment:pr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new ni({fragment:pr.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Xr({type:Er.HALF_FLOAT}),this._texture2=new Xr({type:Er.HALF_FLOAT}),this._texture3=new Xr({type:Er.HALF_FLOAT}),this._prevTexture=new Xr({type:Er.HALF_FLOAT}),this._currentTexture=new Xr({type:Er.HALF_FLOAT}),this._frameBuffer=new Wn({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}ro.prototype.setAmbientCubemap=function(t,i){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",i);var l=t&&i;this._ssrPass.material[l?"enableTexture":"disableTexture"]("specularCubemap")},ro.prototype.update=function(t,i,l,f){var h=t.getWidth(),p=t.getHeight(),y=this._ssrTexture,_=this._texture2,S=this._texture3;y.width=this._prevTexture.width=this._currentTexture.width=h/this._downScale,y.height=this._prevTexture.height=this._currentTexture.height=p/this._downScale,_.width=S.width=h,_.height=S.height=p;var P=this._frameBuffer,j=this._ssrPass,tt=this._blurPass1,_t=this._blurPass2,xt=this._blendPass,Et=new Be,Pt=new Be;Be.transpose(Et,i.worldTransform),Be.transpose(Pt,i.viewMatrix),j.setUniform("sourceTexture",l),j.setUniform("projection",i.projectionMatrix.array),j.setUniform("projectionInv",i.invProjectionMatrix.array),j.setUniform("toViewSpace",Et.array),j.setUniform("toWorldSpace",Pt.array),j.setUniform("nearZ",i.near);var Vt=f/this._totalSamples*this._samplePerFrame;if(j.setUniform("jitterOffset",Vt),j.setUniform("sampleOffset",f*this._samplePerFrame),tt.setUniform("textureSize",[y.width,y.height]),_t.setUniform("textureSize",[h,p]),_t.setUniform("sourceTexture",l),tt.setUniform("projection",i.projectionMatrix.array),_t.setUniform("projection",i.projectionMatrix.array),P.attach(y),P.bind(t),j.render(t),this._physicallyCorrect&&(P.attach(this._currentTexture),xt.setUniform("texture1",this._prevTexture),xt.setUniform("texture2",y),xt.material.set({weight1:f>=1?.95:0,weight2:f>=1?.05:1}),xt.render(t)),P.attach(_),tt.setUniform("texture",this._physicallyCorrect?this._currentTexture:y),tt.render(t),P.attach(S),_t.setUniform("texture",_),_t.render(t),P.unbind(t),this._physicallyCorrect){var kt=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=kt}},ro.prototype.getTargetTexture=function(){return this._texture3},ro.prototype.setParameter=function(t,i){t==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",i):this._ssrPass.setUniform(t,i)},ro.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=Dl.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t},ro.prototype.setSSAOTexture=function(t){var i=this._blurPass2;t?(i.material.enableTexture("ssaoTex"),i.material.set("ssaoTex",t)):i.material.disableTexture("ssaoTex")},ro.prototype.isFinished=function(t){return this._physicallyCorrect?t>this._totalSamples/this._samplePerFrame:!0},ro.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};var ju=ro,qh=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],qp=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;pr.import(qp);function Xf(t,i,l,f,h){var p=t.gl;i.setUniform(p,"1i",l,h),p.activeTexture(p.TEXTURE0+h),f.isRenderable()?f.bind(t):f.unbind(t)}function tv(t,i,l,f,h){var p,y,_,S,P=t.gl;return function(j,tt,_t){if(!(S&&S.material===j.material)){var xt=j.material,Et=j.__program,Pt=xt.get("roughness");Pt==null&&(Pt=1);var Vt=xt.get("normalMap")||i,kt=xt.get("roughnessMap"),ee=xt.get("bumpMap"),Jt=xt.get("uvRepeat"),$t=xt.get("uvOffset"),ce=xt.get("detailUvRepeat"),de=xt.get("detailUvOffset"),we=!!ee&&xt.isTextureEnabled("bumpMap"),Ae=!!kt&&xt.isTextureEnabled("roughnessMap"),Ge=xt.isDefined("fragment","DOUBLE_SIDED");ee=ee||l,kt=kt||f,_t!==tt?(tt.set("normalMap",Vt),tt.set("bumpMap",ee),tt.set("roughnessMap",kt),tt.set("useBumpMap",we),tt.set("useRoughnessMap",Ae),tt.set("doubleSide",Ge),Jt!=null&&tt.set("uvRepeat",Jt),$t!=null&&tt.set("uvOffset",$t),ce!=null&&tt.set("detailUvRepeat",ce),de!=null&&tt.set("detailUvOffset",de),tt.set("roughness",Pt)):(Et.setUniform(P,"1f","roughness",Pt),p!==Vt&&Xf(t,Et,"normalMap",Vt,0),y!==ee&&ee&&Xf(t,Et,"bumpMap",ee,1),_!==kt&&kt&&Xf(t,Et,"roughnessMap",kt,2),Jt!=null&&Et.setUniform(P,"2f","uvRepeat",Jt),$t!=null&&Et.setUniform(P,"2f","uvOffset",$t),ce!=null&&Et.setUniform(P,"2f","detailUvRepeat",ce),de!=null&&Et.setUniform(P,"2f","detailUvOffset",de),Et.setUniform(P,"1i","useBumpMap",+we),Et.setUniform(P,"1i","useRoughnessMap",+Ae),Et.setUniform(P,"1i","doubleSide",+Ge)),p=Vt,y=ee,_=kt,S=j}}}function ns(t){t=t||{},this._depthTex=new Xr({format:Er.DEPTH_COMPONENT,type:Er.UNSIGNED_INT}),this._normalTex=new Xr({type:Er.HALF_FLOAT}),this._framebuffer=new Wn,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Wn.DEPTH_ATTACHMENT),this._normalMaterial=new Fe({shader:new pr(pr.source("ecgl.normal.vertex"),pr.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=go.createBlank("#000"),this._defaultBumpMap=go.createBlank("#000"),this._defaultRoughessMap=go.createBlank("#000"),this._debugPass=new ni({fragment:pr.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}ns.prototype.getDepthTexture=function(){return this._depthTex},ns.prototype.getNormalTexture=function(){return this._normalTex},ns.prototype.update=function(t,i,l){var f=t.getWidth(),h=t.getHeight(),p=this._depthTex,y=this._normalTex,_=this._normalMaterial;p.width=f,p.height=h,y.width=f,y.height=h;var S=i.getRenderList(l).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(S,l,{getMaterial:function(){return _},ifRender:function(P){return P.renderNormal},beforeRender:tv(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)},ns.prototype.renderDebug=function(t){this._debugPass.render(t)},ns.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};var tg=ns;function Js(t){t=t||{},this._edgePass=new ni({fragment:pr.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new Xr({type:Er.HALF_FLOAT}),this._frameBuffer=new Wn,this._frameBuffer.attach(this._targetTexture)}Js.prototype.update=function(t,i,l,f){var h=t.getWidth(),p=t.getHeight(),y=this._targetTexture;y.width=h,y.height=p;var _=this._frameBuffer;_.bind(t),this._edgePass.setUniform("projectionInv",i.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[h,p]),this._edgePass.setUniform("texture",l),this._edgePass.render(t),_.unbind(t)},Js.prototype.getTargetTexture=function(){return this._targetTexture},Js.prototype.setParameter=function(t,i){this._edgePass.setUniform(t,i)},Js.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};var ev=Js,rv={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},Zf=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,eg=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;pr.import(Qs),pr.import(Ff),pr.import(zf),pr.import(Vf),pr.import(Gf),pr.import(Uh),pr.import(Hh),pr.import(Uf),pr.import(Wh),pr.import(Zf),pr.import(eg);function Yf(t,i){return{color:{parameters:{width:t,height:i}}}}var Kf=["composite","FXAA"];function rn(){this._width,this._height,this._dpr,this._sourceTexture=new Xr({type:Er.HALF_FLOAT}),this._depthTexture=new Xr({format:Er.DEPTH_COMPONENT,type:Er.UNSIGNED_INT}),this._framebuffer=new Wn,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Wn.DEPTH_ATTACHMENT),this._normalPass=new tg,this._compositor=Kp(rv);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var i=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=i,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(f){return this._compositor.getNodeByName(f)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=Kf.map(function(f){return this._compositor.getNodeByName(f)},this);var l={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new Jp(l),this._ssrPass=new ju(l),this._edgePass=new ev(l)}rn.prototype.resize=function(t,i,l){l=l||1;var t=t*l,i=i*l,f=this._sourceTexture,h=this._depthTexture;f.width=t,f.height=i,h.width=t,h.height=i;var p={getWidth:function(){return t},getHeight:function(){return i},getDevicePixelRatio:function(){return l}};function y(_,S){if(typeof _[S]=="function"){var P=_[S].__original||_[S];_[S]=function(j){return P.call(this,p)},_[S].__original=P}}this._compositor.nodes.forEach(function(_){for(var S in _.outputs){var P=_.outputs[S].parameters;P&&(y(P,"width"),y(P,"height"))}for(var j in _.parameters)y(_.parameters,j)}),this._width=t,this._height=i,this._dpr=l},rn.prototype.getWidth=function(){return this._width},rn.prototype.getHeight=function(){return this._height},rn.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},rn.prototype._getPrevNode=function(t){for(var i=Kf.indexOf(t.name)-1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i-=1,l=this._finalNodesChain[i];return l},rn.prototype._getNextNode=function(t){for(var i=Kf.indexOf(t.name)+1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i+=1,l=this._finalNodesChain[i];return l},rn.prototype._addChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);!i||(t.inputs.texture=i.name,l?(t.outputs=Yf(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))},rn.prototype._removeChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);!i||(l?(i.outputs=Yf(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=i.name):i.outputs=null,this._compositor.removeNode(t))},rn.prototype.updateNormal=function(t,i,l,f){this._ifRenderNormalPass()&&this._normalPass.update(t,i,l)},rn.prototype.updateSSAO=function(t,i,l,f){this._ssaoPass.update(t,l,f)},rn.prototype.enableSSAO=function(){this._enableSSAO=!0},rn.prototype.disableSSAO=function(){this._enableSSAO=!1},rn.prototype.enableSSR=function(){this._enableSSR=!0},rn.prototype.disableSSR=function(){this._enableSSR=!1},rn.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},rn.prototype.getSourceFrameBuffer=function(){return this._framebuffer},rn.prototype.getSourceTexture=function(){return this._sourceTexture},rn.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},rn.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},rn.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},rn.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},rn.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},rn.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},rn.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},rn.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},rn.prototype.enableEdge=function(){this._enableEdge=!0},rn.prototype.disableEdge=function(){this._enableEdge=!1},rn.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)},rn.prototype.setSSAOParameter=function(t,i){switch(t){case"quality":var l={low:6,medium:12,high:32,ultra:62}[i]||12;this._ssaoPass.setParameter("kernelSize",l);break;case"radius":this._ssaoPass.setParameter(t,i),this._ssaoPass.setParameter("bias",i/200);break;case"intensity":this._ssaoPass.setParameter(t,i);break;default:}},rn.prototype.setDOFParameter=function(t,i){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,i);break;case"blurRadius":for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].setParameter("blurRadius",i);break;case"quality":var f={low:4,medium:8,high:16,ultra:32}[i]||8;this._dofBlurKernelSize=f;for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].pass.material.define("POISSON_KERNEL_SIZE",f);this._dofBlurKernel=new Float32Array(f*2);break;default:}},rn.prototype.setSSRParameter=function(t,i){if(i!=null)switch(t){case"quality":var l={low:10,medium:15,high:30,ultra:80}[i]||20,f={low:32,medium:16,high:8,ultra:4}[i]||16;this._ssrPass.setParameter("maxIteration",l),this._ssrPass.setParameter("pixelStride",f);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-i,1),0));break;case"physical":this.setPhysicallyCorrectSSR(i);break;default:console.warn("Unkown SSR parameter "+t)}},rn.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)},rn.prototype.setEdgeColor=function(t){var i=ae.parseColor(t);this._edgePass.setParameter("edgeColor",i)},rn.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))},rn.prototype.setColorLookupTexture=function(t,i){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",i,{minFilter:ae.Texture.NEAREST,magFilter:ae.Texture.NEAREST,flipY:!1})},rn.prototype.setColorCorrection=function(t,i){this._compositeNode.setParameter(t,i)},rn.prototype.isSSREnabled=function(){return this._enableSSR},rn.prototype.composite=function(t,i,l,f,h){var p=this._sourceTexture,y=p;this._enableEdge&&(this._edgePass.update(t,l,p,h),p=y=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,l,p,h),y=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=y,this._cocNode.setParameter("depth",this._depthTexture);for(var _=this._dofBlurKernel,S=this._dofBlurKernelSize,P=Math.floor(qh.length/2/S),j=h%P,tt=0;tt<S*2;tt++)_[tt]=qh[tt+j*S*2];for(var tt=0;tt<this._dofBlurNodes.length;tt++)this._dofBlurNodes[tt].setParameter("percent",h/30),this._dofBlurNodes[tt].setParameter("poissonKernel",_);this._cocNode.setParameter("zNear",l.near),this._cocNode.setParameter("zFar",l.far),this._compositor.render(t,f)},rn.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};var rg=rn;function jl(t){for(var i=[],l=0;l<30;l++)i.push([Fa(l,2),Fa(l,3)]);this._haltonSequence=i,this._frame=0,this._sourceTex=new Xr,this._sourceFb=new Wn,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Xr,this._outputTex=new Xr;var f=this._blendPass=new ni({fragment:pr.source("clay.compositor.blend")});f.material.disableTexturesAll(),f.material.enableTexture(["texture1","texture2"]),this._blendFb=new Wn({depthBuffer:!1}),this._outputPass=new ni({fragment:pr.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(h){h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA)}}jl.prototype={constructor:jl,jitterProjection:function(t,i){var l=t.viewport,f=l.devicePixelRatio||t.getDevicePixelRatio(),h=l.width*f,p=l.height*f,y=this._haltonSequence[this._frame%this._haltonSequence.length],_=new Be;_.array[12]=(y[0]*2-1)/h,_.array[13]=(y[1]*2-1)/p,Be.mul(i.projectionMatrix,_,i.projectionMatrix),Be.invert(i.invProjectionMatrix,i.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,i){this._prevFrameTex.width=t,this._prevFrameTex.height=i,this._outputTex.width=t,this._outputTex.height=i,this._sourceTex.width=t,this._sourceTex.height=i,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,i,l){var f=this._blendPass;this._frame===0?(f.setUniform("weight1",0),f.setUniform("weight2",1)):(f.setUniform("weight1",.9),f.setUniform("weight2",.1)),f.setUniform("texture1",this._prevFrameTex),f.setUniform("texture2",i||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),f.render(t),this._blendFb.unbind(t),l||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var h=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=h,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};var Bl=jl;function Rn(t){t=t||"perspective",this.layer=null,this.scene=new $i,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new rg,this._temporalSS=new Bl,this._shadowMapPass=new Nh;for(var i=[],l=0,f=0;f<30;f++){for(var h=[],p=0;p<6;p++)h.push(Fa(l,2)*4-2),h.push(Fa(l,3)*4-2),l++;i.push(h)}this._pcfKernels=i,this.scene.on("beforerender",function(y,_,S){this.needsTemporalSS()&&this._temporalSS.jitterProjection(y,S)},this)}Rn.prototype.setProjection=function(t){var i=this.camera;i&&i.update(),t==="perspective"?this.camera instanceof Jn||(this.camera=new Jn,i&&this.camera.setLocalTransform(i.localTransform)):this.camera instanceof Fs||(this.camera=new Fs,i&&this.camera.setLocalTransform(i.localTransform)),this.camera.near=.1,this.camera.far=2e3},Rn.prototype.setViewport=function(t,i,l,f,h){this.camera instanceof Jn&&(this.camera.aspect=l/f),h=h||1,this.viewport.x=t,this.viewport.y=i,this.viewport.width=l,this.viewport.height=f,this.viewport.devicePixelRatio=h,this._compositor.resize(l*h,f*h),this._temporalSS.resize(l*h,f*h)},Rn.prototype.containPoint=function(t,i){var l=this.viewport,f=this.layer.renderer.getHeight();return i=f-i,t>=l.x&&i>=l.y&&t<=l.x+l.width&&i<=l.y+l.height};var Bu=new Me;Rn.prototype.castRay=function(t,i,l){var f=this.layer.renderer,h=f.viewport;return f.viewport=this.viewport,f.screenToNDC(t,i,Bu),this.camera.castRay(Bu,l),f.viewport=h,l},Rn.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var i=0;i<t.transparent.length;i++){var l=t.transparent[i],f=l.geometry;f.needsSortVerticesProgressively&&f.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),f.needsSortTrianglesProgressively&&f.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},Rn.prototype.render=function(t,i){this._doRender(t,i,this._frame),this._frame++},Rn.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},Rn.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return t==="auto"&&(t=this._enablePostEffect),t},Rn.prototype.hasDOF=function(){return this._enableDOF},Rn.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},Rn.prototype._doRender=function(t,i,l){var f=this.scene,h=this.camera;l=l||0,this._updateTransparent(t,f,h,l),i||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,f,h,!0)),this._updateShadowPCFKernel(l);var p=t.clearColor;if(t.gl.clearColor(p[0],p[1],p[2],p[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,h),this._compositor.updateNormal(t,f,h,this._temporalSS.getFrame())),this._updateSSAO(t,f,h,this._temporalSS.getFrame()),this._enablePostEffect){var y=this._compositor.getSourceFrameBuffer();y.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(f,h,!0,!0),y.unbind(t),this.needsTemporalSS()&&i?(this._compositor.composite(t,f,h,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,f,h,null,0))}else if(this.needsTemporalSS()&&i){var y=this._temporalSS.getSourceFrameBuffer();y.bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(f,h,!0,!0),t.restoreClear(),y.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(f,h,!0,!0)},Rn.prototype._updateTransparent=function(t,i,l,f){for(var h=new hr,p=new Be,y=l.getWorldPosition(),_=i.getRenderList(l).transparent,S=0;S<_.length;S++){var P=_[S],j=P.geometry;Be.invert(p,P.worldTransform),hr.transformMat4(h,y,p),j.needsSortTriangles&&j.needsSortTriangles()&&j.doSortTriangles(h,f),j.needsSortVertices&&j.needsSortVertices()&&j.doSortVertices(h,f)}},Rn.prototype._updateSSAO=function(t,i,l){var f=this._enableSSAO&&this._enablePostEffect;f&&this._compositor.updateSSAO(t,i,l,this._temporalSS.getFrame());for(var h=i.getRenderList(l),p=0;p<h.opaque.length;p++){var y=h.opaque[p];y.renderNormal&&y.material[f?"enableTexture":"disableTexture"]("ssaoMap"),f&&y.material.set("ssaoMap",this._compositor.getSSAOTexture())}},Rn.prototype._updateShadowPCFKernel=function(t){for(var i=this._pcfKernels[t%this._pcfKernels.length],l=this.scene.getRenderList(this.camera),f=l.opaque,h=0;h<f.length;h++)f[h].receiveShadow&&(f[h].material.set("pcfKernel",i),f[h].material.define("fragment","PCF_KERNEL_SIZE",i.length/2))},Rn.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)},Rn.prototype.setPostEffect=function(t,i){var l=this._compositor;this._enablePostEffect=t.get("enable");var f=t.getModel("bloom"),h=t.getModel("edge"),p=t.getModel("DOF",t.getModel("depthOfField")),y=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),_=t.getModel("SSR",t.getModel("screenSpaceReflection")),S=t.getModel("FXAA"),P=t.getModel("colorCorrection");f.get("enable")?l.enableBloom():l.disableBloom(),p.get("enable")?l.enableDOF():l.disableDOF(),_.get("enable")?l.enableSSR():l.disableSSR(),P.get("enable")?l.enableColorCorrection():l.disableColorCorrection(),h.get("enable")?l.enableEdge():l.disableEdge(),S.get("enable")?l.enableFXAA():l.disableFXAA(),this._enableDOF=p.get("enable"),this._enableSSAO=y.get("enable"),this._enableSSAO?l.enableSSAO():l.disableSSAO(),l.setBloomIntensity(f.get("intensity")),l.setEdgeColor(h.get("color")),l.setColorLookupTexture(P.get("lookupTexture"),i),l.setExposure(P.get("exposure")),["radius","quality","intensity"].forEach(function(j){l.setSSAOParameter(j,y.get(j))}),["quality","maxRoughness","physical"].forEach(function(j){l.setSSRParameter(j,_.get(j))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(j){l.setDOFParameter(j,p.get(j))}),["brightness","contrast","saturation"].forEach(function(j){l.setColorCorrection(j,P.get(j))})},Rn.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect)return t>this.camera.far||t<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",t),!0)},Rn.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")},Rn.prototype.isLinearSpace=function(){return this._enablePostEffect},Rn.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var i=this.rootNode.children(),l=0;l<i.length;l++)t.add(i[l]);t!==this.scene&&this.scene.add(t),this.rootNode=t}},Rn.prototype.add=function(t){this.rootNode.add(t)},Rn.prototype.remove=function(t){this.rootNode.remove(t)},Rn.prototype.removeAll=function(t){this.rootNode.removeAll(t)},Object.assign(Rn.prototype,W);var Oa=Rn;function ng(t,i){var l=t.getBoxLayoutParams(),f=Object(Ys.g)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var h=t.get("boxWidth"),p=t.get("boxHeight"),y=t.get("boxDepth");this.getAxis("x").setExtent(-h/2,h/2),this.getAxis("y").setExtent(y/2,-y/2),this.getAxis("z").setExtent(-p/2,p/2),this.size=[h,p,y]}function ig(t,i){var l={};function f(h,p){l[h]=l[h]||[Infinity,-Infinity],l[h][0]=Math.min(p[0],l[h][0]),l[h][1]=Math.max(p[1],l[h][1])}t.eachSeries(function(h){if(h.coordinateSystem===this){var p=h.getData();["x","y","z"].forEach(function(y){p.mapDimensionsAll(y,!0).forEach(function(_){f(y,p.getDataExtent(_,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(h){t.eachComponent(h,function(p){var y=h.charAt(0),_=p.getReferringComponents("grid3D").models[0],S=_.coordinateSystem;if(S===this){var P=S.getAxis(y);if(!P){var j=B.m.createScale(l[y]||[Infinity,-Infinity],p);P=new eo(y,j),P.type=p.get("type");var tt=P.type==="category";P.onBand=tt&&p.get("boundaryGap"),P.inverse=p.get("inverse"),p.axis=P,P.model=p,P.getLabelModel=function(){return p.getModel("axisLabel",_.getModel("axisLabel"))},P.getTickModel=function(){return p.getModel("axisTick",_.getModel("axisTick"))},S.addAxis(P)}}},this)},this),this.resize(this.model,i)}var ag={dimensions:wh.prototype.dimensions,create:function(t,i){var l=[];t.eachComponent("grid3D",function(p){p.__viewGL=p.__viewGL||new Oa;var y=new wh;y.model=p,y.viewGL=p.__viewGL,p.coordinateSystem=y,l.push(y),y.resize=ng,y.update=ig});var f=["xAxis3D","yAxis3D","zAxis3D"];function h(p,y){return f.map(function(_){var S=p.getReferringComponents(_).models[0];return S==null&&(S=y.getComponent(_)),S})}return t.eachSeries(function(p){if(p.get("coordinateSystem")==="cartesian3D"){var y=p.getReferringComponents("grid3D").models[0];if(y==null){var _=h(p,t),y=_[0].getCoordSysModel();_.forEach(function(j){var tt=j.getCoordSysModel()})}var S=y.coordinateSystem;p.coordinateSystem=S}}),l}},Fl=ag,nv=B.c.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});B.m.mixinAxisModelCommonMethods(nv);var og=nv,iv={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},sg=B.x.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},iv),Qf=B.x.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},iv),av=B.x.defaults({scale:!0,min:"dataMin",max:"dataMax"},Qf),ov=B.x.defaults({logBase:10},Qf);ov.scale=!0;var Jf={categoryAxis3D:sg,valueAxis3D:Qf,timeAxis3D:av,logAxis3D:ov},sv=b("Z7PX"),lg=["value","category","time","log"],lv=function(t,i,l,f,h){lg.forEach(function(p){var y=l.extend({type:i+"Axis3D."+p,__ordinalMeta:null,mergeDefaultAndTheme:function(_,S){var P=S.getTheme();B.x.merge(_,P.get(p+"Axis3D")),B.x.merge(_,this.getDefaultOption()),_.type=f(i,_)},optionUpdated:function(){var _=this.option;_.type==="category"&&(this.__ordinalMeta=sv.a.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:B.x.merge(B.x.clone(Jf[p+"Axis3D"]),h||{},!0)});t.registerComponentModel(y)}),t.registerSubTypeDefaulter(i+"Axis3D",B.x.curry(f,i))};function ug(t,i){return i.type||(i.data?"category":"value")}function fg(t){t.registerComponentModel(Pu),t.registerComponentView(Ip),t.registerCoordinateSystem("grid3D",Fl),["x","y","z"].forEach(function(i){lv(t,i,og,ug,{name:i.toUpperCase()});const l=t.ComponentView.extend({type:i+"Axis3D"});t.registerComponentView(l)}),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"grid3D",query:i},function(f){f.setView(i)})}),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(i,l){}),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(i,l){})}Object(B.w)(fg);var ea={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},uv={getFilledRegions:function(t,i){var l=(t||[]).slice(),f;if(typeof i=="string"?(i=B.k(i),f=i&&i.geoJson):i&&i.features&&(f=i),!f)return[];for(var h={},p=f.features,y=0;y<l.length;y++)h[l[y].name]=l[y];for(var y=0;y<p.length;y++){var _=p[y].properties.name;h[_]||l.push({name:_})}return l},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}},is=B.c.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var i=B.m.createDimensions(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),l=new B.e(i,this);l.initData(t.regions);var f={};l.each(function(h){var p=l.getName(h),y=l.getItemModel(h);f[p]=y}),this._regionModelMap=f,this._data=l},getData:function(){return this._data},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new B.f(null,this)},getRegionPolygonCoords:function(t){var i=this.getData().getName(t),l=this.coordinateSystem.getRegion(i);return l?l.geometries:[]},getFormattedLabel:function(t,i){var l=this._data.getName(t),f=this.getRegionModel(t),h=f.get(i==="normal"?["label","formatter"]:["emphasis","label","formatter"]);h==null&&(h=f.get(["label","formatter"]));var p={name:l};if(typeof h=="function")return p.status=i,h(p);if(typeof h=="string"){var y=p.seriesName;return h.replace("{a}",y!=null?y:"")}else return l},defaultOption:{regions:[]}});B.x.merge(is.prototype,uv),B.x.merge(is.prototype,qo),B.x.merge(is.prototype,Ws),B.x.merge(is.prototype,ts),B.x.merge(is.prototype,ea);var $f=is,cg=fv;function fv(t,i,l){l=l||2;var f=i&&i.length,h=f?i[0]*l:t.length,p=cv(t,0,h,l,!0),y=[];if(!p)return y;var _,S,P,j,tt,_t,xt;if(f&&(p=dv(t,i,p,l)),t.length>80*l){_=P=t[0],S=j=t[1];for(var Et=l;Et<h;Et+=l)tt=t[Et],_t=t[Et+1],tt<_&&(_=tt),_t<S&&(S=_t),tt>P&&(P=tt),_t>j&&(j=_t);xt=Math.max(P-_,j-S)}return Vl(p,y,l,_,S,xt),y}function cv(t,i,l,f,h){var p,y;if(h===Hl(t,i,l,f)>0)for(p=i;p<l;p+=f)y=Fu(p,t[p],t[p+1],y);else for(p=l-f;p>=i;p-=f)y=Fu(p,t[p],t[p+1],y);return y&&os(y,y.next)&&(Ul(y),y=y.next),y}function zl(t,i){if(!t)return t;i||(i=t);var l=t,f;do if(f=!1,!l.steiner&&(os(l,l.next)||pi(l.prev,l,l.next)===0)){if(Ul(l),l=i=l.prev,l===l.next)return null;f=!0}else l=l.next;while(f||l!==i);return i}function Vl(t,i,l,f,h,p,y){if(!!t){!y&&p&&dg(t,f,h,p);for(var _=t,S,P;t.prev!==t.next;){if(S=t.prev,P=t.next,p?hv(t,f,h,p):hg(t)){i.push(S.i/l),i.push(t.i/l),i.push(P.i/l),Ul(t),t=P.next,_=P.next;continue}if(t=P,t===_){y?y===1?(t=qf(t,i,l),Vl(t,i,l,f,h,p,2)):y===2&&vv(t,i,l,f,h,p):Vl(zl(t),i,l,f,h,p,1);break}}}}function hg(t){var i=t.prev,l=t,f=t.next;if(pi(i,l,f)>=0)return!1;for(var h=t.next.next;h!==t.prev;){if(as(i.x,i.y,l.x,l.y,f.x,f.y,h.x,h.y)&&pi(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function hv(t,i,l,f){var h=t.prev,p=t,y=t.next;if(pi(h,p,y)>=0)return!1;for(var _=h.x<p.x?h.x<y.x?h.x:y.x:p.x<y.x?p.x:y.x,S=h.y<p.y?h.y<y.y?h.y:y.y:p.y<y.y?p.y:y.y,P=h.x>p.x?h.x>y.x?h.x:y.x:p.x>y.x?p.x:y.x,j=h.y>p.y?h.y>y.y?h.y:y.y:p.y>y.y?p.y:y.y,tt=no(_,S,i,l,f),_t=no(P,j,i,l,f),xt=t.nextZ;xt&&xt.z<=_t;){if(xt!==t.prev&&xt!==t.next&&as(h.x,h.y,p.x,p.y,y.x,y.y,xt.x,xt.y)&&pi(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}for(xt=t.prevZ;xt&&xt.z>=tt;){if(xt!==t.prev&&xt!==t.next&&as(h.x,h.y,p.x,p.y,y.x,y.y,xt.x,xt.y)&&pi(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}return!0}function qf(t,i,l){var f=t;do{var h=f.prev,p=f.next.next;!os(h,p)&&yv(h,f,f.next,p)&&io(h,p)&&io(p,h)&&(i.push(h.i/l),i.push(f.i/l),i.push(p.i/l),Ul(f),Ul(f.next),f=t=p),f=f.next}while(f!==t);return f}function vv(t,i,l,f,h,p){var y=t;do{for(var _=y.next.next;_!==y.prev;){if(y.i!==_.i&&gg(y,_)){var S=Gl(y,_);y=zl(y,y.next),S=zl(S,S.next),Vl(y,i,l,f,h,p),Vl(S,i,l,f,h,p);return}_=_.next}y=y.next}while(y!==t)}function dv(t,i,l,f){var h=[],p,y,_,S,P;for(p=0,y=i.length;p<y;p++)_=i[p]*f,S=p<y-1?i[p+1]*f:t.length,P=cv(t,_,S,f,!1),P===P.next&&(P.steiner=!0),h.push(mv(P));for(h.sort(pv),p=0;p<h.length;p++)gv(h[p],l),l=zl(l,l.next);return l}function pv(t,i){return t.x-i.x}function gv(t,i){if(i=vg(t,i),i){var l=Gl(i,t);zl(l,l.next)}}function vg(t,i){var l=i,f=t.x,h=t.y,p=-Infinity,y;do{if(h<=l.y&&h>=l.next.y&&l.next.y!==l.y){var _=l.x+(h-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(_<=f&&_>p){if(p=_,_===f){if(h===l.y)return l;if(h===l.next.y)return l.next}y=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!y)return null;if(f===p)return y.prev;var S=y,P=y.x,j=y.y,tt=Infinity,_t;for(l=y.next;l!==S;)f>=l.x&&l.x>=P&&f!==l.x&&as(h<j?f:p,h,P,j,h<j?p:f,h,l.x,l.y)&&(_t=Math.abs(h-l.y)/(f-l.x),(_t<tt||_t===tt&&l.x>y.x)&&io(l,t)&&(y=l,tt=_t)),l=l.next;return y}function dg(t,i,l,f){var h=t;do h.z===null&&(h.z=no(h.x,h.y,i,l,f)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next;while(h!==t);h.prevZ.nextZ=null,h.prevZ=null,pg(h)}function pg(t){var i,l,f,h,p,y,_,S,P=1;do{for(l=t,t=null,p=null,y=0;l;){for(y++,f=l,_=0,i=0;i<P&&(_++,f=f.nextZ,!!f);i++);for(S=P;_>0||S>0&&f;)_!==0&&(S===0||!f||l.z<=f.z)?(h=l,l=l.nextZ,_--):(h=f,f=f.nextZ,S--),p?p.nextZ=h:t=h,h.prevZ=p,p=h;l=f}p.nextZ=null,P*=2}while(y>1);return t}function no(t,i,l,f,h){return t=32767*(t-l)/h,i=32767*(i-f)/h,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t|i<<1}function mv(t){var i=t,l=t;do i.x<l.x&&(l=i),i=i.next;while(i!==t);return l}function as(t,i,l,f,h,p,y,_){return(h-y)*(i-_)-(t-y)*(p-_)>=0&&(t-y)*(f-_)-(l-y)*(i-_)>=0&&(l-y)*(p-_)-(h-y)*(f-_)>=0}function gg(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!mg(t,i)&&io(t,i)&&io(i,t)&&yg(t,i)}function pi(t,i,l){return(i.y-t.y)*(l.x-i.x)-(i.x-t.x)*(l.y-i.y)}function os(t,i){return t.x===i.x&&t.y===i.y}function yv(t,i,l,f){return os(t,i)&&os(l,f)||os(t,f)&&os(l,i)?!0:pi(t,i,l)>0!=pi(t,i,f)>0&&pi(l,f,t)>0!=pi(l,f,i)>0}function mg(t,i){var l=t;do{if(l.i!==t.i&&l.next.i!==t.i&&l.i!==i.i&&l.next.i!==i.i&&yv(l,l.next,t,i))return!0;l=l.next}while(l!==t);return!1}function io(t,i){return pi(t.prev,t,t.next)<0?pi(t,i,t.next)>=0&&pi(t,t.prev,i)>=0:pi(t,i,t.prev)<0||pi(t,t.next,i)<0}function yg(t,i){var l=t,f=!1,h=(t.x+i.x)/2,p=(t.y+i.y)/2;do l.y>p!=l.next.y>p&&l.next.y!==l.y&&h<(l.next.x-l.x)*(p-l.y)/(l.next.y-l.y)+l.x&&(f=!f),l=l.next;while(l!==t);return f}function Gl(t,i){var l=new tc(t.i,t.x,t.y),f=new tc(i.i,i.x,i.y),h=t.next,p=i.prev;return t.next=i,i.prev=t,l.next=h,h.prev=l,f.next=l,l.prev=f,p.next=f,f.prev=p,f}function Fu(t,i,l,f){var h=new tc(t,i,l);return f?(h.next=f.next,h.prev=f,f.next.prev=h,f.next=h):(h.prev=h,h.next=h),h}function Ul(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function tc(t,i,l){this.i=t,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}fv.deviation=function(t,i,l,f){var h=i&&i.length,p=h?i[0]*l:t.length,y=Math.abs(Hl(t,0,p,l));if(h)for(var _=0,S=i.length;_<S;_++){var P=i[_]*l,j=_<S-1?i[_+1]*l:t.length;y-=Math.abs(Hl(t,P,j,l))}var tt=0;for(_=0;_<f.length;_+=3){var _t=f[_]*l,xt=f[_+1]*l,Et=f[_+2]*l;tt+=Math.abs((t[_t]-t[Et])*(t[xt+1]-t[_t+1])-(t[_t]-t[xt])*(t[Et+1]-t[_t+1]))}return y===0&&tt===0?0:Math.abs((tt-y)/y)};function Hl(t,i,l,f){for(var h=0,p=i,y=l-f;p<l;p+=f)h+=(t[y]-t[p])*(t[p+1]+t[y+1]),y=p;return h}function $s(t,i,l){var f=t[i];t[i]=t[l],t[l]=f}function ec(t,i,l,f,h){var p=l,y=t[i];$s(t,i,f);for(var _=l;_<f;_++)h(t[_],y)<0&&($s(t,_,p),p++);return $s(t,f,p),p}function Mo(t,i,l,f){if(l<f){var h=Math.floor((l+f)/2),p=ec(t,h,l,f,i);Mo(t,i,l,p-1),Mo(t,i,p+1,f)}}function ss(){this._parts=[]}ss.prototype.step=function(t,i,l){var f=t.length;if(l===0){this._parts=[],this._sorted=!1;var h=Math.floor(f/2);this._parts.push({pivot:h,left:0,right:f-1}),this._currentSortPartIdx=0}if(!this._sorted){var p=this._parts;if(p.length===0)return this._sorted=!0,!0;if(p.length<512){for(var y=0;y<p.length;y++)p[y].pivot=ec(t,p[y].pivot,p[y].left,p[y].right,i);for(var _=[],y=0;y<p.length;y++){var S=p[y].left,P=p[y].pivot-1;P>S&&_.push({pivot:Math.floor((P+S)/2),left:S,right:P});var S=p[y].pivot+1,P=p[y].right;P>S&&_.push({pivot:Math.floor((P+S)/2),left:S,right:P})}p=this._parts=_}else for(var y=0;y<Math.floor(p.length/10);y++){var j=p.length-1-this._currentSortPartIdx;if(Mo(t,i,p[j].left,p[j].right),this._currentSortPartIdx++,this._currentSortPartIdx===p.length)return this._sorted=!0,!0}return!1}},ss.sort=Mo;var za=ss,Do=qn.vec3,zu=Do.create(),rc=Do.create(),xv=Do.create(),qs={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,i){var l=this.indices;if(i===0){var f=this.attributes.position,t=t.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new l.constructor(l.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var h=0,p,y=0;y<l.length;){f.get(l[y++],zu),f.get(l[y++],rc),f.get(l[y++],xv);var _=Do.sqrDist(zu,t),S=Do.sqrDist(rc,t),P=Do.sqrDist(xv,t),j=Math.min(_,S);j=Math.min(j,P),y===3?(p=j,j=0):j=j-p,this._triangleZList[h++]=j}}for(var tt=this._sortedTriangleIndices,y=0;y<tt.length;y++)tt[y]=y;if(this.triangleCount<2e4)i===0&&this._simpleSort(!0);else for(var y=0;y<3;y++)this._progressiveQuickSort(i*3+y);for(var _t=this._indicesTmp,xt=this._triangleZListTmp,Et=this._triangleZList,y=0;y<this.triangleCount;y++){var Pt=tt[y]*3,Vt=y*3;_t[Vt++]=l[Pt++],_t[Vt++]=l[Pt++],_t[Vt]=l[Pt],xt[y]=Et[tt[y]]}var kt=this._indicesTmp;this._indicesTmp=this.indices,this.indices=kt;var kt=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=kt,this.dirtyIndices()},_simpleSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;function f(h,p){return i[p]-i[h]}t?Array.prototype.sort.call(l,f):za.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;this._quickSort=this._quickSort||new za,this._quickSort.step(l,function(f,h){return i[h]-i[f]},t)}};function Ai(t){const i=t.getVisual("style");if(i){const l=t.getVisual("drawType");return i[l]}}function xg(t){return t.getVisual("style").opacity}function ci(t,i){const l=t.getItemVisual(i,"style");if(l){const f=t.getVisual("drawType");return l[f]}}function gi(t,i){const l=t.getItemVisual(i,"style");return l&&l.opacity}var nc=1,_v=2;function Eo(t,i,l){this._labelsMesh=new Rl,this._labelTextureSurface=new Zs({width:512,height:512,devicePixelRatio:l.getDevicePixelRatio(),onupdate:function(){l.getZr().refresh()}}),this._api=l,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}Eo.prototype.getLabelPosition=function(t,i,l){return[0,0,0]},Eo.prototype.getLabelDistance=function(t,i,l){return 0},Eo.prototype.getMesh=function(){return this._labelsMesh},Eo.prototype.updateData=function(t,i,l){i==null&&(i=0),l==null&&(l=t.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==l-i)&&(this._labelsVisibilitiesBits=new Uint8Array(l-i));for(var f=["label","show"],h=["emphasis","label","show"],p=i;p<l;p++){var y=t.getItemModel(p),_=y.get(f),S=y.get(h);S==null&&(S=_);var P=(_?nc:0)|(S?_v:0);this._labelsVisibilitiesBits[p-i]=P}this._start=i,this._end=l,this._data=t},Eo.prototype.updateLabels=function(t){if(!!this._data){t=t||[];for(var i=t.length>0,l={},f=0;f<t.length;f++)l[t[f]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var h=["label"],p=["emphasis","label"],y=this._data.hostModel,_=this._data,S=y.getModel(h),P=y.getModel(p,S),j={left:"right",right:"left",top:"center",bottom:"center"},tt={left:"middle",right:"middle",top:"bottom",bottom:"top"},_t=this._start;_t<this._end;_t++){var xt=!1;i&&l[_t]&&(xt=!0);var Et=this._labelsVisibilitiesBits[_t-this._start]&(xt?_v:nc);if(!!Et){var Pt=_.getItemModel(_t),Vt=Pt.getModel(xt?p:h,xt?P:S),kt=Vt.get("distance")||0,ee=Vt.get("position"),Jt=this._api.getDevicePixelRatio(),$t=y.getFormattedLabel(_t,xt?"emphasis":"normal");if($t==null||$t==="")return;var ce=new B.l.Text({style:Object(wl.c)(Vt,{text:$t,fill:Vt.get("color")||ci(_,_t)||"#000",align:"left",verticalAlign:"top",opacity:Zr.firstNotNull(Vt.get("opacity"),gi(_,_t),1)})}),de=ce.getBoundingRect(),we=1.2;de.height*=we;var Ae=this._labelTextureSurface.add(ce),Ge=j[ee]||"center",rr=tt[ee]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(_t,ee,kt),[de.width*Jt,de.height*Jt],Ae,Ge,rr,this.getLabelDistance(_t,ee,kt)*Jt)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},Eo.prototype.dispose=function(){this._labelTextureSurface.dispose()};var ic=Eo,Li=qn.vec3;ae.Shader.import(Lu);function ac(t){this.rootNode=new ae.Node,this._triangulationResults={},this._shadersMap=ae.COMMON_SHADERS.filter(function(l){return l!=="shadow"}).reduce(function(l,f){return l[f]=ae.createShader("ecgl."+f),l},{}),this._linesShader=ae.createShader("ecgl.meshLines3D");var i={};ae.COMMON_SHADERS.forEach(function(l){i[l]=new ae.Material({shader:ae.createShader("ecgl."+l)})}),this._groundMaterials=i,this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new ic(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}ac.prototype={constructor:ac,extrudeY:!0,update:function(t,i,l,f,h){var p=t.getData();f==null&&(f=0),h==null&&(h=p.count()),this._startIndex=f,this._endIndex=h-1,this._triangulation(t,f,h);var y=this._getShader(t.get("shading"));this._prepareMesh(t,y,l,f,h),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,l,f,h);var _=t.coordinateSystem;_.type==="geo3D"&&this._updateGroundPlane(t,_,l);var S=this;this._labelsBuilder.updateData(p,f,h),this._labelsBuilder.getLabelPosition=function(P,j,tt){var _t=p.getName(P),xt,Et=tt;if(_.type==="geo3D"){var Pt=_.getRegion(_t);if(!Pt)return[NaN,NaN,NaN];xt=Pt.getCenter();var Vt=_.dataToPoint([xt[0],xt[1],Et]);return Vt}else var kt=S._triangulationResults[P-S._startIndex],xt=S.extrudeY?[(kt.max[0]+kt.min[0])/2,kt.max[1]+Et,(kt.max[2]+kt.min[2])/2]:[(kt.max[0]+kt.min[0])/2,(kt.max[1]+kt.min[1])/2,kt.max[2]+Et]},this._data=p,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this;function i(){var h=new ae.Mesh({name:"Polygon",material:new ae.Material({shader:t._shadersMap.lambert}),geometry:new ae.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(h.geometry,qs),h}var l=i(),f=new ae.Mesh({material:new ae.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new xo({useNativeLine:!1})});this.rootNode.add(l),this.rootNode.add(f),l.material.define("both","VERTEX_COLOR"),l.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=l,this._linesMesh=f,this.rootNode.add(this._groundMesh)},_getShader:function(t){var i=this._shadersMap[t];return i||(i=this._shadersMap.lambert),i.__shading=t,i},_prepareMesh:function(t,i,l,f,h){for(var p=0,y=0,_=0,S=0,P=f;P<h;P++){var j=this._getRegionPolygonInfo(P),tt=this._getRegionLinesInfo(P,t,this._linesMesh.geometry);p+=j.vertexCount,y+=j.triangleCount,_+=tt.vertexCount,S+=tt.triangleCount}var _t=this._polygonMesh,xt=_t.geometry;["position","normal","texcoord0","color"].forEach(function(Et){xt.attributes[Et].init(p)}),xt.indices=p>65535?new Uint32Array(y*3):new Uint16Array(y*3),_t.material.shader!==i&&_t.material.attachShader(i,!0),ae.setMaterialFromModel(i.__shading,_t.material,t,l),_>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(_),this._linesMesh.geometry.setTriangleCount(S)),this._dataIndexOfVertex=new Uint32Array(p),this._vertexRangeOfDataIndex=new Uint32Array((h-f)*2)},_updateRegionMesh:function(t,i,l,f){for(var h=t.getData(),p=0,y=0,_=!1,S=this._polygonMesh,P=this._linesMesh,j=l;j<f;j++){var tt=t.getRegionModel(j),_t=tt.getModel("itemStyle"),xt=Zr.firstNotNull(ci(h,j),_t.get("color"),"#fff"),Et=Zr.firstNotNull(gi(h,j),1),Pt=ae.parseColor(xt),Vt=ae.parseColor(_t.get("borderColor"));Pt[3]*=Et,Vt[3]*=Et;var kt=Pt[3]<.99;S.material.set("color",[1,1,1,1]),_=_||kt;for(var ee=Zr.firstNotNull(tt.get("height",!0),t.get("regionHeight")),Jt=this._updatePolygonGeometry(t,S.geometry,j,ee,p,y,Pt),$t=p;$t<Jt.vertexOffset;$t++)this._dataIndexOfVertex[$t]=j;this._vertexRangeOfDataIndex[(j-l)*2]=p,this._vertexRangeOfDataIndex[(j-l)*2+1]=Jt.vertexOffset,p=Jt.vertexOffset,y=Jt.triangleOffset;var ce=_t.get("borderWidth"),de=ce>0;de&&(ce*=i.getDevicePixelRatio(),this._updateLinesGeometry(P.geometry,t,j,ee,ce,t.coordinateSystem.transform)),P.invisible=!de,P.material.set({color:Vt})}var S=this._polygonMesh;S.material.transparent=_,S.material.depthMask=!_,S.geometry.updateBoundingBox(),S.frontFace=this.extrudeY?ae.Mesh.CCW:ae.Mesh.CW,S.material.get("normalMap")&&S.geometry.generateTangents(),S.seriesIndex=t.seriesIndex,S.on("mousemove",this._onmousemove,this),S.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var i=t.getModel("debug.wireframe");if(i.get("show")){var l=ae.parseColor(i.get("lineStyle.color")||"rgba(0,0,0,0.5)"),f=Zr.firstNotNull(i.get("lineStyle.width"),1),h=this._polygonMesh;h.geometry.generateBarycentric(),h.material.define("both","WIREFRAME_TRIANGLE"),h.material.set("wireframeLineColor",l),h.material.set("wireframeLineWidth",f)}},_onmousemove:function(t){var i=this._dataIndexOfVertex[t.triangle[0]];i==null&&(i=-1),i!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(i),this._labelsBuilder.updateLabels([i])),this._lastHoverDataIndex=i,this._polygonMesh.dataIndex=i},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,i,l){var f=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!f.get("show",!0),!this._groundMesh.invisible){var h=t.get("shading"),p=this._groundMaterials[h];p||(p=this._groundMaterials.lambert),ae.setMaterialFromModel(h,p,f,l),p.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=p,this._groundMesh.material.set("color",ae.parseColor(f.get("color"))),this._groundMesh.scale.set(i.size[0],i.size[2],1)}},_triangulation:function(t,i,l){this._triangulationResults=[];for(var f=[Infinity,Infinity,Infinity],h=[-Infinity,-Infinity,-Infinity],p=t.coordinateSystem,y=i;y<l;y++){for(var _=[],S=t.getRegionPolygonCoords(y),P=0;P<S.length;P++){var j=S[P].exterior,tt=S[P].interiors,_t=[],xt=[];if(!(j.length<3)){for(var Et=0,Pt=0;Pt<j.length;Pt++){var Vt=j[Pt];_t[Et++]=Vt[0],_t[Et++]=Vt[1]}for(var Pt=0;Pt<tt.length;Pt++)if(!(tt[Pt].length<3)){for(var kt=_t.length/2,ee=0;ee<tt[Pt].length;ee++){var Vt=tt[Pt][ee];_t.push(Vt[0]),_t.push(Vt[1])}xt.push(kt)}for(var Jt=cg(_t,xt),$t=new Float64Array(_t.length/2*3),ce=[],de=[Infinity,Infinity,Infinity],we=[-Infinity,-Infinity,-Infinity],Ae=0,Pt=0;Pt<_t.length;)Li.set(ce,_t[Pt++],0,_t[Pt++]),p&&p.transform&&Li.transformMat4(ce,ce,p.transform),Li.min(de,de,ce),Li.max(we,we,ce),$t[Ae++]=ce[0],$t[Ae++]=ce[1],$t[Ae++]=ce[2];Li.min(f,f,de),Li.max(h,h,we),_.push({points:$t,indices:Jt,min:de,max:we})}}this._triangulationResults.push(_)}this._geoBoundingBox=[f,h]},_getRegionPolygonInfo:function(t){for(var i=this._triangulationResults[t-this._startIndex],l=0,f=0,h=0;h<i.length;h++)l+=i[h].points.length/3,f+=i[h].indices.length/3;var p=l*2+l*4,y=f*2+l*2;return{vertexCount:p,triangleCount:y}},_updatePolygonGeometry:function(t,i,l,f,h,p,y){var _=t.get("projectUVOnGround"),S=i.attributes.position,P=i.attributes.normal,j=i.attributes.texcoord0,tt=i.attributes.color,_t=this._triangulationResults[l-this._startIndex],xt=tt.value&&y,Et=i.indices,Pt=this.extrudeY?1:2,Vt=this.extrudeY?2:1,kt=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],ee=Li.mul([],this._geoBoundingBox[0],kt),Jt=Li.mul([],this._geoBoundingBox[1],kt),$t=Math.max(Jt[0]-ee[0],Jt[2]-ee[2]);function ce(oi,Mi,yi){for(var xi=oi.points,nu=xi.length,hi=[],ca=[],Di=0;Di<nu;Di+=3)hi[0]=xi[Di],hi[Pt]=Mi,hi[Vt]=xi[Di+2],ca[0]=(xi[Di]*kt[0]-ee[0])/$t,ca[1]=(xi[Di+2]*kt[Vt]-ee[2])/$t,S.set(h,hi),xt&&tt.set(h,y),j.set(h++,ca)}function de(oi,Mi,yi){var xi=h;ce(oi,Mi,yi);for(var nu=oi.indices.length,hi=0;hi<nu;hi++)Et[p*3+hi]=oi.indices[hi]+xi;p+=oi.indices.length/3}for(var we=this.extrudeY?[0,1,0]:[0,0,1],Ae=Li.negate([],we),Ge=0;Ge<_t.length;Ge++){var rr=h,Qe=_t[Ge];de(Qe,0,0),de(Qe,f,0);for(var sr=Qe.points.length/3,fr=0;fr<sr;fr++)P.set(rr+fr,Ae),P.set(rr+fr+sr,we);for(var $e=[0,3,1,1,3,2],dr=[[],[],[],[]],Sr=[],Lr=[],gr=[],ln=[],Dr=0,fr=0;fr<sr;fr++){for(var Tn=(fr+1)%sr,un=(Qe.points[Tn*3]-Qe.points[fr*3])*kt[0],En=(Qe.points[Tn*3+2]-Qe.points[fr*3+2])*kt[Vt],Cn=Math.sqrt(un*un+En*En),nn=0;nn<4;nn++){var $r=nn===0||nn===3,jn=($r?fr:Tn)*3;dr[nn][0]=Qe.points[jn],dr[nn][Pt]=nn>1?f:0,dr[nn][Vt]=Qe.points[jn+2],S.set(h+nn,dr[nn]),_?(ln[0]=(Qe.points[jn]*kt[0]-ee[0])/$t,ln[1]=(Qe.points[jn+2]*kt[Vt]-ee[Vt])/$t):(ln[0]=($r?Dr:Dr+Cn)/$t,ln[1]=(dr[nn][Pt]*kt[Pt]-ee[Pt])/$t),j.set(h+nn,ln)}Li.sub(Sr,dr[1],dr[0]),Li.sub(Lr,dr[3],dr[0]),Li.cross(gr,Sr,Lr),Li.normalize(gr,gr);for(var nn=0;nn<4;nn++)P.set(h+nn,gr),xt&&tt.set(h+nn,y);for(var nn=0;nn<6;nn++)Et[p*3+nn]=$e[nn]+h;h+=4,p+=2,Dr+=Cn}}return i.dirty(),{vertexOffset:h,triangleOffset:p}},_getRegionLinesInfo:function(t,i,l){var f=0,h=0,p=i.getRegionModel(t),y=p.getModel("itemStyle"),_=y.get("borderWidth");if(_>0){var S=i.getRegionPolygonCoords(t);S.forEach(function(P){var j=P.exterior,tt=P.interiors;f+=l.getPolylineVertexCount(j),h+=l.getPolylineTriangleCount(j);for(var _t=0;_t<tt.length;_t++)f+=l.getPolylineVertexCount(tt[_t]),h+=l.getPolylineTriangleCount(tt[_t])},this)}return{vertexCount:f,triangleCount:h}},_updateLinesGeometry:function(t,i,l,f,h,p){function y(P){for(var j=new Float64Array(P.length*3),tt=0,_t=[],xt=0;xt<P.length;xt++)_t[0]=P[xt][0],_t[1]=f+.1,_t[2]=P[xt][1],p&&Li.transformMat4(_t,_t,p),j[tt++]=_t[0],j[tt++]=_t[1],j[tt++]=_t[2];return j}var _=[1,1,1,1],S=i.getRegionPolygonCoords(l);S.forEach(function(P){var j=P.exterior,tt=P.interiors;t.addPolyline(y(j),_,h);for(var _t=0;_t<tt.length;_t++)t.addPolyline(y(tt[_t]),_,h)})},highlight:function(t){var i=this._data;if(!!i){var l=i.getItemModel(t),f=l.getModel(["emphasis","itemStyle"]),h=f.get("color"),p=Zr.firstNotNull(f.get("opacity"),gi(i,t),1);if(h==null){var y=ci(i,t);h=B.h.lift(y,-.4)}p==null&&(p=gi(i,t));var _=ae.parseColor(h);_[3]*=p,this._setColorOfDataIndex(i,t,_)}},downplay:function(t){var i=this._data;if(!!i){var l=Zr.firstNotNull(ci(i,t),i.getItemModel(t).get(["itemStyle","color"]),"#fff"),f=Zr.firstNotNull(gi(i,t),1),h=ae.parseColor(l);h[3]*=f,this._setColorOfDataIndex(i,t,h)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,i,l){if(!(i<this._startIndex&&i>this._endIndex)){i-=this._startIndex;for(var f=this._vertexRangeOfDataIndex[i*2];f<this._vertexRangeOfDataIndex[i*2+1];f++)this._polygonMesh.geometry.attributes.color.set(f,l);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};var tl=ac,_g=B.d.extend({type:"geo3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new tl(i),this.groupGL=new ae.Node,this._lightRoot=new ae.Node,this._sceneHelper=new _o(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new Ll({zr:i.getZr()}),this._control.init()},render:function(t,i,l){this.groupGL.add(this._geo3DBuilder.rootNode);var f=t.coordinateSystem;if(!(!f||!f.viewGL)){f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var h=this._control;h.setViewGL(f.viewGL);var p=t.getModel("viewControl");h.setFromViewControlModel(p,0),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,i,l,0,t.getData().count());var y=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(_){_.material&&_.material[y]("fragment","SRGB_DECODE")}),h.off("update"),h.on("update",function(){l.dispatchAction({type:"geo3DChangeCamera",alpha:h.getAlpha(),beta:h.getBeta(),distance:h.getDistance(),center:h.getCenter(),from:this.uid,geo3DId:t.id})}),h.update()}},afterRender:function(t,i,l,f){var h=f.renderer;this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}}),Wl=b("VDD2"),Vu={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function bv(t,i){if(t==="world"){var l=Vu[i.name];if(l){var f=[l[0],l[1]];i.setCenter(f)}}}var oc=qn.vec3,ls=qn.mat4,bg=[Wl.a,bv];function sc(t,i,l,f,h){this.name=t,this.map=i,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(l,f,h),this.transform=ls.identity(new Float64Array(16)),this.invTransform=ls.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}sc.prototype={constructor:sc,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,i,l){var f=B.q||B.r;try{this.regions=t?f(t):[]}catch(P){throw`Invalid geoJson format
`+P}i=i||{},l=l||{};for(var h=this.regions,p={},y=0;y<h.length;y++){var _=h[y].name;_=l[_]||_,h[y].name=_,p[_]=h[y],this.addGeoCoord(_,h[y].getCenter());var S=i[_];S&&h[y].transformTo(S.left,S.top,S.width,S.height)}this._regionsMap=p,this._geoRect=null,bg.forEach(function(P){P(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,i=this.regions,l=0;l<i.length;l++){var f=i[l].getBoundingRect();t=t||f.clone(),t.union(f)}return this._geoRect=t||new B.l.BoundingRect(0,0,0,0)},addGeoCoord:function(t,i){this._nameCoordMap[t]=i},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var i=this.regions,l=0;l<i.length;l++)if(i[l].contain(t))return i[l]},setSize:function(t,i,l){this.size=[t,i,l];var f=this.getGeoBoundingRect(),h=t/f.width,p=-l/f.height,y=-t/2-f.x*h,_=l/2-f.y*p,S=this.extrudeY?[y,0,_]:[y,_,0],P=this.extrudeY?[h,1,p]:[h,p,1],j=this.transform;ls.identity(j),ls.translate(j,j,S),ls.scale(j,j,P),ls.invert(this.invTransform,j)},dataToPoint:function(t,i){i=i||[];var l=this.extrudeY?1:2,f=this.extrudeY?2:1,h=t[2];return isNaN(h)&&(h=0),i[0]=t[0],i[f]=t[1],this.altitudeAxis?i[l]=this.altitudeAxis.dataToCoord(h):i[l]=0,i[l]+=this.regionHeight,oc.transformMat4(i,i,this.transform),i},pointToData:function(t,i){}};var Sv=sc;function Sg(t,i){var l=t.getBoxLayoutParams(),f=Object(Ys.g)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var h=this.getGeoBoundingRect(),p=h.width/h.height*(t.get("aspectScale")||.75),y=t.get("boxWidth"),_=t.get("boxDepth"),S=t.get("boxHeight");S==null&&(S=5),isNaN(y)&&isNaN(_)&&(y=100),isNaN(_)?_=y/p:isNaN(y)&&(y=_/p),this.setSize(y,S,_),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(S-this.regionHeight,0))}function Tv(t,i){var l=[Infinity,-Infinity];if(t.eachSeries(function(h){if(h.coordinateSystem===this&&h.type!=="series.map3D"){var p=h.getData(),y=h.coordDimToDataDim("alt"),_=y&&y[0];if(_){var S=p.getDataExtent(_,!0);l[0]=Math.min(l[0],S[0]),l[1]=Math.max(l[1],S[1])}}},this),l&&isFinite(l[1]-l[0])){var f=B.m.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new B.a("altitude",f),this.resize(this.model,i)}}if(!1)var f0;var Ov=0,Av={dimensions:Sv.prototype.dimensions,create:function(t,i){var l=[];if(!B.k)throw new Error("geo3D component depends on geo component");function f(h,p){var y=Av.createGeo3D(h);h.__viewGL=h.__viewGL||new Oa,y.viewGL=h.__viewGL,h.coordinateSystem=y,y.model=h,l.push(y),y.resize=Sg,y.resize(h,i),y.update=Tv}return t.eachComponent("geo3D",function(h,p){f(h,p)}),t.eachSeriesByType("map3D",function(h,p){var y=h.get("coordinateSystem");y==null&&(y="geo3D"),y==="geo3D"&&f(h,p)}),t.eachSeries(function(h){if(h.get("coordinateSystem")==="geo3D"){if(h.type==="series.map3D")return;var p=h.getReferringComponents("geo3D").models[0];if(p||(p=t.getComponent("geo3D")),!p)throw new Error('geo "'+Zr.firstNotNull(h.get("geo3DIndex"),h.get("geo3DId"),0)+'" not found');h.coordinateSystem=p.coordinateSystem}}),l},createGeo3D:function(t){var i=t.get("map"),l;return typeof i=="string"?(l=i,i=B.k(i)):i&&i.features&&(i={geoJson:i}),l==null&&(l="GEO_ANONYMOUS_"+Ov++),new Sv(l+Ov++,l,i&&i.geoJson,i&&i.specialAreas,t.get("nameMap"))}},Mv=Av;function Dv(t){t.registerComponentModel($f),t.registerComponentView(_g),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"geo3D",query:i},function(f){f.setView(i)})}),t.registerCoordinateSystem("geo3D",Mv)}Object(B.w)(Dv);function lc(t,i){t.id=t.id||t.name||i+""}var us=B.c.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){us.superApply(this,"init",arguments),B.x.each(this.option.layers,function(t,i){B.x.merge(t,this.defaultLayerOption),lc(t,i)},this)},mergeOption:function(t){var i=this.option.layers;this.option.layers=null,us.superApply(this,"mergeOption",arguments);function l(y){return B.x.reduce(y,function(_,S,P){return lc(S,P),_[S.id]=S,_},{})}if(i&&i.length){var f=l(t.layers),h=l(i);for(var p in f)h[p]?B.x.merge(h[p],f[p],!0):i.push(t.layers[p]);this.option.layers=i}B.x.each(this.option.layers,function(y){B.x.merge(y,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),i=this.get("displacementScale");return(!t||t==="none")&&(i=0),i},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),i=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==i,this._displacementTexture=t,this._displacementScale=i},isDisplacementChanged:function(){return this._displacementChanged}});B.x.merge(us.prototype,qo),B.x.merge(us.prototype,Ws),B.x.merge(us.prototype,ts),B.x.merge(us.prototype,ea);var Tg=us,uc=Math.PI,ra=Math.sin,ao=Math.cos,Ev=Math.tan,Cv=Math.asin,kl=Math.atan2,fs=uc/180,fc=1e3*60*60*24,Gu=2440588,Pv=2451545;function Xl(t){return t.valueOf()/fc-.5+Gu}function wv(t){return Xl(t)-Pv}var Uu=fs*23.4397;function Og(t,i){return kl(ra(t)*ao(Uu)-Ev(i)*ra(Uu),ao(t))}function cc(t,i){return Cv(ra(i)*ao(Uu)+ao(i)*ra(Uu)*ra(t))}function Ag(t,i,l){return kl(ra(t),ao(t)*ra(i)-Ev(l)*ao(i))}function Mg(t,i,l){return Cv(ra(i)*ra(l)+ao(i)*ao(l)*ao(t))}function hc(t,i){return fs*(280.16+360.9856235*t)-i}function Lv(t){return fs*(357.5291+.98560028*t)}function Iv(t){var i=fs*(1.9148*ra(t)+.02*ra(2*t)+3e-4*ra(3*t)),l=fs*102.9372;return t+i+l+uc}function Dg(t){var i=Lv(t),l=Iv(i);return{dec:cc(l,0),ra:Og(l,0)}}var el={};el.getPosition=function(t,i,l){var f=fs*-l,h=fs*i,p=wv(t),y=Dg(p),_=hc(p,f)-y.ra;return{azimuth:Ag(_,h,y.dec),altitude:Mg(_,h,y.dec)}};var Zl=el,Rv=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;ae.Shader.import(gh),ae.Shader.import(Rv);var vc=B.d.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,i){this.groupGL=new ae.Node,this._sphereGeometry=new ae.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new ae.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new ae.PlaneGeometry,this._earthMesh=new ae.Mesh({renderNormal:!0}),this._atmosphereMesh=new ae.Mesh,this._atmosphereGeometry=new ae.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.atmosphere.vertex"),ae.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=ae.Mesh.CW,this._lightRoot=new ae.Node,this._sceneHelper=new _o,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new Ll({zr:i.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,i,l){var f=t.coordinateSystem,h=t.get("shading");f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL),this._sceneHelper.setScene(f.viewGL.scene),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._earthMesh;p.geometry=this._sphereGeometry;var y="ecgl."+h;(!p.material||p.material.shader.name!==y)&&(p.material=ae.createMaterial(y)),ae.setMaterialFromModel(h,p.material,t,l),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(tt){var _t=p.material.get(tt);_t&&(_t.flipY=!1)}),p.material.set("color",ae.parseColor(t.get("baseColor")));var _=f.radius*.99;if(p.scale.set(_,_,_),t.get("atmosphere.show")){p.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),p.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var S=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(_+S,_+S,_+S)}else p.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var P=p.material.setTextureImage("diffuseMap",t.get("baseTexture"),l,{flipY:!1,anisotropic:8});P&&P.surface&&P.surface.attachToMesh(p);var j=p.material.setTextureImage("bumpMap",t.get("heightTexture"),l,{flipY:!1,anisotropic:8});j&&j.surface&&j.surface.attachToMesh(p),p.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,l),this._displaceVertices(t,l),this._updateViewControl(t,l),this._updateLayers(t,l)},afterRender:function(t,i,l,f){var h=f.renderer;this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l)},_updateLayers:function(t,i){var l=t.coordinateSystem,f=t.get("layers"),h=l.radius,p=[],y=[],_=[],S=[];B.x.each(f,function(xt){var Et=new B.f(xt),Pt=Et.get("type"),Vt=ae.loadTexture(Et.get("texture"),i,{flipY:!1,anisotropic:8});if(Vt.surface&&Vt.surface.attachToMesh(this._earthMesh),Pt==="blend"){var kt=Et.get("blendTo"),ee=Zr.firstNotNull(Et.get("intensity"),1);kt==="emission"?(_.push(Vt),S.push(ee)):(p.push(Vt),y.push(ee))}else{var Jt=Et.get("id"),$t=this._layerMeshes[Jt];$t||($t=this._layerMeshes[Jt]=new ae.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var ce=Et.get("shading");ce==="lambert"?($t.material=$t.__lambertMaterial||new ae.Material({autoUpdateTextureStatus:!1,shader:ae.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),$t.__lambertMaterial=$t.material):($t.material=$t.__colorMaterial||new ae.Material({autoUpdateTextureStatus:!1,shader:ae.createShader("ecgl.color"),transparent:!0,depthMask:!1}),$t.__colorMaterial=$t.material),$t.material.enableTexture("diffuseMap");var de=Et.get("distance"),we=h+(de==null?l.radius/100:de);$t.scale.set(we,we,we),h=we;var Ae=this._blankTexture||(this._blankTexture=ae.createBlankTexture("rgba(255, 255, 255, 0)"));$t.material.set("diffuseMap",Ae),ae.loadTexture(Et.get("texture"),i,{flipY:!1,anisotropic:8},function(Ge){Ge.surface&&Ge.surface.attachToMesh($t),$t.material.set("diffuseMap",Ge),i.getZr().refresh()}),Et.get("show")?this.groupGL.add($t):this.groupGL.remove($t)}},this);var P=this._earthMesh.material;P.define("fragment","LAYER_DIFFUSEMAP_COUNT",p.length),P.define("fragment","LAYER_EMISSIVEMAP_COUNT",_.length),P.set("layerDiffuseMap",p),P.set("layerDiffuseIntensity",y),P.set("layerEmissiveMap",_),P.set("layerEmissionIntensity",S);var j=t.getModel("debug.wireframe");if(j.get("show")){P.define("both","WIREFRAME_TRIANGLE");var tt=ae.parseColor(j.get("lineStyle.color")||"rgba(0,0,0,0.5)"),_t=Zr.firstNotNull(j.get("lineStyle.width"),1);P.set("wireframeLineWidth",_t),P.set("wireframeLineColor",tt)}else P.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,i){var l=t.coordinateSystem,f=t.getModel("viewControl"),h=l.viewGL.camera,p=this;function y(){return{type:"globeChangeCamera",alpha:_.getAlpha(),beta:_.getBeta(),distance:_.getDistance()-l.radius,center:_.getCenter(),from:p.uid,globeId:t.id}}var _=this._control;_.setViewGL(l.viewGL);var S=f.get("targetCoord"),P,j;S!=null&&(j=S[0]+90,P=S[1]),_.setFromViewControlModel(f,{baseDistance:l.radius,alpha:P,beta:j}),_.off("update"),_.on("update",function(){i.dispatchAction(y())})},_displaceVertices:function(t,i){var l=t.get("displacementQuality"),f=t.get("debug.wireframe.show"),h=t.coordinateSystem;if(!(!t.isDisplacementChanged()&&l===this._displacementQuality&&f===this._showDebugWireframe)){this._displacementQuality=l,this._showDebugWireframe=f;var p=this._sphereGeometry,y={low:100,medium:200,high:400,ultra:800}[l]||200,_=y/2;(p.widthSegments!==y||f)&&(p.widthSegments=y,p.heightSegments=_,p.build()),this._doDisplaceVertices(p,h),f&&p.generateBarycentric()}},_doDisplaceVertices:function(t,i){var l=t.attributes.position.value,f=t.attributes.texcoord0.value,h=t.__originalPosition;(!h||h.length!==l.length)&&(h=new Float32Array(l.length),h.set(l),t.__originalPosition=h);for(var p=i.displacementWidth,y=i.displacementHeight,_=i.displacementData,S=0;S<t.vertexCount;S++){var P=S*3,j=S*2,tt=h[P+1],_t=h[P+2],xt=h[P+3],Et=f[j++],Pt=f[j++],Vt=Math.round(Et*(p-1)),kt=Math.round(Pt*(y-1)),ee=kt*p+Vt,Jt=_?_[ee]:0;l[P+1]=tt+tt*Jt,l[P+2]=_t+_t*Jt,l[P+3]=xt+xt*Jt}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,i){var l=this._earthMesh;this._sceneHelper.updateLight(t);var f=this._sceneHelper.mainLight,h=t.get("light.main.time")||new Date,p=Zl.getPosition(B.p.parseDate(h),0,0),y=Math.cos(p.altitude);f.position.y=-y*Math.cos(p.azimuth),f.position.x=Math.sin(p.altitude),f.position.z=y*Math.sin(p.azimuth),f.lookAt(l.getWorldPosition())},dispose:function(t,i){this.groupGL.removeAll(),this._control.dispose()}}),Nv=qn.vec3;function dc(t){this.radius=t,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}dc.prototype={constructor:dc,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},_getDisplacementScale:function(t,i){var l=(t+180)/360*(this.displacementWidth-1),f=(90-i)/180*(this.displacementHeight-1),h=Math.round(l)+Math.round(f)*this.displacementWidth;return this.displacementData[h]},dataToPoint:function(t,i){var l=t[0],f=t[1],h=t[2]||0,p=this.radius;this.displacementData&&(p*=1+this._getDisplacementScale(l,f)),this.altitudeAxis&&(p+=this.altitudeAxis.dataToCoord(h)),l=l*Math.PI/180,f=f*Math.PI/180;var y=Math.cos(f)*p;return i=i||[],i[0]=-y*Math.cos(l+Math.PI),i[1]=Math.sin(f)*p,i[2]=y*Math.sin(l+Math.PI),i},pointToData:function(t,i){var l=t[0],f=t[1],h=t[2],p=Nv.len(t);l/=p,f/=p,h/=p;var y=Math.asin(f),_=Math.atan2(h,-l);_<0&&(_=Math.PI*2+_);var S=y*180/Math.PI,P=_*180/Math.PI-180;return i=i||[],i[0]=P,i[1]=S,i[2]=p-this.radius,this.altitudeAxis&&(i[2]=this.altitudeAxis.coordToData(i[2])),i}};var jv=dc;function rl(t,i){var l=document.createElement("canvas"),f=l.getContext("2d"),h=t.width,p=t.height;l.width=h,l.height=p,f.drawImage(t,0,0,h,p);for(var y=f.getImageData(0,0,h,p).data,_=new Float32Array(y.length/4),S=0;S<y.length/4;S++){var P=y[S*4];_[S]=P/255*i}return{data:_,width:h,height:p}}function Eg(t,i){var l=t.getBoxLayoutParams(),f=Object(Ys.g)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio()),this.radius=t.get("globeRadius");var h=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,h-this.radius)}function Cg(t,i){var l=[Infinity,-Infinity];if(t.eachSeries(function(h){if(h.coordinateSystem===this){var p=h.getData(),y=h.coordDimToDataDim("alt"),_=y&&y[0];if(_){var S=p.getDataExtent(_,!0);l[0]=Math.min(l[0],S[0]),l[1]=Math.max(l[1],S[1])}}},this),l&&isFinite(l[1]-l[0])){var f=B.m.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new B.a("altitude",f),this.resize(this.model,i)}}var Pg={dimensions:jv.prototype.dimensions,create:function(t,i){var l=[];return t.eachComponent("globe",function(f){f.__viewGL=f.__viewGL||new Oa;var h=new jv;h.viewGL=f.__viewGL,f.coordinateSystem=h,h.model=f,l.push(h),h.resize=Eg,h.resize(f,i),h.update=Cg}),t.eachSeries(function(f){if(f.get("coordinateSystem")==="globe"){var h=f.getReferringComponents("globe").models[0];if(h||(h=t.getComponent("globe")),!h)throw new Error('globe "'+Zr.firstNotNull(f.get("globe3DIndex"),f.get("globe3DId"),0)+'" not found');var p=h.coordinateSystem;f.coordinateSystem=p}}),t.eachComponent("globe",function(f,h){var p=f.coordinateSystem,y=f.getDisplacementTexture(),_=f.getDisplacemenScale();if(f.isDisplacementChanged()){if(f.hasDisplacement()){var S=!0;ae.loadTexture(y,i,function(P){var j=P.image,tt=rl(j,_);f.setDisplacementData(tt.data,tt.width,tt.height),S||i.dispatchAction({type:"globeUpdateDisplacment"})}),S=!1}else p.setDisplacementData(null,0,0);p.setDisplacementData(f.displacementData,f.displacementWidth,f.displacementHeight)}}),l}},wg=Pg;function Bv(t){t.registerComponentModel(Tg),t.registerComponentView(vc),t.registerCoordinateSystem("globe",wg),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"globe",query:i},function(f){f.setView(i)})}),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(i,l){})}Object(B.w)(Bv);var Hu=["zoom","center","pitch","bearing"],Wu=B.c.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return Hu.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMapboxCameraOption:function(t){t!=null&&Hu.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});B.x.merge(Wu.prototype,Ws),B.x.merge(Wu.prototype,ts);var c0=Wu;function Va(t,i){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Va.prototype.setUnpainted=function(){},Va.prototype.resize=function(){this._mapbox.resize()},Va.prototype.getMapbox=function(){return this._mapbox},Va.prototype.clear=function(){},Va.prototype.refresh=function(){this._mapbox.resize()};var Fv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Va.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},Fv.forEach(function(i){this._handlers[i]=function(l){var f={};for(var h in l)f[h]=l[h];f.bubbles=!1;var p=new l.constructor(l.type,f);t.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Va.prototype.dispose=function(){Fv.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this)};var Lg=Va,ku=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;ae.Shader.import(ku);var Ig=512,zv=B.d.extend({type:"mapbox3D",__ecgl__:!0,init:function(t,i){var l=i.getZr();this._zrLayer=new Lg("mapbox3D",l),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ae.Node,this._sceneHelper=new _o(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMapbox(),h=this._dispatchInteractAction.bind(this,i,f);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(p){f.on(p,h)}),this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.displayShadow.vertex"),fragment:ae.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,i,l){var f=this._zrLayer.getMapbox(),h=t.get("style"),p=JSON.stringify(h);p!==this._oldStyleStr&&h&&f.setStyle(h),this._oldStyleStr=p,f.setCenter(t.get("center")),f.setZoom(t.get("zoom")),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMapbox(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,i,l,f){var h=f.renderer;this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:i.getPitch(),zoom:i.getZoom(),center:i.getCenter().toArray(),bearing:i.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new ae.Plane(new ae.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new ae.Vector2(-1,-1)),h=t.viewGL.camera.castRay(new ae.Vector2(1,1)),p=f.intersectPlane(l),y=h.intersectPlane(l),_=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(_,_,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}}),Co=qn.mat4,cs=512,pc=.6435011087932844,Ii=Math.PI,nl=1/10;function gc(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}gc.prototype={constructor:gc,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,cs)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(!!this.height){var t=.5/Math.tan(pc/2)*this.height*nl,i=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,l=pc/2,f=Math.PI/2+i,h=Math.sin(l)*t/Math.sin(Math.PI-f-l),p=Math.cos(Math.PI/2-i)*h+t,y=p*1.1;this.pitch>50&&(y=1e3);var _=[];Co.perspective(_,pc,this.width/this.height,1,y),this.viewGL.camera.projectionMatrix.setArray(_),this.viewGL.camera.decomposeProjectionMatrix();var _=Co.identity([]),S=this.dataToPoint(this.center);Co.scale(_,_,[1,-1,1]),Co.translate(_,_,[0,0,-t]),Co.rotateX(_,_,i),Co.rotateZ(_,_,-this.bearing/180*Math.PI),Co.translate(_,_,[-S[0]*this.getScale()*nl,-S[1]*this.getScale()*nl,0]),this.viewGL.camera.viewMatrix.array=_;var P=[];Co.invert(P,_),this.viewGL.camera.worldTransform.array=P,this.viewGL.camera.decomposeWorldTransform();var j=cs*this.getScale(),tt;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var _t=this.altitudeExtent[1]-this.altitudeExtent[0];tt=this.boxHeight/_t*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else tt=j/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*nl;this.viewGL.rootNode.scale.set(this.getScale()*nl,this.getScale()*nl,tt)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,i){return this.projectOnTileWithScale(t,this.getScale()*cs,i)},projectOnTileWithScale:function(t,i,l){var f=t[0],h=t[1],p=f*Ii/180,y=h*Ii/180,_=i*(p+Ii)/(2*Ii),S=i*(Ii-Math.log(Math.tan(Ii/4+y*.5)))/(2*Ii);return l=l||[],l[0]=_,l[1]=S,l},unprojectFromTile:function(t,i){return this.unprojectOnTileWithScale(t,this.getScale()*cs,i)},unprojectOnTileWithScale:function(t,i,l){var f=t[0],h=t[1],p=f/i*(2*Ii)-Ii,y=2*(Math.atan(Math.exp(Ii-h/i*(2*Ii)))-Ii/4);return l=l||[],l[0]=p*180/Ii,l[1]=y*180/Ii,l},dataToPoint:function(t,i){return i=this.projectOnTileWithScale(t,cs,i),i[0]-=this._origin[0],i[1]-=this._origin[1],i[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(i[2]=t[2],this.altitudeExtent&&(i[2]-=this.altitudeExtent[0])),i}};var Yl=gc;function il(){Yl.apply(this,arguments)}il.prototype=new Yl,il.prototype.constructor=il,il.prototype.type="mapbox3D";var mc=il,Xu=function(t,i,l){function f(p,y){var _=y.getWidth(),S=y.getHeight(),P=y.getDevicePixelRatio();this.viewGL.setViewport(0,0,_,S,P),this.width=_,this.height=S,this.altitudeScale=p.get("altitudeScale"),this.boxHeight=p.get("boxHeight")}function h(p,y){if(this.model.get("boxHeight")!=="auto"){var _=[Infinity,-Infinity];p.eachSeries(function(S){if(S.coordinateSystem===this){var P=S.getData(),j=S.coordDimToDataDim("alt")[0];if(j){var tt=P.getDataExtent(j,!0);_[0]=Math.min(_[0],tt[0]),_[1]=Math.max(_[1],tt[1])}}},this),_&&isFinite(_[1]-_[0])&&(this.altitudeExtent=_)}}return{dimensions:i.prototype.dimensions,create:function(p,y){var _=[];return p.eachComponent(t,function(S){var P=S.__viewGL;P||(P=S.__viewGL=new Oa,P.setRootNode(new ae.Node));var j=new i;j.viewGL=S.__viewGL,j.resize=f,j.resize(S,y),_.push(j),S.coordinateSystem=j,j.model=S,j.update=h}),p.eachSeries(function(S){if(S.get("coordinateSystem")===t){var P=S.getReferringComponents(t).models[0];if(P||(P=p.getComponent(t)),!P)throw new Error(t+' "'+Zr.firstNotNull(S.get(t+"Index"),S.get(t+"Id"),0)+'" not found');S.coordinateSystem=P.coordinateSystem}}),l&&l(_,p,y),_}}},yc=Xu("mapbox3D",mc,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMapboxCameraOption())})}),xc=yc;function _c(t){t.registerComponentModel(c0),t.registerComponentView(zv),t.registerCoordinateSystem("mapbox3D",xc),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(i,l){l.eachComponent({mainType:"mapbox3D",query:i},function(f){f.setMapboxCameraOption(i)})})}Object(B.w)(_c);var hs=["zoom","center","pitch","bearing"],Kl=B.c.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return hs.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMaptalksCameraOption:function(t){t!=null&&hs.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});B.x.merge(Kl.prototype,Ws),B.x.merge(Kl.prototype,ts);var Vv=Kl;function oo(t,i,l,f){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:l,zoom:f,doubleClickZoom:!1,fog:!1}),this._initEvents()}oo.prototype.setUnpainted=function(){},oo.prototype.resize=function(){this._maptalks.checkSize()},oo.prototype.getMaptalks=function(){return this._maptalks},oo.prototype.clear=function(){},oo.prototype.refresh=function(){this._maptalks.checkSize()};var Zu=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];oo.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},Zu.forEach(function(i){this._handlers[i]=function(l){var f={};for(var h in l)f[h]=l[h];f.bubbles=!1;var p=new l.constructor(l.type,f);i==="mousewheel"||i==="DOMMouseScroll"?t.dispatchEvent(p):t.firstElementChild.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},oo.prototype.dispose=function(){Zu.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this),this._maptalks.remove()};var Gv=oo;ae.Shader.import(ku);var Rg=B.d.extend({type:"maptalks3D",__ecgl__:!0,init:function(t,i){this._groundMesh=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.displayShadow.vertex"),fragment:ae.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,i){var l=i.getZr();this._zrLayer=new Gv("maptalks3D",l,t.get("center"),t.get("zoom")),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ae.Node,this._sceneHelper=new _o(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMaptalks(),h=this._dispatchInteractAction.bind(this,i,f);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(p){f.on(p,h)})},render:function(t,i,l){this._zrLayer||this._initMaptalksLayer(t,l);var f=this._zrLayer.getMaptalks(),h=t.get("urlTemplate"),p=f.getBaseLayer();h!==this._oldUrlTemplate&&(p?p.setOptions({urlTemplate:h,attribution:t.get("attribution")}):(p=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:h,subdomains:["a","b","c"],attribution:t.get("attribution")}),f.setBaseLayer(p))),this._oldUrlTemplate=h,f.setCenter(t.get("center")),f.setZoom(t.get("zoom"),{animation:!1}),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMaptalks(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,i,l,f){var h=f.renderer;this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:i.getPitch(),zoom:jg(i.getResolution())+1,center:i.getCenter().toArray(),bearing:i.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new ae.Plane(new ae.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new ae.Vector2(-1,-1)),h=t.viewGL.camera.castRay(new ae.Vector2(1,1)),p=f.intersectPlane(l),y=h.intersectPlane(l),_=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(_,_,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}});const Ng=2*6378137*Math.PI/(256*Math.pow(2,20));function jg(t){return 19-Math.log(t/Ng)/Math.LN2}function al(){Yl.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}al.prototype=new Yl,al.prototype.constructor=al,al.prototype.type="maptalks3D";var Uv=al,Bg=Xu("maptalks3D",Uv,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMaptalksCameraOption())})}),Fg=Bg;function zg(t){t.registerComponentModel(Vv),t.registerComponentView(Rg),t.registerCoordinateSystem("maptalks3D",Fg),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(i,l){l.eachComponent({mainType:"maptalks3D",query:i},function(f){f.setMaptalksCameraOption(i)})})}Object(B.w)(zg);var Vg=qn.vec3,Gg=B.m.dataStack.isDimensionStacked;function Ug(t){var i=t[0],l=t[1];return!(i>0&&l>0||i<0&&l<0)}function Hg(t,i){var l=t.getData(),f=t.get("barSize");if(f==null){var h=i.size,p,y,_=i.getAxis("x"),S=i.getAxis("y");_.type==="category"?p=_.getBandWidth()*.7:p=Math.round(h[0]/Math.sqrt(l.count()))*.6,S.type==="category"?y=S.getBandWidth()*.7:y=Math.round(h[1]/Math.sqrt(l.count()))*.6,f=[p,y]}else B.x.isArray(f)||(f=[f,f]);var P=i.getAxis("z").scale.getExtent(),j=Ug(P),tt=["x","y","z"].map(function(Et){return t.coordDimToDataDim(Et)[0]}),_t=Gg(l,tt[2]),xt=_t?l.getCalculationInfo("stackResultDimension"):tt[2];l.each(tt,function(Et,Pt,Vt,kt){var ee=l.get(xt,kt),Jt=_t?ee-Vt:j?0:P[0],$t=i.dataToPoint([Et,Pt,Jt]),ce=i.dataToPoint([Et,Pt,ee]),de=Vg.dist($t,ce),we=[0,ce[1]<$t[1]?-1:1,0];Math.abs(de)===0&&(de=.1);var Ae=[f[0],de,f[1]];l.setItemLayout(kt,[$t,we,Ae])}),l.setLayout("orient",[1,0,0])}var Wg=Hg,bc=function(t,i,l){for(var f=t.getDataExtent(i),h=t.getDataExtent(l),p=f[1]-f[0]||f[0],y=h[1]-h[0]||h[0],_=50,S=new Uint8Array(_*_),P=0;P<t.count();P++){var j=t.get(i,P),tt=t.get(l,P),_t=Math.floor((j-f[0])/p*(_-1)),xt=Math.floor((tt-h[0])/y*(_-1)),Et=xt*_+_t;S[Et]=S[Et]||1}for(var Pt=0,P=0;P<S.length;P++)S[P]&&Pt++;return Pt/S.length},Ql=qn.vec3,Sc=B.m.dataStack.isDimensionStacked;function kg(t,i){var l=t.getData(),f=t.get("minHeight")||0,h=t.get("barSize"),p=["lng","lat","alt"].map(function(P){return t.coordDimToDataDim(P)[0]});if(h==null){var y=i.radius*Math.PI,_=bc(l,p[0],p[1]);h=[y/Math.sqrt(l.count()/_),y/Math.sqrt(l.count()/_)]}else B.x.isArray(h)||(h=[h,h]);var S=Tc(l,p);l.each(p,function(P,j,tt,_t){var xt=l.get(S.dimension,_t),Et=S.isStacked?xt-tt:i.altitudeAxis.scale.getExtent()[0],Pt=Math.max(i.altitudeAxis.dataToCoord(tt),f),Vt=i.dataToPoint([P,j,Et]),kt=i.dataToPoint([P,j,xt]),ee=Ql.sub([],kt,Vt);Ql.normalize(ee,ee);var Jt=[h[0],Pt,h[1]];l.setItemLayout(_t,[Vt,ee,Jt])}),l.setLayout("orient",hr.UP.array)}function Xg(t,i){var l=t.getData(),f=t.get("barSize"),h=t.get("minHeight")||0,p=["lng","lat","alt"].map(function(j){return t.coordDimToDataDim(j)[0]});if(f==null){var y=Math.min(i.size[0],i.size[2]),_=bc(l,p[0],p[1]);f=[y/Math.sqrt(l.count()/_),y/Math.sqrt(l.count()/_)]}else B.x.isArray(f)||(f=[f,f]);var S=[0,1,0],P=Tc(l,p);l.each(p,function(j,tt,_t,xt){var Et=l.get(P.dimension,xt),Pt=P.isStacked?Et-_t:i.altitudeAxis.scale.getExtent()[0],Vt=Math.max(i.altitudeAxis.dataToCoord(_t),h),kt=i.dataToPoint([j,tt,Pt]),ee=[f[0],Vt,f[1]];l.setItemLayout(xt,[kt,S,ee])}),l.setLayout("orient",[1,0,0])}function Zg(t,i){var l=t.getData(),f=t.coordDimToDataDim("lng")[0],h=t.coordDimToDataDim("lat")[0],p=t.coordDimToDataDim("alt")[0],y=t.get("barSize"),_=t.get("minHeight")||0;if(y==null){var S=l.getDataExtent(f),P=l.getDataExtent(h),j=i.dataToPoint([S[0],P[0]]),tt=i.dataToPoint([S[1],P[1]]),_t=Math.min(Math.abs(j[0]-tt[0]),Math.abs(j[1]-tt[1]))||1,xt=bc(l,f,h);y=[_t/Math.sqrt(l.count()/xt),_t/Math.sqrt(l.count()/xt)]}else B.x.isArray(y)||(y=[y,y]),y[0]/=i.getScale()/16,y[1]/=i.getScale()/16;var Et=[0,0,1],Pt=[f,h,p],Vt=Tc(l,Pt);l.each(Pt,function(kt,ee,Jt,$t){var ce=l.get(Vt.dimension,$t),de=Vt.isStacked?ce-Jt:0,we=i.dataToPoint([kt,ee,de]),Ae=i.dataToPoint([kt,ee,ce]),Ge=Math.max(Ae[2]-we[2],_),rr=[y[0],Ge,y[1]];l.setItemLayout($t,[we,Et,rr])}),l.setLayout("orient",[1,0,0])}function Tc(t,i){var l=Sc(t,i[2]);return{dimension:l?t.getCalculationInfo("stackResultDimension"):i[2],isStacked:l}}function Yg(t){t.registerLayout(function(i,l){i.eachSeriesByType("bar3D",function(f){var h=f.coordinateSystem,p=h&&h.type;p==="globe"?kg(f,h):p==="cartesian3D"?Wg(f,h):p==="geo3D"?Xg(f,h):(p==="mapbox3D"||p==="maptalks3D")&&Zg(f,h)})})}var Oc={};Oc.getFormattedLabel=function(t,i,l,f,h){l=l||"normal";var p=t.getData(f),y=p.getItemModel(i),_=t.getDataParams(i,f);h!=null&&_.value instanceof Array&&(_.value=_.value[h]);var S=y.get(l==="normal"?["label","formatter"]:["emphasis","label","formatter"]);S==null&&(S=y.get(["label","formatter"]));var P;return typeof S=="function"?(_.status=l,P=S(_)):typeof S=="string"&&(P=B.i.formatTpl(S,_)),P},Oc.normalizeToArray=function(t){return t instanceof Array?t:t==null?[]:[t]};var ol=Oc;function Kg(t,i){var l=[];return B.x.each(t.dimensions,function(f){var h=t.getDimensionInfo(f),p=h.otherDims,y=p[i];y!=null&&y!==!1&&(l[y]=h.name)}),l}var Jl=function(t,i,l){function f(tt){var _t=!0,xt=[],Et=Kg(h,"tooltip");Et.length?B.x.each(Et,function(Vt){Pt(h.get(Vt,i),Vt)}):B.x.each(tt,Pt);function Pt(Vt,kt){var ee=h.getDimensionInfo(kt);if(!(!ee||ee.otherDims.tooltip===!1)){var Jt=ee.type,$t=(_t?"- "+(ee.tooltipName||ee.name)+": ":"")+(Jt==="ordinal"?Vt+"":Jt==="time"?l?"":B.i.formatTime("yyyy/MM/dd hh:mm:ss",Vt):B.i.addCommas(Vt));$t&&xt.push(B.i.encodeHTML($t))}}return(_t?"<br/>":"")+xt.join(_t?"<br/>":", ")}var h=t.getData(),p=t.getRawValue(i),y=B.x.isArray(p)?f(p):B.i.encodeHTML(B.i.addCommas(p)),_=h.getName(i),S=ci(h,i);B.x.isObject(S)&&S.colorStops&&(S=(S.colorStops[0]||{}).color),S=S||"transparent";var P=B.i.getTooltipMarker(S),j=t.name;return j==="\0-"&&(j=""),j=j?B.i.encodeHTML(j)+(l?": ":"<br/>"):"",l?P+j+y:j+P+(_?B.i.encodeHTML(_)+": "+y:y)},Yu=function(t,i,l){l=l||t.getSource();var f=i||B.j(t.get("coordinateSystem"))||["x","y","z"],h=B.m.createDimensions(l,{dimensionsDefine:l.dimensionsDefine||t.get("dimensions"),encodeDefine:l.encodeDefine||t.get("encode"),coordDimensions:f.map(function(_){var S=t.getReferringComponents(_+"Axis3D").models[0];return{type:S&&S.get("type")==="category"?"ordinal":"float",name:_}})});t.get("coordinateSystem")==="cartesian3D"&&h.forEach(function(_){if(f.indexOf(_.coordDim)>=0){var S=t.getReferringComponents(_.coordDim+"Axis3D").models[0];S&&S.get("type")==="category"&&(_.ordinalMeta=S.getOrdinalMeta())}});var p=B.m.dataStack.enableDataStack(t,h,{byIndex:!0,stackedCoordDimension:"z"}),y=new B.e(h,t);return y.setCalculationInfo(p),y.initData(l),y},Hv=B.g.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,i){return Yu(this)},getFormattedLabel:function(t,i,l,f){var h=ol.getFormattedLabel(this,t,i,l,f);return h==null&&(h=this.getData().get("z",t)),h},formatTooltip:function(t){return Jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});B.x.merge(Hv.prototype,ea);var Qg=Hv,Zn=qn.vec3,Jg=qn.mat3,Ac=tn.extend(function(){return{attributes:{position:new tn.Attribute("position","float",3,"POSITION"),normal:new tn.Attribute("normal","float",3,"NORMAL"),color:new tn.Attribute("color","float",4,"COLOR"),prevPosition:new tn.Attribute("prevPosition","float",3),prevNormal:new tn.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var i=this.enableNormal,l=this.getBarVertexCount()*t,f=this.getBarTriangleCount()*t;this.vertexCount!==l&&(this.attributes.position.init(l),i?this.attributes.normal.init(l):this.attributes.normal.value=null,this.attributes.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3),this._dataIndices=new Uint32Array(l))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return(t+1)*4*(t+1)*2},_getBevelBarTriangleCount:function(t){var i=t*4+3,l=t*2+1;return(i+1)*l*2+4},setColor:function(t,i){for(var l=this.getBarVertexCount(),f=l*t,h=l*(t+1),p=f;p<h;p++)this.attributes.color.set(p,i);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=Zn.create,i=Zn.scaleAndAdd,l=t(),f=t(),h=t(),p=t(),y=t(),_=t(),S=t(),P=[],j=[],tt=0;tt<8;tt++)P[tt]=t();for(var _t=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],xt=[0,1,2,0,2,3],Et=[],tt=0;tt<_t.length;tt++)for(var Pt=_t[tt],Vt=0;Vt<2;Vt++){for(var kt=[],ee=0;ee<3;ee++)kt.push(Pt[xt[Vt*3+ee]]);Et.push(kt)}return function(Jt,$t,ce,de,we,Ae){var Ge=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(Jt,$t,ce,de,this.bevelSize,this.bevelSegments,we);else{Zn.copy(h,$t),Zn.normalize(h,h),Zn.cross(p,ce,h),Zn.normalize(p,p),Zn.cross(f,h,p),Zn.normalize(p,p),Zn.negate(y,f),Zn.negate(_,h),Zn.negate(S,p),i(P[0],Jt,f,de[0]/2),i(P[0],P[0],p,de[2]/2),i(P[1],Jt,f,de[0]/2),i(P[1],P[1],S,de[2]/2),i(P[2],Jt,y,de[0]/2),i(P[2],P[2],S,de[2]/2),i(P[3],Jt,y,de[0]/2),i(P[3],P[3],p,de[2]/2),i(l,Jt,h,de[1]),i(P[4],l,f,de[0]/2),i(P[4],P[4],p,de[2]/2),i(P[5],l,f,de[0]/2),i(P[5],P[5],S,de[2]/2),i(P[6],l,y,de[0]/2),i(P[6],P[6],S,de[2]/2),i(P[7],l,y,de[0]/2),i(P[7],P[7],p,de[2]/2);var rr=this.attributes;if(this.enableNormal){j[0]=f,j[1]=y,j[2]=h,j[3]=_,j[4]=p,j[5]=S;for(var Qe=this._vertexOffset,sr=0;sr<_t.length;sr++){for(var fr=this._triangleOffset*3,$e=0;$e<6;$e++)this.indices[fr++]=Qe+xt[$e];Qe+=4,this._triangleOffset+=2}for(var sr=0;sr<_t.length;sr++)for(var dr=j[sr],$e=0;$e<4;$e++){var Sr=_t[sr][$e];rr.position.set(this._vertexOffset,P[Sr]),rr.normal.set(this._vertexOffset,dr),rr.color.set(this._vertexOffset++,we)}}else{for(var sr=0;sr<Et.length;sr++){for(var fr=this._triangleOffset*3,$e=0;$e<3;$e++)this.indices[fr+$e]=Et[sr][$e]+this._vertexOffset;this._triangleOffset++}for(var sr=0;sr<P.length;sr++)rr.position.set(this._vertexOffset,P[sr]),rr.color.set(this._vertexOffset++,we)}}for(var Lr=this._vertexOffset,sr=Ge;sr<Lr;sr++)this._dataIndices[sr]=Ae}}(),_addBevelBar:function(){var t=Zn.create(),i=Zn.create(),l=Zn.create(),f=Jg.create(),h=[],p=[1,-1,-1,1],y=[1,1,-1,-1],_=[2,0];return function(S,P,j,tt,_t,xt,Et){Zn.copy(i,P),Zn.normalize(i,i),Zn.cross(l,j,i),Zn.normalize(l,l),Zn.cross(t,i,l),Zn.normalize(l,l),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=i[0],f[4]=i[1],f[5]=i[2],f[6]=l[0],f[7]=l[1],f[8]=l[2],_t=Math.min(tt[0],tt[2])/2*_t;for(var Pt=0;Pt<3;Pt++)h[Pt]=Math.max(tt[Pt]-_t*2,0);for(var Vt=(tt[0]-h[0])/2,kt=(tt[1]-h[1])/2,ee=(tt[2]-h[2])/2,Jt=[],$t=[],ce=this._vertexOffset,de=[],Pt=0;Pt<2;Pt++){de[Pt]=de[Pt]=[];for(var we=0;we<=xt;we++)for(var Ae=0;Ae<4;Ae++){(we===0&&Pt===0||Pt===1&&we===xt)&&de[Pt].push(ce);for(var Ge=0;Ge<=xt;Ge++){var rr=Ge/xt*Math.PI/2+Math.PI/2*Ae,Qe=we/xt*Math.PI/2+Math.PI/2*Pt;$t[0]=Vt*Math.cos(rr)*Math.sin(Qe),$t[1]=kt*Math.cos(Qe),$t[2]=ee*Math.sin(rr)*Math.sin(Qe),Jt[0]=$t[0]+p[Ae]*h[0]/2,Jt[1]=$t[1]+kt+_[Pt]*h[1]/2,Jt[2]=$t[2]+y[Ae]*h[2]/2,Math.abs(Vt-kt)<1e-6&&Math.abs(kt-ee)<1e-6||($t[0]/=Vt*Vt,$t[1]/=kt*kt,$t[2]/=ee*ee),Zn.normalize($t,$t),Zn.transformMat3(Jt,Jt,f),Zn.transformMat3($t,$t,f),Zn.add(Jt,Jt,S),this.attributes.position.set(ce,Jt),this.enableNormal&&this.attributes.normal.set(ce,$t),this.attributes.color.set(ce,Et),ce++}}}for(var sr=xt*4+3,fr=xt*2+1,$e=sr+1,Ae=0;Ae<fr;Ae++)for(var Pt=0;Pt<=sr;Pt++){var dr=Ae*$e+Pt+this._vertexOffset,Sr=Ae*$e+(Pt+1)%$e+this._vertexOffset,Lr=(Ae+1)*$e+(Pt+1)%$e+this._vertexOffset,gr=(Ae+1)*$e+Pt+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[Lr,dr,Sr]),this.setTriangleIndices(this._triangleOffset++,[Lr,gr,dr])}this.setTriangleIndices(this._triangleOffset++,[de[0][0],de[0][2],de[0][1]]),this.setTriangleIndices(this._triangleOffset++,[de[0][0],de[0][3],de[0][2]]),this.setTriangleIndices(this._triangleOffset++,[de[1][0],de[1][1],de[1][2]]),this.setTriangleIndices(this._triangleOffset++,[de[1][0],de[1][2],de[1][3]]),this._vertexOffset=ce}}()});B.x.defaults(Ac.prototype,Xs),B.x.defaults(Ac.prototype,qs);var $g=Ac,qg=qn.vec3,tm=B.b.extend({type:"bar3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._api=i,this._labelsBuilder=new ic(256,256,i);var l=this;this._labelsBuilder.getLabelPosition=function(f,h,p){if(l._data){var y=l._data.getItemLayout(f),_=y[0],S=y[1],P=y[2][1];return qg.scaleAndAdd([],_,S,p+P)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,i,l){var f=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=f,this._barMesh||(this._barMesh=new ae.Mesh({geometry:new $g,shadowDepthMaterial:new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.sm.depth.vertex"),ae.Shader.source("ecgl.sm.depth.fragment"))}),culling:t.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var h=t.coordinateSystem;if(this._doRender(t,l),h&&h.viewGL){h.viewGL.add(this.groupGL);var p=h.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[p]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,i){var l=t.getData(),f=t.get("shading"),h=f!=="color",p=this,y=this._barMesh,_="ecgl."+f;(!y.material||y.material.shader.name!==_)&&(y.material=ae.createMaterial(_,["VERTEX_COLOR"])),ae.setMaterialFromModel(f,y.material,t,i),y.geometry.enableNormal=h,y.geometry.resetOffset();var S=t.get("bevelSize"),P=t.get("bevelSmoothness");y.geometry.bevelSegments=P,y.geometry.bevelSize=S;var j=[],tt=new Float32Array(l.count()*4),_t=0,xt=0,Et=!1;l.each(function(ee){if(!!l.hasValue(ee)){var Jt=ci(l,ee),$t=gi(l,ee);$t==null&&($t=1),ae.parseColor(Jt,j),j[3]*=$t,tt[_t++]=j[0],tt[_t++]=j[1],tt[_t++]=j[2],tt[_t++]=j[3],j[3]>0&&(xt++,j[3]<.99&&(Et=!0))}}),y.geometry.setBarCount(xt);var Pt=l.getLayout("orient"),Vt=this._barIndexOfData=new Int32Array(l.count()),xt=0;l.each(function(ee){if(!l.hasValue(ee)){Vt[ee]=-1;return}var Jt=l.getItemLayout(ee),$t=Jt[0],ce=Jt[1],de=Jt[2],we=ee*4;j[0]=tt[we++],j[1]=tt[we++],j[2]=tt[we++],j[3]=tt[we++],j[3]>0&&(p._barMesh.geometry.addBar($t,ce,Pt,de,j,ee),Vt[ee]=xt++)}),y.geometry.dirty(),y.geometry.updateBoundingBox();var kt=y.material;kt.transparent=Et,kt.depthMask=!Et,y.geometry.sortTriangles=Et,this._initHandler(t,i)},_initHandler:function(t,i){var l=t.getData(),f=this._barMesh,h=t.coordinateSystem.type==="cartesian3D";f.seriesIndex=t.seriesIndex;var p=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(y){var _=f.geometry.getDataIndexOfVertex(y.triangle[0]);_!==p&&(this._downplay(p),this._highlight(_),this._labelsBuilder.updateLabels([_]),h&&i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",_),l.get("y",_),l.get("z",_,!0)]})),p=_,f.dataIndex=_},this),f.on("mouseout",function(y){this._downplay(p),this._labelsBuilder.updateLabels(),p=-1,f.dataIndex=-1,h&&i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(t){var i=this._data;if(!!i){var l=this._barIndexOfData[t];if(!(l<0)){var f=i.getItemModel(t),h=f.getModel("emphasis.itemStyle"),p=h.get("color"),y=h.get("opacity");if(p==null){var _=ci(i,t);p=B.h.lift(_,-.4)}y==null&&(y=gi(i,t));var S=ae.parseColor(p);S[3]*=y,this._barMesh.geometry.setColor(l,S),this._api.getZr().refresh()}}},_downplay:function(t){var i=this._data;if(!!i){var l=this._barIndexOfData[t];if(!(l<0)){var f=ci(i,t),h=gi(i,t),p=ae.parseColor(f);p[3]*=h,this._barMesh.geometry.setColor(l,p),this._api.getZr().refresh()}}},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,h){var p=i.getData(),y=Zr.queryDataIndex(p,h),_=this;y!=null?B.x.each(ol.normalizeToArray(y),function(S){t==="highlight"?this._highlight(S):this._downplay(S)},this):p.each(function(S){t==="highlight"?_._highlight(S):_._downplay(S)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function em(t){t.registerChartView(tm),t.registerSeriesModel(Qg),Yg(t),t.registerProcessor(function(i,l){i.eachSeriesByType("bar3d",function(f){var h=f.getData();h.filterSelf(function(p){return h.hasValue(p)})})})}Object(B.w)(em);var Wv=B.g.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){return Yu(this)},formatTooltip:function(t){return Jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),kv=Wv,Xv=b("4ZEG"),Mc=qn.vec3;ae.Shader.import(Lu);var rm=B.b.extend({type:"line3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._api=i},render:function(t,i,l){var f=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=f,this._line3DMesh||(this._line3DMesh=new ae.Mesh({geometry:new xo({useNativeLine:!1,sortTriangles:!0}),material:new ae.Material({shader:ae.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var h=t.coordinateSystem;if(h&&h.viewGL){h.viewGL.add(this.groupGL);var p=h.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[p]("fragment","SRGB_DECODE")}this._doRender(t,l),this._data=t.getData(),this._camera=h.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,i){var l=t.getData(),f=this._line3DMesh;f.geometry.resetOffset();var h=l.getLayout("points"),p=[],y=new Float32Array(h.length/3*4),_=0,S=!1;l.each(function(tt){var _t=ci(l,tt),xt=gi(l,tt);xt==null&&(xt=1),ae.parseColor(_t,p),p[3]*=xt,y[_++]=p[0],y[_++]=p[1],y[_++]=p[2],y[_++]=p[3],p[3]<.99&&(S=!0)}),f.geometry.setVertexCount(f.geometry.getPolylineVertexCount(h)),f.geometry.setTriangleCount(f.geometry.getPolylineTriangleCount(h)),f.geometry.addPolyline(h,y,Zr.firstNotNull(t.get("lineStyle.width"),1)),f.geometry.dirty(),f.geometry.updateBoundingBox();var P=f.material;P.transparent=S,P.depthMask=!S;var j=t.getModel("debug.wireframe");j.get("show")?(f.geometry.createAttribute("barycentric","float",3),f.geometry.generateBarycentric(),f.material.set("both","WIREFRAME_TRIANGLE"),f.material.set("wireframeLineColor",ae.parseColor(j.get("lineStyle.color")||"rgba(0,0,0,0.5)")),f.material.set("wireframeLineWidth",Zr.firstNotNull(j.get("lineStyle.width"),1))):f.material.set("both","WIREFRAME_TRIANGLE"),this._points=h,this._initHandler(t,i)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,i){var l=t.getData(),f=t.coordinateSystem,h=this._line3DMesh,p=-1;h.seriesIndex=t.seriesIndex,h.off("mousemove"),h.off("mouseout"),h.on("mousemove",function(y){var _=f.pointToData(y.point.array),S=l.indicesOfNearest("x",_[0])[0];S!==p&&(i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",S),l.get("y",S),l.get("z",S)]}),h.dataIndex=S),p=S},this),h.on("mouseout",function(y){p=-1,h.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var t=new Be,i=this._camera;Be.multiply(t,i.projectionMatrix,i.viewMatrix);var l=this._positionNDC,f=this._points,h=f.length/3;(!l||l.length/2!==h)&&(l=this._positionNDC=new Float32Array(h*2));for(var p=[],y=0;y<h;y++){var _=y*3,S=y*2;p[0]=f[_],p[1]=f[_+1],p[2]=f[_+2],p[3]=1,Mc.transformMat4(p,p,t.array),l[S]=p[0]/p[3],l[S+1]=p[1]/p[3]}},_pick:function(t,i,l,f,h,p){var y=this._positionNDC,_=this._data.hostModel,S=_.get("lineStyle.width"),P=-1,j=l.viewport.width,tt=l.viewport.height,_t=j*.5,xt=tt*.5;t=(t+1)*_t,i=(i+1)*xt;for(var Et=1;Et<y.length/2;Et++){var Pt=(y[(Et-1)*2]+1)*_t,Vt=(y[(Et-1)*2+1]+1)*xt,kt=(y[Et*2]+1)*_t,ee=(y[Et*2+1]+1)*xt;if(Xv.a(Pt,Vt,kt,ee,S,t,i)){var Jt=(Pt-t)*(Pt-t)+(Vt-i)*(Vt-i),$t=(kt-t)*(kt-t)+(ee-i)*(ee-i);P=Jt<$t?Et-1:Et}}if(P>=0){var ce=P*3,de=new hr(this._points[ce],this._points[ce+1],this._points[ce+2]);p.push({dataIndex:P,point:de,pointWorld:de.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(de)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function nm(t){t.registerChartView(rm),t.registerSeriesModel(kv),t.registerLayout(function(i,l){i.eachSeriesByType("line3D",function(f){var h=f.getData(),p=f.coordinateSystem;if(p){if(p.type!=="cartesian3D")return;var y=new Float32Array(h.count()*3),_=[],S=[],P=p.dimensions,j=P.map(function(tt){return f.coordDimToDataDim(tt)[0]});p&&h.each(j,function(tt,_t,xt,Et){_[0]=tt,_[1]=_t,_[2]=xt,p.dataToPoint(_,S),y[Et*3]=S[0],y[Et*3+1]=S[1],y[Et*3+2]=S[2]}),h.setLayout("points",y)}})})}Object(B.w)(nm);var im=B.g.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,i){return Yu(this)},getFormattedLabel:function(t,i,l,f){var h=ol.getFormattedLabel(this,t,i,l,f);if(h==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];h=p.get(y,t)}return h},formatTooltip:function(t){return Jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Dc(t,i,l){var i=i||document.createElement("canvas");i.width=t,i.height=t;var f=i.getContext("2d");return l&&l(f),i}function am(t,i,l,f){B.x.isArray(i)||(i=[i,i]);var h=Ec.getMarginByStyle(l,f),p=i[0]+h.left+h.right,y=i[1]+h.top+h.bottom,_=B.m.createSymbol(t,0,0,i[0],i[1]),S=Math.max(p,y);_.x=h.left,_.y=h.top,p>y?_.y+=(S-y)/2:_.x+=(S-p)/2;var P=_.getBoundingRect();return _.x-=P.x,_.y-=P.y,_.setStyle(l),_.update(),_.__size=S,_}function om(t,i,l){var f=i.width,h=i.height,p=t.canvas.width,y=t.canvas.height,_=f/p,S=h/y;function P(kt){return kt<128?1:-1}function j(kt,ee){var Jt=Infinity;kt=Math.floor(kt*_),ee=Math.floor(ee*S);for(var $t=ee*f+kt,ce=i.data[$t*4],de=P(ce),we=Math.max(ee-l,0);we<Math.min(ee+l,h);we++)for(var Ae=Math.max(kt-l,0);Ae<Math.min(kt+l,f);Ae++){var $t=we*f+Ae,Ge=i.data[$t*4],rr=P(Ge),Qe=Ae-kt,sr=we-ee;if(de!==rr){var fr=Qe*Qe+sr*sr;fr<Jt&&(Jt=fr)}}return de*Math.sqrt(Jt)}for(var tt=t.createImageData(p,y),_t=0;_t<y;_t++)for(var xt=0;xt<p;xt++){var Et=j(xt,_t),Pt=Et/l*.5+.5,Vt=(_t*p+xt)*4;tt.data[Vt++]=(1-Pt)*255,tt.data[Vt++]=(1-Pt)*255,tt.data[Vt++]=(1-Pt)*255,tt.data[Vt++]=255}return tt}var Ec={getMarginByStyle:function(t){var i=t.minMargin||0,l=0;t.stroke&&t.stroke!=="none"&&(l=t.lineWidth==null?1:t.lineWidth);var f=t.shadowBlur||0,h=t.shadowOffsetX||0,p=t.shadowOffsetY||0,y={};return y.left=Math.max(l/2,-h+f,i),y.right=Math.max(l/2,h+f,i),y.top=Math.max(l/2,-p+f,i),y.bottom=Math.max(l/2,p+f,i),y},createSymbolSprite:function(t,i,l,f){var h=am(t,i,l),p=Ec.getMarginByStyle(l);return{image:Dc(h.__size,f,function(y){B.o(y,h)}),margin:p}},createSDFFromCanvas:function(t,i,l,f){return Dc(i,f,function(h){var p=t.getContext("2d"),y=p.getImageData(0,0,t.width,t.height);h.putImageData(om(h,y,l),0,0)})},createSimpleSprite:function(t,i){return Dc(t,i,function(l){var f=t/2;l.beginPath(),l.arc(f,f,60,0,Math.PI*2,!1),l.closePath();var h=l.createRadialGradient(f,f,0,f,f,f);h.addColorStop(0,"rgba(255, 255, 255, 1)"),h.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),h.addColorStop(1,"rgba(255, 255, 255, 0)"),l.fillStyle=h,l.fill()})}},Zv=Ec,Yv=qn.vec3,sm={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,i){var l=this.indices,f=Yv.create();if(!l){l=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var h=0;h<l.length;h++)l[h]=h}if(i===0){var p=this.attributes.position,t=t.array,y=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var _,h=0;h<this.vertexCount;h++){p.get(h,f);var S=Yv.sqrDist(f,t);isNaN(S)&&(S=1e7,y++),h===0?(_=S,S=0):S=S-_,this._zList[h]=S}this._noneCount=y}if(this.vertexCount<2e4)i===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var h=0;h<3;h++)this._progressiveQuickSort(i*3+h);this.dirtyIndices()},_simpleSort:function(t){var i=this._zList,l=this.indices;function f(h,p){return i[p]-i[h]}t?Array.prototype.sort.call(l,f):za.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._zList,l=this.indices;this._quickSort=this._quickSort||new za,this._quickSort.step(l,function(f,h){return i[h]-i[f]},t)}},lm=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`,Cc=qn.vec4;ae.Shader.import(lm);var um=ae.Mesh.extend(function(){var t=new ae.Geometry({dynamic:!0,attributes:{color:new ae.Geometry.Attribute("color","float",4,"COLOR"),position:new ae.Geometry.Attribute("position","float",3,"POSITION"),size:new ae.Geometry.Attribute("size","float",1),prevPosition:new ae.Geometry.Attribute("prevPosition","float",3),prevSize:new ae.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,sm);var i=new ae.Material({shader:ae.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});i.enableTexture("sprite"),i.define("both","VERTEX_COLOR"),i.define("both","VERTEX_SIZE");var l=new ae.Texture2D({image:document.createElement("canvas"),flipY:!1});return i.set("sprite",l),t.pick=this._pick.bind(this),{geometry:t,material:i,mode:ae.Mesh.POINTS,sizeScale:1}},{_pick:function(t,i,l,f,h,p){var y=this._positionNDC;if(!!y)for(var _=l.viewport,S=2/_.width,P=2/_.height,j=this.geometry.vertexCount-1;j>=0;j--){var tt;this.geometry.indices?tt=this.geometry.indices[j]:tt=j;var _t=y[tt*2],xt=y[tt*2+1],Et=this.geometry.attributes.size.get(tt)/this.sizeScale,Pt=Et/2;if(t>_t-Pt*S&&t<_t+Pt*S&&i>xt-Pt*P&&i<xt+Pt*P){var Vt=new ae.Vector3,kt=new ae.Vector3;this.geometry.attributes.position.get(tt,Vt.array),ae.Vector3.transformMat4(kt,Vt,this.worldTransform),p.push({vertexIndex:tt,point:Vt,pointWorld:kt,target:this,distance:kt.distance(f.getWorldPosition())})}}},updateNDCPosition:function(t,i,l){var f=this._positionNDC,h=this.geometry;(!f||f.length/2!==h.vertexCount)&&(f=this._positionNDC=new Float32Array(h.vertexCount*2));for(var p=Cc.create(),y=0;y<h.vertexCount;y++)h.attributes.position.get(y,p),p[3]=1,Cc.transformMat4(p,p,t.array),Cc.scale(p,p,1/p[3]),f[y*2]=p[0],f[y*2+1]=p[1]}}),fm=um,Kv=20,Ku=-10;function cm(t,i){return t&&i&&t[0]===i[0]&&t[1]===i[1]}function Pc(t,i){this.rootNode=new ae.Node,this.is2D=t,this._labelsBuilder=new ic(256,256,i),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=i,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Pc.prototype={constructor:Pc,highlightOnMouseover:!0,update:function(t,i,l,f,h){var p=this._prevMesh;this._prevMesh=this._mesh,this._mesh=p;var y=t.getData();if(f==null&&(f=0),h==null&&(h=y.count()),this._startDataIndex=f,this._endDataIndex=h-1,!this._mesh){var _=this._prevMesh&&this._prevMesh.material;this._mesh=new fm({renderOrder:10,frustumCulling:!1}),_&&(this._mesh.material=_)}var _=this._mesh.material,S=this._mesh.geometry,P=S.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var j=this._getSymbolInfo(t,f,h),tt=l.getDevicePixelRatio(),_t=t.getModel("itemStyle").getItemStyle(),xt=t.get("large"),Et=1;j.maxSize>2?(Et=this._updateSymbolSprite(t,_t,j,tt),_.enableTexture("sprite")):_.disableTexture("sprite"),P.position.init(h-f);var Pt=[];if(xt){_.undefine("VERTEX_SIZE"),_.undefine("VERTEX_COLOR");var Vt=Ai(y),kt=xg(y);ae.parseColor(Vt,Pt),Pt[3]*=kt,_.set({color:Pt,u_Size:j.maxSize*this._sizeScale})}else _.set({color:[1,1,1,1]}),_.define("VERTEX_SIZE"),_.define("VERTEX_COLOR"),P.size.init(h-f),P.color.init(h-f),this._originalOpacity=new Float32Array(h-f);for(var ee=y.getLayout("points"),Jt=P.position.value,$t=!1,ce=0;ce<h-f;ce++){var de=ce*3,we=ce*2;if(this.is2D?(Jt[de]=ee[we],Jt[de+1]=ee[we+1],Jt[de+2]=Ku):(Jt[de]=ee[de],Jt[de+1]=ee[de+1],Jt[de+2]=ee[de+2]),!xt){var Vt=ci(y,ce),kt=gi(y,ce);ae.parseColor(Vt,Pt),Pt[3]*=kt,P.color.set(ce,Pt),Pt[3]<.99&&($t=!0);var Ae=y.getItemVisual(ce,"symbolSize");Ae=Ae instanceof Array?Math.max(Ae[0],Ae[1]):Ae,isNaN(Ae)&&(Ae=0),P.size.value[ce]=Ae*Et*this._sizeScale,this._originalOpacity[ce]=Pt[3]}}this._mesh.sizeScale=Et,S.updateBoundingBox(),S.dirty(),this._updateMaterial(t,_t);var Ge=t.coordinateSystem;if(Ge&&Ge.viewGL){var rr=Ge.viewGL.isLinearSpace()?"define":"undefine";_[rr]("fragment","SRGB_DECODE")}xt||this._updateLabelBuilder(t,f,h),this._updateHandler(t,i,l),this._updateAnimation(t),this._api=l},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,i,l,f){l.maxSize=Math.min(l.maxSize*2,200);var h=[];return l.aspect>1?(h[0]=l.maxSize,h[1]=l.maxSize/l.aspect):(h[1]=l.maxSize,h[0]=l.maxSize*l.aspect),h[0]=h[0]||1,h[1]=h[1]||1,(this._symbolType!==l.type||!cm(this._symbolSize,h)||this._lineWidth!==i.lineWidth)&&(Zv.createSymbolSprite(l.type,h,{fill:"#fff",lineWidth:i.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(h[0]/2,10)},this._spriteImageCanvas),Zv.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),Kv,this._mesh.material.get("sprite").image),this._symbolType=l.type,this._symbolSize=h,this._lineWidth=i.lineWidth),this._spriteImageCanvas.width/l.maxSize*f},_updateMaterial:function(t,i){var l=t.get("blendMode")==="lighter"?ae.additiveBlend:null,f=this._mesh.material;f.blend=l,f.set("lineWidth",i.lineWidth/Kv);var h=ae.parseColor(i.stroke);f.set("strokeColor",h),f.transparent=!0,f.depthMask=!1,f.depthTest=!this.is2D,f.sortVertices=!this.is2D},_updateLabelBuilder:function(t,i,l){var f=t.getData(),h=this._mesh.geometry,p=h.attributes.position.value,i=this._startDataIndex,y=this._mesh.sizeScale;this._labelsBuilder.updateData(f,i,l),this._labelsBuilder.getLabelPosition=function(_,S,P){var j=(_-i)*3;return[p[j],p[j+1],p[j+2]]},this._labelsBuilder.getLabelDistance=function(_,S,P){var j=h.attributes.size.get(_-i)/y;return j/2+P},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,i,l){var f=t.getData(),h=this._mesh,p=this,y=-1,_=t.coordinateSystem&&t.coordinateSystem.type==="cartesian3D",S;_&&(S=t.coordinateSystem.model),h.seriesIndex=t.seriesIndex,h.off("mousemove"),h.off("mouseout"),h.on("mousemove",function(P){var j=P.vertexIndex+p._startDataIndex;j!==y&&(this.highlightOnMouseover&&(this.downplay(f,y),this.highlight(f,j),this._labelsBuilder.updateLabels([j])),_&&l.dispatchAction({type:"grid3DShowAxisPointer",value:[f.get(t.coordDimToDataDim("x")[0],j),f.get(t.coordDimToDataDim("y")[0],j),f.get(t.coordDimToDataDim("z")[0],j)],grid3DIndex:S.componentIndex})),h.dataIndex=j,y=j},this),h.on("mouseout",function(P){var j=P.vertexIndex+p._startDataIndex;this.highlightOnMouseover&&(this.downplay(f,j),this._labelsBuilder.updateLabels()),y=-1,h.dataIndex=-1,_&&l.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:S.componentIndex})},this)},updateLayout:function(t,i,l){var f=t.getData();if(!!this._mesh){var h=this._mesh.geometry.attributes.position.value,p=f.getLayout("points");if(this.is2D)for(var y=0;y<p.length/2;y++){var _=y*3,S=y*2;h[_]=p[S],h[_+1]=p[S+1],h[_+2]=Ku}else for(var y=0;y<p.length;y++)h[y]=p[y];this._mesh.geometry.dirty(),l.getZr().refresh()}},updateView:function(t){if(!!this._mesh){var i=new Be;Be.mul(i,t.viewMatrix,this._mesh.worldTransform),Be.mul(i,t.projectionMatrix,i),this._mesh.updateNDCPosition(i,this.is2D,this._api)}},highlight:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=t.getItemModel(i),f=l.getModel("emphasis.itemStyle"),h=f.get("color"),p=f.get("opacity");if(h==null){var y=ci(t,i);h=B.h.lift(y,-.4)}p==null&&(p=gi(t,i));var _=ae.parseColor(h);_[3]*=p,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,_),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=ci(t,i),f=gi(t,i),h=ae.parseColor(l);h[3]*=f,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,h),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var i=this._mesh.geometry,l=0;l<i.vertexCount;l++){var f=this._originalOpacity[l]*t;i.attributes.color.value[l*4+3]=f}i.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var i=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",i/this._sizeScale*t);var l=this._mesh.geometry.attributes;if(l.size.value)for(var f=0;f<l.size.value.length;f++)l.size.value[f]=l.size.value[f]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,i){i&&t.material.set("positionTexture",i),t.material[i?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,i,l){if(t.get("large")){var f=Zr.firstNotNull(t.get("symbolSize"),1),P,p;return f instanceof Array?(P=Math.max(f[0],f[1]),p=f[0]/f[1]):(P=f,p=1),{maxSize:f,type:t.get("symbol"),aspect:p}}for(var h=t.getData(),p,y=!1,_=h.getItemVisual(0,"symbol")||"circle",S=!1,P=0,j=i;j<l;j++){var f=h.getItemVisual(j,"symbolSize"),tt=h.getItemVisual(j,"symbol"),_t;if(f instanceof Array)_t=f[0]/f[1],P=Math.max(Math.max(f[0],f[1]),P);else{if(isNaN(f))continue;_t=1,P=Math.max(f,P)}_=tt,p=_t}return{maxSize:P,type:_,aspect:p}}};var $l=Pc,hm=B.b.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,i,l){if(this.groupGL.removeAll(),!!t.getData().count()){var f=t.coordinateSystem;if(f&&f.viewGL){f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera;var h=this._pointsBuilderList[0];h||(h=this._pointsBuilderList[0]=new $l(!1,l)),this._pointsBuilderList.length=1,this.groupGL.add(h.rootNode),h.update(t,i,l),h.updateView(f.viewGL.camera)}}},incrementalPrepareRender:function(t,i,l){var f=t.coordinateSystem;f&&f.viewGL&&(f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var h=this._pointsBuilderList[this._currentStep];h||(h=new $l(!1,f),this._pointsBuilderList[this._currentStep]=h),this.groupGL.add(h.rootNode),h.update(i,l,f,t.start,t.end),h.updateView(i.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(t){t.updateView(this._camera)},this)},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,h){var p=i.getData(),y=Zr.queryDataIndex(p,h),_=t==="highlight";y!=null?B.x.each(ol.normalizeToArray(y),function(S){for(var P=0;P<this._pointsBuilderList.length;P++){var j=this._pointsBuilderList[P];_?j.highlight(p,S):j.downplay(p,S)}},this):p.each(function(S){for(var P=0;P<this._pointsBuilderList.length;P++){var j=this._pointsBuilderList[P];_?j.highlight(p,S):j.downplay(p,S)}})},dispose:function(){this._pointsBuilderList.forEach(function(t){t.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function vm(t){t.registerChartView(hm),t.registerSeriesModel(im),t.registerLayout({seriesType:"scatter3D",reset:function(i){var l=i.coordinateSystem;if(l){var f=l.dimensions;if(f.length<3)return;var h=f.map(function(_){return i.coordDimToDataDim(_)[0]}),p=[],y=[];return{progress:function(_,S){for(var P=new Float32Array((_.end-_.start)*3),j=_.start;j<_.end;j++){var tt=(j-_.start)*3;p[0]=S.get(h[0],j),p[1]=S.get(h[1],j),p[2]=S.get(h[2],j),l.dataToPoint(p,y),P[tt]=y[0],P[tt+1]=y[1],P[tt+2]=y[2]}S.setLayout("points",P)}}}}})}Object(B.w)(vm);var Nn=qn.vec3,Qu=qn.vec2,Qi=Nn.normalize,sl=Nn.cross,wc=Nn.sub,Ju=Nn.add,so=Nn.create,Po=so(),na=so(),wo=so(),ql=so(),tu=[],Qv=[];function dm(t,i){Qu.copy(tu,t[0]),Qu.copy(Qv,t[1]);var l=[],f=l[0]=so(),h=l[1]=so(),p=l[2]=so(),y=l[3]=so();i.dataToPoint(tu,f),i.dataToPoint(Qv,y),Qi(Po,f),wc(na,y,f),Qi(na,na),sl(wo,na,Po),Qi(wo,wo),sl(na,Po,wo),Ju(h,Po,na),Qi(h,h),Qi(Po,y),wc(na,f,y),Qi(na,na),sl(wo,na,Po),Qi(wo,wo),sl(na,Po,wo),Ju(p,Po,na),Qi(p,p),Ju(ql,f,y),Qi(ql,ql);var _=Nn.dot(f,ql),S=Nn.dot(ql,h),P=(Math.max(Nn.len(f),Nn.len(y))-_)/S*2;return Nn.scaleAndAdd(h,f,h,P),Nn.scaleAndAdd(p,y,p,P),l}function pm(t,i,l){var f=[],h=f[0]=Nn.create(),p=f[1]=Nn.create(),y=f[2]=Nn.create(),_=f[3]=Nn.create();i.dataToPoint(t[0],h),i.dataToPoint(t[1],_);var S=Nn.dist(h,_);return Nn.lerp(p,h,_,.3),Nn.lerp(y,h,_,.3),Nn.scaleAndAdd(p,p,l,Math.min(S*.1,10)),Nn.scaleAndAdd(y,y,l,Math.min(S*.1,10)),f}function Jv(t,i){for(var l=new Float32Array(t.length*3),f=0,h=[],p=0;p<t.length;p++)i.dataToPoint(t[p],h),l[f++]=h[0],l[f++]=h[1],l[f++]=h[2];return l}function $v(t){var i=[];return t.each(function(l){var f=t.getItemModel(l),h=f.option instanceof Array?f.option:f.getShallow("coords",!0);i.push(h)}),{coordsList:i}}function gm(t,i){var l=t.getData(),f=t.get("polyline");l.setLayout("lineType",f?"polyline":"cubicBezier");var h=$v(l);l.each(function(p){var y=h.coordsList[p],_=f?Jv:dm;l.setItemLayout(p,_(y,i))})}function Lc(t,i,l){var f=t.getData(),h=t.get("polyline"),p=$v(f);f.setLayout("lineType",h?"polyline":"cubicBezier"),f.each(function(y){var _=p.coordsList[y],S=h?Jv(_,i):pm(_,i,l);f.setItemLayout(y,S)})}function qv(t,i){t.eachSeriesByType("lines3D",function(l){var f=l.coordinateSystem;f.type==="globe"?gm(l,f):f.type==="geo3D"?Lc(l,f,[0,1,0]):(f.type==="mapbox3D"||f.type==="maptalks3D")&&Lc(l,f,[0,0,1])})}var vs=B.g.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){var l=new B.e(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,h,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var _=f.value;if(_!=null)return _ instanceof Array?_[y]:_}),l},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),eu=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`,ds=qn.vec3;function mm(t){return t>0?1:-1}ae.Shader.import(eu);var ym=ae.Mesh.extend(function(){var t=new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.trail2.vertex"),ae.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),i=new xo({dynamic:!0});return i.createAttribute("dist","float",1),i.createAttribute("distAll","float",1),i.createAttribute("start","float",1),{geometry:i,material:t,culling:!1,$ignorePicking:!0}},{updateData:function(t,i,l){var f=t.hostModel,h=this.geometry,p=f.getModel("effect"),y=p.get("trailWidth")*i.getDevicePixelRatio(),_=p.get("trailLength"),S=f.get("effect.constantSpeed"),P=f.get("effect.period")*1e3,j=S!=null;j?this.material.set("speed",S/1e3):this.material.set("period",P),this.material[j?"define":"undefine"]("vertex","CONSTANT_SPEED");var tt=f.get("polyline");h.trailLength=_,this.material.set("trailLength",_),h.resetOffset(),["position","positionPrev","positionNext"].forEach(function(we){h.attributes[we].value=l.attributes[we].value});var _t=["dist","distAll","start","offset","color"];_t.forEach(function(we){h.attributes[we].init(h.vertexCount)}),h.indices=l.indices;var xt=[],Et=p.get("trailColor"),Pt=p.get("trailOpacity"),Vt=Et!=null,kt=Pt!=null;this.updateWorldTransform();var ee=this.worldTransform.x.len(),Jt=this.worldTransform.y.len(),$t=this.worldTransform.z.len(),ce=0,de=0;t.each(function(we){var Ae=t.getItemLayout(we),Ge=kt?Pt:gi(t,we),rr=ci(t,we);Ge==null&&(Ge=1),xt=ae.parseColor(Vt?Et:rr,xt),xt[3]*=Ge;for(var Qe=tt?l.getPolylineVertexCount(Ae):l.getCubicCurveVertexCount(Ae[0],Ae[1],Ae[2],Ae[3]),sr=0,fr=[],$e=[],dr=ce;dr<ce+Qe;dr++)h.attributes.position.get(dr,fr),fr[0]*=ee,fr[1]*=Jt,fr[2]*=$t,dr>ce&&(sr+=ds.dist(fr,$e)),h.attributes.dist.set(dr,sr),ds.copy($e,fr);de=Math.max(de,sr);for(var Sr=Math.random()*(j?sr:P),dr=ce;dr<ce+Qe;dr++)h.attributes.distAll.set(dr,sr),h.attributes.start.set(dr,Sr),h.attributes.offset.set(dr,mm(l.attributes.offset.get(dr))*y/2),h.attributes.color.set(dr,xt);ce+=Qe}),this.material.set("spotSize",de*.1*_),this.material.set("spotIntensity",p.get("spotIntensity")),h.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});ae.Shader.import(Lu);function xm(t){return t.radius!=null?t.radius:t.size!=null?Math.max(t.size[0],t.size[1],t.size[2]):100}var _m=B.b.extend({type:"lines3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._meshLinesMaterial=new ae.Material({shader:ae.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new ae.Mesh({geometry:new xo,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new ym},render:function(t,i,l){this.groupGL.add(this._linesMesh);var f=t.coordinateSystem,h=t.getData();if(f&&f.viewGL){var p=f.viewGL;p.add(this.groupGL),this._updateLines(t,i,l);var y=f.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[y]("fragment","SRGB_DECODE"),this._trailMesh.material[y]("fragment","SRGB_DECODE")}var _=this._trailMesh;if(_.stopAnimation(),t.get("effect.show")){this.groupGL.add(_),_.updateData(h,l,this._linesMesh.geometry),_.__time=_.__time||0;var S=3600*1e3;this._curveEffectsAnimator=_.animate("",{loop:!0}).when(S,{__time:S}).during(function(){_.setAnimationTime(_.__time)}).start()}else this.groupGL.remove(_),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=t.get("blendMode")==="lighter"?ae.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,i,l){var f=t.getData(),h=t.coordinateSystem,p=this._linesMesh.geometry,y=t.get("polyline");p.expandLine=!0;var _=xm(h);p.segmentScale=_/20;var S="lineStyle.width".split("."),P=l.getDevicePixelRatio(),j=0;f.each(function(Et){var Pt=f.getItemModel(Et),Vt=Pt.get(S);Vt==null&&(Vt=1),f.setItemVisual(Et,"lineWidth",Vt),j=Math.max(Vt,j)}),p.useNativeLine=!1;var tt=0,_t=0;f.each(function(Et){var Pt=f.getItemLayout(Et);y?(tt+=p.getPolylineVertexCount(Pt),_t+=p.getPolylineTriangleCount(Pt)):(tt+=p.getCubicCurveVertexCount(Pt[0],Pt[1],Pt[2],Pt[3]),_t+=p.getCubicCurveTriangleCount(Pt[0],Pt[1],Pt[2],Pt[3]))}),p.setVertexCount(tt),p.setTriangleCount(_t),p.resetOffset();var xt=[];f.each(function(Et){var Pt=f.getItemLayout(Et),Vt=ci(f,Et),kt=gi(f,Et),ee=f.getItemVisual(Et,"lineWidth")*P;kt==null&&(kt=1),xt=ae.parseColor(Vt,xt),xt[3]*=kt,y?p.addPolyline(Pt,xt,ee):p.addCubicCurve(Pt[0],Pt[1],Pt[2],Pt[3],xt,ee)}),p.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function td(t){t.registerChartView(_m),t.registerSeriesModel(vs),t.registerLayout(qv),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}Object(B.w)(td);function ed(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var rd=B.g.extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getItemModel(t),f=l.option instanceof Array?l.option:l.getShallow("coords");l.get("multiPolygon")||(f=[f]);for(var h=[],p=0;p<f.length;p++){for(var y=[],_=1;_<f[p].length;_++)y.push(ed(i,f[p][_]));h.push({exterior:ed(i,f[p][0]),interiors:y})}return h},getInitialData:function(t){var i=new B.e(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(l,f,h,p){if(l instanceof Array)return NaN;i.hasItemOption=!0;var y=l.value;if(y!=null)return y instanceof Array?y[p]:y}),i},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});B.x.merge(rd.prototype,ea);var nd=rd,bm=B.b.extend({type:"polygons3D",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL);var h=this._geo3DBuilderList[0];h||(h=new tl(l),h.extrudeY=f.type!=="mapbox3D"&&f.type!=="maptalks3D",this._geo3DBuilderList[0]=h),this._updateShaderDefines(f,h),h.update(t,i,l),this._geo3DBuilderList.length=1,this.groupGL.add(h.rootNode)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,i,l,f){var h=this._geo3DBuilderList[this._currentStep],p=i.coordinateSystem;h||(h=new tl(f),h.extrudeY=p.type!=="mapbox3D"&&p.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=h),h.update(i,l,f,t.start,t.end),this.groupGL.add(h.rootNode),this._updateShaderDefines(p,h),this._currentStep++},_updateShaderDefines:function(t,i){var l=t.viewGL.isLinearSpace()?"define":"undefine";i.rootNode.traverse(function(f){f.material&&(f.material[l]("fragment","SRGB_DECODE"),(t.type==="mapbox3D"||t.type==="maptalks3D")&&(f.material.define("fragment","NORMAL_UP_AXIS",2),f.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(t){t.dispose()})}});function Sm(t){t.registerChartView(bm),t.registerSeriesModel(nd)}Object(B.w)(Sm);var Ic=B.g.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return Jl(this,t)},getInitialData:function(t,i){var l=t.data;function f(Lr){return!(isNaN(Lr.min)||isNaN(Lr.max)||isNaN(Lr.step))}function h(Lr){var gr=B.p.getPrecisionSafe;return Math.max(gr(Lr.min),gr(Lr.max),gr(Lr.step))+1}if(!l)if(t.parametric){var $t=t.parametricEquation||{},ce=$t.u||{},de=$t.v||{};["u","v"].forEach(function(gr){!!f($t[gr])}),["x","y","z"].forEach(function(gr){typeof $t[gr]=="function"});var we=Math.floor((ce.max+ce.step-ce.min)/ce.step),Ae=Math.floor((de.max+de.step-de.min)/de.step);l=new Float32Array(we*Ae*5);for(var Ge=h(ce),rr=h(de),_t=0,xt=0;xt<Ae;xt++)for(var Et=0;Et<we;Et++){var Qe=Et*ce.step+ce.min,sr=xt*de.step+de.min,fr=B.p.round(Math.min(Qe,ce.max),Ge),$e=B.p.round(Math.min(sr,de.max),rr),Pt=$t.x(fr,$e),Vt=$t.y(fr,$e),Jt=$t.z(fr,$e);l[_t++]=Pt,l[_t++]=Vt,l[_t++]=Jt,l[_t++]=fr,l[_t++]=$e}}else{var p=t.equation||{},y=p.x||{},_=p.y||{};if(["x","y"].forEach(function(Lr){!!f(p[Lr])}),typeof p.z!="function")return;var S=Math.floor((y.max+y.step-y.min)/y.step),P=Math.floor((_.max+_.step-_.min)/_.step);l=new Float32Array(S*P*3);for(var j=h(y),tt=h(_),_t=0,xt=0;xt<P;xt++)for(var Et=0;Et<S;Et++){var Pt=Et*y.step+y.min,Vt=xt*_.step+_.min,kt=B.p.round(Math.min(Pt,y.max),j),ee=B.p.round(Math.min(Vt,_.max),tt),Jt=p.z(kt,ee);l[_t++]=kt,l[_t++]=ee,l[_t++]=Jt}}var dr=["x","y","z"];t.parametric&&dr.push("u","v");var Sr=Yu(this,dr,l);return Sr},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});B.x.merge(Ic.prototype,ea);var id=Ic,Lo=qn.vec3;function ad(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}var Rc=B.b.extend({type:"surface",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node},render:function(t,i,l){var f=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=f,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var h=t.coordinateSystem,p=t.get("shading"),y=t.getData(),_="ecgl."+p;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==_)&&(this._surfaceMesh.material=ae.createMaterial(_,["VERTEX_COLOR","DOUBLE_SIDED"])),ae.setMaterialFromModel(p,this._surfaceMesh.material,t,l),h&&h.viewGL){h.viewGL.add(this.groupGL);var S=h.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[S]("fragment","SRGB_DECODE")}var P=t.get("parametric"),j=t.get("dataShape");j||(j=this._getDataShape(y,P));var tt=t.getModel("wireframe"),_t=tt.get("lineStyle.width"),xt=tt.get("show")&&_t>0;this._updateSurfaceMesh(this._surfaceMesh,t,j,xt);var Et=this._surfaceMesh.material;xt?(Et.define("WIREFRAME_QUAD"),Et.set("wireframeLineWidth",_t),Et.set("wireframeLineColor",ae.parseColor(tt.get("lineStyle.color")))):Et.undefine("WIREFRAME_QUAD"),this._initHandler(t,l),this._updateAnimation(t)},_updateAnimation:function(t){ae.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new ae.Mesh({geometry:new ae.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new ae.Material({shader:new ae.Shader(ae.Shader.source("ecgl.sm.depth.vertex"),ae.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,qs),t},_initHandler:function(t,i){var l=t.getData(),f=this._surfaceMesh,h=t.coordinateSystem;function p(_,S){for(var P=Infinity,j=-1,tt=[],_t=0;_t<_.length;_t++){f.geometry.attributes.position.get(_[_t],tt);var xt=Lo.dist(S.array,tt);xt<P&&(P=xt,j=_[_t])}return j}f.seriesIndex=t.seriesIndex;var y=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(_){var S=p(_.triangle,_.point);if(S>=0){var P=[];f.geometry.attributes.position.get(S,P);for(var j=h.pointToData(P),tt=Infinity,_t=-1,xt=[],Et=0;Et<l.count();Et++){xt[0]=l.get("x",Et),xt[1]=l.get("y",Et),xt[2]=l.get("z",Et);var Pt=Lo.squaredDistance(xt,j);Pt<tt&&(_t=Et,tt=Pt)}_t!==y&&i.dispatchAction({type:"grid3DShowAxisPointer",value:j}),y=_t,f.dataIndex=_t}else f.dataIndex=-1},this),f.on("mouseout",function(_){y=-1,f.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(t,i,l,f){var h=t.geometry,p=i.getData(),y=p.getLayout("points"),_=0;p.each(function(hi){p.hasValue(hi)||_++});var S=_||f,P=h.attributes.position,j=h.attributes.normal,tt=h.attributes.texcoord0,_t=h.attributes.barycentric,xt=h.attributes.color,Et=l[0],Pt=l[1],Vt=i.get("shading"),kt=Vt!=="color";if(S){var ee=(Et-1)*(Pt-1)*4;P.init(ee),f&&_t.init(ee)}else P.value=new Float32Array(y);xt.init(h.vertexCount),tt.init(h.vertexCount);var Jt=[0,3,1,1,3,2],$t=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],ce=h.indices=new(h.vertexCount>65535?Uint32Array:Uint16Array)((Et-1)*(Pt-1)*6),de=function(hi,ca,Di){Di[1]=hi*Pt+ca,Di[0]=hi*Pt+ca+1,Di[3]=(hi+1)*Pt+ca+1,Di[2]=(hi+1)*Pt+ca},we=!1;if(S){var Ae=[],Ge=[],rr=0;kt?j.init(h.vertexCount):j.value=null;for(var Qe=[[],[],[]],sr=[],fr=[],$e=Lo.create(),dr=function(hi,ca,Di){var iu=ca*3;return Di[0]=hi[iu],Di[1]=hi[iu+1],Di[2]=hi[iu+2],Di},Sr=new Float32Array(y.length),Lr=new Float32Array(y.length/3*4),gr=0;gr<p.count();gr++)if(p.hasValue(gr)){var yi=ae.parseColor(ci(p,gr)),ln=gi(p,gr);ln!=null&&(yi[3]*=ln),yi[3]<.99&&(we=!0);for(var Dr=0;Dr<4;Dr++)Lr[gr*4+Dr]=yi[Dr]}for(var Tn=[1e7,1e7,1e7],gr=0;gr<Et-1;gr++)for(var un=0;un<Pt-1;un++){var En=gr*(Pt-1)+un,Cn=En*4;de(gr,un,Ae);for(var nn=!1,Dr=0;Dr<4;Dr++)dr(y,Ae[Dr],Ge),ad(Ge)&&(nn=!0);for(var Dr=0;Dr<4;Dr++)nn?P.set(Cn+Dr,Tn):(dr(y,Ae[Dr],Ge),P.set(Cn+Dr,Ge)),f&&_t.set(Cn+Dr,$t[Dr]);for(var Dr=0;Dr<6;Dr++)ce[rr++]=Jt[Dr]+Cn;if(kt&&!nn)for(var Dr=0;Dr<2;Dr++){for(var $r=Dr*3,jn=0;jn<3;jn++){var oi=Ae[Jt[$r]+jn];dr(y,oi,Qe[jn])}Lo.sub(sr,Qe[0],Qe[1]),Lo.sub(fr,Qe[1],Qe[2]),Lo.cross($e,sr,fr);for(var jn=0;jn<3;jn++){var Mi=Ae[Jt[$r]+jn]*3;Sr[Mi]=Sr[Mi]+$e[0],Sr[Mi+1]=Sr[Mi+1]+$e[1],Sr[Mi+2]=Sr[Mi+2]+$e[2]}}}if(kt)for(var gr=0;gr<Sr.length/3;gr++)dr(Sr,gr,$e),Lo.normalize($e,$e),Sr[gr*3]=$e[0],Sr[gr*3+1]=$e[1],Sr[gr*3+2]=$e[2];for(var yi=[],xi=[],gr=0;gr<Et-1;gr++)for(var un=0;un<Pt-1;un++){var En=gr*(Pt-1)+un,Cn=En*4;de(gr,un,Ae);for(var Dr=0;Dr<4;Dr++){for(var jn=0;jn<4;jn++)yi[jn]=Lr[Ae[Dr]*4+jn];xt.set(Cn+Dr,yi),kt&&(dr(Sr,Ae[Dr],$e),j.set(Cn+Dr,$e));var oi=Ae[Dr];xi[0]=oi%Pt/(Pt-1),xi[1]=Math.floor(oi/Pt)/(Et-1),tt.set(Cn+Dr,xi)}En++}}else{for(var xi=[],gr=0;gr<p.count();gr++){xi[0]=gr%Pt/(Pt-1),xi[1]=Math.floor(gr/Pt)/(Et-1);var yi=ae.parseColor(ci(p,gr)),ln=gi(p,gr);ln!=null&&(yi[3]*=ln),yi[3]<.99&&(we=!0),xt.set(gr,yi),tt.set(gr,xi)}for(var Ae=[],nu=0,gr=0;gr<Et-1;gr++)for(var un=0;un<Pt-1;un++){de(gr,un,Ae);for(var Dr=0;Dr<6;Dr++)ce[nu++]=Ae[Jt[Dr]]}kt?h.generateVertexNormals():j.value=null}t.material.get("normalMap")&&h.generateTangents(),h.updateBoundingBox(),h.dirty(),t.material.transparent=we,t.material.depthMask=!we},_getDataShape:function(t,i){for(var l=-Infinity,f=0,h=0,p=0,y=!1,_=i?"u":"x",S=t.count(),P=0;P<S;P++){var j=t.get(_,P);j<l&&(p=h,h=0,f++),l=j,h++}if((!f||h===1)&&(y=!0),!y)return[f+1,h];for(var tt=Math.floor(Math.sqrt(S));tt>0;){if(Math.floor(S/tt)===S/tt)return[tt,S/tt];tt--}return tt=Math.floor(Math.sqrt(S)),[tt,tt]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function Nc(t){t.registerChartView(Rc),t.registerSeriesModel(id),t.registerLayout(function(i,l){i.eachSeriesByType("surface",function(f){var h=f.coordinateSystem;!h||h.type!=="cartesian3D";var p=f.getData(),y=new Float32Array(3*p.count()),_=[NaN,NaN,NaN];if(h&&h.type==="cartesian3D"){var S=h.dimensions,P=S.map(function(j){return f.coordDimToDataDim(j)[0]});p.each(P,function(j,tt,_t,xt){var Et;p.hasValue(xt)?Et=h.dataToPoint([j,tt,_t]):Et=_,y[xt*3]=Et[0],y[xt*3+1]=Et[1],y[xt*3+2]=Et[2]})}p.setLayout("points",y)})})}Object(B.w)(Nc);function $u(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var ps=B.g.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){t=t||{};var i=this.get("coordinateSystem");if(!(i==null||i==="geo3D")){if(!1)var l,f;this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null}},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var i=B.m.createDimensions(t.data,{coordDimensions:["value"]}),l=new B.e(i,this);l.initData(t.data);var f={};return l.each(function(h){var p=l.getName(h),y=l.getItemModel(h);f[p]=y}),this._regionModelMap=f,l},formatTooltip:function(t){return Jl(this,t)},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new B.f(null,this)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getName(t);if(i.transform){var f=i.getRegion(l);return f?f.geometries:[]}else{this._geo||(this._geo=Mv.createGeo3D(this));for(var f=this._geo.getRegion(l),h=[],p=0;p<f.geometries.length;p++){var y=f.geometries[p],_=[],S=$u(i,y.exterior);if(_&&_.length)for(var P=0;P<y.interiors.length;P++)_.push($u(i,_[P]));h.push({interiors:_,exterior:S})}return h}},getFormattedLabel:function(t,i){var l=ol.getFormattedLabel(this,t,i);return l==null&&(l=this.getData().getName(t)),l},defaultOption:{coordinateSystem:"geo3D",data:null}});B.x.merge(ps.prototype,uv),B.x.merge(ps.prototype,qo),B.x.merge(ps.prototype,Ws),B.x.merge(ps.prototype,ts),B.x.merge(ps.prototype,ea);var jc=ps,gs=B.b.extend({type:"map3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new tl(i),this.groupGL=new ae.Node},render:function(t,i,l){var f=t.coordinateSystem;if(!(!f||!f.viewGL)){this.groupGL.add(this._geo3DBuilder.rootNode),f.viewGL.add(this.groupGL);var h;if(f.type==="geo3D"){h=f,this._sceneHelper||(this._sceneHelper=new _o,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._control;p||(p=this._control=new Ll({zr:l.getZr()}),this._control.init());var y=t.getModel("viewControl");p.setViewGL(f.viewGL),p.setFromViewControlModel(y,0),p.off("update"),p.on("update",function(){l.dispatchAction({type:"map3DChangeCamera",alpha:p.getAlpha(),beta:p.getBeta(),distance:p.getDistance(),from:this.uid,map3DId:t.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),h=t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,i,l,0,t.getData().count());var _=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(S){S.material&&S.material[_]("fragment","SRGB_DECODE")})}},afterRender:function(t,i,l,f){var h=f.renderer,p=t.coordinateSystem;p&&p.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(h,t,l),this._sceneHelper.updateSkybox(h,t,l))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function Tm(t){Dv(t),t.registerChartView(gs),t.registerSeriesModel(jc),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"series",subType:"map3D",query:i},function(f){f.setView(i)})})}Object(B.w)(Tm);var od=B.g.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return B.m.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Bc=b("OjCH"),Fc=b("FLFE");function Ga(t){this.viewGL=t}Ga.prototype.reset=function(t,i){this._updateCamera(i.getWidth(),i.getHeight(),i.getDevicePixelRatio()),this._viewTransform=Bc.c(),this.updateTransform(t,i)},Ga.prototype.updateTransform=function(t,i){var l=t.coordinateSystem;l.getRoamTransform&&(Bc.e(this._viewTransform,l.getRoamTransform()),this._setCameraTransform(this._viewTransform),i.getZr().refresh())},Ga.prototype.dataToPoint=function(t,i,l){l=t.dataToPoint(i,null,l);var f=this._viewTransform;f&&Fc.b(l,l,f)},Ga.prototype.removeTransformInPoint=function(t){return this._viewTransform&&Fc.b(t,t,this._viewTransform),t},Ga.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1},Ga.prototype._setCameraTransform=function(t){var i=this.viewGL.camera;i.position.set(t[4],t[5],0),i.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)},Ga.prototype._updateCamera=function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.top=0,f.bottom=i,f.right=t,f.near=0,f.far=100};var Ua=Ga,zc=B.b.extend({type:"scatterGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new Oa("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Ua(this.viewGL)},render:function(t,i,l){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,l),!!t.getData().count()){var f=this._pointsBuilderList[0];f||(f=this._pointsBuilderList[0]=new $l(!0,l)),this._pointsBuilderList.length=1,this.groupGL.add(f.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),f.update(t,i,l),this.viewGL.setPostEffect(t.getModel("postEffect"),l)}},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var h=this._pointsBuilderList[this._currentStep];h||(h=new $l(!0,f),this._pointsBuilderList[this._currentStep]=h),this.groupGL.add(h.rootNode),this._removeTransformInPoints(i.getData().getLayout("points")),h.setSizeScale(this._sizeScale),h.update(i,l,f,t.start,t.end),f.getZr().refresh(),this._currentStep++}},updateTransform:function(t,i,l){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,l);var f=this._glViewHelper.getZoom(),h=Math.max((t.get("zoomScale")||0)*(f-1)+1,0);this._sizeScale=h,this._pointsBuilderList.forEach(function(p){p.setSizeScale(h)})}},_removeTransformInPoints:function(t){if(!!t)for(var i=[],l=0;l<t.length;l+=2)i[0]=t[l],i[1]=t[l+1],this._glViewHelper.removeTransformInPoint(i),t[l]=i[0],t[l+1]=i[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(t){t.dispose()})},remove:function(){this.groupGL.removeAll()}});function sd(t){t.registerChartView(zc),t.registerSeriesModel(od),t.registerLayout({seriesType:"scatterGL",reset:function(i){var l=i.coordinateSystem,f=i.getData(),h;if(l){var p=l.dimensions.map(function(_){return f.mapDimension(_)}).slice(0,2),y=[];p.length===1?h=function(_){for(var S=new Float32Array((_.end-_.start)*2),P=_.start;P<_.end;P++){var j=(P-_.start)*2,tt=f.get(p[0],P),_t=l.dataToPoint(tt);S[j]=_t[0],S[j+1]=_t[1]}f.setLayout("points",S)}:p.length===2&&(h=function(_){for(var S=new Float32Array((_.end-_.start)*2),P=_.start;P<_.end;P++){var j=(P-_.start)*2,tt=f.get(p[0],P),_t=f.get(p[1],P);y[0]=tt,y[1]=_t,y=l.dataToPoint(y),S[j]=y[0],S[j+1]=y[1]}f.setLayout("points",S)})}return{progress:h}}})}Object(B.w)(sd);var Om=b("VtB+"),Vc=b("RUxA"),Am=Vc.a,ld=function(t,i,l,f,h){for(var p=new Om.a(f),y=0;y<t.length;y++)p.addNode(Zr.firstNotNull(t[y].id,t[y].name,y),y);for(var _=[],S=[],P=0,y=0;y<i.length;y++){var j=i[y],tt=j.source,_t=j.target;p.addEdge(tt,_t,P)&&(S.push(j),_.push(Zr.firstNotNull(j.id,tt+" > "+_t)),P++)}var xt,Et=B.m.createDimensions(t,{coordDimensions:["value"]});xt=new B.e(Et,l),xt.initData(t);var Pt=new B.e(["value"],l);return Pt.initData(S,_),h&&h(xt,Pt),Am({mainData:xt,struct:p,structAttr:"graph",datas:{node:xt,edge:Pt},datasAttr:{node:"data",edge:"edgeData"}}),p.update(),p},ru=B.g.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){ru.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){ru.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,i,l,f){var h=ol.getFormattedLabel(this,t,i,l,f);if(h==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];h=p.get(y,t)}return h},getInitialData:function(t,i){var l=t.edges||t.links||[],f=t.data||t.nodes||[],h=this;if(f&&l)return ld(f,l,this,!0,p).data;function p(y,_){y.wrapMethod("getItemModel",function(tt){const _t=h._categoriesModels,xt=tt.getShallow("category"),Et=_t[xt];return Et&&(Et.parentModel=tt.parentModel,tt.parentModel=Et),tt});const S=i.getModel([]).getModel;function P(tt,_t){const xt=S.call(this,tt,_t);return xt.resolveParentPath=j,xt}_.wrapMethod("getItemModel",function(tt){return tt.resolveParentPath=j,tt.getModel=P,tt});function j(tt){if(tt&&(tt[0]==="label"||tt[1]==="label")){const _t=tt.slice();return tt[0]==="label"?_t[0]="edgeLabel":tt[1]==="label"&&(_t[1]="edgeLabel"),_t}return tt}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,i,l){if(l==="edge"){var f=this.getData(),h=this.getDataParams(t,l),p=f.graph.getEdgeByIndex(t),y=f.getName(p.node1.dataIndex),_=f.getName(p.node2.dataIndex),S=[];return y!=null&&S.push(y),_!=null&&S.push(_),S=B.i.encodeHTML(S.join(" > ")),h.value&&(S+=" : "+B.i.encodeHTML(h.value)),S}else return ru.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map(function(l){return l.value!=null?l:Object.assign({value:0},l)}),i=new B.e(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(l){return i.getItemModel(l,!0)})},setView:function(t){t.zoom!=null&&(this.option.zoom=t.zoom),t.offset!=null&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var i=0;i<t.length/2;i++){var l=t[i*2],f=t[i*2+1],h=this.getData().getRawDataItem(i);h.x=l,h.y=f}},isAnimationEnabled:function(){return ru.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),ud=ru,ai=qn.vec2,fd=[[0,0],[1,1]],cd=tn.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new tn.Attribute("position","float",2,"POSITION"),normal:new tn.Attribute("normal","float",2),offset:new tn.Attribute("offset","float",1),color:new tn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.offset.init(t),i.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var h=ai.dist(t,i)+ai.dist(l,i)+ai.dist(f,l),p=1/(h+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var h=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/h);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var h=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/h);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(fd)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(fd)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?0:(i-1)*2},addCubicCurve:function(t,i,l,f,h,p){p==null&&(p=1);for(var y=t[0],_=t[1],S=i[0],P=i[1],j=l[0],tt=l[1],_t=f[0],xt=f[1],Et=this._getCubicCurveApproxStep(t,i,l,f),Pt=Et*Et,Vt=Pt*Et,kt=3*Et,ee=3*Pt,Jt=6*Pt,$t=6*Vt,ce=y-S*2+j,de=_-P*2+tt,we=(S-j)*3-y+_t,Ae=(P-tt)*3-_+xt,Ge=y,rr=_,Qe=(S-y)*kt+ce*ee+we*Vt,sr=(P-_)*kt+de*ee+Ae*Vt,fr=ce*Jt+we*$t,$e=de*Jt+Ae*$t,dr=we*$t,Sr=Ae*$t,Lr=0,gr=0,ln=Math.ceil(1/Et),Dr=new Float32Array((ln+1)*3),Dr=[],Tn=0,gr=0;gr<ln+1;gr++)Dr[Tn++]=Ge,Dr[Tn++]=rr,Ge+=Qe,rr+=sr,Qe+=fr,sr+=$e,fr+=dr,$e+=Sr,Lr+=Et,Lr>1&&(Ge=Qe>0?Math.min(Ge,_t):Math.max(Ge,_t),rr=sr>0?Math.min(rr,xt):Math.max(rr,xt));this.addPolyline(Dr,h,p)},addLine:function(t,i,l,f){this.addPolyline([t,i],l,f)},addPolyline:function(){var t=ai.create(),i=ai.create(),l=ai.create(),f=ai.create(),h=[],p=[],y=[];return function(_,S,P,j,tt){if(!!_.length){var _t=typeof _[0]!="number";if(tt==null&&(tt=_t?_.length:_.length/2),!(tt<2)){j==null&&(j=0),P==null&&(P=1),this._itemVertexOffsets.push(this._vertexOffset);for(var xt=_t?typeof S[0]!="number":S.length/4===tt,Et=this.attributes.position,Pt=this.attributes.color,Vt=this.attributes.offset,kt=this.attributes.normal,ee=this.indices,Jt=this._vertexOffset,$t,ce=0;ce<tt;ce++){if(_t)h=_[ce+j],xt?$t=S[ce+j]:$t=S;else{var de=ce*2+j;if(h=h||[],h[0]=_[de],h[1]=_[de+1],xt){var we=ce*4+j;$t=$t||[],$t[0]=S[we],$t[1]=S[we+1],$t[2]=S[we+2],$t[3]=S[we+3]}else $t=S}if(this.useNativeLine)ce>1&&(Et.copy(Jt,Jt-1),Pt.copy(Jt,Jt-1),Jt++);else{var Ae;if(ce<tt-1){if(_t)ai.copy(p,_[ce+1]);else{var de=(ce+1)*2+j;p=p||[],p[0]=_[de],p[1]=_[de+1]}if(ce>0){ai.sub(t,h,y),ai.sub(i,p,h),ai.normalize(t,t),ai.normalize(i,i),ai.add(f,t,i),ai.normalize(f,f);var Ge=P/2*Math.min(1/ai.dot(t,f),2);l[0]=-f[1],l[1]=f[0],Ae=Ge}else ai.sub(t,p,h),ai.normalize(t,t),l[0]=-t[1],l[1]=t[0],Ae=P/2}else ai.sub(t,h,y),ai.normalize(t,t),l[0]=-t[1],l[1]=t[0],Ae=P/2;kt.set(Jt,l),kt.set(Jt+1,l),Vt.set(Jt,Ae),Vt.set(Jt+1,-Ae),ai.copy(y,h),Et.set(Jt,h),Et.set(Jt+1,h),Pt.set(Jt,$t),Pt.set(Jt+1,$t),Jt+=2}if(this.useNativeLine)Pt.set(Jt,$t),Et.set(Jt,h),Jt++;else if(ce>0){var rr=this._faceOffset*3,ee=this.indices;ee[rr]=Jt-4,ee[rr+1]=Jt-3,ee[rr+2]=Jt-2,ee[rr+3]=Jt-3,ee[rr+4]=Jt-1,ee[rr+5]=Jt-2,this._faceOffset+=2}}this._vertexOffset=Jt}}}}(),setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,h=l;h<f;h++)this.attributes.color.set(h,i);this.dirty("color")}});B.x.defaults(cd.prototype,Xs);var qu=cd,Gc=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;ae.Shader.import(Gc);var tf={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function mi(t){var i={type:ae.Texture.FLOAT,minFilter:ae.Texture.NEAREST,magFilter:ae.Texture.NEAREST};this._positionSourceTex=new ae.Texture2D(i),this._positionSourceTex.flipY=!1,this._positionTex=new ae.Texture2D(i),this._positionPrevTex=new ae.Texture2D(i),this._forceTex=new ae.Texture2D(i),this._forcePrevTex=new ae.Texture2D(i),this._weightedSumTex=new ae.Texture2D(i),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new ae.Texture2D(i),this._globalSpeedPrevTex=new ae.Texture2D(i),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new ni({fragment:ae.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new ni({fragment:ae.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new ni({fragment:ae.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new ni({fragment:ae.Shader.source("clay.compositor.output")});var l=function(f){f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE)};this._edgeForceMesh=new ae.Mesh({geometry:new ae.Geometry({attributes:{node1:new ae.Geometry.Attribute("node1","float",2),node2:new ae.Geometry.Attribute("node2","float",2),weight:new ae.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new ae.Material({transparent:!0,shader:ae.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:l,depthMask:!1,depthText:!1}),mode:ae.Mesh.POINTS}),this._weightedSumMesh=new ae.Mesh({geometry:new ae.Geometry({attributes:{node:new ae.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new ae.Material({transparent:!0,shader:ae.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:l,depthMask:!1,depthText:!1}),mode:ae.Mesh.POINTS}),this._framebuffer=new Wn({depthBuffer:!1}),this._dummyCamera=new ae.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}mi.prototype.updateOption=function(t){for(var i in tf)this[i]=tf[i];var l=this._nodes.length;if(l>5e4?this.jitterTolerence=10:l>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,l>100?this.scaling=2:this.scaling=10,t)for(var i in tf)t[i]!=null&&(this[i]=t[i]);if(this.repulsionByDegree)for(var f=this._positionSourceTex.pixels,h=0;h<this._nodes.length;h++)f[h*4+2]=(this._nodes[h].degree||0)+1},mi.prototype._updateGravityCenter=function(t){var i=this._nodes,l=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var f=[Infinity,Infinity],h=[-Infinity,-Infinity],p=0;p<i.length;p++)f[0]=Math.min(i[p].x,f[0]),f[1]=Math.min(i[p].y,f[1]),h[0]=Math.max(i[p].x,h[0]),h[1]=Math.max(i[p].y,h[1]);this._gravityCenter=[(f[0]+h[0])*.5,(f[1]+h[1])*.5]}for(var p=0;p<l.length;p++){var y=l[p].node1,_=l[p].node2;i[y].degree=(i[y].degree||0)+1,i[_].degree=(i[_].degree||0)+1}},mi.prototype.initData=function(t,i){this._nodes=t,this._edges=i,this._updateGravityCenter();var l=Math.ceil(Math.sqrt(t.length)),f=l,h=new Float32Array(l*f*4);this._resize(l,f);for(var p=0,y=0;y<t.length;y++){var _=t[y];h[p++]=_.x||0,h[p++]=_.y||0,h[p++]=_.mass||1,h[p++]=_.size||1}this._positionSourceTex.pixels=h;var S=this._edgeForceMesh.geometry,P=i.length;S.attributes.node1.init(P*2),S.attributes.node2.init(P*2),S.attributes.weight.init(P*2);for(var j=[],y=0;y<i.length;y++){var tt=S.attributes,_t=i[y].weight;_t==null&&(_t=1),tt.node1.set(y,this.getNodeUV(i[y].node1,j)),tt.node2.set(y,this.getNodeUV(i[y].node2,j)),tt.weight.set(y,_t),tt.node1.set(y+P,this.getNodeUV(i[y].node2,j)),tt.node2.set(y+P,this.getNodeUV(i[y].node1,j)),tt.weight.set(y+P,_t)}var xt=this._weightedSumMesh.geometry;xt.attributes.node.init(t.length);for(var y=0;y<t.length;y++)xt.attributes.node.set(y,this.getNodeUV(y,j));S.dirty(),xt.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[l,f]),this._inited=!1,this._frame=0},mi.prototype.getNodes=function(){return this._nodes},mi.prototype.getEdges=function(){return this._edges},mi.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var i=this._nodeRepulsionPass;i.setUniform("strongGravityMode",this.strongGravityMode),i.setUniform("gravity",this.gravity),i.setUniform("gravityCenter",this._gravityCenter),i.setUniform("scaling",this.scaling),i.setUniform("preventOverlap",this.preventOverlap),i.setUniform("positionTex",this._positionPrevTex),i.render(t);var l=this._edgeForceMesh;l.material.set("linLogMode",this.linLogMode),l.material.set("edgeWeightInfluence",this.edgeWeightInfluence),l.material.set("preventOverlap",this.preventOverlap),l.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([l],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var f=this._weightedSumMesh;f.material.set("positionTex",this._positionPrevTex),f.material.set("forceTex",this._forceTex),f.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([f],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var h=this._globalSpeedPass;h.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),h.setUniform("weightedSumTex",this._weightedSumTex),h.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),h.render(t);var p=this._positionPass;this._framebuffer.attach(this._positionTex),p.setUniform("globalSpeedTex",this._globalSpeedTex),p.setUniform("positionTex",this._positionPrevTex),p.setUniform("forceTex",this._forceTex),p.setUniform("forcePrevTex",this._forcePrevTex),p.render(t),this._framebuffer.unbind(t),this._swapTexture()},mi.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1);for(var f=0;f<i;f++)this.step(t);l&&l()},mi.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},mi.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1)||0,i},mi.prototype.getNodePosition=function(t,i){var l=this._positionArr,f=this._positionTex.width,h=this._positionTex.height,p=f*h;(!l||l.length!==p*4)&&(l=this._positionArr=new Float32Array(p*4)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,f,h,t.gl.RGBA,t.gl.FLOAT,l),this._framebuffer.unbind(t),i||(i=new Float32Array(this._nodes.length*2));for(var y=0;y<this._nodes.length;y++)i[y*2]=l[y*4],i[y*2+1]=l[y*4+1];return i},mi.prototype.getTextureData=function(t,i){var l=this["_"+i+"Tex"],f=l.width,h=l.height;this._framebuffer.bind(t),this._framebuffer.attach(l);var p=new Float32Array(f*h*4);return t.gl.readPixels(0,0,f,h,t.gl.RGBA,t.gl.FLOAT,p),this._framebuffer.unbind(t),p},mi.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},mi.prototype.isFinished=function(t){return this._frame>t},mi.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t;var t=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=t;var t=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t},mi.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)},mi.prototype._resize=function(t,i){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(l){this[l].width=t,this[l].height=i,this[l].dirty()},this)},mi.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};var Uc=mi;function hd(){var t={create:function(){return new Float32Array(2)},dist:function(S,P){var j=P[0]-S[0],tt=P[1]-S[1];return Math.sqrt(j*j+tt*tt)},len:function(S){var P=S[0],j=S[1];return Math.sqrt(P*P+j*j)},scaleAndAdd:function(S,P,j,tt){return S[0]=P[0]+j[0]*tt,S[1]=P[1]+j[1]*tt,S},scale:function(S,P,j){return S[0]=P[0]*j,S[1]=P[1]*j,S},add:function(S,P,j){return S[0]=P[0]+j[0],S[1]=P[1]+j[1],S},sub:function(S,P,j){return S[0]=P[0]-j[0],S[1]=P[1]-j[1],S},normalize:function(S,P){var j=P[0],tt=P[1],_t=j*j+tt*tt;return _t>0&&(_t=1/Math.sqrt(_t),S[0]=P[0]*_t,S[1]=P[1]*_t),S},negate:function(S,P){return S[0]=-P[0],S[1]=-P[1],S},copy:function(S,P){return S[0]=P[0],S[1]=P[1],S},set:function(S,P,j){return S[0]=P,S[1]=j,S}};function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var l=i.prototype;l.beforeUpdate=function(){for(var S=0;S<this.nSubRegions;S++)this.subRegions[S].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},l.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var S=0;S<this.nSubRegions;S++)this.subRegions[S].afterUpdate()},l.addNode=function(S){if(this.nSubRegions===0)if(this.node==null){this.node=S;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(S),this._updateCenterOfMass(S)},l.findSubRegion=function(S,P){for(var j=0;j<this.nSubRegions;j++){var tt=this.subRegions[j];if(tt.contain(S,P))return tt}},l.contain=function(S,P){return this.bbox[0]<=S&&this.bbox[2]>=S&&this.bbox[1]<=P&&this.bbox[3]>=P},l.setBBox=function(S,P,j,tt){this.bbox[0]=S,this.bbox[1]=P,this.bbox[2]=j,this.bbox[3]=tt,this.size=(j-S+tt-P)/2},l._newSubRegion=function(){var S=this.subRegions[this.nSubRegions];return S||(S=new i,this.subRegions[this.nSubRegions]=S),this.nSubRegions++,S},l._addNodeToSubRegion=function(S){var P=this.findSubRegion(S.position[0],S.position[1]),j=this.bbox;if(!P){var tt=(j[0]+j[2])/2,_t=(j[1]+j[3])/2,xt=(j[2]-j[0])/2,Et=(j[3]-j[1])/2,Pt=S.position[0]>=tt?1:0,Vt=S.position[1]>=_t?1:0,P=this._newSubRegion();P.setBBox(Pt*xt+j[0],Vt*Et+j[1],(Pt+1)*xt+j[0],(Vt+1)*Et+j[1])}P.addNode(S)},l._updateCenterOfMass=function(S){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var P=this.centerOfMass[0]*this.mass,j=this.centerOfMass[1]*this.mass;P+=S.position[0]*S.mass,j+=S.position[1]*S.mass,this.mass+=S.mass,this.centerOfMass[0]=P/this.mass,this.centerOfMass[1]=j/this.mass};function f(){this.position=new Float32Array(2),this.force=t.create(),this.forcePrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function h(S,P){this.source=S,this.target=P,this.weight=1}function p(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new i,this.rootRegion.centerOfMass=t.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var y=p.prototype;y.initNodes=function(S,P,j){var tt=P.length;this.nodes.length=0;for(var _t=typeof j!="undefined",xt=0;xt<tt;xt++){var Et=new f;Et.position[0]=S[xt*2],Et.position[1]=S[xt*2+1],Et.mass=P[xt],_t&&(Et.size=j[xt]),this.nodes.push(Et)}this._massArr=P,this._swingingArr=new Float32Array(tt),_t&&(this._sizeArr=j)},y.initEdges=function(S,P){var j=S.length/2;this.edges.length=0;for(var tt=0;tt<j;tt++){var _t=S[tt*2],xt=S[tt*2+1],Et=this.nodes[_t],Pt=this.nodes[xt];if(!Et||!Pt){console.error("Node not exists, try initNodes before initEdges");return}Et.outDegree++,Pt.inDegree++;var Vt=new h(Et,Pt);P&&(Vt.weight=P[tt]),this.edges.push(Vt)}},y.updateSettings=function(){if(this.repulsionByDegree)for(var S=0;S<this.nodes.length;S++){var P=this.nodes[S];P.mass=P.inDegree+P.outDegree+1}else for(var S=0;S<this.nodes.length;S++){var P=this.nodes[S];P.mass=this._massArr[S]}},y.update=function(){var S=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var P=0;P<S;P++)this.rootRegion.addNode(this.nodes[P]);this.rootRegion.afterUpdate()}for(var P=0;P<S;P++){var j=this.nodes[P];t.copy(j.forcePrev,j.force),t.set(j.force,0,0)}for(var P=0;P<S;P++){var tt=this.nodes[P];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,tt);else for(var _t=P+1;_t<S;_t++){var xt=this.nodes[_t];this.applyNodeToNodeRepulsion(tt,xt,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(tt):this.applyNodeGravity(tt))}for(var P=0;P<this.edges.length;P++)this.applyEdgeAttraction(this.edges[P]);for(var Et=0,Pt=0,Vt=t.create(),P=0;P<S;P++){var j=this.nodes[P],kt=t.dist(j.force,j.forcePrev);Et+=kt*j.mass,t.add(Vt,j.force,j.forcePrev);var ee=t.len(Vt)*.5;Pt+=ee*j.mass,this._swingingArr[P]=kt}var Jt=this.jitterTolerence*this.jitterTolerence*Pt/Et;this._globalSpeed>0&&(Jt=Math.min(Jt/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=Jt;for(var P=0;P<S;P++){var j=this.nodes[P],kt=this._swingingArr[P],$t=.1*Jt/(1+Jt*Math.sqrt(kt)),ce=t.len(j.force);ce>0&&($t=Math.min(ce*$t,10)/ce,t.scaleAndAdd(j.position,j.position,j.force,$t))}},y.applyRegionToNodeRepulsion=function(){var S=t.create();return function(j,tt){if(j.node)this.applyNodeToNodeRepulsion(j.node,tt,!0);else{t.sub(S,tt.position,j.centerOfMass);var _t=S[0]*S[0]+S[1]*S[1];if(_t>this.barnesHutTheta*j.size*j.size){var xt=this.scaling*tt.mass*j.mass/_t;t.scaleAndAdd(tt.force,tt.force,S,xt)}else for(var Et=0;Et<j.nSubRegions;Et++)this.applyRegionToNodeRepulsion(j.subRegions[Et],tt)}}}(),y.applyNodeToNodeRepulsion=function(){var S=t.create();return function(j,tt,_t){if(j!=tt){t.sub(S,j.position,tt.position);var xt=S[0]*S[0]+S[1]*S[1];if(xt!==0){var Et;if(this.preventOverlap){var Pt=Math.sqrt(xt);if(Pt=Pt-j.size-tt.size,Pt>0)Et=this.scaling*j.mass*tt.mass/(Pt*Pt);else if(Pt<0)Et=this.scaling*100*j.mass*tt.mass;else return}else Et=this.scaling*j.mass*tt.mass/xt;t.scaleAndAdd(j.force,j.force,S,Et),t.scaleAndAdd(tt.force,tt.force,S,-Et)}}}}(),y.applyEdgeAttraction=function(){var S=t.create();return function(j){var tt=j.source,_t=j.target;t.sub(S,tt.position,_t.position);var xt=t.len(S),Et;this.edgeWeightInfluence===0?Et=1:this.edgeWeightInfluence===1?Et=j.weight:Et=Math.pow(j.weight,this.edgeWeightInfluence);var Pt;this.preventOverlap&&(xt=xt-tt.size-_t.size,xt<=0)||(this.linLogMode?Pt=-Et*Math.log(xt+1)/(xt+1):Pt=-Et,t.scaleAndAdd(tt.force,tt.force,S,Pt),t.scaleAndAdd(_t.force,_t.force,S,-Pt))}}(),y.applyNodeGravity=function(){var S=t.create();return function(P){t.sub(S,this.gravityCenter,P.position);var j=t.len(S);t.scaleAndAdd(P.force,P.force,S,this.gravity*P.mass/(j+1))}}(),y.applyNodeStrongGravity=function(){var S=t.create();return function(P){t.sub(S,this.gravityCenter,P.position),t.scaleAndAdd(P.force,P.force,S,this.gravity*P.mass)}}(),y.updateBBox=function(){for(var S=Infinity,P=Infinity,j=-Infinity,tt=-Infinity,_t=0;_t<this.nodes.length;_t++){var xt=this.nodes[_t].position;S=Math.min(S,xt[0]),P=Math.min(P,xt[1]),j=Math.max(j,xt[0]),tt=Math.max(tt,xt[1])}this.bbox[0]=S,this.bbox[1]=P,this.bbox[2]=j,this.bbox[3]=tt},y.getGlobalSpeed=function(){return this._globalSpeed};var _=null;self.onmessage=function(S){switch(S.data.cmd){case"init":_=new p,_.initNodes(S.data.nodesPosition,S.data.nodesMass,S.data.nodesSize),_.initEdges(S.data.edges,S.data.edgesWeight);break;case"updateConfig":if(_)for(var P in S.data.config)_[P]=S.data.config[P];break;case"update":var j=S.data.steps;if(_){for(var tt=0;tt<j;tt++)_.update();for(var _t=_.nodes.length,xt=new Float32Array(_t*2),tt=0;tt<_t;tt++){var Et=_.nodes[tt];xt[tt*2]=Et.position[0],xt[tt*2+1]=Et.position[1]}self.postMessage({buffer:xt.buffer,globalSpeed:_.getGlobalSpeed()},[xt.buffer])}else{var Pt=new Float32Array;self.postMessage({buffer:Pt.buffer,globalSpeed:_.getGlobalSpeed()},[Pt.buffer])}break}}}var Mm=hd,Io=Mm.toString();Io=Io.slice(Io.indexOf("{")+1,Io.lastIndexOf("}"));var ll={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},ki=function(t){for(var i in ll)this[i]=ll[i];if(t)for(var i in t)this[i]=t[i];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Xr({type:Er.FLOAT,flipY:!1,minFilter:Er.NEAREST,magFilter:Er.NEAREST})};ki.prototype.initData=function(t,i){var l=new Blob([Io]),f=window.URL.createObjectURL(l);this._worker=new Worker(f),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=i,this._frame=0;for(var h=t.length,p=i.length,y=new Float32Array(h*2),_=new Float32Array(h),S=new Float32Array(h),P=new Float32Array(p*2),j=new Float32Array(p),tt=0;tt<t.length;tt++){var _t=t[tt];y[tt*2]=_t.x,y[tt*2+1]=_t.y,_[tt]=_t.mass==null?1:_t.mass,S[tt]=_t.size==null?1:_t.size}for(var tt=0;tt<i.length;tt++){var xt=i[tt],Et=xt.node1,Pt=xt.node2;P[tt*2]=Et,P[tt*2+1]=Pt,j[tt]=xt.weight==null?1:xt.weight}var Vt=Math.ceil(Math.sqrt(t.length)),kt=Vt,ee=new Float32Array(Vt*kt*4),Jt=this._positionTex;Jt.width=Vt,Jt.height=kt,Jt.pixels=ee,this._worker.postMessage({cmd:"init",nodesPosition:y,nodesMass:_,nodesSize:S,edges:P,edgesWeight:j}),this._globalSpeed=Infinity},ki.prototype.updateOption=function(t){var i={};for(var l in ll)i[l]=ll[l];var f=this._nodes,h=this._edges,p=f.length;if(p>5e4?i.jitterTolerence=10:p>5e3?i.jitterTolerence=1:i.jitterTolerence=.1,p>100?i.scaling=2:i.scaling=10,p>1e3?i.barnesHutOptimize=!0:i.barnesHutOptimize=!1,t)for(var l in ll)t[l]!=null&&(i[l]=t[l]);if(!i.gravityCenter){for(var y=[Infinity,Infinity],_=[-Infinity,-Infinity],S=0;S<f.length;S++)y[0]=Math.min(f[S].x,y[0]),y[1]=Math.min(f[S].y,y[1]),_[0]=Math.max(f[S].x,_[0]),_[1]=Math.max(f[S].y,_[1]);i.gravityCenter=[(y[0]+_[0])*.5,(y[1]+_[1])*.5]}for(var S=0;S<h.length;S++){var P=h[S].node1,j=h[S].node2;f[P].degree=(f[P].degree||0)+1,f[j].degree=(f[j].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:i})},ki.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1),this._frame+=i,this._onupdate=l,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(i)})},ki.prototype._$onupdate=function(t){if(!this._disposed){var i=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=i,this._updateTexture(i),this._onupdate&&this._onupdate()}},ki.prototype.getNodePositionTexture=function(){return this._positionTex},ki.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1),i},ki.prototype.getNodes=function(){return this._nodes},ki.prototype.getEdges=function(){return this._edges},ki.prototype.isFinished=function(t){return this._frame>t},ki.prototype.getNodePosition=function(t,i){if(i||(i=new Float32Array(this._nodes.length*2)),this._positionArr)for(var l=0;l<this._positionArr.length;l++)i[l]=this._positionArr[l];return i},ki.prototype._updateTexture=function(t){for(var i=this._positionTex.pixels,l=0,f=0;f<t.length;)i[l++]=t[f++],i[l++]=t[f++],i[l++]=1,i[l++]=1;this._positionTex.dirty()},ki.prototype.dispose=function(t){this._disposed=!0,this._worker=null};var Hc=ki,vd=Y.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(!!this._target&&!!this._needsUpdate){var t=this._target,i=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(i,i,i),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var i=t.offsetX,l=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(i,l))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var f=this._convertPos(i,l);this._x=f.x,this._y=f.y}}},_convertPos:function(t,i){var l=this.viewGL.camera,f=this.viewGL.viewport;return{x:(t-f.x)/f.width*(l.right-l.left)+l.left,y:(i-f.y)/f.height*(l.bottom-l.top)+l.top}},_mouseMoveHandler:function(t){var i=this._convertPos(t.offsetX,t.offsetY);this._dx+=i.x-this._x,this._dy+=i.y-this._y,this._x=i.x,this._y=i.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){t=t.event;var i=t.wheelDelta||-t.detail;if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var h=i>0?1.1:.9,p=Math.max(Math.min(this._zoom*h,this.maxZoom),this.minZoom);h=p/this._zoom;var y=this._convertPos(l,f),_=(y.x-this._dx)*(h-1),S=(y.y-this._dy)*(h-1);this._dx-=_,this._dy-=S,this._zoom=p,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}}),dd=vd,Wc=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`,ef=qn.vec2;ae.Shader.import(Wc);var Dm=1,Em=B.b.extend({type:"graphGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new Oa("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new $l(!0,i),this._forceEdgesMesh=new ae.Mesh({material:new ae.Material({shader:ae.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new ae.Geometry({attributes:{node:new ae.Geometry.Attribute("node","float",2),color:new ae.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:ae.Mesh.LINES}),this._edgesMesh=new ae.Mesh({material:new ae.Material({shader:ae.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new qu({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new dd({zr:i.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,i,l){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=l,this._initLayout(t,i,l),this._pointsBuilder.update(t,i,l),this._forceLayoutInstance instanceof Uc||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,l),this._control.off("update"),this._control.on("update",function(){l.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Zr.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var f=this._pointsBuilder.getPointsMesh();if(f.off("mousemove",this._mousemoveHandler),f.off("mouseout",this._mouseOutHandler,this),l.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var h=t.get("focusNodeAdjacencyOn");h==="click"?l.getZr().on("click",this._clickHandler):h==="mouseover"&&(f.on("mousemove",this._mousemoveHandler,this),f.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?i!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=i}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,i){var l=this._forceEdgesMesh.geometry,f=i.getEdgeData(),h=0,p=this._forceLayoutInstance,y=f.count()*2;l.attributes.node.init(y),l.attributes.color.init(y),f.each(function(_){var S=t[_];l.attributes.node.set(h,p.getNodeUV(S.node1)),l.attributes.node.set(h+1,p.getNodeUV(S.node2));var P=ci(f,S.dataIndex),j=ae.parseColor(P);j[3]*=Zr.firstNotNull(gi(f,S.dataIndex),1),l.attributes.color.set(h,j),l.attributes.color.set(h+1,j),h+=2}),l.dirty()},_updateMeshLinesGeometry:function(){var t=this._model.getEdgeData(),i=this._edgesMesh.geometry,t=this._model.getEdgeData(),l=this._model.getData().getLayout("points");i.resetOffset(),i.setVertexCount(t.count()*i.getLineVertexCount()),i.setTriangleCount(t.count()*i.getLineTriangleCount());var f=[],h=[],p=["lineStyle","width"];this._originalEdgeColors=new Float32Array(t.count()*4),this._edgeIndicesMap=new Float32Array(t.count()),t.each(function(y){var _=t.graph.getEdgeByIndex(y),S=_.node1.dataIndex*2,P=_.node2.dataIndex*2;f[0]=l[S],f[1]=l[S+1],h[0]=l[P],h[1]=l[P+1];var j=ci(t,_.dataIndex),tt=ae.parseColor(j);tt[3]*=Zr.firstNotNull(gi(t,_.dataIndex),1);var _t=t.getItemModel(_.dataIndex),xt=Zr.firstNotNull(_t.get(p),1)*this._api.getDevicePixelRatio();i.addLine(f,h,tt,xt);for(var Et=0;Et<4;Et++)this._originalEdgeColors[_.dataIndex*4+Et]=tt[Et];this._edgeIndicesMap[_.dataIndex]=y},this),i.dirty()},_updateForceNodesGeometry:function(t){for(var i=this._pointsBuilder.getPointsMesh(),l=[],f=0;f<t.count();f++)this._forceLayoutInstance.getNodeUV(f,l),i.geometry.attributes.position.set(f,l);i.geometry.dirty("position")},_initLayout:function(t,i,l){var f=t.get("layout"),h=t.getGraph(),p=t.getBoxLayoutParams(),y=Object(Ys.g)(p,{width:l.getWidth(),height:l.getHeight()});f==="force"&&(f="forceAtlas2"),this.stopLayout(t,i,l,{beforeLayout:!0});var _=t.getData(),S=t.getData();if(f==="forceAtlas2"){var P=t.getModel("forceAtlas2"),j=this._forceLayoutInstance,tt=[],_t=[],xt=_.getDataExtent("value"),Et=S.getDataExtent("value"),Pt=Zr.firstNotNull(P.get("edgeWeight"),1),Vt=Zr.firstNotNull(P.get("nodeWeight"),1);typeof Pt=="number"&&(Pt=[Pt,Pt]),typeof Vt=="number"&&(Vt=[Vt,Vt]);var kt=0,ee={},Jt=new Float32Array(_.count()*2);if(h.eachNode(function(ce){var de=ce.dataIndex,we=_.get("value",de),Ae,Ge;if(_.hasItemOption){var rr=_.getItemModel(de);Ae=rr.get("x"),Ge=rr.get("y")}Ae==null&&(Ae=y.x+Math.random()*y.width,Ge=y.y+Math.random()*y.height),Jt[kt*2]=Ae,Jt[kt*2+1]=Ge,ee[ce.id]=kt++;var Qe=B.p.linearMap(we,xt,Vt);isNaN(Qe)&&(isNaN(Vt[0])?Qe=1:Qe=Vt[0]),tt.push({x:Ae,y:Ge,mass:Qe,size:_.getItemVisual(de,"symbolSize")})}),_.setLayout("points",Jt),h.eachEdge(function(ce){var de=ce.dataIndex,we=_.get("value",de),Ae=B.p.linearMap(we,Et,Pt);isNaN(Ae)&&(isNaN(Pt[0])?Ae=1:Ae=Pt[0]),_t.push({node1:ee[ce.node1.id],node2:ee[ce.node2.id],weight:Ae,dataIndex:de})}),!j){var $t=P.get("GPU");this._forceLayoutInstance&&($t&&!(this._forceLayoutInstance instanceof Uc)||!$t&&!(this._forceLayoutInstance instanceof Hc))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),j=this._forceLayoutInstance=$t?new Uc:new Hc}j.initData(tt,_t),j.updateOption(P.option),this._updateForceEdgesGeometry(j.getEdges(),t),this._updatePositionTexture(),l.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var Jt=new Float32Array(_.count()*2),kt=0;h.eachNode(function(we){var Ae=we.dataIndex,Ge,rr;if(_.hasItemOption){var Qe=_.getItemModel(Ae);Ge=Qe.get("x"),rr=Qe.get("y")}Jt[kt++]=Ge,Jt[kt++]=rr}),_.setLayout("points",Jt),this._updateAfterLayout(t,i,l)}},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,i,l,f){if(!(f&&f.from!=null&&f.from!==this.uid)){var h=this.viewGL,l=this._api,p=this._forceLayoutInstance,y=this._model.getData(),_=this._model.getModel("forceAtlas2");if(!!p&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var S=this,P=this._layoutId=Dm++,j=_.getShallow("maxSteps"),tt=_.getShallow("steps"),_t=0,xt=Math.max(tt*2,20),Et=function(Pt){if(Pt===S._layoutId){if(p.isFinished(j)){l.dispatchAction({type:"graphGLStopLayout",from:S.uid}),l.dispatchAction({type:"graphGLFinishLayout",points:y.getLayout("points"),from:S.uid});return}p.update(h.layer.renderer,tt,function(){S._updatePositionTexture(),_t+=tt,_t>=xt&&(S._syncNodePosition(t),_t=0),l.getZr().refresh(),Object(Vs.a)(function(){Et(Pt)})})}};Object(Vs.a)(function(){S._forceLayoutInstanceToDispose&&(S._forceLayoutInstanceToDispose.dispose(h.layer.renderer),S._forceLayoutInstanceToDispose=null),Et(P)}),this._layouting=!0}}},stopLayout:function(t,i,l,f){f&&f.from!=null&&f.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),!!this._forceLayoutInstance&&(!this.viewGL.layer||(f&&f.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,i,l)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(t){var i=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",i),t.setNodePosition(i)},_updateAfterLayout:function(t,i,l){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,i,l),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,i,l,f){var h=this._model.getData();this._downplayAll();var p=f.dataIndex,y=h.graph,_=[],S=y.getNodeByIndex(p);_.push(S),S.edges.forEach(function(j){j.dataIndex<0||(j.node1!==S&&_.push(j.node1),j.node2!==S&&_.push(j.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),_.forEach(function(j){this._pointsBuilder.highlight(h,j.dataIndex)},this),this._pointsBuilder.updateLabels(_.map(function(j){return j.dataIndex}));var P=[];S.edges.forEach(function(j){j.dataIndex>=0&&(this._highlightEdge(j.dataIndex),P.push(j))},this),this._focusNodes=_,this._focusEdges=P},unfocusNodeAdjacency:function(t,i,l,f){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var i=this._model.getEdgeData().getItemModel(t),l=ae.parseColor(i.get("emphasis.lineStyle.color")||i.get("lineStyle.color")),f=Zr.firstNotNull(i.get("emphasis.lineStyle.opacity"),i.get("lineStyle.opacity"),1);l[3]*=f,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],l)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(t){this._downplayEdge(t.dataIndex)},this)},_downplayEdge:function(t){var i=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],i)},_setEdgeFade:function(){var t=[];return function(i,l){this._getColor(i,t),t[3]*=l,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[i],t)}}(),_getColor:function(t,i){for(var l=0;l<4;l++)i[l]=this._originalEdgeColors[t*4+l];return i},_fadeOutEdgesAll:function(t){var i=this._model.getData().graph;i.eachEdge(function(l){this._setEdgeFade(l.dataIndex,t)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,i){this.viewGL.setViewport(0,0,i.getWidth(),i.getHeight(),i.getDevicePixelRatio());for(var l=this.viewGL.camera,f=t.getData(),h=f.getLayout("points"),p=ef.create(Infinity,Infinity),y=ef.create(-Infinity,-Infinity),_=[],S=0;S<h.length;)_[0]=h[S++],_[1]=h[S++],ef.min(p,p,_),ef.max(y,y,_);var P=(y[1]+p[1])/2,j=(y[0]+p[0])/2;if(!(j>l.left&&j<l.right&&P<l.bottom&&P>l.top)){var tt=Math.max(y[0]-p[0],10),_t=tt/i.getWidth()*i.getHeight();tt*=1.4,_t*=1.4,p[0]-=tt*.2,l.left=p[0],l.top=P-_t/2,l.bottom=P+_t/2,l.right=tt+p[0],l.near=0,l.far=100}},dispose:function(){var t=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(t),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function rf(t){return t instanceof Array||(t=[t,t]),t}function Cm(t){t.registerChartView(Em),t.registerSeriesModel(ud),t.registerVisual(function(l){const f={};l.eachSeriesByType("graphGL",function(h){var p=h.getCategoriesData(),y=h.getData(),_={};p.each(function(S){var P=p.getName(S);_["ec-"+P]=S;var j=p.getItemModel(S),tt=j.getModel("itemStyle").getItemStyle();tt.fill||(tt.fill=h.getColorFromPalette(P,f)),p.setItemVisual(S,"style",tt);var _t=["symbol","symbolSize","symbolKeepAspect"];for(let Et=0;Et<_t.length;Et++){var xt=j.getShallow(_t[Et],!0);xt!=null&&p.setItemVisual(S,_t[Et],xt)}}),p.count()&&y.each(function(S){var P=y.getItemModel(S);let j=P.getShallow("category");if(j!=null){typeof j=="string"&&(j=_["ec-"+j]);var tt=p.getItemVisual(j,"style"),_t=y.ensureUniqueItemVisual(S,"style");B.x.extend(_t,tt);var xt=["symbol","symbolSize","symbolKeepAspect"];for(let Et=0;Et<xt.length;Et++)y.setItemVisual(S,xt[Et],p.getItemVisual(j,xt[Et]))}})})}),t.registerVisual(function(l){l.eachSeriesByType("graphGL",function(f){var h=f.getGraph(),p=f.getEdgeData(),y=rf(f.get("edgeSymbol")),_=rf(f.get("edgeSymbolSize"));p.setVisual("drawType","stroke"),p.setVisual("fromSymbol",y&&y[0]),p.setVisual("toSymbol",y&&y[1]),p.setVisual("fromSymbolSize",_&&_[0]),p.setVisual("toSymbolSize",_&&_[1]),p.setVisual("style",f.getModel("lineStyle").getLineStyle()),p.each(function(S){var P=p.getItemModel(S),j=h.getEdgeByIndex(S),tt=rf(P.getShallow("symbol",!0)),_t=rf(P.getShallow("symbolSize",!0)),xt=P.getModel("lineStyle").getLineStyle(),Et=p.ensureUniqueItemVisual(S,"style");switch(B.x.extend(Et,xt),Et.stroke){case"source":{var Pt=j.node1.getVisual("style");Et.stroke=Pt&&Pt.fill;break}case"target":{var Pt=j.node2.getVisual("style");Et.stroke=Pt&&Pt.fill;break}}tt[0]&&j.setVisual("fromSymbol",tt[0]),tt[1]&&j.setVisual("toSymbol",tt[1]),_t[0]&&j.setVisual("fromSymbolSize",_t[0]),_t[1]&&j.setVisual("toSymbolSize",_t[1])})})}),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(l,f){f.eachComponent({mainType:"series",query:l},function(h){h.setView(l)})});function i(){}t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},i),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},i),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},i),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},i)}Object(B.w)(Cm);var Pm=B.g.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,i){var l=this.get("coordinateSystem"),f=l==="geo"?["lng","lat"]:B.j(l)||["x","y"];f.push("vx","vy");var h=B.m.createDimensions(this.getSource(),{coordDimensions:f,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),p=new B.e(h,this);return p.initData(this.getSource()),p},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}}),wm=tn.extend(function(){return{dynamic:!0,attributes:{position:new tn.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var i=this.attributes,l=4*t,f=2*t;this.vertexCount!==l&&i.position.init(l),this.triangleCount!==f&&(f===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(f*3):new Uint16Array(f*3))},addLine:function(t){var i=this._vertexOffset;this.attributes.position.set(i,[t[0],t[1],1]),this.attributes.position.set(i+1,[t[0],t[1],-1]),this.attributes.position.set(i+2,[t[0],t[1],2]),this.attributes.position.set(i+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[i,i+1,i+2]),this.setTriangleIndices(this._faceOffset++,[i+1,i+2,i+3]),this._vertexOffset+=4}}),Lm=wm,Im=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;pr.import(Im);function pd(t){var i=document.createElement("canvas");i.width=i.height=t;var l=i.getContext("2d");return l.fillStyle="#fff",l.arc(t/2,t/2,t/2,0,Math.PI*2),l.fill(),i}var kc=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Xr({type:Er.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};kc.prototype={constructor:kc,init:function(){var t={type:Er.FLOAT,minFilter:Er.NEAREST,magFilter:Er.NEAREST,useMipmap:!1};this._spawnTexture=new Xr(t),this._particleTexture0=new Xr(t),this._particleTexture1=new Xr(t),this._frameBuffer=new Wn({depthBuffer:!1}),this._particlePass=new ni({fragment:pr.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new ni({fragment:pr.source("clay.compositor.downsample")});var i=new ga({renderOrder:10,material:new Fe({shader:new pr(pr.source("ecgl.vfParticle.renderPoints.vertex"),pr.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:ga.POINTS,geometry:new tn({dynamic:!0,mainAttribute:"texcoord0"})}),l=new ga({renderOrder:10,material:new Fe({shader:new pr(pr.source("ecgl.vfParticle.renderLines.vertex"),pr.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new Lm,culling:!1}),f=new ga({material:new Fe({shader:new pr(pr.source("ecgl.color.vertex"),pr.source("ecgl.color.fragment"))}),geometry:new _a});f.material.enableTexture("diffuseMap"),this._particlePointsMesh=i,this._particleLinesMesh=l,this._lastFrameFullQuadMesh=f,this._camera=new Fs,this._thisFrameTexture=new Xr,this._lastFrameTexture=new Xr},setParticleDensity:function(t,i){for(var l=t*i,f=new Float32Array(l*4),h=0,p=this.particleLife,y=0;y<t;y++)for(var _=0;_<i;_++,h++){f[h*4]=Math.random(),f[h*4+1]=Math.random(),f[h*4+2]=Math.random();var S=(p[1]-p[0])*Math.random()+p[0];f[h*4+3]=S}this._particleType==="line"?this._setLineGeometry(t,i):this._setPointsGeometry(t,i),this._spawnTexture.width=t,this._spawnTexture.height=i,this._spawnTexture.pixels=f,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=i,this._particlePass.setUniform("textureSize",[t,i])},_setPointsGeometry:function(t,i){var l=t*i,f=this._particlePointsMesh.geometry,h=f.attributes;h.texcoord0.init(l);for(var p=0,y=0;y<t;y++)for(var _=0;_<i;_++,p++)h.texcoord0.value[p*2]=y/t,h.texcoord0.value[p*2+1]=_/i;f.dirty()},_setLineGeometry:function(t,i){var l=t*i,f=this._getParticleMesh().geometry;f.setLineCount(l),f.resetOffset();for(var h=0;h<t;h++)for(var p=0;p<i;p++)f.addLine([h/t,p/i]);f.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(t,i,l,f){var h=this._getParticleMesh(),p=this._frameBuffer,y=this._particlePass;f&&this._updateDownsampleTextures(t,i),h.material.set("size",this._particleSize*this._supersampling),h.material.set("color",this.particleColor),y.setUniform("speedScaling",this.particleSpeedScaling),p.attach(this._particleTexture1),y.setUniform("firstFrameTime",f?(this.particleLife[1]+this.particleLife[0])/2:0),y.setUniform("particleTexture",this._particleTexture0),y.setUniform("deltaTime",l),y.setUniform("elapsedTime",this._elapsedTime),y.render(t,p),h.material.set("particleTexture",this._particleTexture1),h.material.set("prevParticleTexture",this._particleTexture0),p.attach(this._thisFrameTexture),p.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var _=this._lastFrameFullQuadMesh;_.material.set("diffuseMap",this._lastFrameTexture),_.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([_,h],this._camera),p.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=l},_downsample:function(t){var i=this._downsampleTextures;if(i.length!==0)for(var l=0,f=this._thisFrameTexture,h=i[l];h;)this._frameBuffer.attach(h),this._downsamplePass.setUniform("texture",f),this._downsamplePass.setUniform("textureSize",[f.width,f.height]),this._downsamplePass.render(t,this._frameBuffer),f=h,h=i[++l]},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,i){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=i*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=i*this._supersampling,this._width=t,this._height=i},setParticleSize:function(t){var i=this._getParticleMesh();if(t<=2){i.material.disableTexture("spriteTexture"),i.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Xr),(!this._spriteTexture.image||this._spriteTexture.image.width!==t)&&(this._spriteTexture.image=pd(t),this._spriteTexture.dirty()),i.material.transparent=!0,i.material.enableTexture("spriteTexture"),i.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var i=this._getParticleMesh().material;i[t?"enableTexture":"disableTexture"]("gradientTexture"),i.setUniform("gradientTexture",t)},setColorTextureImage:function(t,i){var l=this._getParticleMesh().material;l.setTextureImage("colorTexture",t,i,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var i=this._frameBuffer;i.attach(this._lastFrameTexture),i.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),i.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,i){for(var l=this._downsampleTextures,f=Math.max(Math.floor(Math.log(this._supersampling/i.getDevicePixelRatio())/Math.log(2)),0),h=2,p=this._width*this._supersampling,y=this._height*this._supersampling,_=0;_<f;_++)l[_]=l[_]||new Xr,l[_].width=p/h,l[_].height=y/h,h*=2;for(;_<l.length;_++)l[_].dispose(t);l.length=f},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t;var t=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach(function(i){i.dispose(t)})}};var Rm=kc,Nm=B.b.extend({type:"flowGL",__ecgl__:!0,init:function(t,i){this.viewGL=new Oa("orthographic"),this.groupGL=new ae.Node,this.viewGL.add(this.groupGL),this._particleSurface=new Rm;var l=new ae.Mesh({geometry:new ae.PlaneGeometry,material:new ae.Material({shader:new ae.Shader({vertex:ae.Shader.source("ecgl.color.vertex"),fragment:ae.Shader.source("ecgl.color.fragment")}),transparent:!0})});l.material.enableTexture("diffuseMap"),this.groupGL.add(l),this._planeMesh=l},render:function(t,i,l){var f=this._particleSurface;f.setParticleType(t.get("particleType")),f.setSupersampling(t.get("supersampling")),this._updateData(t,l),this._updateCamera(l.getWidth(),l.getHeight(),l.getDevicePixelRatio());var h=Zr.firstNotNull(t.get("particleDensity"),128);f.setParticleDensity(h,h);var p=this._planeMesh,y=+new Date,_=this,S=!0;p.__percent=0,p.stopAnimation(),p.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var tt=+new Date,_t=Math.min(tt-y,20);y=y+_t,_._renderer&&(f.update(_._renderer,l,_t/1e3,S),p.material.set("diffuseMap",f.getSurfaceTexture())),S=!1}).start();var P=t.getModel("itemStyle"),j=ae.parseColor(P.get("color"));j[3]*=Zr.firstNotNull(P.get("opacity"),1),p.material.set("color",j),f.setColorTextureImage(t.get("colorTexture"),l),f.setParticleSize(t.get("particleSize")),f.particleSpeedScaling=t.get("particleSpeed"),f.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,i,l){this._updateData(t,l)},afterRender:function(t,i,l,f){var h=f.renderer;this._renderer=h},_updateData:function(t,i){var l=t.coordinateSystem,f=l.dimensions.map(function(ee){return t.coordDimToDataDim(ee)[0]}),h=t.getData(),p=h.getDataExtent(f[0]),y=h.getDataExtent(f[1]),_=t.get("gridWidth"),S=t.get("gridHeight");if(_==null||_==="auto"){var P=(p[1]-p[0])/(y[1]-y[0]);_=Math.round(Math.sqrt(P*h.count()))}(S==null||S==="auto")&&(S=Math.ceil(h.count()/_));var j=this._particleSurface.vectorFieldTexture,tt=j.pixels;if(!tt||tt.length!==S*_*4)tt=j.pixels=new Float32Array(_*S*4);else for(var _t=0;_t<tt.length;_t++)tt[_t]=0;var xt=0,Et=Infinity,Pt=new Float32Array(h.count()*2),Vt=0,kt=[[Infinity,Infinity],[-Infinity,-Infinity]];h.each([f[0],f[1],"vx","vy"],function(ee,Jt,$t,ce){var de=l.dataToPoint([ee,Jt]);Pt[Vt++]=de[0],Pt[Vt++]=de[1],kt[0][0]=Math.min(de[0],kt[0][0]),kt[0][1]=Math.min(de[1],kt[0][1]),kt[1][0]=Math.max(de[0],kt[1][0]),kt[1][1]=Math.max(de[1],kt[1][1]);var we=Math.sqrt($t*$t+ce*ce);xt=Math.max(xt,we),Et=Math.min(Et,we)}),h.each(["vx","vy"],function(ee,Jt,$t){var ce=Math.round((Pt[$t*2]-kt[0][0])/(kt[1][0]-kt[0][0])*(_-1)),de=S-1-Math.round((Pt[$t*2+1]-kt[0][1])/(kt[1][1]-kt[0][1])*(S-1)),we=(de*_+ce)*4;tt[we]=ee/xt*.5+.5,tt[we+1]=Jt/xt*.5+.5,tt[we+3]=1}),j.width=_,j.height=S,t.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(j),j.dirty(),this._updatePlanePosition(kt[0],kt[1],t,i),this._updateGradientTexture(h.getVisual("visualMeta"),[Et,xt])},_fillEmptyPixels:function(t){var i=t.pixels,l=t.width,f=t.height;function h(Pt,Vt,kt){Pt=Math.max(Math.min(Pt,l-1),0),Vt=Math.max(Math.min(Vt,f-1),0);var ee=(Vt*(l-1)+Pt)*4;return i[ee+3]===0?!1:(kt[0]=i[ee],kt[1]=i[ee+1],!0)}function p(Pt,Vt,kt){kt[0]=Pt[0]+Vt[0],kt[1]=Pt[1]+Vt[1]}for(var y=[],_=[],S=[],P=[],j=[],tt=0,_t=0;_t<f;_t++)for(var xt=0;xt<l;xt++){var Et=(_t*(l-1)+xt)*4;i[Et+3]===0&&(tt=y[0]=y[1]=0,h(xt-1,_t,_)&&(tt++,p(_,y,y)),h(xt+1,_t,S)&&(tt++,p(S,y,y)),h(xt,_t-1,P)&&(tt++,p(P,y,y)),h(xt,_t+1,j)&&(tt++,p(j,y,y)),y[0]/=tt,y[1]/=tt,i[Et]=y[0],i[Et+1]=y[1]),i[Et+3]=1}},_updateGradientTexture:function(t,i){if(!t||!t.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new ae.Texture2D({image:document.createElement("canvas")});var l=this._gradientTexture,f=l.image;f.width=200,f.height=1;var h=f.getContext("2d"),p=h.createLinearGradient(0,.5,f.width,.5);t[0].stops.forEach(function(y){var _;i[1]===i[0]?_=0:(_=y.value/i[1],_=Math.min(Math.max(_,0),1)),p.addColorStop(_,y.color)}),h.fillStyle=p,h.fillRect(0,0,f.width,f.height),l.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(t,i,l,f){var h=this._limitInViewportAndFullFill(t,i,l,f);t=h.leftTop,i=h.rightBottom,this._particleSurface.setRegion(h.region),this._planeMesh.position.set((t[0]+i[0])/2,f.getHeight()-(t[1]+i[1])/2,0);var p=i[0]-t[0],y=i[1]-t[1];this._planeMesh.scale.set(p/2,y/2,1),this._particleSurface.resize(Math.max(Math.min(p,2048),1),Math.max(Math.min(y,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,i,l,f){var h=[Math.max(t[0],0),Math.max(t[1],0)],p=[Math.min(i[0],f.getWidth()),Math.min(i[1],f.getHeight())];if(l.get("coordinateSystem")==="bmap"){var y=l.getData().getDataExtent(l.coordDimToDataDim("lng")[0]),_=Math.floor(y[1]-y[0])>=359;_&&(h[0]>0&&(h[0]=0),p[0]<f.getWidth()&&(p[0]=f.getWidth()))}var S=i[0]-t[0],P=i[1]-t[1],j=p[0]-h[0],tt=p[1]-h[1],_t=[(h[0]-t[0])/S,1-tt/P-(h[1]-t[1])/P,j/S,tt/P];return{leftTop:h,rightBottom:p,region:_t}},_updateCamera:function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.bottom=0,f.top=i,f.right=t,f.near=0,f.far=100,f.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function jm(t){t.registerChartView(Nm),t.registerSeriesModel(Pm)}Object(B.w)(jm);var gd=b("bPXU"),Xc=B.g.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),Xc.superApply(this,"init",arguments)},mergeOption:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),Xc.superApply(this,"mergeOption",arguments)},appendData:function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=Object(gd.e)(this._flatCoords,i.flatCoords),this._flatCoordsOffset=Object(gd.e)(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var i=this.getData().getItemModel(t),l=i.option instanceof Array?i.option:i.getShallow("coords");return l},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,i){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[t*2],f=this._flatCoordsOffset[t*2+1],h=0;h<f;h++)i[h]=i[h]||[],i[h][0]=this._flatCoords[l+h*2],i[h][1]=this._flatCoords[l+h*2+1];return f}else{for(var p=this._getCoordsFromItemModel(t),h=0;h<p.length;h++)i[h]=i[h]||[],i[h][0]=p[h][0],i[h][1]=p[h][1];return p.length}},_processFlatCoordsArray:function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),typeof t[0]=="number"){for(var l=t.length,f=new Uint32Array(l),h=new Float64Array(l),p=0,y=0,_=0,S=0;S<l;){_++;var P=t[S++];f[y++]=p+i,f[y++]=P;for(var j=0;j<P;j++){var tt=t[S++],_t=t[S++];h[p++]=tt,h[p++]=_t,S>l}}return{flatCoordsOffset:new Uint32Array(f.buffer,0,y),flatCoords:h,count:_}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,i){var l=new B.e(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,h,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var _=f.value;if(_!=null)return _ instanceof Array?_[y]:_}),l},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Bm=Xc,Fm=B.b.extend({type:"linesGL",__ecgl__:!0,init:function(t,i){this.groupGL=new ae.Node,this.viewGL=new Oa("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Ua(this.viewGL),this._nativeLinesShader=ae.createShader("ecgl.lines3D"),this._meshLinesShader=ae.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l);var f=this._linesMeshes[0];f||(f=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(f),this._updateLinesMesh(t,f,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){var h=this._linesMeshes[this._currentStep];h||(h=this._createLinesMesh(i),this._linesMeshes[this._currentStep]=h),this._updateLinesMesh(i,h,t.start,t.end),this.groupGL.add(h),f.getZr().refresh(),this._currentStep++},updateTransform:function(t,i,l){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,l)},_createLinesMesh:function(t){var i=new ae.Mesh({$ignorePicking:!0,material:new ae.Material({shader:ae.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new qu({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:ae.Mesh.LINES,culling:!1});return i},_updateLinesMesh:function(t,i,l,f){var h=t.getData();i.material.blend=t.get("blendMode")==="lighter"?ae.additiveBlend:null;var p=t.get("lineStyle.curveness")||0,y=t.get("polyline"),_=i.geometry,S=t.coordinateSystem,P=Zr.firstNotNull(t.get("lineStyle.width"),1);P>1?(i.material.shader!==this._meshLinesShader&&i.material.attachShader(this._meshLinesShader),i.mode=ae.Mesh.TRIANGLES):(i.material.shader!==this._nativeLinesShader&&i.material.attachShader(this._nativeLinesShader),i.mode=ae.Mesh.LINES),l=l||0,f=f||h.count(),_.resetOffset();var j=0,tt=0,_t=[],xt=[],Et=[],Pt=[],Vt=[],kt=.3,ee=.7;function Jt(){xt[0]=_t[0]*ee+Pt[0]*kt-(_t[1]-Pt[1])*p,xt[1]=_t[1]*ee+Pt[1]*kt-(Pt[0]-_t[0])*p,Et[0]=_t[0]*kt+Pt[0]*ee-(_t[1]-Pt[1])*p,Et[1]=_t[1]*kt+Pt[1]*ee-(Pt[0]-_t[0])*p}if(y||p!==0)for(var $t=l;$t<f;$t++)if(y){var ce=t.getLineCoordsCount($t);j+=_.getPolylineVertexCount(ce),tt+=_.getPolylineTriangleCount(ce)}else t.getLineCoords($t,Vt),this._glViewHelper.dataToPoint(S,Vt[0],_t),this._glViewHelper.dataToPoint(S,Vt[1],Pt),Jt(),j+=_.getCubicCurveVertexCount(_t,xt,Et,Pt),tt+=_.getCubicCurveTriangleCount(_t,xt,Et,Pt);else{var de=f-l;j+=de*_.getLineVertexCount(),tt+=de*_.getLineVertexCount()}_.setVertexCount(j),_.setTriangleCount(tt);for(var we=l,Ae=[],$t=l;$t<f;$t++){ae.parseColor(ci(h,we),Ae);var Ge=Zr.firstNotNull(gi(h,we),1);Ae[3]*=Ge;for(var ce=t.getLineCoords($t,Vt),rr=0;rr<ce;rr++)this._glViewHelper.dataToPoint(S,Vt[rr],Vt[rr]);y?_.addPolyline(Vt,Ae,P,0,ce):p!==0?(_t=Vt[0],Pt=Vt[1],Jt(),_.addCubicCurve(_t,xt,Et,Pt,Ae,P)):_.addPolyline(Vt,Ae,P,0,2),we++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function zm(t){t.registerChartView(Fm),t.registerSeriesModel(Bm)}Object(B.w)(zm)},ZlUk:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft}),b.d(nt,"g",function(){return gt}),b.d(nt,"c",function(){return lt}),b.d(nt,"d",function(){return z}),b.d(nt,"f",function(){return X}),b.d(nt,"e",function(){return J}),b.d(nt,"b",function(){return at});var B=b("ZXNb"),bt=b("bPXU"),k=b("BkaA"),ft={Must:1,Might:2,Not:3},ot=Object(B.o)();function gt(Z){ot(Z).datasetMap=Object(bt.f)()}function lt(Z,W,ht){var q={},g=X(W);if(!g||!Z)return q;var et=[],$=[],N=W.ecModel,Y=ot(N).datasetMap,K=g.uid+"_"+ht.seriesLayoutBy,V,G;Z=Z.slice(),Object(bt.k)(Z,function(E,O){var M=Object(bt.A)(E)?E:Z[O]={name:E};M.type==="ordinal"&&V==null&&(V=O,G=C(M)),q[M.name]=[]});var I=Y.get(K)||Y.set(K,{categoryWayDim:G,valueWayDim:0});Object(bt.k)(Z,function(E,O){var M=E.name,L=C(E);if(V==null){var H=I.valueWayDim;A(q[M],H,L),A($,H,L),I.valueWayDim+=L}else if(V===O)A(q[M],0,L),A(et,0,L);else{var H=I.categoryWayDim;A(q[M],H,L),A($,H,L),I.categoryWayDim+=L}});function A(E,O,M){for(var L=0;L<M;L++)E.push(O+L)}function C(E){var O=E.dimsDef;return O?O.length:1}return et.length&&(q.itemName=et),$.length&&(q.seriesName=$),q}function z(Z,W,ht){var q={},g=X(Z);if(!g)return q;var et=W.sourceFormat,$=W.dimensionsDefine,N;(et===k.e||et===k.d)&&Object(bt.k)($,function(V,G){(Object(bt.A)(V)?V.name:V)==="name"&&(N=G)});var Y=function(){for(var V={},G={},I=[],A=0,C=Math.min(5,ht);A<C;A++){var E=F(W.data,et,W.seriesLayoutBy,$,W.startIndex,A);I.push(E);var O=E===ft.Not;if(O&&V.v==null&&A!==N&&(V.v=A),(V.n==null||V.n===V.v||!O&&I[V.n]===ft.Not)&&(V.n=A),M(V)&&I[V.n]!==ft.Not)return V;O||(E===ft.Might&&G.v==null&&A!==N&&(G.v=A),(G.n==null||G.n===G.v)&&(G.n=A))}function M(L){return L.v!=null&&L.n!=null}return M(V)?V:M(G)?G:null}();if(Y){q.value=[Y.v];var K=N!=null?N:Y.n;q.itemName=[K],q.seriesName=[K]}return q}function X(Z){var W=Z.get("data",!0);if(!W)return Object(B.v)(Z.ecModel,"dataset",{index:Z.get("datasetIndex",!0),id:Z.get("datasetId",!0)},B.b).models[0]}function J(Z){return!Z.get("transform",!0)&&!Z.get("fromTransformResult",!0)?[]:Object(B.v)(Z.ecModel,"dataset",{index:Z.get("fromDatasetIndex",!0),id:Z.get("fromDatasetId",!0)},B.b).models}function at(Z,W){return F(Z.data,Z.sourceFormat,Z.seriesLayoutBy,Z.dimensionsDefine,Z.startIndex,W)}function F(Z,W,ht,q,g,et){var $,N=5;if(Object(bt.E)(Z))return ft.Not;var Y,K;if(q){var V=q[et];Object(bt.A)(V)?(Y=V.name,K=V.type):Object(bt.C)(V)&&(Y=V)}if(K!=null)return K==="ordinal"?ft.Must:ft.Not;if(W===k.c){var G=Z;if(ht===k.b){for(var I=G[et],A=0;A<(I||[]).length&&A<N;A++)if(($=U(I[g+A]))!=null)return $}else for(var A=0;A<G.length&&A<N;A++){var C=G[g+A];if(C&&($=U(C[et]))!=null)return $}}else if(W===k.e){var E=Z;if(!Y)return ft.Not;for(var A=0;A<E.length&&A<N;A++){var O=E[A];if(O&&($=U(O[Y]))!=null)return $}}else if(W===k.d){var M=Z;if(!Y)return ft.Not;var I=M[Y];if(!I||Object(bt.E)(I))return ft.Not;for(var A=0;A<I.length&&A<N;A++)if(($=U(I[A]))!=null)return $}else if(W===k.f)for(var L=Z,A=0;A<L.length&&A<N;A++){var O=L[A],H=Object(B.h)(O);if(!Object(bt.t)(H))return ft.Not;if(($=U(H[et]))!=null)return $}function U(ct){var st=Object(bt.C)(ct);if(ct!=null&&isFinite(ct)&&ct!=="")return st?ft.Might:ft.Not;if(st&&ct!=="-")return ft.Must}return ft.Not}},a58V:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt}),b.d(nt,"b",function(){return ft});var B=b("o7EO"),bt=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],k=Object(B.a)(bt),ft=function(){function ot(){}return ot.prototype.getItemStyle=function(gt,lt){return k(this,gt,lt)},ot}()},aFB9:function(je,nt,b){"use strict";b.d(nt,"a",function(){return B});var B=function(){function bt(){}return bt.prototype.getNeedCrossZero=function(){var k=this.option;return!k.scale},bt.prototype.getCoordSysModel=function(){},bt}()},alXq:function(je,nt,b){"use strict";b.d(nt,"b",function(){return k}),b.d(nt,"c",function(){return ot}),b.d(nt,"d",function(){return gt}),b.d(nt,"a",function(){return lt});var B=b("zhsV"),bt=b("uSNo");function k(z){for(var X=[],J=0;J<z.length;J++){var at=z[J];if(!at.defaultAttr.ignore){var F=at.label,Z=F.getComputedTransform(),W=F.getBoundingRect(),ht=!Z||Z[1]<1e-5&&Z[2]<1e-5,q=F.style.margin||0,g=W.clone();g.applyTransform(Z),g.x-=q/2,g.y-=q/2,g.width+=q,g.height+=q;var et=ht?new B.a(W,Z):null;X.push({label:F,labelLine:at.labelLine,rect:g,localRect:W,obb:et,priority:at.priority,defaultAttr:at.defaultAttr,layoutOption:at.computedLayoutOption,axisAligned:ht,transform:Z})}}return X}function ft(z,X,J,at,F,Z){var W=z.length;if(W<2)return;z.sort(function(U,ct){return U.rect[X]-ct.rect[X]});for(var ht=0,q,g=!1,et=[],$=0,N=0;N<W;N++){var Y=z[N],K=Y.rect;q=K[X]-ht,q<0&&(K[X]-=q,Y.label[X]-=q,g=!0);var V=Math.max(-q,0);et.push(V),$+=V,ht=K[X]+K[J]}$>0&&Z&&M(-$/W,0,W);var G=z[0],I=z[W-1],A,C;E(),A<0&&L(-A,.8),C<0&&L(C,.8),E(),O(A,C,1),O(C,A,-1),E(),A<0&&H(-A),C<0&&H(C);function E(){A=G.rect[X]-at,C=F-I.rect[X]-I.rect[J]}function O(U,ct,st){if(U<0){var vt=Math.min(ct,-U);if(vt>0){M(vt*st,0,W);var it=vt+U;it<0&&L(-it*st,1)}else L(-U*st,1)}}function M(U,ct,st){U!==0&&(g=!0);for(var vt=ct;vt<st;vt++){var it=z[vt],dt=it.rect;dt[X]+=U,it.label[X]+=U}}function L(U,ct){for(var st=[],vt=0,it=1;it<W;it++){var dt=z[it-1].rect,St=Math.max(z[it].rect[X]-dt[X]-dt[J],0);st.push(St),vt+=St}if(!!vt){var ut=Math.min(Math.abs(U)/vt,ct);if(U>0)for(var it=0;it<W-1;it++){var yt=st[it]*ut;M(yt,0,it+1)}else for(var it=W-1;it>0;it--){var yt=st[it-1]*ut;M(-yt,it,W)}}}function H(U){var ct=U<0?-1:1;U=Math.abs(U);for(var st=Math.ceil(U/(W-1)),vt=0;vt<W-1;vt++)if(ct>0?M(st,0,vt+1):M(-st,W-vt-1,W),U-=st,U<=0)return}return g}function ot(z,X,J,at){return ft(z,"x","width",X,J,at)}function gt(z,X,J,at){return ft(z,"y","height",X,J,at)}function lt(z){var X=[];z.sort(function(V,G){return G.priority-V.priority});var J=new bt.a(0,0,0,0);function at(V){if(!V.ignore){var G=V.ensureState("emphasis");G.ignore==null&&(G.ignore=!1)}V.ignore=!0}for(var F=0;F<z.length;F++){var Z=z[F],W=Z.axisAligned,ht=Z.localRect,q=Z.transform,g=Z.label,et=Z.labelLine;J.copy(Z.rect),J.width-=.1,J.height-=.1,J.x+=.05,J.y+=.05;for(var $=Z.obb,N=!1,Y=0;Y<X.length;Y++){var K=X[Y];if(!!J.intersect(K.rect)){if(W&&K.axisAligned){N=!0;break}if(K.obb||(K.obb=new B.a(K.localRect,K.transform)),$||($=new B.a(ht,q)),$.intersect(K.obb)){N=!0;break}}}N?(at(g),et&&at(et)):(g.attr("ignore",Z.defaultAttr.ignore),et&&et.attr("ignore",Z.defaultAttr.labelGuideIgnore),X.push(Z))}}},avHQ:function(je,nt,b){"use strict";b.d(nt,"a",function(){return k});var B=b("bPXU");function bt(ft,ot){return!ft||ft==="solid"||!(ot>0)?null:ft==="dashed"?[4*ot,2*ot]:ft==="dotted"?[ot]:Object(B.z)(ft)?[ft]:Object(B.t)(ft)?ft:null}function k(ft){var ot=ft.style,gt=ot.lineDash&&ot.lineWidth>0&&bt(ot.lineDash,ot.lineWidth),lt=ot.lineDashOffset;if(gt){var z=ot.strokeNoScale&&ft.getLineScale?ft.getLineScale():1;z&&z!==1&&(gt=Object(B.H)(gt,function(X){return X/z}),lt/=z)}return[gt,lt]}},bPXU:function(je,nt,b){"use strict";b.d(nt,"p",function(){return W}),b.d(nt,"G",function(){return ht}),b.d(nt,"d",function(){return q}),b.d(nt,"I",function(){return g}),b.d(nt,"J",function(){return et}),b.d(nt,"m",function(){return $}),b.d(nt,"i",function(){return N}),b.d(nt,"r",function(){return K}),b.d(nt,"s",function(){return V}),b.d(nt,"K",function(){return G}),b.d(nt,"u",function(){return I}),b.d(nt,"k",function(){return A}),b.d(nt,"H",function(){return C}),b.d(nt,"N",function(){return E}),b.d(nt,"n",function(){return O}),b.d(nt,"o",function(){return M}),b.d(nt,"F",function(){return L}),b.d(nt,"c",function(){return U}),b.d(nt,"h",function(){return ct}),b.d(nt,"t",function(){return st}),b.d(nt,"w",function(){return vt}),b.d(nt,"C",function(){return it}),b.d(nt,"D",function(){return dt}),b.d(nt,"z",function(){return St}),b.d(nt,"A",function(){return ut}),b.d(nt,"E",function(){return Ot}),b.d(nt,"v",function(){return At}),b.d(nt,"x",function(){return It}),b.d(nt,"y",function(){return Ct}),b.d(nt,"B",function(){return Ft}),b.d(nt,"l",function(){return zt}),b.d(nt,"O",function(){return Xt}),b.d(nt,"P",function(){return ie}),b.d(nt,"Q",function(){return oe}),b.d(nt,"S",function(){return he}),b.d(nt,"M",function(){return be}),b.d(nt,"b",function(){return Ce}),b.d(nt,"T",function(){return Fe}),b.d(nt,"R",function(){return Tt}),b.d(nt,"f",function(){return se}),b.d(nt,"e",function(){return ge}),b.d(nt,"g",function(){return He}),b.d(nt,"j",function(){return Me}),b.d(nt,"q",function(){return We}),b.d(nt,"L",function(){return Ke}),b.d(nt,"a",function(){return qe});var B=b("baNC"),bt=E(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(Qt,Se){return Qt["[object "+Se+"]"]=!0,Qt},{}),k=E(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(Qt,Se){return Qt["[object "+Se+"Array]"]=!0,Qt},{}),ft=Object.prototype.toString,ot=Array.prototype,gt=ot.forEach,lt=ot.filter,z=ot.slice,X=ot.map,J=function(){}.constructor,at=J?J.prototype:null,F="__proto__",Z=2311;function W(){return Z++}function ht(){for(var Qt=[],Se=0;Se<arguments.length;Se++)Qt[Se]=arguments[Se];typeof console!="undefined"&&console.error.apply(console,Qt)}function q(Qt){if(Qt==null||typeof Qt!="object")return Qt;var Se=Qt,Ve=ft.call(Qt);if(Ve==="[object Array]"){if(!Mt(Qt)){Se=[];for(var Ie=0,Zt=Qt.length;Ie<Zt;Ie++)Se[Ie]=q(Qt[Ie])}}else if(k[Ve]){if(!Mt(Qt)){var qt=Qt.constructor;if(qt.from)Se=qt.from(Qt);else{Se=new qt(Qt.length);for(var Ie=0,Zt=Qt.length;Ie<Zt;Ie++)Se[Ie]=Qt[Ie]}}}else if(!bt[Ve]&&!Mt(Qt)&&!At(Qt)){Se={};for(var le in Qt)Qt.hasOwnProperty(le)&&le!==F&&(Se[le]=q(Qt[le]))}return Se}function g(Qt,Se,Ve){if(!ut(Se)||!ut(Qt))return Ve?q(Se):Qt;for(var Ie in Se)if(Se.hasOwnProperty(Ie)&&Ie!==F){var Zt=Qt[Ie],qt=Se[Ie];ut(qt)&&ut(Zt)&&!st(qt)&&!st(Zt)&&!At(qt)&&!At(Zt)&&!yt(qt)&&!yt(Zt)&&!Mt(qt)&&!Mt(Zt)?g(Zt,qt,Ve):(Ve||!(Ie in Qt))&&(Qt[Ie]=q(Se[Ie]))}return Qt}function et(Qt,Se){for(var Ve=Qt[0],Ie=1,Zt=Qt.length;Ie<Zt;Ie++)Ve=g(Ve,Qt[Ie],Se);return Ve}function $(Qt,Se){if(Object.assign)Object.assign(Qt,Se);else for(var Ve in Se)Se.hasOwnProperty(Ve)&&Ve!==F&&(Qt[Ve]=Se[Ve]);return Qt}function N(Qt,Se,Ve){for(var Ie=L(Se),Zt=0;Zt<Ie.length;Zt++){var qt=Ie[Zt];(Ve?Se[qt]!=null:Qt[qt]==null)&&(Qt[qt]=Se[qt])}return Qt}var Y=B.d.createCanvas;function K(Qt,Se){if(Qt){if(Qt.indexOf)return Qt.indexOf(Se);for(var Ve=0,Ie=Qt.length;Ve<Ie;Ve++)if(Qt[Ve]===Se)return Ve}return-1}function V(Qt,Se){var Ve=Qt.prototype;function Ie(){}Ie.prototype=Se.prototype,Qt.prototype=new Ie;for(var Zt in Ve)Ve.hasOwnProperty(Zt)&&(Qt.prototype[Zt]=Ve[Zt]);Qt.prototype.constructor=Qt,Qt.superClass=Se}function G(Qt,Se,Ve){if(Qt="prototype"in Qt?Qt.prototype:Qt,Se="prototype"in Se?Se.prototype:Se,Object.getOwnPropertyNames)for(var Ie=Object.getOwnPropertyNames(Se),Zt=0;Zt<Ie.length;Zt++){var qt=Ie[Zt];qt!=="constructor"&&(Ve?Se[qt]!=null:Qt[qt]==null)&&(Qt[qt]=Se[qt])}else N(Qt,Se,Ve)}function I(Qt){return!Qt||typeof Qt=="string"?!1:typeof Qt.length=="number"}function A(Qt,Se,Ve){if(!!(Qt&&Se))if(Qt.forEach&&Qt.forEach===gt)Qt.forEach(Se,Ve);else if(Qt.length===+Qt.length)for(var Ie=0,Zt=Qt.length;Ie<Zt;Ie++)Se.call(Ve,Qt[Ie],Ie,Qt);else for(var qt in Qt)Qt.hasOwnProperty(qt)&&Se.call(Ve,Qt[qt],qt,Qt)}function C(Qt,Se,Ve){if(!Qt)return[];if(!Se)return he(Qt);if(Qt.map&&Qt.map===X)return Qt.map(Se,Ve);for(var Ie=[],Zt=0,qt=Qt.length;Zt<qt;Zt++)Ie.push(Se.call(Ve,Qt[Zt],Zt,Qt));return Ie}function E(Qt,Se,Ve,Ie){if(!!(Qt&&Se)){for(var Zt=0,qt=Qt.length;Zt<qt;Zt++)Ve=Se.call(Ie,Ve,Qt[Zt],Zt,Qt);return Ve}}function O(Qt,Se,Ve){if(!Qt)return[];if(!Se)return he(Qt);if(Qt.filter&&Qt.filter===lt)return Qt.filter(Se,Ve);for(var Ie=[],Zt=0,qt=Qt.length;Zt<qt;Zt++)Se.call(Ve,Qt[Zt],Zt,Qt)&&Ie.push(Qt[Zt]);return Ie}function M(Qt,Se,Ve){if(!!(Qt&&Se)){for(var Ie=0,Zt=Qt.length;Ie<Zt;Ie++)if(Se.call(Ve,Qt[Ie],Ie,Qt))return Qt[Ie]}}function L(Qt){if(!Qt)return[];if(Object.keys)return Object.keys(Qt);var Se=[];for(var Ve in Qt)Qt.hasOwnProperty(Ve)&&Se.push(Ve);return Se}function H(Qt,Se){for(var Ve=[],Ie=2;Ie<arguments.length;Ie++)Ve[Ie-2]=arguments[Ie];return function(){return Qt.apply(Se,Ve.concat(z.call(arguments)))}}var U=at&&vt(at.bind)?at.call.bind(at.bind):H;function ct(Qt){for(var Se=[],Ve=1;Ve<arguments.length;Ve++)Se[Ve-1]=arguments[Ve];return function(){return Qt.apply(this,Se.concat(z.call(arguments)))}}function st(Qt){return Array.isArray?Array.isArray(Qt):ft.call(Qt)==="[object Array]"}function vt(Qt){return typeof Qt=="function"}function it(Qt){return typeof Qt=="string"}function dt(Qt){return ft.call(Qt)==="[object String]"}function St(Qt){return typeof Qt=="number"}function ut(Qt){var Se=typeof Qt;return Se==="function"||!!Qt&&Se==="object"}function yt(Qt){return!!bt[ft.call(Qt)]}function Ot(Qt){return!!k[ft.call(Qt)]}function At(Qt){return typeof Qt=="object"&&typeof Qt.nodeType=="number"&&typeof Qt.ownerDocument=="object"}function It(Qt){return Qt.colorStops!=null}function Ct(Qt){return Qt.image!=null}function Ft(Qt){return ft.call(Qt)==="[object RegExp]"}function zt(Qt){return Qt!==Qt}function Xt(){for(var Qt=[],Se=0;Se<arguments.length;Se++)Qt[Se]=arguments[Se];for(var Ve=0,Ie=Qt.length;Ve<Ie;Ve++)if(Qt[Ve]!=null)return Qt[Ve]}function ie(Qt,Se){return Qt!=null?Qt:Se}function oe(Qt,Se,Ve){return Qt!=null?Qt:Se!=null?Se:Ve}function he(Qt){for(var Se=[],Ve=1;Ve<arguments.length;Ve++)Se[Ve-1]=arguments[Ve];return z.apply(Qt,Se)}function be(Qt){if(typeof Qt=="number")return[Qt,Qt,Qt,Qt];var Se=Qt.length;return Se===2?[Qt[0],Qt[1],Qt[0],Qt[1]]:Se===3?[Qt[0],Qt[1],Qt[2],Qt[1]]:Qt}function Ce(Qt,Se){if(!Qt)throw new Error(Se)}function Fe(Qt){return Qt==null?null:typeof Qt.trim=="function"?Qt.trim():Qt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Bt="__ec_primitive__";function Tt(Qt){Qt[Bt]=!0}function Mt(Qt){return Qt[Bt]}var Ut=function(){function Qt(Se){this.data={};var Ve=st(Se);this.data={};var Ie=this;Se instanceof Qt?Se.each(Zt):Se&&A(Se,Zt);function Zt(qt,le){Ve?Ie.set(qt,le):Ie.set(le,qt)}}return Qt.prototype.get=function(Se){return this.data.hasOwnProperty(Se)?this.data[Se]:null},Qt.prototype.set=function(Se,Ve){return this.data[Se]=Ve},Qt.prototype.each=function(Se,Ve){for(var Ie in this.data)this.data.hasOwnProperty(Ie)&&Se.call(Ve,this.data[Ie],Ie)},Qt.prototype.keys=function(){return L(this.data)},Qt.prototype.removeKey=function(Se){delete this.data[Se]},Qt}();function se(Qt){return new Ut(Qt)}function ge(Qt,Se){for(var Ve=new Qt.constructor(Qt.length+Se.length),Ie=0;Ie<Qt.length;Ie++)Ve[Ie]=Qt[Ie];for(var Zt=Qt.length,Ie=0;Ie<Se.length;Ie++)Ve[Ie+Zt]=Se[Ie];return Ve}function He(Qt,Se){var Ve;if(Object.create)Ve=Object.create(Qt);else{var Ie=function(){};Ie.prototype=Qt,Ve=new Ie}return Se&&$(Ve,Se),Ve}function Me(Qt){var Se=Qt.style;Se.webkitUserSelect="none",Se.userSelect="none",Se.webkitTapHighlightColor="rgba(0,0,0,0)",Se["-webkit-touch-callout"]="none"}function We(Qt,Se){return Qt.hasOwnProperty(Se)}function Ke(){}var qe=180/Math.PI},bSX3:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("v+az"),k=b("uSNo"),ft=b("bPXU"),ot=Object(ft.i)({x:0,y:0},bt.b),gt={style:Object(ft.i)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},bt.a.style)};function lt(X){return!!(X&&typeof X!="string"&&X.width&&X.height)}var z=function(X){Object(B.a)(J,X);function J(){return X!==null&&X.apply(this,arguments)||this}return J.prototype.createStyle=function(at){return Object(ft.g)(ot,at)},J.prototype._getSize=function(at){var F=this.style,Z=F[at];if(Z!=null)return Z;var W=lt(F.image)?F.image:this.__image;if(!W)return 0;var ht=at==="width"?"height":"width",q=F[ht];return q==null?W[at]:W[at]/W[ht]*q},J.prototype.getWidth=function(){return this._getSize("width")},J.prototype.getHeight=function(){return this._getSize("height")},J.prototype.getAnimationStyleProps=function(){return gt},J.prototype.getBoundingRect=function(){var at=this.style;return this._rect||(this._rect=new k.a(at.x||0,at.y||0,this.getWidth(),this.getHeight())),this._rect},J}(bt.c);z.prototype.type="image",nt.a=z},baNC:function(je,nt,b){"use strict";b.d(nt,"c",function(){return B}),b.d(nt,"b",function(){return bt}),b.d(nt,"a",function(){return k}),b.d(nt,"d",function(){return X}),b.d(nt,"e",function(){return J});var B=12,bt="sans-serif",k=B+"px "+bt,ft=20,ot=100,gt="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function lt(at){var F={};if(typeof JSON=="undefined")return F;for(var Z=0;Z<at.length;Z++){var W=String.fromCharCode(Z+32),ht=(at.charCodeAt(Z)-ft)/ot;F[W]=ht}return F}var z=lt(gt),X={createCanvas:function(){return typeof document!="undefined"&&document.createElement("canvas")},measureText:function(){var at,F;return function(Z,W){if(!at){var ht=X.createCanvas();at=ht&&ht.getContext("2d")}if(at)return F!==W&&(F=at.font=W||k),at.measureText(Z);Z=Z||"",W=W||k;var q=/^([0-9]*?)px$/.exec(W),g=+(q&&q[1])||B,et=0;if(W.indexOf("mono")>=0)et=g*Z.length;else for(var $=0;$<Z.length;$++){var N=z[Z[$]];et+=N==null?g:N*g}return{width:et}}}(),loadImage:function(at,F,Z){var W=new Image;return W.onload=F,W.onerror=Z,W.src=at,W}};function J(at){for(var F in X)at[F]&&(X[F]=at[F])}},"c/nf":function(je,nt,b){"use strict";b.d(nt,"d",function(){return ot}),b.d(nt,"c",function(){return gt}),b.d(nt,"b",function(){return lt}),b.d(nt,"a",function(){return z}),b.d(nt,"e",function(){return X}),b.d(nt,"i",function(){return F}),b.d(nt,"B",function(){return W}),b.d(nt,"y",function(){return ht}),b.d(nt,"m",function(){return q}),b.d(nt,"q",function(){return g}),b.d(nt,"l",function(){return et}),b.d(nt,"h",function(){return $}),b.d(nt,"r",function(){return N}),b.d(nt,"n",function(){return K}),b.d(nt,"j",function(){return V}),b.d(nt,"w",function(){return G}),b.d(nt,"f",function(){return I}),b.d(nt,"o",function(){return A}),b.d(nt,"u",function(){return C}),b.d(nt,"z",function(){return E}),b.d(nt,"s",function(){return O}),b.d(nt,"k",function(){return M}),b.d(nt,"x",function(){return L}),b.d(nt,"g",function(){return H}),b.d(nt,"p",function(){return U}),b.d(nt,"v",function(){return ct}),b.d(nt,"A",function(){return st}),b.d(nt,"t",function(){return vt});var B=b("bPXU"),bt=b("7M1A"),k=b("qB7j"),ft=b("PWZQ"),ot=1e3,gt=ot*60,lt=gt*60,z=lt*24,X=z*365,J={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},at="{yyyy}-{MM}-{dd}",F={year:"{yyyy}",month:"{yyyy}-{MM}",day:at,hour:at+" "+J.hour,minute:at+" "+J.minute,second:at+" "+J.second,millisecond:J.none},Z=["year","month","day","hour","minute","second","millisecond"],W=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ht(it,dt){return it+="","0000".substr(0,dt-it.length)+it}function q(it){switch(it){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return it}}function g(it){return it===q(it)}function et(it){switch(it){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function $(it,dt,St,ut){var yt=bt.o(it),Ot=yt[V(St)](),At=yt[G(St)]()+1,It=Math.floor((At-1)/4)+1,Ct=yt[I(St)](),Ft=yt["get"+(St?"UTC":"")+"Day"](),zt=yt[A(St)](),Xt=(zt-1)%12+1,ie=yt[C(St)](),oe=yt[E(St)](),he=yt[O(St)](),be=ut instanceof ft.a?ut:Object(k.d)(ut||k.a)||Object(k.c)(),Ce=be.getModel("time"),Fe=Ce.get("month"),Bt=Ce.get("monthAbbr"),Tt=Ce.get("dayOfWeek"),Mt=Ce.get("dayOfWeekAbbr");return(dt||"").replace(/{yyyy}/g,Ot+"").replace(/{yy}/g,Ot%100+"").replace(/{Q}/g,It+"").replace(/{MMMM}/g,Fe[At-1]).replace(/{MMM}/g,Bt[At-1]).replace(/{MM}/g,ht(At,2)).replace(/{M}/g,At+"").replace(/{dd}/g,ht(Ct,2)).replace(/{d}/g,Ct+"").replace(/{eeee}/g,Tt[Ft]).replace(/{ee}/g,Mt[Ft]).replace(/{e}/g,Ft+"").replace(/{HH}/g,ht(zt,2)).replace(/{H}/g,zt+"").replace(/{hh}/g,ht(Xt+"",2)).replace(/{h}/g,Xt+"").replace(/{mm}/g,ht(ie,2)).replace(/{m}/g,ie+"").replace(/{ss}/g,ht(oe,2)).replace(/{s}/g,oe+"").replace(/{SSS}/g,ht(he,3)).replace(/{S}/g,he+"")}function N(it,dt,St,ut,yt){var Ot=null;if(B.C(St))Ot=St;else if(B.w(St))Ot=St(it.value,dt,{level:it.level});else{var At=B.m({},J);if(it.level>0)for(var It=0;It<Z.length;++It)At[Z[It]]="{primary|"+At[Z[It]]+"}";var Ct=St?St.inherit===!1?St:B.i(St,At):At,Ft=Y(it.value,yt);if(Ct[Ft])Ot=Ct[Ft];else if(Ct.inherit){for(var zt=W.indexOf(Ft),It=zt-1;It>=0;--It)if(Ct[Ft]){Ot=Ct[Ft];break}Ot=Ot||At.none}if(B.t(Ot)){var Xt=it.level==null?0:it.level>=0?it.level:Ot.length+it.level;Xt=Math.min(Xt,Ot.length-1),Ot=Ot[Xt]}}return $(new Date(it.value),Ot,yt,ut)}function Y(it,dt){var St=bt.o(it),ut=St[G(dt)]()+1,yt=St[I(dt)](),Ot=St[A(dt)](),At=St[C(dt)](),It=St[E(dt)](),Ct=St[O(dt)](),Ft=Ct===0,zt=Ft&&It===0,Xt=zt&&At===0,ie=Xt&&Ot===0,oe=ie&&yt===1,he=oe&&ut===1;return he?"year":oe?"month":ie?"day":Xt?"hour":zt?"minute":Ft?"second":"millisecond"}function K(it,dt,St){var ut=B.z(it)?bt.o(it):it;switch(dt=dt||Y(it,St),dt){case"year":return ut[V(St)]();case"half-year":return ut[G(St)]()>=6?1:0;case"quarter":return Math.floor((ut[G(St)]()+1)/4);case"month":return ut[G(St)]();case"day":return ut[I(St)]();case"half-day":return ut[A(St)]()/24;case"hour":return ut[A(St)]();case"minute":return ut[C(St)]();case"second":return ut[E(St)]();case"millisecond":return ut[O(St)]()}}function V(it){return it?"getUTCFullYear":"getFullYear"}function G(it){return it?"getUTCMonth":"getMonth"}function I(it){return it?"getUTCDate":"getDate"}function A(it){return it?"getUTCHours":"getHours"}function C(it){return it?"getUTCMinutes":"getMinutes"}function E(it){return it?"getUTCSeconds":"getSeconds"}function O(it){return it?"getUTCMilliseconds":"getMilliseconds"}function M(it){return it?"setUTCFullYear":"setFullYear"}function L(it){return it?"setUTCMonth":"setMonth"}function H(it){return it?"setUTCDate":"setDate"}function U(it){return it?"setUTCHours":"setHours"}function ct(it){return it?"setUTCMinutes":"setMinutes"}function st(it){return it?"setUTCSeconds":"setSeconds"}function vt(it){return it?"setUTCMilliseconds":"setMilliseconds"}},c51C:function(je,nt,b){"use strict";b.d(nt,"a",function(){return B}),b.d(nt,"b",function(){return bt}),b.d(nt,"c",function(){return k});function B(ft,ot,gt){switch(gt){case"color":var lt=ft.getItemVisual(ot,"style");return lt[ft.getVisual("drawType")];case"opacity":return ft.getItemVisual(ot,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return ft.getItemVisual(ot,gt);default:}}function bt(ft,ot){switch(ot){case"color":var gt=ft.getVisual("style");return gt[ft.getVisual("drawType")];case"opacity":return ft.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return ft.getVisual(ot);default:}}function k(ft,ot,gt,lt){switch(gt){case"color":var z=ft.ensureUniqueItemVisual(ot,"style");z[ft.getVisual("drawType")]=lt,ft.setItemVisual(ot,"colorFromPalette",!1);break;case"opacity":ft.ensureUniqueItemVisual(ot,"style").opacity=lt;break;case"symbol":case"symbolSize":case"liftZ":ft.setItemVisual(ot,gt,lt);break;default:}}},c5Gk:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(C,E){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,M){O.__proto__=M}||function(O,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(O[L]=M[L])},B(C,E)};function bt(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");B(C,E);function O(){this.constructor=C}C.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}var k=function(){return k=Object.assign||function(E){for(var O,M=1,L=arguments.length;M<L;M++){O=arguments[M];for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&(E[H]=O[H])}return E},k.apply(this,arguments)};function ft(C,E){var O={};for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&E.indexOf(M)<0&&(O[M]=C[M]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,M=Object.getOwnPropertySymbols(C);L<M.length;L++)E.indexOf(M[L])<0&&Object.prototype.propertyIsEnumerable.call(C,M[L])&&(O[M[L]]=C[M[L]]);return O}function ot(C,E,O,M){var L=arguments.length,H=L<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,O):M,U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(C,E,O,M);else for(var ct=C.length-1;ct>=0;ct--)(U=C[ct])&&(H=(L<3?U(H):L>3?U(E,O,H):U(E,O))||H);return L>3&&H&&Object.defineProperty(E,O,H),H}function gt(C,E){return function(O,M){E(O,M,C)}}function lt(C,E){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,E)}function z(C,E,O,M){function L(H){return H instanceof O?H:new O(function(U){U(H)})}return new(O||(O=Promise))(function(H,U){function ct(it){try{vt(M.next(it))}catch(dt){U(dt)}}function st(it){try{vt(M.throw(it))}catch(dt){U(dt)}}function vt(it){it.done?H(it.value):L(it.value).then(ct,st)}vt((M=M.apply(C,E||[])).next())})}function X(C,E){var O={label:0,sent:function(){if(H[0]&1)throw H[1];return H[1]},trys:[],ops:[]},M,L,H,U;return U={next:ct(0),throw:ct(1),return:ct(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function ct(vt){return function(it){return st([vt,it])}}function st(vt){if(M)throw new TypeError("Generator is already executing.");for(;O;)try{if(M=1,L&&(H=vt[0]&2?L.return:vt[0]?L.throw||((H=L.return)&&H.call(L),0):L.next)&&!(H=H.call(L,vt[1])).done)return H;switch(L=0,H&&(vt=[vt[0]&2,H.value]),vt[0]){case 0:case 1:H=vt;break;case 4:return O.label++,{value:vt[1],done:!1};case 5:O.label++,L=vt[1],vt=[0];continue;case 7:vt=O.ops.pop(),O.trys.pop();continue;default:if(H=O.trys,!(H=H.length>0&&H[H.length-1])&&(vt[0]===6||vt[0]===2)){O=0;continue}if(vt[0]===3&&(!H||vt[1]>H[0]&&vt[1]<H[3])){O.label=vt[1];break}if(vt[0]===6&&O.label<H[1]){O.label=H[1],H=vt;break}if(H&&O.label<H[2]){O.label=H[2],O.ops.push(vt);break}H[2]&&O.ops.pop(),O.trys.pop();continue}vt=E.call(C,O)}catch(it){vt=[6,it],L=0}finally{M=H=0}if(vt[0]&5)throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}}var J=Object.create?function(C,E,O,M){M===void 0&&(M=O),Object.defineProperty(C,M,{enumerable:!0,get:function(){return E[O]}})}:function(C,E,O,M){M===void 0&&(M=O),C[M]=E[O]};function at(C,E){for(var O in C)O!=="default"&&!Object.prototype.hasOwnProperty.call(E,O)&&J(E,C,O)}function F(C){var E=typeof Symbol=="function"&&Symbol.iterator,O=E&&C[E],M=0;if(O)return O.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&M>=C.length&&(C=void 0),{value:C&&C[M++],done:!C}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(C,E){var O=typeof Symbol=="function"&&C[Symbol.iterator];if(!O)return C;var M=O.call(C),L,H=[],U;try{for(;(E===void 0||E-- >0)&&!(L=M.next()).done;)H.push(L.value)}catch(ct){U={error:ct}}finally{try{L&&!L.done&&(O=M.return)&&O.call(M)}finally{if(U)throw U.error}}return H}function W(){for(var C=[],E=0;E<arguments.length;E++)C=C.concat(Z(arguments[E]));return C}function ht(){for(var C=0,E=0,O=arguments.length;E<O;E++)C+=arguments[E].length;for(var M=Array(C),L=0,E=0;E<O;E++)for(var H=arguments[E],U=0,ct=H.length;U<ct;U++,L++)M[L]=H[U];return M}function q(C,E,O){if(O||arguments.length===2)for(var M=0,L=E.length,H;M<L;M++)(H||!(M in E))&&(H||(H=Array.prototype.slice.call(E,0,M)),H[M]=E[M]);return C.concat(H||E)}function g(C){return this instanceof g?(this.v=C,this):new g(C)}function et(C,E,O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O.apply(C,E||[]),L,H=[];return L={},U("next"),U("throw"),U("return"),L[Symbol.asyncIterator]=function(){return this},L;function U(St){M[St]&&(L[St]=function(ut){return new Promise(function(yt,Ot){H.push([St,ut,yt,Ot])>1||ct(St,ut)})})}function ct(St,ut){try{st(M[St](ut))}catch(yt){dt(H[0][3],yt)}}function st(St){St.value instanceof g?Promise.resolve(St.value.v).then(vt,it):dt(H[0][2],St)}function vt(St){ct("next",St)}function it(St){ct("throw",St)}function dt(St,ut){St(ut),H.shift(),H.length&&ct(H[0][0],H[0][1])}}function $(C){var E,O;return E={},M("next"),M("throw",function(L){throw L}),M("return"),E[Symbol.iterator]=function(){return this},E;function M(L,H){E[L]=C[L]?function(U){return(O=!O)?{value:g(C[L](U)),done:L==="return"}:H?H(U):U}:H}}function N(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=C[Symbol.asyncIterator],O;return E?E.call(C):(C=typeof F=="function"?F(C):C[Symbol.iterator](),O={},M("next"),M("throw"),M("return"),O[Symbol.asyncIterator]=function(){return this},O);function M(H){O[H]=C[H]&&function(U){return new Promise(function(ct,st){U=C[H](U),L(ct,st,U.done,U.value)})}}function L(H,U,ct,st){Promise.resolve(st).then(function(vt){H({value:vt,done:ct})},U)}}function Y(C,E){return Object.defineProperty?Object.defineProperty(C,"raw",{value:E}):C.raw=E,C}var K=Object.create?function(C,E){Object.defineProperty(C,"default",{enumerable:!0,value:E})}:function(C,E){C.default=E};function V(C){if(C&&C.__esModule)return C;var E={};if(C!=null)for(var O in C)O!=="default"&&Object.prototype.hasOwnProperty.call(C,O)&&J(E,C,O);return K(E,C),E}function G(C){return C&&C.__esModule?C:{default:C}}function I(C,E,O,M){if(O==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?C!==E||!M:!E.has(C))throw new TypeError("Cannot read private member from an object whose class did not declare it");return O==="m"?M:O==="a"?M.call(C):M?M.value:E.get(C)}function A(C,E,O,M,L){if(M==="m")throw new TypeError("Private method is not writable");if(M==="a"&&!L)throw new TypeError("Private accessor was defined without a setter");if(typeof E=="function"?C!==E||!L:!E.has(C))throw new TypeError("Cannot write private member to an object whose class did not declare it");return M==="a"?L.call(C,O):L?L.value=O:E.set(C,O),O}},caCy:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("7M1A"),k=b("c/nf"),ft=b("H9JY"),ot=b("GYvh"),gt=b("2zTA"),lt=b("bPXU"),z=function($,N,Y,K){for(;Y<K;){var V=Y+K>>>1;$[V][1]<N?Y=V+1:K=V}return Y},X=function($){Object(B.a)(N,$);function N(Y){var K=$.call(this,Y)||this;return K.type="time",K}return N.prototype.getLabel=function(Y){var K=this.getSetting("useUTC");return Object(k.h)(Y.value,k.i[Object(k.l)(Object(k.m)(this._minLevelUnit))]||k.i.second,K,this.getSetting("locale"))},N.prototype.getFormattedLabel=function(Y,K,V){var G=this.getSetting("useUTC"),I=this.getSetting("locale");return Object(k.r)(Y,K,V,I,G)},N.prototype.getTicks=function(){var Y=this._interval,K=this._extent,V=[];if(!Y)return V;V.push({value:K[0],level:0});var G=this.getSetting("useUTC"),I=et(this._minLevelUnit,this._approxInterval,G,K);return V=V.concat(I),V.push({value:K[1],level:0}),V},N.prototype.calcNiceExtent=function(Y){var K=this._extent;if(K[0]===K[1]&&(K[0]-=k.a,K[1]+=k.a),K[1]===-Infinity&&K[0]===Infinity){var V=new Date;K[1]=+new Date(V.getFullYear(),V.getMonth(),V.getDate()),K[0]=K[1]-k.a}this.calcNiceTicks(Y.splitNumber,Y.minInterval,Y.maxInterval)},N.prototype.calcNiceTicks=function(Y,K,V){Y=Y||10;var G=this._extent,I=G[1]-G[0];this._approxInterval=I/Y,K!=null&&this._approxInterval<K&&(this._approxInterval=K),V!=null&&this._approxInterval>V&&(this._approxInterval=V);var A=J.length,C=Math.min(z(J,this._approxInterval,0,A),A-1);this._interval=J[C][1],this._minLevelUnit=J[Math.max(C-1,0)][0]},N.prototype.parse=function(Y){return Object(lt.z)(Y)?Y:+bt.o(Y)},N.prototype.contain=function(Y){return ft.a(this.parse(Y),this._extent)},N.prototype.normalize=function(Y){return ft.f(this.parse(Y),this._extent)},N.prototype.scale=function(Y){return ft.g(Y,this._extent)},N.type="time",N}(ot.a),J=[["second",k.d],["minute",k.c],["hour",k.b],["quarter-day",k.b*6],["half-day",k.b*12],["day",k.a*1.2],["half-week",k.a*3.5],["week",k.a*7],["month",k.a*31],["quarter",k.a*95],["half-year",k.e/2],["year",k.e]];function at($,N,Y,K){var V=bt.o(N),G=bt.o(Y),I=function(U){return Object(k.n)(V,U,K)===Object(k.n)(G,U,K)},A=function(){return I("year")},C=function(){return A()&&I("month")},E=function(){return C()&&I("day")},O=function(){return E()&&I("hour")},M=function(){return O()&&I("minute")},L=function(){return M()&&I("second")},H=function(){return L()&&I("millisecond")};switch($){case"year":return A();case"month":return C();case"day":return E();case"hour":return O();case"minute":return M();case"second":return L();case"millisecond":return H()}}function F($,N){return $/=k.a,$>16?16:$>7.5?7:$>3.5?4:$>1.5?2:1}function Z($){var N=30*k.a;return $/=N,$>6?6:$>3?3:$>2?2:1}function W($){return $/=k.b,$>12?12:$>6?6:$>3.5?4:$>2?2:1}function ht($,N){return $/=N?k.c:k.d,$>30?30:$>20?20:$>15?15:$>10?10:$>5?5:$>2?2:1}function q($){return bt.m($,!0)}function g($,N,Y){var K=new Date($);switch(Object(k.m)(N)){case"year":case"month":K[Object(k.x)(Y)](0);case"day":K[Object(k.g)(Y)](1);case"hour":K[Object(k.p)(Y)](0);case"minute":K[Object(k.v)(Y)](0);case"second":K[Object(k.A)(Y)](0),K[Object(k.t)(Y)](0)}return K.getTime()}function et($,N,Y,K){var V=1e4,G=k.B,I=0;function A(Ct,Ft,zt,Xt,ie,oe,he){for(var be=new Date(Ft),Ce=Ft,Fe=be[Xt]();Ce<zt&&Ce<=K[1];)he.push({value:Ce}),Fe+=Ct,be[ie](Fe),Ce=be.getTime();he.push({value:Ce,notAdd:!0})}function C(Ct,Ft,zt){var Xt=[],ie=!Ft.length;if(!at(Object(k.m)(Ct),K[0],K[1],Y)){ie&&(Ft=[{value:g(new Date(K[0]),Ct,Y)},{value:K[1]}]);for(var oe=0;oe<Ft.length-1;oe++){var he=Ft[oe].value,be=Ft[oe+1].value;if(he!==be){var Ce=void 0,Fe=void 0,Bt=void 0,Tt=!1;switch(Ct){case"year":Ce=Math.max(1,Math.round(N/k.a/365)),Fe=Object(k.j)(Y),Bt=Object(k.k)(Y);break;case"half-year":case"quarter":case"month":Ce=Z(N),Fe=Object(k.w)(Y),Bt=Object(k.x)(Y);break;case"week":case"half-week":case"day":Ce=F(N,31),Fe=Object(k.f)(Y),Bt=Object(k.g)(Y),Tt=!0;break;case"half-day":case"quarter-day":case"hour":Ce=W(N),Fe=Object(k.o)(Y),Bt=Object(k.p)(Y);break;case"minute":Ce=ht(N,!0),Fe=Object(k.u)(Y),Bt=Object(k.v)(Y);break;case"second":Ce=ht(N,!1),Fe=Object(k.z)(Y),Bt=Object(k.A)(Y);break;case"millisecond":Ce=q(N),Fe=Object(k.s)(Y),Bt=Object(k.t)(Y);break}A(Ce,he,be,Fe,Bt,Tt,Xt),Ct==="year"&&zt.length>1&&oe===0&&zt.unshift({value:zt[0].value-Ce})}}for(var oe=0;oe<Xt.length;oe++)zt.push(Xt[oe]);return Xt}}for(var E=[],O=[],M=0,L=0,H=0;H<G.length&&I++<V;++H){var U=Object(k.m)(G[H]);if(!!Object(k.q)(G[H])){C(G[H],E[E.length-1]||[],O);var ct=G[H+1]?Object(k.m)(G[H+1]):null;if(U!==ct){if(O.length){L=M,O.sort(function(Ct,Ft){return Ct.value-Ft.value});for(var st=[],vt=0;vt<O.length;++vt){var it=O[vt].value;(vt===0||O[vt-1].value!==it)&&(st.push(O[vt]),it>=K[0]&&it<=K[1]&&M++)}var dt=(K[1]-K[0])/N;if(M>dt*1.5&&L>dt/1.5||(E.push(st),M>dt||$===G[H]))break}O=[]}}}for(var St=Object(lt.n)(Object(lt.H)(E,function(Ct){return Object(lt.n)(Ct,function(Ft){return Ft.value>=K[0]&&Ft.value<=K[1]&&!Ft.notAdd})}),function(Ct){return Ct.length>0}),ut=[],yt=St.length-1,H=0;H<St.length;++H)for(var Ot=St[H],At=0;At<Ot.length;++At)ut.push({value:Ot[At].value,level:yt-H});ut.sort(function(Ct,Ft){return Ct.value-Ft.value});for(var It=[],H=0;H<ut.length;++H)(H===0||ut[H].value!==ut[H-1].value)&&It.push(ut[H]);return It}gt.a.registerClass(X),nt.a=X},cdJk:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=b("IyL0");function bt(k,ft,ot,gt,lt,z,X,J,at){if(X===0)return!1;var F=X;if(at>ft+F&&at>gt+F&&at>z+F||at<ft-F&&at<gt-F&&at<z-F||J>k+F&&J>ot+F&&J>lt+F||J<k-F&&J<ot-F&&J<lt-F)return!1;var Z=Object(B.l)(k,ft,ot,gt,lt,z,J,at,null);return Z<=F/2}},dTsX:function(je,nt,b){"use strict";b.d(nt,"a",function(){return k}),b.d(nt,"c",function(){return ft}),b.d(nt,"b",function(){return gt});function B(lt,z,X){var J=z.x==null?0:z.x,at=z.x2==null?1:z.x2,F=z.y==null?0:z.y,Z=z.y2==null?0:z.y2;z.global||(J=J*X.width+X.x,at=at*X.width+X.x,F=F*X.height+X.y,Z=Z*X.height+X.y),J=isNaN(J)?0:J,at=isNaN(at)?1:at,F=isNaN(F)?0:F,Z=isNaN(Z)?0:Z;var W=lt.createLinearGradient(J,F,at,Z);return W}function bt(lt,z,X){var J=X.width,at=X.height,F=Math.min(J,at),Z=z.x==null?.5:z.x,W=z.y==null?.5:z.y,ht=z.r==null?.5:z.r;z.global||(Z=Z*J+X.x,W=W*at+X.y,ht=ht*F);var q=lt.createRadialGradient(Z,W,0,Z,W,ht);return q}function k(lt,z,X){for(var J=z.type==="radial"?bt(lt,z,X):B(lt,z,X),at=z.colorStops,F=0;F<at.length;F++)J.addColorStop(at[F].offset,at[F].color);return J}function ft(lt,z){if(lt===z||!lt&&!z)return!1;if(!lt||!z||lt.length!==z.length)return!0;for(var X=0;X<lt.length;X++)if(lt[X]!==z[X])return!0;return!1}function ot(lt){return parseInt(lt,10)}function gt(lt,z,X){var J=["width","height"][z],at=["clientWidth","clientHeight"][z],F=["paddingLeft","paddingTop"][z],Z=["paddingRight","paddingBottom"][z];if(X[J]!=null&&X[J]!=="auto")return parseFloat(X[J]);var W=document.defaultView.getComputedStyle(lt);return(lt[at]||ot(W[J])||ot(lt.style[J]))-(ot(W[F])||0)-(ot(W[Z])||0)|0}},dfBh:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=b("FLFE"),ft=b("IyL0"),ot=[],gt=function(){function X(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return X}();function lt(X,J,at){var F=X.cpx2,Z=X.cpy2;return F!=null||Z!=null?[(at?ft.b:ft.a)(X.x1,X.cpx1,X.cpx2,X.x2,J),(at?ft.b:ft.a)(X.y1,X.cpy1,X.cpy2,X.y2,J)]:[(at?ft.i:ft.h)(X.x1,X.cpx1,X.x2,J),(at?ft.i:ft.h)(X.y1,X.cpy1,X.y2,J)]}var z=function(X){Object(B.a)(J,X);function J(at){return X.call(this,at)||this}return J.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},J.prototype.getDefaultShape=function(){return new gt},J.prototype.buildPath=function(at,F){var Z=F.x1,W=F.y1,ht=F.x2,q=F.y2,g=F.cpx1,et=F.cpy1,$=F.cpx2,N=F.cpy2,Y=F.percent;Y!==0&&(at.moveTo(Z,W),$==null||N==null?(Y<1&&(Object(ft.n)(Z,g,ht,Y,ot),g=ot[1],ht=ot[2],Object(ft.n)(W,et,q,Y,ot),et=ot[1],q=ot[2]),at.quadraticCurveTo(g,et,ht,q)):(Y<1&&(Object(ft.g)(Z,g,$,ht,Y,ot),g=ot[1],$=ot[2],ht=ot[3],Object(ft.g)(W,et,N,q,Y,ot),et=ot[1],N=ot[2],q=ot[3]),at.bezierCurveTo(g,et,$,N,ht,q)))},J.prototype.pointAt=function(at){return lt(this.shape,at,!1)},J.prototype.tangentAt=function(at){var F=lt(this.shape,at,!0);return k.m(F,F)},J}(bt.b);z.prototype.type="bezier-curve",nt.a=z},dk5l:function(je,nt,b){"use strict";b.d(nt,"a",function(){return X}),b.d(nt,"b",function(){return J});var B=b("BkaA"),bt=b("8zGM"),k=b("bPXU"),ft=b("iYbX"),ot=b("zm8D"),gt=b("ZXNb"),lt=b("ZlUk"),z=b("xrhB");function X(W,ht){return J(W,ht).dimensions}function J(W,ht){Object(ft.e)(W)||(W=Object(ft.c)(W)),ht=ht||{};var q=ht.coordDimensions||[],g=ht.dimensionsDefine||W.dimensionsDefine||[],et=Object(k.f)(),$=[],N=F(W,q,g,ht.dimensionsCount),Y=ht.canOmitUnusedDimensions&&Object(z.e)(N),K=g===W.dimensionsDefine,V=K?Object(z.c)(W):Object(z.b)(g),G=ht.encodeDefine;!G&&ht.encodeDefaulter&&(G=ht.encodeDefaulter(W,N));for(var I=Object(k.f)(G),A=new ot.a(N),C=0;C<A.length;C++)A[C]=-1;function E(St){var ut=A[St];if(ut<0){var yt=g[St],Ot=Object(k.A)(yt)?yt:{name:yt},At=new bt.a,It=Ot.name;It!=null&&V.get(It)!=null&&(At.name=At.displayName=It),Ot.type!=null&&(At.type=Ot.type),Ot.displayName!=null&&(At.displayName=Ot.displayName);var Ct=$.length;return A[St]=Ct,At.storeDimIndex=St,$.push(At),At}return $[ut]}if(!Y)for(var C=0;C<N;C++)E(C);I.each(function(St,ut){var yt=Object(gt.r)(St).slice();if(yt.length===1&&!Object(k.C)(yt[0])&&yt[0]<0){I.set(ut,!1);return}var Ot=I.set(ut,[]);Object(k.k)(yt,function(At,It){var Ct=Object(k.C)(At)?V.get(At):At;Ct!=null&&Ct<N&&(Ot[It]=Ct,M(E(Ct),ut,It))})});var O=0;Object(k.k)(q,function(St){var ut,yt,Ot,At;if(Object(k.C)(St))ut=St,At={};else{At=St,ut=At.name;var It=At.ordinalMeta;At.ordinalMeta=null,At=Object(k.m)({},At),At.ordinalMeta=It,yt=At.dimsDef,Ot=At.otherDims,At.name=At.coordDim=At.coordDimIndex=At.dimsDef=At.otherDims=null}var Ct=I.get(ut);if(Ct!==!1){if(Ct=Object(gt.r)(Ct),!Ct.length)for(var Ft=0;Ft<(yt&&yt.length||1);Ft++){for(;O<N&&E(O).coordDim!=null;)O++;O<N&&Ct.push(O++)}Object(k.k)(Ct,function(zt,Xt){var ie=E(zt);if(K&&At.type!=null&&(ie.type=At.type),M(Object(k.i)(ie,At),ut,Xt),ie.name==null&&yt){var oe=yt[Xt];!Object(k.A)(oe)&&(oe={name:oe}),ie.name=ie.displayName=oe.name,ie.defaultTooltip=oe.defaultTooltip}Ot&&Object(k.i)(ie.otherDims,Ot)})}});function M(St,ut,yt){B.i.get(ut)!=null?St.otherDims[ut]=yt:(St.coordDim=ut,St.coordDimIndex=yt,et.set(ut,!0))}var L=ht.generateCoord,H=ht.generateCoordCount,U=H!=null;H=L?H||1:0;var ct=L||"value";function st(St){St.name==null&&(St.name=St.coordDim)}if(Y)Object(k.k)($,function(St){st(St)}),$.sort(function(St,ut){return St.storeDimIndex-ut.storeDimIndex});else for(var vt=0;vt<N;vt++){var it=E(vt),dt=it.coordDim;dt==null&&(it.coordDim=Z(ct,et,U),it.coordDimIndex=0,(!L||H<=0)&&(it.isExtraCoord=!0),H--),st(it),it.type==null&&(Object(lt.b)(W,vt)===lt.a.Must||it.isExtraCoord&&(it.otherDims.itemName!=null||it.otherDims.seriesName!=null))&&(it.type="ordinal")}return at($),new z.a({source:W,dimensions:$,fullDimensionCount:N,dimensionOmitted:Y})}function at(W){for(var ht=Object(k.f)(),q=0;q<W.length;q++){var g=W[q],et=g.name,$=ht.get(et)||0;$>0&&(g.name=et+($-1)),$++,ht.set(et,$)}}function F(W,ht,q,g){var et=Math.max(W.dimensionsDetectedCount||1,ht.length,q.length,g||0);return Object(k.k)(ht,function($){var N;Object(k.A)($)&&(N=$.dimsDef)&&(et=Math.max(et,N.length))}),et}function Z(W,ht,q){var g=ht.data;if(q||g.hasOwnProperty(W)){for(var et=0;g.hasOwnProperty(W+et);)et++;W+=et}return ht.set(W,!0),W}},eASH:function(je,nt,b){"use strict";b.d(nt,"a",function(){return at}),b.d(nt,"b",function(){return F});var B=b("OjCH"),bt=b("FLFE"),k=B.d,ft=5e-5;function ot(Z){return Z>ft||Z<-ft}var gt=[],lt=[],z=B.c(),X=Math.abs,J=function(){function Z(){}return Z.prototype.getLocalTransform=function(W){return Z.getLocalTransform(this,W)},Z.prototype.setPosition=function(W){this.x=W[0],this.y=W[1]},Z.prototype.setScale=function(W){this.scaleX=W[0],this.scaleY=W[1]},Z.prototype.setSkew=function(W){this.skewX=W[0],this.skewY=W[1]},Z.prototype.setOrigin=function(W){this.originX=W[0],this.originY=W[1]},Z.prototype.needLocalTransform=function(){return ot(this.rotation)||ot(this.x)||ot(this.y)||ot(this.scaleX-1)||ot(this.scaleY-1)||ot(this.skewX)||ot(this.skewY)},Z.prototype.updateTransform=function(){var W=this.parent&&this.parent.transform,ht=this.needLocalTransform(),q=this.transform;if(!(ht||W)){q&&k(q);return}q=q||B.c(),ht?this.getLocalTransform(q):k(q),W&&(ht?B.f(q,W,q):B.b(q,W)),this.transform=q,this._resolveGlobalScaleRatio(q)},Z.prototype._resolveGlobalScaleRatio=function(W){var ht=this.globalScaleRatio;if(ht!=null&&ht!==1){this.getGlobalScale(gt);var q=gt[0]<0?-1:1,g=gt[1]<0?-1:1,et=((gt[0]-q)*ht+q)/gt[0]||0,$=((gt[1]-g)*ht+g)/gt[1]||0;W[0]*=et,W[1]*=et,W[2]*=$,W[3]*=$}this.invTransform=this.invTransform||B.c(),B.e(this.invTransform,W)},Z.prototype.getComputedTransform=function(){for(var W=this,ht=[];W;)ht.push(W),W=W.parent;for(;W=ht.pop();)W.updateTransform();return this.transform},Z.prototype.setLocalTransform=function(W){if(!!W){var ht=W[0]*W[0]+W[1]*W[1],q=W[2]*W[2]+W[3]*W[3],g=Math.atan2(W[1],W[0]),et=Math.PI/2+g-Math.atan2(W[3],W[2]);q=Math.sqrt(q)*Math.cos(et),ht=Math.sqrt(ht),this.skewX=et,this.skewY=0,this.rotation=-g,this.x=+W[4],this.y=+W[5],this.scaleX=ht,this.scaleY=q,this.originX=0,this.originY=0}},Z.prototype.decomposeTransform=function(){if(!!this.transform){var W=this.parent,ht=this.transform;W&&W.transform&&(B.f(lt,W.invTransform,ht),ht=lt);var q=this.originX,g=this.originY;(q||g)&&(z[4]=q,z[5]=g,B.f(lt,ht,z),lt[4]-=q,lt[5]-=g,ht=lt),this.setLocalTransform(ht)}},Z.prototype.getGlobalScale=function(W){var ht=this.transform;return W=W||[],ht?(W[0]=Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1]),W[1]=Math.sqrt(ht[2]*ht[2]+ht[3]*ht[3]),ht[0]<0&&(W[0]=-W[0]),ht[3]<0&&(W[1]=-W[1]),W):(W[0]=1,W[1]=1,W)},Z.prototype.transformCoordToLocal=function(W,ht){var q=[W,ht],g=this.invTransform;return g&&bt.b(q,q,g),q},Z.prototype.transformCoordToGlobal=function(W,ht){var q=[W,ht],g=this.transform;return g&&bt.b(q,q,g),q},Z.prototype.getLineScale=function(){var W=this.transform;return W&&X(W[0]-1)>1e-10&&X(W[3]-1)>1e-10?Math.sqrt(X(W[0]*W[3]-W[2]*W[1])):1},Z.prototype.copyTransform=function(W){F(this,W)},Z.getLocalTransform=function(W,ht){ht=ht||[];var q=W.originX||0,g=W.originY||0,et=W.scaleX,$=W.scaleY,N=W.anchorX,Y=W.anchorY,K=W.rotation||0,V=W.x,G=W.y,I=W.skewX?Math.tan(W.skewX):0,A=W.skewY?Math.tan(-W.skewY):0;if(q||g||N||Y){var C=q+N,E=g+Y;ht[4]=-C*et-I*E*$,ht[5]=-E*$-A*C*et}else ht[4]=ht[5]=0;return ht[0]=et,ht[3]=$,ht[1]=A*et,ht[2]=I*$,K&&B.g(ht,ht,K),ht[4]+=q+V,ht[5]+=g+G,ht},Z.initDefaultProps=function(){var W=Z.prototype;W.scaleX=W.scaleY=W.globalScaleRatio=1,W.x=W.y=W.originX=W.originY=W.skewX=W.skewY=W.rotation=W.anchorX=W.anchorY=0}(),Z}(),at=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function F(Z,W){for(var ht=0;ht<at.length;ht++){var q=at[ht];Z[q]=W[q]}}nt.c=J},eQ2i:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=b("To/5");function bt(k,ft,ot,gt,lt,z,X,J){var at=new B.a({style:{text:k,font:ft,align:ot,verticalAlign:gt,padding:lt,rich:z,overflow:X?"truncate":null,lineHeight:J}});return at.getBoundingRect()}},eV5c:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft}),b.d(nt,"h",function(){return gt}),b.d(nt,"c",function(){return lt}),b.d(nt,"d",function(){return z}),b.d(nt,"e",function(){return X}),b.d(nt,"f",function(){return at}),b.d(nt,"g",function(){return F}),b.d(nt,"b",function(){return Z});var B=b("bPXU"),bt=b("ZXNb"),k=Object(bt.o)();function ft(W,ht,q,g,et){var $;if(ht&&ht.ecModel){var N=ht.ecModel.getUpdatePayload();$=N&&N.animation}var Y=ht&&ht.isAnimationEnabled(),K=W==="update";if(Y){var V=void 0,G=void 0,I=void 0;g?(V=Object(B.P)(g.duration,200),G=Object(B.P)(g.easing,"cubicOut"),I=0):(V=ht.getShallow(K?"animationDurationUpdate":"animationDuration"),G=ht.getShallow(K?"animationEasingUpdate":"animationEasing"),I=ht.getShallow(K?"animationDelayUpdate":"animationDelay")),$&&($.duration!=null&&(V=$.duration),$.easing!=null&&(G=$.easing),$.delay!=null&&(I=$.delay)),Object(B.w)(I)&&(I=I(q,et)),Object(B.w)(V)&&(V=V(q));var A={duration:V||0,delay:I,easing:G};return A}else return null}function ot(W,ht,q,g,et,$,N){var Y=!1,K;Object(B.w)(et)?(N=$,$=et,et=null):Object(B.A)(et)&&($=et.cb,N=et.during,Y=et.isFrom,K=et.removeOpt,et=et.dataIndex);var V=W==="leave";V||ht.stopAnimation("leave");var G=ft(W,g,et,V?K||{}:null,g&&g.getAnimationDelayParams?g.getAnimationDelayParams(ht,et):null);if(G&&G.duration>0){var I=G.duration,A=G.delay,C=G.easing,E={duration:I,delay:A||0,easing:C,done:$,force:!!$||!!N,setToFinal:!V,scope:W,during:N};Y?ht.animateFrom(q,E):ht.animateTo(q,E)}else ht.stopAnimation(),!Y&&ht.attr(q),N&&N(1),$&&$()}function gt(W,ht,q,g,et,$){ot("update",W,ht,q,g,et,$)}function lt(W,ht,q,g,et,$){ot("enter",W,ht,q,g,et,$)}function z(W){if(!W.__zr)return!0;for(var ht=0;ht<W.animators.length;ht++){var q=W.animators[ht];if(q.scope==="leave")return!0}return!1}function X(W,ht,q,g,et,$){z(W)||ot("leave",W,ht,q,g,et,$)}function J(W,ht,q,g){W.removeTextContent(),W.removeTextGuideLine(),X(W,{style:{opacity:0}},ht,q,g)}function at(W,ht,q){function g(){W.parent&&W.parent.remove(W)}W.isGroup?W.traverse(function(et){et.isGroup||J(et,ht,q,g)}):J(W,ht,q,g)}function F(W){k(W).oldStyle=W.style}function Z(W){return k(W).oldStyle}},euZP:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft}),b.d(nt,"k",function(){return ot}),b.d(nt,"j",function(){return gt}),b.d(nt,"d",function(){return X}),b.d(nt,"i",function(){return J}),b.d(nt,"f",function(){return Z}),b.d(nt,"g",function(){return W}),b.d(nt,"h",function(){return ht}),b.d(nt,"e",function(){return q}),b.d(nt,"b",function(){return g}),b.d(nt,"c",function(){return et}),b.d(nt,"l",function(){return $});var B=b("bPXU"),bt=b("7M1A"),k=b("c/nf");function ft(N){if(!Object(bt.j)(N))return B.C(N)?N:"-";var Y=(N+"").split(".");return Y[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(Y.length>1?"."+Y[1]:"")}function ot(N,Y){return N=(N||"").toLowerCase().replace(/-(.)/g,function(K,V){return V.toUpperCase()}),Y&&N&&(N=N.charAt(0).toUpperCase()+N.slice(1)),N}var gt=B.M,lt=/([&<>"'])/g,z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function X(N){return N==null?"":(N+"").replace(lt,function(Y,K){return z[K]})}function J(N,Y,K){var V="{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}";function G(M){return M&&B.T(M)?M:"-"}function I(M){return!!(M!=null&&!isNaN(M)&&isFinite(M))}var A=Y==="time",C=N instanceof Date;if(A||C){var E=A?Object(bt.o)(N):N;if(isNaN(+E)){if(C)return"-"}else return Object(k.h)(E,V,K)}if(Y==="ordinal")return B.D(N)?G(N):B.z(N)&&I(N)?N+"":"-";var O=Object(bt.n)(N);return I(O)?ft(O):B.D(N)?G(N):typeof N=="boolean"?N+"":"-"}var at=["a","b","c","d","e","f","g"],F=function(N,Y){return"{"+N+(Y==null?"":Y)+"}"};function Z(N,Y,K){B.t(Y)||(Y=[Y]);var V=Y.length;if(!V)return"";for(var G=Y[0].$vars||[],I=0;I<G.length;I++){var A=at[I];N=N.replace(F(A),F(A,0))}for(var C=0;C<V;C++)for(var E=0;E<G.length;E++){var O=Y[C][G[E]];N=N.replace(F(at[E],C),K?X(O):O)}return N}function W(N,Y,K){return B.k(Y,function(V,G){N=N.replace("{"+G+"}",K?X(V):V)}),N}function ht(N,Y){var K=B.C(N)?{color:N,extraCssText:Y}:N||{},V=K.color,G=K.type;Y=K.extraCssText;var I=K.renderMode||"html";if(!V)return"";if(I==="html")return G==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+X(V)+";"+(Y||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+X(V)+";"+(Y||"")+'"></span>';var A=K.markerId||"markerX";return{renderMode:I,content:"{"+A+"|}  ",style:G==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:V}:{width:10,height:10,borderRadius:5,backgroundColor:V}}}function q(N,Y,K){(N==="week"||N==="month"||N==="quarter"||N==="half-year"||N==="year")&&(N=`MM-dd
yyyy`);var V=Object(bt.o)(Y),G=K?"getUTC":"get",I=V[G+"FullYear"](),A=V[G+"Month"]()+1,C=V[G+"Date"](),E=V[G+"Hours"](),O=V[G+"Minutes"](),M=V[G+"Seconds"](),L=V[G+"Milliseconds"]();return N=N.replace("MM",Object(k.y)(A,2)).replace("M",A).replace("yyyy",I).replace("yy",I%100+"").replace("dd",Object(k.y)(C,2)).replace("d",C).replace("hh",Object(k.y)(E,2)).replace("h",E).replace("mm",Object(k.y)(O,2)).replace("m",O).replace("ss",Object(k.y)(M,2)).replace("s",M).replace("SSS",Object(k.y)(L,3)),N}function g(N){return N&&N.charAt(0).toUpperCase()+N.substr(1)}function et(N,Y){return Y=Y||"transparent",B.C(N)?N:B.A(N)&&N.colorStops&&(N.colorStops[0]||{}).color||Y}function $(N,Y){if(Y==="_blank"||Y==="blank"){var K=window.open();K.opener=null,K.location.href=N}else window.open(N,Y)}},fvwW:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("bPXU"),k=b("iXYE"),ft=b("uSNo"),ot=function(gt){Object(B.a)(lt,gt);function lt(z){var X=gt.call(this)||this;return X.isGroup=!0,X._children=[],X.attr(z),X}return lt.prototype.childrenRef=function(){return this._children},lt.prototype.children=function(){return this._children.slice()},lt.prototype.childAt=function(z){return this._children[z]},lt.prototype.childOfName=function(z){for(var X=this._children,J=0;J<X.length;J++)if(X[J].name===z)return X[J]},lt.prototype.childCount=function(){return this._children.length},lt.prototype.add=function(z){return z&&z!==this&&z.parent!==this&&(this._children.push(z),this._doAdd(z)),this},lt.prototype.addBefore=function(z,X){if(z&&z!==this&&z.parent!==this&&X&&X.parent===this){var J=this._children,at=J.indexOf(X);at>=0&&(J.splice(at,0,z),this._doAdd(z))}return this},lt.prototype.replace=function(z,X){var J=bt.r(this._children,z);return J>=0&&this.replaceAt(X,J),this},lt.prototype.replaceAt=function(z,X){var J=this._children,at=J[X];if(z&&z!==this&&z.parent!==this&&z!==at){J[X]=z,at.parent=null;var F=this.__zr;F&&at.removeSelfFromZr(F),this._doAdd(z)}return this},lt.prototype._doAdd=function(z){z.parent&&z.parent.remove(z),z.parent=this;var X=this.__zr;X&&X!==z.__zr&&z.addSelfToZr(X),X&&X.refresh()},lt.prototype.remove=function(z){var X=this.__zr,J=this._children,at=bt.r(J,z);return at<0?this:(J.splice(at,1),z.parent=null,X&&z.removeSelfFromZr(X),X&&X.refresh(),this)},lt.prototype.removeAll=function(){for(var z=this._children,X=this.__zr,J=0;J<z.length;J++){var at=z[J];X&&at.removeSelfFromZr(X),at.parent=null}return z.length=0,this},lt.prototype.eachChild=function(z,X){for(var J=this._children,at=0;at<J.length;at++){var F=J[at];z.call(X,F,at)}return this},lt.prototype.traverse=function(z,X){for(var J=0;J<this._children.length;J++){var at=this._children[J],F=z.call(X,at);at.isGroup&&!F&&at.traverse(z,X)}return this},lt.prototype.addSelfToZr=function(z){gt.prototype.addSelfToZr.call(this,z);for(var X=0;X<this._children.length;X++){var J=this._children[X];J.addSelfToZr(z)}},lt.prototype.removeSelfFromZr=function(z){gt.prototype.removeSelfFromZr.call(this,z);for(var X=0;X<this._children.length;X++){var J=this._children[X];J.removeSelfFromZr(z)}},lt.prototype.getBoundingRect=function(z){for(var X=new ft.a(0,0,0,0),J=z||this._children,at=[],F=null,Z=0;Z<J.length;Z++){var W=J[Z];if(!(W.ignore||W.invisible)){var ht=W.getBoundingRect(),q=W.getLocalTransform(at);q?(ft.a.applyTransform(X,ht,q),F=F||X.clone(),F.union(X)):(F=F||ht.clone(),F.union(ht))}}return F||X},lt}(k.a);ot.prototype.type="group",nt.a=ot},gYKv:function(je,nt,b){"use strict";b.d(nt,"a",function(){return V});var B=b("y9SG"),bt=b("bPXU"),k=b("c5Gk"),ft=b("HIFk"),ot=b("dTsX"),gt=b("8yJK"),lt=b("uSNo"),z=b("teyC"),X=b("baNC");function J(G,I,A){var C=X.d.createCanvas(),E=I.getWidth(),O=I.getHeight(),M=C.style;return M&&(M.position="absolute",M.left="0",M.top="0",M.width=E+"px",M.height=O+"px",C.setAttribute("data-zr-dom-id",G)),C.width=E*A,C.height=O*A,C}var at=function(G){Object(k.a)(I,G);function I(A,C,E){var O=G.call(this)||this;O.motionBlur=!1,O.lastFrameAlpha=.7,O.dpr=1,O.virtual=!1,O.config={},O.incremental=!1,O.zlevel=0,O.maxRepaintRectCount=5,O.__dirty=!0,O.__firstTimePaint=!0,O.__used=!1,O.__drawIndex=0,O.__startIndex=0,O.__endIndex=0,O.__prevStartIndex=null,O.__prevEndIndex=null;var M;E=E||B.e,typeof A=="string"?M=J(A,C,E):bt.A(A)&&(M=A,A=M.id),O.id=A,O.dom=M;var L=M.style;return L&&(bt.j(M),M.onselectstart=function(){return!1},L.padding="0",L.margin="0",L.borderWidth="0"),O.painter=C,O.dpr=E,O}return I.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},I.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},I.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},I.prototype.setUnpainted=function(){this.__firstTimePaint=!0},I.prototype.createBackBuffer=function(){var A=this.dpr;this.domBack=J("back-"+this.id,this.painter,A),this.ctxBack=this.domBack.getContext("2d"),A!==1&&this.ctxBack.scale(A,A)},I.prototype.createRepaintRects=function(A,C,E,O){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var M=[],L=this.maxRepaintRectCount,H=!1,U=new lt.a(0,0,0,0);function ct(Ot){if(!(!Ot.isFinite()||Ot.isZero()))if(M.length===0){var At=new lt.a(0,0,0,0);At.copy(Ot),M.push(At)}else{for(var It=!1,Ct=Infinity,Ft=0,zt=0;zt<M.length;++zt){var Xt=M[zt];if(Xt.intersect(Ot)){var ie=new lt.a(0,0,0,0);ie.copy(Xt),ie.union(Ot),M[zt]=ie,It=!0;break}else if(H){U.copy(Ot),U.union(Xt);var oe=Ot.width*Ot.height,he=Xt.width*Xt.height,be=U.width*U.height,Ce=be-oe-he;Ce<Ct&&(Ct=Ce,Ft=zt)}}if(H&&(M[Ft].union(Ot),It=!0),!It){var At=new lt.a(0,0,0,0);At.copy(Ot),M.push(At)}H||(H=M.length>=L)}}for(var st=this.__startIndex;st<this.__endIndex;++st){var vt=A[st];if(vt){var it=vt.shouldBePainted(E,O,!0,!0),dt=vt.__isRendered&&(vt.__dirty&z.a||!it)?vt.getPrevPaintRect():null;dt&&ct(dt);var St=it&&(vt.__dirty&z.a||!vt.__isRendered)?vt.getPaintRect():null;St&&ct(St)}}for(var st=this.__prevStartIndex;st<this.__prevEndIndex;++st){var vt=C[st],it=vt.shouldBePainted(E,O,!0,!0);if(vt&&(!it||!vt.__zr)&&vt.__isRendered){var dt=vt.getPrevPaintRect();dt&&ct(dt)}}var ut;do{ut=!1;for(var st=0;st<M.length;){if(M[st].isZero()){M.splice(st,1);continue}for(var yt=st+1;yt<M.length;)M[st].intersect(M[yt])?(ut=!0,M[st].union(M[yt]),M.splice(yt,1)):yt++;st++}}while(ut);return this._paintRects=M,M},I.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},I.prototype.resize=function(A,C){var E=this.dpr,O=this.dom,M=O.style,L=this.domBack;M&&(M.width=A+"px",M.height=C+"px"),O.width=A*E,O.height=C*E,L&&(L.width=A*E,L.height=C*E,E!==1&&this.ctxBack.scale(E,E))},I.prototype.clear=function(A,C,E){var O=this.dom,M=this.ctx,L=O.width,H=O.height;C=C||this.clearColor;var U=this.motionBlur&&!A,ct=this.lastFrameAlpha,st=this.dpr,vt=this;U&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(O,0,0,L/st,H/st));var it=this.domBack;function dt(St,ut,yt,Ot){if(M.clearRect(St,ut,yt,Ot),C&&C!=="transparent"){var At=void 0;bt.x(C)?(At=C.__canvasGradient||Object(ot.a)(M,C,{x:0,y:0,width:yt,height:Ot}),C.__canvasGradient=At):bt.y(C)&&(At=Object(gt.c)(M,C,{dirty:function(){vt.setUnpainted(),vt.__painter.refresh()}})),M.save(),M.fillStyle=At||C,M.fillRect(St,ut,yt,Ot),M.restore()}U&&(M.save(),M.globalAlpha=ct,M.drawImage(it,St,ut,yt,Ot),M.restore())}!E||U?dt(0,0,L,H):E.length&&bt.k(E,function(St){dt(St.x*st,St.y*st,St.width*st,St.height*st)})},I}(ft.a),F=at,Z=b("/FtT"),W=b("QO9Q"),ht=1e5,q=314159,g=.01,et=.001;function $(G){return G?G.__builtin__?!0:!(typeof G.resize!="function"||typeof G.refresh!="function"):!1}function N(G,I){var A=document.createElement("div");return A.style.cssText=["position:relative","width:"+G+"px","height:"+I+"px","padding:0","margin:0","border-width:0"].join(";")+";",A}var Y=function(){function G(I,A,C,E){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var O=!I.nodeName||I.nodeName.toUpperCase()==="CANVAS";this._opts=C=bt.m({},C||{}),this.dpr=C.devicePixelRatio||B.e,this._singleCanvas=O,this.root=I;var M=I.style;M&&(bt.j(I),I.innerHTML=""),this.storage=A;var L=this._zlevelList;this._prevDisplayList=[];var H=this._layers;if(O){var ct=I,st=ct.width,vt=ct.height;C.width!=null&&(st=C.width),C.height!=null&&(vt=C.height),this.dpr=C.devicePixelRatio||1,ct.width=st*this.dpr,ct.height=vt*this.dpr,this._width=st,this._height=vt;var it=new F(ct,this,this.dpr);it.__builtin__=!0,it.initContext(),H[q]=it,it.zlevel=q,L.push(q),this._domRoot=I}else{this._width=Object(ot.b)(I,0,C),this._height=Object(ot.b)(I,1,C);var U=this._domRoot=N(this._width,this._height);I.appendChild(U)}}return G.prototype.getType=function(){return"canvas"},G.prototype.isSingleCanvas=function(){return this._singleCanvas},G.prototype.getViewportRoot=function(){return this._domRoot},G.prototype.getViewportRootOffset=function(){var I=this.getViewportRoot();if(I)return{offsetLeft:I.offsetLeft||0,offsetTop:I.offsetTop||0}},G.prototype.refresh=function(I){var A=this.storage.getDisplayList(!0),C=this._prevDisplayList,E=this._zlevelList;this._redrawId=Math.random(),this._paintList(A,C,I,this._redrawId);for(var O=0;O<E.length;O++){var M=E[O],L=this._layers[M];if(!L.__builtin__&&L.refresh){var H=O===0?this._backgroundColor:null;L.refresh(H)}}return this._opts.useDirtyRect&&(this._prevDisplayList=A.slice()),this},G.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},G.prototype._paintHoverList=function(I){var A=I.length,C=this._hoverlayer;if(C&&C.clear(),!!A){for(var E={inHover:!0,viewWidth:this._width,viewHeight:this._height},O,M=0;M<A;M++){var L=I[M];L.__inHover&&(C||(C=this._hoverlayer=this.getLayer(ht)),O||(O=C.ctx,O.save()),Object(gt.a)(O,L,E,M===A-1))}O&&O.restore()}},G.prototype.getHoverLayer=function(){return this.getLayer(ht)},G.prototype.paintOne=function(I,A){Object(gt.b)(I,A)},G.prototype._paintList=function(I,A,C,E){if(this._redrawId===E){C=C||!1,this._updateLayerStatus(I);var O=this._doPaintList(I,A,C),M=O.finished,L=O.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),L&&this._paintHoverList(I),M)this.eachLayer(function(U){U.afterBrush&&U.afterBrush()});else{var H=this;Object(Z.a)(function(){H._paintList(I,A,C,E)})}}},G.prototype._compositeManually=function(){var I=this.getLayer(q).ctx,A=this._domRoot.width,C=this._domRoot.height;I.clearRect(0,0,A,C),this.eachBuiltinLayer(function(E){E.virtual&&I.drawImage(E.dom,0,0,A,C)})},G.prototype._doPaintList=function(I,A,C){for(var E=this,O=[],M=this._opts.useDirtyRect,L=0;L<this._zlevelList.length;L++){var H=this._zlevelList[L],U=this._layers[H];U.__builtin__&&U!==this._hoverlayer&&(U.__dirty||C)&&O.push(U)}for(var ct=!0,st=!1,vt=function(St){var ut=O[St],yt=ut.ctx,Ot=M&&ut.createRepaintRects(I,A,it._width,it._height),At=C?ut.__startIndex:ut.__drawIndex,It=!C&&ut.incremental&&Date.now,Ct=It&&Date.now(),Ft=ut.zlevel===it._zlevelList[0]?it._backgroundColor:null;if(ut.__startIndex===ut.__endIndex)ut.clear(!1,Ft,Ot);else if(At===ut.__startIndex){var zt=I[At];(!zt.incremental||!zt.notClear||C)&&ut.clear(!1,Ft,Ot)}At===-1&&(console.error("For some unknown reason. drawIndex is -1"),At=ut.__startIndex);var Xt,ie=function(Ce){var Fe={inHover:!1,allClipped:!1,prevEl:null,viewWidth:E._width,viewHeight:E._height};for(Xt=At;Xt<ut.__endIndex;Xt++){var Bt=I[Xt];if(Bt.__inHover&&(st=!0),E._doPaintEl(Bt,ut,M,Ce,Fe,Xt===ut.__endIndex-1),It){var Tt=Date.now()-Ct;if(Tt>15)break}}Fe.prevElClipPaths&&yt.restore()};if(Ot)if(Ot.length===0)Xt=ut.__endIndex;else for(var oe=it.dpr,he=0;he<Ot.length;++he){var be=Ot[he];yt.save(),yt.beginPath(),yt.rect(be.x*oe,be.y*oe,be.width*oe,be.height*oe),yt.clip(),ie(be),yt.restore()}else yt.save(),ie(),yt.restore();ut.__drawIndex=Xt,ut.__drawIndex<ut.__endIndex&&(ct=!1)},it=this,dt=0;dt<O.length;dt++)vt(dt);return W.a.wxa&&bt.k(this._layers,function(St){St&&St.ctx&&St.ctx.draw&&St.ctx.draw()}),{finished:ct,needsRefreshHover:st}},G.prototype._doPaintEl=function(I,A,C,E,O,M){var L=A.ctx;if(C){var H=I.getPaintRect();(!E||H&&H.intersect(E))&&(Object(gt.a)(L,I,O,M),I.setPrevPaintRect(H))}else Object(gt.a)(L,I,O,M)},G.prototype.getLayer=function(I,A){this._singleCanvas&&!this._needsManuallyCompositing&&(I=q);var C=this._layers[I];return C||(C=new F("zr_"+I,this,this.dpr),C.zlevel=I,C.__builtin__=!0,this._layerConfig[I]?bt.I(C,this._layerConfig[I],!0):this._layerConfig[I-g]&&bt.I(C,this._layerConfig[I-g],!0),A&&(C.virtual=A),this.insertLayer(I,C),C.initContext()),C},G.prototype.insertLayer=function(I,A){var C=this._layers,E=this._zlevelList,O=E.length,M=this._domRoot,L=null,H=-1;if(!C[I]&&!!$(A)){if(O>0&&I>E[0]){for(H=0;H<O-1&&!(E[H]<I&&E[H+1]>I);H++);L=C[E[H]]}if(E.splice(H+1,0,I),C[I]=A,!A.virtual)if(L){var U=L.dom;U.nextSibling?M.insertBefore(A.dom,U.nextSibling):M.appendChild(A.dom)}else M.firstChild?M.insertBefore(A.dom,M.firstChild):M.appendChild(A.dom);A.__painter=this}},G.prototype.eachLayer=function(I,A){for(var C=this._zlevelList,E=0;E<C.length;E++){var O=C[E];I.call(A,this._layers[O],O)}},G.prototype.eachBuiltinLayer=function(I,A){for(var C=this._zlevelList,E=0;E<C.length;E++){var O=C[E],M=this._layers[O];M.__builtin__&&I.call(A,M,O)}},G.prototype.eachOtherLayer=function(I,A){for(var C=this._zlevelList,E=0;E<C.length;E++){var O=C[E],M=this._layers[O];M.__builtin__||I.call(A,M,O)}},G.prototype.getLayers=function(){return this._layers},G.prototype._updateLayerStatus=function(I){this.eachBuiltinLayer(function(st,vt){st.__dirty=st.__used=!1});function A(st){O&&(O.__endIndex!==st&&(O.__dirty=!0),O.__endIndex=st)}if(this._singleCanvas)for(var C=1;C<I.length;C++){var E=I[C];if(E.zlevel!==I[C-1].zlevel||E.incremental){this._needsManuallyCompositing=!0;break}}var O=null,M=0,L,H;for(H=0;H<I.length;H++){var E=I[H],U=E.zlevel,ct=void 0;L!==U&&(L=U,M=0),E.incremental?(ct=this.getLayer(U+et,this._needsManuallyCompositing),ct.incremental=!0,M=1):ct=this.getLayer(U+(M>0?g:0),this._needsManuallyCompositing),ct.__builtin__||bt.G("ZLevel "+U+" has been used by unkown layer "+ct.id),ct!==O&&(ct.__used=!0,ct.__startIndex!==H&&(ct.__dirty=!0),ct.__startIndex=H,ct.incremental?ct.__drawIndex=-1:ct.__drawIndex=H,A(H),O=ct),E.__dirty&z.a&&!E.__inHover&&(ct.__dirty=!0,ct.incremental&&ct.__drawIndex<0&&(ct.__drawIndex=H))}A(H),this.eachBuiltinLayer(function(st,vt){!st.__used&&st.getElementCount()>0&&(st.__dirty=!0,st.__startIndex=st.__endIndex=st.__drawIndex=0),st.__dirty&&st.__drawIndex<0&&(st.__drawIndex=st.__startIndex)})},G.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},G.prototype._clearLayer=function(I){I.clear()},G.prototype.setBackgroundColor=function(I){this._backgroundColor=I,bt.k(this._layers,function(A){A.setUnpainted()})},G.prototype.configLayer=function(I,A){if(A){var C=this._layerConfig;C[I]?bt.I(C[I],A,!0):C[I]=A;for(var E=0;E<this._zlevelList.length;E++){var O=this._zlevelList[E];if(O===I||O===I+g){var M=this._layers[O];bt.I(M,C[I],!0)}}}},G.prototype.delLayer=function(I){var A=this._layers,C=this._zlevelList,E=A[I];!E||(E.dom.parentNode.removeChild(E.dom),delete A[I],C.splice(bt.r(C,I),1))},G.prototype.resize=function(I,A){if(this._domRoot.style){var C=this._domRoot;C.style.display="none";var E=this._opts,O=this.root;if(I!=null&&(E.width=I),A!=null&&(E.height=A),I=Object(ot.b)(O,0,E),A=Object(ot.b)(O,1,E),C.style.display="",this._width!==I||A!==this._height){C.style.width=I+"px",C.style.height=A+"px";for(var M in this._layers)this._layers.hasOwnProperty(M)&&this._layers[M].resize(I,A);this.refresh(!0)}this._width=I,this._height=A}else{if(I==null||A==null)return;this._width=I,this._height=A,this.getLayer(q).resize(I,A)}return this},G.prototype.clearLayer=function(I){var A=this._layers[I];A&&A.clear()},G.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},G.prototype.getRenderedCanvas=function(I){if(I=I||{},this._singleCanvas&&!this._compositeManually)return this._layers[q].dom;var A=new F("image",this,I.pixelRatio||this.dpr);A.initContext(),A.clear(!1,I.backgroundColor||this._backgroundColor);var C=A.ctx;if(I.pixelRatio<=this.dpr){this.refresh();var E=A.dom.width,O=A.dom.height;this.eachLayer(function(st){st.__builtin__?C.drawImage(st.dom,0,0,E,O):st.renderToCanvas&&(C.save(),st.renderToCanvas(C),C.restore())})}else for(var M={inHover:!1,viewWidth:this._width,viewHeight:this._height},L=this.storage.getDisplayList(!0),H=0,U=L.length;H<U;H++){var ct=L[H];Object(gt.a)(C,ct,M,H===U-1)}return A.dom},G.prototype.getWidth=function(){return this._width},G.prototype.getHeight=function(){return this._height},G}(),K=Y;function V(G){G.registerPainter("canvas",K)}},htXI:function(je,nt,b){"use strict";b.d(nt,"f",function(){return G}),b.d(nt,"i",function(){return A}),b.d(nt,"a",function(){return C}),b.d(nt,"g",function(){return E}),b.d(nt,"h",function(){return O}),b.d(nt,"c",function(){return M}),b.d(nt,"b",function(){return L}),b.d(nt,"e",function(){return U}),b.d(nt,"j",function(){return ct}),b.d(nt,"d",function(){return st}),b.d(nt,"k",function(){return vt});var B=b("bPXU"),bt=b("UNs0"),k=b("GYvh"),ft=b("2zTA"),ot=b("Ju5J"),gt=b("uSNo"),lt=b("caCy"),z=b("c5Gk"),X=b("7M1A"),J=b("H9JY"),at=ft.a.prototype,F=k.a.prototype,Z=X.v,W=Math.floor,ht=Math.ceil,q=Math.pow,g=Math.log,et=function(it){Object(z.a)(dt,it);function dt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="log",St.base=10,St._originalScale=new k.a,St._interval=0,St}return dt.prototype.getTicks=function(St){var ut=this._originalScale,yt=this._extent,Ot=ut.getExtent(),At=F.getTicks.call(this,St);return B.H(At,function(It){var Ct=It.value,Ft=X.v(q(this.base,Ct));return Ft=Ct===yt[0]&&this._fixMin?N(Ft,Ot[0]):Ft,Ft=Ct===yt[1]&&this._fixMax?N(Ft,Ot[1]):Ft,{value:Ft}},this)},dt.prototype.setExtent=function(St,ut){var yt=this.base;St=g(St)/g(yt),ut=g(ut)/g(yt),F.setExtent.call(this,St,ut)},dt.prototype.getExtent=function(){var St=this.base,ut=at.getExtent.call(this);ut[0]=q(St,ut[0]),ut[1]=q(St,ut[1]);var yt=this._originalScale,Ot=yt.getExtent();return this._fixMin&&(ut[0]=N(ut[0],Ot[0])),this._fixMax&&(ut[1]=N(ut[1],Ot[1])),ut},dt.prototype.unionExtent=function(St){this._originalScale.unionExtent(St);var ut=this.base;St[0]=g(St[0])/g(ut),St[1]=g(St[1])/g(ut),at.unionExtent.call(this,St)},dt.prototype.unionExtentFromData=function(St,ut){this.unionExtent(St.getApproximateExtent(ut))},dt.prototype.calcNiceTicks=function(St){St=St||10;var ut=this._extent,yt=ut[1]-ut[0];if(!(yt===Infinity||yt<=0)){var Ot=X.r(yt),At=St/yt*Ot;for(At<=.5&&(Ot*=10);!isNaN(Ot)&&Math.abs(Ot)<1&&Math.abs(Ot)>0;)Ot*=10;var It=[X.v(ht(ut[0]/Ot)*Ot),X.v(W(ut[1]/Ot)*Ot)];this._interval=Ot,this._niceExtent=It}},dt.prototype.calcNiceExtent=function(St){F.calcNiceExtent.call(this,St),this._fixMin=St.fixMin,this._fixMax=St.fixMax},dt.prototype.parse=function(St){return St},dt.prototype.contain=function(St){return St=g(St)/g(this.base),J.a(St,this._extent)},dt.prototype.normalize=function(St){return St=g(St)/g(this.base),J.f(St,this._extent)},dt.prototype.scale=function(St){return St=J.g(St,this._extent),q(this.base,St)},dt.type="log",dt}(ft.a),$=et.prototype;$.getMinorTicks=F.getMinorTicks,$.getLabel=F.getLabel;function N(it,dt){return Z(it,X.g(dt))}ft.a.registerClass(et);var Y=et,K=b("70Nz"),V=b("9jB8");function G(it,dt){var St=it.type,ut=Object(V.a)(it,dt,it.getExtent()).calculate();it.setBlank(ut.isBlank);var yt=ut.min,Ot=ut.max,At=dt.ecModel;if(At&&St==="time"){var It=Object(ot.e)("bar",At),Ct=!1;if(B.k(It,function(Xt){Ct=Ct||Xt.getBaseAxis()===dt.axis}),Ct){var Ft=Object(ot.d)(It),zt=I(yt,Ot,dt,Ft);yt=zt.min,Ot=zt.max}}return{extent:[yt,Ot],fixMin:ut.minFixed,fixMax:ut.maxFixed}}function I(it,dt,St,ut){var yt=St.axis.getExtent(),Ot=yt[1]-yt[0],At=Object(ot.f)(ut,St.axis);if(At===void 0)return{min:it,max:dt};var It=Infinity;B.k(At,function(oe){It=Math.min(oe.offset,It)});var Ct=-Infinity;B.k(At,function(oe){Ct=Math.max(oe.offset+oe.width,Ct)}),It=Math.abs(It),Ct=Math.abs(Ct);var Ft=It+Ct,zt=dt-it,Xt=1-(It+Ct)/Ot,ie=zt/Xt-zt;return dt+=ie*(Ct/Ft),it-=ie*(It/Ft),{min:it,max:dt}}function A(it,dt){var St=dt,ut=G(it,St),yt=ut.extent,Ot=St.get("splitNumber");it instanceof Y&&(it.base=St.get("logBase"));var At=it.type,It=St.get("interval"),Ct=At==="interval"||At==="time";it.setExtent(yt[0],yt[1]),it.calcNiceExtent({splitNumber:Ot,fixMin:ut.fixMin,fixMax:ut.fixMax,minInterval:Ct?St.get("minInterval"):null,maxInterval:Ct?St.get("maxInterval"):null}),It!=null&&it.setInterval&&it.setInterval(It)}function C(it,dt){if(dt=dt||it.get("type"),dt)switch(dt){case"category":return new bt.a({ordinalMeta:it.getOrdinalMeta?it.getOrdinalMeta():it.getCategories(),extent:[Infinity,-Infinity]});case"time":return new lt.a({locale:it.ecModel.getLocaleModel(),useUTC:it.ecModel.get("useUTC")});default:return new(ft.a.getClass(dt)||k.a)}}function E(it){var dt=it.scale.getExtent(),St=dt[0],ut=dt[1];return!(St>0&&ut>0||St<0&&ut<0)}function O(it){var dt=it.getLabelModel().get("formatter"),St=it.type==="category"?it.scale.getExtent()[0]:null;return it.scale.type==="time"?function(ut){return function(yt,Ot){return it.scale.getFormattedLabel(yt,Ot,ut)}}(dt):B.C(dt)?function(ut){return function(yt){var Ot=it.scale.getLabel(yt),At=ut.replace("{value}",Ot!=null?Ot:"");return At}}(dt):B.w(dt)?function(ut){return function(yt,Ot){return St!=null&&(Ot=yt.value-St),ut(M(it,yt),Ot,yt.level!=null?{level:yt.level}:null)}}(dt):function(ut){return it.scale.getLabel(ut)}}function M(it,dt){return it.type==="category"?it.scale.getLabel(dt):dt.value}function L(it){var dt=it.model,St=it.scale;if(!(!dt.get(["axisLabel","show"])||St.isBlank())){var ut,yt,Ot=St.getExtent();St instanceof bt.a?yt=St.count():(ut=St.getTicks(),yt=ut.length);var At=it.getLabelModel(),It=O(it),Ct,Ft=1;yt>40&&(Ft=Math.ceil(yt/40));for(var zt=0;zt<yt;zt+=Ft){var Xt=ut?ut[zt]:{value:Ot[0]+zt},ie=It(Xt,zt),oe=At.getTextRect(ie),he=H(oe,At.get("rotate")||0);Ct?Ct.union(he):Ct=he}return Ct}}function H(it,dt){var St=dt*Math.PI/180,ut=it.width,yt=it.height,Ot=ut*Math.abs(Math.cos(St))+Math.abs(yt*Math.sin(St)),At=ut*Math.abs(Math.sin(St))+Math.abs(yt*Math.cos(St)),It=new gt.a(it.x,it.y,Ot,At);return It}function U(it){var dt=it.get("interval");return dt==null?"auto":dt}function ct(it){return it.type==="category"&&U(it.getLabelModel())===0}function st(it,dt){var St={};return B.k(it.mapDimensionsAll(dt),function(ut){St[Object(K.b)(it,ut)]=!0}),B.F(St)}function vt(it,dt,St){dt&&B.k(st(dt,St),function(ut){var yt=dt.getApproximateExtent(ut);yt[0]<it[0]&&(it[0]=yt[0]),yt[1]>it[1]&&(it[1]=yt[1])})}},i5AE:function(je,nt,b){"use strict";b.d(nt,"b",function(){return gt}),b.d(nt,"c",function(){return z}),b.d(nt,"e",function(){return X}),b.d(nt,"a",function(){return at}),b.d(nt,"f",function(){return F}),b.d(nt,"g",function(){return Z}),b.d(nt,"d",function(){return W});var B=b("QO9Q"),bt=b("tMOh"),k=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ft=[],ot=B.a.browser.firefox&&+B.a.browser.version.split(".")[0]<39;function gt(ht,q,g,et){return g=g||{},et?lt(ht,q,g):ot&&q.layerX!=null&&q.layerX!==q.offsetX?(g.zrX=q.layerX,g.zrY=q.layerY):q.offsetX!=null?(g.zrX=q.offsetX,g.zrY=q.offsetY):lt(ht,q,g),g}function lt(ht,q,g){if(B.a.domSupported&&ht.getBoundingClientRect){var et=q.clientX,$=q.clientY;if(Object(bt.a)(ht)){var N=ht.getBoundingClientRect();g.zrX=et-N.left,g.zrY=$-N.top;return}else if(Object(bt.b)(ft,ht,et,$)){g.zrX=ft[0],g.zrY=ft[1];return}}g.zrX=g.zrY=0}function z(ht){return ht||window.event}function X(ht,q,g){if(q=z(q),q.zrX!=null)return q;var et=q.type,$=et&&et.indexOf("touch")>=0;if($){var Y=et!=="touchend"?q.targetTouches[0]:q.changedTouches[0];Y&&gt(ht,Y,q,g)}else{gt(ht,q,q,g);var N=J(q);q.zrDelta=N?N/120:-(q.detail||0)/3}var K=q.button;return q.which==null&&K!==void 0&&k.test(q.type)&&(q.which=K&1?1:K&2?3:K&4?2:0),q}function J(ht){var q=ht.wheelDelta;if(q)return q;var g=ht.deltaX,et=ht.deltaY;if(g==null||et==null)return q;var $=Math.abs(et!==0?et:g),N=et>0?-1:et<0?1:g>0?-1:1;return 3*$*N}function at(ht,q,g,et){ht.addEventListener(q,g,et)}function F(ht,q,g,et){ht.removeEventListener(q,g,et)}var Z=function(ht){ht.preventDefault(),ht.stopPropagation(),ht.cancelBubble=!0};function W(ht){return ht.which===2||ht.which===3}},iAFd:function(je,nt,b){"use strict";var B=function(){function bt(k,ft){this.x=k||0,this.y=ft||0}return bt.prototype.copy=function(k){return this.x=k.x,this.y=k.y,this},bt.prototype.clone=function(){return new bt(this.x,this.y)},bt.prototype.set=function(k,ft){return this.x=k,this.y=ft,this},bt.prototype.equal=function(k){return k.x===this.x&&k.y===this.y},bt.prototype.add=function(k){return this.x+=k.x,this.y+=k.y,this},bt.prototype.scale=function(k){this.x*=k,this.y*=k},bt.prototype.scaleAndAdd=function(k,ft){this.x+=k.x*ft,this.y+=k.y*ft},bt.prototype.sub=function(k){return this.x-=k.x,this.y-=k.y,this},bt.prototype.dot=function(k){return this.x*k.x+this.y*k.y},bt.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},bt.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},bt.prototype.normalize=function(){var k=this.len();return this.x/=k,this.y/=k,this},bt.prototype.distance=function(k){var ft=this.x-k.x,ot=this.y-k.y;return Math.sqrt(ft*ft+ot*ot)},bt.prototype.distanceSquare=function(k){var ft=this.x-k.x,ot=this.y-k.y;return ft*ft+ot*ot},bt.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},bt.prototype.transform=function(k){if(!!k){var ft=this.x,ot=this.y;return this.x=k[0]*ft+k[2]*ot+k[4],this.y=k[1]*ft+k[3]*ot+k[5],this}},bt.prototype.toArray=function(k){return k[0]=this.x,k[1]=this.y,k},bt.prototype.fromArray=function(k){this.x=k[0],this.y=k[1]},bt.set=function(k,ft,ot){k.x=ft,k.y=ot},bt.copy=function(k,ft){k.x=ft.x,k.y=ft.y},bt.len=function(k){return Math.sqrt(k.x*k.x+k.y*k.y)},bt.lenSquare=function(k){return k.x*k.x+k.y*k.y},bt.dot=function(k,ft){return k.x*ft.x+k.y*ft.y},bt.add=function(k,ft,ot){k.x=ft.x+ot.x,k.y=ft.y+ot.y},bt.sub=function(k,ft,ot){k.x=ft.x-ot.x,k.y=ft.y-ot.y},bt.scale=function(k,ft,ot){k.x=ft.x*ot,k.y=ft.y*ot},bt.scaleAndAdd=function(k,ft,ot,gt){k.x=ft.x+ot.x*gt,k.y=ft.y+ot.y*gt},bt.lerp=function(k,ft,ot,gt){var lt=1-gt;k.x=lt*ft.x+gt*ot.x,k.y=lt*ft.y+gt*ot.y},bt}();nt.a=B},iXYE:function(je,nt,b){"use strict";var B=b("eASH"),bt=b("k/Px"),k=b("uSNo"),ft=b("HIFk"),ot=b("KapR"),gt=b("bPXU"),lt=b("y9SG"),z=b("Xy3h"),X=b("teyC"),J="__zr_normal__",at=B.a.concat(["ignore"]),F=Object(gt.N)(B.a,function(V,G){return V[G]=!0,V},{ignore:!1}),Z={},W=new k.a(0,0,0,0),ht=function(){function V(G){this.id=Object(gt.p)(),this.animators=[],this.currentStates=[],this.states={},this._init(G)}return V.prototype._init=function(G){this.attr(G)},V.prototype.drift=function(G,I,A){switch(this.draggable){case"horizontal":I=0;break;case"vertical":G=0;break}var C=this.transform;C||(C=this.transform=[1,0,0,1,0,0]),C[4]+=G,C[5]+=I,this.decomposeTransform(),this.markRedraw()},V.prototype.beforeUpdate=function(){},V.prototype.afterUpdate=function(){},V.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},V.prototype.updateInnerText=function(G){var I=this._textContent;if(I&&(!I.ignore||G)){this.textConfig||(this.textConfig={});var A=this.textConfig,C=A.local,E=I.innerTransformable,O=void 0,M=void 0,L=!1;E.parent=C?this:null;var H=!1;if(E.copyTransform(I),A.position!=null){var U=W;A.layoutRect?U.copy(A.layoutRect):U.copy(this.getBoundingRect()),C||U.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Z,A,U):Object(ot.c)(Z,A,U),E.x=Z.x,E.y=Z.y,O=Z.align,M=Z.verticalAlign;var ct=A.origin;if(ct&&A.rotation!=null){var st=void 0,vt=void 0;ct==="center"?(st=U.width*.5,vt=U.height*.5):(st=Object(ot.g)(ct[0],U.width),vt=Object(ot.g)(ct[1],U.height)),H=!0,E.originX=-E.x+st+(C?0:U.x),E.originY=-E.y+vt+(C?0:U.y)}}A.rotation!=null&&(E.rotation=A.rotation);var it=A.offset;it&&(E.x+=it[0],E.y+=it[1],H||(E.originX=-it[0],E.originY=-it[1]));var dt=A.inside==null?typeof A.position=="string"&&A.position.indexOf("inside")>=0:A.inside,St=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ut=void 0,yt=void 0,Ot=void 0;dt&&this.canBeInsideText()?(ut=A.insideFill,yt=A.insideStroke,(ut==null||ut==="auto")&&(ut=this.getInsideTextFill()),(yt==null||yt==="auto")&&(yt=this.getInsideTextStroke(ut),Ot=!0)):(ut=A.outsideFill,yt=A.outsideStroke,(ut==null||ut==="auto")&&(ut=this.getOutsideFill()),(yt==null||yt==="auto")&&(yt=this.getOutsideStroke(ut),Ot=!0)),ut=ut||"#000",(ut!==St.fill||yt!==St.stroke||Ot!==St.autoStroke||O!==St.align||M!==St.verticalAlign)&&(L=!0,St.fill=ut,St.stroke=yt,St.autoStroke=Ot,St.align=O,St.verticalAlign=M,I.setDefaultTextStyle(St)),I.__dirty|=X.a,L&&I.dirtyStyle(!0)}},V.prototype.canBeInsideText=function(){return!0},V.prototype.getInsideTextFill=function(){return"#fff"},V.prototype.getInsideTextStroke=function(G){return"#000"},V.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?lt.d:lt.a},V.prototype.getOutsideStroke=function(G){var I=this.__zr&&this.__zr.getBackgroundColor(),A=typeof I=="string"&&Object(z.parse)(I);A||(A=[255,255,255,1]);for(var C=A[3],E=this.__zr.isDarkMode(),O=0;O<3;O++)A[O]=A[O]*C+(E?0:255)*(1-C);return A[3]=1,Object(z.stringify)(A,"rgba")},V.prototype.traverse=function(G,I){},V.prototype.attrKV=function(G,I){G==="textConfig"?this.setTextConfig(I):G==="textContent"?this.setTextContent(I):G==="clipPath"?this.setClipPath(I):G==="extra"?(this.extra=this.extra||{},Object(gt.m)(this.extra,I)):this[G]=I},V.prototype.hide=function(){this.ignore=!0,this.markRedraw()},V.prototype.show=function(){this.ignore=!1,this.markRedraw()},V.prototype.attr=function(G,I){if(typeof G=="string")this.attrKV(G,I);else if(Object(gt.A)(G))for(var A=G,C=Object(gt.F)(A),E=0;E<C.length;E++){var O=C[E];this.attrKV(O,G[O])}return this.markRedraw(),this},V.prototype.saveCurrentToNormalState=function(G){this._innerSaveToNormal(G);for(var I=this._normalState,A=0;A<this.animators.length;A++){var C=this.animators[A],E=C.__fromStateTransition;if(!(C.getLoop()||E&&E!==J)){var O=C.targetName,M=O?I[O]:I;C.saveTo(M)}}},V.prototype._innerSaveToNormal=function(G){var I=this._normalState;I||(I=this._normalState={}),G.textConfig&&!I.textConfig&&(I.textConfig=this.textConfig),this._savePrimaryToNormal(G,I,at)},V.prototype._savePrimaryToNormal=function(G,I,A){for(var C=0;C<A.length;C++){var E=A[C];G[E]!=null&&!(E in I)&&(I[E]=this[E])}},V.prototype.hasState=function(){return this.currentStates.length>0},V.prototype.getState=function(G){return this.states[G]},V.prototype.ensureState=function(G){var I=this.states;return I[G]||(I[G]={}),I[G]},V.prototype.clearStates=function(G){this.useState(J,!1,G)},V.prototype.useState=function(G,I,A,C){var E=G===J,O=this.hasState();if(!(!O&&E)){var M=this.currentStates,L=this.stateTransition;if(!(Object(gt.r)(M,G)>=0&&(I||M.length===1))){var H;if(this.stateProxy&&!E&&(H=this.stateProxy(G)),H||(H=this.states&&this.states[G]),!H&&!E){Object(gt.G)("State "+G+" not exists.");return}E||this.saveCurrentToNormalState(H);var U=!!(H&&H.hoverLayer||C);U&&this._toggleHoverLayerFlag(!0),this._applyStateObj(G,H,this._normalState,I,!A&&!this.__inHover&&L&&L.duration>0,L);var ct=this._textContent,st=this._textGuide;return ct&&ct.useState(G,I,A,U),st&&st.useState(G,I,A,U),E?(this.currentStates=[],this._normalState={}):I?this.currentStates.push(G):this.currentStates=[G],this._updateAnimationTargets(),this.markRedraw(),!U&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~X.a),H}}},V.prototype.useStates=function(G,I,A){if(!G.length)this.clearStates();else{var C=[],E=this.currentStates,O=G.length,M=O===E.length;if(M){for(var L=0;L<O;L++)if(G[L]!==E[L]){M=!1;break}}if(M)return;for(var L=0;L<O;L++){var H=G[L],U=void 0;this.stateProxy&&(U=this.stateProxy(H,G)),U||(U=this.states[H]),U&&C.push(U)}var ct=C[O-1],st=!!(ct&&ct.hoverLayer||A);st&&this._toggleHoverLayerFlag(!0);var vt=this._mergeStates(C),it=this.stateTransition;this.saveCurrentToNormalState(vt),this._applyStateObj(G.join(","),vt,this._normalState,!1,!I&&!this.__inHover&&it&&it.duration>0,it);var dt=this._textContent,St=this._textGuide;dt&&dt.useStates(G,I,st),St&&St.useStates(G,I,st),this._updateAnimationTargets(),this.currentStates=G.slice(),this.markRedraw(),!st&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~X.a)}},V.prototype._updateAnimationTargets=function(){for(var G=0;G<this.animators.length;G++){var I=this.animators[G];I.targetName&&I.changeTarget(this[I.targetName])}},V.prototype.removeState=function(G){var I=Object(gt.r)(this.currentStates,G);if(I>=0){var A=this.currentStates.slice();A.splice(I,1),this.useStates(A)}},V.prototype.replaceState=function(G,I,A){var C=this.currentStates.slice(),E=Object(gt.r)(C,G),O=Object(gt.r)(C,I)>=0;E>=0?O?C.splice(E,1):C[E]=I:A&&!O&&C.push(I),this.useStates(C)},V.prototype.toggleState=function(G,I){I?this.useState(G,!0):this.removeState(G)},V.prototype._mergeStates=function(G){for(var I={},A,C=0;C<G.length;C++){var E=G[C];Object(gt.m)(I,E),E.textConfig&&(A=A||{},Object(gt.m)(A,E.textConfig))}return A&&(I.textConfig=A),I},V.prototype._applyStateObj=function(G,I,A,C,E,O){var M=!(I&&C);I&&I.textConfig?(this.textConfig=Object(gt.m)({},C?this.textConfig:A.textConfig),Object(gt.m)(this.textConfig,I.textConfig)):M&&A.textConfig&&(this.textConfig=A.textConfig);for(var L={},H=!1,U=0;U<at.length;U++){var ct=at[U],st=E&&F[ct];I&&I[ct]!=null?st?(H=!0,L[ct]=I[ct]):this[ct]=I[ct]:M&&A[ct]!=null&&(st?(H=!0,L[ct]=A[ct]):this[ct]=A[ct])}if(!E)for(var U=0;U<this.animators.length;U++){var vt=this.animators[U],it=vt.targetName;vt.getLoop()||vt.__changeFinalValue(it?(I||A)[it]:I||A)}H&&this._transitionState(G,L,O)},V.prototype._attachComponent=function(G){if(!(G.__zr&&!G.__hostTarget)&&G!==this){var I=this.__zr;I&&G.addSelfToZr(I),G.__zr=I,G.__hostTarget=this}},V.prototype._detachComponent=function(G){G.__zr&&G.removeSelfFromZr(G.__zr),G.__zr=null,G.__hostTarget=null},V.prototype.getClipPath=function(){return this._clipPath},V.prototype.setClipPath=function(G){this._clipPath&&this._clipPath!==G&&this.removeClipPath(),this._attachComponent(G),this._clipPath=G,this.markRedraw()},V.prototype.removeClipPath=function(){var G=this._clipPath;G&&(this._detachComponent(G),this._clipPath=null,this.markRedraw())},V.prototype.getTextContent=function(){return this._textContent},V.prototype.setTextContent=function(G){var I=this._textContent;I!==G&&(I&&I!==G&&this.removeTextContent(),G.innerTransformable=new B.c,this._attachComponent(G),this._textContent=G,this.markRedraw())},V.prototype.setTextConfig=function(G){this.textConfig||(this.textConfig={}),Object(gt.m)(this.textConfig,G),this.markRedraw()},V.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},V.prototype.removeTextContent=function(){var G=this._textContent;G&&(G.innerTransformable=null,this._detachComponent(G),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},V.prototype.getTextGuideLine=function(){return this._textGuide},V.prototype.setTextGuideLine=function(G){this._textGuide&&this._textGuide!==G&&this.removeTextGuideLine(),this._attachComponent(G),this._textGuide=G,this.markRedraw()},V.prototype.removeTextGuideLine=function(){var G=this._textGuide;G&&(this._detachComponent(G),this._textGuide=null,this.markRedraw())},V.prototype.markRedraw=function(){this.__dirty|=X.a;var G=this.__zr;G&&(this.__inHover?G.refreshHover():G.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},V.prototype.dirty=function(){this.markRedraw()},V.prototype._toggleHoverLayerFlag=function(G){this.__inHover=G;var I=this._textContent,A=this._textGuide;I&&(I.__inHover=G),A&&(A.__inHover=G)},V.prototype.addSelfToZr=function(G){if(this.__zr!==G){this.__zr=G;var I=this.animators;if(I)for(var A=0;A<I.length;A++)G.animation.addAnimator(I[A]);this._clipPath&&this._clipPath.addSelfToZr(G),this._textContent&&this._textContent.addSelfToZr(G),this._textGuide&&this._textGuide.addSelfToZr(G)}},V.prototype.removeSelfFromZr=function(G){if(!!this.__zr){this.__zr=null;var I=this.animators;if(I)for(var A=0;A<I.length;A++)G.animation.removeAnimator(I[A]);this._clipPath&&this._clipPath.removeSelfFromZr(G),this._textContent&&this._textContent.removeSelfFromZr(G),this._textGuide&&this._textGuide.removeSelfFromZr(G)}},V.prototype.animate=function(G,I,A){var C=G?this[G]:this,E=new bt.b(C,I,A);return G&&(E.targetName=G),this.addAnimator(E,G),E},V.prototype.addAnimator=function(G,I){var A=this.__zr,C=this;G.during(function(){C.updateDuringAnimation(I)}).done(function(){var E=C.animators,O=Object(gt.r)(E,G);O>=0&&E.splice(O,1)}),this.animators.push(G),A&&A.animation.addAnimator(G),A&&A.wakeUp()},V.prototype.updateDuringAnimation=function(G){this.markRedraw()},V.prototype.stopAnimation=function(G,I){for(var A=this.animators,C=A.length,E=[],O=0;O<C;O++){var M=A[O];!G||G===M.scope?M.stop(I):E.push(M)}return this.animators=E,this},V.prototype.animateTo=function(G,I,A){q(this,G,I,A)},V.prototype.animateFrom=function(G,I,A){q(this,G,I,A,!0)},V.prototype._transitionState=function(G,I,A,C){for(var E=q(this,I,A,C),O=0;O<E.length;O++)E[O].__fromStateTransition=G},V.prototype.getBoundingRect=function(){return null},V.prototype.getPaintRect=function(){return null},V.initDefaultProps=function(){var G=V.prototype;G.type="element",G.name="",G.ignore=G.silent=G.isGroup=G.draggable=G.dragging=G.ignoreClip=G.__inHover=!1,G.__dirty=X.a;var I={};function A(E,O,M){I[E+O+M]||(console.warn("DEPRECATED: '"+E+"' has been deprecated. use '"+O+"', '"+M+"' instead"),I[E+O+M]=!0)}function C(E,O,M,L){Object.defineProperty(G,E,{get:function(){if(!this[O]){var U=this[O]=[];H(this,U)}return this[O]},set:function(U){this[M]=U[0],this[L]=U[1],this[O]=U,H(this,U)}});function H(U,ct){Object.defineProperty(ct,0,{get:function(){return U[M]},set:function(st){U[M]=st}}),Object.defineProperty(ct,1,{get:function(){return U[L]},set:function(st){U[L]=st}})}}Object.defineProperty&&(C("position","_legacyPos","x","y"),C("scale","_legacyScale","scaleX","scaleY"),C("origin","_legacyOrigin","originX","originY"))}(),V}();Object(gt.K)(ht,ft.a),Object(gt.K)(ht,B.c);function q(V,G,I,A,C){I=I||{};var E=[];K(V,"",V,G,I,A,E,C);var O=E.length,M=!1,L=I.done,H=I.aborted,U=function(){M=!0,O--,O<=0&&(M?L&&L():H&&H())},ct=function(){O--,O<=0&&(M?L&&L():H&&H())};O||L&&L(),E.length>0&&I.during&&E[0].during(function(it,dt){I.during(dt)});for(var st=0;st<E.length;st++){var vt=E[st];U&&vt.done(U),ct&&vt.aborted(ct),I.force&&vt.duration(I.duration),vt.start(I.easing)}return E}function g(V,G,I){for(var A=0;A<I;A++)V[A]=G[A]}function et(V){return Object(gt.u)(V[0])}function $(V,G,I){if(Object(gt.u)(G[I]))if(Object(gt.u)(V[I])||(V[I]=[]),Object(gt.E)(G[I])){var A=G[I].length;V[I].length!==A&&(V[I]=new G[I].constructor(A),g(V[I],G[I],A))}else{var C=G[I],E=V[I],O=C.length;if(et(C))for(var M=C[0].length,L=0;L<O;L++)E[L]?g(E[L],C[L],M):E[L]=Array.prototype.slice.call(C[L]);else g(E,C,O);E.length=C.length}else V[I]=G[I]}function N(V,G){return V===G||Object(gt.u)(V)&&Object(gt.u)(G)&&Y(V,G)}function Y(V,G){var I=V.length;if(I!==G.length)return!1;for(var A=0;A<I;A++)if(V[A]!==G[A])return!1;return!0}function K(V,G,I,A,C,E,O,M){for(var L=Object(gt.F)(A),H=C.duration,U=C.delay,ct=C.additive,st=C.setToFinal,vt=!Object(gt.A)(E),it=V.animators,dt=[],St=0;St<L.length;St++){var ut=L[St],yt=A[ut];if(yt!=null&&I[ut]!=null&&(vt||E[ut]))if(Object(gt.A)(yt)&&!Object(gt.u)(yt)&&!Object(gt.x)(yt)){if(G){M||(I[ut]=yt,V.updateDuringAnimation(G));continue}K(V,ut,I[ut],yt,C,E&&E[ut],O,M)}else dt.push(ut);else M||(I[ut]=yt,V.updateDuringAnimation(G),dt.push(ut))}var Ot=dt.length;if(!ct&&Ot)for(var At=0;At<it.length;At++){var It=it[At];if(It.targetName===G){var Ct=It.stopTracks(dt);if(Ct){var Ft=Object(gt.r)(it,It);it.splice(Ft,1)}}}if(C.force||(dt=Object(gt.n)(dt,function(oe){return!N(A[oe],I[oe])}),Ot=dt.length),Ot>0||C.force&&!O.length){var zt=void 0,Xt=void 0,ie=void 0;if(M){Xt={},st&&(zt={});for(var At=0;At<Ot;At++){var ut=dt[At];Xt[ut]=I[ut],st?zt[ut]=A[ut]:I[ut]=A[ut]}}else if(st){ie={};for(var At=0;At<Ot;At++){var ut=dt[At];ie[ut]=Object(bt.a)(I[ut]),$(I,A,ut)}}var It=new bt.b(I,!1,!1,ct?Object(gt.n)(it,function(he){return he.targetName===G}):null);It.targetName=G,C.scope&&(It.scope=C.scope),st&&zt&&It.whenWithKeys(0,zt,dt),ie&&It.whenWithKeys(0,ie,dt),It.whenWithKeys(H==null?500:H,M?Xt:A,dt).delay(U||0),V.addAnimator(It,G),O.push(It)}}nt.a=ht},iYbX:function(je,nt,b){"use strict";b.d(nt,"e",function(){return gt}),b.d(nt,"b",function(){return lt}),b.d(nt,"c",function(){return z}),b.d(nt,"a",function(){return X}),b.d(nt,"d",function(){return J}),b.d(nt,"f",function(){return ht});var B=b("bPXU"),bt=b("BkaA"),k=b("ZXNb"),ft=b("ZlUk"),ot=function(){function q(g){this.data=g.data||(g.sourceFormat===bt.d?{}:[]),this.sourceFormat=g.sourceFormat||bt.h,this.seriesLayoutBy=g.seriesLayoutBy||bt.a,this.startIndex=g.startIndex||0,this.dimensionsDetectedCount=g.dimensionsDetectedCount,this.metaRawOption=g.metaRawOption;var et=this.dimensionsDefine=g.dimensionsDefine;if(et)for(var $=0;$<et.length;$++){var N=et[$];N.type==null&&Object(ft.b)(this,$)===ft.a.Must&&(N.type="ordinal")}}return q}();function gt(q){return q instanceof ot}function lt(q,g,et){et=et||J(q);var $=g.seriesLayoutBy,N=at(q,et,$,g.sourceHeader,g.dimensions),Y=new ot({data:q,sourceFormat:et,seriesLayoutBy:$,dimensionsDefine:N.dimensionsDefine,startIndex:N.startIndex,dimensionsDetectedCount:N.dimensionsDetectedCount,metaRawOption:Object(B.d)(g)});return Y}function z(q){return new ot({data:q,sourceFormat:Object(B.E)(q)?bt.g:bt.f})}function X(q){return new ot({data:q.data,sourceFormat:q.sourceFormat,seriesLayoutBy:q.seriesLayoutBy,dimensionsDefine:Object(B.d)(q.dimensionsDefine),startIndex:q.startIndex,dimensionsDetectedCount:q.dimensionsDetectedCount})}function J(q){var g=bt.h;if(Object(B.E)(q))g=bt.g;else if(Object(B.t)(q)){q.length===0&&(g=bt.c);for(var et=0,$=q.length;et<$;et++){var N=q[et];if(N!=null){if(Object(B.t)(N)){g=bt.c;break}else if(Object(B.A)(N)){g=bt.e;break}}}}else if(Object(B.A)(q)){for(var Y in q)if(Object(B.q)(q,Y)&&Object(B.u)(q[Y])){g=bt.d;break}}return g}function at(q,g,et,$,N){var Y,K;if(!q)return{dimensionsDefine:Z(N),startIndex:K,dimensionsDetectedCount:Y};if(g===bt.c){var V=q;$==="auto"||$==null?W(function(I){I!=null&&I!=="-"&&(Object(B.C)(I)?K==null&&(K=1):K=0)},et,V,10):K=Object(B.z)($)?$:$?1:0,!N&&K===1&&(N=[],W(function(I,A){N[A]=I!=null?I+"":""},et,V,Infinity)),Y=N?N.length:et===bt.b?V.length:V[0]?V[0].length:null}else if(g===bt.e)N||(N=F(q));else if(g===bt.d)N||(N=[],Object(B.k)(q,function(I,A){N.push(A)}));else if(g===bt.f){var G=Object(k.h)(q[0]);Y=Object(B.t)(G)&&G.length||1}else g===bt.g;return{startIndex:K,dimensionsDefine:Z(N),dimensionsDetectedCount:Y}}function F(q){for(var g=0,et;g<q.length&&!(et=q[g++]););if(et){var $=[];return Object(B.k)(et,function(N,Y){$.push(Y)}),$}}function Z(q){if(!!q){var g=Object(B.f)();return Object(B.H)(q,function(et,$){et=Object(B.A)(et)?et:{name:et};var N={name:et.name,displayName:et.displayName,type:et.type};if(N.name==null)return N;N.name+="",N.displayName==null&&(N.displayName=N.name);var Y=g.get(N.name);return Y?N.name+="-"+Y.count++:g.set(N.name,{count:1}),N})}}function W(q,g,et,$){if(g===bt.b)for(var N=0;N<et.length&&N<$;N++)q(et[N]?et[N][0]:null,N);else for(var Y=et[0]||[],N=0;N<Y.length&&N<$;N++)q(Y[N],N)}function ht(q){var g=q.sourceFormat;return g===bt.e||g===bt.d}},j4cP:function(je,nt,b){"use strict";b.d(nt,"e",function(){return A}),b.d(nt,"c",function(){return O}),b.d(nt,"b",function(){return M}),b.d(nt,"d",function(){return U}),b.d(nt,"a",function(){return ct});var B=b("iAFd"),bt=b("ryx4"),k=b("syXZ"),ft=b("I0j4"),ot=b("BubE"),gt=b("IyL0"),lt=b("bPXU"),z=b("OjCH"),X=b("FLFE"),J=b("GUjm"),at=Math.PI*2,F=ft.a.CMD,Z=["top","right","bottom","left"];function W(st,vt,it,dt,St){var ut=it.width,yt=it.height;switch(st){case"top":dt.set(it.x+ut/2,it.y-vt),St.set(0,-1);break;case"bottom":dt.set(it.x+ut/2,it.y+yt+vt),St.set(0,1);break;case"left":dt.set(it.x-vt,it.y+yt/2),St.set(-1,0);break;case"right":dt.set(it.x+ut+vt,it.y+yt/2),St.set(1,0);break}}function ht(st,vt,it,dt,St,ut,yt,Ot,At){yt-=st,Ot-=vt;var It=Math.sqrt(yt*yt+Ot*Ot);yt/=It,Ot/=It;var Ct=yt*it+st,Ft=Ot*it+vt;if(Math.abs(dt-St)%at<1e-4)return At[0]=Ct,At[1]=Ft,It-it;if(ut){var zt=dt;dt=Object(ot.a)(St),St=Object(ot.a)(zt)}else dt=Object(ot.a)(dt),St=Object(ot.a)(St);dt>St&&(St+=at);var Xt=Math.atan2(Ot,yt);if(Xt<0&&(Xt+=at),Xt>=dt&&Xt<=St||Xt+at>=dt&&Xt+at<=St)return At[0]=Ct,At[1]=Ft,It-it;var ie=it*Math.cos(dt)+st,oe=it*Math.sin(dt)+vt,he=it*Math.cos(St)+st,be=it*Math.sin(St)+vt,Ce=(ie-yt)*(ie-yt)+(oe-Ot)*(oe-Ot),Fe=(he-yt)*(he-yt)+(be-Ot)*(be-Ot);return Ce<Fe?(At[0]=ie,At[1]=oe,Math.sqrt(Ce)):(At[0]=he,At[1]=be,Math.sqrt(Fe))}function q(st,vt,it,dt,St,ut,yt,Ot){var At=St-st,It=ut-vt,Ct=it-st,Ft=dt-vt,zt=Math.sqrt(Ct*Ct+Ft*Ft);Ct/=zt,Ft/=zt;var Xt=At*Ct+It*Ft,ie=Xt/zt;Ot&&(ie=Math.min(Math.max(ie,0),1)),ie*=zt;var oe=yt[0]=st+ie*Ct,he=yt[1]=vt+ie*Ft;return Math.sqrt((oe-St)*(oe-St)+(he-ut)*(he-ut))}function g(st,vt,it,dt,St,ut,yt){it<0&&(st=st+it,it=-it),dt<0&&(vt=vt+dt,dt=-dt);var Ot=st+it,At=vt+dt,It=yt[0]=Math.min(Math.max(St,st),Ot),Ct=yt[1]=Math.min(Math.max(ut,vt),At);return Math.sqrt((It-St)*(It-St)+(Ct-ut)*(Ct-ut))}var et=[];function $(st,vt,it){var dt=g(vt.x,vt.y,vt.width,vt.height,st.x,st.y,et);return it.set(et[0],et[1]),dt}function N(st,vt,it){for(var dt=0,St=0,ut=0,yt=0,Ot,At,It=Infinity,Ct=vt.data,Ft=st.x,zt=st.y,Xt=0;Xt<Ct.length;){var ie=Ct[Xt++];Xt===1&&(dt=Ct[Xt],St=Ct[Xt+1],ut=dt,yt=St);var oe=It;switch(ie){case F.M:ut=Ct[Xt++],yt=Ct[Xt++],dt=ut,St=yt;break;case F.L:oe=q(dt,St,Ct[Xt],Ct[Xt+1],Ft,zt,et,!0),dt=Ct[Xt++],St=Ct[Xt++];break;case F.C:oe=Object(gt.e)(dt,St,Ct[Xt++],Ct[Xt++],Ct[Xt++],Ct[Xt++],Ct[Xt],Ct[Xt+1],Ft,zt,et),dt=Ct[Xt++],St=Ct[Xt++];break;case F.Q:oe=Object(gt.l)(dt,St,Ct[Xt++],Ct[Xt++],Ct[Xt],Ct[Xt+1],Ft,zt,et),dt=Ct[Xt++],St=Ct[Xt++];break;case F.A:var he=Ct[Xt++],be=Ct[Xt++],Ce=Ct[Xt++],Fe=Ct[Xt++],Bt=Ct[Xt++],Tt=Ct[Xt++];Xt+=1;var Mt=!!(1-Ct[Xt++]);Ot=Math.cos(Bt)*Ce+he,At=Math.sin(Bt)*Fe+be,Xt<=1&&(ut=Ot,yt=At);var Ut=(Ft-he)*Fe/Ce+he;oe=ht(he,be,Fe,Bt,Bt+Tt,Mt,Ut,zt,et),dt=Math.cos(Bt+Tt)*Ce+he,St=Math.sin(Bt+Tt)*Fe+be;break;case F.R:ut=dt=Ct[Xt++],yt=St=Ct[Xt++];var se=Ct[Xt++],ge=Ct[Xt++];oe=g(ut,yt,se,ge,Ft,zt,et);break;case F.Z:oe=q(dt,St,ut,yt,Ft,zt,et,!0),dt=ut,St=yt;break}oe<It&&(It=oe,it.set(et[0],et[1]))}return It}var Y=new B.a,K=new B.a,V=new B.a,G=new B.a,I=new B.a;function A(st,vt){if(!!st){var it=st.getTextGuideLine(),dt=st.getTextContent();if(!!(dt&&it)){var St=st.textGuideLineConfig||{},ut=[[0,0],[0,0],[0,0]],yt=St.candidates||Z,Ot=dt.getBoundingRect().clone();Ot.applyTransform(dt.getComputedTransform());var At=Infinity,It=St.anchor,Ct=st.getComputedTransform(),Ft=Ct&&Object(z.e)([],Ct),zt=vt.get("length2")||0;It&&V.copy(It);for(var Xt=0;Xt<yt.length;Xt++){var ie=yt[Xt];W(ie,0,Ot,Y,G),B.a.scaleAndAdd(K,Y,G,zt),K.transform(Ft);var oe=st.getBoundingRect(),he=It?It.distance(K):st instanceof bt.b?N(K,st.path,V):$(K,oe,V);he<At&&(At=he,K.transform(Ct),V.transform(Ct),V.toArray(ut[0]),K.toArray(ut[1]),Y.toArray(ut[2]))}O(ut,vt.get("minTurnAngle")),it.setShape({points:ut})}}}var C=[],E=new B.a;function O(st,vt){if(vt<=180&&vt>0){vt=vt/180*Math.PI,Y.fromArray(st[0]),K.fromArray(st[1]),V.fromArray(st[2]),B.a.sub(G,Y,K),B.a.sub(I,V,K);var it=G.len(),dt=I.len();if(!(it<.001||dt<.001)){G.scale(1/it),I.scale(1/dt);var St=G.dot(I),ut=Math.cos(vt);if(ut<St){var yt=q(K.x,K.y,V.x,V.y,Y.x,Y.y,C,!1);E.fromArray(C),E.scaleAndAdd(I,yt/Math.tan(Math.PI-vt));var Ot=V.x!==K.x?(E.x-K.x)/(V.x-K.x):(E.y-K.y)/(V.y-K.y);if(isNaN(Ot))return;Ot<0?B.a.copy(E,K):Ot>1&&B.a.copy(E,V),E.toArray(st[1])}}}}function M(st,vt,it){if(it<=180&&it>0){it=it/180*Math.PI,Y.fromArray(st[0]),K.fromArray(st[1]),V.fromArray(st[2]),B.a.sub(G,K,Y),B.a.sub(I,V,K);var dt=G.len(),St=I.len();if(!(dt<.001||St<.001)){G.scale(1/dt),I.scale(1/St);var ut=G.dot(vt),yt=Math.cos(it);if(ut<yt){var Ot=q(K.x,K.y,V.x,V.y,Y.x,Y.y,C,!1);E.fromArray(C);var At=Math.PI/2,It=Math.acos(I.dot(vt)),Ct=At+It-it;if(Ct>=At)B.a.copy(E,V);else{E.scaleAndAdd(I,Ot/Math.tan(Math.PI/2-Ct));var Ft=V.x!==K.x?(E.x-K.x)/(V.x-K.x):(E.y-K.y)/(V.y-K.y);if(isNaN(Ft))return;Ft<0?B.a.copy(E,K):Ft>1&&B.a.copy(E,V)}E.toArray(st[1])}}}}function L(st,vt,it,dt){var St=it==="normal",ut=St?st:st.ensureState(it);ut.ignore=vt;var yt=dt.get("smooth");yt&&yt===!0&&(yt=.3),ut.shape=ut.shape||{},yt>0&&(ut.shape.smooth=yt);var Ot=dt.getModel("lineStyle").getLineStyle();St?st.useStyle(Ot):ut.style=Ot}function H(st,vt){var it=vt.smooth,dt=vt.points;if(!!dt)if(st.moveTo(dt[0][0],dt[0][1]),it>0&&dt.length>=3){var St=X.f(dt[0],dt[1]),ut=X.f(dt[1],dt[2]);if(!St||!ut){st.lineTo(dt[1][0],dt[1][1]),st.lineTo(dt[2][0],dt[2][1]);return}var yt=Math.min(St,ut)*it,Ot=X.j([],dt[1],dt[0],yt/St),At=X.j([],dt[1],dt[2],yt/ut),It=X.j([],Ot,At,.5);st.bezierCurveTo(Ot[0],Ot[1],Ot[0],Ot[1],It[0],It[1]),st.bezierCurveTo(At[0],At[1],At[0],At[1],dt[2][0],dt[2][1])}else for(var Ct=1;Ct<dt.length;Ct++)st.lineTo(dt[Ct][0],dt[Ct][1])}function U(st,vt,it){var dt=st.getTextGuideLine(),St=st.getTextContent();if(!St){dt&&st.removeTextGuideLine();return}for(var ut=vt.normal,yt=ut.get("show"),Ot=St.ignore,At=0;At<J.a.length;At++){var It=J.a[At],Ct=vt[It],Ft=It==="normal";if(Ct){var zt=Ct.get("show"),Xt=Ft?Ot:Object(lt.P)(St.states[It]&&St.states[It].ignore,Ot);if(Xt||!Object(lt.P)(zt,yt)){var ie=Ft?dt:dt&&dt.states.normal;ie&&(ie.ignore=!0);continue}dt||(dt=new k.a,st.setTextGuideLine(dt),!Ft&&(Ot||!yt)&&L(dt,!0,"normal",vt.normal),st.stateProxy&&(dt.stateProxy=st.stateProxy)),L(dt,!1,It,Ct)}}if(dt){Object(lt.i)(dt.style,it),dt.style.fill=null;var oe=ut.get("showAbove"),he=st.textGuideLineConfig=st.textGuideLineConfig||{};he.showAbove=oe||!1,dt.buildPath=H}}function ct(st,vt){vt=vt||"labelLine";for(var it={normal:st.getModel(vt)},dt=0;dt<J.g.length;dt++){var St=J.g[dt];it[St]=st.getModel([St,vt])}return it}},jbhN:function(je,nt,b){"use strict";b.d(nt,"d",function(){return gt}),b.d(nt,"b",function(){return lt}),b.d(nt,"a",function(){return z}),b.d(nt,"c",function(){return at});var B="[ECharts] ",bt={},k=typeof console!="undefined"&&console.warn&&console.log;function ft(F,Z,W){if(k){if(W){if(bt[Z])return;bt[Z]=!0}console[F](B+Z)}}function ot(F,Z){ft("log",F,Z)}function gt(F,Z){ft("warn",F,Z)}function lt(F,Z){ft("error",F,Z)}function z(F){}function X(F,Z,W){}function J(){for(var F=[],Z=0;Z<arguments.length;Z++)F[Z]=arguments[Z];var W="";if(!1)var ht;return W}function at(F){throw new Error(F)}},"k/Px":function(je,nt,b){"use strict";b.d(nt,"a",function(){return g});var B={linear:function(U){return U},quadraticIn:function(U){return U*U},quadraticOut:function(U){return U*(2-U)},quadraticInOut:function(U){return(U*=2)<1?.5*U*U:-.5*(--U*(U-2)-1)},cubicIn:function(U){return U*U*U},cubicOut:function(U){return--U*U*U+1},cubicInOut:function(U){return(U*=2)<1?.5*U*U*U:.5*((U-=2)*U*U+2)},quarticIn:function(U){return U*U*U*U},quarticOut:function(U){return 1- --U*U*U*U},quarticInOut:function(U){return(U*=2)<1?.5*U*U*U*U:-.5*((U-=2)*U*U*U-2)},quinticIn:function(U){return U*U*U*U*U},quinticOut:function(U){return--U*U*U*U*U+1},quinticInOut:function(U){return(U*=2)<1?.5*U*U*U*U*U:.5*((U-=2)*U*U*U*U+2)},sinusoidalIn:function(U){return 1-Math.cos(U*Math.PI/2)},sinusoidalOut:function(U){return Math.sin(U*Math.PI/2)},sinusoidalInOut:function(U){return .5*(1-Math.cos(Math.PI*U))},exponentialIn:function(U){return U===0?0:Math.pow(1024,U-1)},exponentialOut:function(U){return U===1?1:1-Math.pow(2,-10*U)},exponentialInOut:function(U){return U===0?0:U===1?1:(U*=2)<1?.5*Math.pow(1024,U-1):.5*(-Math.pow(2,-10*(U-1))+2)},circularIn:function(U){return 1-Math.sqrt(1-U*U)},circularOut:function(U){return Math.sqrt(1- --U*U)},circularInOut:function(U){return(U*=2)<1?-.5*(Math.sqrt(1-U*U)-1):.5*(Math.sqrt(1-(U-=2)*U)+1)},elasticIn:function(U){var ct,st=.1,vt=.4;return U===0?0:U===1?1:(!st||st<1?(st=1,ct=vt/4):ct=vt*Math.asin(1/st)/(2*Math.PI),-(st*Math.pow(2,10*(U-=1))*Math.sin((U-ct)*(2*Math.PI)/vt)))},elasticOut:function(U){var ct,st=.1,vt=.4;return U===0?0:U===1?1:(!st||st<1?(st=1,ct=vt/4):ct=vt*Math.asin(1/st)/(2*Math.PI),st*Math.pow(2,-10*U)*Math.sin((U-ct)*(2*Math.PI)/vt)+1)},elasticInOut:function(U){var ct,st=.1,vt=.4;return U===0?0:U===1?1:(!st||st<1?(st=1,ct=vt/4):ct=vt*Math.asin(1/st)/(2*Math.PI),(U*=2)<1?-.5*(st*Math.pow(2,10*(U-=1))*Math.sin((U-ct)*(2*Math.PI)/vt)):st*Math.pow(2,-10*(U-=1))*Math.sin((U-ct)*(2*Math.PI)/vt)*.5+1)},backIn:function(U){var ct=1.70158;return U*U*((ct+1)*U-ct)},backOut:function(U){var ct=1.70158;return--U*U*((ct+1)*U+ct)+1},backInOut:function(U){var ct=1.70158*1.525;return(U*=2)<1?.5*(U*U*((ct+1)*U-ct)):.5*((U-=2)*U*((ct+1)*U+ct)+2)},bounceIn:function(U){return 1-B.bounceOut(1-U)},bounceOut:function(U){return U<1/2.75?7.5625*U*U:U<2/2.75?7.5625*(U-=1.5/2.75)*U+.75:U<2.5/2.75?7.5625*(U-=2.25/2.75)*U+.9375:7.5625*(U-=2.625/2.75)*U+.984375},bounceInOut:function(U){return U<.5?B.bounceIn(U*2)*.5:B.bounceOut(U*2-1)*.5+.5}},bt=B,k=b("bPXU"),ft=b("oYrp"),ot=function(){function U(ct){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ct.life||1e3,this._delay=ct.delay||0,this.loop=ct.loop||!1,this.onframe=ct.onframe||k.L,this.ondestroy=ct.ondestroy||k.L,this.onrestart=ct.onrestart||k.L,ct.easing&&this.setEasing(ct.easing)}return U.prototype.step=function(ct,st){if(this._inited||(this._startTime=ct+this._delay,this._inited=!0),this._paused){this._pausedTime+=st;return}var vt=this._life,it=ct-this._startTime-this._pausedTime,dt=it/vt;dt<0&&(dt=0),dt=Math.min(dt,1);var St=this.easingFunc,ut=St?St(dt):dt;if(this.onframe(ut),dt===1)if(this.loop){var yt=it%vt;this._startTime=ct-yt,this._pausedTime=0,this.onrestart()}else return!0;return!1},U.prototype.pause=function(){this._paused=!0},U.prototype.resume=function(){this._paused=!1},U.prototype.setEasing=function(ct){this.easing=ct,this.easingFunc=Object(k.w)(ct)?ct:bt[ct]||Object(ft.a)(ct)},U}(),gt=ot,lt=b("Xy3h"),z=b("BdbH"),X=Array.prototype.slice;function J(U,ct,st){return(ct-U)*st+U}function at(U,ct,st,vt){for(var it=ct.length,dt=0;dt<it;dt++)U[dt]=J(ct[dt],st[dt],vt);return U}function F(U,ct,st,vt){for(var it=ct.length,dt=it&&ct[0].length,St=0;St<it;St++){U[St]||(U[St]=[]);for(var ut=0;ut<dt;ut++)U[St][ut]=J(ct[St][ut],st[St][ut],vt)}return U}function Z(U,ct,st,vt){for(var it=ct.length,dt=0;dt<it;dt++)U[dt]=ct[dt]+st[dt]*vt;return U}function W(U,ct,st,vt){for(var it=ct.length,dt=it&&ct[0].length,St=0;St<it;St++){U[St]||(U[St]=[]);for(var ut=0;ut<dt;ut++)U[St][ut]=ct[St][ut]+st[St][ut]*vt}return U}function ht(U,ct){for(var st=U.length,vt=ct.length,it=st>vt?ct:U,dt=Math.min(st,vt),St=it[dt-1]||{color:[0,0,0,0],offset:0},ut=dt;ut<Math.max(st,vt);ut++)it.push({offset:St.offset,color:St.color.slice()})}function q(U,ct,st){var vt=U,it=ct;if(!(!vt.push||!it.push)){var dt=vt.length,St=it.length;if(dt!==St){var ut=dt>St;if(ut)vt.length=St;else for(var yt=dt;yt<St;yt++)vt.push(st===1?it[yt]:X.call(it[yt]))}for(var Ot=vt[0]&&vt[0].length,yt=0;yt<vt.length;yt++)if(st===1)isNaN(vt[yt])&&(vt[yt]=it[yt]);else for(var At=0;At<Ot;At++)isNaN(vt[yt][At])&&(vt[yt][At]=it[yt][At])}}function g(U){if(Object(k.u)(U)){var ct=U.length;if(Object(k.u)(U[0])){for(var st=[],vt=0;vt<ct;vt++)st.push(X.call(U[vt]));return st}return X.call(U)}return U}function et(U){return U[0]=Math.floor(U[0])||0,U[1]=Math.floor(U[1])||0,U[2]=Math.floor(U[2])||0,U[3]=U[3]==null?1:U[3],"rgba("+U.join(",")+")"}function $(U){return Object(k.u)(U&&U[0])?2:1}var N=0,Y=1,K=2,V=3,G=4,I=5,A=6;function C(U){return U===G||U===I}function E(U){return U===Y||U===K}var O=[0,0,0,0],M=function(){function U(ct){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ct}return U.prototype.isFinished=function(){return this._finished},U.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},U.prototype.needsAnimate=function(){return this.keyframes.length>=1},U.prototype.getAdditiveTrack=function(){return this._additiveTrack},U.prototype.addKeyframe=function(ct,st,vt){this._needsSort=!0;var it=this.keyframes,dt=it.length,St=!1,ut=A,yt=st;if(Object(k.u)(st)){var Ot=$(st);ut=Ot,(Ot===1&&!Object(k.z)(st[0])||Ot===2&&!Object(k.z)(st[0][0]))&&(St=!0)}else if(Object(k.z)(st)&&!Object(k.l)(st))ut=N;else if(Object(k.C)(st))if(!isNaN(+st))ut=N;else{var At=lt.parse(st);At&&(yt=At,ut=V)}else if(Object(k.x)(st)){var It=Object(k.m)({},yt);It.colorStops=Object(k.H)(st.colorStops,function(Ft){return{offset:Ft.offset,color:lt.parse(Ft.color)}}),Object(z.m)(st)?ut=G:Object(z.o)(st)&&(ut=I),yt=It}dt===0?this.valType=ut:(ut!==this.valType||ut===A)&&(St=!0),this.discrete=this.discrete||St;var Ct={time:ct,value:yt,rawValue:st,percent:0};return vt&&(Ct.easing=vt,Ct.easingFunc=Object(k.w)(vt)?vt:bt[vt]||Object(ft.a)(vt)),it.push(Ct),Ct},U.prototype.prepare=function(ct,st){var vt=this.keyframes;this._needsSort&&vt.sort(function(Xt,ie){return Xt.time-ie.time});for(var it=this.valType,dt=vt.length,St=vt[dt-1],ut=this.discrete,yt=E(it),Ot=C(it),At=0;At<dt;At++){var It=vt[At],Ct=It.value,Ft=St.value;It.percent=It.time/ct,ut||(yt&&At!==dt-1?q(Ct,Ft,it):Ot&&ht(Ct.colorStops,Ft.colorStops))}if(!ut&&it!==I&&st&&this.needsAnimate()&&st.needsAnimate()&&it===st.valType&&!st._finished){this._additiveTrack=st;for(var zt=vt[0].value,At=0;At<dt;At++)it===N?vt[At].additiveValue=vt[At].value-zt:it===V?vt[At].additiveValue=Z([],vt[At].value,zt,-1):E(it)&&(vt[At].additiveValue=it===Y?Z([],vt[At].value,zt,-1):W([],vt[At].value,zt,-1))}},U.prototype.step=function(ct,st){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var vt=this._additiveTrack!=null,it=vt?"additiveValue":"value",dt=this.valType,St=this.keyframes,ut=St.length,yt=this.propName,Ot=dt===V,At,It=this._lastFr,Ct=Math.min,Ft,zt;if(ut===1)Ft=zt=St[0];else{if(st<0)At=0;else if(st<this._lastFrP){var Xt=Ct(It+1,ut-1);for(At=Xt;At>=0&&!(St[At].percent<=st);At--);At=Ct(At,ut-2)}else{for(At=It;At<ut&&!(St[At].percent>st);At++);At=Ct(At-1,ut-2)}zt=St[At+1],Ft=St[At]}if(!!(Ft&&zt)){this._lastFr=At,this._lastFrP=st;var ie=zt.percent-Ft.percent,oe=ie===0?1:Ct((st-Ft.percent)/ie,1);zt.easingFunc&&(oe=zt.easingFunc(oe));var he=vt?this._additiveValue:Ot?O:ct[yt];if((E(dt)||Ot)&&!he&&(he=this._additiveValue=[]),this.discrete)ct[yt]=oe<1?Ft.rawValue:zt.rawValue;else if(E(dt))dt===Y?at(he,Ft[it],zt[it],oe):F(he,Ft[it],zt[it],oe);else if(C(dt)){var be=Ft[it],Ce=zt[it],Fe=dt===G;ct[yt]={type:Fe?"linear":"radial",x:J(be.x,Ce.x,oe),y:J(be.y,Ce.y,oe),colorStops:Object(k.H)(be.colorStops,function(Tt,Mt){var Ut=Ce.colorStops[Mt];return{offset:J(Tt.offset,Ut.offset,oe),color:et(at([],Tt.color,Ut.color,oe))}}),global:Ce.global},Fe?(ct[yt].x2=J(be.x2,Ce.x2,oe),ct[yt].y2=J(be.y2,Ce.y2,oe)):ct[yt].r=J(be.r,Ce.r,oe)}else if(Ot)at(he,Ft[it],zt[it],oe),vt||(ct[yt]=et(he));else{var Bt=J(Ft[it],zt[it],oe);vt?this._additiveValue=Bt:ct[yt]=Bt}vt&&this._addToTarget(ct)}}},U.prototype._addToTarget=function(ct){var st=this.valType,vt=this.propName,it=this._additiveValue;st===N?ct[vt]=ct[vt]+it:st===V?(lt.parse(ct[vt],O),Z(O,O,it,1),ct[vt]=et(O)):st===Y?Z(ct[vt],ct[vt],it,1):st===K&&W(ct[vt],ct[vt],it,1)},U}(),L=function(){function U(ct,st,vt,it){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ct,this._loop=st,st&&it){Object(k.G)("Can' use additive animation on looped animation.");return}this._additiveAnimators=it,this._allowDiscrete=vt}return U.prototype.getMaxTime=function(){return this._maxTime},U.prototype.getDelay=function(){return this._delay},U.prototype.getLoop=function(){return this._loop},U.prototype.getTarget=function(){return this._target},U.prototype.changeTarget=function(ct){this._target=ct},U.prototype.when=function(ct,st,vt){return this.whenWithKeys(ct,st,Object(k.F)(st),vt)},U.prototype.whenWithKeys=function(ct,st,vt,it){for(var dt=this._tracks,St=0;St<vt.length;St++){var ut=vt[St],yt=dt[ut];if(!yt){yt=dt[ut]=new M(ut);var Ot=void 0,At=this._getAdditiveTrack(ut);if(At){var It=At.keyframes,Ct=It[It.length-1];Ot=Ct&&Ct.value,At.valType===V&&Ot&&(Ot=et(Ot))}else Ot=this._target[ut];if(Ot==null)continue;ct>0&&yt.addKeyframe(0,g(Ot),it),this._trackKeys.push(ut)}yt.addKeyframe(ct,g(st[ut]),it)}return this._maxTime=Math.max(this._maxTime,ct),this},U.prototype.pause=function(){this._clip.pause(),this._paused=!0},U.prototype.resume=function(){this._clip.resume(),this._paused=!1},U.prototype.isPaused=function(){return!!this._paused},U.prototype.duration=function(ct){return this._maxTime=ct,this._force=!0,this},U.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ct=this._doneCbs;if(ct)for(var st=ct.length,vt=0;vt<st;vt++)ct[vt].call(this)},U.prototype._abortedCallback=function(){this._setTracksFinished();var ct=this.animation,st=this._abortedCbs;if(ct&&ct.removeClip(this._clip),this._clip=null,st)for(var vt=0;vt<st.length;vt++)st[vt].call(this)},U.prototype._setTracksFinished=function(){for(var ct=this._tracks,st=this._trackKeys,vt=0;vt<st.length;vt++)ct[st[vt]].setFinished()},U.prototype._getAdditiveTrack=function(ct){var st,vt=this._additiveAnimators;if(vt)for(var it=0;it<vt.length;it++){var dt=vt[it].getTrack(ct);dt&&(st=dt)}return st},U.prototype.start=function(ct){if(!(this._started>0)){this._started=1;for(var st=this,vt=[],it=this._maxTime||0,dt=0;dt<this._trackKeys.length;dt++){var St=this._trackKeys[dt],ut=this._tracks[St],yt=this._getAdditiveTrack(St),Ot=ut.keyframes,At=Ot.length;if(ut.prepare(it,yt),ut.needsAnimate())if(!this._allowDiscrete&&ut.discrete){var It=Ot[At-1];It&&(st._target[ut.propName]=It.rawValue),ut.setFinished()}else vt.push(ut)}if(vt.length||this._force){var Ct=new gt({life:it,loop:this._loop,delay:this._delay||0,onframe:function(Ft){st._started=2;var zt=st._additiveAnimators;if(zt){for(var Xt=!1,ie=0;ie<zt.length;ie++)if(zt[ie]._clip){Xt=!0;break}Xt||(st._additiveAnimators=null)}for(var ie=0;ie<vt.length;ie++)vt[ie].step(st._target,Ft);var oe=st._onframeCbs;if(oe)for(var ie=0;ie<oe.length;ie++)oe[ie](st._target,Ft)},ondestroy:function(){st._doneCallback()}});this._clip=Ct,this.animation&&this.animation.addClip(Ct),ct&&Ct.setEasing(ct)}else this._doneCallback();return this}},U.prototype.stop=function(ct){if(!!this._clip){var st=this._clip;ct&&st.onframe(1),this._abortedCallback()}},U.prototype.delay=function(ct){return this._delay=ct,this},U.prototype.during=function(ct){return ct&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ct)),this},U.prototype.done=function(ct){return ct&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ct)),this},U.prototype.aborted=function(ct){return ct&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ct)),this},U.prototype.getClip=function(){return this._clip},U.prototype.getTrack=function(ct){return this._tracks[ct]},U.prototype.getTracks=function(){var ct=this;return Object(k.H)(this._trackKeys,function(st){return ct._tracks[st]})},U.prototype.stopTracks=function(ct,st){if(!ct.length||!this._clip)return!0;for(var vt=this._tracks,it=this._trackKeys,dt=0;dt<ct.length;dt++){var St=vt[ct[dt]];St&&!St.isFinished()&&(st?St.step(this._target,1):this._started===1&&St.step(this._target,0),St.setFinished())}for(var ut=!0,dt=0;dt<it.length;dt++)if(!vt[it[dt]].isFinished()){ut=!1;break}return ut&&this._abortedCallback(),ut},U.prototype.saveTo=function(ct,st,vt){if(!!ct){st=st||this._trackKeys;for(var it=0;it<st.length;it++){var dt=st[it],St=this._tracks[dt];if(!(!St||St.isFinished())){var ut=St.keyframes,yt=ut[vt?0:ut.length-1];yt&&(ct[dt]=g(yt.rawValue))}}}},U.prototype.__changeFinalValue=function(ct,st){st=st||Object(k.F)(ct);for(var vt=0;vt<st.length;vt++){var it=st[vt],dt=this._tracks[it];if(!!dt){var St=dt.keyframes;if(St.length>1){var ut=St.pop();dt.addKeyframe(ut.time,ct[it]),dt.prepare(this._maxTime,dt.getAdditiveTrack())}}}},U}(),H=nt.b=L},lsHK:function(je,nt,b){"use strict";b.d(nt,"b",function(){return bt.n}),b.d(nt,"c",function(){return bt.s}),b.d(nt,"a",function(){return bt.l});var B=b("vliS"),bt=b("ZSbJ"),k=b("gYKv"),ft=b("BdbH"),ot=b("ryx4"),gt=b("bSX3"),lt=b("KapR"),z=b("20Jt"),X=Math.sin,J=Math.cos,at=Math.PI,F=Math.PI*2,Z=180/at,W=function(){function a(){}return a.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},a.prototype.moveTo=function(r,e){this._add("M",r,e)},a.prototype.lineTo=function(r,e){this._add("L",r,e)},a.prototype.bezierCurveTo=function(r,e,n,o,s,u){this._add("C",r,e,n,o,s,u)},a.prototype.quadraticCurveTo=function(r,e,n,o){this._add("Q",r,e,n,o)},a.prototype.arc=function(r,e,n,o,s,u){this.ellipse(r,e,n,n,0,o,s,u)},a.prototype.ellipse=function(r,e,n,o,s,u,c,v){var d=c-u,m=!v,x=Math.abs(d),T=Object(ft.j)(x-F)||(m?d>=F:-d>=F),D=d>0?d%F:d%F+F,w=!1;T?w=!0:Object(ft.j)(x)?w=!1:w=D>=at==!!m;var R=r+n*J(u),Q=e+o*X(u);this._start&&this._add("M",R,Q);var rt=Math.round(s*Z);if(T){var pt=1/this._p,mt=(m?1:-1)*(F-pt);this._add("A",n,o,rt,1,+m,r+n*J(u+mt),e+o*X(u+mt)),pt>.01&&this._add("A",n,o,rt,0,+m,R,Q)}else{var Dt=r+n*J(c),Lt=e+o*X(c);this._add("A",n,o,rt,+w,+m,Dt,Lt)}},a.prototype.rect=function(r,e,n,o){this._add("M",r,e),this._add("l",n,0),this._add("l",0,o),this._add("l",-n,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(r,e,n,o,s,u,c,v,d){for(var m=[],x=this._p,T=1;T<arguments.length;T++){var D=arguments[T];if(isNaN(D)){this._invalid=!0;return}m.push(Math.round(D*x)/x)}this._d.push(r+m.join(" ")),this._start=r==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),ht=W,q=b("avHQ"),g=b("bPXU"),et="none",$=Math.round;function N(a){var r=a.fill;return r!=null&&r!==et}function Y(a){var r=a.stroke;return r!=null&&r!==et}var K=["lineCap","miterLimit","lineJoin"],V=Object(g.H)(K,function(a){return"stroke-"+a.toLowerCase()});function G(a,r,e,n){var o=r.opacity==null?1:r.opacity;if(e instanceof gt.a){a("opacity",o);return}if(N(r)){var s=Object(ft.p)(r.fill);a("fill",s.color);var u=r.fillOpacity!=null?r.fillOpacity*s.opacity*o:s.opacity*o;(n||u<1)&&a("fill-opacity",u)}else a("fill",et);if(Y(r)){var c=Object(ft.p)(r.stroke);a("stroke",c.color);var v=r.strokeNoScale?e.getLineScale():1,d=v?(r.lineWidth||0)/v:0,m=r.strokeOpacity!=null?r.strokeOpacity*c.opacity*o:c.opacity*o,x=r.strokeFirst;if((n||d!==1)&&a("stroke-width",d),(n||x)&&a("paint-order",x?"stroke":"fill"),(n||m<1)&&a("stroke-opacity",m),r.lineDash){var T=Object(q.a)(e),D=T[0],w=T[1];D&&(w=$(w||0),a("stroke-dasharray",D.join(",")),(w||n)&&a("stroke-dashoffset",w))}else n&&a("stroke-dasharray",et);for(var R=0;R<K.length;R++){var Q=K[R];if(n||r[Q]!==ot.a[Q]){var rt=r[Q]||ot.a[Q];rt&&a(V[R],rt)}}}else n&&a("stroke",et)}var I="http://www.w3.org/2000/svg",A="http://www.w3.org/1999/xlink",C="http://www.w3.org/2000/xmlns/",E="http://www.w3.org/XML/1998/namespace";function O(a){return document.createElementNS(I,a)}function M(a,r,e,n,o){return{tag:a,attrs:e||{},children:n,text:o,key:r}}function L(a,r){var e=[];if(r)for(var n in r){var o=r[n],s=n;o!==!1&&(o!==!0&&o!=null&&(s+='="'+o+'"'),e.push(s))}return"<"+a+" "+e.join(" ")+">"}function H(a){return"</"+a+">"}function U(a,r){r=r||{};var e=r.newline?`
`:"";function n(o){var s=o.children,u=o.tag,c=o.attrs;return L(u,c)+(o.text||"")+(s?""+e+Object(g.H)(s,function(v){return n(v)}).join(e)+e:"")+H(u)}return n(a)}function ct(a,r,e){e=e||{};var n=e.newline?`
`:"",o=" {"+n,s=n+"}",u=Object(g.H)(Object(g.F)(a),function(v){return v+o+Object(g.H)(Object(g.F)(a[v]),function(d){return d+":"+a[v][d]+";"}).join(n)+s}).join(n),c=Object(g.H)(Object(g.F)(r),function(v){return"@keyframes "+v+o+Object(g.H)(Object(g.F)(r[v]),function(d){return d+o+Object(g.H)(Object(g.F)(r[v][d]),function(m){var x=r[v][d][m];return m==="d"&&(x='path("'+x+'")'),m+":"+x+";"}).join(n)+s}).join(n)+s}).join(n);return!u&&!c?"":["<![CDATA[",u,c,"]]>"].join(n)}function st(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function vt(a,r,e,n){return M("svg","root",{width:a,height:r,xmlns:I,"xmlns:xlink":A,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+a+" "+r:!1},e)}var it=b("SfWu"),dt=b("eASH"),St=b("I0j4"),ut=b("mSnZ"),yt=b("oYrp"),Ot={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},At="transform-origin";function It(a,r,e){var n=Object(g.m)({},a.shape);Object(g.m)(n,r),a.buildPath(e,n);var o=new ht;return o.reset(Object(ft.f)(a)),e.rebuildPath(o,1),o.generateStr(),o.getStr()}function Ct(a,r){var e=r.originX,n=r.originY;(e||n)&&(a[At]=e+"px "+n+"px")}var Ft={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function zt(a,r){var e=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[e]=a,e}function Xt(a,r,e){var n=a.shape.paths,o={},s,u;if(Object(g.k)(n,function(v){var d=st(e.zrId);d.animation=!0,oe(v,{},d,!0);var m=d.cssAnims,x=d.cssNodes,T=Object(g.F)(m),D=T.length;if(!!D){u=T[D-1];var w=m[u];for(var R in w){var Q=w[R];o[R]=o[R]||{d:""},o[R].d+=Q.d||""}for(var rt in x){var pt=x[rt].animation;pt.indexOf(u)>=0&&(s=pt)}}}),!!s){r.d=!1;var c=zt(o,e);return s.replace(u,c)}}function ie(a){return Object(g.C)(a)?Ot[a]?"cubic-bezier("+Ot[a]+")":Object(yt.a)(a)?a:"":""}function oe(a,r,e,n){var o=a.animators,s=o.length,u=[];if(a instanceof ut.a){var c=Xt(a,r,e);if(c)u.push(c);else if(!s)return}else if(!s)return;for(var v={},d=0;d<s;d++){var m=o[d],x=[m.getMaxTime()/1e3+"s"],T=ie(m.getClip().easing),D=m.getDelay();T?x.push(T):x.push("linear"),D&&x.push(D/1e3+"s"),m.getLoop()&&x.push("infinite");var w=x.join(" ");v[w]=v[w]||[w,[]],v[w][1].push(m)}function R(pt){var mt=pt[1],Dt=mt.length,Lt={},wt={},Nt={},Gt="animation-timing-function";function Kt(Vr,bn,mn){for(var On=Vr.getTracks(),Ei=Vr.getMaxTime(),Ri=0;Ri<On.length;Ri++){var ti=On[Ri];if(ti.needsAnimate()){var bi=ti.keyframes,_i=ti.propName;if(mn&&(_i=mn(_i)),_i)for(var Ji=0;Ji<bi.length;Ji++){var _s=bi[Ji],ha=Math.round(_s.time/Ei*100)+"%",Xd=ie(_s.easing),ml=_s.rawValue;(Object(g.C)(ml)||Object(g.z)(ml))&&(bn[ha]=bn[ha]||{},bn[ha][_i]=_s.rawValue,Xd&&(bn[ha][Gt]=Xd))}}}}for(var te=0;te<Dt;te++){var ne=mt[te],pe=ne.targetName;pe?pe==="shape"&&Kt(ne,wt):!n&&Kt(ne,Lt)}for(var me in Lt){var xe={};Object(dt.b)(xe,a),Object(g.m)(xe,Lt[me]);var _e=Object(ft.g)(xe),Ne=Lt[me][Gt];Nt[me]=_e?{transform:_e}:{},Ct(Nt[me],xe),Ne&&(Nt[me][Gt]=Ne)}var Je,Xe=!0;for(var me in wt){Nt[me]=Nt[me]||{};var or=!Je,Ne=wt[me][Gt];or&&(Je=new St.a);var Tr=Je.len();Je.reset(),Nt[me].d=It(a,wt[me],Je);var Mr=Je.len();if(!or&&Tr!==Mr){Xe=!1;break}Ne&&(Nt[me][Gt]=Ne)}if(!Xe)for(var me in Nt)delete Nt[me].d;if(!n)for(var te=0;te<Dt;te++){var ne=mt[te],pe=ne.targetName;pe==="style"&&Kt(ne,Nt,function(On){return Ft[On]})}for(var Ur=Object(g.F)(Nt),Yr=!0,fn,te=1;te<Ur.length;te++){var Yn=Ur[te-1],Bn=Ur[te];if(Nt[Yn][At]!==Nt[Bn][At]){Yr=!1;break}fn=Nt[Yn][At]}if(Yr&&fn){for(var me in Nt)Nt[me][At]&&delete Nt[me][At];r[At]=fn}if(Object(g.n)(Ur,function(Vr){return Object(g.F)(Nt[Vr]).length>0}).length){var sn=zt(Nt,e);return sn+" "+pt[0]+" both"}}for(var Q in v){var c=R(v[Q]);c&&u.push(c)}if(u.length){var rt=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+rt]={animation:u.join(",")},r.class=rt}}var he=b("To/5"),be=b("baNC"),Ce=Math.round;function Fe(a){return a&&Object(g.C)(a.src)}function Bt(a){return a&&Object(g.w)(a.toDataURL)}function Tt(a,r,e,n){G(function(o,s){var u=o==="fill"||o==="stroke";u&&Object(ft.k)(s)?Zt(r,a,o,n):u&&Object(ft.n)(s)?qt(e,a,o,n):a[o]=s},r,e,!1),Ie(e,a,n)}function Mt(a){return Object(ft.j)(a[0]-1)&&Object(ft.j)(a[1])&&Object(ft.j)(a[2])&&Object(ft.j)(a[3]-1)}function Ut(a){return Object(ft.j)(a[4])&&Object(ft.j)(a[5])}function se(a,r,e){if(r&&!(Ut(r)&&Mt(r))){var n=e?10:1e4;a.transform=Mt(r)?"translate("+Ce(r[4]*n)/n+" "+Ce(r[5]*n)/n+")":Object(ft.e)(r)}}function ge(a,r,e){for(var n=a.points,o=[],s=0;s<n.length;s++)o.push(Ce(n[s][0]*e)/e),o.push(Ce(n[s][1]*e)/e);r.points=o.join(" ")}function He(a){return!a.smooth}function Me(a){var r=Object(g.H)(a,function(e){return typeof e=="string"?[e,e]:e});return function(e,n,o){for(var s=0;s<r.length;s++){var u=r[s],c=e[u[0]];c!=null&&(n[u[1]]=Ce(c*o)/o)}}}var We={circle:[Me(["cx","cy","r"])],polyline:[ge,He],polygon:[ge,He]};function Ke(a){for(var r=a.animators,e=0;e<r.length;e++)if(r[e].targetName==="shape")return!0;return!1}function qe(a,r){var e=a.style,n=a.shape,o=We[a.type],s={},u=r.animation,c="path",v=a.style.strokePercent,d=r.compress&&Object(ft.f)(a)||4;if(o&&!r.willUpdate&&!(o[1]&&!o[1](n))&&!(u&&Ke(a))&&!(v<1)){c=a.type;var m=Math.pow(10,d);o[0](n,s,m)}else{a.path||a.createPathProxy();var x=a.path;a.shapeChanged()&&(x.beginPath(),a.buildPath(x,a.shape),a.pathUpdated());var T=x.getVersion(),D=a,w=D.__svgPathBuilder;(D.__svgPathVersion!==T||!w||v!==D.__svgPathStrokePercent)&&(w||(w=D.__svgPathBuilder=new ht),w.reset(d),x.rebuildPath(w,v),w.generateStr(),D.__svgPathVersion=T,D.__svgPathStrokePercent=v),s.d=w.getStr()}return se(s,a.transform),Tt(s,e,a,r),r.animation&&oe(a,s,r),M(c,a.id+"",s)}function Qt(a,r){var e=a.style,n=e.image;if(n&&!Object(g.C)(n)&&(Fe(n)?n=n.src:Bt(n)&&(n=n.toDataURL())),!!n){var o=e.x||0,s=e.y||0,u=e.width,c=e.height,v={href:n,width:u,height:c};return o&&(v.x=o),s&&(v.y=s),se(v,a.transform),Tt(v,e,a,r),r.animation&&oe(a,v,r),M("image",a.id+"",v)}}function Se(a,r){var e=a.style,n=e.text;if(n!=null&&(n+=""),!(!n||isNaN(e.x)||isNaN(e.y))){var o=e.font||be.a,s=e.x||0,u=Object(ft.b)(e.y||0,Object(lt.e)(o),e.textBaseline),c=ft.a[e.textAlign]||e.textAlign,v={"dominant-baseline":"central","text-anchor":c};if(Object(he.b)(e)){var d="",m=e.fontStyle,x=Object(he.c)(e.fontSize);if(!parseFloat(x))return;var T=e.fontFamily||be.b,D=e.fontWeight;d+="font-size:"+x+";font-family:"+T+";",m&&m!=="normal"&&(d+="font-style:"+m+";"),D&&D!=="normal"&&(d+="font-weight:"+D+";"),v.style=d}else v.style="font: "+o;return n.match(/\s/)&&(v["xml:space"]="preserve"),s&&(v.x=s),u&&(v.y=u),se(v,a.transform),Tt(v,e,a,r),r.animation&&oe(a,v,r),M("text",a.id+"",v,void 0,n)}}function Ve(a,r){if(a instanceof ot.b)return qe(a,r);if(a instanceof gt.a)return Qt(a,r);if(a instanceof z.a)return Se(a,r)}function Ie(a,r,e){var n=a.style;if(Object(ft.i)(n)){var o=Object(ft.h)(a),s=e.shadowCache,u=s[o];if(!u){var c=a.getGlobalScale(),v=c[0],d=c[1];if(!v||!d)return;var m=n.shadowOffsetX||0,x=n.shadowOffsetY||0,T=n.shadowBlur,D=Object(ft.p)(n.shadowColor),w=D.opacity,R=D.color,Q=T/2/v,rt=T/2/d,pt=Q+" "+rt;u=e.zrId+"-s"+e.shadowIdx++,e.defs[u]=M("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[M("feDropShadow","",{dx:m/v,dy:x/d,stdDeviation:pt,"flood-color":R,"flood-opacity":w})]),s[o]=u}r.filter=Object(ft.d)(u)}}function Zt(a,r,e,n){var o=a[e],s,u={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(Object(ft.m)(o))s="linearGradient",u.x1=o.x,u.y1=o.y,u.x2=o.x2,u.y2=o.y2;else if(Object(ft.o)(o))s="radialGradient",u.cx=Object(g.P)(o.x,.5),u.cy=Object(g.P)(o.y,.5),u.r=Object(g.P)(o.r,.5);else return;for(var c=o.colorStops,v=[],d=0,m=c.length;d<m;++d){var x=Object(ft.q)(c[d].offset)*100+"%",T=c[d].color,D=Object(ft.p)(T),w=D.color,R=D.opacity,Q={offset:x};Q["stop-color"]=w,R<1&&(Q["stop-opacity"]=R),v.push(M("stop",d+"",Q))}var rt=M(s,"",u,v),pt=U(rt),mt=n.gradientCache,Dt=mt[pt];Dt||(Dt=n.zrId+"-g"+n.gradientIdx++,mt[pt]=Dt,u.id=Dt,n.defs[Dt]=M(s,Dt,u,v)),r[e]=Object(ft.d)(Dt)}function qt(a,r,e,n){var o=a.style[e],s={patternUnits:"userSpaceOnUse"},u;if(Object(ft.l)(o)){var c=o.imageWidth,v=o.imageHeight,d=void 0,m=o.image;if(Object(g.C)(m)?d=m:Fe(m)?d=m.src:Bt(m)&&(d=m.toDataURL()),typeof Image=="undefined"){var x="Image width/height must been given explictly in svg-ssr renderer.";Object(g.b)(c,x),Object(g.b)(v,x)}else if(c==null||v==null){var T=function(pt,mt){if(pt){var Dt=pt.elm,Lt=pt.attrs.width=c||mt.width,wt=pt.attrs.height=v||mt.height;Dt&&(Dt.setAttribute("width",Lt),Dt.setAttribute("height",wt))}},D=Object(it.a)(d,null,a,function(pt){T(w,pt),T(u,pt)});D&&D.width&&D.height&&(c=c||D.width,v=v||D.height)}u=M("image","img",{href:d,width:c,height:v}),s.width=c,s.height=v}else o.svgElement&&(u=o.svgElement,s.width=o.svgWidth,s.height=o.svgHeight);if(!!u){s.patternTransform=Object(ft.g)(o);var w=M("pattern","",s,[u]),R=U(w),Q=n.patternCache,rt=Q[R];rt||(rt=n.zrId+"-p"+n.patternIdx++,Q[R]=rt,s.id=rt,w=n.defs[rt]=M("pattern",rt,s,[u])),r[e]=Object(ft.d)(rt)}}function le(a,r,e){var n=e.clipPathCache,o=e.defs,s=n[a.id];if(!s){s=e.zrId+"-c"+e.clipPathIdx++;var u={id:s};n[a.id]=s,o[s]=M("clipPath",s,u,[qe(a,e)])}r["clip-path"]=Object(ft.d)(s)}function De(a){return document.createTextNode(a)}function tr(a){return document.createComment(a)}function nr(a,r,e){a.insertBefore(r,e)}function fe(a,r){a.removeChild(r)}function Ee(a,r){a.appendChild(r)}function ke(a){return a.parentNode}function Re(a){return a.nextSibling}function Cr(a){return a.tagName}function Fr(a,r){a.textContent=r}function Hr(a){return a.textContent}function Jr(a){return a.nodeType===1}function Kn(a){return a.nodeType===3}function Kr(a){return a.nodeType===8}var li=58,ei=120,Xa=M("","");function Za(a){return a===void 0}function si(a){return a!==void 0}function lo(a,r,e){for(var n={},o=r;o<=e;++o){var s=a[o].key;s!==void 0&&(n[s]=o)}return n}function Aa(a,r){var e=a.key===r.key,n=a.tag===r.tag;return n&&e}function aa(a){var r,e=a.children,n=a.tag;if(si(n)){var o=a.elm=O(n);if(uo(Xa,a),Object(g.t)(e))for(r=0;r<e.length;++r){var s=e[r];s!=null&&Ee(o,aa(s))}else si(a.text)&&!Object(g.A)(a.text)&&Ee(o,De(a.text))}else a.elm=De(a.text);return a.elm}function yl(a,r,e,n,o){for(;n<=o;++n){var s=e[n];s!=null&&nr(a,aa(s),r)}}function Fn(a,r,e,n){for(;e<=n;++e){var o=r[e];if(o!=null)if(si(o.tag)){var s=ke(o.elm);fe(s,o.elm)}else fe(a,o.elm)}}function uo(a,r){var e,n=r.elm,o=a&&a.attrs||{},s=r.attrs||{};if(o!==s){for(e in s){var u=s[e],c=o[e];c!==u&&(u===!0?n.setAttribute(e,""):u===!1?n.removeAttribute(e):e.charCodeAt(0)!==ei?n.setAttribute(e,u):e==="xmlns:xlink"||e==="xmlns"?n.setAttributeNS(C,e,u):e.charCodeAt(3)===li?n.setAttributeNS(E,e,u):e.charCodeAt(5)===li?n.setAttributeNS(A,e,u):n.setAttribute(e,u))}for(e in o)e in s||n.removeAttribute(e)}}function df(a,r,e){for(var n=0,o=0,s=r.length-1,u=r[0],c=r[s],v=e.length-1,d=e[0],m=e[v],x,T,D,w;n<=s&&o<=v;)u==null?u=r[++n]:c==null?c=r[--s]:d==null?d=e[++o]:m==null?m=e[--v]:Aa(u,d)?(pr(u,d),u=r[++n],d=e[++o]):Aa(c,m)?(pr(c,m),c=r[--s],m=e[--v]):Aa(u,m)?(pr(u,m),nr(a,u.elm,Re(c.elm)),u=r[++n],m=e[--v]):Aa(c,d)?(pr(c,d),nr(a,c.elm,u.elm),c=r[--s],d=e[++o]):(Za(x)&&(x=lo(r,n,s)),T=x[d.key],Za(T)?nr(a,aa(d),u.elm):(D=r[T],D.tag!==d.tag?nr(a,aa(d),u.elm):(pr(D,d),r[T]=void 0,nr(a,D.elm,u.elm))),d=e[++o]);(n<=s||o<=v)&&(n>s?(w=e[v+1]==null?null:e[v+1].elm,yl(a,w,e,o,v)):Fn(a,r,n,s))}function pr(a,r){var e=r.elm=a.elm,n=a.children,o=r.children;a!==r&&(uo(a,r),Za(r.text)?si(n)&&si(o)?n!==o&&df(e,n,o):si(o)?(si(a.text)&&Fr(e,""),yl(e,null,o,0,o.length-1)):si(n)?Fn(e,n,0,n.length-1):si(a.text)&&Fr(e,""):a.text!==r.text&&(si(n)&&Fn(e,n,0,n.length-1),Fr(e,r.text)))}function uu(a,r){if(Aa(a,r))pr(a,r);else{var e=a.elm,n=ke(e);aa(r),n!==null&&(nr(n,r.elm,Re(e)),Fn(n,[a],0,0))}return r}var vn=b("dTsX"),vr=0,jr=function(){function a(r,e,n){if(this.type="svg",this.refreshHover=Oe("refreshHover"),this.configLayer=Oe("configLayer"),this.storage=e,this._opts=n=Object(g.m)({},n),this.root=r,this._id="zr"+vr++,this._oldVNode=vt(n.width,n.height),r&&!n.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=O("svg");uo(null,this._oldVNode),o.appendChild(s),r.appendChild(o)}this.resize(n.width,n.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",uu(this._oldVNode,r),this._oldVNode=r}},a.prototype.renderOneToVNode=function(r){return Ve(r,st(this._id))},a.prototype.renderToVNode=function(r){r=r||{};var e=this.storage.getDisplayList(!0),n=this._backgroundColor,o=this._width,s=this._height,u=st(this._id);u.animation=r.animation,u.willUpdate=r.willUpdate,u.compress=r.compress;var c=[];if(n&&n!=="none"){var v=Object(ft.p)(n),d=v.color,m=v.opacity;this._bgVNode=M("rect","bg",{width:o,height:s,x:"0",y:"0",id:"0",fill:d,"fill-opacity":m}),c.push(this._bgVNode)}else this._bgVNode=null;var x=r.compress?null:this._mainVNode=M("g","main",{},[]);this._paintList(e,u,x?x.children:c),x&&c.push(x);var T=Object(g.H)(Object(g.F)(u.defs),function(R){return u.defs[R]});if(T.length&&c.push(M("defs","defs",{},T)),r.animation){var D=ct(u.cssNodes,u.cssAnims,{newline:!0});if(D){var w=M("style","stl",{},[],D);c.push(w)}}return vt(o,s,c,r.useViewBox)},a.prototype.renderToString=function(r){return r=r||{},U(this.renderToVNode({animation:Object(g.P)(r.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Object(g.P)(r.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(r){this._backgroundColor=r;var e=this._bgVNode;if(e&&e.elm){var n=Object(ft.p)(r),o=n.color,s=n.opacity;e.elm.setAttribute("fill",o),s<1&&e.elm.setAttribute("fill-opacity",s)}},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(r,e,n){for(var o=r.length,s=[],u=0,c,v,d=0,m=0;m<o;m++){var x=r[m];if(!x.invisible){var T=x.__clipPaths,D=T&&T.length||0,w=v&&v.length||0,R=void 0;for(R=Math.max(D-1,w-1);R>=0&&!(T&&v&&T[R]===v[R]);R--);for(var Q=w-1;Q>R;Q--)u--,c=s[u-1];for(var rt=R+1;rt<D;rt++){var pt={};le(T[rt],pt,e);var mt=M("g","clip-g-"+d++,pt,[]);(c?c.children:n).push(mt),s[u++]=mt,c=mt}v=T;var Dt=Ve(x,e);Dt&&(c?c.children:n).push(Dt)}}},a.prototype.resize=function(r,e){var n=this._opts,o=this.root,s=this._viewport;if(r!=null&&(n.width=r),e!=null&&(n.height=e),o&&s&&(s.style.display="none",r=Object(vn.b)(o,0,n),e=Object(vn.b)(o,1,n),s.style.display=""),this._width!==r||this._height!==e){if(this._width=r,this._height=e,s){var u=s.style;u.width=r+"px",u.height=e+"px"}var c=this._svgDom;c&&(c.setAttribute("width",r),c.setAttribute("height",e))}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(r){var e=encodeURIComponent(this.renderToString()),n="data:image/svg+xml;";return r?(e=Object(ft.c)(e),e&&n+"base64,"+e):n+"charset=UTF-8,"+e},a}();function Oe(a){return function(){}}var An=jr;function fu(a){a.registerPainter("svg",An)}var Pe=b("c5Gk"),va=b("q1fN"),Mn=b("I79D"),cn=b("Y/G1"),Pr=b("fvwW"),fo=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e){if(!1)var n;return Object(va.a)(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(e){var n=new Pr.a,o=Object(cn.a)("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);n.add(o),o.setStyle(e.lineStyle);var s=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),c=s==="none"?"circle":s,v=e.itemHeight*.8,d=Object(cn.a)(c,(e.itemWidth-v)/2,(e.itemHeight-v)/2,v,v,e.itemStyle.fill);n.add(d),d.setStyle(e.itemStyle);var m=e.iconRotate==="inherit"?u:e.iconRotate||0;return d.rotation=m*Math.PI/180,d.setOrigin([e.itemWidth/2,e.itemHeight/2]),c.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),n},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(Mn.b),cu=fo,cr=b("eV5c"),_r=b("Tukj"),br=b("+aTT"),ar=b("GUjm"),Nr=b("Jx7q");function zn(a,r){var e=a.mapDimensionsAll("defaultedLabel"),n=e.length;if(n===1){var o=Object(Nr.e)(a,r,e[0]);return o!=null?o+"":null}else if(n){for(var s=[],u=0;u<e.length;u++)s.push(Object(Nr.e)(a,r,e[u]));return s.join(" ")}}function Bo(a,r){var e=a.mapDimensionsAll("defaultedLabel");if(!Object(g.t)(r))return r+"";for(var n=[],o=0;o<e.length;o++){var s=a.getDimensionIndex(e[o]);s>=0&&n.push(r[s])}return n.join(" ")}var xr=b("u1in"),hn=function(a){Object(Pe.a)(r,a);function r(e,n,o,s){var u=a.call(this)||this;return u.updateData(e,n,o,s),u}return r.prototype._createSymbol=function(e,n,o,s,u){this.removeAll();var c=Object(cn.a)(e,-1,-1,2,2,null,u);c.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),c.drift=Ni,this._symbolType=e,this.add(c)},r.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){Object(ar.r)(this.childAt(0))},r.prototype.downplay=function(){Object(ar.C)(this.childAt(0))},r.prototype.setZ=function(e,n){var o=this.childAt(0);o.zlevel=e,o.z=n},r.prototype.setDraggable=function(e){var n=this.childAt(0);n.draggable=e,n.cursor=e?"move":n.cursor},r.prototype.updateData=function(e,n,o,s){this.silent=!1;var u=e.getItemVisual(n,"symbol")||"circle",c=e.hostModel,v=r.getSymbolSize(e,n),d=u!==this._symbolType,m=s&&s.disableAnimation;if(d){var x=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(u,e,n,v,x)}else{var T=this.childAt(0);T.silent=!1;var D={scaleX:v[0]/2,scaleY:v[1]/2};m?T.attr(D):cr.h(T,D,c,n),Object(cr.g)(T)}if(this._updateCommon(e,n,v,o,s),d){var T=this.childAt(0);if(!m){var D={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:T.style.opacity}};T.scaleX=T.scaleY=0,T.style.opacity=0,cr.c(T,D,c,n)}}m&&this.childAt(0).stopAnimation("leave"),this._seriesModel=c},r.prototype._updateCommon=function(e,n,o,s,u){var c=this.childAt(0),v=e.hostModel,d,m,x,T,D,w,R,Q,rt;if(s&&(d=s.emphasisItemStyle,m=s.blurItemStyle,x=s.selectItemStyle,T=s.focus,D=s.blurScope,R=s.labelStatesModels,Q=s.hoverScale,rt=s.cursorStyle,w=s.emphasisDisabled),!s||e.hasItemOption){var pt=s&&s.itemModel?s.itemModel:e.getItemModel(n),mt=pt.getModel("emphasis");d=mt.getModel("itemStyle").getItemStyle(),x=pt.getModel(["select","itemStyle"]).getItemStyle(),m=pt.getModel(["blur","itemStyle"]).getItemStyle(),T=mt.get("focus"),D=mt.get("blurScope"),w=mt.get("disabled"),R=Object(xr.e)(pt),Q=mt.getShallow("scale"),rt=pt.getShallow("cursor")}var Dt=e.getItemVisual(n,"symbolRotate");c.attr("rotation",(Dt||0)*Math.PI/180||0);var Lt=Object(cn.b)(e.getItemVisual(n,"symbolOffset"),o);Lt&&(c.x=Lt[0],c.y=Lt[1]),rt&&c.attr("cursor",rt);var wt=e.getItemVisual(n,"style"),Nt=wt.fill;if(c instanceof gt.a){var Gt=c.style;c.useStyle(Object(g.m)({image:Gt.image,x:Gt.x,y:Gt.y,width:Gt.width,height:Gt.height},wt))}else c.__isEmptyBrush?c.useStyle(Object(g.m)({},wt)):c.useStyle(wt),c.style.decal=null,c.setColor(Nt,u&&u.symbolInnerColor),c.style.strokeNoScale=!0;var Kt=e.getItemVisual(n,"liftZ"),te=this._z2;Kt!=null?te==null&&(this._z2=c.z2,c.z2+=Kt):te!=null&&(c.z2=te,this._z2=null);var ne=u&&u.useNameLabel;Object(xr.g)(c,R,{labelFetcher:v,labelDataIndex:n,defaultText:pe,inheritColor:Nt,defaultOpacity:wt.opacity});function pe(_e){return ne?e.getName(_e):zn(e,_e)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var me=c.ensureState("emphasis");if(me.style=d,c.ensureState("select").style=x,c.ensureState("blur").style=m,Q){var xe=Math.max(1.1,3/this._sizeY);me.scaleX=this._sizeX*xe,me.scaleY=this._sizeY*xe}this.setSymbolScale(1),Object(ar.J)(this,T,D,w)},r.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},r.prototype.fadeOut=function(e,n){var o=this.childAt(0),s=this._seriesModel,u=Object(br.a)(this).dataIndex,c=n&&n.animation;if(this.silent=o.silent=!0,n&&n.fadeLabel){var v=o.getTextContent();v&&cr.e(v,{style:{opacity:0}},s,{dataIndex:u,removeOpt:c,cb:function(){o.removeTextContent()}})}else o.removeTextContent();cr.e(o,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:u,cb:e,removeOpt:c})},r.getSymbolSize=function(e,n){return Object(cn.c)(e.getItemVisual(n,"symbolSize"))},r}(Pr.a);function Ni(a,r){this.parent.drift(a,r)}var oa=hn;function hr(a,r,e,n){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(r[0],r[1]))&&a.getItemVisual(e,"symbol")!=="none"}function bs(a){return a!=null&&!Object(g.A)(a)&&(a={isIgnore:a}),a||{}}function Ya(a){var r=a.hostModel,e=r.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Object(xr.e)(r),cursorStyle:r.get("cursor")}}var Fo=function(){function a(r){this.group=new Pr.a,this._SymbolCtor=r||oa}return a.prototype.updateData=function(r,e){this._progressiveEls=null,e=bs(e);var n=this.group,o=r.hostModel,s=this._data,u=this._SymbolCtor,c=e.disableAnimation,v=Ya(r),d={disableAnimation:c},m=e.getSymbolPoint||function(x){return r.getItemLayout(x)};s||n.removeAll(),r.diff(s).add(function(x){var T=m(x);if(hr(r,T,x,e)){var D=new u(r,x,v,d);D.setPosition(T),r.setItemGraphicEl(x,D),n.add(D)}}).update(function(x,T){var D=s.getItemGraphicEl(T),w=m(x);if(!hr(r,w,x,e)){n.remove(D);return}var R=r.getItemVisual(x,"symbol")||"circle",Q=D&&D.getSymbolType&&D.getSymbolType();if(!D||Q&&Q!==R)n.remove(D),D=new u(r,x,v,d),D.setPosition(w);else{D.updateData(r,x,v,d);var rt={x:w[0],y:w[1]};c?D.attr(rt):cr.h(D,rt,o)}n.add(D),r.setItemGraphicEl(x,D)}).remove(function(x){var T=s.getItemGraphicEl(x);T&&T.fadeOut(function(){n.remove(T)})}).execute(),this._getSymbolPoint=m,this._data=r},a.prototype.updateLayout=function(){var r=this,e=this._data;e&&e.eachItemGraphicEl(function(n,o){var s=r._getSymbolPoint(o);n.setPosition(s),n.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Ya(r),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e,n){this._progressiveEls=[],n=bs(n);function o(v){v.isGroup||(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}for(var s=r.start;s<r.end;s++){var u=e.getItemLayout(s);if(hr(e,u,s,n)){var c=new this._SymbolCtor(e,s,this._seriesScope);c.traverse(o),c.setPosition(u),this.group.add(c),e.setItemGraphicEl(s,c),this._progressiveEls.push(c)}}},a.prototype.eachRendered=function(r){_r.traverseElements(this._progressiveEls||this.group,r)},a.prototype.remove=function(r){var e=this.group,n=this._data;n&&r?n.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)})}):e.removeAll()},a}(),Wr=Fo,mr=b("70Nz");function Un(a,r,e){var n=a.getBaseAxis(),o=a.getOtherAxis(n),s=qr(o,e),u=n.dim,c=o.dim,v=r.mapDimension(c),d=r.mapDimension(u),m=c==="x"||c==="radius"?1:0,x=Object(g.H)(a.dimensions,function(w){return r.mapDimension(w)}),T=!1,D=r.getCalculationInfo("stackResultDimension");return Object(mr.c)(r,x[0])&&(T=!0,x[0]=D),Object(mr.c)(r,x[1])&&(T=!0,x[1]=D),{dataDimsForPoint:x,valueStart:s,valueAxisDim:c,baseAxisDim:u,stacked:!!T,valueDim:v,baseDim:d,baseDataOffset:m,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function qr(a,r){var e=0,n=a.scale.getExtent();return r==="start"?e=n[0]:r==="end"?e=n[1]:n[0]>0?e=n[0]:n[1]<0&&(e=n[1]),e}function an(a,r,e,n){var o=NaN;a.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=a.valueStart);var s=a.baseDataOffset,u=[];return u[s]=e.get(a.baseDim,n),u[1-s]=o,r.dataToPoint(u)}var wr=b("Y8C1");function dn(a,r){var e=[];return r.diff(a).add(function(n){e.push({cmd:"+",idx:n})}).update(function(n,o){e.push({cmd:"=",idx:o,idx1:n})}).remove(function(n){e.push({cmd:"-",idx:n})}).execute(),e}function zo(a,r,e,n,o,s,u,c){for(var v=dn(a,r),d=[],m=[],x=[],T=[],D=[],w=[],R=[],Q=Un(o,r,u),rt=a.getLayout("points")||[],pt=r.getLayout("points")||[],mt=0;mt<v.length;mt++){var Dt=v[mt],Lt=!0,wt=void 0,Nt=void 0;switch(Dt.cmd){case"=":wt=Dt.idx*2,Nt=Dt.idx1*2;var Gt=rt[wt],Kt=rt[wt+1],te=pt[Nt],ne=pt[Nt+1];(isNaN(Gt)||isNaN(Kt))&&(Gt=te,Kt=ne),d.push(Gt,Kt),m.push(te,ne),x.push(e[wt],e[wt+1]),T.push(n[Nt],n[Nt+1]),R.push(r.getRawIndex(Dt.idx1));break;case"+":var pe=Dt.idx,me=Q.dataDimsForPoint,xe=o.dataToPoint([r.get(me[0],pe),r.get(me[1],pe)]);Nt=pe*2,d.push(xe[0],xe[1]),m.push(pt[Nt],pt[Nt+1]);var _e=an(Q,o,r,pe);x.push(_e[0],_e[1]),T.push(n[Nt],n[Nt+1]),R.push(r.getRawIndex(pe));break;case"-":Lt=!1}Lt&&(D.push(Dt),w.push(w.length))}w.sort(function(Yn,Bn){return R[Yn]-R[Bn]});for(var Ne=d.length,Je=Object(wr.a)(Ne),Xe=Object(wr.a)(Ne),or=Object(wr.a)(Ne),Tr=Object(wr.a)(Ne),Mr=[],mt=0;mt<w.length;mt++){var Ur=w[mt],Yr=mt*2,fn=Ur*2;Je[Yr]=d[fn],Je[Yr+1]=d[fn+1],Xe[Yr]=m[fn],Xe[Yr+1]=m[fn+1],or[Yr]=x[fn],or[Yr+1]=x[fn+1],Tr[Yr]=T[fn],Tr[Yr+1]=T[fn+1],Mr[mt]=D[Ur]}return{current:Je,next:Xe,stackedOnCurrent:or,stackedOnNext:Tr,status:Mr}}var co=b("zLe5"),Be=b("ZXNb"),Br=b("IyL0"),ji=Math.min,Xi=Math.max;function Ma(a,r){return isNaN(a)||isNaN(r)}function da(a,r,e,n,o,s,u,c,v){for(var d,m,x,T,D,w,R=e,Q=0;Q<n;Q++){var rt=r[R*2],pt=r[R*2+1];if(R>=o||R<0)break;if(Ma(rt,pt)){if(v){R+=s;continue}break}if(R===e)a[s>0?"moveTo":"lineTo"](rt,pt),x=rt,T=pt;else{var mt=rt-d,Dt=pt-m;if(mt*mt+Dt*Dt<.5){R+=s;continue}if(u>0){for(var Lt=R+s,wt=r[Lt*2],Nt=r[Lt*2+1];wt===rt&&Nt===pt&&Q<n;)Q++,Lt+=s,R+=s,wt=r[Lt*2],Nt=r[Lt*2+1],rt=r[R*2],pt=r[R*2+1],mt=rt-d,Dt=pt-m;var Gt=Q+1;if(v)for(;Ma(wt,Nt)&&Gt<n;)Gt++,Lt+=s,wt=r[Lt*2],Nt=r[Lt*2+1];var Kt=.5,te=0,ne=0,pe=void 0,me=void 0;if(Gt>=n||Ma(wt,Nt))D=rt,w=pt;else{te=wt-d,ne=Nt-m;var xe=rt-d,_e=wt-rt,Ne=pt-m,Je=Nt-pt,Xe=void 0,or=void 0;if(c==="x"){Xe=Math.abs(xe),or=Math.abs(_e);var Tr=te>0?1:-1;D=rt-Tr*Xe*u,w=pt,pe=rt+Tr*or*u,me=pt}else if(c==="y"){Xe=Math.abs(Ne),or=Math.abs(Je);var Mr=ne>0?1:-1;D=rt,w=pt-Mr*Xe*u,pe=rt,me=pt+Mr*or*u}else Xe=Math.sqrt(xe*xe+Ne*Ne),or=Math.sqrt(_e*_e+Je*Je),Kt=or/(or+Xe),D=rt-te*u*(1-Kt),w=pt-ne*u*(1-Kt),pe=rt+te*u*Kt,me=pt+ne*u*Kt,pe=ji(pe,Xi(wt,rt)),me=ji(me,Xi(Nt,pt)),pe=Xi(pe,ji(wt,rt)),me=Xi(me,ji(Nt,pt)),te=pe-rt,ne=me-pt,D=rt-te*Xe/or,w=pt-ne*Xe/or,D=ji(D,Xi(d,rt)),w=ji(w,Xi(m,pt)),D=Xi(D,ji(d,rt)),w=Xi(w,ji(m,pt)),te=rt-D,ne=pt-w,pe=rt+te*or/Xe,me=pt+ne*or/Xe}a.bezierCurveTo(x,T,D,w,rt,pt),x=pe,T=me}else a.lineTo(rt,pt)}d=rt,m=pt,R+=s}return Q}var Ss=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),Ts=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polyline",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ss},r.prototype.buildPath=function(e,n){var o=n.points,s=0,u=o.length/2;if(n.connectNulls){for(;u>0&&Ma(o[u*2-2],o[u*2-1]);u--);for(;s<u&&Ma(o[s*2],o[s*2+1]);s++);}for(;s<u;)s+=da(e,o,s,u,u,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},r.prototype.getPointOn=function(e,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,s=o.data,u=St.a.CMD,c,v,d=n==="x",m=[],x=0;x<s.length;){var T=s[x++],D=void 0,w=void 0,R=void 0,Q=void 0,rt=void 0,pt=void 0,mt=void 0;switch(T){case u.M:c=s[x++],v=s[x++];break;case u.L:if(D=s[x++],w=s[x++],mt=d?(e-c)/(D-c):(e-v)/(w-v),mt<=1&&mt>=0){var Dt=d?(w-v)*mt+v:(D-c)*mt+c;return d?[e,Dt]:[Dt,e]}c=D,v=w;break;case u.C:D=s[x++],w=s[x++],R=s[x++],Q=s[x++],rt=s[x++],pt=s[x++];var Lt=d?Object(Br.f)(c,D,R,rt,e,m):Object(Br.f)(v,w,Q,pt,e,m);if(Lt>0)for(var wt=0;wt<Lt;wt++){var Nt=m[wt];if(Nt<=1&&Nt>=0){var Dt=d?Object(Br.a)(v,w,Q,pt,Nt):Object(Br.a)(c,D,R,rt,Nt);return d?[e,Dt]:[Dt,e]}}c=rt,v=pt;break}}},r}(ot.b),Si=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Ss),hu=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polygon",n}return r.prototype.getDefaultShape=function(){return new Si},r.prototype.buildPath=function(e,n){var o=n.points,s=n.stackedOnPoints,u=0,c=o.length/2,v=n.smoothMonotone;if(n.connectNulls){for(;c>0&&Ma(o[c*2-2],o[c*2-1]);c--);for(;u<c&&Ma(o[u*2],o[u*2+1]);u++);}for(;u<c;){var d=da(e,o,u,c,c,1,n.smooth,v,n.connectNulls);da(e,s,u+d-1,d,c,-1,n.stackedOnSmooth,v,n.connectNulls),u+=d+1,e.closePath()}},r}(ot.b),Ln=b("IsQr"),Qr=b("Eb29"),In=b("3Vaj"),Le=b("7M1A");function Os(a,r,e,n,o){var s=a.getArea(),u=s.x,c=s.y,v=s.width,d=s.height,m=e.get(["lineStyle","width"])||2;u-=m/2,c-=m/2,v+=m,d+=m,u=Math.floor(u),v=Math.round(v);var x=new Qr.a({shape:{x:u,y:c,width:v,height:d}});if(r){var T=a.getBaseAxis(),D=T.isHorizontal(),w=T.inverse;D?(w&&(x.shape.x+=v),x.shape.width=0):(w||(x.shape.y+=d),x.shape.height=0);var R=Object(g.w)(o)?function(Q){o(Q,x)}:null;cr.c(x,{shape:{width:v,height:d,x:u,y:c}},e,null,n,R)}return x}function As(a,r,e){var n=a.getArea(),o=Object(Le.v)(n.r0,1),s=Object(Le.v)(n.r,1),u=new In.a({shape:{cx:Object(Le.v)(a.cx,1),cy:Object(Le.v)(a.cy,1),r0:o,r:s,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(r){var c=a.getBaseAxis().dim==="angle";c?u.shape.endAngle=n.startAngle:u.shape.r=o,cr.c(u,{shape:{endAngle:n.endAngle,r:s}},e)}return u}function pa(a,r,e,n,o){if(a){if(a.type==="polar")return As(a,r,e);if(a.type==="cartesian2d")return Os(a,r,e,n,o)}else return null;return null}function Zi(a,r){return a.type===r}var Vn=b("euZP"),Ir=b("Xy3h");function Er(a,r){if(a.length===r.length){for(var e=0;e<a.length;e++)if(a[e]!==r[e])return;return!0}}function Ci(a){for(var r=Infinity,e=Infinity,n=-Infinity,o=-Infinity,s=0;s<a.length;){var u=a[s++],c=a[s++];isNaN(u)||(r=Math.min(u,r),n=Math.max(u,n)),isNaN(c)||(e=Math.min(c,e),o=Math.max(c,o))}return[[r,e],[n,o]]}function ga(a,r){var e=Ci(a),n=e[0],o=e[1],s=Ci(r),u=s[0],c=s[1];return Math.max(Math.abs(n[0]-u[0]),Math.abs(n[1]-u[1]),Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]))}function Vo(a){return g.z(a)?a:a?.5:0}function vi(a,r,e){if(!e.valueDim)return[];for(var n=r.count(),o=Object(wr.a)(n*2),s=0;s<n;s++){var u=an(e,a,r,s);o[s*2]=u[0],o[s*2+1]=u[1]}return o}function Hn(a,r,e){for(var n=r.getBaseAxis(),o=n.dim==="x"||n.dim==="radius"?0:1,s=[],u=0,c=[],v=[],d=[];u<a.length-2;u+=2)switch(d[0]=a[u+2],d[1]=a[u+3],v[0]=a[u],v[1]=a[u+1],s.push(v[0],v[1]),e){case"end":c[o]=d[o],c[1-o]=v[1-o],s.push(c[0],c[1]);break;case"middle":var m=(v[o]+d[o])/2,x=[];c[o]=x[o]=m,c[1-o]=v[1-o],x[1-o]=d[1-o],s.push(c[0],c[1]),s.push(x[0],x[1]);break;default:c[o]=v[o],c[1-o]=d[1-o],s.push(c[0],c[1])}return s.push(a[u++],a[u++]),s}function Ms(a,r){var e=[],n=a.length,o,s;function u(m,x,T){var D=m.coord,w=(T-D)/(x.coord-D),R=Object(Ir.lerp)(w,[m.color,x.color]);return{coord:T,color:R}}for(var c=0;c<n;c++){var v=a[c],d=v.coord;if(d<0)o=v;else if(d>r){s?e.push(u(s,v,r)):o&&e.push(u(o,v,0),u(o,v,r));break}else o&&(e.push(u(o,v,0)),o=null),e.push(v),s=v}return e}function vu(a,r,e){var n=a.getVisual("visualMeta");if(!(!n||!n.length||!a.count())&&r.type==="cartesian2d"){for(var o,s,u=n.length-1;u>=0;u--){var c=a.getDimensionInfo(n[u].dimension);if(o=c&&c.coordDim,o==="x"||o==="y"){s=n[u];break}}if(!!s){var v=r.getAxis(o),d=g.H(s.stops,function(mt){return{coord:v.toGlobalCoord(v.dataToCoord(mt.value)),color:mt.color}}),m=d.length,x=s.outerColors.slice();m&&d[0].coord>d[m-1].coord&&(d.reverse(),x.reverse());var T=Ms(d,o==="x"?e.getWidth():e.getHeight()),D=T.length;if(!D&&m)return d[0].coord<0?x[1]?x[1]:d[m-1].color:x[0]?x[0]:d[0].color;var w=10,R=T[0].coord-w,Q=T[D-1].coord+w,rt=Q-R;if(rt<.001)return"transparent";g.k(T,function(mt){mt.offset=(mt.coord-R)/rt}),T.push({offset:D?T[D-1].offset:.5,color:x[1]||"transparent"}),T.unshift({offset:D?T[0].offset:.5,color:x[0]||"transparent"});var pt=new co.a(0,0,0,0,T,!0);return pt[o]=R,pt[o+"2"]=Q,pt}}}function Go(a,r,e){var n=a.get("showAllSymbol"),o=n==="auto";if(!(n&&!o)){var s=e.getAxesByScale("ordinal")[0];if(!!s&&!(o&&Xr(s,r))){var u=r.mapDimension(s.dim),c={};return g.k(s.getViewLabels(),function(v){var d=s.scale.getRawOrdinalNumber(v.tickValue);c[d]=1}),function(v){return!c.hasOwnProperty(r.get(u,v))}}}}function Xr(a,r){var e=a.getExtent(),n=Math.abs(e[1]-e[0])/a.scale.count();isNaN(n)&&(n=0);for(var o=r.count(),s=Math.max(1,Math.round(o/5)),u=0;u<o;u+=s)if(oa.getSymbolSize(r,u)[a.isHorizontal()?1:0]*1.5>n)return!1;return!0}function du(a,r){return isNaN(a)||isNaN(r)}function xl(a){for(var r=a.length/2;r>0&&du(a[r*2-2],a[r*2-1]);r--);return r-1}function Da(a,r){return[a[r*2],a[r*2+1]]}function _l(a,r,e){for(var n=a.length/2,o=e==="x"?0:1,s,u,c=0,v=-1,d=0;d<n;d++)if(u=a[d*2+o],!(isNaN(u)||isNaN(a[d*2+1-o]))){if(d===0){s=u;continue}if(s<=r&&u>=r||s>=r&&u<=r){v=d;break}c=d,s=u}return{range:[c,v],t:(r-s)/(u-s)}}function Ds(a){if(a.get(["endLabel","show"]))return!0;for(var r=0;r<ar.g.length;r++)if(a.get([ar.g[r],"endLabel","show"]))return!0;return!1}function Yi(a,r,e,n){if(Zi(r,"cartesian2d")){var o=n.getModel("endLabel"),s=o.get("valueAnimation"),u=n.getData(),c={lastFrameIndex:0},v=Ds(n)?function(D,w){a._endLabelOnDuring(D,w,u,c,s,o,r)}:null,d=r.getBaseAxis().isHorizontal(),m=Os(r,e,n,function(){var D=a._endLabel;D&&e&&c.originalX!=null&&D.attr({x:c.originalX,y:c.originalY})},v);if(!n.get("clip",!0)){var x=m.shape,T=Math.max(x.width,x.height);d?(x.y-=T,x.height+=T*2):(x.x-=T,x.width+=T*2)}return v&&v(1,m),m}else return As(r,e,n)}function Ea(a,r){var e=r.getBaseAxis(),n=e.isHorizontal(),o=e.inverse,s=n?o?"right":"left":"center",u=n?"middle":o?"top":"bottom";return{normal:{align:a.get("align")||s,verticalAlign:a.get("verticalAlign")||u}}}var ri=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(){var e=new Pr.a,n=new Wr;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=e},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem,c=this.group,v=e.getData(),d=e.getModel("lineStyle"),m=e.getModel("areaStyle"),x=v.getLayout("points")||[],T=u.type==="polar",D=this._coordSys,w=this._symbolDraw,R=this._polyline,Q=this._polygon,rt=this._lineGroup,pt=e.get("animation"),mt=!m.isEmpty(),Dt=m.get("origin"),Lt=Un(u,v,Dt),wt=mt&&vi(u,v,Lt),Nt=e.get("showSymbol"),Gt=Nt&&!T&&Go(e,v,u),Kt=this._data;Kt&&Kt.eachItemGraphicEl(function(Bn,sn){Bn.__temp&&(c.remove(Bn),Kt.setItemGraphicEl(sn,null))}),Nt||w.remove(),c.add(rt);var te=T?!1:e.get("step"),ne;u&&u.getArea&&e.get("clip",!0)&&(ne=u.getArea(),ne.width!=null?(ne.x-=.1,ne.y-=.1,ne.width+=.2,ne.height+=.2):ne.r0&&(ne.r0-=.5,ne.r+=.5)),this._clipShapeForSymbol=ne;var pe=vu(v,u,o)||v.getVisual("style")[v.getVisual("drawType")];if(!(R&&D.type===u.type&&te===this._step))Nt&&w.updateData(v,{isIgnore:Gt,clipShape:ne,disableAnimation:!0,getSymbolPoint:function(Bn){return[x[Bn*2],x[Bn*2+1]]}}),pt&&this._initSymbolLabelAnimation(v,u,ne),te&&(x=Hn(x,u,te),wt&&(wt=Hn(wt,u,te))),R=this._newPolyline(x),mt&&(Q=this._newPolygon(x,wt)),T||this._initOrUpdateEndLabel(e,u,Object(Vn.c)(pe)),rt.setClipPath(Yi(this,u,!0,e));else{mt&&!Q?Q=this._newPolygon(x,wt):Q&&!mt&&(rt.remove(Q),Q=this._polygon=null),T||this._initOrUpdateEndLabel(e,u,Object(Vn.c)(pe));var me=rt.getClipPath();if(me){var xe=Yi(this,u,!1,e);cr.c(me,{shape:xe.shape},e)}else rt.setClipPath(Yi(this,u,!0,e));Nt&&w.updateData(v,{isIgnore:Gt,clipShape:ne,disableAnimation:!0,getSymbolPoint:function(Bn){return[x[Bn*2],x[Bn*2+1]]}}),(!Er(this._stackedOnPoints,wt)||!Er(this._points,x))&&(pt?this._doUpdateAnimation(v,wt,u,o,te,Dt):(te&&(x=Hn(x,u,te),wt&&(wt=Hn(wt,u,te))),R.setShape({points:x}),Q&&Q.setShape({points:x,stackedOnPoints:wt})))}var _e=e.getModel("emphasis"),Ne=_e.get("focus"),Je=_e.get("blurScope"),Xe=_e.get("disabled");if(R.useStyle(g.i(d.getLineStyle(),{fill:"none",stroke:pe,lineJoin:"bevel"})),Object(ar.I)(R,e,"lineStyle"),R.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var or=R.getState("emphasis").style;or.lineWidth=+R.style.lineWidth+1}Object(br.a)(R).seriesIndex=e.seriesIndex,Object(ar.J)(R,Ne,Je,Xe);var Tr=Vo(e.get("smooth")),Mr=e.get("smoothMonotone"),Ur=e.get("connectNulls");if(R.setShape({smooth:Tr,smoothMonotone:Mr,connectNulls:Ur}),Q){var Yr=v.getCalculationInfo("stackedOnSeries"),fn=0;Q.useStyle(g.i(m.getAreaStyle(),{fill:pe,opacity:.7,lineJoin:"bevel",decal:v.getVisual("style").decal})),Yr&&(fn=Vo(Yr.get("smooth"))),Q.setShape({smooth:Tr,stackedOnSmooth:fn,smoothMonotone:Mr,connectNulls:Ur}),Object(ar.I)(Q,e,"areaStyle"),Object(br.a)(Q).seriesIndex=e.seriesIndex,Object(ar.J)(Q,Ne,Je,Xe)}var Yn=function(Bn){s._changePolyState(Bn)};v.eachItemGraphicEl(function(Bn){Bn&&(Bn.onHoverStateChange=Yn)}),this._polyline.onHoverStateChange=Yn,this._data=v,this._coordSys=u,this._stackedOnPoints=wt,this._points=x,this._step=te,this._valueOrigin=Dt,e.get("triggerLineEvent")&&(this.packEventData(e,R),Q&&this.packEventData(e,Q))},r.prototype.packEventData=function(e,n){Object(br.a)(n).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},r.prototype.highlight=function(e,n,o,s){var u=e.getData(),c=Be.u(u,s);if(this._changePolyState("emphasis"),!(c instanceof Array)&&c!=null&&c>=0){var v=u.getLayout("points"),d=u.getItemGraphicEl(c);if(!d){var m=v[c*2],x=v[c*2+1];if(isNaN(m)||isNaN(x)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,x))return;var T=e.get("zlevel"),D=e.get("z");d=new oa(u,c),d.x=m,d.y=x,d.setZ(T,D);var w=d.getSymbolPath().getTextContent();w&&(w.zlevel=T,w.z=D,w.z2=this._polyline.z2+1),d.__temp=!0,u.setItemGraphicEl(c,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else Ln.a.prototype.highlight.call(this,e,n,o,s)},r.prototype.downplay=function(e,n,o,s){var u=e.getData(),c=Be.u(u,s);if(this._changePolyState("normal"),c!=null&&c>=0){var v=u.getItemGraphicEl(c);v&&(v.__temp?(u.setItemGraphicEl(c,null),this.group.remove(v)):v.downplay())}else Ln.a.prototype.downplay.call(this,e,n,o,s)},r.prototype._changePolyState=function(e){var n=this._polygon;Object(ar.H)(this._polyline,e),n&&Object(ar.H)(n,e)},r.prototype._newPolyline=function(e){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Ts({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},r.prototype._newPolygon=function(e,n){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new hu({shape:{points:e,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},r.prototype._initSymbolLabelAnimation=function(e,n,o){var s,u,c=n.getBaseAxis(),v=c.inverse;n.type==="cartesian2d"?(s=c.isHorizontal(),u=!1):n.type==="polar"&&(s=c.dim==="angle",u=!0);var d=e.hostModel,m=d.get("animationDuration");g.w(m)&&(m=m(null));var x=d.get("animationDelay")||0,T=g.w(x)?x(null):x;e.eachItemGraphicEl(function(D,w){var R=D;if(R){var Q=[D.x,D.y],rt=void 0,pt=void 0,mt=void 0;if(o)if(u){var Dt=o,Lt=n.pointToCoord(Q);s?(rt=Dt.startAngle,pt=Dt.endAngle,mt=-Lt[1]/180*Math.PI):(rt=Dt.r0,pt=Dt.r,mt=Lt[0])}else{var wt=o;s?(rt=wt.x,pt=wt.x+wt.width,mt=D.x):(rt=wt.y+wt.height,pt=wt.y,mt=D.y)}var Nt=pt===rt?0:(mt-rt)/(pt-rt);v&&(Nt=1-Nt);var Gt=g.w(x)?x(w):m*Nt+T,Kt=R.getSymbolPath(),te=Kt.getTextContent();R.attr({scaleX:0,scaleY:0}),R.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Gt}),te&&te.animateFrom({style:{opacity:0}},{duration:300,delay:Gt}),Kt.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(e,n,o){var s=e.getModel("endLabel");if(Ds(e)){var u=e.getData(),c=this._polyline,v=u.getLayout("points");if(!v){c.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new he.a({z2:200}),d.ignoreClip=!0,c.setTextContent(this._endLabel),c.disableLabelAnimation=!0);var m=xl(v);m>=0&&(Object(xr.g)(c,Object(xr.e)(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:m,defaultText:function(x,T,D){return D!=null?Bo(u,D):zn(u,x)},enableTextSetter:!0},Ea(s,n)),c.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(e,n,o,s,u,c,v){var d=this._endLabel,m=this._polyline;if(d){e<1&&s.originalX==null&&(s.originalX=d.x,s.originalY=d.y);var x=o.getLayout("points"),T=o.hostModel,D=T.get("connectNulls"),w=c.get("precision"),R=c.get("distance")||0,Q=v.getBaseAxis(),rt=Q.isHorizontal(),pt=Q.inverse,mt=n.shape,Dt=pt?rt?mt.x:mt.y+mt.height:rt?mt.x+mt.width:mt.y,Lt=(rt?R:0)*(pt?-1:1),wt=(rt?0:-R)*(pt?-1:1),Nt=rt?"x":"y",Gt=_l(x,Dt,Nt),Kt=Gt.range,te=Kt[1]-Kt[0],ne=void 0;if(te>=1){if(te>1&&!D){var pe=Da(x,Kt[0]);d.attr({x:pe[0]+Lt,y:pe[1]+wt}),u&&(ne=T.getRawValue(Kt[0]))}else{var pe=m.getPointOn(Dt,Nt);pe&&d.attr({x:pe[0]+Lt,y:pe[1]+wt});var me=T.getRawValue(Kt[0]),xe=T.getRawValue(Kt[1]);u&&(ne=Be.k(o,w,me,xe,Gt.t))}s.lastFrameIndex=Kt[0]}else{var _e=e===1||s.lastFrameIndex>0?Kt[0]:0,pe=Da(x,_e);u&&(ne=T.getRawValue(_e)),d.attr({x:pe[0]+Lt,y:pe[1]+wt})}u&&Object(xr.f)(d).setLabelText(ne)}},r.prototype._doUpdateAnimation=function(e,n,o,s,u,c){var v=this._polyline,d=this._polygon,m=e.hostModel,x=zo(this._data,e,this._stackedOnPoints,n,this._coordSys,o,this._valueOrigin,c),T=x.current,D=x.stackedOnCurrent,w=x.next,R=x.stackedOnNext;if(u&&(T=Hn(x.current,o,u),D=Hn(x.stackedOnCurrent,o,u),w=Hn(x.next,o,u),R=Hn(x.stackedOnNext,o,u)),ga(T,w)>3e3||d&&ga(D,R)>3e3){v.stopAnimation(),v.setShape({points:w}),d&&(d.stopAnimation(),d.setShape({points:w,stackedOnPoints:R}));return}v.shape.__points=x.current,v.shape.points=T;var Q={shape:{points:w}};x.current!==T&&(Q.shape.__points=x.next),v.stopAnimation(),cr.h(v,Q,m),d&&(d.setShape({points:T,stackedOnPoints:D}),d.stopAnimation(),cr.h(d,{shape:{stackedOnPoints:R}},m),v.shape.points!==d.shape.points&&(d.shape.points=v.shape.points));for(var rt=[],pt=x.status,mt=0;mt<pt.length;mt++){var Dt=pt[mt].cmd;if(Dt==="="){var Lt=e.getItemGraphicEl(pt[mt].idx1);Lt&&rt.push({el:Lt,ptIdx:mt})}}v.animators&&v.animators.length&&v.animators[0].during(function(){d&&d.dirtyShape();for(var wt=v.shape.__points,Nt=0;Nt<rt.length;Nt++){var Gt=rt[Nt].el,Kt=rt[Nt].ptIdx*2;Gt.x=wt[Kt],Gt.y=wt[Kt+1],Gt.markRedraw()}})},r.prototype.remove=function(e){var n=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(s,u){s.__temp&&(n.remove(s),o.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(Ln.a),Ca=ri,Bi=b("pA6B");function Qn(a,r){return{seriesType:a,plan:Object(Bi.a)(),reset:function(e){var n=e.getData(),o=e.coordinateSystem,s=e.pipelineContext,u=r||s.large;if(!!o){var c=Object(g.H)(o.dimensions,function(D){return n.mapDimension(D)}).slice(0,2),v=c.length,d=n.getCalculationInfo("stackResultDimension");Object(mr.c)(n,c[0])&&(c[0]=d),Object(mr.c)(n,c[1])&&(c[1]=d);var m=n.getStore(),x=n.getDimensionIndex(c[0]),T=n.getDimensionIndex(c[1]);return v&&{progress:function(D,w){for(var R=D.end-D.start,Q=u&&Object(wr.a)(R*v),rt=[],pt=[],mt=D.start,Dt=0;mt<D.end;mt++){var Lt=void 0;if(v===1){var wt=m.get(x,mt);Lt=o.dataToPoint(wt,null,pt)}else rt[0]=m.get(x,mt),rt[1]=m.get(T,mt),Lt=o.dataToPoint(rt,null,pt);u?(Q[Dt++]=Lt[0],Q[Dt++]=Lt[1]):w.setItemLayout(mt,Lt.slice())}u&&w.setLayout("points",Q)}}}}}}var ma={average:function(a){for(var r=0,e=0,n=0;n<a.length;n++)isNaN(a[n])||(r+=a[n],e++);return e===0?NaN:r/e},sum:function(a){for(var r=0,e=0;e<a.length;e++)r+=a[e]||0;return r},max:function(a){for(var r=-Infinity,e=0;e<a.length;e++)a[e]>r&&(r=a[e]);return isFinite(r)?r:NaN},min:function(a){for(var r=Infinity,e=0;e<a.length;e++)a[e]<r&&(r=a[e]);return isFinite(r)?r:NaN},nearest:function(a){return a[0]}},tn=function(a){return Math.round(a.length/2)};function Es(a){return{seriesType:a,reset:function(r,e,n){var o=r.getData(),s=r.get("sampling"),u=r.coordinateSystem,c=o.count();if(c>10&&u.type==="cartesian2d"&&s){var v=u.getBaseAxis(),d=u.getOtherAxis(v),m=v.getExtent(),x=n.getDevicePixelRatio(),T=Math.abs(m[1]-m[0])*(x||1),D=Math.round(c/T);if(D>1){s==="lttb"&&r.setData(o.lttbDownSample(o.mapDimension(d.dim),1/D));var w=void 0;Object(g.C)(s)?w=ma[s]:Object(g.w)(s)&&(w=s),w&&r.setData(o.downSample(o.mapDimension(d.dim),1/D,w,tn))}}}}}function Ti(a){a.registerChartView(Ca),a.registerSeriesModel(cu),a.registerLayout(Qn("line",!0)),a.registerVisual({seriesType:"line",reset:function(r){var e=r.getData(),n=r.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Es("line"))}var Fi=b("Ju5J"),Pa=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.dataToPoint(n.clampData(e)),s=this.getData(),u=s.getLayout("offset"),c=s.getLayout("size"),v=n.getBaseAxis().isHorizontal()?0:1;return o[v]+=u+c/2,o}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(Mn.b);Mn.b.registerClass(Pa);var sa=Pa,yn=b("C9tP"),pu=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return Object(va.a)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>e&&(e=n),e},r.prototype.brushSelector=function(e,n,o){return o.rect(n.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Object(yn.d)(sa.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(sa),Cs=pu,Gn=b("6wX1"),Uo=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),zi=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="sausage",n}return r.prototype.getDefaultShape=function(){return new Uo},r.prototype.buildPath=function(e,n){var o=n.cx,s=n.cy,u=Math.max(n.r0||0,0),c=Math.max(n.r,0),v=(c-u)*.5,d=u+v,m=n.startAngle,x=n.endAngle,T=n.clockwise,D=Math.PI*2,w=T?x-m<D:m-x<D;w||(m=x-(T?D:-D));var R=Math.cos(m),Q=Math.sin(m),rt=Math.cos(x),pt=Math.sin(x);w?(e.moveTo(R*u+o,Q*u+s),e.arc(R*d+o,Q*d+s,v,-Math.PI+m,m,!T)):e.moveTo(R*c+o,Q*c+s),e.arc(o,s,c,m,x,!T),e.arc(rt*d+o,pt*d+s,v,x-Math.PI*2,x-Math.PI,!T),u!==0&&e.arc(o,s,u,x,m,T)},r}(ot.b),Dn=zi;function Ho(a,r){r=r||{};var e=r.isRoundCap;return function(n,o,s){var u=o.position;if(!u||u instanceof Array)return Object(lt.c)(n,o,s);var c=a(u),v=o.distance!=null?o.distance:5,d=this.shape,m=d.cx,x=d.cy,T=d.r,D=d.r0,w=(T+D)/2,R=d.startAngle,Q=d.endAngle,rt=(R+Q)/2,pt=e?Math.abs(T-D)/2:0,mt=Math.cos,Dt=Math.sin,Lt=m+T*mt(R),wt=x+T*Dt(R),Nt="left",Gt="top";switch(c){case"startArc":Lt=m+(D-v)*mt(rt),wt=x+(D-v)*Dt(rt),Nt="center",Gt="top";break;case"insideStartArc":Lt=m+(D+v)*mt(rt),wt=x+(D+v)*Dt(rt),Nt="center",Gt="bottom";break;case"startAngle":Lt=m+w*mt(R)+ho(R,v+pt,!1),wt=x+w*Dt(R)+ui(R,v+pt,!1),Nt="right",Gt="middle";break;case"insideStartAngle":Lt=m+w*mt(R)+ho(R,-v+pt,!1),wt=x+w*Dt(R)+ui(R,-v+pt,!1),Nt="left",Gt="middle";break;case"middle":Lt=m+w*mt(rt),wt=x+w*Dt(rt),Nt="center",Gt="middle";break;case"endArc":Lt=m+(T+v)*mt(rt),wt=x+(T+v)*Dt(rt),Nt="center",Gt="bottom";break;case"insideEndArc":Lt=m+(T-v)*mt(rt),wt=x+(T-v)*Dt(rt),Nt="center",Gt="top";break;case"endAngle":Lt=m+w*mt(Q)+ho(Q,v+pt,!0),wt=x+w*Dt(Q)+ui(Q,v+pt,!0),Nt="left",Gt="middle";break;case"insideEndAngle":Lt=m+w*mt(Q)+ho(Q,-v+pt,!0),wt=x+w*Dt(Q)+ui(Q,-v+pt,!0),Nt="right",Gt="middle";break;default:return Object(lt.c)(n,o,s)}return n=n||{},n.x=Lt,n.y=wt,n.align=Nt,n.verticalAlign=Gt,n}}function Ps(a,r,e,n){if(Object(g.z)(n)){a.setTextConfig({rotation:n});return}else if(Object(g.t)(r)){a.setTextConfig({rotation:0});return}var o=a.shape,s=o.clockwise?o.startAngle:o.endAngle,u=o.clockwise?o.endAngle:o.startAngle,c=(s+u)/2,v,d=e(r);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":v=c;break;case"startAngle":case"insideStartAngle":v=s;break;case"endAngle":case"insideEndAngle":v=u;break;default:a.setTextConfig({rotation:0});return}var m=Math.PI*1.5-v;d==="middle"&&m>Math.PI/2&&m<Math.PI*1.5&&(m-=Math.PI),a.setTextConfig({rotation:m})}function ho(a,r,e){return r*Math.sin(a)*(e?-1:1)}function ui(a,r,e){return r*Math.cos(a)*(e?1:-1)}var Ka=Math.max,ya=Math.min;function bl(a,r){var e=a.getArea&&a.getArea();if(Zi(a,"cartesian2d")){var n=a.getBaseAxis();if(n.type!=="category"||!n.onBand){var o=r.getLayout("bandWidth");n.isHorizontal()?(e.x-=o,e.width+=o*2):(e.y-=o,e.height+=o*2)}}return e}var wa=function(a){Object(Pe.a)(r,a);function r(){var e=a.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,n,o,s){this._model=e,this._removeOnRenderedListener(o),this._updateDrawMode(e);var u=e.get("coordinateSystem");(u==="cartesian2d"||u==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,n,o):this._renderNormal(e,n,o,s))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,n){this._progressiveEls=[],this._incrementalRenderLarge(e,n)},r.prototype.eachRendered=function(e){Object(_r.traverseElements)(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e,n,o,s){var u=this.group,c=e.getData(),v=this._data,d=e.coordinateSystem,m=d.getBaseAxis(),x;d.type==="cartesian2d"?x=m.isHorizontal():d.type==="polar"&&(x=m.dim==="angle");var T=e.isAnimationEnabled()?e:null,D=ko(e,d);D&&this._enableRealtimeSort(D,c,o);var w=e.get("clip",!0)||D,R=bl(d,c);u.removeClipPath();var Q=e.get("roundCap",!0),rt=e.get("showBackground",!0),pt=e.getModel("backgroundStyle"),mt=pt.get("borderRadius")||0,Dt=[],Lt=this._backgroundEls,wt=s&&s.isInitSort,Nt=s&&s.type==="changeAxisOrder";function Gt(ne){var pe=Ls[d.type](c,ne),me=mu(d,x,pe);return me.useStyle(pt.getItemStyle()),d.type==="cartesian2d"&&me.setShape("r",mt),Dt[ne]=me,me}c.diff(v).add(function(ne){var pe=c.getItemModel(ne),me=Ls[d.type](c,ne,pe);if(rt&&Gt(ne),!(!c.hasValue(ne)||!$i[d.type](me))){var xe=!1;w&&(xe=Wo[d.type](R,me));var _e=ws[d.type](e,c,ne,me,x,T,m.model,!1,Q);D&&(_e.forceLabelAnimation=!0),Tl(_e,c,ne,pe,me,e,x,d.type==="polar"),wt?_e.attr({shape:me}):D?La(D,T,_e,me,ne,x,!1,!1):Object(cr.c)(_e,{shape:me},e,ne),c.setItemGraphicEl(ne,_e),u.add(_e),_e.ignore=xe}}).update(function(ne,pe){var me=c.getItemModel(ne),xe=Ls[d.type](c,ne,me);if(rt){var _e=void 0;Lt.length===0?_e=Gt(pe):(_e=Lt[pe],_e.useStyle(pt.getItemStyle()),d.type==="cartesian2d"&&_e.setShape("r",mt),Dt[ne]=_e);var Ne=Ls[d.type](c,ne),Je=Ol(x,Ne,d);Object(cr.h)(_e,{shape:Je},T,ne)}var Xe=v.getItemGraphicEl(pe);if(!c.hasValue(ne)||!$i[d.type](xe)){u.remove(Xe);return}var or=!1;if(w&&(or=Wo[d.type](R,xe),or&&u.remove(Xe)),Xe?Object(cr.g)(Xe):Xe=ws[d.type](e,c,ne,xe,x,T,m.model,!!Xe,Q),D&&(Xe.forceLabelAnimation=!0),Nt){var Tr=Xe.getTextContent();if(Tr){var Mr=Object(xr.f)(Tr);Mr.prevValue!=null&&(Mr.prevValue=Mr.value)}}else Tl(Xe,c,ne,me,xe,e,x,d.type==="polar");wt?Xe.attr({shape:xe}):D?La(D,T,Xe,xe,ne,x,!0,Nt):Object(cr.h)(Xe,{shape:xe},e,ne,null),c.setItemGraphicEl(ne,Xe),Xe.ignore=or,u.add(Xe)}).remove(function(ne){var pe=v.getItemGraphicEl(ne);pe&&Object(cr.f)(pe,e,ne)}).execute();var Kt=this._backgroundGroup||(this._backgroundGroup=new Pr.a);Kt.removeAll();for(var te=0;te<Dt.length;++te)Kt.add(Dt[te]);u.add(Kt),this._backgroundEls=Dt,this._data=c},r.prototype._renderLarge=function(e,n,o){this._clear(),Jn(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,n){this._removeBackground(),Jn(n,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var n=e.get("clip",!0)&&pa(e.coordinateSystem,!1,e),o=this.group;n?o.setClipPath(n):o.removeClipPath()},r.prototype._enableRealtimeSort=function(e,n,o){var s=this;if(!!n.count()){var u=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,e,o),this._isFirstFrame=!1;else{var c=function(v){var d=n.getItemGraphicEl(v),m=d&&d.shape;return m&&Math.abs(u.isHorizontal()?m.height:m.width)||0};this._onRendered=function(){s._updateSortWithinSameData(n,c,u,o)},o.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,n,o){var s=[];return e.each(e.mapDimension(n.dim),function(u,c){var v=o(c);v=v==null?NaN:v,s.push({dataIndex:c,mappedValue:v,ordinalNumber:u})}),s.sort(function(u,c){return c.mappedValue-u.mappedValue}),{ordinalNumbers:Object(g.H)(s,function(u){return u.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,n,o){for(var s=o.scale,u=e.mapDimension(o.dim),c=Number.MAX_VALUE,v=0,d=s.getOrdinalMeta().categories.length;v<d;++v){var m=e.rawIndexOf(u,s.getRawOrdinalNumber(v)),x=m<0?Number.MIN_VALUE:n(e.indexOfRawIndex(m));if(x>c)return!0;c=x}return!1},r.prototype._isOrderDifferentInView=function(e,n){for(var o=n.scale,s=o.getExtent(),u=Math.max(0,s[0]),c=Math.min(s[1],o.getOrdinalMeta().categories.length-1);u<=c;++u)if(e.ordinalNumbers[u]!==o.getRawOrdinalNumber(u))return!0},r.prototype._updateSortWithinSameData=function(e,n,o,s){if(!!this._isOrderChangedWithinSameData(e,n,o)){var u=this._dataSort(e,o,n);this._isOrderDifferentInView(u,o)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:u}))}},r.prototype._dispatchInitSort=function(e,n,o){var s=n.baseAxis,u=this._dataSort(e,s,function(c){return e.get(e.mapDimension(n.otherAxis.dim),c)});o.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:u})},r.prototype.remove=function(e,n){this._clear(this._model),this._removeOnRenderedListener(n)},r.prototype.dispose=function(e,n){this._removeOnRenderedListener(n)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var n=this.group,o=this._data;e&&e.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(s){Object(cr.f)(s,e,Object(br.a)(s).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Ln.a),Wo={cartesian2d:function(a,r){var e=r.width<0?-1:1,n=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height);var o=a.x+a.width,s=a.y+a.height,u=Ka(r.x,a.x),c=ya(r.x+r.width,o),v=Ka(r.y,a.y),d=ya(r.y+r.height,s),m=c<u,x=d<v;return r.x=m&&u>o?c:u,r.y=x&&v>s?d:v,r.width=m?0:c-u,r.height=x?0:d-v,e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height),m||x},polar:function(a,r){var e=r.r0<=r.r?1:-1;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}var o=ya(r.r,a.r),s=Ka(r.r0,a.r0);r.r=o,r.r0=s;var u=o-s<0;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}return u}},ws={cartesian2d:function(a,r,e,n,o,s,u,c,v){var d=new Qr.a({shape:Object(g.m)({},n),z2:1});if(d.__dataIndex=e,d.name="item",s){var m=d.shape,x=o?"height":"width";m[x]=0}return d},polar:function(a,r,e,n,o,s,u,c,v){var d=!o&&v?Dn:In.a,m=new d({shape:n,z2:1});m.name="item";var x=gu(o);if(m.calculateTextPosition=Ho(x,{isRoundCap:d===Dn}),s){var T=m.shape,D=o?"r":"endAngle",w={};T[D]=o?0:n.startAngle,w[D]=n[D],(c?cr.h:cr.c)(m,{shape:w},s)}return m}};function ko(a,r){var e=a.get("realtimeSort",!0),n=r.getBaseAxis();if(e&&n.type==="category"&&r.type==="cartesian2d")return{baseAxis:n,otherAxis:r.getOtherAxis(n)}}function La(a,r,e,n,o,s,u,c){var v,d;s?(d={x:n.x,width:n.width},v={y:n.y,height:n.height}):(d={y:n.y,height:n.height},v={x:n.x,width:n.width}),c||(u?cr.h:cr.c)(e,{shape:v},r,o,null);var m=r?a.baseAxis.model:null;(u?cr.h:cr.c)(e,{shape:d},m,o)}function Ia(a,r){for(var e=0;e<r.length;e++)if(!isFinite(a[r[e]]))return!0;return!1}var pf=["x","y","width","height"],gf=["cx","cy","r","startAngle","endAngle"],$i={cartesian2d:function(a){return!Ia(a,pf)},polar:function(a){return!Ia(a,gf)}},Ls={cartesian2d:function(a,r,e){var n=a.getItemLayout(r),o=e?Xo(e,n):0,s=n.width>0?1:-1,u=n.height>0?1:-1;return{x:n.x+s*o/2,y:n.y+u*o/2,width:n.width-s*o,height:n.height-u*o}},polar:function(a,r,e){var n=a.getItemLayout(r);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Sl(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function gu(a){return function(r){var e=r?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+e;default:return n}}}(a)}function Tl(a,r,e,n,o,s,u,c){var v=r.getItemVisual(e,"style");c||a.setShape("r",n.get(["itemStyle","borderRadius"])||0),a.useStyle(v);var d=n.getShallow("cursor");d&&a.attr("cursor",d);var m=c?u?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":u?o.height>=0?"bottom":"top":o.width>=0?"right":"left",x=Object(xr.e)(n);Object(xr.g)(a,x,{labelFetcher:s,labelDataIndex:e,defaultText:zn(s.getData(),e),inheritColor:v.fill,defaultOpacity:v.opacity,defaultOutsidePosition:m});var T=a.getTextContent();if(c&&T){var D=n.get(["label","position"]);a.textConfig.inside=D==="middle"?!0:null,Ps(a,D==="outside"?m:D,gu(u),n.get(["label","rotate"]))}Object(xr.h)(T,x,s.getRawValue(e),function(R){return Bo(r,R)});var w=n.getModel(["emphasis"]);Object(ar.J)(a,w.get("focus"),w.get("blurScope"),w.get("disabled")),Object(ar.I)(a,n),Sl(o)&&(a.style.fill="none",a.style.stroke="none",Object(g.k)(a.states,function(R){R.style&&(R.style.fill=R.style.stroke="none")}))}function Xo(a,r){var e=a.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var n=a.get(["itemStyle","borderWidth"])||0,o=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),s=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(n,o,s)}var vo=function(){function a(){}return a}(),mf=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeBar",n}return r.prototype.getDefaultShape=function(){return new vo},r.prototype.buildPath=function(e,n){for(var o=n.points,s=this.baseDimIdx,u=1-this.baseDimIdx,c=[],v=[],d=this.barWidth,m=0;m<o.length;m+=3)v[s]=d,v[u]=o[m+2],c[s]=o[m+s],c[u]=o[m+u],e.rect(c[0],c[1],v[0],v[1])},r}(ot.b);function Jn(a,r,e,n){var o=a.getData(),s=o.getLayout("valueAxisHorizontal")?1:0,u=o.getLayout("largeDataIndices"),c=o.getLayout("size"),v=a.getModel("backgroundStyle"),d=o.getLayout("largeBackgroundPoints");if(d){var m=new mf({shape:{points:d},incremental:!!n,silent:!0,z2:0});m.baseDimIdx=s,m.largeDataIndices=u,m.barWidth=c,m.useStyle(v.getItemStyle()),r.add(m),e&&e.push(m)}var x=new mf({shape:{points:o.getLayout("largePoints")},incremental:!!n,z2:1});x.baseDimIdx=s,x.largeDataIndices=u,x.barWidth=c,r.add(x),x.useStyle(o.getVisual("style")),Object(br.a)(x).seriesIndex=a.seriesIndex,a.get("silent")||(x.on("mousedown",po),x.on("mousemove",po)),e&&e.push(x)}var po=Object(Gn.c)(function(a){var r=this,e=la(r,a.offsetX,a.offsetY);Object(br.a)(r).dataIndex=e>=0?e:null},30,!1);function la(a,r,e){for(var n=a.baseDimIdx,o=1-n,s=a.shape.points,u=a.largeDataIndices,c=[],v=[],d=a.barWidth,m=0,x=s.length/3;m<x;m++){var T=m*3;if(v[n]=d,v[o]=s[T+2],c[n]=s[T+n],c[o]=s[T+o],v[o]<0&&(c[o]+=v[o],v[o]=-v[o]),r>=c[0]&&r<=c[0]+v[0]&&e>=c[1]&&e<=c[1]+v[1])return u[m]}return-1}function Ol(a,r,e){if(Zi(e,"cartesian2d")){var n=r,o=e.getArea();return{x:a?n.x:o.x,y:a?o.y:n.y,width:a?n.width:o.width,height:a?o.height:n.height}}else{var o=e.getArea(),s=r;return{cx:o.cx,cy:o.cy,r0:a?o.r0:s.r0,r:a?o.r:s.r,startAngle:a?s.startAngle:0,endAngle:a?s.endAngle:Math.PI*2}}}function mu(a,r,e){var n=a.type==="polar"?In.a:Qr.a;return new n({shape:Ol(r,e,a),silent:!0,z2:0})}var Zo=wa;function Ra(a){a.registerChartView(Zo),a.registerSeriesModel(Cs),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,g.h(Fi.c,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Object(Fi.a)("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Es("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var n=r.componentType||"series";e.eachComponent({mainType:n,query:r},function(o){r.sortInfo&&o.axis.setCategorySortInfo(r.sortInfo)})})}var Na=b("wHov"),kr=b("RlS0"),ja=Math.PI*2,xa=Math.PI/180;function Qa(a,r){return kr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Wn(a,r){var e=Qa(a,r),n=a.get("center"),o=a.get("radius");g.t(o)||(o=[0,o]),g.t(n)||(n=[n,n]);var s=Object(Le.p)(e.width,r.getWidth()),u=Object(Le.p)(e.height,r.getHeight()),c=Math.min(s,u),v=Object(Le.p)(n[0],s)+e.x,d=Object(Le.p)(n[1],u)+e.y,m=Object(Le.p)(o[0],c/2),x=Object(Le.p)(o[1],c/2);return{cx:v,cy:d,r0:m,r:x}}function yu(a,r,e){r.eachSeriesByType(a,function(n){var o=n.getData(),s=o.mapDimension("value"),u=Qa(n,e),c=Wn(n,e),v=c.cx,d=c.cy,m=c.r,x=c.r0,T=-n.get("startAngle")*xa,D=n.get("minAngle")*xa,w=0;o.each(s,function(te){!isNaN(te)&&w++});var R=o.getSum(s),Q=Math.PI/(R||w)*2,rt=n.get("clockwise"),pt=n.get("roseType"),mt=n.get("stillShowZeroSum"),Dt=o.getDataExtent(s);Dt[0]=0;var Lt=ja,wt=0,Nt=T,Gt=rt?1:-1;if(o.setLayout({viewRect:u,r:m}),o.each(s,function(te,ne){var pe;if(isNaN(te)){o.setItemLayout(ne,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:rt,cx:v,cy:d,r0:x,r:pt?NaN:m});return}pt!=="area"?pe=R===0&&mt?Q:te*Q:pe=ja/w,pe<D?(pe=D,Lt-=D):wt+=te;var me=Nt+Gt*pe;o.setItemLayout(ne,{angle:pe,startAngle:Nt,endAngle:me,clockwise:rt,cx:v,cy:d,r0:x,r:pt?Object(Le.l)(te,Dt,[x,m]):m}),Nt=me}),Lt<ja&&w)if(Lt<=.001){var Kt=ja/w;o.each(s,function(te,ne){if(!isNaN(te)){var pe=o.getItemLayout(ne);pe.angle=Kt,pe.startAngle=T+Gt*ne*Kt,pe.endAngle=T+Gt*(ne+1)*Kt}})}else Q=Lt/wt,Nt=T,o.each(s,function(te,ne){if(!isNaN(te)){var pe=o.getItemLayout(ne),me=pe.angle===D?D:te*Q;pe.startAngle=Nt,pe.endAngle=Nt+Gt*me,Nt+=Gt*me}})})}function Is(a){return{seriesType:a,reset:function(r,e){var n=e.findComponents({mainType:"legend"});if(!(!n||!n.length)){var o=r.getData();o.filterSelf(function(s){for(var u=o.getName(s),c=0;c<n.length;c++)if(!n[c].isSelected(u))return!1;return!0})}}}}var Vi=b("syXZ"),qi=b("iAFd"),_a=b("j4cP"),Pn=b("alXq"),jt=Math.PI/180;function Ht(a,r,e,n,o,s,u,c,v,d){if(a.length<2)return;function m(R){for(var Q=R.rB,rt=Q*Q,pt=0;pt<R.list.length;pt++){var mt=R.list[pt],Dt=Math.abs(mt.label.y-e),Lt=n+mt.len,wt=Lt*Lt,Nt=Math.sqrt((1-Math.abs(Dt*Dt/rt))*wt),Gt=r+(Nt+mt.len2)*o,Kt=Gt-mt.label.x,te=mt.targetTextWidth-Kt*o;Wt(mt,te,!0),mt.label.x=Gt}}function x(R){for(var Q={list:[],maxY:0},rt={list:[],maxY:0},pt=0;pt<R.length;pt++)if(R[pt].labelAlignTo==="none"){var mt=R[pt],Dt=mt.label.y>e?rt:Q,Lt=Math.abs(mt.label.y-e);if(Lt>=Dt.maxY){var wt=mt.label.x-r-mt.len2*o,Nt=n+mt.len,Gt=Math.abs(wt)<Nt?Math.sqrt(Lt*Lt/(1-wt*wt/Nt/Nt)):Nt;Dt.rB=Gt,Dt.maxY=Lt}Dt.list.push(mt)}m(Q),m(rt)}for(var T=a.length,D=0;D<T;D++)if(a[D].position==="outer"&&a[D].labelAlignTo==="labelLine"){var w=a[D].label.x-d;a[D].linePoints[1][0]+=w,a[D].label.x=d}Object(Pn.d)(a,v,v+u)&&x(a)}function Rt(a,r,e,n,o,s,u,c){for(var v=[],d=[],m=Number.MAX_VALUE,x=-Number.MAX_VALUE,T=0;T<a.length;T++){var D=a[T].label;Yt(a[T])||(D.x<r?(m=Math.min(m,D.x),v.push(a[T])):(x=Math.max(x,D.x),d.push(a[T])))}for(var T=0;T<a.length;T++){var w=a[T];if(!Yt(w)&&w.linePoints){if(w.labelStyleWidth!=null)continue;var D=w.label,R=w.linePoints,Q=void 0;w.labelAlignTo==="edge"?D.x<r?Q=R[2][0]-w.labelDistance-u-w.edgeDistance:Q=u+o-w.edgeDistance-R[2][0]-w.labelDistance:w.labelAlignTo==="labelLine"?D.x<r?Q=m-u-w.bleedMargin:Q=u+o-x-w.bleedMargin:D.x<r?Q=D.x-u-w.bleedMargin:Q=u+o-D.x-w.bleedMargin,w.targetTextWidth=Q,Wt(w,Q)}}Ht(d,r,e,n,1,o,s,u,c,x),Ht(v,r,e,n,-1,o,s,u,c,m);for(var T=0;T<a.length;T++){var w=a[T];if(!Yt(w)&&w.linePoints){var D=w.label,R=w.linePoints,rt=w.labelAlignTo==="edge",pt=D.style.padding,mt=pt?pt[1]+pt[3]:0,Dt=D.style.backgroundColor?0:mt,Lt=w.rect.width+Dt,wt=R[1][0]-R[2][0];rt?D.x<r?R[2][0]=u+w.edgeDistance+Lt+w.labelDistance:R[2][0]=u+o-w.edgeDistance-Lt-w.labelDistance:(D.x<r?R[2][0]=D.x+w.labelDistance:R[2][0]=D.x-w.labelDistance,R[1][0]=R[2][0]+wt),R[1][1]=R[2][1]=D.y}}}function Wt(a,r,e){if(e===void 0&&(e=!1),a.labelStyleWidth==null){var n=a.label,o=n.style,s=a.rect,u=o.backgroundColor,c=o.padding,v=c?c[1]+c[3]:0,d=o.overflow,m=s.width+(u?0:v);if(r<m||e){var x=s.height;if(d&&d.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",r-v);var T=n.getBoundingRect();n.setStyle("width",Math.ceil(T.width)),n.setStyle("backgroundColor",u)}else{var D=r-v,w=r<m?D:e?D>a.unconstrainedWidth?null:D:null;n.setStyle("width",w)}var R=n.getBoundingRect();s.width=R.width;var Q=(n.style.margin||0)+2.1;s.height=R.height+Q,s.y-=(s.height-x)/2}}}function Yt(a){return a.position==="center"}function re(a){var r=a.getData(),e=[],n,o,s=!1,u=(a.get("minShowLabelAngle")||0)*jt,c=r.getLayout("viewRect"),v=r.getLayout("r"),d=c.width,m=c.x,x=c.y,T=c.height;function D(wt){wt.ignore=!0}function w(wt){if(!wt.ignore)return!0;for(var Nt in wt.states)if(wt.states[Nt].ignore===!1)return!0;return!1}r.each(function(wt){var Nt=r.getItemGraphicEl(wt),Gt=Nt.shape,Kt=Nt.getTextContent(),te=Nt.getTextGuideLine(),ne=r.getItemModel(wt),pe=ne.getModel("label"),me=pe.get("position")||ne.get(["emphasis","label","position"]),xe=pe.get("distanceToLabelLine"),_e=pe.get("alignTo"),Ne=Object(Le.p)(pe.get("edgeDistance"),d),Je=pe.get("bleedMargin"),Xe=ne.getModel("labelLine"),or=Xe.get("length");or=Object(Le.p)(or,d);var Tr=Xe.get("length2");if(Tr=Object(Le.p)(Tr,d),Math.abs(Gt.endAngle-Gt.startAngle)<u){Object(g.k)(Kt.states,D),Kt.ignore=!0;return}if(!!w(Kt)){var Mr=(Gt.startAngle+Gt.endAngle)/2,Ur=Math.cos(Mr),Yr=Math.sin(Mr),fn,Yn,Bn,sn;n=Gt.cx,o=Gt.cy;var Vr=me==="inside"||me==="inner";if(me==="center")fn=Gt.cx,Yn=Gt.cy,sn="center";else{var bn=(Vr?(Gt.r+Gt.r0)/2*Ur:Gt.r*Ur)+n,mn=(Vr?(Gt.r+Gt.r0)/2*Yr:Gt.r*Yr)+o;if(fn=bn+Ur*3,Yn=mn+Yr*3,!Vr){var On=bn+Ur*(or+v-Gt.r),Ei=mn+Yr*(or+v-Gt.r),Ri=On+(Ur<0?-1:1)*Tr,ti=Ei;_e==="edge"?fn=Ur<0?m+Ne:m+d-Ne:fn=Ri+(Ur<0?-xe:xe),Yn=ti,Bn=[[bn,mn],[On,Ei],[Ri,ti]]}sn=Vr?"center":_e==="edge"?Ur>0?"right":"left":Ur>0?"left":"right"}var bi=Math.PI,_i=0,Ji=pe.get("rotate");if(Object(g.z)(Ji))_i=Ji*(bi/180);else if(me==="center")_i=0;else if(Ji==="radial"||Ji===!0){var _s=Ur<0?-Mr+bi:-Mr;_i=_s}else if(Ji==="tangential"&&me!=="outside"&&me!=="outer"){var ha=Math.atan2(Ur,Yr);ha<0&&(ha=bi*2+ha);var Xd=Yr>0;Xd&&(ha=bi+ha),_i=ha-bi}if(s=!!_i,Kt.x=fn,Kt.y=Yn,Kt.rotation=_i,Kt.setStyle({verticalAlign:"middle"}),Vr){Kt.setStyle({align:sn});var a0=Kt.states.select;a0&&(a0.x+=Kt.x,a0.y+=Kt.y)}else{var ml=Kt.getBoundingRect().clone();ml.applyTransform(Kt.getComputedTransform());var H_=(Kt.style.margin||0)+2.1;ml.y-=H_/2,ml.height+=H_,e.push({label:Kt,labelLine:te,position:me,len:or,len2:Tr,minTurnAngle:Xe.get("minTurnAngle"),maxSurfaceAngle:Xe.get("maxSurfaceAngle"),surfaceNormal:new qi.a(Ur,Yr),linePoints:Bn,textAlign:sn,labelDistance:xe,labelAlignTo:_e,edgeDistance:Ne,bleedMargin:Je,rect:ml,unconstrainedWidth:ml.width,labelStyleWidth:Kt.style.width})}Nt.setTextConfig({inside:Vr})}}),!s&&a.get("avoidLabelOverlap")&&Rt(e,n,o,v,d,T,m,x);for(var R=0;R<e.length;R++){var Q=e[R],rt=Q.label,pt=Q.labelLine,mt=isNaN(rt.x)||isNaN(rt.y);if(rt){rt.setStyle({align:Q.textAlign}),mt&&(Object(g.k)(rt.states,D),rt.ignore=!0);var Dt=rt.states.select;Dt&&(Dt.x+=rt.x,Dt.y+=rt.y)}if(pt){var Lt=Q.linePoints;mt||!Lt?(Object(g.k)(pt.states,D),pt.ignore=!0):(Object(_a.c)(Lt,Q.minTurnAngle),Object(_a.b)(Lt,Q.surfaceNormal,Q.maxSurfaceAngle),pt.setShape({points:Lt}),rt.__hostTarget.textGuideLineConfig={anchor:new qi.a(Lt[0][0],Lt[0][1])})}}}function ve(a,r,e){var n=a.get("borderRadius");if(n==null)return e?{cornerRadius:0}:null;Object(g.t)(n)||(n=[n,n,n,n]);var o=Math.abs(r.r||0-r.r0||0);return{cornerRadius:Object(g.H)(n,function(s){return Object(lt.g)(s,o)})}}var Ze=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this)||this;s.z2=2;var u=new he.a;return s.setTextContent(u),s.updateData(e,n,o,!0),s}return r.prototype.updateData=function(e,n,o,s){var u=this,c=e.hostModel,v=e.getItemModel(n),d=v.getModel("emphasis"),m=e.getItemLayout(n),x=Object(g.m)(ve(v.getModel("itemStyle"),m,!0),m);if(isNaN(x.startAngle)){u.setShape(x);return}if(s){u.setShape(x);var T=c.getShallow("animationType");c.ecModel.ssr?(cr.c(u,{scaleX:0,scaleY:0},c,{dataIndex:n,isFrom:!0}),u.originX=x.cx,u.originY=x.cy):T==="scale"?(u.shape.r=m.r0,cr.c(u,{shape:{r:m.r}},c,n)):o!=null?(u.setShape({startAngle:o,endAngle:o}),cr.c(u,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},c,n)):(u.shape.endAngle=m.startAngle,cr.h(u,{shape:{endAngle:m.endAngle}},c,n))}else Object(cr.g)(u),cr.h(u,{shape:x},c,n);u.useStyle(e.getItemVisual(n,"style")),Object(ar.I)(u,v);var D=(m.startAngle+m.endAngle)/2,w=c.get("selectedOffset"),R=Math.cos(D)*w,Q=Math.sin(D)*w,rt=v.getShallow("cursor");rt&&u.attr("cursor",rt),this._updateLabel(c,e,n),u.ensureState("emphasis").shape=Object(g.m)({r:m.r+(d.get("scale")&&d.get("scaleSize")||0)},ve(d.getModel("itemStyle"),m)),Object(g.m)(u.ensureState("select"),{x:R,y:Q,shape:ve(v.getModel(["select","itemStyle"]),m)}),Object(g.m)(u.ensureState("blur"),{shape:ve(v.getModel(["blur","itemStyle"]),m)});var pt=u.getTextGuideLine(),mt=u.getTextContent();pt&&Object(g.m)(pt.ensureState("select"),{x:R,y:Q}),Object(g.m)(mt.ensureState("select"),{x:R,y:Q}),Object(ar.J)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n,o){var s=this,u=n.getItemModel(o),c=u.getModel("labelLine"),v=n.getItemVisual(o,"style"),d=v&&v.fill,m=v&&v.opacity;Object(xr.g)(s,Object(xr.e)(u),{labelFetcher:n.hostModel,labelDataIndex:o,inheritColor:d,defaultOpacity:m,defaultText:e.getFormattedLabel(o,"normal")||n.getName(o)});var x=s.getTextContent();s.setTextConfig({position:null,rotation:null}),x.attr({z2:10});var T=e.get(["label","position"]);if(T!=="outside"&&T!=="outer")s.removeTextGuideLine();else{var D=this.getTextGuideLine();D||(D=new Vi.a,this.setTextGuideLine(D)),Object(_a.d)(this,Object(_a.a)(u),{stroke:d,opacity:Object(g.Q)(c.get(["lineStyle","opacity"]),m,1)})}},r}(In.a),Ue=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return r.prototype.init=function(){var e=new Pr.a;this._sectorGroup=e},r.prototype.render=function(e,n,o,s){var u=e.getData(),c=this._data,v=this.group,d;if(!c&&u.count()>0){for(var m=u.getItemLayout(0),x=1;isNaN(m&&m.startAngle)&&x<u.count();++x)m=u.getItemLayout(x);m&&(d=m.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),u.count()===0&&e.get("showEmptyCircle")){var T=new In.a({shape:Wn(e,o)});T.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=T,v.add(T)}u.diff(c).add(function(D){var w=new Ze(u,D,d);u.setItemGraphicEl(D,w),v.add(w)}).update(function(D,w){var R=c.getItemGraphicEl(w);R.updateData(u,D,d),R.off("click"),v.add(R),u.setItemGraphicEl(D,R)}).remove(function(D){var w=c.getItemGraphicEl(D);cr.f(w,e,D)}).execute(),re(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},r.prototype.dispose=function(){},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,c=e[1]-s.cy,v=Math.sqrt(u*u+c*c);return v<=s.r&&v>=s.r0}},r.type="pie",r}(Ln.a),er=Ue,lr=b("dk5l"),ue=b("J94c");function Te(a,r,e){r=Object(g.t)(r)&&{coordDimensions:r}||Object(g.m)({encodeDefine:a.getEncode()},r);var n=a.getSource(),o=Object(lr.b)(n,r).dimensions,s=new ue.a(o,a);return s.initData(n,e),s}var ye=b("ZlUk"),ze=function(){function a(r,e){this._getDataWithEncodedVisual=r,this._getRawData=e}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var e=this._getRawData();return e.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var e=this._getDataWithEncodedVisual();return e.indexOfName(r)},a.prototype.getItemVisual=function(r,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(r,e)},a}(),Ye=ze,ir=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ye(g.c(this.getData,this),g.c(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Te(this,{coordDimensions:["value"],encodeDefaulter:g.h(ye.d,this)})},r.prototype.getDataParams=function(e){var n=this.getData(),o=a.prototype.getDataParams.call(this,e),s=[];return n.each(n.mapDimension("value"),function(u){s.push(u)}),o.percent=Object(Le.e)(s,e,n.hostModel.get("percentPrecision")),o.$vars.push("percent"),o},r.prototype._defaultLabelLine=function(e){Be.f(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(Mn.b),ur=ir;function Or(a){return{seriesType:a,reset:function(r,e){var n=r.getData();n.filterSelf(function(o){var s=n.mapDimension("value"),u=n.get(s,o);return!(Object(g.z)(u)&&!isNaN(u)&&u<0)})}}}function yr(a){a.registerChartView(er),a.registerSeriesModel(ur),Object(Na.a)("pie",a.registerAction),a.registerLayout(Object(g.h)(yu,"pie")),a.registerProcessor(Is("pie")),a.registerProcessor(Or("pie"))}var zr=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var e=this.option.progressive;return e==null?this.option.large?5e3:this.get("progressive"):e},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e==null?this.option.large?1e4:this.get("progressiveThreshold"):e},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(Mn.b),en=zr,Ar=b("uSNo"),pn=4,Oi=function(){function a(){}return a}(),wn=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.getDefaultShape=function(){return new Oi},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(e,n){var o=n.points,s=n.size,u=this.symbolProxy,c=u.shape,v=e.getContext?e.getContext():e,d=v&&s[0]<pn,m=this.softClipShape,x;if(d){this._ctx=v;return}for(this._ctx=null,x=this._off;x<o.length;){var T=o[x++],D=o[x++];isNaN(T)||isNaN(D)||m&&!m.contain(T,D)||(c.x=T-s[0]/2,c.y=D-s[1]/2,c.width=s[0],c.height=s[1],u.buildPath(e,c,!0))}this.incremental&&(this._off=x,this.notClear=!0)},r.prototype.afterBrush=function(){var e=this.shape,n=e.points,o=e.size,s=this._ctx,u=this.softClipShape,c;if(!!s){for(c=this._off;c<n.length;){var v=n[c++],d=n[c++];isNaN(v)||isNaN(d)||u&&!u.contain(v,d)||s.fillRect(v-o[0]/2,d-o[1]/2,o[0],o[1])}this.incremental&&(this._off=c,this.notClear=!0)}},r.prototype.findDataIndex=function(e,n){for(var o=this.shape,s=o.points,u=o.size,c=Math.max(u[0],4),v=Math.max(u[1],4),d=s.length/2-1;d>=0;d--){var m=d*2,x=s[m]-c/2,T=s[m+1]-v/2;if(e>=x&&n>=T&&e<=x+c&&n<=T+v)return d}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.points,s=n.size,u=s[0],c=s[1],v=Infinity,d=Infinity,m=-Infinity,x=-Infinity,T=0;T<o.length;){var D=o[T++],w=o[T++];v=Math.min(D,v),m=Math.max(D,m),d=Math.min(w,d),x=Math.max(w,x)}e=this._rect=new Ar.a(v-u/2,d-c/2,m-v+u,x-d+c)}return e},r}(ot.b),Gi=function(){function a(){this.group=new Pr.a}return a.prototype.updateData=function(r,e){this._clear();var n=this._create();n.setShape({points:r.getLayout("points")}),this._setCommon(n,r,e)},a.prototype.updateLayout=function(r){var e=r.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,s=n.startIndex*4*2;e=new Float32Array(e.buffer,s,o)}n.setShape("points",e),n.reset()})},a.prototype.incrementalPrepareUpdate=function(r){this._clear()},a.prototype.incrementalUpdate=function(r,e,n){var o=this._newAdded[0],s=e.getLayout("points"),u=o&&o.shape.points;if(u&&u.length<2e4){var c=u.length,v=new Float32Array(c+s.length);v.set(u),v.set(s,c),o.endIndex=r.end,o.setShape({points:v})}else{this._newAdded=[];var d=this._create();d.startIndex=r.start,d.endIndex=r.end,d.incremental=!0,d.setShape({points:s}),this._setCommon(d,e,n)}},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new wn({cursor:"default"});return this.group.add(r),this._newAdded.push(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;n=n||{};var s=e.getVisual("symbolSize");r.setShape("size",s instanceof Array?s:[s,s]),r.softClipShape=n.clipShape||null,r.symbolProxy=Object(cn.a)(e.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var u=r.shape.size[0]<pn;r.useStyle(o.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var c=e.getVisual("style"),v=c&&c.fill;v&&r.setColor(v);var d=Object(br.a)(r);d.seriesIndex=o.seriesIndex,r.on("mousemove",function(m){d.dataIndex=null;var x=r.hoverDataIdx;x>=0&&(d.dataIndex=x+(r.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),Ba=Gi,xu=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.updateData(s,{clipShape:this._getClipShape(e)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.incrementalPrepareUpdate(s),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._symbolDraw.incrementalUpdate(e,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=e.end===n.getData().count()},r.prototype.updateTransform=function(e,n,o){var s=e.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var u=Qn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},r.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype._updateSymbolDraw=function(e,n){var o=this._symbolDraw,s=n.pipelineContext,u=s.large;return(!o||u!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=u?new Ba:new Wr,this._isLargeDraw=u,this.group.removeAll()),this.group.add(o.group),o},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(Ln.a),Yo=xu,gn=b("U3bR"),$n=b("/PGm"),ih=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}($n.a),Al=ih,Rs=b("aFB9"),_u=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Be.b).models[0]},r.type="cartesian2dAxis",r}($n.a);g.K(_u,Rs.a);var o0=_u,ah={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Zd=g.I({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},ah),yf=g.I({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},ah),Yd=g.I({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},yf),Kd=g.i({logBase:10},yf),oh={category:Zd,value:yf,time:Yd,log:Kd},Qd=b("Z7PX"),Jd={value:1,category:1,time:1,log:1};function Ns(a,r,e,n){Object(g.k)(Jd,function(o,s){var u=Object(g.I)(Object(g.I)({},oh[s],!0),n,!0),c=function(v){Object(Pe.a)(d,v);function d(){var m=v!==null&&v.apply(this,arguments)||this;return m.type=r+"Axis."+s,m}return d.prototype.mergeDefaultAndTheme=function(m,x){var T=Object(kr.d)(this),D=T?Object(kr.f)(m):{},w=x.getTheme();Object(g.I)(m,w.get(s+"Axis")),Object(g.I)(m,this.getDefaultOption()),m.type=sh(m),T&&Object(kr.h)(m,D,T)},d.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=Qd.a.createByAxisModel(this))},d.prototype.getCategories=function(m){var x=this.option;if(x.type==="category")return m?x.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=r+"Axis."+s,d.defaultOption=u,d}(e);a.registerComponentModel(c)}),a.registerSubTypeDefaulter(r+"Axis",sh)}function sh(a){return a.type||(a.data?"category":"value")}var di=b("htXI"),$d=b("1oYb"),xn=b("OjCH"),Rr=b("FLFE"),xf=["x","y"];function lh(a){return a.type==="interval"||a.type==="time"}var bu=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=xf,e}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!lh(e)||!lh(n))){var o=e.getExtent(),s=n.getExtent(),u=this.dataToPoint([o[0],s[0]]),c=this.dataToPoint([o[1],s[1]]),v=o[1]-o[0],d=s[1]-s[0];if(!(!v||!d)){var m=(c[0]-u[0])/v,x=(c[1]-u[1])/d,T=u[0]-o[0]*m,D=u[1]-s[0]*x,w=this._transform=[m,0,0,x,T,D];this._invTransform=Object(xn.e)([],w)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(e){var n=this.getAxis("x"),o=this.getAxis("y");return n.contain(n.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},r.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},r.prototype.dataToPoint=function(e,n,o){o=o||[];var s=e[0],u=e[1];if(this._transform&&s!=null&&isFinite(s)&&u!=null&&isFinite(u))return Object(Rr.b)(o,e,this._transform);var c=this.getAxis("x"),v=this.getAxis("y");return o[0]=c.toGlobalCoord(c.dataToCoord(s,n)),o[1]=v.toGlobalCoord(v.dataToCoord(u,n)),o},r.prototype.clampData=function(e,n){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,u=o.getExtent(),c=s.getExtent(),v=o.parse(e[0]),d=s.parse(e[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(u[0],u[1]),v),Math.max(u[0],u[1])),n[1]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),n},r.prototype.pointToData=function(e,n){var o=[];if(this._invTransform)return Object(Rr.b)(o,e,this._invTransform);var s=this.getAxis("x"),u=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(e[0]),n),o[1]=u.coordToData(u.toLocalCoord(e[1]),n),o},r.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},r.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),o=Math.min(e[0],e[1]),s=Math.min(n[0],n[1]),u=Math.max(e[0],e[1])-o,c=Math.max(n[0],n[1])-s;return new Ar.a(o,s,u,c)},r}($d.a),qd=bu,ba=b("SuLH"),tp=function(a){Object(Pe.a)(r,a);function r(e,n,o,s,u){var c=a.call(this,e,n,o)||this;return c.index=0,c.type=s||"value",c.position=u||"bottom",c}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.getGlobalExtent=function(e){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),e&&n[0]>n[1]&&n.reverse(),n},r.prototype.pointToData=function(e,n){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),n)},r.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},r}(ba.a),ep=tp;function _f(a,r,e){e=e||{};var n=a.coordinateSystem,o=r.axis,s={},u=o.getAxesOnZeroOf()[0],c=o.position,v=u?"onZero":c,d=o.dim,m=n.getRect(),x=[m.x,m.x+m.width,m.y,m.y+m.height],T={left:0,right:1,top:0,bottom:1,onZero:2},D=r.get("offset")||0,w=d==="x"?[x[2]-D,x[3]+D]:[x[0]-D,x[1]+D];if(u){var R=u.toGlobalCoord(u.dataToCoord(0));w[T.onZero]=Math.max(Math.min(R,w[1]),w[0])}s.position=[d==="y"?w[T[v]]:x[0],d==="x"?w[T[v]]:x[3]],s.rotation=Math.PI/2*(d==="x"?0:1);var Q={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=Q[c],s.labelOffset=u?w[T[c]]-w[T.onZero]:0,r.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),g.O(e.labelInside,r.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var rt=r.get(["axisLabel","rotate"]);return s.labelRotate=v==="top"?-rt:rt,s.z2=1,s}function bf(a){return a.get("coordinateSystem")==="cartesian2d"}function uh(a){var r={xAxisModel:null,yAxisModel:null};return g.k(r,function(e,n){var o=n.replace(/Model$/,""),s=a.getReferringComponents(o,Be.b).models[0];r[n]=s}),r}var js=b("H9JY"),Su=b("GYvh"),Bs=Math.log;function go(a,r,e){var n=Su.a.prototype,o=n.getTicks.call(e),s=n.getTicks.call(e,!0),u=o.length-1,c=n.getInterval.call(e),v=Object(di.f)(a,r),d=v.extent,m=v.fixMin,x=v.fixMax;if(a.type==="log"){var T=Bs(a.base);d=[Bs(d[0])/T,Bs(d[1])/T]}a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:u,fixMin:m,fixMax:x});var D=n.getExtent.call(a);m&&(d[0]=D[0]),x&&(d[1]=D[1]);var w=n.getInterval.call(a),R=d[0],Q=d[1];if(m&&x)w=(Q-R)/u;else if(m)for(Q=d[0]+w*u;Q<d[1]&&isFinite(Q)&&isFinite(d[1]);)w=Object(js.c)(w),Q=d[0]+w*u;else if(x)for(R=d[1]-w*u;R>d[0]&&isFinite(R)&&isFinite(d[0]);)w=Object(js.c)(w),R=d[1]-w*u;else{var rt=a.getTicks().length-1;rt>u&&(w=Object(js.c)(w));var pt=w*u;Q=Math.ceil(d[1]/w)*w,R=Object(Le.v)(Q-pt),R<0&&d[0]>=0?(R=0,Q=Object(Le.v)(pt)):Q>0&&d[1]<=0&&(Q=0,R=-Object(Le.v)(pt))}var mt=(o[0].value-s[0].value)/c,Dt=(o[u].value-s[u].value)/c;if(n.setExtent.call(a,R+w*mt,Q+w*Dt),n.setInterval.call(a,w),(mt||Dt)&&n.setNiceExtent.call(a,R+w,Q-w),!1)var Lt}var Sf=function(){function a(r,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=xf,this._initCartesian(r,e,n),this.model=r}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(r,e){var n=this._axesMap;this._updateScale(r,this.model);function o(u){var c,v=Object(g.F)(u),d=v.length;if(!!d){for(var m=[],x=d-1;x>=0;x--){var T=+v[x],D=u[T],w=D.model,R=D.scale;Object(js.e)(R)&&w.get("alignTicks")&&w.get("interval")==null?m.push(D):(Object(di.i)(R,w),Object(js.e)(R)&&(c=D))}m.length&&(c||(c=m.pop(),Object(di.i)(c.scale,c.model)),Object(g.k)(m,function(Q){go(Q.scale,Q.model,c.scale)}))}}o(n.x),o(n.y);var s={};Object(g.k)(n.x,function(u){Tu(n,"y",u,s)}),Object(g.k)(n.y,function(u){Tu(n,"x",u,s)}),this.resize(this.model,e)},a.prototype.resize=function(r,e,n){var o=r.getBoxLayoutParams(),s=!n&&r.get("containLabel"),u=Object(kr.g)(o,{width:e.getWidth(),height:e.getHeight()});this._rect=u;var c=this._axesList;v(),s&&(Object(g.k)(c,function(d){if(!d.model.get(["axisLabel","inside"])){var m=Object(di.b)(d);if(m){var x=d.isHorizontal()?"height":"width",T=d.model.get(["axisLabel","margin"]);u[x]-=m[x]+T,d.position==="top"?u.y+=m.height+T:d.position==="left"&&(u.x+=m.width+T)}}}),v()),Object(g.k)(this._coordsList,function(d){d.calcAffineTransform()});function v(){Object(g.k)(c,function(d){var m=d.isHorizontal(),x=m?[0,u.width]:[0,u.height],T=d.inverse?1:0;d.setExtent(x[T],x[1-T]),rp(d,m?u.x:u.y)})}},a.prototype.getAxis=function(r,e){var n=this._axesMap[r];if(n!=null)return n[e||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(r,e){if(r!=null&&e!=null){var n="x"+r+"y"+e;return this._coordsMap[n]}Object(g.A)(r)&&(e=r.yAxisIndex,r=r.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===r||s[o].getAxis("y").index===e)return s[o]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},a.prototype.convertFromPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},a.prototype._findConvertTarget=function(r){var e=r.seriesModel,n=r.xAxisModel||e&&e.getReferringComponents("xAxis",Be.b).models[0],o=r.yAxisModel||e&&e.getReferringComponents("yAxis",Be.b).models[0],s=r.gridModel,u=this._coordsList,c,v;if(e)c=e.coordinateSystem,Object(g.r)(u,c)<0&&(c=null);else if(n&&o)c=this.getCartesian(n.componentIndex,o.componentIndex);else if(n)v=this.getAxis("x",n.componentIndex);else if(o)v=this.getAxis("y",o.componentIndex);else if(s){var d=s.coordinateSystem;d===this&&(c=this._coordsList[0])}return{cartesian:c,axis:v}},a.prototype.containPoint=function(r){var e=this._coordsList[0];if(e)return e.containPoint(r)},a.prototype._initCartesian=function(r,e,n){var o=this,s=this,u={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},v={x:0,y:0};if(e.eachComponent("xAxis",d("x"),this),e.eachComponent("yAxis",d("y"),this),!v.x||!v.y){this._axesMap={},this._axesList=[];return}this._axesMap=c,Object(g.k)(c.x,function(m,x){Object(g.k)(c.y,function(T,D){var w="x"+x+"y"+D,R=new qd(w);R.master=o,R.model=r,o._coordsMap[w]=R,o._coordsList.push(R),R.addAxis(m),R.addAxis(T)})});function d(m){return function(x,T){if(!!Ml(x,r)){var D=x.get("position");m==="x"?D!=="top"&&D!=="bottom"&&(D=u.bottom?"top":"bottom"):D!=="left"&&D!=="right"&&(D=u.left?"right":"left"),u[D]=!0;var w=new ep(m,Object(di.a)(x),[0,0],x.get("type"),D),R=w.type==="category";w.onBand=R&&x.get("boundaryGap"),w.inverse=x.get("inverse"),x.axis=w,w.model=x,w.grid=s,w.index=T,s._axesList.push(w),c[m][T]=w,v[m]++}}}},a.prototype._updateScale=function(r,e){Object(g.k)(this._axesList,function(o){if(o.scale.setExtent(Infinity,-Infinity),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),r.eachSeries(function(o){if(bf(o)){var s=uh(o),u=s.xAxisModel,c=s.yAxisModel;if(!Ml(u,e)||!Ml(c,e))return;var v=this.getCartesian(u.componentIndex,c.componentIndex),d=o.getData(),m=v.getAxis("x"),x=v.getAxis("y");n(d,m),n(d,x)}},this);function n(o,s){Object(g.k)(Object(di.d)(o,s.dim),function(u){s.scale.unionExtentFromData(o,u)})}},a.prototype.getTooltipAxes=function(r){var e=[],n=[];return Object(g.k)(this.getCartesians(),function(o){var s=r!=null&&r!=="auto"?o.getAxis(r):o.getBaseAxis(),u=o.getOtherAxis(s);Object(g.r)(e,s)<0&&e.push(s),Object(g.r)(n,u)<0&&n.push(u)}),{baseAxes:e,otherAxes:n}},a.create=function(r,e){var n=[];return r.eachComponent("grid",function(o,s){var u=new a(o,r,e);u.name="grid_"+s,u.resize(o,e,!0),o.coordinateSystem=u,n.push(u)}),r.eachSeries(function(o){if(!!bf(o)){var s=uh(o),u=s.xAxisModel,c=s.yAxisModel,v=u.getCoordSysModel(),d=v.coordinateSystem;o.coordinateSystem=d.getCartesian(u.componentIndex,c.componentIndex)}}),n},a.dimensions=xf,a}();function Ml(a,r){return a.getCoordSysModel()===r}function Tu(a,r,e,n){e.getAxesOnZeroOf=function(){return s?[s]:[]};var o=a[r],s,u=e.model,c=u.get(["axisLine","onZero"]),v=u.get(["axisLine","onZeroAxisIndex"]);if(!c)return;if(v!=null)fh(o[v])&&(s=o[v]);else for(var d in o)if(o.hasOwnProperty(d)&&fh(o[d])&&!n[m(o[d])]){s=o[d];break}s&&(n[m(s)]=!0);function m(x){return x.dim+"_"+x.index}}function fh(a){return a&&a.type!=="category"&&a.type!=="time"&&Object(di.g)(a)}function rp(a,r){var e=a.getExtent(),n=e[0]+e[1];a.toGlobalCoord=a.dim==="x"?function(o){return o+r}:function(o){return n-o+r},a.toLocalCoord=a.dim==="x"?function(o){return o-r}:function(o){return n-o+r}}var Fs=Sf,Ui=b("QrW4"),fi=b("PWZQ"),Ja=Math.PI,Ko=function(){function a(r,e){this.group=new Pr.a,this.opt=e,this.axisModel=r,Object(g.i)(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Pr.a({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return a.prototype.hasBuilder=function(r){return!!ch[r]},a.prototype.add=function(r){ch[r](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(r,e,n){var o=Object(Le.u)(e-r),s,u;return Object(Le.k)(o)?(u=n>0?"top":"bottom",s="center"):Object(Le.k)(o-Ja)?(u=n>0?"bottom":"top",s="center"):(u="middle",o>0&&o<Ja?s=n>0?"right":"left":s=n>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:u}},a.makeAxisEventDataBase=function(r){var e={componentType:r.mainType,componentIndex:r.componentIndex};return e[r.mainType+"Index"]=r.componentIndex,e},a.isLabelSilent=function(r){var e=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||e&&e.show)},a}(),ch={axisLine:function(a,r,e,n){var o=r.get(["axisLine","show"]);if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisLine")),!!o){var s=r.axis.getExtent(),u=n.transform,c=[s[0],0],v=[s[1],0];u&&(Object(Rr.b)(c,c,u),Object(Rr.b)(v,v,u));var d=Object(g.m)({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),m=new Ui.a({subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:v[0],y2:v[1]},style:d,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});m.anid="line",e.add(m);var x=r.get(["axisLine","symbol"]);if(x!=null){var T=r.get(["axisLine","symbolSize"]);Object(g.C)(x)&&(x=[x,x]),(Object(g.C)(T)||Object(g.z)(T))&&(T=[T,T]);var D=Object(cn.b)(r.get(["axisLine","symbolOffset"])||0,T),w=T[0],R=T[1];Object(g.k)([{rotate:a.rotation+Math.PI/2,offset:D[0],r:0},{rotate:a.rotation-Math.PI/2,offset:D[1],r:Math.sqrt((c[0]-v[0])*(c[0]-v[0])+(c[1]-v[1])*(c[1]-v[1]))}],function(Q,rt){if(x[rt]!=="none"&&x[rt]!=null){var pt=Object(cn.a)(x[rt],-w/2,-R/2,w,R,d.stroke,!0),mt=Q.r+Q.offset;pt.attr({rotation:Q.rotate,x:c[0]+mt*Math.cos(a.rotation),y:c[1]-mt*Math.sin(a.rotation),silent:!0,z2:11}),e.add(pt)}})}}},axisTickLabel:function(a,r,e,n){var o=ip(e,n,r,a),s=op(e,n,r,a);if(np(r,s,o),ap(e,n,r,a.tickDirection),r.get(["axisLabel","hideOverlap"])){var u=Object(Pn.b)(Object(g.H)(s,function(c){return{label:c,priority:c.z2,defaultAttr:{ignore:c.ignore}}}));Object(Pn.a)(u)}},axisName:function(a,r,e,n){var o=Object(g.O)(a.axisName,r.get("name"));if(!!o){var s=r.get("nameLocation"),u=a.nameDirection,c=r.getModel("nameTextStyle"),v=r.get("nameGap")||0,d=r.axis.getExtent(),m=d[0]>d[1]?-1:1,x=[s==="start"?d[0]-m*v:s==="end"?d[1]+m*v:(d[0]+d[1])/2,Ou(s)?a.labelOffset+u*v:0],T,D=r.get("nameRotate");D!=null&&(D=D*Ja/180);var w;Ou(s)?T=Ko.innerTextLayout(a.rotation,D!=null?D:a.rotation,u):(T=ni(a.rotation,s,D||0,d),w=a.axisNameAvailableWidth,w!=null&&(w=Math.abs(w/Math.sin(T.rotation)),!isFinite(w)&&(w=null)));var R=c.getFont(),Q=r.get("nameTruncate",!0)||{},rt=Q.ellipsis,pt=Object(g.O)(a.nameTruncateMaxWidth,Q.maxWidth,w),mt=new he.a({x:x[0],y:x[1],rotation:T.rotation,silent:Ko.isLabelSilent(r),style:Object(xr.c)(c,{text:o,font:R,overflow:"truncate",width:pt,ellipsis:rt,fill:c.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:c.get("align")||T.textAlign,verticalAlign:c.get("verticalAlign")||T.textVerticalAlign}),z2:1});if(_r.setTooltipConfig({el:mt,componentModel:r,itemName:o}),mt.__fullText=o,mt.anid="name",r.get("triggerEvent")){var Dt=Ko.makeAxisEventDataBase(r);Dt.targetType="axisName",Dt.name=o,Object(br.a)(mt).eventData=Dt}n.add(mt),mt.updateTransform(),e.add(mt),mt.decomposeTransform()}}};function ni(a,r,e,n){var o=Object(Le.u)(e-a),s,u,c=n[0]>n[1],v=r==="start"&&!c||r!=="start"&&c;return Object(Le.k)(o-Ja/2)?(u=v?"bottom":"top",s="center"):Object(Le.k)(o-Ja*1.5)?(u=v?"top":"bottom",s="center"):(u="middle",o<Ja*1.5&&o>Ja/2?s=v?"left":"right":s=v?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:u}}function np(a,r,e){if(!Object(di.j)(a.axis)){var n=a.get(["axisLabel","showMinLabel"]),o=a.get(["axisLabel","showMaxLabel"]);r=r||[],e=e||[];var s=r[0],u=r[1],c=r[r.length-1],v=r[r.length-2],d=e[0],m=e[1],x=e[e.length-1],T=e[e.length-2];n===!1?(ua(s),ua(d)):mo(s,u)&&(n?(ua(u),ua(m)):(ua(s),ua(d))),o===!1?(ua(c),ua(x)):mo(v,c)&&(o?(ua(v),ua(T)):(ua(c),ua(x)))}}function ua(a){a&&(a.ignore=!0)}function mo(a,r){var e=a&&a.getBoundingRect().clone(),n=r&&r.getBoundingRect().clone();if(!(!e||!n)){var o=xn.d([]);return xn.g(o,o,-a.rotation),e.applyTransform(xn.f([],o,a.getLocalTransform())),n.applyTransform(xn.f([],o,r.getLocalTransform())),e.intersect(n)}}function Ou(a){return a==="middle"||a==="center"}function Dl(a,r,e,n,o){for(var s=[],u=[],c=[],v=0;v<a.length;v++){var d=a[v].coord;u[0]=d,u[1]=0,c[0]=d,c[1]=e,r&&(Object(Rr.b)(u,u,r),Object(Rr.b)(c,c,r));var m=new Ui.a({subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:n,z2:2,autoBatch:!0,silent:!0});m.anid=o+"_"+a[v].tickValue,s.push(m)}return s}function ip(a,r,e,n){var o=e.axis,s=e.getModel("axisTick"),u=s.get("show");if(u==="auto"&&n.handleAutoShown&&(u=n.handleAutoShown("axisTick")),!(!u||o.scale.isBlank())){for(var c=s.getModel("lineStyle"),v=n.tickDirection*s.get("length"),d=o.getTicksCoords(),m=Dl(d,r.transform,v,Object(g.i)(c.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),x=0;x<m.length;x++)a.add(m[x]);return m}}function ap(a,r,e,n){var o=e.axis,s=e.getModel("minorTick");if(!(!s.get("show")||o.scale.isBlank())){var u=o.getMinorTicksCoords();if(!!u.length)for(var c=s.getModel("lineStyle"),v=n*s.get("length"),d=Object(g.i)(c.getLineStyle(),Object(g.i)(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),m=0;m<u.length;m++)for(var x=Dl(u[m],r.transform,v,d,"minorticks_"+m),T=0;T<x.length;T++)a.add(x[T])}}function op(a,r,e,n){var o=e.axis,s=Object(g.O)(n.axisLabelShow,e.get(["axisLabel","show"]));if(!(!s||o.scale.isBlank())){var u=e.getModel("axisLabel"),c=u.get("margin"),v=o.getViewLabels(),d=(Object(g.O)(n.labelRotate,u.get("rotate"))||0)*Ja/180,m=Ko.innerTextLayout(n.rotation,d,n.labelDirection),x=e.getCategories&&e.getCategories(!0),T=[],D=Ko.isLabelSilent(e),w=e.get("triggerEvent");return Object(g.k)(v,function(R,Q){var rt=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(R.tickValue):R.tickValue,pt=R.formattedLabel,mt=R.rawLabel,Dt=u;if(x&&x[rt]){var Lt=x[rt];Object(g.A)(Lt)&&Lt.textStyle&&(Dt=new fi.a(Lt.textStyle,u,e.ecModel))}var wt=Dt.getTextColor()||e.get(["axisLine","lineStyle","color"]),Nt=o.dataToCoord(rt),Gt=new he.a({x:Nt,y:n.labelOffset+n.labelDirection*c,rotation:m.rotation,silent:D,z2:10+(R.level||0),style:Object(xr.c)(Dt,{text:pt,align:Dt.getShallow("align",!0)||m.textAlign,verticalAlign:Dt.getShallow("verticalAlign",!0)||Dt.getShallow("baseline",!0)||m.textVerticalAlign,fill:Object(g.w)(wt)?wt(o.type==="category"?mt:o.type==="value"?rt+"":rt,Q):wt})});if(Gt.anid="label_"+rt,w){var Kt=Ko.makeAxisEventDataBase(e);Kt.targetType="axisLabel",Kt.value=mt,Object(br.a)(Gt).eventData=Kt}r.add(Gt),Gt.updateTransform(),T.push(Gt),a.add(Gt),Gt.decomposeTransform()}),T}}var $a=Ko;function sp(a,r){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return hh(e,a,r),e.seriesInvolved&&s0(e,a),e}function hh(a,r,e){var n=r.getComponent("tooltip"),o=r.getComponent("axisPointer"),s=o.get("link",!0)||[],u=[];Object(g.k)(e.getCoordinateSystems(),function(c){if(!c.axisPointerEnabled)return;var v=El(c.model),d=a.coordSysAxesInfo[v]={};a.coordSysMap[v]=c;var m=c.model,x=m.getModel("tooltip",n);if(Object(g.k)(c.getAxes(),Object(g.h)(R,!1,null)),c.getTooltipAxes&&n&&x.get("show")){var T=x.get("trigger")==="axis",D=x.get(["axisPointer","type"])==="cross",w=c.getTooltipAxes(x.get(["axisPointer","axis"]));(T||D)&&Object(g.k)(w.baseAxes,Object(g.h)(R,D?"cross":!0,T)),D&&Object(g.k)(w.otherAxes,Object(g.h)(R,"cross",!1))}function R(Q,rt,pt){var mt=pt.model.getModel("axisPointer",o),Dt=mt.get("show");if(!(!Dt||Dt==="auto"&&!Q&&!Zr(mt))){rt==null&&(rt=mt.get("triggerTooltip")),mt=Q?Qo(pt,x,o,r,Q,rt):mt;var Lt=mt.get("snap"),wt=El(pt.model),Nt=rt||Lt||pt.type==="category",Gt=a.axesInfo[wt]={key:wt,axis:pt,coordSys:c,axisPointerModel:mt,triggerTooltip:rt,involveSeries:Nt,snap:Lt,useHandle:Zr(mt),seriesModels:[],linkGroup:null};d[wt]=Gt,a.seriesInvolved=a.seriesInvolved||Nt;var Kt=lp(s,pt);if(Kt!=null){var te=u[Kt]||(u[Kt]={axesInfo:{}});te.axesInfo[wt]=Gt,te.mapper=s[Kt].mapper,Gt.linkGroup=te}}}})}function Qo(a,r,e,n,o,s){var u=r.getModel("axisPointer"),c=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],v={};Object(g.k)(c,function(T){v[T]=Object(g.d)(u.get(T))}),v.snap=a.type!=="category"&&!!s,u.get("type")==="cross"&&(v.type="line");var d=v.label||(v.label={});if(d.show==null&&(d.show=!1),o==="cross"){var m=u.get(["label","show"]);if(d.show=m!=null?m:!0,!s){var x=v.lineStyle=u.get("crossStyle");x&&Object(g.i)(d,x.textStyle)}}return a.model.getModel("axisPointer",new fi.a(v,e,n))}function s0(a,r){r.eachSeries(function(e){var n=e.coordinateSystem,o=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!n||o==="none"||o===!1||o==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||Object(g.k)(a.coordSysAxesInfo[El(n.model)],function(u){var c=u.axis;n.getAxis(c.dim)===c&&(u.seriesModels.push(e),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=e.getData().count())})})}function lp(a,r){for(var e=r.model,n=r.dim,o=0;o<a.length;o++){var s=a[o]||{};if(Tf(s[n+"AxisId"],e.id)||Tf(s[n+"AxisIndex"],e.componentIndex)||Tf(s[n+"AxisName"],e.name))return o}}function Tf(a,r){return a==="all"||Object(g.t)(a)&&Object(g.r)(a,r)>=0||a===r}function up(a){var r=Of(a);if(!!r){var e=r.axisPointerModel,n=r.axis.scale,o=e.option,s=e.get("status"),u=e.get("value");u!=null&&(u=n.parse(u));var c=Zr(e);s==null&&(o.status=c?"show":"hide");var v=n.getExtent().slice();v[0]>v[1]&&v.reverse(),(u==null||u>v[1])&&(u=v[1]),u<v[0]&&(u=v[0]),o.value=u,c&&(o.status=r.axis.scale.isBlank()?"hide":"show")}}function Of(a){var r=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[El(a)]}function fp(a){var r=Of(a);return r&&r.axisPointerModel}function Zr(a){return!!a.get(["handle","show"])}function El(a){return a.type+"||"+a.id}var vh={},cp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.axisPointerClass&&up(e),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,o,!0)},r.prototype.updateAxisPointer=function(e,n,o,s){this._doUpdateAxisPointerClass(e,o,!1)},r.prototype.remove=function(e,n){var o=this._axisPointer;o&&o.remove(n)},r.prototype.dispose=function(e,n){this._disposeAxisPointer(n),a.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(e,n,o){var s=r.getAxisPointerClass(this.axisPointerClass);if(!!s){var u=fp(e);u?(this._axisPointer||(this._axisPointer=new s)).render(e,u,n,o):this._disposeAxisPointer(n)}},r.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},r.registerAxisPointerClass=function(e,n){vh[e]=n},r.getAxisPointerClass=function(e){return e&&vh[e]},r.type="axis",r}(gn.a),Jo=cp,Af=Object(Be.o)();function dh(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitArea"),u=s.getModel("areaStyle"),c=u.get("color"),v=n.coordinateSystem.getRect(),d=o.getTicksCoords({tickModel:s,clamp:!0});if(!!d.length){var m=c.length,x=Af(a).splitAreaColors,T=g.f(),D=0;if(x)for(var w=0;w<d.length;w++){var R=x.get(d[w].tickValue);if(R!=null){D=(R+(m-1)*w)%m;break}}var Q=o.toGlobalCoord(d[0].coord),rt=u.getAreaStyle();c=g.t(c)?c:[c];for(var w=1;w<d.length;w++){var pt=o.toGlobalCoord(d[w].coord),mt=void 0,Dt=void 0,Lt=void 0,wt=void 0;o.isHorizontal()?(mt=Q,Dt=v.y,Lt=pt-mt,wt=v.height,Q=mt+Lt):(mt=v.x,Dt=Q,Lt=v.width,wt=pt-Dt,Q=Dt+wt);var Nt=d[w-1].tickValue;Nt!=null&&T.set(Nt,D),r.add(new Qr.a({anid:Nt!=null?"area_"+Nt:null,shape:{x:mt,y:Dt,width:Lt,height:wt},style:g.i({fill:c[D]},rt),autoBatch:!0,silent:!0})),D=(D+1)%m}Af(a).splitAreaColors=T}}}function ph(a){Af(a).splitAreaColors=null}var hp=["axisLine","axisTickLabel","axisName"],vp=["splitArea","splitLine","minorSplitLine"],Mf=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="CartesianAxisPointer",e}return r.prototype.render=function(e,n,o,s){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Pr.a,this.group.add(this._axisGroup),!!e.get("show")){var c=e.getCoordSysModel(),v=_f(c,e),d=new $a(e,g.m({handleAutoShown:function(x){for(var T=c.coordinateSystem.getCartesians(),D=0;D<T.length;D++)if(Object(js.e)(T[D].getOtherAxis(e.axis).scale))return!0;return!1}},v));g.k(hp,d.add,d),this._axisGroup.add(d.getGroup()),g.k(vp,function(x){e.get([x,"show"])&&on[x](this,this._axisGroup,e,c)},this);var m=s&&s.type==="changeAxisOrder"&&s.isInitSort;m||_r.groupTransition(u,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)}},r.prototype.remove=function(){ph(this)},r.type="cartesianAxis",r}(Jo),on={splitLine:function(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitLine"),u=s.getModel("lineStyle"),c=u.get("color");c=g.t(c)?c:[c];for(var v=n.coordinateSystem.getRect(),d=o.isHorizontal(),m=0,x=o.getTicksCoords({tickModel:s}),T=[],D=[],w=u.getLineStyle(),R=0;R<x.length;R++){var Q=o.toGlobalCoord(x[R].coord);d?(T[0]=Q,T[1]=v.y,D[0]=Q,D[1]=v.y+v.height):(T[0]=v.x,T[1]=Q,D[0]=v.x+v.width,D[1]=Q);var rt=m++%c.length,pt=x[R].tickValue;r.add(new Ui.a({anid:pt!=null?"line_"+x[R].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:T[0],y1:T[1],x2:D[0],y2:D[1]},style:g.i({stroke:c[rt]},w),silent:!0}))}}},minorSplitLine:function(a,r,e,n){var o=e.axis,s=e.getModel("minorSplitLine"),u=s.getModel("lineStyle"),c=n.coordinateSystem.getRect(),v=o.isHorizontal(),d=o.getMinorTicksCoords();if(!!d.length)for(var m=[],x=[],T=u.getLineStyle(),D=0;D<d.length;D++)for(var w=0;w<d[D].length;w++){var R=o.toGlobalCoord(d[D][w].coord);v?(m[0]=R,m[1]=c.y,x[0]=R,x[1]=c.y+c.height):(m[0]=c.x,m[1]=R,x[0]=c.x+c.width,x[1]=R),r.add(new Ui.a({anid:"minor_line_"+d[D][w].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:x[0],y2:x[1]},style:T,silent:!0}))}},splitArea:function(a,r,e,n){dh(a,r,e,n)}},zs=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="xAxis",r}(Mf),Au=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=zs.type,e}return r.type="yAxis",r}(Mf),l0=Mf,Pi=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="grid",e}return r.prototype.render=function(e,n){this.group.removeAll(),e.get("show")&&this.group.add(new Qr.a({shape:e.coordinateSystem.getRect(),style:Object(g.i)({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(gn.a),kn={offset:0};function wi(a){a.registerComponentView(Pi),a.registerComponentModel(Al),a.registerCoordinateSystem("cartesian2d",Fs),Ns(a,"x",_u,kn),Ns(a,"y",_u,kn),a.registerComponentView(zs),a.registerComponentView(Au),a.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function dp(a){Object(B.a)(wi),a.registerSeriesModel(en),a.registerChartView(Yo),a.registerLayout(Qn("scatter"))}function Ki(a){a.eachSeriesByType("radar",function(r){var e=r.getData(),n=[],o=r.coordinateSystem;if(!!o){var s=o.getIndicatorAxes();g.k(s,function(u,c){e.each(e.mapDimension(s[c].dim),function(v,d){n[d]=n[d]||[];var m=o.dataToPoint(v,c);n[d][c]=ii(m)?m:Hi(o)})}),e.each(function(u){var c=g.o(n[u],function(v){return ii(v)})||Hi(o);n[u].push(c.slice()),e.setItemLayout(u,n[u])})}})}function ii(a){return!isNaN(a[0])&&!isNaN(a[1])}function Hi(a){return[a.cx,a.cy]}function pp(a){var r=a.polar;if(r){g.t(r)||(r=[r]);var e=[];g.k(r,function(n,o){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),a.radar=a.radar||[],g.t(a.radar)||(a.radar=[a.radar]),a.radar.push(n)):e.push(n)}),a.polar=e}g.k(a.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var _n=b("WMlo"),gp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.coordinateSystem,u=this.group,c=e.getData(),v=this._data;function d(T,D){var w=T.getItemVisual(D,"symbol")||"circle";if(w!=="none"){var R=cn.c(T.getItemVisual(D,"symbolSize")),Q=cn.a(w,-1,-1,2,2),rt=T.getItemVisual(D,"symbolRotate")||0;return Q.attr({style:{strokeNoScale:!0},z2:100,scaleX:R[0]/2,scaleY:R[1]/2,rotation:rt*Math.PI/180||0}),Q}}function m(T,D,w,R,Q,rt){w.removeAll();for(var pt=0;pt<D.length-1;pt++){var mt=d(R,Q);mt&&(mt.__dimIdx=pt,T[pt]?(mt.setPosition(T[pt]),_r[rt?"initProps":"updateProps"](mt,{x:D[pt][0],y:D[pt][1]},e,Q)):mt.setPosition(D[pt]),w.add(mt))}}function x(T){return g.H(T,function(D){return[s.cx,s.cy]})}c.diff(v).add(function(T){var D=c.getItemLayout(T);if(!!D){var w=new _n.a,R=new Vi.a,Q={shape:{points:D}};w.shape.points=x(D),R.shape.points=x(D),cr.c(w,Q,e,T),cr.c(R,Q,e,T);var rt=new Pr.a,pt=new Pr.a;rt.add(R),rt.add(w),rt.add(pt),m(R.shape.points,D,pt,c,T,!0),c.setItemGraphicEl(T,rt)}}).update(function(T,D){var w=v.getItemGraphicEl(D),R=w.childAt(0),Q=w.childAt(1),rt=w.childAt(2),pt={shape:{points:c.getItemLayout(T)}};!pt.shape.points||(m(R.shape.points,pt.shape.points,rt,c,T,!1),Object(cr.g)(Q),Object(cr.g)(R),cr.h(R,pt,e),cr.h(Q,pt,e),c.setItemGraphicEl(T,w))}).remove(function(T){u.remove(v.getItemGraphicEl(T))}).execute(),c.eachItemGraphicEl(function(T,D){var w=c.getItemModel(D),R=T.childAt(0),Q=T.childAt(1),rt=T.childAt(2),pt=c.getItemVisual(D,"style"),mt=pt.fill;u.add(T),R.useStyle(g.i(w.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:mt})),Object(ar.I)(R,w,"lineStyle"),Object(ar.I)(Q,w,"areaStyle");var Dt=w.getModel("areaStyle"),Lt=Dt.isEmpty()&&Dt.parentModel.isEmpty();Q.ignore=Lt,g.k(["emphasis","select","blur"],function(Gt){var Kt=w.getModel([Gt,"areaStyle"]),te=Kt.isEmpty()&&Kt.parentModel.isEmpty();Q.ensureState(Gt).ignore=te&&Lt}),Q.useStyle(g.i(Dt.getAreaStyle(),{fill:mt,opacity:.7,decal:pt.decal}));var wt=w.getModel("emphasis"),Nt=wt.getModel("itemStyle").getItemStyle();rt.eachChild(function(Gt){if(Gt instanceof gt.a){var Kt=Gt.style;Gt.useStyle(g.m({image:Kt.image,x:Kt.x,y:Kt.y,width:Kt.width,height:Kt.height},pt))}else Gt.useStyle(pt),Gt.setColor(mt),Gt.style.strokeNoScale=!0;var te=Gt.ensureState("emphasis");te.style=g.d(Nt);var ne=c.getStore().get(c.getDimensionIndex(Gt.__dimIdx),D);(ne==null||isNaN(ne))&&(ne=""),Object(xr.g)(Gt,Object(xr.e)(w),{labelFetcher:c.hostModel,labelDataIndex:D,labelDimIndex:Gt.__dimIdx,defaultText:ne,inheritColor:mt,defaultOpacity:pt.opacity})}),Object(ar.J)(T,wt.get("focus"),wt.get("blurScope"),wt.get("disabled"))}),this._data=c},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(Ln.a),mp=gp,Xn=b("TxaN"),yp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ye(g.c(this.getData,this),g.c(this.getRawData,this))},r.prototype.getInitialData=function(e,n){return Te(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.coordinateSystem,c=u.getIndicatorAxes(),v=this.getData().getName(e),d=v===""?this.name:v,m=Object(Xn.e)(this,e);return Object(Xn.c)("section",{header:d,sortBlocks:!0,blocks:g.H(c,function(x){var T=s.get(s.mapDimension(x.dim),e);return Object(Xn.c)("nameValue",{markerType:"subItem",markerColor:m,name:x.name,value:T,sortParam:T})})})},r.prototype.getTooltipPosition=function(e){if(e!=null){for(var n=this.getData(),o=this.coordinateSystem,s=n.getValues(g.H(o.dimensions,function(d){return n.mapDimension(d)}),e),u=0,c=s.length;u<c;u++)if(!isNaN(s[u])){var v=o.getIndicatorAxes();return o.coordToPoint(v[u].dataToCoord(s[u]),u)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(Mn.b),gh=yp,Cl=oh.value;function Mu(a,r){return g.i({show:r},a)}var xp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),n=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),c=this.get("axisLabel"),v=this.get("axisName"),d=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),x=this.get("axisNameGap"),T=this.get("triggerEvent"),D=g.H(this.get("indicator")||[],function(w){w.max!=null&&w.max>0&&!w.min?w.min=0:w.min!=null&&w.min<0&&!w.max&&(w.max=0);var R=v;w.color!=null&&(R=g.i({color:w.color},v));var Q=g.I(g.d(w),{boundaryGap:e,splitNumber:n,scale:o,axisLine:s,axisTick:u,axisLabel:c,name:w.text,showName:d,nameLocation:"end",nameGap:x,nameTextStyle:R,triggerEvent:T},!1);if(d||(Q.name=""),g.C(m)){var rt=Q.name;Q.name=m.replace("{value}",rt!=null?rt:"")}else g.w(m)&&(Q.name=m(Q.name,Q));var pt=new fi.a(Q,null,this.ecModel);return g.K(pt,Rs.a.prototype),pt.mainType="radar",pt.componentIndex=this.componentIndex,pt},this);this._indicatorModels=D},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:g.I({lineStyle:{color:"#bbb"}},Cl.axisLine),axisLabel:Mu(Cl.axisLabel,!1),axisTick:Mu(Cl.axisTick,!1),splitLine:Mu(Cl.splitLine,!0),splitArea:Mu(Cl.splitArea,!0),indicator:[]},r}($n.a),_p=xp,$o=b("OGI8"),mh=b("yuVo"),bp=["axisLine","axisTickLabel","axisName"],yh=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},r.prototype._buildAxes=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes(),s=g.H(o,function(u){var c=u.model.get("showName")?u.name:"",v=new $a(u.model,{axisName:c,position:[n.cx,n.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return v});g.k(s,function(u){g.k(bp,u.add,u),this.group.add(u.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes();if(!o.length)return;var s=e.get("shape"),u=e.getModel("splitLine"),c=e.getModel("splitArea"),v=u.getModel("lineStyle"),d=c.getModel("areaStyle"),m=u.get("show"),x=c.get("show"),T=v.get("color"),D=d.get("color"),w=g.t(T)?T:[T],R=g.t(D)?D:[D],Q=[],rt=[];function pt(_e,Ne,Je){var Xe=Je%Ne.length;return _e[Xe]=_e[Xe]||[],Xe}if(s==="circle")for(var mt=o[0].getTicksCoords(),Dt=n.cx,Lt=n.cy,wt=0;wt<mt.length;wt++){if(m){var Nt=pt(Q,w,wt);Q[Nt].push(new $o.a({shape:{cx:Dt,cy:Lt,r:mt[wt].coord}}))}if(x&&wt<mt.length-1){var Nt=pt(rt,R,wt);rt[Nt].push(new mh.a({shape:{cx:Dt,cy:Lt,r0:mt[wt].coord,r:mt[wt+1].coord}}))}}else for(var Gt,Kt=g.H(o,function(_e,Ne){var Je=_e.getTicksCoords();return Gt=Gt==null?Je.length-1:Math.min(Je.length-1,Gt),g.H(Je,function(Xe){return n.coordToPoint(Xe.coord,Ne)})}),te=[],wt=0;wt<=Gt;wt++){for(var ne=[],pe=0;pe<o.length;pe++)ne.push(Kt[pe][wt]);if(ne[0]&&ne.push(ne[0].slice()),m){var Nt=pt(Q,w,wt);Q[Nt].push(new Vi.a({shape:{points:ne}}))}if(x&&te){var Nt=pt(rt,R,wt-1);rt[Nt].push(new _n.a({shape:{points:ne.concat(te)}}))}te=ne.slice().reverse()}var me=v.getLineStyle(),xe=d.getAreaStyle();g.k(rt,function(_e,Ne){this.group.add(_r.mergePath(_e,{style:g.i({stroke:"none",fill:R[Ne%R.length]},xe),silent:!0}))},this),g.k(Q,function(_e,Ne){this.group.add(_r.mergePath(_e,{style:g.i({fill:"none",stroke:w[Ne%w.length]},me),silent:!0}))},this)},r.type="radar",r}(gn.a),Sp=yh,Tp=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this,e,n,o)||this;return s.type="value",s.angle=0,s.name="",s}return r}(ba.a),Op=Tp,Gr=function(){function a(r,e,n){this.dimensions=[],this._model=r,this._indicatorAxes=Object(g.H)(r.getIndicatorModels(),function(o,s){var u="indicator_"+s,c=new Op(u,new Su.a);return c.name=o.get("name"),c.model=o,o.axis=c,this.dimensions.push(u),c},this),this.resize(r,n)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(r,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(r),e)},a.prototype.coordToPoint=function(r,e){var n=this._indicatorAxes[e],o=n.angle,s=this.cx+r*Math.cos(o),u=this.cy-r*Math.sin(o);return[s,u]},a.prototype.pointToData=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var s=Math.atan2(-n,e),u=Infinity,c,v=-1,d=0;d<this._indicatorAxes.length;d++){var m=this._indicatorAxes[d],x=Math.abs(s-m.angle);x<u&&(c=m,v=d,u=x)}return[v,+(c&&c.coordToData(o))]},a.prototype.resize=function(r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight(),u=Math.min(o,s)/2;this.cx=Le.p(n[0],o),this.cy=Le.p(n[1],s),this.startAngle=r.get("startAngle")*Math.PI/180;var c=r.get("radius");(Object(g.C)(c)||Object(g.z)(c))&&(c=[0,c]),this.r0=Le.p(c[0],u),this.r=Le.p(c[1],u),Object(g.k)(this._indicatorAxes,function(v,d){v.setExtent(this.r0,this.r);var m=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),v.angle=m},this)},a.prototype.update=function(r,e){var n=this._indicatorAxes,o=this._model;Object(g.k)(n,function(c){c.scale.setExtent(Infinity,-Infinity)}),r.eachSeriesByType("radar",function(c,v){if(!(c.get("coordinateSystem")!=="radar"||r.getComponent("radar",c.get("radarIndex"))!==o)){var d=c.getData();Object(g.k)(n,function(m){m.scale.unionExtentFromData(d,d.mapDimension(m.dim))})}},this);var s=o.get("splitNumber"),u=new Su.a;u.setExtent(0,s),u.setInterval(1),Object(g.k)(n,function(c,v){go(c.scale,c.model,u)})},a.prototype.convertToPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.create=function(r,e){var n=[];return r.eachComponent("radar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=n[o.get("radarIndex")||0])}),n},a.dimensions=[],a}(),Du=Gr;function Ap(a){a.registerCoordinateSystem("radar",Du),a.registerComponentModel(_p),a.registerComponentView(Sp),a.registerVisual({seriesType:"radar",reset:function(r){var e=r.getData();e.each(function(n){e.setItemVisual(n,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function xh(a){Object(B.a)(Ap),a.registerChartView(mp),a.registerSeriesModel(gh),a.registerLayout(Ki),a.registerProcessor(Is("radar")),a.registerPreprocessor(pp)}var Df=b("HIFk"),ae=b("i5AE"),Vs=b("XZR5"),Sn="\0_ec_interaction_mutex";function _h(a,r,e){var n=Gs(a);n[r]=e}function Mp(a,r,e){var n=Gs(a),o=n[r];o===e&&(n[r]=null)}function Pl(a,r){return!!Gs(a)[r]}function Gs(a){return a[Sn]||(a[Sn]={})}Vs.e({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},g.L);var Eu=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this)||this;n._zr=e;var o=Object(g.c)(n._mousedownHandler,n),s=Object(g.c)(n._mousemoveHandler,n),u=Object(g.c)(n._mouseupHandler,n),c=Object(g.c)(n._mousewheelHandler,n),v=Object(g.c)(n._pinchHandler,n);return n.enable=function(d,m){this.disable(),this._opt=Object(g.i)(Object(g.d)(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),d==null&&(d=!0),(d===!0||d==="move"||d==="pan")&&(e.on("mousedown",o),e.on("mousemove",s),e.on("mouseup",u)),(d===!0||d==="scale"||d==="zoom")&&(e.on("mousewheel",c),e.on("pinch",v))},n.disable=function(){e.off("mousedown",o),e.off("mousemove",s),e.off("mouseup",u),e.off("mousewheel",c),e.off("pinch",v)},n}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!(ae.d(e)||e.target&&e.target.draggable)){var n=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!Cu("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Pl(this._zr,"globalPan"))){var n=e.offsetX,o=e.offsetY,s=this._x,u=this._y,c=n-s,v=o-u;this._x=n,this._y=o,this._opt.preventDefaultMouseMove&&ae.g(e.event),Cf(this,"pan","moveOnMouseMove",e,{dx:c,dy:v,oldX:s,oldY:u,newX:n,newY:o,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){ae.d(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var n=Cu("zoomOnMouseWheel",e,this._opt),o=Cu("moveOnMouseWheel",e,this._opt),s=e.wheelDelta,u=Math.abs(s),c=e.offsetX,v=e.offsetY;if(!(s===0||!n&&!o)){if(n){var d=u>3?1.4:u>1?1.2:1.1,m=s>0?d:1/d;Ef(this,"zoom","zoomOnMouseWheel",e,{scale:m,originX:c,originY:v,isAvailableBehavior:null})}if(o){var x=Math.abs(s),T=(s>0?1:-1)*(x>3?.4:x>1?.15:.05);Ef(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:T,originX:c,originY:v,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Pl(this._zr,"globalPan")){var n=e.pinchScale>1?1.1:1/1.1;Ef(this,"zoom",null,e,{scale:n,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(Df.a);function Ef(a,r,e,n,o){a.pointerChecker&&a.pointerChecker(n,o.originX,o.originY)&&(ae.g(n.event),Cf(a,r,e,n,o))}function Cf(a,r,e,n,o){o.isAvailableBehavior=Object(g.c)(Cu,null,e,n),a.trigger(r,o)}function Cu(a,r,e){var n=e[a];return!a||n&&(!Object(g.C)(n)||r.event[n+"Key"])}var qa=Eu;function Pf(a,r,e){var n=a.target;n.x+=r,n.y+=e,n.dirty()}function Us(a,r,e,n){var o=a.target,s=a.zoomLimit,u=a.zoom=a.zoom||1;if(u*=r,s){var c=s.min||0,v=s.max||Infinity;u=Math.max(Math.min(v,u),c)}var d=u/a.zoom;a.zoom=u,o.x-=(e-o.x)*(d-1),o.y-=(n-o.y)*(d-1),o.scaleX*=d,o.scaleY*=d,o.dirty()}var Dp={axisPointer:1,tooltip:1,brush:1};function Hs(a,r,e){var n=r.getComponentByElement(a.topTarget),o=n&&n.coordinateSystem;return n&&n!==e&&!Dp.hasOwnProperty(n.mainType)&&o&&o.model!==e}var u0=b("mjKY"),qo=b("UHcy"),Ws=b("CSOx");function ts(a){if(Object(g.C)(a)){var r=new DOMParser;a=r.parseFromString(a,"text/xml")}var e=a;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var ks,Pu={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},wl=Object(g.F)(Pu),yo={"alignment-baseline":"textBaseline","stop-color":"stopColor"},wf=Object(g.F)(yo),bh=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(r,e){e=e||{};var n=ts(r);this._defsUsePending=[];var o=new Pr.a;this._root=o;var s=[],u=n.getAttribute("viewBox")||"",c=parseFloat(n.getAttribute("width")||e.width),v=parseFloat(n.getAttribute("height")||e.height);isNaN(c)&&(c=null),isNaN(v)&&(v=null),Wi(n,o,null,!0,!1);for(var d=n.firstChild;d;)this._parseNode(d,o,s,null,!1,!1),d=d.nextSibling;wu(this._defs,this._defsUsePending),this._defsUsePending=[];var m,x;if(u){var T=Zs(u);T.length>=4&&(m={x:parseFloat(T[0]||0),y:parseFloat(T[1]||0),width:parseFloat(T[2]),height:parseFloat(T[3])})}if(m&&c!=null&&v!=null&&(x=Mh(m,{x:0,y:0,width:c,height:v}),!e.ignoreViewBox)){var D=o;o=new Pr.a,o.add(D),D.scaleX=D.scaleY=x.scale,D.x=x.x,D.y=x.y}return!e.ignoreRootClip&&c!=null&&v!=null&&o.setClipPath(new Qr.a({shape:{x:0,y:0,width:c,height:v}})),{root:o,width:c,height:v,viewBoxRect:m,viewBoxTransform:x,named:s}},a.prototype._parseNode=function(r,e,n,o,s,u){var c=r.nodeName.toLowerCase(),v,d=o;if(c==="defs"&&(s=!0),c==="text"&&(u=!0),c==="defs"||c==="switch")v=e;else{if(!s){var m=ks[c];if(m&&Object(g.q)(ks,c)){v=m.call(this,r,e);var x=r.getAttribute("name");if(x){var T={name:x,namedFrom:null,svgNodeTagLower:c,el:v};n.push(T),c==="g"&&(d=T)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:c,el:v});e.add(v)}}var D=Lf[c];if(D&&Object(g.q)(Lf,c)){var w=D.call(this,r),R=r.getAttribute("id");R&&(this._defs[R]=w)}}if(v&&v.isGroup)for(var Q=r.firstChild;Q;)Q.nodeType===1?this._parseNode(Q,v,n,d,s,u):Q.nodeType===3&&u&&this._parseText(Q,v),Q=Q.nextSibling},a.prototype._parseText=function(r,e){var n=new z.a({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),Sh(n,e);var o=n.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,n.scaleX*=s/9,n.scaleY*=s/9);var u=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=u;var c=n.getBoundingRect();return this._textX+=c.width,e.add(n),n},a.internalField=function(){ks={g:function(r,e){var n=new Pr.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n},rect:function(r,e){var n=new Qr.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(r,e){var n=new $o.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),n.silent=!0,n},line:function(r,e){var n=new Ui.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(r,e){var n=new u0.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(r,e){var n=r.getAttribute("points"),o;n&&(o=qn(n));var s=new _n.a({shape:{points:o||[]},silent:!0});return fa(e,s),Wi(r,s,this._defsUsePending,!1,!1),s},polyline:function(r,e){var n=r.getAttribute("points"),o;n&&(o=qn(n));var s=new Vi.a({shape:{points:o||[]},silent:!0});return fa(e,s),Wi(r,s,this._defsUsePending,!1,!1),s},image:function(r,e){var n=new gt.a;return fa(e,n),Wi(r,n,this._defsUsePending,!1,!1),n.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),n.silent=!0,n},text:function(r,e){var n=r.getAttribute("x")||"0",o=r.getAttribute("y")||"0",s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(u);var c=new Pr.a;return fa(e,c),Wi(r,c,this._defsUsePending,!1,!0),c},tspan:function(r,e){var n=r.getAttribute("x"),o=r.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),o!=null&&(this._textY=parseFloat(o));var s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0",c=new Pr.a;return fa(e,c),Wi(r,c,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(u),c},path:function(r,e){var n=r.getAttribute("d")||"",o=Object(qo.b)(n);return fa(e,o),Wi(r,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),a}(),Lf={lineargradient:function(a){var r=parseInt(a.getAttribute("x1")||"0",10),e=parseInt(a.getAttribute("y1")||"0",10),n=parseInt(a.getAttribute("x2")||"10",10),o=parseInt(a.getAttribute("y2")||"0",10),s=new co.a(r,e,n,o);return Ll(a,s),Xs(a,s),s},radialgradient:function(a){var r=parseInt(a.getAttribute("cx")||"0",10),e=parseInt(a.getAttribute("cy")||"0",10),n=parseInt(a.getAttribute("r")||"0",10),o=new Ws.a(r,e,n);return Ll(a,o),Xs(a,o),o}};function Ll(a,r){var e=a.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(r.global=!0)}function Xs(a,r){for(var e=a.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var n=e.getAttribute("offset"),o=void 0;n&&n.indexOf("%")>0?o=parseInt(n,10)/100:n?o=parseFloat(n):o=0;var s={};Ah(e,s,s);var u=s.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:o,color:u})}e=e.nextSibling}}function fa(a,r){a&&a.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),Object(g.i)(r.__inheritedStyle,a.__inheritedStyle))}function qn(a){for(var r=Zs(a),e=[],n=0;n<r.length;n+=2){var o=parseFloat(r[n]),s=parseFloat(r[n+1]);e.push([o,s])}return e}function Wi(a,r,e,n,o){var s=r,u=s.__inheritedStyle=s.__inheritedStyle||{},c={};a.nodeType===1&&(es(a,r),Ah(a,u,c),n||Nf(a,u,c)),s.style=s.style||{},u.fill!=null&&(s.style.fill=xo(s,"fill",u.fill,e)),u.stroke!=null&&(s.style.stroke=xo(s,"stroke",u.stroke,e)),Object(g.k)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(v){u[v]!=null&&(s.style[v]=parseFloat(u[v]))}),Object(g.k)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(v){u[v]!=null&&(s.style[v]=u[v])}),o&&(s.__selfStyle=c),u.lineDash&&(s.style.lineDash=Object(g.H)(Zs(u.lineDash),function(v){return parseFloat(v)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(s.invisible=!0),u.display==="none"&&(s.ignore=!0)}function Sh(a,r){var e=r.__selfStyle;if(e){var n=e.textBaseline,o=n;!n||n==="auto"||n==="baseline"?o="alphabetic":n==="before-edge"||n==="text-before-edge"?o="top":n==="after-edge"||n==="text-after-edge"?o="bottom":(n==="central"||n==="mathematical")&&(o="middle"),a.style.textBaseline=o}var s=r.__inheritedStyle;if(s){var u=s.textAlign,c=u;u&&(u==="middle"&&(c="center"),a.style.textAlign=c)}}var Th=/^url\(\s*#(.*?)\)/;function xo(a,r,e,n){var o=e&&e.match(Th);if(o){var s=Object(g.T)(o[1]);n.push([a,r,s]);return}return e==="none"&&(e=null),e}function wu(a,r){for(var e=0;e<r.length;e++){var n=r[e];n[0].style[n[1]]=a[n[2]]}}var Oh=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Zs(a){return a.match(Oh)||[]}var If=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,_o=Math.PI/180;function es(a,r){var e=a.getAttribute("transform");if(e){e=e.replace(/,/g," ");var n=[],o=null;e.replace(If,function(x,T,D){return n.push(T,D),""});for(var s=n.length-1;s>0;s-=2){var u=n[s],c=n[s-1],v=Zs(u);switch(o=o||xn.c(),c){case"translate":xn.i(o,o,[parseFloat(v[0]),parseFloat(v[1]||"0")]);break;case"scale":xn.h(o,o,[parseFloat(v[0]),parseFloat(v[1]||v[0])]);break;case"rotate":xn.g(o,o,-parseFloat(v[0])*_o);break;case"skewX":var d=Math.tan(parseFloat(v[0])*_o);xn.f(o,[1,0,d,1,0,0],o);break;case"skewY":var m=Math.tan(parseFloat(v[0])*_o);xn.f(o,[1,m,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(v[0]),o[1]=parseFloat(v[1]),o[2]=parseFloat(v[2]),o[3]=parseFloat(v[3]),o[4]=parseFloat(v[4]),o[5]=parseFloat(v[5]);break}}r.setLocalTransform(o)}}var Rf=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Ah(a,r,e){var n=a.getAttribute("style");if(!!n){Rf.lastIndex=0;for(var o;(o=Rf.exec(n))!=null;){var s=o[1],u=Object(g.q)(Pu,s)?Pu[s]:null;u&&(r[u]=o[2]);var c=Object(g.q)(yo,s)?yo[s]:null;c&&(e[c]=o[2])}}}function Nf(a,r,e){for(var n=0;n<wl.length;n++){var o=wl[n],s=a.getAttribute(o);s!=null&&(r[Pu[o]]=s)}for(var n=0;n<wf.length;n++){var o=wf[n],s=a.getAttribute(o);s!=null&&(e[yo[o]]=s)}}function Mh(a,r){var e=r.width/a.width,n=r.height/a.height,o=Math.min(e,n);return{scale:o,x:-(a.x+a.width/2)*o+(r.x+r.width/2),y:-(a.y+a.height/2)*o+(r.y+r.height/2)}}function Ep(a,r){var e=new bh;return e.parse(a,r)}var Il=b("t+3m"),Cp=Object(g.f)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Dh=function(){function a(r,e){this.type="geoSVG",this._usedGraphicMap=Object(g.f)(),this._freedGraphics=[],this._mapName=r,this._parsedXML=ts(e)}return a.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Pp(r.named),n=e.regions,o=e.regionsMap;this._regions=n,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(r){var e,n;try{e=r&&Ep(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,Object(g.b)(n!=null)}catch(Q){throw new Error(`Invalid svg format
`+Q.message)}var o=new Pr.a;o.add(n),o.isGeoSVGGraphicRoot=!0;var s=e.width,u=e.height,c=e.viewBoxRect,v=this._boundingRect;if(!v){var d=void 0,m=void 0,x=void 0,T=void 0;if(s!=null?(d=0,x=s):c&&(d=c.x,x=c.width),u!=null?(m=0,T=u):c&&(m=c.y,T=c.height),d==null||m==null){var D=n.getBoundingRect();d==null&&(d=D.x,x=D.width),m==null&&(m=D.y,T=D.height)}v=this._boundingRect=new Ar.a(d,m,x,T)}if(c){var w=Mh(c,v);n.scaleX=n.scaleY=w.scale,n.x=w.x,n.y=w.y}o.setClipPath(new Qr.a({shape:v.plain()}));var R=[];return Object(g.k)(e.named,function(Q){Cp.get(Q.svgNodeTagLower)!=null&&(R.push(Q),Eh(Q.el))}),{root:o,boundingRect:v,named:R}},a.prototype.useGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,n),n)},a.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);n&&(e.removeKey(r),this._freedGraphics.push(n))},a}();function Eh(a){a.silent=!1,a.isGroup&&a.traverse(function(r){r.silent=!1})}function Pp(a){var r=[],e=Object(g.f)();return Object(g.k)(a,function(n){if(n.namedFrom==null){var o=new Il.d(n.name,n.el);r.push(o),e.set(n.name,o)}}),{regions:r,regionsMap:e}}for(var wp=b("EMIz"),Rl=[126,25],bo="\u5357\u6D77\u8BF8\u5C9B",ta=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],to=0;to<ta.length;to++)for(var So=0;So<ta[to].length;So++)ta[to][So][0]/=10.5,ta[to][So][1]/=-10.5/.75,ta[to][So][0]+=Rl[0],ta[to][So][1]+=Rl[1];function Lp(a,r){if(a==="china"){for(var e=0;e<r.length;e++)if(r[e].name===bo)return;r.push(new Il.c(bo,g.H(ta,function(n){return{type:"polygon",exterior:n}}),Rl))}}var Lu=b("VDD2"),Ch=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function rs(a,r){a==="china"&&r.name==="\u53F0\u6E7E"&&r.geometries.push({type:"polygon",exterior:Ch[0]})}var Ip="name",Ph=function(){function a(r,e,n){this.type="geoJSON",this._parsedMap=Object(g.f)(),this._mapName=r,this._specialAreas=n,this._geoJSON=wh(e)}return a.prototype.load=function(r,e){e=e||Ip;var n=this._parsedMap.get(e);if(!n){var o=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:o,boundingRect:Iu(o)})}var s=Object(g.f)(),u=[];return Object(g.k)(n.regions,function(c){var v=c.name;r&&Object(g.q)(r,v)&&(c=c.cloneShallow(v=r[v])),u.push(c),s.set(v,c)}),{regions:u,boundingRect:n.boundingRect||new Ar.a(0,0,0,0),regionsMap:s}},a.prototype._parseToRegions=function(r){var e=this._mapName,n=this._geoJSON,o;try{o=n?Object(wp.a)(n,r):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return Lp(e,o),Object(g.k)(o,function(s){var u=s.name;Object(Lu.a)(e,s),rs(e,s);var c=this._specialAreas&&this._specialAreas[u];c&&s.transformTo(c.left,c.top,c.width,c.height)},this),o},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function Iu(a){for(var r,e=0;e<a.length;e++){var n=a[e].getBoundingRect();r=r||n.clone(),r.union(n)}return r}function wh(a){return Object(g.C)(a)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var To=Object(g.f)(),eo={registerMap:function(a,r,e){if(r.svg){var n=new Dh(a,r.svg);To.set(a,n)}else{var o=r.geoJson||r.geoJSON;o&&!r.features?e=r.specialAreas:o=r;var n=new Ph(a,o,e);To.set(a,n)}},getGeoResource:function(a){return To.get(a)},getMapForUser:function(a){var r=To.get(a);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(a,r,e){var n=To.get(a);if(!!n)return n.load(r,e)}},Ys=b("ZAG4"),Oo=b("v+az"),Ru=["rect","circle","line","ellipse","polygon","polyline","path"],jf=g.f(Ru),Lh=g.f(Ru.concat(["g"])),Rp=g.f(Ru.concat(["g"])),Ih=Object(Be.o)();function Nl(a){var r=a.getItemStyle(),e=a.get("areaColor");return e!=null&&(r.fill=e),r}function Rh(a){var r=a.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var Ao=function(){function a(r){var e=new Pr.a;this.uid=Object(yn.c)("ec_map_draw"),this._controller=new qa(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Pr.a),e.add(this._svgGroup=new Pr.a)}return a.prototype.draw=function(r,e,n,o,s){var u=r.mainType==="geo",c=r.getData&&r.getData();u&&e.eachComponent({mainType:"series",subType:"map"},function(rt){!c&&rt.getHostGeoModel()===r&&(c=rt.getData())});var v=r.coordinateSystem,d=this._regionsGroup,m=this.group,x=v.getTransformInfo(),T=x.raw,D=x.roam,w=!d.childAt(0)||s;w?(m.x=D.x,m.y=D.y,m.scaleX=D.scaleX,m.scaleY=D.scaleY,m.dirty()):cr.h(m,D,r);var R=c&&c.getVisual("visualMeta")&&c.getVisual("visualMeta").length>0,Q={api:n,geo:v,mapOrGeoModel:r,data:c,isVisualEncodedByVisualMap:R,isGeo:u,transformInfoRaw:T};v.resourceType==="geoJSON"?this._buildGeoJSON(Q):v.resourceType==="geoSVG"&&this._buildSVG(Q),this._updateController(r,e,n),this._updateMapSelectHandler(r,d,n,o)},a.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=g.f(),n=g.f(),o=this._regionsGroup,s=r.transformInfoRaw,u=r.mapOrGeoModel,c=r.data,v=r.geo.projection,d=v&&v.stream;function m(D,w){return w&&(D=w(D)),D&&[D[0]*s.scaleX+s.x,D[1]*s.scaleY+s.y]}function x(D){for(var w=[],R=!d&&v&&v.project,Q=0;Q<D.length;++Q){var rt=m(D[Q],R);rt&&w.push(rt)}return w}function T(D){return{shape:{points:x(D)}}}o.removeAll(),g.k(r.geo.regions,function(D){var w=D.name,R=e.get(w),Q=n.get(w)||{},rt=Q.dataIdx,pt=Q.regionModel;R||(R=e.set(w,new Pr.a),o.add(R),rt=c?c.indexOfName(w):null,pt=r.isGeo?u.getRegionModel(w):c?c.getItemModel(rt):null,n.set(w,{dataIdx:rt,regionModel:pt}));var mt=[],Dt=[];g.k(D.geometries,function(Nt){if(Nt.type==="polygon"){var Gt=[Nt.exterior].concat(Nt.interiors||[]);d&&(Gt=Ks(Gt,d)),g.k(Gt,function(te){mt.push(new _n.a(T(te)))})}else{var Kt=Nt.points;d&&(Kt=Ks(Kt,d,!0)),g.k(Kt,function(te){Dt.push(new Vi.a(T(te)))})}});var Lt=m(D.getCenter(),v&&v.project);function wt(Nt,Gt){if(!!Nt.length){var Kt=new ut.a({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Nt}});R.add(Kt),Nu(r,Kt,rt,pt),Bf(r,Kt,w,pt,u,rt,Lt),Gt&&(Rh(Kt),g.k(Kt.states,Rh))}}wt(mt),wt(Dt,!0)}),e.each(function(D,w){var R=n.get(w),Q=R.dataIdx,rt=R.regionModel;Sa(r,D,w,rt,u,Q),Nh(r,D,w,rt,u),jh(r,D,w,rt,u)},this)},a.prototype._buildSVG=function(r){var e=r.geo.map,n=r.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=g.f(),s=!1;g.k(this._svgGraphicRecord.named,function(u){var c=u.name,v=r.mapOrGeoModel,d=r.data,m=u.svgNodeTagLower,x=u.el,T=d?d.indexOfName(c):null,D=v.getRegionModel(c);if(jf.get(m)!=null&&x instanceof Oo.c&&Nu(r,x,T,D),x instanceof Oo.c&&(x.culling=!0),x.z2EmphasisLift=0,!u.namedFrom&&(Rp.get(m)!=null&&Bf(r,x,c,D,v,T,null),Sa(r,x,c,D,v,T),Nh(r,x,c,D,v),Lh.get(m)!=null)){var w=jh(r,x,c,D,v);w==="self"&&(s=!0);var R=o.get(c)||o.set(c,[]);R.push(x)}},this),this._enableBlurEntireSVG(s,r)},a.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=n.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){Object(ar.G)(s);var u=s.ensureState("blur").style||{};u.opacity==null&&o!=null&&(u.opacity=o),s.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(r,e){if(r==null)return[];var n=e.coordinateSystem;if(n.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(r);return s?[s]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},a.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},a.prototype._useSVG=function(r){var e=eo.getGeoResource(r);if(e&&e.type==="geoSVG"){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=r}},a.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var e=eo.getGeoResource(r);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(r,e,n){var o=r.coordinateSystem,s=this._controller,u=this._controllerHost;u.zoomLimit=r.get("scaleLimit"),u.zoom=o.getZoom(),s.enable(r.get("roam")||!1);var c=r.mainType;function v(){var d={type:"geoRoam",componentType:c};return d[c+"Id"]=r.id,d}s.off("pan").on("pan",function(d){this._mouseDownFlag=!1,Pf(u,d.dx,d.dy),n.dispatchAction(g.m(v(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,Us(u,d.scale,d.originX,d.originY),n.dispatchAction(g.m(v(),{zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),s.setPointerChecker(function(d,m,x){return o.containPoint([m,x])&&!Hs(d,n,r)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Ih(e).ignore)})},a.prototype._updateMapSelectHandler=function(r,e,n,o){var s=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){s._mouseDownFlag=!0}),e.on("click",function(u){!s._mouseDownFlag||(s._mouseDownFlag=!1)}))},a}();function Nu(a,r,e,n){var o=n.getModel("itemStyle"),s=n.getModel(["emphasis","itemStyle"]),u=n.getModel(["blur","itemStyle"]),c=n.getModel(["select","itemStyle"]),v=Nl(o),d=Nl(s),m=Nl(c),x=Nl(u),T=a.data;if(T){var D=T.getItemVisual(e,"style"),w=T.getItemVisual(e,"decal");a.isVisualEncodedByVisualMap&&D.fill&&(v.fill=D.fill),w&&(v.decal=Object(Ys.a)(w,a.api))}r.setStyle(v),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=d,r.ensureState("select").style=m,r.ensureState("blur").style=x,Object(ar.G)(r)}function Bf(a,r,e,n,o,s,u){var c=a.data,v=a.isGeo,d=c&&isNaN(c.get(c.mapDimension("value"),s)),m=c&&c.getItemLayout(s);if(v||d||m&&m.showLabel){var x=v?e:s,T=void 0;(!c||s>=0)&&(T=o);var D=u?{normal:{align:"center",verticalAlign:"middle"}}:null;Object(xr.g)(r,Object(xr.e)(n),{labelFetcher:T,labelDataIndex:x,defaultText:e},D);var w=r.getTextContent();if(w&&(Ih(w).ignore=w.ignore,r.textConfig&&u)){var R=r.getBoundingRect().clone();r.textConfig.layoutRect=R,r.textConfig.position=[(u[0]-R.x)/R.width*100+"%",(u[1]-R.y)/R.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function Sa(a,r,e,n,o,s){a.data?a.data.setItemGraphicEl(s,r):Object(br.a)(r).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:e,region:n&&n.option||{}}}function Nh(a,r,e,n,o){a.data||_r.setTooltipConfig({el:r,componentModel:o,itemName:e,itemTooltipOption:n.get("tooltip")})}function jh(a,r,e,n,o){r.highDownSilentOnTouch=!!o.get("selectedMode");var s=n.getModel("emphasis"),u=s.get("focus");return Object(ar.J)(r,u,s.get("blurScope"),s.get("disabled")),a.isGeo&&Object(ar.n)(r,o,e),u}function Ks(a,r,e){var n=[],o;function s(){o=[]}function u(){o.length&&(n.push(o),o=[])}var c=r({polygonStart:s,polygonEnd:u,lineStart:s,lineEnd:u,point:function(v,d){isFinite(v)&&isFinite(d)&&o.push([v,d])},sphere:function(){}});return!e&&c.polygonStart(),g.k(a,function(v){c.lineStart();for(var d=0;d<v.length;d++)c.point(v[d][0],v[d][1]);c.lineEnd()}),!e&&c.polygonEnd(),n}var Bh=Ao,Fh=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var u=this.group;if(u.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===e.id){var c=this._mapDraw;c&&u.add(c.group)}else if(e.needsDrawMap){var c=this._mapDraw||new Bh(o);u.add(c.group),c.draw(e,n,o,this,s),this._mapDraw=c}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(e,n,o)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,n,o){var s=e.originalData,u=this.group;s.each(s.mapDimension("value"),function(c,v){if(!isNaN(c)){var d=s.getItemLayout(v);if(!(!d||!d.point)){var m=d.point,x=d.offset,T=new $o.a({style:{fill:e.getData().getVisual("style").fill},shape:{cx:m[0]+x*9,cy:m[1],r:3},silent:!0,z2:8+(x?0:ar.j+1)});if(!x){var D=e.mainSeries.getData(),w=s.getName(v),R=D.indexOfName(w),Q=s.getItemModel(v),rt=Q.getModel("label"),pt=D.getItemGraphicEl(R);Object(xr.g)(T,Object(xr.e)(Q),{labelFetcher:{getFormattedLabel:function(mt,Dt){return e.getFormattedLabel(R,Dt)}},defaultText:w}),T.disableLabelAnimation=!0,rt.get("position")||T.setTextConfig({position:"bottom"}),pt.onHoverStateChange=function(mt){Object(ar.H)(T,mt)}}u.add(T)}}})},r.type="map",r}(Ln.a),Np=Fh,jp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(n){if(n!=null){var o=this.getData().getName(n),s=this.coordinateSystem,u=s.getRegion(o);return u&&s.dataToPoint(u.getCenter())}},e}return r.prototype.getInitialData=function(e){for(var n=Te(this,{coordDimensions:["value"],encodeDefaulter:g.h(ye.d,this)}),o=g.f(),s=[],u=0,c=n.count();u<c;u++){var v=n.getName(u);o.set(v,!0)}var d=eo.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return g.k(d.regions,function(m){var x=m.name;o.get(x)||s.push(x)}),n.appendValues([],s),n},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var n=this.getData();return n.get(n.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var n=this.getData();return n.getItemModel(n.indexOfName(e))},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData(),u=this.getRawValue(e),c=s.getName(e),v=this.seriesGroup,d=[],m=0;m<v.length;m++){var x=v[m].originalData.indexOfName(c),T=s.mapDimension("value");isNaN(v[m].originalData.get(T,x))||d.push(v[m].name)}return Object(Xn.c)("section",{header:d.join(", "),noHeader:!d.length,blocks:[Object(Xn.c)("nameValue",{name:c,value:u})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var n=e.icon||"roundRect",o=Object(cn.a)(n,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return o.setStyle(e.itemStyle),o.style.stroke="none",n.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(Mn.b),Bp=jp;function Fp(a,r){var e={};return g.k(a,function(n){n.each(n.mapDimension("value"),function(o,s){var u="ec-"+n.getName(s);e[u]=e[u]||[],isNaN(o)||e[u].push(o)})}),a[0].map(a[0].mapDimension("value"),function(n,o){for(var s="ec-"+a[0].getName(o),u=0,c=Infinity,v=-Infinity,d=e[s].length,m=0;m<d;m++)c=Math.min(c,e[s][m]),v=Math.max(v,e[s][m]),u+=e[s][m];var x;return r==="min"?x=c:r==="max"?x=v:r==="average"?x=u/d:x=u,d===0?NaN:x})}function zp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),o=n?"o"+n.id:"i"+e.getMapType();(r[o]=r[o]||[]).push(e)}),g.k(r,function(e,n){for(var o=Fp(g.H(e,function(u){return u.getData()}),e[0].get("mapValueCalculation")),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(var s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=s===0&&!e[s].getHostGeoModel(),e[s].setData(o.cloneShallow()),e[s].mainSeries=e[0]})}function Vp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getMapType();if(!(e.getHostGeoModel()||r[n])){var o={};g.k(e.seriesGroup,function(u){var c=u.coordinateSystem,v=u.originalData;u.get("showLegendSymbol")&&a.getComponent("legend")&&v.each(v.mapDimension("value"),function(d,m){var x=v.getName(m),T=c.getRegion(x);if(!(!T||isNaN(d))){var D=o[x]||0,w=c.dataToPoint(T.getCenter());o[x]=D+1,v.setItemLayout(m,{point:w,offset:D})}})});var s=e.getData();s.each(function(u){var c=s.getName(u),v=s.getItemLayout(u)||{};v.showLabel=!o[c],s.setItemLayout(u,v)}),r[n]=!0}})}var zh=Rr.b,Gp=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new dt.c,n._rawTransformable=new dt.c,n.name=e,n}return r.prototype.setBoundingRect=function(e,n,o,s){return this._rect=new Ar.a(e,n,o,s),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,n,o,s){this._transformTo(e,n,o,s),this._viewRect=new Ar.a(e,n,o,s)},r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),c=this._rawTransformable;c.transform=u.calculateTransform(new Ar.a(e,n,o,s));var v=c.parent;c.parent=null,c.decomposeTransform(),c.parent=v,this._updateTransform()},r.prototype.setCenter=function(e){!e||(this._center=e,this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var n=this.zoomLimit;n&&(n.max!=null&&(e=Math.min(n.max,e)),n.min!=null&&(e=Math.max(n.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),n=e.x+e.width/2,o=e.y+e.height/2;return[n,o]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,o=this.getDefaultCenter(),s=this.getCenter(),u=this.getZoom();s=Rr.b([],s,e),o=Rr.b([],o,e),n.originX=s[0],n.originY=s[1],n.x=o[0]-s[0],n.y=o[1]-s[1],n.scaleX=n.scaleY=u,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,n=this._rawTransformable;n.parent=e,e.updateTransform(),n.updateTransform(),xn.b(this.transform||(this.transform=[]),n.transform||xn.c()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],xn.e(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,n=this._roamTransformable,o=new dt.c;return o.transform=n.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,n,o){var s=n?this._rawTransform:this.transform;return o=o||[],s?zh(o,e,s):Rr.d(o,e)},r.prototype.pointToData=function(e){var n=this.invTransform;return n?zh([],e,n):[e[0],e[1]]},r.prototype.convertToPixel=function(e,n,o){var s=Vh(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=Vh(n);return s===this?s.pointToData(o):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(dt.c);function Vh(a){var r=a.seriesModel;return r?r.coordinateSystem:null}var Qs=Gp,Up={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Ff=["lng","lat"],Gh=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this,e)||this;s.dimensions=Ff,s.type="geo",s._nameCoordMap=g.f(),s.map=n;var u=o.projection,c=eo.load(n,o.nameMap,o.nameProperty),v=eo.getGeoResource(n),d=s.resourceType=v?v.type:null,m=s.regions=c.regions,x=Up[v.type];s._regionsMap=c.regionsMap,s.regions=c.regions,s.projection=u;var T;if(u)for(var D=0;D<m.length;D++){var w=m[D].getBoundingRect(u);T=T||w.clone(),T.union(w)}else T=c.boundingRect;return s.setBoundingRect(T.x,T.y,T.width,T.height),s.aspectScale=u?1:g.P(o.aspectScale,x.aspectScale),s._invertLongitute=u?!1:x.invertLongitute,s}return r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),c=this._invertLongitute;u=u.clone(),c&&(u.y=-u.y-u.height);var v=this._rawTransformable;v.transform=u.calculateTransform(new Ar.a(e,n,o,s));var d=v.parent;v.parent=null,v.decomposeTransform(),v.parent=d,c&&(v.scaleY=-v.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var n=this.regions,o=0;o<n.length;o++){var s=n[o];if(s.type==="geoJSON"&&s.contain(e))return n[o]}},r.prototype.addGeoCoord=function(e,n){this._nameCoordMap.set(e,n)},r.prototype.getGeoCoord=function(e){var n=this._regionsMap.get(e);return this._nameCoordMap.get(e)||n&&n.getCenter()},r.prototype.dataToPoint=function(e,n,o){if(g.C(e)&&(e=this.getGeoCoord(e)),e){var s=this.projection;return s&&(e=s.project(e)),e&&this.projectedToPoint(e)}},r.prototype.pointToData=function(e){var n=this.projection;return n&&(e=n.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return a.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,n,o){return a.prototype.dataToPoint.call(this,e,n,o)},r.prototype.convertToPixel=function(e,n,o){var s=zf(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=zf(n);return s===this?s.pointToData(o):null},r}(Qs);g.K(Gh,Qs);function zf(a){var r=a.geoModel,e=a.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Be.b).models[0]||{}).coordinateSystem:null}var Vf=Gh;function Gf(a,r){var e=a.get("boundingCoords");if(e!=null){var n=e[0],o=e[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var u=n[0],c=n[1],v=o[0],d=o[1];n=[Infinity,Infinity],o=[-Infinity,-Infinity];var m=function(wt,Nt,Gt,Kt){for(var te=Gt-wt,ne=Kt-Nt,pe=0;pe<=100;pe++){var me=pe/100,xe=s.project([wt+te*me,Nt+ne*me]);Rr.l(n,n,xe),Rr.k(o,o,xe)}};m(u,c,v,c),m(v,c,v,d),m(v,d,u,d),m(u,d,v,c)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}}var x=this.getBoundingRect(),T=a.get("layoutCenter"),D=a.get("layoutSize"),w=r.getWidth(),R=r.getHeight(),Q=x.width/x.height*this.aspectScale,rt=!1,pt,mt;T&&D&&(pt=[Le.p(T[0],w),Le.p(T[1],R)],mt=Le.p(D,Math.min(w,R)),!isNaN(pt[0])&&!isNaN(pt[1])&&!isNaN(mt)&&(rt=!0));var Dt;if(rt)Dt={},Q>1?(Dt.width=mt,Dt.height=mt/Q):(Dt.height=mt,Dt.width=mt*Q),Dt.y=pt[1]-Dt.height/2,Dt.x=pt[0]-Dt.width/2;else{var Lt=a.getBoxLayoutParams();Lt.aspect=Q,Dt=kr.g(Lt,{width:w,height:R})}this.setViewRect(Dt.x,Dt.y,Dt.width,Dt.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function Uh(a,r){g.k(r.get("geoCoord"),function(e,n){a.addGeoCoord(n,e)})}var Hh=function(){function a(){this.dimensions=Ff}return a.prototype.create=function(r,e){var n=[];function o(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}r.eachComponent("geo",function(u,c){var v=u.get("map"),d=new Vf(v+c,v,g.m({nameMap:u.get("nameMap")},o(u)));d.zoomLimit=u.get("scaleLimit"),n.push(d),u.coordinateSystem=d,d.model=u,d.resize=Gf,d.resize(u,e)}),r.eachSeries(function(u){var c=u.get("coordinateSystem");if(c==="geo"){var v=u.get("geoIndex")||0;u.coordinateSystem=n[v]}});var s={};return r.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var c=u.getMapType();s[c]=s[c]||[],s[c].push(u)}}),g.k(s,function(u,c){var v=g.H(u,function(m){return m.get("nameMap")}),d=new Vf(c,c,g.m({nameMap:g.J(v)},o(u[0])));d.zoomLimit=g.O.apply(null,g.H(u,function(m){return m.get("scaleLimit")})),n.push(d),d.resize=Gf,d.resize(u[0],e),g.k(u,function(m){m.coordinateSystem=d,Uh(d,m)})}),n},a.prototype.getFilledRegions=function(r,e,n,o){for(var s=(r||[]).slice(),u=g.f(),c=0;c<s.length;c++)u.set(s[c].name,s[c]);var v=eo.load(e,n,o);return g.k(v.regions,function(d){var m=d.name;!u.get(m)&&s.push({name:m})}),s},a}(),Hp=new Hh,Uf=Hp,Wh=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=eo.getGeoResource(e.map);if(s&&s.type==="geoJSON"){var u=e.itemStyle=e.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(e,o),Be.f(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,n=this.option;n.regions=Uf.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var o={};this._optionModelMap=g.N(n.regions||[],function(s,u){var c=u.name;return c&&(s.set(c,new fi.a(u,e,e.ecModel)),u.selected&&(o[c]=!0)),s},g.f()),n.selectedMap||(n.selectedMap=o)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new fi.a(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,n){var o=this.getRegionModel(e),s=n==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),u={name:e};if(g.w(s))return u.status=n,s(u);if(g.C(s))return s.replace("{a}",e!=null?e:"")},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var n=this.option,o=n.selectedMode;if(!!o){o!=="multiple"&&(n.selectedMap=null);var s=n.selectedMap||(n.selectedMap={});s[e]=!0}},r.prototype.unSelect=function(e){var n=this.option.selectedMap;n&&(n[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var n=this.option.selectedMap;return!!(n&&n[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}($n.a),Wp=Wh;function kh(a,r){return a.pointToProjected?a.pointToProjected(r):a.pointToData(r)}function Hf(a,r,e){var n=a.getZoom(),o=a.getCenter(),s=r.zoom,u=a.projectedToPoint?a.projectedToPoint(o):a.dataToPoint(o);if(r.dx!=null&&r.dy!=null&&(u[0]-=r.dx,u[1]-=r.dy,a.setCenter(kh(a,u))),s!=null){if(e){var c=e.min||0,v=e.max||Infinity;s=Math.max(Math.min(n*s,v),c)/n}a.scaleX*=s,a.scaleY*=s;var d=(r.originX-a.x)*(s-1),m=(r.originY-a.y)*(s-1);a.x-=d,a.y-=m,a.updateTransform(),a.setCenter(kh(a,u)),a.setZoom(s*n)}return{center:a.getCenter(),zoom:a.getZoom()}}var Xh=b("QFdq"),kp=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return r.prototype.init=function(e,n){this._api=n},r.prototype.render=function(e,n,o,s){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Bh(o));var u=this._mapDraw;u.draw(e,n,o,this,s),u.group.on("click",this._handleRegionClick,this),u.group.silent=e.get("silent"),this.group.add(u.group),this.updateSelectStatus(e,n,o)},r.prototype._handleRegionClick=function(e){var n;Object(Xh.a)(e.target,function(o){return(n=Object(br.a)(o).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},r.prototype.updateSelectStatus=function(e,n,o){var s=this;this._mapDraw.group.traverse(function(u){var c=Object(br.a)(u).eventData;if(c)return s._model.isSelected(c.name)?o.enterSelect(u):o.leaveSelect(u),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(gn.a),Xp=kp;function Wf(a,r,e){eo.registerMap(a,r,e)}function Zh(a){a.registerCoordinateSystem("geo",Uf),a.registerComponentModel(Wp),a.registerComponentView(Xp),a.registerImpl("registerMap",Wf),a.registerImpl("getMap",function(e){return eo.getMapForUser(e)});function r(e,n){n.update="geo:updateSelectStatus",a.registerAction(n,function(o,s){var u={},c=[];return s.eachComponent({mainType:"geo",query:o},function(v){v[e](o.name);var d=v.coordinateSystem;Object(g.k)(d.regions,function(x){u[x.name]=v.isSelected(x.name)||!1});var m=[];Object(g.k)(u,function(x,T){u[T]&&m.push(T)}),c.push({geoIndex:v.componentIndex,name:m})}),{selected:u,allSelected:c,name:o.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,n){var o=e.componentType||"series";n.eachComponent({mainType:o,query:e},function(s){var u=s.coordinateSystem;if(u.type==="geo"){var c=Hf(u,e,s.get("scaleLimit"));s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom),o==="series"&&Object(g.k)(s.seriesGroup,function(v){v.setCenter(c.center),v.setZoom(c.zoom)})}})})}function Zp(a){Object(B.a)(Zh),a.registerChartView(Np),a.registerSeriesModel(Bp),a.registerLayout(Vp),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,zp),Object(Na.a)("map",a.registerAction)}var Yh=b("dfBh");function Kh(a){var r=a;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[r],n,o;n=e.pop();)if(o=n.children,n.isExpand&&o.length)for(var s=o.length,u=s-1;u>=0;u--){var c=o[u];c.hierNode={defaultAncestor:null,ancestor:c,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},e.push(c)}}function Yp(a,r){var e=a.isExpand?a.children:[],n=a.parentNode.children,o=a.hierNode.i?n[a.hierNode.i-1]:null;if(e.length){Jh(a);var s=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;o?(a.hierNode.prelim=o.hierNode.prelim+r(a,o),a.hierNode.modifier=a.hierNode.prelim-s):a.hierNode.prelim=s}else o&&(a.hierNode.prelim=o.hierNode.prelim+r(a,o));a.parentNode.hierNode.defaultAncestor=$h(a,o,a.parentNode.hierNode.defaultAncestor||n[0],r)}function Kp(a){var r=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:r},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function Qh(a){return arguments.length?a:ro}function Fa(a,r){return a-=Math.PI/2,{x:r*Math.cos(a),y:r*Math.sin(a)}}function Qp(a,r){return kr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Jh(a){for(var r=a.children,e=r.length,n=0,o=0;--e>=0;){var s=r[e];s.hierNode.prelim+=n,s.hierNode.modifier+=n,o+=s.hierNode.change,n+=s.hierNode.shift+o}}function $h(a,r,e,n){if(r){for(var o=a,s=a,u=s.parentNode.children[0],c=r,v=o.hierNode.modifier,d=s.hierNode.modifier,m=u.hierNode.modifier,x=c.hierNode.modifier;c=kf(c),s=Ta(s),c&&s;){o=kf(o),u=Ta(u),o.hierNode.ancestor=a;var T=c.hierNode.prelim+x-s.hierNode.prelim-d+n(c,s);T>0&&($p(Jp(c,a,e),a,T),d+=T,v+=T),x+=c.hierNode.modifier,d+=s.hierNode.modifier,v+=o.hierNode.modifier,m+=u.hierNode.modifier}c&&!kf(o)&&(o.hierNode.thread=c,o.hierNode.modifier+=x-v),s&&!Ta(u)&&(u.hierNode.thread=s,u.hierNode.modifier+=d-m,e=a)}return e}function kf(a){var r=a.children;return r.length&&a.isExpand?r[r.length-1]:a.hierNode.thread}function Ta(a){var r=a.children;return r.length&&a.isExpand?r[0]:a.hierNode.thread}function Jp(a,r,e){return a.hierNode.ancestor.parentNode===r.parentNode?a.hierNode.ancestor:e}function $p(a,r,e){var n=e/(r.hierNode.i-a.hierNode.i);r.hierNode.change-=n,r.hierNode.shift+=e,r.hierNode.modifier+=e,r.hierNode.prelim+=e,a.hierNode.change+=n}function ro(a,r){return a.parentNode===r.parentNode?1:2}var ju=b("LFVZ"),qh=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),qp=function(a){Object(Pe.a)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new qh},r.prototype.buildPath=function(e,n){var o=n.childPoints,s=o.length,u=n.parentPoint,c=o[0],v=o[s-1];if(s===1){e.moveTo(u[0],u[1]),e.lineTo(c[0],c[1]);return}var d=n.orient,m=d==="TB"||d==="BT"?0:1,x=1-m,T=Object(Le.p)(n.forkPosition,1),D=[];D[m]=u[m],D[x]=u[x]+(v[x]-u[x])*T,e.moveTo(u[0],u[1]),e.lineTo(D[0],D[1]),e.moveTo(c[0],c[1]),D[m]=c[m],e.lineTo(D[0],D[1]),D[m]=v[m],e.lineTo(D[0],D[1]),e.lineTo(v[0],v[1]);for(var w=1;w<s-1;w++){var R=o[w];e.moveTo(R[0],R[1]),D[m]=R[m],e.lineTo(D[0],D[1])}},r}(ot.b),Xf=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._mainGroup=new Pr.a,e}return r.prototype.init=function(e,n){this._controller=new qa(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(e,n,o){var s=e.getData(),u=e.layoutInfo,c=this._mainGroup,v=e.get("layout");v==="radial"?(c.x=u.x+u.width/2,c.y=u.y+u.height/2):(c.x=u.x,c.y=u.y),this._updateViewCoordSys(e),this._updateController(e,n,o);var d=this._data;s.diff(d).add(function(m){tv(s,m)&&ns(s,m,null,c,e)}).update(function(m,x){var T=d.getItemGraphicEl(x);if(!tv(s,m)){T&&rv(d,x,T,c,e);return}ns(s,m,T,c,e)}).remove(function(m){var x=d.getItemGraphicEl(m);x&&rv(d,m,x,c,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(m,x){m.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:x})})}),this._data=s},r.prototype._updateViewCoordSys=function(e){var n=e.getData(),o=[];n.each(function(m){var x=n.getItemLayout(m);x&&!isNaN(x.x)&&!isNaN(x.y)&&o.push([+x.x,+x.y])});var s=[],u=[];ju.d(o,s,u);var c=this._min,v=this._max;u[0]-s[0]==0&&(s[0]=c?c[0]:s[0]-1,u[0]=v?v[0]:u[0]+1),u[1]-s[1]==0&&(s[1]=c?c[1]:s[1]-1,u[1]=v?v[1]:u[1]+1);var d=e.coordinateSystem=new Qs;d.zoomLimit=e.get("scaleLimit"),d.setBoundingRect(s[0],s[1],u[0]-s[0],u[1]-s[1]),d.setCenter(e.get("center")),d.setZoom(e.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=s,this._max=u},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,c=this._controllerHost,v=this.group;u.setPointerChecker(function(d,m,x){var T=v.getBoundingRect();return T.applyTransform(v.transform),T.contain(m,x)&&!Hs(d,o,e)}),u.enable(e.get("roam")),c.zoomLimit=e.get("scaleLimit"),c.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Pf(c,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){Us(c,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(e),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(e){var n=e.getData(),o=this._getNodeGlobalScale(e);n.eachItemGraphicEl(function(s,u){s.setSymbolScale(o)})},r.prototype._getNodeGlobalScale=function(e){var n=e.coordinateSystem;if(n.type!=="view")return 1;var o=this._nodeScaleRatio,s=n.scaleX||1,u=n.getZoom(),c=(u-1)*o+1;return c/s},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(Ln.a);function tv(a,r){var e=a.getItemLayout(r);return e&&!isNaN(e.x)&&!isNaN(e.y)}function ns(a,r,e,n,o){var s=!e,u=a.tree.getNodeByDataIndex(r),c=u.getModel(),v=u.getVisual("style").fill,d=u.isExpand===!1&&u.children.length!==0?v:"#fff",m=a.tree.root,x=u.parentNode===m?u:u.parentNode||u,T=a.getItemGraphicEl(x.dataIndex),D=x.getLayout(),w=T?{x:T.__oldX,y:T.__oldY,rawX:T.__radialOldRawX,rawY:T.__radialOldRawY}:D,R=u.getLayout();s?(e=new oa(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.x=w.x,e.y=w.y):e.updateData(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=R.rawX,e.__radialRawY=R.rawY,n.add(e),a.setItemGraphicEl(r,e),e.__oldX=e.x,e.__oldY=e.y,cr.h(e,{x:R.x,y:R.y},o);var Q=e.getSymbolPath();if(o.get("layout")==="radial"){var rt=m.children[0],pt=rt.getLayout(),mt=rt.children.length,Dt=void 0,Lt=void 0;if(R.x===pt.x&&u.isExpand===!0){var wt={x:(rt.children[0].getLayout().x+rt.children[mt-1].getLayout().x)/2,y:(rt.children[0].getLayout().y+rt.children[mt-1].getLayout().y)/2};Dt=Math.atan2(wt.y-pt.y,wt.x-pt.x),Dt<0&&(Dt=Math.PI*2+Dt),Lt=wt.x<pt.x,Lt&&(Dt=Dt-Math.PI)}else Dt=Math.atan2(R.y-pt.y,R.x-pt.x),Dt<0&&(Dt=Math.PI*2+Dt),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(Lt=R.x<pt.x,Lt&&(Dt=Dt-Math.PI)):(Lt=R.x>pt.x,Lt||(Dt=Dt-Math.PI));var Nt=Lt?"left":"right",Gt=c.getModel("label"),Kt=Gt.get("rotate"),te=Kt*(Math.PI/180),ne=Q.getTextContent();ne&&(Q.setTextConfig({position:Gt.get("position")||Nt,rotation:Kt==null?-Dt:te,origin:"center"}),ne.setStyle("verticalAlign","middle"))}var pe=c.get(["emphasis","focus"]),me=pe==="ancestor"?u.getAncestorsIndices():pe==="descendant"?u.getDescendantIndices():null;me&&(Object(br.a)(e).focus=me),tg(o,u,m,e,w,D,R,n),e.__edge&&(e.onHoverStateChange=function(xe){if(xe!=="blur"){var _e=u.parentNode&&a.getItemGraphicEl(u.parentNode.dataIndex);_e&&_e.hoverState===ar.d||Object(ar.H)(e.__edge,xe)}})}function tg(a,r,e,n,o,s,u,c){var v=r.getModel(),d=a.get("edgeShape"),m=a.get("layout"),x=a.getOrient(),T=a.get(["lineStyle","curveness"]),D=a.get("edgeForkPosition"),w=v.getModel("lineStyle").getLineStyle(),R=n.__edge;if(d==="curve")r.parentNode&&r.parentNode!==e&&(R||(R=n.__edge=new Yh.a({shape:Zf(m,x,T,o,o)})),cr.h(R,{shape:Zf(m,x,T,s,u)},a));else if(d==="polyline"&&m==="orthogonal"&&r!==e&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var Q=r.children,rt=[],pt=0;pt<Q.length;pt++){var mt=Q[pt].getLayout();rt.push([mt.x,mt.y])}R||(R=n.__edge=new qp({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:x,forkPosition:D}})),cr.h(R,{shape:{parentPoint:[u.x,u.y],childPoints:rt}},a)}R&&(R.useStyle(g.i({strokeNoScale:!0,fill:null},w)),Object(ar.I)(R,v,"lineStyle"),Object(ar.G)(R),c.add(R))}function Js(a,r,e,n,o){var s=r.tree.root,u=ev(s,a),c=u.source,v=u.sourceLayout,d=r.getItemGraphicEl(a.dataIndex);if(!!d){var m=r.getItemGraphicEl(c.dataIndex),x=m.__edge,T=d.__edge||(c.isExpand===!1||c.children.length===1?x:void 0),D=n.get("edgeShape"),w=n.get("layout"),R=n.get("orient"),Q=n.get(["lineStyle","curveness"]);T&&(D==="curve"?cr.e(T,{shape:Zf(w,R,Q,v,v),style:{opacity:0}},n,{cb:function(){e.remove(T)},removeOpt:o}):D==="polyline"&&n.get("layout")==="orthogonal"&&cr.e(T,{shape:{parentPoint:[v.x,v.y],childPoints:[[v.x,v.y]]},style:{opacity:0}},n,{cb:function(){e.remove(T)},removeOpt:o}))}}function ev(a,r){for(var e=r.parentNode===a?r:r.parentNode||r,n;n=e.getLayout(),n==null;)e=e.parentNode===a?e:e.parentNode||e;return{source:e,sourceLayout:n}}function rv(a,r,e,n,o){var s=a.tree.getNodeByDataIndex(r),u=a.tree.root,c=ev(u,s).sourceLayout,v={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};cr.e(e,{x:c.x+1,y:c.y+1},o,{cb:function(){n.remove(e),a.setItemGraphicEl(r,null)},removeOpt:v}),e.fadeOut(null,{fadeLabel:!0,animation:v}),s.children.forEach(function(d){Js(d,a,n,o,v)}),Js(s,a,n,o,v)}function Zf(a,r,e,n,o){var s,u,c,v,d,m,x,T;if(a==="radial"){d=n.rawX,x=n.rawY,m=o.rawX,T=o.rawY;var D=Fa(d,x),w=Fa(d,x+(T-x)*e),R=Fa(m,T+(x-T)*e),Q=Fa(m,T);return{x1:D.x||0,y1:D.y||0,x2:Q.x||0,y2:Q.y||0,cpx1:w.x||0,cpy1:w.y||0,cpx2:R.x||0,cpy2:R.y||0}}else d=n.x,x=n.y,m=o.x,T=o.y,(r==="LR"||r==="RL")&&(s=d+(m-d)*e,u=x,c=m+(d-m)*e,v=T),(r==="TB"||r==="BT")&&(s=d,u=x+(T-x)*e,c=m,v=T+(x-T)*e);return{x1:d,y1:x,x2:m,y2:T,cpx1:s,cpy1:u,cpx2:c,cpy2:v}}var eg=Xf,Yf=b("RUxA"),Kf=function(){function a(r,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=e}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(r,e,n){g.w(r)&&(n=e,e=r,r=null),r=r||{},g.C(r)&&(r={order:r});var o=r.order||"preorder",s=this[r.attr||"children"],u;o==="preorder"&&(u=e.call(n,this));for(var c=0;!u&&c<s.length;c++)s[c].eachNode(r,e,n);o==="postorder"&&e.call(n,this)},a.prototype.updateDepthAndHeight=function(r){var e=0;this.depth=r;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(r+1),o.height>e&&(e=o.height)}this.height=e+1},a.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].getNodeById(r);if(s)return s}},a.prototype.contains=function(r){if(r===this)return!0;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].contains(r);if(s)return s}},a.prototype.getAncestors=function(r){for(var e=[],n=r?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},a.prototype.getAncestorsIndices=function(){for(var r=[],e=this;e;)r.push(e.dataIndex),e=e.parentNode;return r.reverse(),r},a.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(e){r.push(e.dataIndex)}),r},a.prototype.getValue=function(r){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(r||"value"),this.dataIndex)},a.prototype.setLayout=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,e)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(r)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,e)},a.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,e=0;e<r.length;++e)if(r[e]===this)return e;return-1}return-1},a.prototype.isAncestorOf=function(r){for(var e=r.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},a.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},a}(),rn=function(){function a(r){this.type="tree",this._nodes=[],this.hostModel=r}return a.prototype.eachNode=function(r,e,n){this.root.eachNode(r,e,n)},a.prototype.getNodeByDataIndex=function(r){var e=this.data.getRawIndex(r);return this._nodes[e]},a.prototype.getNodeById=function(r){return this.root.getNodeById(r)},a.prototype.update=function(){for(var r=this.data,e=this._nodes,n=0,o=e.length;n<o;n++)e[n].dataIndex=-1;for(var n=0,o=r.count();n<o;n++)e[r.getRawIndex(n)].dataIndex=n},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(r,e,n){var o=new a(e),s=[],u=1;c(r);function c(m,x){var T=m.value;u=Math.max(u,g.t(T)?T.length:1),s.push(m);var D=new Kf(Object(Be.e)(m.name,""),o);x?rg(D,x):o.root=D,o._nodes.push(D);var w=m.children;if(w)for(var R=0;R<w.length;R++)c(w[R],D)}o.root.updateDepthAndHeight(0);var v=Object(lr.b)(s,{coordDimensions:["value"],dimensionsCount:u}).dimensions,d=new ue.a(v,e);return d.initData(s),n&&n(d),Object(Yf.a)({mainData:d,struct:o,structAttr:"tree"}),o.update(),o},a}();function rg(a,r){var e=r.children;a.parentNode!==r&&(e.push(a),a.parentNode=r)}var jl=rn;function Bl(a,r,e){if(a&&g.r(r,a.type)>=0){var n=e.getData().tree.root,o=a.targetNode;if(g.C(o)&&(o=n.getNodeById(o)),o&&n.contains(o))return{node:o};var s=a.targetNodeId;if(s!=null&&(o=n.getNodeById(s)))return{node:o}}}function Rn(a){for(var r=[];a;)a=a.parentNode,a&&r.push(a);return r.reverse()}function Bu(a,r){var e=Rn(a);return g.r(e,r)>=0}function Oa(a,r){for(var e=[];a;){var n=a.dataIndex;e.push({name:a.name,dataIndex:n,value:r.getRawValue(n)}),a=a.parentNode}return e.reverse(),e}var ng=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e){var n={name:e.name,children:e.data},o=e.leaves||{},s=new fi.a(o,this,this.ecModel),u=jl.createTree(n,this,c);function c(x){x.wrapMethod("getItemModel",function(T,D){var w=u.getNodeByDataIndex(D);return w&&w.children.length&&w.isExpand||(T.parentModel=s),T})}var v=0;u.eachNode("preorder",function(x){x.depth>v&&(v=x.depth)});var d=e.expandAndCollapse,m=d&&e.initialTreeDepth>=0?e.initialTreeDepth:v;return u.root.eachNode("preorder",function(x){var T=x.hostTree.data.getRawDataItem(x.dataIndex);x.isExpand=T&&T.collapsed!=null?!T.collapsed:x.depth<=m}),u.data},r.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData().tree,u=s.root.children[0],c=s.getNodeByDataIndex(e),v=c.getValue(),d=c.name;c&&c!==u;)d=c.parentNode.name+"."+d,c=c.parentNode;return Object(Xn.c)("nameValue",{name:d,value:v,noValue:isNaN(v)||v==null})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Oa(o,this),n},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(Mn.b),ig=ng;function ag(a,r,e){for(var n=[a],o=[],s;s=n.pop();)if(o.push(s),s.isExpand){var u=s.children;if(u.length)for(var c=0;c<u.length;c++)n.push(u[c])}for(;s=o.pop();)r(s,e)}function Fl(a,r){for(var e=[a],n;n=e.pop();)if(r(n),n.isExpand){var o=n.children;if(o.length)for(var s=o.length-1;s>=0;s--)e.push(o[s])}}function nv(a,r){a.eachSeriesByType("tree",function(e){og(e,r)})}function og(a,r){var e=Qp(a,r);a.layoutInfo=e;var n=a.get("layout"),o=0,s=0,u=null;n==="radial"?(o=2*Math.PI,s=Math.min(e.height,e.width)/2,u=Qh(function(mt,Dt){return(mt.parentNode===Dt.parentNode?1:2)/mt.depth})):(o=e.width,s=e.height,u=Qh());var c=a.getData().tree.root,v=c.children[0];if(v){Kh(c),ag(v,Yp,u),c.hierNode.modifier=-v.hierNode.prelim,Fl(v,Kp);var d=v,m=v,x=v;Fl(v,function(mt){var Dt=mt.getLayout().x;Dt<d.getLayout().x&&(d=mt),Dt>m.getLayout().x&&(m=mt),mt.depth>x.depth&&(x=mt)});var T=d===m?1:u(d,m)/2,D=T-d.getLayout().x,w=0,R=0,Q=0,rt=0;if(n==="radial")w=o/(m.getLayout().x+T+D),R=s/(x.depth-1||1),Fl(v,function(mt){Q=(mt.getLayout().x+D)*w,rt=(mt.depth-1)*R;var Dt=Fa(Q,rt);mt.setLayout({x:Dt.x,y:Dt.y,rawX:Q,rawY:rt},!0)});else{var pt=a.getOrient();pt==="RL"||pt==="LR"?(R=s/(m.getLayout().x+T+D),w=o/(x.depth-1||1),Fl(v,function(mt){rt=(mt.getLayout().x+D)*R,Q=pt==="LR"?(mt.depth-1)*w:o-(mt.depth-1)*w,mt.setLayout({x:Q,y:rt},!0)})):(pt==="TB"||pt==="BT")&&(w=o/(m.getLayout().x+T+D),R=s/(x.depth-1||1),Fl(v,function(mt){Q=(mt.getLayout().x+D)*w,rt=pt==="TB"?(mt.depth-1)*R:s-(mt.depth-1)*R,mt.setLayout({x:Q,y:rt},!0)}))}}}function iv(a){a.eachSeriesByType("tree",function(r){var e=r.getData(),n=e.tree;n.eachNode(function(o){var s=o.getModel(),u=s.getModel("itemStyle").getItemStyle(),c=e.ensureUniqueItemVisual(o.dataIndex,"style");Object(g.m)(c,u)})})}function sg(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"tree",query:r},function(n){var o=r.dataIndex,s=n.getData().tree,u=s.getNodeByDataIndex(o);u.isExpand=!u.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,e){e.eachComponent({mainType:"series",subType:"tree",query:r},function(n){var o=n.coordinateSystem,s=Hf(o,r);n.setCenter&&n.setCenter(s.center),n.setZoom&&n.setZoom(s.zoom)})})}function Qf(a){a.registerChartView(eg),a.registerSeriesModel(ig),a.registerLayout(nv),a.registerVisual(iv),sg(a)}var av=["treemapZoomToNode","treemapRender","treemapMove"];function ov(a){for(var r=0;r<av.length;r++)a.registerAction({type:av[r],update:"updateView"},g.L);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"treemap",query:e},o);function o(s,u){var c=["treemapZoomToNode","treemapRootToNode"],v=Bl(e,c,s);if(v){var d=s.getViewRoot();d&&(e.direction=Bu(d,v.node)?"rollUp":"drillDown"),s.resetViewRoot(v.node)}}})}var Jf=b("Gm52");function sv(a){var r=a.getData(),e=r.tree,n={};e.eachNode(function(o){for(var s=o;s&&s.depth>1;)s=s.parentNode;var u=Object(Jf.b)(a.ecModel,s.name||s.dataIndex+"",n);o.setVisual("decal",u)})}var lg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventUsingHoverLayer=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};lv(o);var s=e.levels||[],u=this.designatedVisualItemStyle={},c=new fi.a({itemStyle:u},this,n);s=e.levels=ug(s,n);var v=g.H(s||[],function(x){return new fi.a(x,c,n)},this),d=jl.createTree(o,this,m);function m(x){x.wrapMethod("getItemModel",function(T,D){var w=d.getNodeByDataIndex(D),R=w?v[w.depth]:null;return T.parentModel=R||c,T})}return d.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),c=s.getName(e);return Object(Xn.c)("nameValue",{name:c,value:u})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Oa(o,this),n.treePathInfo=n.treeAncestors,n},r.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},g.m(this.layoutInfo,e)},r.prototype.mapIdToIndex=function(e){var n=this._idIndexMap;n||(n=this._idIndexMap=g.f(),this._idIndexMapCount=0);var o=n.get(e);return o==null&&n.set(e,o=this._idIndexMapCount++),o},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){sv(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(Mn.b);function lv(a){var r=0;g.k(a.children,function(n){lv(n);var o=n.value;g.t(o)&&(o=o[0]),r+=o});var e=a.value;g.t(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.t(a.value)?a.value[0]=e:a.value=e}function ug(a,r){var e=Object(Be.r)(r.get("color")),n=Object(Be.r)(r.get(["aria","decal","decals"]));if(!!e){a=a||[];var o,s;g.k(a,function(c){var v=new fi.a(c),d=v.get("color"),m=v.get("decal");(v.get(["itemStyle","color"])||d&&d!=="none")&&(o=!0),(v.get(["itemStyle","decal"])||m&&m!=="none")&&(s=!0)});var u=a[0]||(a[0]={});return o||(u.color=e.slice()),!s&&n&&(u.decal=n.slice()),a}}var fg=lg,ea=b("FI5o"),uv=8,is=8,$f=5,cg=function(){function a(r){this.group=new Pr.a,r.add(this.group)}return a.prototype.render=function(r,e,n,o){var s=r.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!s.get("show")||!n)){var c=s.getModel("itemStyle"),v=c.getModel("textStyle"),d={pos:{left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,d,v),this._renderContent(r,d,c,v,o),kr.i(u,d.pos,d.box)}},a.prototype._prepare=function(r,e,n){for(var o=r;o;o=o.parentNode){var s=Object(Be.e)(o.getModel().get("name"),""),u=n.getTextRect(s),c=Math.max(u.width+uv*2,e.emptyItemWidth);e.totalWidth+=c+is,e.renderList.push({node:o,text:s,width:c})}},a.prototype._renderContent=function(r,e,n,o,s){for(var u=0,c=e.emptyItemWidth,v=r.get(["breadcrumb","height"]),d=kr.e(e.pos,e.box),m=e.totalWidth,x=e.renderList,T=x.length-1;T>=0;T--){var D=x[T],w=D.node,R=D.width,Q=D.text;m>d.width&&(m-=R-c,R=c,Q=null);var rt=new _n.a({shape:{points:fv(u,0,R,v,T===x.length-1,T===0)},style:Object(g.i)(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new he.a({style:{text:Q,fill:o.getTextColor(),font:o.getFont()}}),textConfig:{position:"inside"},z2:ar.j*1e4,onclick:Object(g.h)(s,w)});rt.disableLabelAnimation=!0,this.group.add(rt),cv(rt,r,w),u+=R+is}},a.prototype.remove=function(){this.group.removeAll()},a}();function fv(a,r,e,n,o,s){var u=[[o?a:a-$f,r],[a+e,r],[a+e,r+n],[o?a:a-$f,r+n]];return!s&&u.splice(2,0,[a+e+$f,r+n/2]),!o&&u.push([a,r+n/2]),u}function cv(a,r,e){Object(br.a)(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Oa(e,r)}}var zl=cg,Vl=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(r,e,n,o,s){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:e,duration:n,delay:o,easing:s}),!0)},a.prototype.finished=function(r){return this._finishedCallback=r,this},a.prototype.start=function(){for(var r=this,e=this._storage.length,n=function(){e--,e<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},o=0,s=this._storage.length;o<s;o++){var u=this._storage[o];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:n,aborted:n})}return this},a}();function hg(){return new Vl}var hv=b("o7EO"),qf=Pr.a,vv=Qr.a,dv=3,pv="label",gv="upperLabel",vg=ar.j*10,dg=ar.j*2,pg=ar.j*3,no=Object(hv.a)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mv=function(a){var r=no(a);return r.stroke=r.fill=r.lineWidth=null,r},as=Object(Be.o)(),gg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._state="ready",e._storage=pi(),e}return r.prototype.render=function(e,n,o,s){var u=n.findComponents({mainType:"series",subType:"treemap",query:s});if(!(Object(g.r)(u,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=n;var c=["treemapZoomToNode","treemapRootToNode"],v=Bl(s,c,e),d=s&&s.type,m=e.layoutInfo,x=!this._oldTree,T=this._storage,D=d==="treemapRootToNode"&&v&&T?{rootNodeGroup:T.nodeGroup[v.node.getRawIndex()],direction:s.direction}:null,w=this._giveContainerGroup(m),R=e.get("animation"),Q=this._doRender(w,e,D);R&&!x&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(w,Q,e,D):Q.renderFinally(),this._resetController(o),this._renderBreadcrumb(e,o,v)}},r.prototype._giveContainerGroup=function(e){var n=this._containerGroup;return n||(n=this._containerGroup=new qf,this._initEvents(n),this.group.add(n)),n.x=e.x,n.y=e.y,n},r.prototype._doRender=function(e,n,o){var s=n.getData().tree,u=this._oldTree,c=pi(),v=pi(),d=this._storage,m=[];function x(Q,rt,pt,mt){return os(n,v,d,o,c,m,Q,rt,pt,mt)}D(s.root?[s.root]:[],u&&u.root?[u.root]:[],e,s===u||!u,0);var T=w(d);return this._oldTree=s,this._storage=v,{lastsForAnimation:c,willDeleteEls:T,renderFinally:R};function D(Q,rt,pt,mt,Dt){mt?(rt=Q,Object(g.k)(Q,function(Nt,Gt){!Nt.isRemoved()&&wt(Gt,Gt)})):new ea.a(rt,Q,Lt,Lt).add(wt).update(wt).remove(Object(g.h)(wt,null)).execute();function Lt(Nt){return Nt.getId()}function wt(Nt,Gt){var Kt=Nt!=null?Q[Nt]:null,te=Gt!=null?rt[Gt]:null,ne=x(Kt,te,pt,Dt);ne&&D(Kt&&Kt.viewChildren||[],te&&te.viewChildren||[],ne,mt,Dt+1)}}function w(Q){var rt=pi();return Q&&Object(g.k)(Q,function(pt,mt){var Dt=rt[mt];Object(g.k)(pt,function(Lt){Lt&&(Dt.push(Lt),as(Lt).willDelete=!0)})}),rt}function R(){Object(g.k)(T,function(Q){Object(g.k)(Q,function(rt){rt.parent&&rt.parent.remove(rt)})}),Object(g.k)(m,function(Q){Q.invisible=!0,Q.dirty()})}},r.prototype._doAnimation=function(e,n,o,s){var u=o.get("animationDurationUpdate"),c=o.get("animationEasing"),v=(Object(g.w)(u)?0:u)||0,d=(Object(g.w)(c)?null:c)||"cubicOut",m=hg();Object(g.k)(n.willDeleteEls,function(x,T){Object(g.k)(x,function(D,w){if(!D.invisible){var R=D.parent,Q,rt=as(R);if(s&&s.direction==="drillDown")Q=R===s.rootNodeGroup?{shape:{x:0,y:0,width:rt.nodeWidth,height:rt.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var pt=0,mt=0;rt.willDelete||(pt=rt.nodeWidth/2,mt=rt.nodeHeight/2),Q=T==="nodeGroup"?{x:pt,y:mt,style:{opacity:0}}:{shape:{x:pt,y:mt,width:0,height:0},style:{opacity:0}}}Q&&m.add(D,Q,v,0,d)}})}),Object(g.k)(this._storage,function(x,T){Object(g.k)(x,function(D,w){var R=n.lastsForAnimation[T][w],Q={};!R||(D instanceof Pr.a?R.oldX!=null&&(Q.x=D.x,Q.y=D.y,D.x=R.oldX,D.y=R.oldY):(R.oldShape&&(Q.shape=Object(g.m)({},D.shape),D.setShape(R.oldShape)),R.fadein?(D.setStyle("opacity",0),Q.style={opacity:1}):D.style.opacity!==1&&(Q.style={opacity:1})),m.add(D,Q,v,0,d))})},this),this._state="animating",m.finished(Object(g.c)(function(){this._state="ready",n.renderFinally()},this)).start()},r.prototype._resetController=function(e){var n=this._controller;n||(n=this._controller=new qa(e.getZr()),n.enable(this.seriesModel.get("roam")),n.on("pan",Object(g.c)(this._onPan,this)),n.on("zoom",Object(g.c)(this._onZoom,this)));var o=new Ar.a(0,0,e.getWidth(),e.getHeight());n.setPointerChecker(function(s,u,c){return o.contain(u,c)})},r.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},r.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>dv||Math.abs(e.dy)>dv)){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},r.prototype._onZoom=function(e){var n=e.originX,o=e.originY;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var u=s.getLayout();if(!u)return;var c=new Ar.a(u.x,u.y,u.width,u.height),v=this.seriesModel.layoutInfo;n-=v.x,o-=v.y;var d=xn.c();xn.i(d,d,[-n,-o]),xn.h(d,d,[e.scale,e.scale]),xn.i(d,d,[n,o]),c.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},r.prototype._initEvents=function(e){var n=this;e.on("click",function(o){if(n._state==="ready"){var s=n.seriesModel.get("nodeClick",!0);if(!!s){var u=n.findTarget(o.offsetX,o.offsetY);if(!!u){var c=u.node;if(c.getLayout().isLeafRoot)n._rootToNode(u);else if(s==="zoomToNode")n._zoomToNode(u);else if(s==="link"){var v=c.hostTree.data.getItemModel(c.dataIndex),d=v.get("link",!0),m=v.get("target",!0)||"blank";d&&Object(Vn.l)(d,m)}}}}},this)},r.prototype._renderBreadcrumb=function(e,n,o){var s=this;o||(o=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new zl(this.group))).render(e,n,o.node,function(u){s._state!=="animating"&&(Bu(e.getViewRoot(),u)?s._rootToNode({node:u}):s._zoomToNode({node:u}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=pi(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype.findTarget=function(e,n){var o,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(u){var c=this._storage.background[u.getRawIndex()];if(c){var v=c.transformCoordToLocal(e,n),d=c.shape;if(d.x<=v[0]&&v[0]<=d.x+d.width&&d.y<=v[1]&&v[1]<=d.y+d.height)o={node:u,offsetX:v[0],offsetY:v[1]};else return!1}},this),o},r.type="treemap",r}(Ln.a);function pi(){return{nodeGroup:[],background:[],content:[]}}function os(a,r,e,n,o,s,u,c,v,d){if(!u)return;var m=u.getLayout(),x=a.getData(),T=u.getModel();if(x.setItemGraphicEl(u.dataIndex,null),!m||!m.isInView)return;var D=m.width,w=m.height,R=m.borderWidth,Q=m.invisible,rt=u.getRawIndex(),pt=c&&c.getRawIndex(),mt=u.viewChildren,Dt=m.upperHeight,Lt=mt&&mt.length,wt=T.getModel("itemStyle"),Nt=T.getModel(["emphasis","itemStyle"]),Gt=T.getModel(["blur","itemStyle"]),Kt=T.getModel(["select","itemStyle"]),te=wt.get("borderRadius")||0,ne=fn("nodeGroup",qf);if(!ne)return;if(v.add(ne),ne.x=m.x||0,ne.y=m.y||0,ne.markRedraw(),as(ne).nodeWidth=D,as(ne).nodeHeight=w,m.isAboveViewRoot)return ne;var pe=fn("background",vv,d,dg);pe&&or(ne,pe,Lt&&m.upperLabelHeight);var me=T.getModel("emphasis"),xe=me.get("focus"),_e=me.get("blurScope"),Ne=me.get("disabled"),Je=xe==="ancestor"?u.getAncestorsIndices():xe==="descendant"?u.getDescendantIndices():xe;if(Lt)Object(ar.y)(ne)&&Object(ar.F)(ne,!1),pe&&(Object(ar.F)(pe,!Ne),x.setItemGraphicEl(u.dataIndex,pe),Object(ar.p)(pe,Je,_e));else{var Xe=fn("content",vv,d,pg);Xe&&Tr(ne,Xe),pe.disableMorphing=!0,pe&&Object(ar.y)(pe)&&Object(ar.F)(pe,!1),Object(ar.F)(ne,!Ne),x.setItemGraphicEl(u.dataIndex,ne),Object(ar.p)(ne,Je,_e)}return ne;function or(sn,Vr,bn){var mn=Object(br.a)(Vr);if(mn.dataIndex=u.dataIndex,mn.seriesIndex=a.seriesIndex,Vr.setShape({x:0,y:0,width:D,height:w,r:te}),Q)Mr(Vr);else{Vr.invisible=!1;var On=u.getVisual("style"),Ei=On.stroke,Ri=mv(wt);Ri.fill=Ei;var ti=no(Nt);ti.fill=Nt.get("borderColor");var bi=no(Gt);bi.fill=Gt.get("borderColor");var _i=no(Kt);if(_i.fill=Kt.get("borderColor"),bn){var Ji=D-2*R;Ur(Vr,Ei,On.opacity,{x:R,y:0,width:Ji,height:Dt})}else Vr.removeTextContent();Vr.setStyle(Ri),Vr.ensureState("emphasis").style=ti,Vr.ensureState("blur").style=bi,Vr.ensureState("select").style=_i,Object(ar.G)(Vr)}sn.add(Vr)}function Tr(sn,Vr){var bn=Object(br.a)(Vr);bn.dataIndex=u.dataIndex,bn.seriesIndex=a.seriesIndex;var mn=Math.max(D-2*R,0),On=Math.max(w-2*R,0);if(Vr.culling=!0,Vr.setShape({x:R,y:R,width:mn,height:On,r:te}),Q)Mr(Vr);else{Vr.invisible=!1;var Ei=u.getVisual("style"),Ri=Ei.fill,ti=mv(wt);ti.fill=Ri,ti.decal=Ei.decal;var bi=no(Nt),_i=no(Gt),Ji=no(Kt);Ur(Vr,Ri,Ei.opacity,null),Vr.setStyle(ti),Vr.ensureState("emphasis").style=bi,Vr.ensureState("blur").style=_i,Vr.ensureState("select").style=Ji,Object(ar.G)(Vr)}sn.add(Vr)}function Mr(sn){!sn.invisible&&s.push(sn)}function Ur(sn,Vr,bn,mn){var On=T.getModel(mn?gv:pv),Ei=Object(Be.e)(T.get("name"),null),Ri=On.getShallow("show");Object(xr.g)(sn,Object(xr.e)(T,mn?gv:pv),{defaultText:Ri?Ei:null,inheritColor:Vr,defaultOpacity:bn,labelFetcher:a,labelDataIndex:u.dataIndex});var ti=sn.getTextContent();if(!!ti){var bi=ti.style,_i=Object(g.M)(bi.padding||0);mn&&(sn.setTextConfig({layoutRect:mn}),ti.disableLabelLayout=!0),ti.beforeUpdate=function(){var _s=Math.max((mn?mn.width:sn.shape.width)-_i[1]-_i[3],0),ha=Math.max((mn?mn.height:sn.shape.height)-_i[0]-_i[2],0);(bi.width!==_s||bi.height!==ha)&&ti.setStyle({width:_s,height:ha})},bi.truncateMinChar=2,bi.lineOverflow="truncate",Yr(bi,mn,m);var Ji=ti.getState("emphasis");Yr(Ji?Ji.style:null,mn,m)}}function Yr(sn,Vr,bn){var mn=sn?sn.text:null;if(!Vr&&bn.isLeafRoot&&mn!=null){var On=a.get("drillDownIcon",!0);sn.text=On?On+" "+mn:mn}}function fn(sn,Vr,bn,mn){var On=pt!=null&&e[sn][pt],Ei=o[sn];return On?(e[sn][pt]=null,Yn(Ei,On)):Q||(On=new Vr,On instanceof Oo.c&&(On.z2=yv(bn,mn)),Bn(Ei,On)),r[sn][rt]=On}function Yn(sn,Vr){var bn=sn[rt]={};Vr instanceof qf?(bn.oldX=Vr.x,bn.oldY=Vr.y):bn.oldShape=Object(g.m)({},Vr.shape)}function Bn(sn,Vr){var bn=sn[rt]={},mn=u.parentNode,On=Vr instanceof Pr.a;if(mn&&(!n||n.direction==="drillDown")){var Ei=0,Ri=0,ti=o.background[mn.getRawIndex()];!n&&ti&&ti.oldShape&&(Ei=ti.oldShape.width,Ri=ti.oldShape.height),On?(bn.oldX=0,bn.oldY=Ri):bn.oldShape={x:Ei,y:Ri,width:0,height:0}}bn.fadein=!On}}function yv(a,r){return a*vg+r}var mg=gg,io=g.k,yg=g.A,Gl=-1,Fu=function(){function a(r){var e=r.mappingMethod,n=r.type,o=this.option=g.d(r);this.type=n,this.mappingMethod=e,this._normalizeData=xv[e];var s=a.visualHandlers[n];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[e],e==="piecewise"?(Hl(o),Ul(o)):e==="category"?o.categories?tc(o):Hl(o,!0):(g.b(e!=="linear"||o.dataExtent),Hl(o))}return a.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},a.prototype.getNormalizer=function(){return g.c(this._normalizeData,this)},a.listVisualTypes=function(){return g.F(a.visualHandlers)},a.isValidType=function(r){return a.visualHandlers.hasOwnProperty(r)},a.eachVisual=function(r,e,n){g.A(r)?g.k(r,e,n):e.call(n,r)},a.mapVisual=function(r,e,n){var o,s=g.t(r)?[]:g.A(r)?{}:(o=!0,null);return a.eachVisual(r,function(u,c){var v=e.call(n,u,c);o?s=v:s[c]=v}),s},a.retrieveVisuals=function(r){var e={},n;return r&&io(a.visualHandlers,function(o,s){r.hasOwnProperty(s)&&(e[s]=r[s],n=!0)}),n?e:null},a.prepareVisualTypes=function(r){if(g.t(r))r=r.slice();else if(yg(r)){var e=[];io(r,function(n,o){e.push(o)}),r=e}else return[];return r.sort(function(n,o){return o==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),r},a.dependsOn=function(r,e){return e==="color"?!!(r&&r.indexOf(e)===0):r===e},a.findPieceIndex=function(r,e,n){for(var o,s=Infinity,u=0,c=e.length;u<c;u++){var v=e[u].value;if(v!=null){if(v===r||g.C(v)&&v===r+"")return u;n&&T(v,u)}}for(var u=0,c=e.length;u<c;u++){var d=e[u],m=d.interval,x=d.close;if(m){if(m[0]===-Infinity){if(qs(x[1],r,m[1]))return u}else if(m[1]===Infinity){if(qs(x[0],m[0],r))return u}else if(qs(x[0],m[0],r)&&qs(x[1],r,m[1]))return u;n&&T(m[0],u),n&&T(m[1],u)}}if(n)return r===Infinity?e.length-1:r===-Infinity?0:o;function T(D,w){var R=Math.abs(D-r);R<s&&(s=R,o=w)}},a.visualHandlers={color:{applyVisual:Mo("color"),getColorMapper:function(){var r=this.option;return g.c(r.mappingMethod==="category"?function(e,n){return!n&&(e=this._normalizeData(e)),ss.call(this,e)}:function(e,n,o){var s=!!o;return!n&&(e=this._normalizeData(e)),o=Ir.fastLerp(e,r.parsedVisual,o),s?o:Ir.stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(r){return Ir.stringify(Ir.fastLerp(r,this.option.parsedVisual),"rgba")},category:ss,piecewise:function(r,e){var n=zu.call(this,e);return n==null&&(n=Ir.stringify(Ir.fastLerp(r,this.option.parsedVisual),"rgba")),n},fixed:za}},colorHue:$s(function(r,e){return Ir.modifyHSL(r,e)}),colorSaturation:$s(function(r,e){return Ir.modifyHSL(r,null,e)}),colorLightness:$s(function(r,e){return Ir.modifyHSL(r,null,null,e)}),colorAlpha:$s(function(r,e){return Ir.modifyAlpha(r,e)}),decal:{applyVisual:Mo("decal"),_normalizedToVisual:{linear:null,category:ss,piecewise:null,fixed:null}},opacity:{applyVisual:Mo("opacity"),_normalizedToVisual:Do([0,1])},liftZ:{applyVisual:Mo("liftZ"),_normalizedToVisual:{linear:za,category:za,piecewise:za,fixed:za}},symbol:{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("symbol",o)},_normalizedToVisual:{linear:ec,category:ss,piecewise:function(r,e){var n=zu.call(this,e);return n==null&&(n=ec.call(this,r)),n},fixed:za}},symbolSize:{applyVisual:Mo("symbolSize"),_normalizedToVisual:Do([0,1])}},a}();function Ul(a){var r=a.pieceList;a.hasSpecialVisual=!1,g.k(r,function(e,n){e.originIndex=n,e.visual!=null&&(a.hasSpecialVisual=!0)})}function tc(a){var r=a.categories,e=a.categoryMap={},n=a.visual;if(io(r,function(u,c){e[u]=c}),!g.t(n)){var o=[];g.A(n)?io(n,function(u,c){var v=e[c];o[v!=null?v:Gl]=u}):o[Gl]=n,n=rc(a,o)}for(var s=r.length-1;s>=0;s--)n[s]==null&&(delete e[r[s]],r.pop())}function Hl(a,r){var e=a.visual,n=[];g.A(e)?io(e,function(s){n.push(s)}):e!=null&&n.push(e);var o={color:1,symbol:1};!r&&n.length===1&&!o.hasOwnProperty(a.type)&&(n[1]=n[0]),rc(a,n)}function $s(a){return{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("color",a(e("color"),o))},_normalizedToVisual:Do([0,1])}}function ec(a){var r=this.option.visual;return r[Math.round(Object(Le.l)(a,[0,1],[0,r.length-1],!0))]||{}}function Mo(a){return function(r,e,n){n(a,this.mapValueToVisual(r))}}function ss(a){var r=this.option.visual;return r[this.option.loop&&a!==Gl?a%r.length:a]}function za(){return this.option.visual[0]}function Do(a){return{linear:function(r){return Object(Le.l)(r,a,this.option.visual,!0)},category:ss,piecewise:function(r,e){var n=zu.call(this,e);return n==null&&(n=Object(Le.l)(r,a,this.option.visual,!0)),n},fixed:za}}function zu(a){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var n=Fu.findPieceIndex(a,e),o=e[n];if(o&&o.visual)return o.visual[this.type]}}function rc(a,r){return a.visual=r,a.type==="color"&&(a.parsedVisual=g.H(r,function(e){return Ir.parse(e)})),r}var xv={linear:function(a){return Object(Le.l)(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var r=this.option.pieceList,e=Fu.findPieceIndex(a,r,!0);if(e!=null)return Object(Le.l)(e,[0,r.length-1],[0,1],!0)},category:function(a){var r=this.option.categories?this.option.categoryMap[a]:a;return r==null?Gl:r},fixed:g.L};function qs(a,r,e){return a?r<=e:r<e}var Ai=Fu,xg="itemStyle",ci=Object(Be.o)(),gi={seriesType:"treemap",reset:function(a){var r=a.getData().tree,e=r.root;e.isRemoved()||nc(e,{},a.getViewRoot().getAncestors(),a)}};function nc(a,r,e,n){var o=a.getModel(),s=a.getLayout(),u=a.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var c=o.getModel(xg),v=_v(c,r,n),d=u.ensureUniqueItemVisual(a.dataIndex,"style"),m=c.get("borderColor"),x=c.get("borderColorSaturation"),T;x!=null&&(T=Eo(v),m=ic(x,T)),d.stroke=m;var D=a.viewChildren;if(!D||!D.length)T=Eo(v),d.fill=T;else{var w=ac(a,o,s,c,v,D);Object(g.k)(D,function(R,Q){if(R.depth>=e.length||R===e[R.depth]){var rt=_g(o,v,R,Q,w,n);nc(R,rt,e,n)}})}}}function _v(a,r,e){var n=Object(g.m)({},r),o=e.designatedVisualItemStyle;return Object(g.k)(["color","colorAlpha","colorSaturation"],function(s){o[s]=r[s];var u=a.get(s);o[s]=null,u!=null&&(n[s]=u)}),n}function Eo(a){var r=Li(a,"color");if(r){var e=Li(a,"colorAlpha"),n=Li(a,"colorSaturation");return n&&(r=Object(Ir.modifyHSL)(r,null,null,n)),e&&(r=Object(Ir.modifyAlpha)(r,e)),r}}function ic(a,r){return r!=null?Object(Ir.modifyHSL)(r,null,null,a):null}function Li(a,r){var e=a[r];if(e!=null&&e!=="none")return e}function ac(a,r,e,n,o,s){if(!(!s||!s.length)){var u=tl(r,"color")||o.color!=null&&o.color!=="none"&&(tl(r,"colorAlpha")||tl(r,"colorSaturation"));if(!!u){var c=r.get("visualMin"),v=r.get("visualMax"),d=e.dataExtent.slice();c!=null&&c<d[0]&&(d[0]=c),v!=null&&v>d[1]&&(d[1]=v);var m=r.get("colorMappingBy"),x={type:u.name,dataExtent:d,visual:u.range};x.type==="color"&&(m==="index"||m==="id")?(x.mappingMethod="category",x.loop=!0):x.mappingMethod="linear";var T=new Ai(x);return ci(T).drColorMappingBy=m,T}}}function tl(a,r){var e=a.get(r);return Object(g.t)(e)&&e.length?{name:r,range:e}:null}function _g(a,r,e,n,o,s){var u=Object(g.m)({},r);if(o){var c=o.type,v=c==="color"&&ci(o).drColorMappingBy,d=v==="index"?n:v==="id"?s.mapIdToIndex(e.getId()):e.getValue(a.get("visualDimension"));u[c]=o.mapValueToVisual(d)}return u}var Wl=Math.max,Vu=Math.min,bv=g.O,oc=g.k,ls=["itemStyle","borderWidth"],bg=["itemStyle","gapWidth"],sc=["upperLabel","show"],Sv=["upperLabel","height"],Sg={seriesType:"treemap",reset:function(a,r,e,n){var o=e.getWidth(),s=e.getHeight(),u=a.option,c=kr.g(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),v=u.size||[],d=Object(Le.p)(bv(c.width,v[0]),o),m=Object(Le.p)(bv(c.height,v[1]),s),x=n&&n.type,T=["treemapZoomToNode","treemapRootToNode"],D=Bl(n,T,a),w=x==="treemapRender"||x==="treemapMove"?n.rootRect:null,R=a.getViewRoot(),Q=Rn(R);if(x!=="treemapMove"){var rt=x==="treemapZoomToNode"?us(a,D,R,d,m):w?[w.width,w.height]:[d,m],pt=u.sort;pt&&pt!=="asc"&&pt!=="desc"&&(pt="desc");var mt={squareRatio:u.squareRatio,sort:pt,leafDepth:u.leafDepth};R.hostTree.clearLayouts();var Dt={x:0,y:0,width:rt[0],height:rt[1],area:rt[0]*rt[1]};R.setLayout(Dt),Tv(R,mt,!1,0),Dt=R.getLayout(),oc(Q,function(wt,Nt){var Gt=(Q[Nt+1]||R).getValue();wt.setLayout(g.m({dataExtent:[Gt,Gt],borderWidth:0,upperHeight:0},Dt))})}var Lt=a.getData().tree.root;Lt.setLayout(Tg(c,w,D),!0),a.setLayoutInfo(c),uc(Lt,new Ar.a(-c.x,-c.y,o,s),Q,R,0)}};function Tv(a,r,e,n){var o,s;if(!a.isRemoved()){var u=a.getLayout();o=u.width,s=u.height;var c=a.getModel(),v=c.get(ls),d=c.get(bg)/2,m=ra(c),x=Math.max(v,m),T=v-d,D=x-d;a.setLayout({borderWidth:v,upperHeight:x,upperLabelHeight:m},!0),o=Wl(o-2*T,0),s=Wl(s-T-D,0);var w=o*s,R=f0(a,c,w,r,e,n);if(!!R.length){var Q={x:T,y:D,width:o,height:s},rt=Vu(o,s),pt=Infinity,mt=[];mt.area=0;for(var Dt=0,Lt=R.length;Dt<Lt;){var wt=R[Dt];mt.push(wt),mt.area+=wt.getLayout().area;var Nt=Dv(mt,rt,r.squareRatio);Nt<=pt?(Dt++,pt=Nt):(mt.area-=mt.pop().getLayout().area,lc(mt,rt,Q,d,!1),rt=Vu(Q.width,Q.height),mt.length=mt.area=0,pt=Infinity)}if(mt.length&&lc(mt,rt,Q,d,!0),!e){var Gt=c.get("childrenVisibleMin");Gt!=null&&w<Gt&&(e=!0)}for(var Dt=0,Lt=R.length;Dt<Lt;Dt++)Tv(R[Dt],r,e,n+1)}}}function f0(a,r,e,n,o,s){var u=a.children||[],c=n.sort;c!=="asc"&&c!=="desc"&&(c=null);var v=n.leafDepth!=null&&n.leafDepth<=s;if(o&&!v)return a.viewChildren=[];u=g.n(u,function(D){return!D.isRemoved()}),Av(u,c);var d=Mv(r,u,c);if(d.sum===0)return a.viewChildren=[];if(d.sum=Ov(r,e,d.sum,c,u),d.sum===0)return a.viewChildren=[];for(var m=0,x=u.length;m<x;m++){var T=u[m].getValue()/d.sum*e;u[m].setLayout({area:T})}return v&&(u.length&&a.setLayout({isLeafRoot:!0},!0),u.length=0),a.viewChildren=u,a.setLayout({dataExtent:d.dataExtent},!0),u}function Ov(a,r,e,n,o){if(!n)return e;for(var s=a.get("visibleMin"),u=o.length,c=u,v=u-1;v>=0;v--){var d=o[n==="asc"?u-v-1:v].getValue();d/e*r<s&&(c=v,e-=d)}return n==="asc"?o.splice(0,u-c):o.splice(c,u-c),e}function Av(a,r){return r&&a.sort(function(e,n){var o=r==="asc"?e.getValue()-n.getValue():n.getValue()-e.getValue();return o===0?r==="asc"?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:o}),a}function Mv(a,r,e){for(var n=0,o=0,s=r.length;o<s;o++)n+=r[o].getValue();var u=a.get("visualDimension"),c;return!r||!r.length?c=[NaN,NaN]:u==="value"&&e?(c=[r[r.length-1].getValue(),r[0].getValue()],e==="asc"&&c.reverse()):(c=[Infinity,-Infinity],oc(r,function(v){var d=v.getValue(u);d<c[0]&&(c[0]=d),d>c[1]&&(c[1]=d)})),{sum:n,dataExtent:c}}function Dv(a,r,e){for(var n=0,o=Infinity,s=0,u=void 0,c=a.length;s<c;s++)u=a[s].getLayout().area,u&&(u<o&&(o=u),u>n&&(n=u));var v=a.area*a.area,d=r*r*e;return v?Wl(d*n/v,v/(d*o)):Infinity}function lc(a,r,e,n,o){var s=r===e.width?0:1,u=1-s,c=["x","y"],v=["width","height"],d=e[c[s]],m=r?a.area/r:0;(o||m>e[v[u]])&&(m=e[v[u]]);for(var x=0,T=a.length;x<T;x++){var D=a[x],w={},R=m?D.getLayout().area/m:0,Q=w[v[u]]=Wl(m-2*n,0),rt=e[c[s]]+e[v[s]]-d,pt=x===T-1||rt<R?rt:R,mt=w[v[s]]=Wl(pt-2*n,0);w[c[u]]=e[c[u]]+Vu(n,Q/2),w[c[s]]=d+Vu(n,mt/2),d+=pt,D.setLayout(w,!0)}e[c[u]]+=m,e[v[u]]-=m}function us(a,r,e,n,o){var s=(r||{}).node,u=[n,o];if(!s||s===e)return u;for(var c,v=n*o,d=v*a.option.zoomToNodeRatio;c=s.parentNode;){for(var m=0,x=c.children,T=0,D=x.length;T<D;T++)m+=x[T].getValue();var w=s.getValue();if(w===0)return u;d*=m/w;var R=c.getModel(),Q=R.get(ls),rt=Math.max(Q,ra(R));d+=4*Q*Q+(3*Q+rt)*Math.pow(d,.5),d>Le.a&&(d=Le.a),s=c}d<v&&(d=v);var pt=Math.pow(d/v,.5);return[n*pt,o*pt]}function Tg(a,r,e){if(r)return{x:r.x,y:r.y};var n={x:0,y:0};if(!e)return n;var o=e.node,s=o.getLayout();if(!s)return n;for(var u=[s.width/2,s.height/2],c=o;c;){var v=c.getLayout();u[0]+=v.x,u[1]+=v.y,c=c.parentNode}return{x:a.width/2-u[0],y:a.height/2-u[1]}}function uc(a,r,e,n,o){var s=a.getLayout(),u=e[o],c=u&&u===a;if(!(u&&!c||o===e.length&&a!==n)){a.setLayout({isInView:!0,invisible:!c&&!r.intersect(s),isAboveViewRoot:c},!0);var v=new Ar.a(r.x-s.x,r.y-s.y,r.width,r.height);oc(a.viewChildren||[],function(d){uc(d,v,e,n,o+1)})}}function ra(a){return a.get(sc)?a.get(Sv):0}function ao(a){a.registerSeriesModel(fg),a.registerChartView(mg),a.registerVisual(gi),a.registerLayout(Sg),ov(a)}function Ev(a){var r=a.findComponents({mainType:"legend"});!r||!r.length||a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getGraph(),s=o.data,u=n.mapArray(n.getName);s.filterSelf(function(c){var v=s.getItemModel(c),d=v.getShallow("category");if(d!=null){Object(g.z)(d)&&(d=u[d]);for(var m=0;m<r.length;m++)if(!r[m].isSelected(d))return!1}return!0})})}function Cv(a){var r={};a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getData(),s={};n.each(function(u){var c=n.getName(u);s["ec-"+c]=u;var v=n.getItemModel(u),d=v.getModel("itemStyle").getItemStyle();d.fill||(d.fill=e.getColorFromPalette(c,r)),n.setItemVisual(u,"style",d);for(var m=["symbol","symbolSize","symbolKeepAspect"],x=0;x<m.length;x++){var T=v.getShallow(m[x],!0);T!=null&&n.setItemVisual(u,m[x],T)}}),n.count()&&o.each(function(u){var c=o.getItemModel(u),v=c.getShallow("category");if(v!=null){Object(g.C)(v)&&(v=s["ec-"+v]);var d=n.getItemVisual(v,"style"),m=o.ensureUniqueItemVisual(u,"style");Object(g.m)(m,d);for(var x=["symbol","symbolSize","symbolKeepAspect"],T=0;T<x.length;T++)o.setItemVisual(u,x[T],n.getItemVisual(v,x[T]))}})})}function kl(a){return a instanceof Array||(a=[a,a]),a}function fs(a){a.eachSeriesByType("graph",function(r){var e=r.getGraph(),n=r.getEdgeData(),o=kl(r.get("edgeSymbol")),s=kl(r.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",s&&s[0]),n.setVisual("toSymbolSize",s&&s[1]),n.setVisual("style",r.getModel("lineStyle").getLineStyle()),n.each(function(u){var c=n.getItemModel(u),v=e.getEdgeByIndex(u),d=kl(c.getShallow("symbol",!0)),m=kl(c.getShallow("symbolSize",!0)),x=c.getModel("lineStyle").getLineStyle(),T=n.ensureUniqueItemVisual(u,"style");switch(Object(g.m)(T,x),T.stroke){case"source":{var D=v.node1.getVisual("style");T.stroke=D&&D.fill;break}case"target":{var D=v.node2.getVisual("style");T.stroke=D&&D.fill;break}}d[0]&&v.setVisual("fromSymbol",d[0]),d[1]&&v.setVisual("toSymbol",d[1]),m[0]&&v.setVisual("fromSymbolSize",m[0]),m[1]&&v.setVisual("toSymbolSize",m[1])})})}var fc="-->",Gu=function(a){return a.get("autoCurveness")||null},Pv=function(a,r){var e=Gu(a),n=20,o=[];if(g.z(e))n=e;else if(g.t(e)){a.__curvenessList=e;return}r>n&&(n=r);var s=n%2?n+2:n+3;o=[];for(var u=0;u<s;u++)o.push((u%2?u+1:u)/10*(u%2?-1:1));a.__curvenessList=o},Xl=function(a,r,e){var n=[a.id,a.dataIndex].join("."),o=[r.id,r.dataIndex].join(".");return[e.uid,n,o].join(fc)},wv=function(a){var r=a.split(fc);return[r[0],r[2],r[1]].join(fc)},Uu=function(a,r){var e=Xl(a.node1,a.node2,r);return r.__edgeMap[e]},Og=function(a,r){var e=cc(Xl(a.node1,a.node2,r),r),n=cc(Xl(a.node2,a.node1,r),r);return e+n},cc=function(a,r){var e=r.__edgeMap;return e[a]?e[a].length:0};function Ag(a){!Gu(a)||(a.__curvenessList=[],a.__edgeMap={},Pv(a))}function Mg(a,r,e,n){if(!!Gu(e)){var o=Xl(a,r,e),s=e.__edgeMap,u=s[wv(o)];s[o]&&!u?s[o].isForward=!0:u&&s[o]&&(u.isForward=!0,s[o].isForward=!1),s[o]=s[o]||[],s[o].push(n)}}function hc(a,r,e,n){var o=Gu(r),s=g.t(o);if(!o)return null;var u=Uu(a,r);if(!u)return null;for(var c=-1,v=0;v<u.length;v++)if(u[v]===e){c=v;break}var d=Og(a,r);Pv(r,d),a.lineStyle=a.lineStyle||{};var m=Xl(a.node1,a.node2,r),x=r.__curvenessList,T=s||d%2?0:1;if(u.isForward)return x[T+c];var D=wv(m),w=cc(D,r),R=x[c+w+T];return n?s?o&&o[0]===0?(w+T)%2?R:-R:((w%2?0:1)+T)%2?R:-R:(w+T)%2?R:-R:x[c+w+T]}function Lv(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view")){var e=a.getGraph();e.eachNode(function(n){var o=n.getModel();n.setLayout([+o.get("x"),+o.get("y")])}),Iv(e,a)}}function Iv(a,r){a.eachEdge(function(e,n){var o=g.Q(e.getModel().get(["lineStyle","curveness"]),-hc(e,r,n,!0),0),s=Rr.c(e.node1.getLayout()),u=Rr.c(e.node2.getLayout()),c=[s,u];+o&&c.push([(s[0]+u[0])/2-(s[1]-u[1])*o,(s[1]+u[1])/2-(u[0]-s[0])*o]),e.setLayout(c)})}function Dg(a,r){a.eachSeriesByType("graph",function(e){var n=e.get("layout"),o=e.coordinateSystem;if(o&&o.type!=="view"){var s=e.getData(),u=[];Object(g.k)(o.dimensions,function(T){u=u.concat(s.mapDimensionsAll(T))});for(var c=0;c<s.count();c++){for(var v=[],d=!1,m=0;m<u.length;m++){var x=s.get(u[m],c);isNaN(x)||(d=!0),v.push(x)}d?s.setItemLayout(c,o.dataToPoint(v)):s.setItemLayout(c,[NaN,NaN])}Iv(s.graph,e)}else(!n||n==="none")&&Lv(e)})}function el(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var e=a.option.nodeScaleRatio,n=r.scaleX,o=r.getZoom(),s=(o-1)*e+1;return s/n}function Zl(a){var r=a.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var Rv=Math.PI,vc=[];function Nv(a,r){var e=a.coordinateSystem;if(!(e&&e.type!=="view")){var n=e.getBoundingRect(),o=a.getData(),s=o.graph,u=n.width/2+n.x,c=n.height/2+n.y,v=Math.min(n.width,n.height)/2,d=o.count();o.setLayout({cx:u,cy:c}),!!d&&(dc[r](a,s,o,v,u,c,d),s.eachEdge(function(m,x){var T=g.Q(m.getModel().get(["lineStyle","curveness"]),hc(m,a,x),0),D=Rr.c(m.node1.getLayout()),w=Rr.c(m.node2.getLayout()),R,Q=(D[0]+w[0])/2,rt=(D[1]+w[1])/2;+T&&(T*=3,R=[u*T+Q*(1-T),c*T+rt*(1-T)]),m.setLayout([D,w,R])}))}}var dc={value:function(a,r,e,n,o,s,u){var c=0,v=e.getSum("value"),d=Math.PI*2/(v||u);r.eachNode(function(m){var x=m.getValue("value"),T=d*(v?x:1)/2;c+=T,m.setLayout([n*Math.cos(c)+o,n*Math.sin(c)+s]),c+=T})},symbolSize:function(a,r,e,n,o,s,u){var c=0;vc.length=u;var v=el(a);r.eachNode(function(x){var T=Zl(x);isNaN(T)&&(T=2),T<0&&(T=0),T*=v;var D=Math.asin(T/2/n);isNaN(D)&&(D=Rv/2),vc[x.dataIndex]=D,c+=D*2});var d=(2*Rv-c)/u/2,m=0;r.eachNode(function(x){var T=d+vc[x.dataIndex];m+=T,x.setLayout([n*Math.cos(m)+o,n*Math.sin(m)+s]),m+=T})}};function jv(a){a.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&Nv(r,"symbolSize")})}var rl=Rr.o;function Eg(a,r,e){for(var n=a,o=r,s=e.rect,u=s.width,c=s.height,v=[s.x+u/2,s.y+c/2],d=e.gravity==null?.1:e.gravity,m=0;m<n.length;m++){var x=n[m];x.p||(x.p=Rr.e(u*(Math.random()-.5)+v[0],c*(Math.random()-.5)+v[1])),x.pp=Rr.c(x.p),x.edges=null}var T=e.friction==null?.6:e.friction,D=T,w,R;return{warmUp:function(){D=T*.8},setFixed:function(Q){n[Q].fixed=!0},setUnfixed:function(Q){n[Q].fixed=!1},beforeStep:function(Q){w=Q},afterStep:function(Q){R=Q},step:function(Q){w&&w(n,o);for(var rt=[],pt=n.length,mt=0;mt<o.length;mt++){var Dt=o[mt];if(!Dt.ignoreForceLayout){var Lt=Dt.n1,wt=Dt.n2;Rr.q(rt,wt.p,Lt.p);var Nt=Rr.i(rt)-Dt.d,Gt=wt.w/(Lt.w+wt.w);isNaN(Gt)&&(Gt=0),Rr.m(rt,rt),!Lt.fixed&&rl(Lt.p,Lt.p,rt,Gt*Nt*D),!wt.fixed&&rl(wt.p,wt.p,rt,-(1-Gt)*Nt*D)}}for(var mt=0;mt<pt;mt++){var Kt=n[mt];Kt.fixed||(Rr.q(rt,v,Kt.p),rl(Kt.p,Kt.p,rt,d*D))}for(var mt=0;mt<pt;mt++)for(var Lt=n[mt],te=mt+1;te<pt;te++){var wt=n[te];Rr.q(rt,wt.p,Lt.p);var Nt=Rr.i(rt);Nt===0&&(Rr.p(rt,Math.random()-.5,Math.random()-.5),Nt=1);var ne=(Lt.rep+wt.rep)/Nt/Nt;!Lt.fixed&&rl(Lt.pp,Lt.pp,rt,ne),!wt.fixed&&rl(wt.pp,wt.pp,rt,-ne)}for(var pe=[],mt=0;mt<pt;mt++){var Kt=n[mt];Kt.fixed||(Rr.q(pe,Kt.p,Kt.pp),rl(Kt.p,Kt.p,pe,D),Rr.d(Kt.pp,Kt.p))}D=D*.992;var me=D<.01;R&&R(n,o,me),Q&&Q(me)}}}function Cg(a){a.eachSeriesByType("graph",function(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view"))if(r.get("layout")==="force"){var n=r.preservedPoints||{},o=r.getGraph(),s=o.data,u=o.edgeData,c=r.getModel("force"),v=c.get("initLayout");r.preservedPoints?s.each(function(mt){var Dt=s.getId(mt);s.setItemLayout(mt,n[Dt]||[NaN,NaN])}):!v||v==="none"?Lv(r):v==="circular"&&Nv(r,"value");var d=s.getDataExtent("value"),m=u.getDataExtent("value"),x=c.get("repulsion"),T=c.get("edgeLength"),D=g.t(x)?x:[x,x],w=g.t(T)?T:[T,T];w=[w[1],w[0]];var R=s.mapArray("value",function(mt,Dt){var Lt=s.getItemLayout(Dt),wt=Object(Le.l)(mt,d,D);return isNaN(wt)&&(wt=(D[0]+D[1])/2),{w:wt,rep:wt,fixed:s.getItemModel(Dt).get("fixed"),p:!Lt||isNaN(Lt[0])||isNaN(Lt[1])?null:Lt}}),Q=u.mapArray("value",function(mt,Dt){var Lt=o.getEdgeByIndex(Dt),wt=Object(Le.l)(mt,m,w);isNaN(wt)&&(wt=(w[0]+w[1])/2);var Nt=Lt.getModel(),Gt=g.Q(Lt.getModel().get(["lineStyle","curveness"]),-hc(Lt,r,Dt,!0),0);return{n1:R[Lt.node1.dataIndex],n2:R[Lt.node2.dataIndex],d:wt,curveness:Gt,ignoreForceLayout:Nt.get("ignoreForceLayout")}}),rt=e.getBoundingRect(),pt=Eg(R,Q,{rect:rt,gravity:c.get("gravity"),friction:c.get("friction")});pt.beforeStep(function(mt,Dt){for(var Lt=0,wt=mt.length;Lt<wt;Lt++)mt[Lt].fixed&&Rr.d(mt[Lt].p,o.getNodeByIndex(Lt).getLayout())}),pt.afterStep(function(mt,Dt,Lt){for(var wt=0,Nt=mt.length;wt<Nt;wt++)mt[wt].fixed||o.getNodeByIndex(wt).setLayout(mt[wt].p),n[s.getId(wt)]=mt[wt].p;for(var wt=0,Nt=Dt.length;wt<Nt;wt++){var Gt=Dt[wt],Kt=o.getEdgeByIndex(wt),te=Gt.n1.p,ne=Gt.n2.p,pe=Kt.getLayout();pe=pe?pe.slice():[],pe[0]=pe[0]||[],pe[1]=pe[1]||[],Rr.d(pe[0],te),Rr.d(pe[1],ne),+Gt.curveness&&(pe[2]=[(te[0]+ne[0])/2-(te[1]-ne[1])*Gt.curveness,(te[1]+ne[1])/2-(ne[0]-te[0])*Gt.curveness]),Kt.setLayout(pe)}}),r.forceLayout=pt,r.preservedPoints=n,pt.step()}else r.forceLayout=null})}function Pg(a,r,e){var n=Object(g.m)(a.getBoxLayoutParams(),{aspect:e});return Object(kr.g)(n,{width:r.getWidth(),height:r.getHeight()})}function wg(a,r){var e=[];return a.eachSeriesByType("graph",function(n){var o=n.get("coordinateSystem");if(!o||o==="view"){var s=n.getData(),u=s.mapArray(function(Q){var rt=s.getItemModel(Q);return[+rt.get("x"),+rt.get("y")]}),c=[],v=[];ju.d(u,c,v),v[0]-c[0]==0&&(v[0]+=1,c[0]-=1),v[1]-c[1]==0&&(v[1]+=1,c[1]-=1);var d=(v[0]-c[0])/(v[1]-c[1]),m=Pg(n,r,d);isNaN(d)&&(c=[m.x,m.y],v=[m.x+m.width,m.y+m.height]);var x=v[0]-c[0],T=v[1]-c[1],D=m.width,w=m.height,R=n.coordinateSystem=new Qs;R.zoomLimit=n.get("scaleLimit"),R.setBoundingRect(c[0],c[1],x,T),R.setViewRect(m.x,m.y,D,w),R.setCenter(n.get("center")),R.setZoom(n.get("zoom")),e.push(R)}}),e}var Bv=Ui.a.prototype,Hu=Yh.a.prototype,Wu=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),c0=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Wu);function Va(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var Fv=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-line",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Wu},r.prototype.buildPath=function(e,n){Va(n)?Bv.buildPath.call(this,e,n):Hu.buildPath.call(this,e,n)},r.prototype.pointAt=function(e){return Va(this.shape)?Bv.pointAt.call(this,e):Hu.pointAt.call(this,e)},r.prototype.tangentAt=function(e){var n=this.shape,o=Va(n)?[n.x2-n.x1,n.y2-n.y1]:Hu.tangentAt.call(this,e);return Rr.m(o,o)},r}(ot.b),Lg=Fv,ku=["fromSymbol","toSymbol"];function Ig(a){return"_"+a+"Type"}function zv(a,r,e){var n=r.getItemVisual(e,a);if(!(!n||n==="none")){var o=r.getItemVisual(e,a+"Size"),s=r.getItemVisual(e,a+"Rotate"),u=r.getItemVisual(e,a+"Offset"),c=r.getItemVisual(e,a+"KeepAspect"),v=cn.c(o),d=cn.b(u||0,v),m=cn.a(n,-v[0]/2+d[0],-v[1]/2+d[1],v[0],v[1],null,c);return m.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,m.name=a,m}}function Co(a){var r=new Lg({name:"line",subPixelOptimize:!0});return cs(r.shape,a),r}function cs(a,r){a.x1=r[0][0],a.y1=r[0][1],a.x2=r[1][0],a.y2=r[1][1],a.percent=1;var e=r[2];e?(a.cpx1=e[0],a.cpy1=e[1]):(a.cpx1=NaN,a.cpy1=NaN)}var pc=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createLine(e,n,o),s}return r.prototype._createLine=function(e,n,o){var s=e.hostModel,u=e.getItemLayout(n),c=Co(u);c.shape.percent=0,cr.c(c,{shape:{percent:1}},s,n),this.add(c),Object(g.k)(ku,function(v){var d=zv(v,e,n);this.add(d),this[Ig(v)]=e.getItemVisual(n,v)},this),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),c=e.getItemLayout(n),v={shape:{}};cs(v.shape,c),cr.h(u,v,s,n),Object(g.k)(ku,function(d){var m=e.getItemVisual(n,d),x=Ig(d);if(this[x]!==m){this.remove(this.childOfName(d));var T=zv(d,e,n);this.add(T)}this[x]=m},this),this._updateCommonStl(e,n,o)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),c=o&&o.emphasisLineStyle,v=o&&o.blurLineStyle,d=o&&o.selectLineStyle,m=o&&o.labelStatesModels,x=o&&o.emphasisDisabled,T=o&&o.focus,D=o&&o.blurScope;if(!o||e.hasItemOption){var w=e.getItemModel(n),R=w.getModel("emphasis");c=R.getModel("lineStyle").getLineStyle(),v=w.getModel(["blur","lineStyle"]).getLineStyle(),d=w.getModel(["select","lineStyle"]).getLineStyle(),x=R.get("disabled"),T=R.get("focus"),D=R.get("blurScope"),m=Object(xr.e)(w)}var Q=e.getItemVisual(n,"style"),rt=Q.stroke;u.useStyle(Q),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=c,u.ensureState("blur").style=v,u.ensureState("select").style=d,Object(g.k)(ku,function(wt){var Nt=this.childOfName(wt);if(Nt){Nt.setColor(rt),Nt.style.opacity=Q.opacity;for(var Gt=0;Gt<ar.g.length;Gt++){var Kt=ar.g[Gt],te=u.getState(Kt);if(te){var ne=te.style||{},pe=Nt.ensureState(Kt),me=pe.style||(pe.style={});ne.stroke!=null&&(me[Nt.__isEmptyBrush?"stroke":"fill"]=ne.stroke),ne.opacity!=null&&(me.opacity=ne.opacity)}}Nt.markRedraw()}},this);var pt=s.getRawValue(n);Object(xr.g)(this,m,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(wt,Nt){return s.getFormattedLabel(wt,Nt,e.dataType)}},inheritColor:rt||"#000",defaultOpacity:Q.opacity,defaultText:(pt==null?e.getName(n):isFinite(pt)?Object(Le.v)(pt):pt)+""});var mt=this.getTextContent();if(mt){var Dt=m.normal;mt.__align=mt.style.align,mt.__verticalAlign=mt.style.verticalAlign,mt.__position=Dt.get("position")||"middle";var Lt=Dt.get("distance");Object(g.t)(Lt)||(Lt=[Lt,Lt]),mt.__labelDistance=Lt}this.setTextConfig({position:null,local:!0,inside:!1}),Object(ar.J)(this,T,D,x)},r.prototype.highlight=function(){Object(ar.r)(this)},r.prototype.downplay=function(){Object(ar.C)(this)},r.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},r.prototype.setLinePoints=function(e){var n=this.childOfName("line");cs(n.shape,e),n.dirty()},r.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),s=e.getTextContent();if(!n&&!o&&(!s||s.ignore))return;for(var u=1,c=this.parent;c;)c.scaleX&&(u/=c.scaleX),c=c.parent;var v=e.childOfName("line");if(!this.__dirty&&!v.__dirty)return;var d=v.shape.percent,m=v.pointAt(0),x=v.pointAt(d),T=Rr.q([],x,m);Rr.m(T,T);function D(te,ne){var pe=te.__specifiedRotation;if(pe==null){var me=v.tangentAt(ne);te.attr("rotation",(ne===1?-1:1)*Math.PI/2-Math.atan2(me[1],me[0]))}else te.attr("rotation",pe)}if(n&&(n.setPosition(m),D(n,0),n.scaleX=n.scaleY=u*d,n.markRedraw()),o&&(o.setPosition(x),D(o,1),o.scaleX=o.scaleY=u*d,o.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var w=void 0,R=void 0,Q=s.__labelDistance,rt=Q[0]*u,pt=Q[1]*u,mt=d/2,Dt=v.tangentAt(mt),Lt=[Dt[1],-Dt[0]],wt=v.pointAt(mt);Lt[1]>0&&(Lt[0]=-Lt[0],Lt[1]=-Lt[1]);var Nt=Dt[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var Gt=-Math.atan2(Dt[1],Dt[0]);x[0]<m[0]&&(Gt=Math.PI+Gt),s.rotation=Gt}var Kt=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Kt=-pt,R="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Kt=pt,R="top";break;default:Kt=0,R="middle"}switch(s.__position){case"end":s.x=T[0]*rt+x[0],s.y=T[1]*pt+x[1],w=T[0]>.8?"left":T[0]<-.8?"right":"center",R=T[1]>.8?"top":T[1]<-.8?"bottom":"middle";break;case"start":s.x=-T[0]*rt+m[0],s.y=-T[1]*pt+m[1],w=T[0]>.8?"right":T[0]<-.8?"left":"center",R=T[1]>.8?"bottom":T[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=rt*Nt+m[0],s.y=m[1]+Kt,w=Dt[0]<0?"right":"left",s.originX=-rt*Nt,s.originY=-Kt;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=wt[0],s.y=wt[1]+Kt,w="center",s.originY=-Kt;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-rt*Nt+x[0],s.y=x[1]+Kt,w=Dt[0]>=0?"right":"left",s.originX=rt*Nt,s.originY=-Kt;break}s.scaleX=s.scaleY=u,s.setStyle({verticalAlign:s.__verticalAlign||R,align:s.__align||w})}},r}(Pr.a),Ii=pc,nl=function(){function a(r){this.group=new Pr.a,this._LineCtor=r||Ii}return a.prototype.updateData=function(r){var e=this;this._progressiveEls=null;var n=this,o=n.group,s=n._lineData;n._lineData=r,s||o.removeAll();var u=Yl(r);r.diff(s).add(function(c){e._doAdd(r,c,u)}).update(function(c,v){e._doUpdate(s,r,v,c,u)}).remove(function(c){o.remove(s.getItemGraphicEl(c))}).execute()},a.prototype.updateLayout=function(){var r=this._lineData;!r||r.eachItemGraphicEl(function(e,n){e.updateLayout(r,n)},this)},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Yl(r),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e){this._progressiveEls=[];function n(c){!c.isGroup&&!gc(c)&&(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var o=r.start;o<r.end;o++){var s=e.getItemLayout(o);if(mc(s)){var u=new this._LineCtor(e,o,this._seriesScope);u.traverse(n),this.group.add(u),e.setItemGraphicEl(o,u),this._progressiveEls.push(u)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(r){_r.traverseElements(this._progressiveEls||this.group,r)},a.prototype._doAdd=function(r,e,n){var o=r.getItemLayout(e);if(!!mc(o)){var s=new this._LineCtor(r,e,n);r.setItemGraphicEl(e,s),this.group.add(s)}},a.prototype._doUpdate=function(r,e,n,o,s){var u=r.getItemGraphicEl(n);if(!mc(e.getItemLayout(o))){this.group.remove(u);return}u?u.updateData(e,o,s):u=new this._LineCtor(e,o,s),e.setItemGraphicEl(o,u),this.group.add(u)},a}();function gc(a){return a.animators&&a.animators.length>0}function Yl(a){var r=a.hostModel,e=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:Object(xr.e)(r)}}function il(a){return isNaN(a[0])||isNaN(a[1])}function mc(a){return a&&!il(a[0])&&!il(a[1])}var Xu=nl,yc=[],xc=[],_c=[],hs=Br.h,Kl=Rr.g,Vv=Math.abs;function oo(a,r,e){for(var n=a[0],o=a[1],s=a[2],u=Infinity,c,v=e*e,d=.1,m=.1;m<=.9;m+=.1){yc[0]=hs(n[0],o[0],s[0],m),yc[1]=hs(n[1],o[1],s[1],m);var x=Vv(Kl(yc,r)-v);x<u&&(u=x,c=m)}for(var T=0;T<32;T++){var D=c+d;xc[0]=hs(n[0],o[0],s[0],c),xc[1]=hs(n[1],o[1],s[1],c),_c[0]=hs(n[0],o[0],s[0],D),_c[1]=hs(n[1],o[1],s[1],D);var x=Kl(xc,r)-v;if(Vv(x)<.01)break;var w=Kl(_c,r)-v;d/=2,x<0?w>=0?c=c+d:c=c-d:w>=0?c=c-d:c=c+d}return c}function Zu(a,r){var e=[],n=Br.n,o=[[],[],[]],s=[[],[]],u=[];r/=2,a.eachEdge(function(c,v){var d=c.getLayout(),m=c.getVisual("fromSymbol"),x=c.getVisual("toSymbol");d.__original||(d.__original=[Rr.c(d[0]),Rr.c(d[1])],d[2]&&d.__original.push(Rr.c(d[2])));var T=d.__original;if(d[2]!=null){if(Rr.d(o[0],T[0]),Rr.d(o[1],T[2]),Rr.d(o[2],T[1]),m&&m!=="none"){var D=Zl(c.node1),w=oo(o,T[0],D*r);n(o[0][0],o[1][0],o[2][0],w,e),o[0][0]=e[3],o[1][0]=e[4],n(o[0][1],o[1][1],o[2][1],w,e),o[0][1]=e[3],o[1][1]=e[4]}if(x&&x!=="none"){var D=Zl(c.node2),w=oo(o,T[1],D*r);n(o[0][0],o[1][0],o[2][0],w,e),o[1][0]=e[1],o[2][0]=e[2],n(o[0][1],o[1][1],o[2][1],w,e),o[1][1]=e[1],o[2][1]=e[2]}Rr.d(d[0],o[0]),Rr.d(d[1],o[2]),Rr.d(d[2],o[1])}else{if(Rr.d(s[0],T[0]),Rr.d(s[1],T[1]),Rr.q(u,s[1],s[0]),Rr.m(u,u),m&&m!=="none"){var D=Zl(c.node1);Rr.o(s[0],s[0],u,D*r)}if(x&&x!=="none"){var D=Zl(c.node2);Rr.o(s[1],s[1],u,-D*r)}Rr.d(d[0],s[0]),Rr.d(d[1],s[1])}})}function Gv(a){return a.type==="view"}var Rg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){var o=new Wr,s=new Xu,u=this.group;this._controller=new qa(n.getZr()),this._controllerHost={target:u},u.add(o.group),u.add(s.group),this._symbolDraw=o,this._lineDraw=s,this._firstRender=!0},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem;this._model=e;var c=this._symbolDraw,v=this._lineDraw,d=this.group;if(Gv(u)){var m={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?d.attr(m):cr.h(d,m,e)}Zu(e.getGraph(),el(e));var x=e.getData();c.updateData(x);var T=e.getEdgeData();v.updateData(T),this._updateNodeAndLinkScale(),this._updateController(e,n,o),clearTimeout(this._layoutTimeout);var D=e.forceLayout,w=e.get(["force","layoutAnimation"]);D&&this._startForceLayoutIteration(D,w),x.graph.eachNode(function(pt){var mt=pt.dataIndex,Dt=pt.getGraphicEl(),Lt=pt.getModel();if(!!Dt){Dt.off("drag").off("dragend");var wt=Lt.get("draggable");wt&&Dt.on("drag",function(){D&&(D.warmUp(),!s._layouting&&s._startForceLayoutIteration(D,w),D.setFixed(mt),x.setItemLayout(mt,[Dt.x,Dt.y]))}).on("dragend",function(){D&&D.setUnfixed(mt)}),Dt.setDraggable(wt&&!!D);var Nt=Lt.get(["emphasis","focus"]);Nt==="adjacency"&&(Object(br.a)(Dt).focus=pt.getAdjacentDataIndices())}}),x.graph.eachEdge(function(pt){var mt=pt.getGraphicEl(),Dt=pt.getModel().get(["emphasis","focus"]);!mt||Dt==="adjacency"&&(Object(br.a)(mt).focus={edge:[pt.dataIndex],node:[pt.node1.dataIndex,pt.node2.dataIndex]})});var R=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),Q=x.getLayout("cx"),rt=x.getLayout("cy");x.eachItemGraphicEl(function(pt,mt){var Dt=x.getItemModel(mt),Lt=Dt.get(["label","rotate"])||0,wt=pt.getSymbolPath();if(R){var Nt=x.getItemLayout(mt),Gt=Math.atan2(Nt[1]-rt,Nt[0]-Q);Gt<0&&(Gt=Math.PI*2+Gt);var Kt=Nt[0]<Q;Kt&&(Gt=Gt-Math.PI);var te=Kt?"left":"right";wt.setTextConfig({rotation:-Gt,position:te,origin:"center"});var ne=wt.ensureState("emphasis");g.m(ne.textConfig||(ne.textConfig={}),{position:te})}else wt.setTextConfig({rotation:Lt*=Math.PI/180})}),this._firstRender=!1},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(e,n){var o=this;(function s(){e.step(function(u){o.updateLayout(o._model),(o._layouting=!u)&&(n?o._layoutTimeout=setTimeout(s,16):s())})})()},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,c=this._controllerHost,v=this.group;if(u.setPointerChecker(function(d,m,x){var T=v.getBoundingRect();return T.applyTransform(v.transform),T.contain(m,x)&&!Hs(d,o,e)}),!Gv(e.coordinateSystem)){u.disable();return}u.enable(e.get("roam")),c.zoomLimit=e.get("scaleLimit"),c.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Pf(c,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){Us(c,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(),Zu(e.getGraph(),el(e)),s._lineDraw.updateLayout(),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var e=this._model,n=e.getData(),o=el(e);n.eachItemGraphicEl(function(s,u){s&&s.setSymbolScale(o)})},r.prototype.updateLayout=function(e){Zu(e.getGraph(),el(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(Ln.a),Ng=Rg,jg=b("VtB+"),al=b("JFDN");function Uv(a,r,e,n,o){for(var s=new jg.a(n),u=0;u<a.length;u++)s.addNode(g.O(a[u].id,a[u].name,u),u);for(var c=[],v=[],d=0,u=0;u<r.length;u++){var m=r[u],x=m.source,T=m.target;s.addEdge(x,T,d)&&(v.push(m),c.push(g.O(Object(Be.e)(m.id,null),x+" > "+T)),d++)}var D=e.get("coordinateSystem"),w;if(D==="cartesian2d"||D==="polar")w=Object(va.a)(a,e);else{var R=al.a.get(D),Q=R?R.dimensions||[]:[];g.r(Q,"value")<0&&Q.concat(["value"]);var rt=Object(lr.b)(a,{coordDimensions:Q,encodeDefine:e.getEncode()}).dimensions;w=new ue.a(rt,e),w.initData(a)}var pt=new ue.a(["value"],e);return pt.initData(v,c),o&&o(w,pt),Object(Yf.a)({mainData:w,struct:s,structAttr:"graph",datas:{node:w,edge:pt},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var Bg=b("M9la"),Fg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new Ye(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(e){a.prototype.mergeDefaultAndTheme.apply(this,arguments),Object(Be.f)(e,"edgeLabel",["show"])},r.prototype.getInitialData=function(e,n){var o=e.edges||e.links||[],s=e.data||e.nodes||[],u=this;if(s&&o){Ag(this);var c=Uv(s,o,this,!0,v);return g.k(c.edges,function(d){Mg(d.node1,d.node2,this,d.dataIndex)},this),c.data}function v(d,m){d.wrapMethod("getItemModel",function(w){var R=u._categoriesModels,Q=w.getShallow("category"),rt=R[Q];return rt&&(rt.parentModel=w.parentModel,w.parentModel=rt),w});var x=fi.a.prototype.getModel;function T(w,R){var Q=x.call(this,w,R);return Q.resolveParentPath=D,Q}m.wrapMethod("getItemModel",function(w){return w.resolveParentPath=D,w.getModel=T,w});function D(w){if(w&&(w[0]==="label"||w[1]==="label")){var R=w.slice();return w[0]==="label"?R[0]="edgeLabel":w[1]==="label"&&(R[1]="edgeLabel"),R}return w}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(e,n,o){if(o==="edge"){var s=this.getData(),u=this.getDataParams(e,o),c=s.graph.getEdgeByIndex(e),v=s.getName(c.node1.dataIndex),d=s.getName(c.node2.dataIndex),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),Object(Xn.c)("nameValue",{name:m.join(" > "),value:u.value,noValue:u.value==null})}var x=Object(Bg.a)({series:this,dataIndex:e,multipleSeries:n});return x},r.prototype._updateCategoriesData=function(){var e=g.H(this.option.categories||[],function(o){return o.value!=null?o:g.m({value:0},o)}),n=new ue.a(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(o){return n.getItemModel(o)})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(Mn.b),zg=Fg,Vg={type:"graphRoam",event:"graphRoam",update:"none"};function Gg(a){a.registerChartView(Ng),a.registerSeriesModel(zg),a.registerProcessor(Ev),a.registerVisual(Cv),a.registerVisual(fs),a.registerLayout(Dg),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,jv),a.registerLayout(Cg),a.registerCoordinateSystem("graphView",{dimensions:Qs.dimensions,create:wg}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},g.L),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},g.L),a.registerAction(Vg,function(r,e){e.eachComponent({mainType:"series",query:r},function(n){var o=n.coordinateSystem,s=Hf(o,r);n.setCenter&&n.setCenter(s.center),n.setZoom&&n.setZoom(s.zoom)})})}var Ug=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),Hg=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="pointer",n}return r.prototype.getDefaultShape=function(){return new Ug},r.prototype.buildPath=function(e,n){var o=Math.cos,s=Math.sin,u=n.r,c=n.width,v=n.angle,d=n.x-o(v)*c*(c>=u/3?1:2),m=n.y-s(v)*c*(c>=u/3?1:2);v=n.angle-Math.PI/2,e.moveTo(d,m),e.lineTo(n.x+o(v)*c,n.y+s(v)*c),e.lineTo(n.x+o(n.angle)*u,n.y+s(n.angle)*u),e.lineTo(n.x-o(v)*c,n.y-s(v)*c),e.lineTo(d,m)},r}(ot.b),Wg=Hg;function bc(a,r){var e=a.get("center"),n=r.getWidth(),o=r.getHeight(),s=Math.min(n,o),u=Object(Le.p)(e[0],r.getWidth()),c=Object(Le.p)(e[1],r.getHeight()),v=Object(Le.p)(a.get("radius"),s/2);return{cx:u,cy:c,r:v}}function Ql(a,r){var e=a==null?"":a+"";return r&&(Object(g.C)(r)?e=r.replace("{value}",e):Object(g.w)(r)&&(e=r(a))),e}var Sc=Math.PI*2,kg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeAll();var s=e.get(["axisLine","lineStyle","color"]),u=bc(e,o);this._renderMain(e,n,o,s,u),this._data=e.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(e,n,o,s,u){for(var c=this.group,v=e.get("clockwise"),d=-e.get("startAngle")/180*Math.PI,m=-e.get("endAngle")/180*Math.PI,x=e.getModel("axisLine"),T=x.get("roundCap"),D=T?Dn:In.a,w=x.get("show"),R=x.getModel("lineStyle"),Q=R.get("width"),rt=!((m-d)%Sc)&&m!==d?Sc:(m-d)%Sc,pt=d,mt=0;w&&mt<s.length;mt++){var Dt=Math.min(Math.max(s[mt][0],0),1);m=d+rt*Dt;var Lt=new D({shape:{startAngle:pt,endAngle:m,cx:u.cx,cy:u.cy,clockwise:v,r0:u.r-Q,r:u.r},silent:!0});Lt.setStyle({fill:s[mt][1]}),Lt.setStyle(R.getLineStyle(["color","width"])),c.add(Lt),pt=m}var wt=function(Gt){if(Gt<=0)return s[0][1];var Kt;for(Kt=0;Kt<s.length;Kt++)if(s[Kt][0]>=Gt&&(Kt===0?0:s[Kt-1][0])<Gt)return s[Kt][1];return s[Kt-1][1]};if(!v){var Nt=d;d=m,m=Nt}this._renderTicks(e,n,o,wt,u,d,m,v,Q),this._renderTitleAndDetail(e,n,o,wt,u),this._renderAnchor(e,u),this._renderPointer(e,n,o,wt,u,d,m,v,Q)},r.prototype._renderTicks=function(e,n,o,s,u,c,v,d,m){for(var x=this.group,T=u.cx,D=u.cy,w=u.r,R=+e.get("min"),Q=+e.get("max"),rt=e.getModel("splitLine"),pt=e.getModel("axisTick"),mt=e.getModel("axisLabel"),Dt=e.get("splitNumber"),Lt=pt.get("splitNumber"),wt=Object(Le.p)(rt.get("length"),w),Nt=Object(Le.p)(pt.get("length"),w),Gt=c,Kt=(v-c)/Dt,te=Kt/Lt,ne=rt.getModel("lineStyle").getLineStyle(),pe=pt.getModel("lineStyle").getLineStyle(),me=rt.get("distance"),xe,_e,Ne=0;Ne<=Dt;Ne++){if(xe=Math.cos(Gt),_e=Math.sin(Gt),rt.get("show")){var Je=me?me+m:m,Xe=new Ui.a({shape:{x1:xe*(w-Je)+T,y1:_e*(w-Je)+D,x2:xe*(w-wt-Je)+T,y2:_e*(w-wt-Je)+D},style:ne,silent:!0});ne.stroke==="auto"&&Xe.setStyle({stroke:s(Ne/Dt)}),x.add(Xe)}if(mt.get("show")){var Je=mt.get("distance")+me,or=Ql(Object(Le.v)(Ne/Dt*(Q-R)+R),mt.get("formatter")),Tr=s(Ne/Dt);x.add(new he.a({style:Object(xr.c)(mt,{text:or,x:xe*(w-wt-Je)+T,y:_e*(w-wt-Je)+D,verticalAlign:_e<-.8?"top":_e>.8?"bottom":"middle",align:xe<-.4?"left":xe>.4?"right":"center"},{inheritColor:Tr}),silent:!0}))}if(pt.get("show")&&Ne!==Dt){var Je=pt.get("distance");Je=Je?Je+m:m;for(var Mr=0;Mr<=Lt;Mr++){xe=Math.cos(Gt),_e=Math.sin(Gt);var Ur=new Ui.a({shape:{x1:xe*(w-Je)+T,y1:_e*(w-Je)+D,x2:xe*(w-Nt-Je)+T,y2:_e*(w-Nt-Je)+D},silent:!0,style:pe});pe.stroke==="auto"&&Ur.setStyle({stroke:s((Ne+Mr/Lt)/Dt)}),x.add(Ur),Gt+=te}Gt-=te}else Gt+=Kt}},r.prototype._renderPointer=function(e,n,o,s,u,c,v,d,m){var x=this.group,T=this._data,D=this._progressEls,w=[],R=e.get(["pointer","show"]),Q=e.getModel("progress"),rt=Q.get("show"),pt=e.getData(),mt=pt.mapDimension("value"),Dt=+e.get("min"),Lt=+e.get("max"),wt=[Dt,Lt],Nt=[c,v];function Gt(te,ne){var pe=pt.getItemModel(te),me=pe.getModel("pointer"),xe=Object(Le.p)(me.get("width"),u.r),_e=Object(Le.p)(me.get("length"),u.r),Ne=e.get(["pointer","icon"]),Je=me.get("offsetCenter"),Xe=Object(Le.p)(Je[0],u.r),or=Object(Le.p)(Je[1],u.r),Tr=me.get("keepAspect"),Mr;return Ne?Mr=Object(cn.a)(Ne,Xe-xe/2,or-_e,xe,_e,null,Tr):Mr=new Wg({shape:{angle:-Math.PI/2,width:xe,r:_e,x:Xe,y:or}}),Mr.rotation=-(ne+Math.PI/2),Mr.x=u.cx,Mr.y=u.cy,Mr}function Kt(te,ne){var pe=Q.get("roundCap"),me=pe?Dn:In.a,xe=Q.get("overlap"),_e=xe?Q.get("width"):m/pt.count(),Ne=xe?u.r-_e:u.r-(te+1)*_e,Je=xe?u.r:u.r-te*_e,Xe=new me({shape:{startAngle:c,endAngle:ne,cx:u.cx,cy:u.cy,clockwise:d,r0:Ne,r:Je}});return xe&&(Xe.z2=Lt-pt.get(mt,te)%Lt),Xe}(rt||R)&&(pt.diff(T).add(function(te){var ne=pt.get(mt,te);if(R){var pe=Gt(te,c);cr.c(pe,{rotation:-((isNaN(+ne)?Nt[0]:Object(Le.l)(ne,wt,Nt,!0))+Math.PI/2)},e),x.add(pe),pt.setItemGraphicEl(te,pe)}if(rt){var me=Kt(te,c),xe=Q.get("clip");cr.c(me,{shape:{endAngle:Object(Le.l)(ne,wt,Nt,xe)}},e),x.add(me),Object(br.b)(e.seriesIndex,pt.dataType,te,me),w[te]=me}}).update(function(te,ne){var pe=pt.get(mt,te);if(R){var me=T.getItemGraphicEl(ne),xe=me?me.rotation:c,_e=Gt(te,xe);_e.rotation=xe,cr.h(_e,{rotation:-((isNaN(+pe)?Nt[0]:Object(Le.l)(pe,wt,Nt,!0))+Math.PI/2)},e),x.add(_e),pt.setItemGraphicEl(te,_e)}if(rt){var Ne=D[ne],Je=Ne?Ne.shape.endAngle:c,Xe=Kt(te,Je),or=Q.get("clip");cr.h(Xe,{shape:{endAngle:Object(Le.l)(pe,wt,Nt,or)}},e),x.add(Xe),Object(br.b)(e.seriesIndex,pt.dataType,te,Xe),w[te]=Xe}}).execute(),pt.each(function(te){var ne=pt.getItemModel(te),pe=ne.getModel("emphasis"),me=pe.get("focus"),xe=pe.get("blurScope"),_e=pe.get("disabled");if(R){var Ne=pt.getItemGraphicEl(te),Je=pt.getItemVisual(te,"style"),Xe=Je.fill;if(Ne instanceof gt.a){var or=Ne.style;Ne.useStyle(Object(g.m)({image:or.image,x:or.x,y:or.y,width:or.width,height:or.height},Je))}else Ne.useStyle(Je),Ne.type!=="pointer"&&Ne.setColor(Xe);Ne.setStyle(ne.getModel(["pointer","itemStyle"]).getItemStyle()),Ne.style.fill==="auto"&&Ne.setStyle("fill",s(Object(Le.l)(pt.get(mt,te),wt,[0,1],!0))),Ne.z2EmphasisLift=0,Object(ar.I)(Ne,ne),Object(ar.J)(Ne,me,xe,_e)}if(rt){var Tr=w[te];Tr.useStyle(pt.getItemVisual(te,"style")),Tr.setStyle(ne.getModel(["progress","itemStyle"]).getItemStyle()),Tr.z2EmphasisLift=0,Object(ar.I)(Tr,ne),Object(ar.J)(Tr,me,xe,_e)}}),this._progressEls=w)},r.prototype._renderAnchor=function(e,n){var o=e.getModel("anchor"),s=o.get("show");if(s){var u=o.get("size"),c=o.get("icon"),v=o.get("offsetCenter"),d=o.get("keepAspect"),m=Object(cn.a)(c,n.cx-u/2+Object(Le.p)(v[0],n.r),n.cy-u/2+Object(Le.p)(v[1],n.r),u,u,null,d);m.z2=o.get("showAbove")?1:0,m.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(m)}},r.prototype._renderTitleAndDetail=function(e,n,o,s,u){var c=this,v=e.getData(),d=v.mapDimension("value"),m=+e.get("min"),x=+e.get("max"),T=new Pr.a,D=[],w=[],R=e.isAnimationEnabled(),Q=e.get(["pointer","showAbove"]);v.diff(this._data).add(function(rt){D[rt]=new he.a({silent:!0}),w[rt]=new he.a({silent:!0})}).update(function(rt,pt){D[rt]=c._titleEls[pt],w[rt]=c._detailEls[pt]}).execute(),v.each(function(rt){var pt=v.getItemModel(rt),mt=v.get(d,rt),Dt=new Pr.a,Lt=s(Object(Le.l)(mt,[m,x],[0,1],!0)),wt=pt.getModel("title");if(wt.get("show")){var Nt=wt.get("offsetCenter"),Gt=u.cx+Object(Le.p)(Nt[0],u.r),Kt=u.cy+Object(Le.p)(Nt[1],u.r),te=D[rt];te.attr({z2:Q?0:2,style:Object(xr.c)(wt,{x:Gt,y:Kt,text:v.getName(rt),align:"center",verticalAlign:"middle"},{inheritColor:Lt})}),Dt.add(te)}var ne=pt.getModel("detail");if(ne.get("show")){var pe=ne.get("offsetCenter"),me=u.cx+Object(Le.p)(pe[0],u.r),xe=u.cy+Object(Le.p)(pe[1],u.r),_e=Object(Le.p)(ne.get("width"),u.r),Ne=Object(Le.p)(ne.get("height"),u.r),Je=e.get(["progress","show"])?v.getItemVisual(rt,"style").fill:Lt,te=w[rt],Xe=ne.get("formatter");te.attr({z2:Q?0:2,style:Object(xr.c)(ne,{x:me,y:xe,text:Ql(mt,Xe),width:isNaN(_e)?null:_e,height:isNaN(Ne)?null:Ne,align:"center",verticalAlign:"middle"},{inheritColor:Je})}),Object(xr.h)(te,{normal:ne},mt,function(Tr){return Ql(Tr,Xe)}),R&&Object(xr.a)(te,rt,v,e,{getFormattedLabel:function(Tr,Mr,Ur,Yr,fn,Yn){return Ql(Yn?Yn.interpolatedValue:mt,Xe)}}),Dt.add(te)}T.add(Dt)}),this.group.add(T),this._titleEls=D,this._detailEls=w},r.type="gauge",r}(Ln.a),Xg=kg,Zg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="itemStyle",e}return r.prototype.getInitialData=function(e,n){return Te(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(Mn.b),Tc=Zg;function Yg(a){a.registerChartView(Xg),a.registerSeriesModel(Tc)}var Oc=["itemStyle","opacity"],ol=function(a){Object(Pe.a)(r,a);function r(e,n){var o=a.call(this)||this,s=o,u=new Vi.a,c=new he.a;return s.setTextContent(c),o.setTextGuideLine(u),o.updateData(e,n,!0),o}return r.prototype.updateData=function(e,n,o){var s=this,u=e.hostModel,c=e.getItemModel(n),v=e.getItemLayout(n),d=c.getModel("emphasis"),m=c.get(Oc);m=m==null?1:m,o||Object(cr.g)(s),s.useStyle(e.getItemVisual(n,"style")),s.style.lineJoin="round",o?(s.setShape({points:v.points}),s.style.opacity=0,cr.c(s,{style:{opacity:m}},u,n)):cr.h(s,{style:{opacity:m},shape:{points:v.points}},u,n),Object(ar.I)(s,c),this._updateLabel(e,n),Object(ar.J)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n){var o=this,s=this.getTextGuideLine(),u=o.getTextContent(),c=e.hostModel,v=e.getItemModel(n),d=e.getItemLayout(n),m=d.label,x=e.getItemVisual(n,"style"),T=x.fill;Object(xr.g)(u,Object(xr.e)(v),{labelFetcher:e.hostModel,labelDataIndex:n,defaultOpacity:x.opacity,defaultText:e.getName(n)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),o.setTextConfig({local:!0,inside:!!m.inside,insideStroke:T,outsideFill:T});var D=m.linePoints;s.setShape({points:D}),o.textGuideLineConfig={anchor:D?new qi.a(D[0][0],D[0][1]):null},cr.h(u,{style:{x:m.x,y:m.y}},c,n),u.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),Object(_a.d)(o,Object(_a.a)(v),{stroke:T})},r}(_n.a),Kg=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._data,c=this.group;s.diff(u).add(function(v){var d=new ol(s,v);s.setItemGraphicEl(v,d),c.add(d)}).update(function(v,d){var m=u.getItemGraphicEl(d);m.updateData(s,v),c.add(m),s.setItemGraphicEl(v,m)}).remove(function(v){var d=u.getItemGraphicEl(v);cr.f(d,e,v)}).execute(),this._data=s},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(Ln.a),Jl=Kg,Yu=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ye(g.c(this.getData,this),g.c(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.getInitialData=function(e,n){return Te(this,{coordDimensions:["value"],encodeDefaulter:g.h(ye.d,this)})},r.prototype._defaultLabelLine=function(e){Object(Be.f)(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.prototype.getDataParams=function(e){var n=this.getData(),o=a.prototype.getDataParams.call(this,e),s=n.mapDimension("value"),u=n.getSum(s);return o.percent=u?+(n.get(s,e)/u*100).toFixed(2):0,o.$vars.push("percent"),o},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(Mn.b),Hv=Yu;function Qg(a,r){return kr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Zn(a,r){for(var e=a.mapDimension("value"),n=a.mapArray(e,function(v){return v}),o=[],s=r==="ascending",u=0,c=a.count();u<c;u++)o[u]=u;return Object(g.w)(r)?o.sort(r):r!=="none"&&o.sort(function(v,d){return s?n[v]-n[d]:n[d]-n[v]}),o}function Jg(a){var r=a.hostModel,e=r.get("orient");a.each(function(n){var o=a.getItemModel(n),s=o.getModel("label"),u=s.get("position"),c=o.getModel("labelLine"),v=a.getItemLayout(n),d=v.points,m=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",x,T,D,w;if(m)u==="insideLeft"?(T=(d[0][0]+d[3][0])/2+5,D=(d[0][1]+d[3][1])/2,x="left"):u==="insideRight"?(T=(d[1][0]+d[2][0])/2-5,D=(d[1][1]+d[2][1])/2,x="right"):(T=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,D=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,x="center"),w=[[T,D],[T,D]];else{var R=void 0,Q=void 0,rt=void 0,pt=void 0,mt=c.get("length");u==="left"?(R=(d[3][0]+d[0][0])/2,Q=(d[3][1]+d[0][1])/2,rt=R-mt,T=rt-5,x="right"):u==="right"?(R=(d[1][0]+d[2][0])/2,Q=(d[1][1]+d[2][1])/2,rt=R+mt,T=rt+5,x="left"):u==="top"?(R=(d[3][0]+d[0][0])/2,Q=(d[3][1]+d[0][1])/2,pt=Q-mt,D=pt-5,x="center"):u==="bottom"?(R=(d[1][0]+d[2][0])/2,Q=(d[1][1]+d[2][1])/2,pt=Q+mt,D=pt+5,x="center"):u==="rightTop"?(R=e==="horizontal"?d[3][0]:d[1][0],Q=e==="horizontal"?d[3][1]:d[1][1],e==="horizontal"?(pt=Q-mt,D=pt-5,x="center"):(rt=R+mt,T=rt+5,x="top")):u==="rightBottom"?(R=d[2][0],Q=d[2][1],e==="horizontal"?(pt=Q+mt,D=pt+5,x="center"):(rt=R+mt,T=rt+5,x="bottom")):u==="leftTop"?(R=d[0][0],Q=e==="horizontal"?d[0][1]:d[1][1],e==="horizontal"?(pt=Q-mt,D=pt-5,x="center"):(rt=R-mt,T=rt-5,x="right")):u==="leftBottom"?(R=e==="horizontal"?d[1][0]:d[3][0],Q=e==="horizontal"?d[1][1]:d[2][1],e==="horizontal"?(pt=Q+mt,D=pt+5,x="center"):(rt=R-mt,T=rt-5,x="right")):(R=(d[1][0]+d[2][0])/2,Q=(d[1][1]+d[2][1])/2,e==="horizontal"?(pt=Q+mt,D=pt+5,x="center"):(rt=R+mt,T=rt+5,x="left")),e==="horizontal"?(rt=R,T=rt):(pt=Q,D=pt),w=[[R,Q],[rt,pt]]}v.label={linePoints:w,x:T,y:D,verticalAlign:"middle",textAlign:x,inside:m}})}function Ac(a,r){a.eachSeriesByType("funnel",function(e){var n=e.getData(),o=n.mapDimension("value"),s=e.get("sort"),u=Qg(e,r),c=e.get("orient"),v=u.width,d=u.height,m=Zn(n,s),x=u.x,T=u.y,D=c==="horizontal"?[Object(Le.p)(e.get("minSize"),d),Object(Le.p)(e.get("maxSize"),d)]:[Object(Le.p)(e.get("minSize"),v),Object(Le.p)(e.get("maxSize"),v)],w=n.getDataExtent(o),R=e.get("min"),Q=e.get("max");R==null&&(R=Math.min(w[0],0)),Q==null&&(Q=w[1]);var rt=e.get("funnelAlign"),pt=e.get("gap"),mt=c==="horizontal"?v:d,Dt=(mt-pt*(n.count()-1))/n.count(),Lt=function(xe,_e){if(c==="horizontal"){var Ne=n.get(o,xe)||0,Je=Object(Le.l)(Ne,[R,Q],D,!0),Xe=void 0;switch(rt){case"top":Xe=T;break;case"center":Xe=T+(d-Je)/2;break;case"bottom":Xe=T+(d-Je);break}return[[_e,Xe],[_e,Xe+Je]]}var or=n.get(o,xe)||0,Tr=Object(Le.l)(or,[R,Q],D,!0),Mr;switch(rt){case"left":Mr=x;break;case"center":Mr=x+(v-Tr)/2;break;case"right":Mr=x+v-Tr;break}return[[Mr,_e],[Mr+Tr,_e]]};s==="ascending"&&(Dt=-Dt,pt=-pt,c==="horizontal"?x+=v:T+=d,m=m.reverse());for(var wt=0;wt<m.length;wt++){var Nt=m[wt],Gt=m[wt+1],Kt=n.getItemModel(Nt);if(c==="horizontal"){var te=Kt.get(["itemStyle","width"]);te==null?te=Dt:(te=Object(Le.p)(te,v),s==="ascending"&&(te=-te));var ne=Lt(Nt,x),pe=Lt(Gt,x+te);x+=te+pt,n.setItemLayout(Nt,{points:ne.concat(pe.slice().reverse())})}else{var me=Kt.get(["itemStyle","height"]);me==null?me=Dt:(me=Object(Le.p)(me,d),s==="ascending"&&(me=-me));var ne=Lt(Nt,T),pe=Lt(Gt,T+me);T+=me+pt,n.setItemLayout(Nt,{points:ne.concat(pe.slice().reverse())})}}Jg(n)})}function $g(a){a.registerChartView(Jl),a.registerSeriesModel(Hv),a.registerLayout(Ac),a.registerProcessor(Is("funnel"))}var qg=.3,tm=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._dataGroup=new Pr.a,e._initialized=!1,e}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._dataGroup,c=e.getData(),v=this._data,d=e.coordinateSystem,m=d.dimensions,x=Xv(e);c.diff(v).add(T).update(D).remove(w).execute();function T(Q){var rt=kv(c,u,Q,m,d);Mc(rt,c,Q,x)}function D(Q,rt){var pt=v.getItemGraphicEl(rt),mt=Wv(c,Q,m,d);c.setItemGraphicEl(Q,pt),cr.h(pt,{shape:{points:mt}},e,Q),Object(cr.g)(pt),Mc(pt,c,Q,x)}function w(Q){var rt=v.getItemGraphicEl(Q);u.remove(rt)}if(!this._initialized){this._initialized=!0;var R=em(d,e,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(R)}this._data=c},r.prototype.incrementalPrepareRender=function(e,n,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(e,n,o){for(var s=n.getData(),u=n.coordinateSystem,c=u.dimensions,v=Xv(n),d=this._progressiveEls=[],m=e.start;m<e.end;m++){var x=kv(s,this._dataGroup,m,c,u);x.incremental=!0,Mc(x,s,m,v),d.push(x)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(Ln.a);function em(a,r,e){var n=a.model,o=a.getRect(),s=new Qr.a({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),u=n.get("layout")==="horizontal"?"width":"height";return s.setShape(u,0),cr.c(s,{shape:{width:o.width,height:o.height}},r,e),s}function Wv(a,r,e,n){for(var o=[],s=0;s<e.length;s++){var u=e[s],c=a.get(a.mapDimension(u),r);rm(c,n.getAxis(u).type)||o.push(n.dataToPoint(c,u))}return o}function kv(a,r,e,n,o){var s=Wv(a,e,n,o),u=new Vi.a({shape:{points:s},z2:10});return r.add(u),a.setItemGraphicEl(e,u),u}function Xv(a){var r=a.get("smooth",!0);return r===!0&&(r=qg),r=Object(Le.n)(r),Object(g.l)(r)&&(r=0),{smooth:r}}function Mc(a,r,e,n){a.useStyle(r.getItemVisual(e,"style")),a.style.fill=null,a.setShape("smooth",n.smooth);var o=r.getItemModel(e),s=o.getModel("emphasis");Object(ar.I)(a,o,"lineStyle"),Object(ar.J)(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function rm(a,r){return r==="category"?a==null:a==null||isNaN(a)}var nm=tm,im=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this,{useEncodeDefaulter:Object(g.c)(Dc,null,this)})},r.prototype.getRawIndicesByActiveState=function(e){var n=this.coordinateSystem,o=this.getData(),s=[];return n.eachActiveState(o,function(u,c){e===u&&s.push(o.getRawIndex(c))}),s},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(Mn.b);function Dc(a){var r=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(!!r){var e={};return Object(g.k)(r.dimensions,function(n){var o=am(n);e[n]=o}),e}}function am(a){return+a.replace("dim","")}var om=im,Ec=["lineStyle","opacity"],Zv={seriesType:"parallel",reset:function(a,r){var e=a.coordinateSystem,n={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(o,s){e.eachActiveState(s,function(u,c){var v=n[u];if(u==="normal"&&s.hasItemOption){var d=s.getItemModel(c).get(Ec,!0);d!=null&&(v=d)}var m=s.ensureUniqueItemVisual(c,"style");m.opacity=v},o.start,o.end)}}}},Yv=Zv;function sm(a){lm(a),Cc(a)}function lm(a){if(!a.parallel){var r=!1;g.k(a.series,function(e){e&&e.type==="parallel"&&(r=!0)}),r&&(a.parallel=[{}])}}function Cc(a){var r=Be.r(a.parallelAxis);g.k(r,function(e){if(!!g.A(e)){var n=e.parallelIndex||0,o=Be.r(a.parallel)[n];o&&o.parallelAxisDefault&&g.I(e,o.parallelAxisDefault,!1)}})}var um=5,fm=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this._model=e,this._api=o,this._handlers||(this._handlers={},Object(g.k)(Kv,function(s,u){o.getZr().on(u,this._handlers[u]=Object(g.c)(s,this))},this)),Object(Gn.b)(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(e,n){Object(Gn.a)(this,"_throttledDispatchExpand"),Object(g.k)(this._handlers,function(o,s){n.getZr().off(s,o)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},r.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(Object(g.m)({type:"parallelAxisExpand"},e))},r.type="parallel",r}(gn.a),Kv={mousedown:function(a){Ku(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var r=this._mouseDownPoint;if(Ku(this,"click")&&r){var e=[a.offsetX,a.offsetY],n=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2);if(n>um)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!Ku(this,"mousemove"))){var r=this._model,e=r.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),n=e.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function Ku(a,r){var e=a._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===r}var cm=fm,Pc=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(e){var n=this.option;e&&g.I(n,e,!0),this._initDimensions()},r.prototype.contains=function(e,n){var o=e.get("parallelIndex");return o!=null&&n.getComponent("parallel",o)===this},r.prototype.setAxisExpand=function(e){g.k(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){e.hasOwnProperty(n)&&(this.option[n]=e[n])},this)},r.prototype._initDimensions=function(){var e=this.dimensions=[],n=this.parallelAxisIndex=[],o=g.n(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);g.k(o,function(s){e.push("dim"+s.get("dim")),n.push(s.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}($n.a),$l=Pc,hm=function(a){Object(Pe.a)(r,a);function r(e,n,o,s,u){var c=a.call(this,e,n,o)||this;return c.type=s||"value",c.axisIndex=u,c}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(ba.a),vm=hm;function Nn(a,r,e,n,o,s){a=a||0;var u=e[1]-e[0];if(o!=null&&(o=Qi(o,[0,u])),s!=null&&(s=Math.max(s,o!=null?o:0)),n==="all"){var c=Math.abs(r[1]-r[0]);c=Qi(c,[0,u]),o=s=Qi(c,[o,s]),n=0}r[0]=Qi(r[0],e),r[1]=Qi(r[1],e);var v=Qu(r,n);r[n]+=a;var d=o||0,m=e.slice();v.sign<0?m[0]+=d:m[1]-=d,r[n]=Qi(r[n],m);var x;return x=Qu(r,n),o!=null&&(x.sign!==v.sign||x.span<o)&&(r[1-n]=r[n]+v.sign*o),x=Qu(r,n),s!=null&&x.span>s&&(r[1-n]=r[n]+x.sign*s),r}function Qu(a,r){var e=a[r]-a[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function Qi(a,r){return Math.min(r[1]!=null?r[1]:Infinity,Math.max(r[0]!=null?r[0]:-Infinity,a))}var sl=g.k,wc=Math.min,Ju=Math.max,so=Math.floor,Po=Math.ceil,na=Le.v,wo=Math.PI,ql=function(){function a(r,e,n){this.type="parallel",this._axesMap=g.f(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=r.dimensions,s=r.parallelAxisIndex;sl(o,function(u,c){var v=s[c],d=e.getComponent("parallelAxis",v),m=this._axesMap.set(u,new vm(u,di.a(d),[0,0],d.get("type"),v)),x=m.type==="category";m.onBand=x&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(r,e){this._updateAxesFromSeries(this._model,r)},a.prototype.containPoint=function(r){var e=this._makeLayoutInfo(),n=e.axisBase,o=e.layoutBase,s=e.pixelDimIndex,u=r[1-s],c=r[s];return u>=n&&u<=n+e.axisLength&&c>=o&&c<=o+e.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(r,e){e.eachSeries(function(n){if(!!r.contains(n,e)){var o=n.getData();sl(this.dimensions,function(s){var u=this._axesMap.get(s);u.scale.unionExtentFromData(o,o.mapDimension(s)),di.i(u.scale,u.model)},this)}},this)},a.prototype.resize=function(r,e){this._rect=kr.g(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var r=this._model,e=this._rect,n=["x","y"],o=["width","height"],s=r.get("layout"),u=s==="horizontal"?0:1,c=e[o[u]],v=[0,c],d=this.dimensions.length,m=tu(r.get("axisExpandWidth"),v),x=tu(r.get("axisExpandCount")||0,[0,d]),T=r.get("axisExpandable")&&d>3&&d>x&&x>1&&m>0&&c>0,D=r.get("axisExpandWindow"),w;if(D)w=tu(D[1]-D[0],v),D[1]=D[0]+w;else{w=tu(m*(x-1),v);var R=r.get("axisExpandCenter")||so(d/2);D=[m*R-w/2],D[1]=D[0]+w}var Q=(c-w)/(d-x);Q<3&&(Q=0);var rt=[so(na(D[0]/m,1))+1,Po(na(D[1]/m,1))-1],pt=Q/m*D[0];return{layout:s,pixelDimIndex:u,layoutBase:e[n[u]],layoutLength:c,axisBase:e[n[1-u]],axisLength:e[o[1-u]],axisExpandable:T,axisExpandWidth:m,axisCollapseWidth:Q,axisExpandWindow:D,axisCount:d,winInnerIndices:rt,axisExpandWindow0Pos:pt}},a.prototype._layoutAxes=function(){var r=this._rect,e=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),s=o.layout;e.each(function(u){var c=[0,o.axisLength],v=u.inverse?1:0;u.setExtent(c[v],c[1-v])}),sl(n,function(u,c){var v=(o.axisExpandable?dm:Qv)(c,o),d={horizontal:{x:v.position,y:o.axisLength},vertical:{x:0,y:v.position}},m={horizontal:wo/2,vertical:0},x=[d[s].x+r.x,d[s].y+r.y],T=m[s],D=xn.c();xn.g(D,D,T),xn.i(D,D,x),this._axesLayout[u]={position:x,rotation:T,transform:D,axisNameAvailableWidth:v.axisNameAvailableWidth,axisLabelShow:v.axisLabelShow,nameTruncateMaxWidth:v.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(r){return this._axesMap.get(r)},a.prototype.dataToPoint=function(r,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(r),e)},a.prototype.eachActiveState=function(r,e,n,o){n==null&&(n=0),o==null&&(o=r.count());var s=this._axesMap,u=this.dimensions,c=[],v=[];g.k(u,function(Q){c.push(r.mapDimension(Q)),v.push(s.get(Q).model)});for(var d=this.hasAxisBrushed(),m=n;m<o;m++){var x=void 0;if(!d)x="normal";else{x="active";for(var T=r.getValues(c,m),D=0,w=u.length;D<w;D++){var R=v[D].getActiveState(T[D]);if(R==="inactive"){x="inactive";break}}}e(x,m)}},a.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,e=this._axesMap,n=!1,o=0,s=r.length;o<s;o++)e.get(r[o]).model.getActiveState()!=="normal"&&(n=!0);return n},a.prototype.axisCoordToPoint=function(r,e){var n=this._axesLayout[e];return _r.applyTransform([r,0],n.transform)},a.prototype.getAxisLayout=function(r){return g.d(this._axesLayout[r])},a.prototype.getSlidedAxisExpandWindow=function(r){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,o=e.axisExpandWindow.slice(),s=o[1]-o[0],u=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:o};var c=r[n]-e.layoutBase-e.axisExpandWindow0Pos,v,d="slide",m=e.axisCollapseWidth,x=this._model.get("axisExpandSlideTriggerArea"),T=x[0]!=null;if(m)T&&m&&c<s*x[0]?(d="jump",v=c-s*x[2]):T&&m&&c>s*(1-x[0])?(d="jump",v=c-s*(1-x[2])):(v=c-s*x[1])>=0&&(v=c-s*(1-x[1]))<=0&&(v=0),v*=e.axisExpandWidth/m,v?Nn(v,o,u,"all"):d="none";else{var D=o[1]-o[0],w=u[1]*c/D;o=[Ju(0,w-D/2)],o[1]=wc(u[1],o[0]+D),o[0]=o[1]-D}return{axisExpandWindow:o,behavior:d}},a}();function tu(a,r){return wc(Ju(a,r[0]),r[1])}function Qv(a,r){var e=r.layoutLength/(r.axisCount-1);return{position:e*a,axisNameAvailableWidth:e,axisLabelShow:!0}}function dm(a,r){var e=r.layoutLength,n=r.axisExpandWidth,o=r.axisCount,s=r.axisCollapseWidth,u=r.winInnerIndices,c,v=s,d=!1,m;return a<u[0]?(c=a*s,m=s):a<=u[1]?(c=r.axisExpandWindow0Pos+a*n-r.axisExpandWindow[0],v=n,d=!0):(c=e-(o-1-a)*s,m=s),{position:c,axisNameAvailableWidth:v,axisLabelShow:d,nameTruncateMaxWidth:m}}var pm=ql;function Jv(a,r){var e=[];return a.eachComponent("parallel",function(n,o){var s=new pm(n,a,r);s.name="parallel_"+o,s.resize(n,r),n.coordinateSystem=s,s.model=n,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var o=n.getReferringComponents("parallel",Be.b).models[0];n.coordinateSystem=o.coordinateSystem}}),e}var $v={create:Jv},gm=$v,Lc=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.activeIntervals=[],e}return r.prototype.getAreaSelectStyle=function(){return Object(hv.a)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(e){var n=this.activeIntervals=g.d(e);if(n)for(var o=n.length-1;o>=0;o--)Le.c(n[o])},r.prototype.getActiveState=function(e){var n=this.activeIntervals;if(!n.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(n.length===1){var o=n[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var s=0,u=n.length;s<u;s++)if(n[s][0]<=e&&e<=n[s][1])return"active";return"inactive"},r}($n.a);g.K(Lc,Rs.a);var qv=Lc,vs=!0,eu=Math.min,ds=Math.max,mm=Math.pow,ym=1e4,xm=6,_m=6,td="globalPan",ed={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},rd={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},nd={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},bm=0,Sm=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Pr.a,n._uid="brushController_"+bm++,Object(g.k)(Uc,function(o,s){this._handlers[s]=Object(g.c)(o,this)},n),n}return r.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},r.prototype._doEnableBrush=function(e){var n=this._zr;this._enableGlobalPan||_h(n,td,this._uid),Object(g.k)(this._handlers,function(o,s){n.on(s,o)}),this._brushType=e.brushType,this._brushOption=Object(g.I)(Object(g.d)(nd),e,!0)},r.prototype._doDisableBrush=function(){var e=this._zr;Mp(e,td,this._uid),Object(g.k)(this._handlers,function(n,o){e.off(o,n)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(e){if(e&&e.length){var n=this._panels={};Object(g.k)(e,function(o){n[o.panelId]=Object(g.d)(o)})}else this._panels=null;return this},r.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=n.getLocalTransform(),this},r.prototype.updateCovers=function(e){e=Object(g.H)(e,function(T){return Object(g.I)(Object(g.d)(nd),T,!0)});var n="\0-brush-index-",o=this._covers,s=this._covers=[],u=this,c=this._creatingCover;return new ea.a(o,e,d,v).add(m).update(m).remove(x).execute(),this;function v(T,D){return(T.id!=null?T.id:n+D)+"-"+T.brushType}function d(T,D){return v(T.__brushOption,D)}function m(T,D){var w=e[T];if(D!=null&&o[D]===c)s[T]=o[D];else{var R=s[T]=D!=null?(o[D].__brushOption=w,o[D]):id(u,Ic(u,w));Rc(u,R)}}function x(T){o[T]!==c&&u.group.remove(o[T])}},r.prototype.unmount=function(){return this.enableBrush(!1),jc(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Df.a);function Ic(a,r){var e=Io[r.brushType].createCover(a,r);return e.__brushOption=r,ad(e,r),a.group.add(e),e}function id(a,r){var e=Nc(r);return e.endCreating&&(e.endCreating(a,r),ad(r,r.__brushOption)),r}function Lo(a,r){var e=r.__brushOption;Nc(r).updateCoverShape(a,r,e.range,e)}function ad(a,r){var e=r.z;e==null&&(e=ym),a.traverse(function(n){n.z=e,n.z2=e})}function Rc(a,r){Nc(r).updateCommon(a,r),Lo(a,r)}function Nc(a){return Io[a.__brushOption.brushType]}function $u(a,r,e){var n=a._panels;if(!n)return vs;var o,s=a._transform;return Object(g.k)(n,function(u){u.isTargetByCursor(r,e,s)&&(o=u)}),o}function ps(a,r){var e=a._panels;if(!e)return vs;var n=r.__brushOption.panelId;return n!=null?e[n]:vs}function jc(a){var r=a._covers,e=r.length;return Object(g.k)(r,function(n){a.group.remove(n)},a),r.length=0,!!e}function gs(a,r){var e=Object(g.H)(a._covers,function(n){var o=n.__brushOption,s=Object(g.d)(o.range);return{brushType:o.brushType,panelId:o.panelId,range:s}});a.trigger("brush",{areas:e,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function Tm(a){var r=a._track;if(!r.length)return!1;var e=r[r.length-1],n=r[0],o=e[0]-n[0],s=e[1]-n[1],u=mm(o*o+s*s,.5);return u>xm}function od(a){var r=a.length-1;return r<0&&(r=0),[a[0],a[r]]}function Bc(a,r,e,n){var o=new Pr.a;return o.add(new Qr.a({name:"main",style:zc(e),silent:!0,draggable:!0,cursor:"move",drift:Object(g.h)(ld,a,r,o,["n","s","w","e"]),ondragend:Object(g.h)(gs,r,{isEnd:!0})})),Object(g.k)(n,function(s){o.add(new Qr.a({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Object(g.h)(ld,a,r,o,s),ondragend:Object(g.h)(gs,r,{isEnd:!0})}))}),o}function Fc(a,r,e,n){var o=n.brushStyle.lineWidth||0,s=ds(o,_m),u=e[0][0],c=e[1][0],v=u-o/2,d=c-o/2,m=e[0][1],x=e[1][1],T=m-s+o/2,D=x-s+o/2,w=m-u,R=x-c,Q=w+o,rt=R+o;Ua(a,r,"main",u,c,w,R),n.transformable&&(Ua(a,r,"w",v,d,s,rt),Ua(a,r,"e",T,d,s,rt),Ua(a,r,"n",v,d,Q,s),Ua(a,r,"s",v,D,Q,s),Ua(a,r,"nw",v,d,s,s),Ua(a,r,"ne",T,d,s,s),Ua(a,r,"sw",v,D,s,s),Ua(a,r,"se",T,D,s,s))}function Ga(a,r){var e=r.__brushOption,n=e.transformable,o=r.childAt(0);o.useStyle(zc(e)),o.attr({silent:!n,cursor:n?"move":"default"}),Object(g.k)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var u=r.childOfName(s.join("")),c=s.length===1?Vc(a,s[0]):Am(a,s);u&&u.attr({silent:!n,invisible:!n,cursor:n?rd[c]+"-resize":null})})}function Ua(a,r,e,n,o,s,u){var c=r.childOfName(e);c&&c.setShape(fd(ai(a,r,[[n,o],[n+s,o+u]])))}function zc(a){return Object(g.i)({strokeNoScale:!0},a.brushStyle)}function sd(a,r,e,n){var o=[eu(a,e),eu(r,n)],s=[ds(a,e),ds(r,n)];return[[o[0],s[0]],[o[1],s[1]]]}function Om(a){return _r.getTransform(a.group)}function Vc(a,r){var e={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=_r.transformDirection(e[r],Om(a));return n[o]}function Am(a,r){var e=[Vc(a,r[0]),Vc(a,r[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function ld(a,r,e,n,o,s){var u=e.__brushOption,c=a.toRectRange(u.range),v=ud(r,o,s);Object(g.k)(n,function(d){var m=ed[d];c[m[0]][m[1]]+=v[m[0]]}),u.range=a.fromRectRange(sd(c[0][0],c[1][0],c[0][1],c[1][1])),Rc(r,e),gs(r,{isEnd:!1})}function ru(a,r,e,n){var o=r.__brushOption.range,s=ud(a,e,n);Object(g.k)(o,function(u){u[0]+=s[0],u[1]+=s[1]}),Rc(a,r),gs(a,{isEnd:!1})}function ud(a,r,e){var n=a.group,o=n.transformCoordToLocal(r,e),s=n.transformCoordToLocal(0,0);return[o[0]-s[0],o[1]-s[1]]}function ai(a,r,e){var n=ps(a,r);return n&&n!==vs?n.clipPath(e,a._transform):Object(g.d)(e)}function fd(a){var r=eu(a[0][0],a[1][0]),e=eu(a[0][1],a[1][1]),n=ds(a[0][0],a[1][0]),o=ds(a[0][1],a[1][1]);return{x:r,y:e,width:n-r,height:o-e}}function cd(a,r,e){if(!(!a._brushType||Mm(a,r.offsetX,r.offsetY))){var n=a._zr,o=a._covers,s=$u(a,r,e);if(!a._dragging)for(var u=0;u<o.length;u++){var c=o[u].__brushOption;if(s&&(s===vs||c.panelId===s.panelId)&&Io[c.brushType].contain(o[u],e[0],e[1]))return}s&&n.setCursorStyle("crosshair")}}function qu(a){var r=a.event;r.preventDefault&&r.preventDefault()}function Gc(a,r,e){return a.childOfName("main").contain(r,e)}function tf(a,r,e,n){var o=a._creatingCover,s=a._creatingPanel,u=a._brushOption,c;if(a._track.push(e.slice()),Tm(a)||o){if(s&&!o){u.brushMode==="single"&&jc(a);var v=Object(g.d)(u);v.brushType=mi(v.brushType,s),v.panelId=s===vs?null:s.panelId,o=a._creatingCover=Ic(a,v),a._covers.push(o)}if(o){var d=Io[mi(a._brushType,s)],m=o.__brushOption;m.range=d.getCreatingRange(ai(a,o,a._track)),n&&(id(a,o),d.updateCommon(a,o)),Lo(a,o),c={isEnd:n}}}else n&&u.brushMode==="single"&&u.removeOnClick&&$u(a,r,e)&&jc(a)&&(c={isEnd:n,removeOnClick:!0});return c}function mi(a,r){return a==="auto"?r.defaultBrushType:a}var Uc={mousedown:function(a){if(this._dragging)hd(this,a);else if(!a.target||!a.target.draggable){qu(a);var r=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var e=this._creatingPanel=$u(this,a,r);e&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(a){var r=a.offsetX,e=a.offsetY,n=this.group.transformCoordToLocal(r,e);if(cd(this,a,n),this._dragging){qu(a);var o=tf(this,a,n,!1);o&&gs(this,o)}},mouseup:function(a){hd(this,a)}};function hd(a,r){if(a._dragging){qu(r);var e=r.offsetX,n=r.offsetY,o=a.group.transformCoordToLocal(e,n),s=tf(a,r,o,!0);a._dragging=!1,a._track=[],a._creatingCover=null,s&&gs(a,s)}}function Mm(a,r,e){var n=a._zr;return r<0||r>n.getWidth()||e<0||e>n.getHeight()}var Io={lineX:ll(0),lineY:ll(1),rect:{createCover:function(a,r){function e(n){return n}return Bc({toRectRange:e,fromRectRange:e},a,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var r=od(a);return sd(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(a,r,e,n){Fc(a,r,e,n)},updateCommon:Ga,contain:Gc},polygon:{createCover:function(a,r){var e=new Pr.a;return e.add(new Vi.a({name:"main",style:zc(r),silent:!0})),e},getCreatingRange:function(a){return a},endCreating:function(a,r){r.remove(r.childAt(0)),r.add(new _n.a({name:"main",draggable:!0,drift:Object(g.h)(ru,a,r),ondragend:Object(g.h)(gs,a,{isEnd:!0})}))},updateCoverShape:function(a,r,e,n){r.childAt(0).setShape({points:ai(a,r,e)})},updateCommon:Ga,contain:Gc}};function ll(a){return{createCover:function(r,e){return Bc({toRectRange:function(n){var o=[n,[0,100]];return a&&o.reverse(),o},fromRectRange:function(n){return n[a]}},r,e,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(r){var e=od(r),n=eu(e[0][a],e[1][a]),o=ds(e[0][a],e[1][a]);return[n,o]},updateCoverShape:function(r,e,n,o){var s,u=ps(r,e);if(u!==vs&&u.getLinearBrushOtherExtent)s=u.getLinearBrushOtherExtent(a);else{var c=r._zr;s=[0,[c.getWidth(),c.getHeight()][1-a]]}var v=[n,s];a&&v.reverse(),Fc(r,e,v,o)},updateCommon:Ga,contain:Gc}}var ki=Sm;function Hc(a){return a=Wc(a),function(r){return _r.clipPointsByRect(r,a)}}function vd(a,r){return a=Wc(a),function(e){var n=r!=null?r:e,o=n?a.width:a.height,s=n?a.x:a.y;return[s,s+(o||0)]}}function dd(a,r,e){var n=Wc(a);return function(o,s){return n.contain(s[0],s[1])&&!Hs(o,r,e)}}function Wc(a){return Ar.a.create(a)}var ef=["axisLine","axisTickLabel","axisName"],Dm=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){a.prototype.init.apply(this,arguments),(this._brushController=new ki(n.getZr())).on("brush",g.c(this._onBrush,this))},r.prototype.render=function(e,n,o,s){if(!Em(e,n,s)){this.axisModel=e,this.api=o,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Pr.a,this.group.add(this._axisGroup),!!e.get("show")){var c=Cm(e,n),v=c.coordinateSystem,d=e.getAreaSelectStyle(),m=d.width,x=e.axis.dim,T=v.getAxisLayout(x),D=g.m({strokeContainThreshold:m},T),w=new $a(e,D);g.k(ef,w.add,w),this._axisGroup.add(w.getGroup()),this._refreshBrushController(D,d,e,c,m,o),_r.groupTransition(u,this._axisGroup,e)}}},r.prototype._refreshBrushController=function(e,n,o,s,u,c){var v=o.axis.getExtent(),d=v[1]-v[0],m=Math.min(30,Math.abs(d)*.1),x=Ar.a.create({x:v[0],y:-u/2,width:d,height:u});x.x-=m,x.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:Hc(x),isTargetByCursor:dd(x,c,s),getLinearBrushOtherExtent:vd(x,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(rf(o))},r.prototype._onBrush=function(e){var n=e.areas,o=this.axisModel,s=o.axis,u=g.H(n,function(c){return[s.coordToData(c.range[0],!0),s.coordToData(c.range[1],!0)]});(!o.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:u})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(gn.a);function Em(a,r,e){return e&&e.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:e})[0]===a}function rf(a){var r=a.axis;return g.H(a.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(e[0],!0),r.dataToCoord(e[1],!0)]}})}function Cm(a,r){return r.getComponent("parallel",a.get("parallelIndex"))}var Pm=Dm,wm={type:"axisAreaSelect",event:"axisAreaSelected"};function Lm(a){a.registerAction(wm,function(r,e){e.eachComponent({mainType:"parallelAxis",query:r},function(n){n.axis.model.setActiveIntervals(r.intervals)})}),a.registerAction("parallelAxisExpand",function(r,e){e.eachComponent({mainType:"parallel",query:r},function(n){n.setAxisExpand(r)})})}var Im={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function pd(a){a.registerComponentView(cm),a.registerComponentModel($l),a.registerCoordinateSystem("parallel",gm),a.registerPreprocessor(sm),a.registerComponentModel(qv),a.registerComponentView(Pm),Ns(a,"parallel",qv,Im),Lm(a)}function kc(a){Object(B.a)(pd),a.registerChartView(nm),a.registerSeriesModel(om),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,Yv)}var Rm=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),Nm=function(a){Object(Pe.a)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultShape=function(){return new Rm},r.prototype.buildPath=function(e,n){var o=n.extent;e.moveTo(n.x1,n.y1),e.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(e.lineTo(n.x2+o,n.y2),e.bezierCurveTo(n.cpx2+o,n.cpy2,n.cpx1+o,n.cpy1,n.x1+o,n.y1)):(e.lineTo(n.x2,n.y2+o),e.bezierCurveTo(n.cpx2,n.cpy2+o,n.cpx1,n.cpy1+o,n.x1,n.y1+o)),e.closePath()},r.prototype.highlight=function(){Object(ar.r)(this)},r.prototype.downplay=function(){Object(ar.C)(this)},r}(ot.b),jm=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._focusAdjacencyDisabled=!1,e}return r.prototype.render=function(e,n,o){var s=this,u=e.getGraph(),c=this.group,v=e.layoutInfo,d=v.width,m=v.height,x=e.getData(),T=e.getData("edge"),D=e.get("orient");this._model=e,c.removeAll(),c.x=v.x,c.y=v.y,u.eachEdge(function(w){var R=new Nm,Q=Object(br.a)(R);Q.dataIndex=w.dataIndex,Q.seriesIndex=e.seriesIndex,Q.dataType="edge";var rt=w.getModel(),pt=rt.getModel("lineStyle"),mt=pt.get("curveness"),Dt=w.node1.getLayout(),Lt=w.node1.getModel(),wt=Lt.get("localX"),Nt=Lt.get("localY"),Gt=w.node2.getLayout(),Kt=w.node2.getModel(),te=Kt.get("localX"),ne=Kt.get("localY"),pe=w.getLayout(),me,xe,_e,Ne,Je,Xe,or,Tr;switch(R.shape.extent=Math.max(1,pe.dy),R.shape.orient=D,D==="vertical"?(me=(wt!=null?wt*d:Dt.x)+pe.sy,xe=(Nt!=null?Nt*m:Dt.y)+Dt.dy,_e=(te!=null?te*d:Gt.x)+pe.ty,Ne=ne!=null?ne*m:Gt.y,Je=me,Xe=xe*(1-mt)+Ne*mt,or=_e,Tr=xe*mt+Ne*(1-mt)):(me=(wt!=null?wt*d:Dt.x)+Dt.dx,xe=(Nt!=null?Nt*m:Dt.y)+pe.sy,_e=te!=null?te*d:Gt.x,Ne=(ne!=null?ne*m:Gt.y)+pe.ty,Je=me*(1-mt)+_e*mt,Xe=xe,or=me*mt+_e*(1-mt),Tr=Ne),R.setShape({x1:me,y1:xe,x2:_e,y2:Ne,cpx1:Je,cpy1:Xe,cpx2:or,cpy2:Tr}),R.useStyle(pt.getItemStyle()),R.style.fill){case"source":R.style.fill=w.node1.getVisual("color"),R.style.decal=w.node1.getVisual("style").decal;break;case"target":R.style.fill=w.node2.getVisual("color"),R.style.decal=w.node2.getVisual("style").decal;break;case"gradient":var Mr=w.node1.getVisual("color"),Ur=w.node2.getVisual("color");Object(g.C)(Mr)&&Object(g.C)(Ur)&&(R.style.fill=new co.a(0,0,+(D==="horizontal"),+(D==="vertical"),[{color:Mr,offset:0},{color:Ur,offset:1}]))}var Yr=rt.getModel("emphasis");Object(ar.I)(R,rt,"lineStyle",function(Yn){return Yn.getItemStyle()}),c.add(R),T.setItemGraphicEl(w.dataIndex,R);var fn=Yr.get("focus");Object(ar.J)(R,fn==="adjacency"?w.getAdjacentDataIndices():fn,Yr.get("blurScope"),Yr.get("disabled")),Object(br.a)(R).dataType="edge"}),u.eachNode(function(w){var R=w.getLayout(),Q=w.getModel(),rt=Q.get("localX"),pt=Q.get("localY"),mt=Q.getModel("emphasis"),Dt=new Qr.a({shape:{x:rt!=null?rt*d:R.x,y:pt!=null?pt*m:R.y,width:R.dx,height:R.dy},style:Q.getModel("itemStyle").getItemStyle(),z2:10});Object(xr.g)(Dt,Object(xr.e)(Q),{labelFetcher:e,labelDataIndex:w.dataIndex,defaultText:w.id}),Dt.disableLabelAnimation=!0,Dt.setStyle("fill",w.getVisual("color")),Dt.setStyle("decal",w.getVisual("style").decal),Object(ar.I)(Dt,Q),c.add(Dt),x.setItemGraphicEl(w.dataIndex,Dt),Object(br.a)(Dt).dataType="node";var Lt=mt.get("focus");Object(ar.J)(Dt,Lt==="adjacency"?w.getAdjacentDataIndices():Lt,mt.get("blurScope"),mt.get("disabled"))}),x.eachItemGraphicEl(function(w,R){var Q=x.getItemModel(R);Q.get("draggable")&&(w.drift=function(rt,pt){s._focusAdjacencyDisabled=!0,this.shape.x+=rt,this.shape.y+=pt,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:x.getRawIndex(R),localX:this.shape.x/d,localY:this.shape.y/m})},w.ondragend=function(){s._focusAdjacencyDisabled=!1},w.draggable=!0,w.cursor="move")}),!this._data&&e.isAnimationEnabled()&&c.setClipPath(gd(c.getBoundingRect(),e,function(){c.removeClipPath()})),this._data=e.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(Ln.a);function gd(a,r,e){var n=new Qr.a({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return cr.c(n,{shape:{width:a.width+20}},r,e),n}var Xc=jm,Bm=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){var o=e.edges||e.links,s=e.data||e.nodes,u=e.levels;this.levelModels=[];for(var c=this.levelModels,v=0;v<u.length;v++)u[v].depth!=null&&u[v].depth>=0&&(c[u[v].depth]=new fi.a(u[v],this,n));if(s&&o){var d=Uv(s,o,this,!0,m);return d.data}function m(x,T){x.wrapMethod("getItemModel",function(D,w){var R=D.parentModel,Q=R.getData().getItemLayout(w);if(Q){var rt=Q.depth,pt=R.levelModels[rt];pt&&(D.parentModel=pt)}return D}),T.wrapMethod("getItemModel",function(D,w){var R=D.parentModel,Q=R.getGraph().getEdgeByIndex(w),rt=Q.node1.getLayout();if(rt){var pt=rt.depth,mt=R.levelModels[pt];mt&&(D.parentModel=mt)}return D})}},r.prototype.setNodePosition=function(e,n){var o=this.option.data||this.option.nodes,s=o[e];s.localX=n[0],s.localY=n[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(e,n,o){function s(D){return isNaN(D)||D==null}if(o==="edge"){var u=this.getDataParams(e,o),c=u.data,v=u.value,d=c.source+" -- "+c.target;return Object(Xn.c)("nameValue",{name:d,value:v,noValue:s(v)})}else{var m=this.getGraph().getNodeByIndex(e),x=m.getLayout().value,T=this.getDataParams(e,o).data.name;return Object(Xn.c)("nameValue",{name:T!=null?T+"":null,value:x,noValue:s(x)})}},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(e,n){var o=a.prototype.getDataParams.call(this,e,n);if(o.value==null&&n==="node"){var s=this.getGraph().getNodeByIndex(e),u=s.getLayout().value;o.value=u}return o},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(Mn.b),Fm=Bm;function zm(a,r){a.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),o=e.get("nodeGap"),s=t(e,r);e.layoutInfo=s;var u=s.width,c=s.height,v=e.getGraph(),d=v.nodes,m=v.edges;l(d);var x=g.n(d,function(R){return R.getLayout().value===0}),T=x.length!==0?0:e.get("layoutIterations"),D=e.get("orient"),w=e.get("nodeAlign");i(d,m,n,o,u,c,T,D,w)})}function t(a,r){return kr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function i(a,r,e,n,o,s,u,c,v){f(a,r,e,o,s,c,v),S(a,r,s,o,n,u,c),ce(a,c)}function l(a){g.k(a,function(r){var e=Jt(r.outEdges,ee),n=Jt(r.inEdges,ee),o=r.getValue()||0,s=Math.max(e,n,o);r.setLayout({value:s},!0)})}function f(a,r,e,n,o,s,u){for(var c=[],v=[],d=[],m=[],x=0,T=0;T<r.length;T++)c[T]=1;for(var T=0;T<a.length;T++)v[T]=a[T].inEdges.length,v[T]===0&&d.push(a[T]);for(var D=-1;d.length;){for(var w=0;w<d.length;w++){var R=d[w],Q=R.hostGraph.data.getRawDataItem(R.dataIndex),rt=Q.depth!=null&&Q.depth>=0;rt&&Q.depth>D&&(D=Q.depth),R.setLayout({depth:rt?Q.depth:x},!0),s==="vertical"?R.setLayout({dy:e},!0):R.setLayout({dx:e},!0);for(var pt=0;pt<R.outEdges.length;pt++){var mt=R.outEdges[pt],Dt=r.indexOf(mt);c[Dt]=0;var Lt=mt.node2,wt=a.indexOf(Lt);--v[wt]==0&&m.indexOf(Lt)<0&&m.push(Lt)}}++x,d=m,m=[]}for(var T=0;T<c.length;T++)if(c[T]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var Nt=D>x-1?D:x-1;u&&u!=="left"&&p(a,u,s,Nt);var Gt=s==="vertical"?(o-e)/Nt:(n-e)/Nt;_(a,Gt,s)}function h(a){var r=a.hostGraph.data.getRawDataItem(a.dataIndex);return r.depth!=null&&r.depth>=0}function p(a,r,e,n){if(r==="right"){for(var o=[],s=a,u=0;s.length;){for(var c=0;c<s.length;c++){var v=s[c];v.setLayout({skNodeHeight:u},!0);for(var d=0;d<v.inEdges.length;d++){var m=v.inEdges[d];o.indexOf(m.node1)<0&&o.push(m.node1)}}s=o,o=[],++u}g.k(a,function(x){h(x)||x.setLayout({depth:Math.max(0,n-x.getLayout().skNodeHeight)},!0)})}else r==="justify"&&y(a,n)}function y(a,r){g.k(a,function(e){!h(e)&&!e.outEdges.length&&e.setLayout({depth:r},!0)})}function _(a,r,e){g.k(a,function(n){var o=n.getLayout().depth*r;e==="vertical"?n.setLayout({y:o},!0):n.setLayout({x:o},!0)})}function S(a,r,e,n,o,s,u){var c=P(a,u);j(c,r,e,n,o,u),tt(c,o,e,n,u);for(var v=1;s>0;s--)v*=.99,_t(c,v,u),tt(c,o,e,n,u),$t(c,v,u),tt(c,o,e,n,u)}function P(a,r){var e=[],n=r==="vertical"?"y":"x",o=Object(Be.j)(a,function(s){return s.getLayout()[n]});return o.keys.sort(function(s,u){return s-u}),g.k(o.keys,function(s){e.push(o.buckets.get(s))}),e}function j(a,r,e,n,o,s){var u=Infinity;g.k(a,function(c){var v=c.length,d=0;g.k(c,function(x){d+=x.getLayout().value});var m=s==="vertical"?(n-(v-1)*o)/d:(e-(v-1)*o)/d;m<u&&(u=m)}),g.k(a,function(c){g.k(c,function(v,d){var m=v.getLayout().value*u;s==="vertical"?(v.setLayout({x:d},!0),v.setLayout({dx:m},!0)):(v.setLayout({y:d},!0),v.setLayout({dy:m},!0))})}),g.k(r,function(c){var v=+c.getValue()*u;c.setLayout({dy:v},!0)})}function tt(a,r,e,n,o){var s=o==="vertical"?"x":"y";g.k(a,function(u){u.sort(function(R,Q){return R.getLayout()[s]-Q.getLayout()[s]});for(var c,v,d,m=0,x=u.length,T=o==="vertical"?"dx":"dy",D=0;D<x;D++)v=u[D],d=m-v.getLayout()[s],d>0&&(c=v.getLayout()[s]+d,o==="vertical"?v.setLayout({x:c},!0):v.setLayout({y:c},!0)),m=v.getLayout()[s]+v.getLayout()[T]+r;var w=o==="vertical"?n:e;if(d=m-r-w,d>0){c=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:c},!0):v.setLayout({y:c},!0),m=c;for(var D=x-2;D>=0;--D)v=u[D],d=v.getLayout()[s]+v.getLayout()[T]+r-m,d>0&&(c=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:c},!0):v.setLayout({y:c},!0)),m=v.getLayout()[s]}})}function _t(a,r,e){g.k(a.slice().reverse(),function(n){g.k(n,function(o){if(o.outEdges.length){var s=Jt(o.outEdges,xt,e)/Jt(o.outEdges,ee);if(isNaN(s)){var u=o.outEdges.length;s=u?Jt(o.outEdges,Et,e)/u:0}if(e==="vertical"){var c=o.getLayout().x+(s-kt(o,e))*r;o.setLayout({x:c},!0)}else{var v=o.getLayout().y+(s-kt(o,e))*r;o.setLayout({y:v},!0)}}})})}function xt(a,r){return kt(a.node2,r)*a.getValue()}function Et(a,r){return kt(a.node2,r)}function Pt(a,r){return kt(a.node1,r)*a.getValue()}function Vt(a,r){return kt(a.node1,r)}function kt(a,r){return r==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function ee(a){return a.getValue()}function Jt(a,r,e){for(var n=0,o=a.length,s=-1;++s<o;){var u=+r(a[s],e);isNaN(u)||(n+=u)}return n}function $t(a,r,e){g.k(a,function(n){g.k(n,function(o){if(o.inEdges.length){var s=Jt(o.inEdges,Pt,e)/Jt(o.inEdges,ee);if(isNaN(s)){var u=o.inEdges.length;s=u?Jt(o.inEdges,Vt,e)/u:0}if(e==="vertical"){var c=o.getLayout().x+(s-kt(o,e))*r;o.setLayout({x:c},!0)}else{var v=o.getLayout().y+(s-kt(o,e))*r;o.setLayout({y:v},!0)}}})})}function ce(a,r){var e=r==="vertical"?"x":"y";g.k(a,function(n){n.outEdges.sort(function(o,s){return o.node2.getLayout()[e]-s.node2.getLayout()[e]}),n.inEdges.sort(function(o,s){return o.node1.getLayout()[e]-s.node1.getLayout()[e]})}),g.k(a,function(n){var o=0,s=0;g.k(n.outEdges,function(u){u.setLayout({sy:o},!0),o+=u.getLayout().dy}),g.k(n.inEdges,function(u){u.setLayout({ty:s},!0),s+=u.getLayout().dy})})}function de(a){a.eachSeriesByType("sankey",function(r){var e=r.getGraph(),n=e.nodes;if(n.length){var o=Infinity,s=-Infinity;g.k(n,function(u){var c=u.getLayout().value;c<o&&(o=c),c>s&&(s=c)}),g.k(n,function(u){var c=new Ai({type:"color",mappingMethod:"linear",dataExtent:[o,s],visual:r.get("color")}),v=c.mapValueToVisual(u.getLayout().value),d=u.getModel().get(["itemStyle","color"]);d!=null?(u.setVisual("color",d),u.setVisual("style",{fill:d})):(u.setVisual("color",v),u.setVisual("style",{fill:v}))})}})}function we(a){a.registerChartView(Xc),a.registerSeriesModel(Fm),a.registerLayout(zm),a.registerVisual(de),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"sankey",query:r},function(n){n.setNodePosition(r.dataIndex,[r.localX,r.localY])})})}var Ae=b("PFVZ"),Ge=function(){function a(){}return a.prototype.getInitialData=function(r,e){var n,o=e.getComponent("xAxis",this.get("xAxisIndex")),s=e.getComponent("yAxis",this.get("yAxisIndex")),u=o.get("type"),c=s.get("type"),v;u==="category"?(r.layout="horizontal",n=o.getOrdinalMeta(),v=!0):c==="category"?(r.layout="vertical",n=s.getOrdinalMeta(),v=!0):r.layout=r.layout||"horizontal";var d=["x","y"],m=r.layout==="horizontal"?0:1,x=this._baseAxisDim=d[m],T=d[1-m],D=[o,s],w=D[m].get("type"),R=D[1-m].get("type"),Q=r.data;if(Q&&v){var rt=[];g.k(Q,function(Dt,Lt){var wt;g.t(Dt)?(wt=Dt.slice(),Dt.unshift(Lt)):g.t(Dt.value)?(wt=g.m({},Dt),wt.value=wt.value.slice(),Dt.value.unshift(Lt)):wt=Dt,rt.push(wt)}),r.data=rt}var pt=this.defaultValueDimensions,mt=[{name:x,type:Object(Ae.a)(w),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:T,type:Object(Ae.a)(R),dimsDef:pt.slice()}];return Te(this,{coordDimensions:mt,dimensionsCount:pt.length+1,encodeDefaulter:g.h(ye.c,mt,this)})},a.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},a}(),rr=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(Mn.b);Object(g.K)(rr,Ge,!0);var Qe=rr,sr=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this.group,c=this._data;this._data||u.removeAll();var v=e.get("layout")==="horizontal"?1:0;s.diff(c).add(function(d){if(s.hasValue(d)){var m=s.getItemLayout(d),x=dr(m,s,d,v,!0);s.setItemGraphicEl(d,x),u.add(x)}}).update(function(d,m){var x=c.getItemGraphicEl(m);if(!s.hasValue(d)){u.remove(x);return}var T=s.getItemLayout(d);x?(Object(cr.g)(x),Sr(T,x,s,d)):x=dr(T,s,d,v),u.add(x),s.setItemGraphicEl(d,x)}).remove(function(d){var m=c.getItemGraphicEl(d);m&&u.remove(m)}).execute(),this._data=s},r.prototype.remove=function(e){var n=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(s){s&&n.remove(s)})},r.type="boxplot",r}(Ln.a),fr=function(){function a(){}return a}(),$e=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="boxplotBoxPath",n}return r.prototype.getDefaultShape=function(){return new fr},r.prototype.buildPath=function(e,n){var o=n.points,s=0;for(e.moveTo(o[s][0],o[s][1]),s++;s<4;s++)e.lineTo(o[s][0],o[s][1]);for(e.closePath();s<o.length;s++)e.moveTo(o[s][0],o[s][1]),s++,e.lineTo(o[s][0],o[s][1])},r}(ot.b);function dr(a,r,e,n,o){var s=a.ends,u=new $e({shape:{points:o?Lr(s,n,a):s}});return Sr(a,u,r,e,o),u}function Sr(a,r,e,n,o){var s=e.hostModel,u=_r[o?"initProps":"updateProps"];u(r,{shape:{points:a.ends}},s,n),r.useStyle(e.getItemVisual(n,"style")),r.style.strokeNoScale=!0,r.z2=100;var c=e.getItemModel(n),v=c.getModel("emphasis");Object(ar.I)(r,c),Object(ar.J)(r,v.get("focus"),v.get("blurScope"),v.get("disabled"))}function Lr(a,r,e){return g.H(a,function(n){return n=n.slice(),n[r]=e.initBaseline,n})}var gr=sr;function ln(a,r){}var Dr=g.k;function Tn(a){var r=un(a);Dr(r,function(e){var n=e.seriesModels;!n.length||(En(e),Dr(n,function(o,s){Cn(o,e.boxOffsetList[s],e.boxWidthList[s])}))})}function un(a){var r=[],e=[];return a.eachSeriesByType("boxplot",function(n){var o=n.getBaseAxis(),s=g.r(e,o);s<0&&(s=e.length,e[s]=o,r[s]={axis:o,seriesModels:[]}),r[s].seriesModels.push(n)}),r}function En(a){var r=a.axis,e=a.seriesModels,n=e.length,o=a.boxWidthList=[],s=a.boxOffsetList=[],u=[],c;if(r.type==="category")c=r.getBandWidth();else{var v=0;Dr(e,function(w){v=Math.max(v,w.getData().count())});var d=r.getExtent();c=Math.abs(d[1]-d[0])/v}Dr(e,function(w){var R=w.get("boxWidth");g.t(R)||(R=[R,R]),u.push([Object(Le.p)(R[0],c)||0,Object(Le.p)(R[1],c)||0])});var m=c*.8-2,x=m/n*.3,T=(m-x*(n-1))/n,D=T/2-m/2;Dr(e,function(w,R){s.push(D),D+=x+T,o.push(Math.min(Math.max(T,u[R][0]),u[R][1]))})}function Cn(a,r,e){var n=a.coordinateSystem,o=a.getData(),s=e/2,u=a.get("layout")==="horizontal"?0:1,c=1-u,v=["x","y"],d=o.mapDimension(v[u]),m=o.mapDimensionsAll(v[c]);if(d==null||m.length<5)return;for(var x=0;x<o.count();x++){var T=o.get(d,x),D=mt(T,m[2],x),w=mt(T,m[0],x),R=mt(T,m[1],x),Q=mt(T,m[3],x),rt=mt(T,m[4],x),pt=[];Dt(pt,R,!1),Dt(pt,Q,!0),pt.push(w,R,rt,Q),Lt(pt,w),Lt(pt,rt),Lt(pt,D),o.setItemLayout(x,{initBaseline:D[c],ends:pt})}function mt(wt,Nt,Gt){var Kt=o.get(Nt,Gt),te=[];te[u]=wt,te[c]=Kt;var ne;return isNaN(wt)||isNaN(Kt)?ne=[NaN,NaN]:(ne=n.dataToPoint(te),ne[u]+=r),ne}function Dt(wt,Nt,Gt){var Kt=Nt.slice(),te=Nt.slice();Kt[u]+=s,te[u]-=s,Gt?wt.push(Kt,te):wt.push(te,Kt)}function Lt(wt,Nt){var Gt=Nt.slice(),Kt=Nt.slice();Gt[u]-=s,Kt[u]+=s,wt.push(Gt,Kt)}}function nn(a,r){r=r||{};for(var e=[],n=[],o=r.boundIQR,s=o==="none"||o===0,u=0;u<a.length;u++){var c=Object(Le.c)(a[u].slice()),v=Object(Le.q)(c,.25),d=Object(Le.q)(c,.5),m=Object(Le.q)(c,.75),x=c[0],T=c[c.length-1],D=(o==null?1.5:o)*(m-v),w=s?x:Math.max(x,v-D),R=s?T:Math.min(T,m+D),Q=r.itemNameFormatter,rt=Object(g.w)(Q)?Q({value:u}):Object(g.C)(Q)?Q.replace("{value}",u+""):u+"";e.push([rt,w,v,d,m,R]);for(var pt=0;pt<c.length;pt++){var mt=c[pt];if(mt<w||mt>R){var Dt=[rt,mt];n.push(Dt)}}}return{boxData:e,outliers:n}}var $r=b("jbhN"),jn=b("BkaA"),oi={type:"echarts:boxplot",transform:function(r){var e=r.upstream;if(e.sourceFormat!==jn.c){var n="";Object($r.c)(n)}var o=nn(e.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function Mi(a){a.registerSeriesModel(Qe),a.registerChartView(gr),a.registerVisual(ln),a.registerLayout(Tn),a.registerTransform(oi)}var yi=["color","borderColor"],xi=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},r.prototype.incrementalPrepareRender=function(e,n,o){this._clear(),this._updateDrawMode(e)},r.prototype.incrementalRender=function(e,n,o,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,n):this._incrementalRenderNormal(e,n)},r.prototype.eachRendered=function(e){_r.traverseElements(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e){var n=e.getData(),o=this._data,s=this.group,u=n.getLayout("isSimpleBox"),c=e.get("clip",!0),v=e.coordinateSystem,d=v.getArea&&v.getArea();this._data||s.removeAll(),n.diff(o).add(function(m){if(n.hasValue(m)){var x=n.getItemLayout(m);if(c&&Di(d,x))return;var T=ca(x,m,!0);cr.c(T,{shape:{points:x.ends}},e,m),iu(T,n,m,u),s.add(T),n.setItemGraphicEl(m,T)}}).update(function(m,x){var T=o.getItemGraphicEl(x);if(!n.hasValue(m)){s.remove(T);return}var D=n.getItemLayout(m);if(c&&Di(d,D)){s.remove(T);return}T?(cr.h(T,{shape:{points:D.ends}},e,m),Object(cr.g)(T)):T=ca(D,m),iu(T,n,m,u),s.add(T),n.setItemGraphicEl(m,T)}).remove(function(m){var x=o.getItemGraphicEl(m);x&&s.remove(x)}).execute(),this._data=n},r.prototype._renderLarge=function(e){this._clear(),v0(e,this.group);var n=e.get("clip",!0)?pa(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(e,n){for(var o=n.getData(),s=o.getLayout("isSimpleBox"),u;(u=e.next())!=null;){var c=o.getItemLayout(u),v=ca(c,u);iu(v,o,u,s),v.incremental=!0,this.group.add(v),this._progressiveEls.push(v)}},r.prototype._incrementalRenderLarge=function(e,n){v0(n,this.group,this._progressiveEls,!0)},r.prototype.remove=function(e){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(Ln.a),nu=function(){function a(){}return a}(),hi=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="normalCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new nu},r.prototype.buildPath=function(e,n){var o=n.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))},r}(ot.b);function ca(a,r,e){var n=a.ends;return new hi({shape:{points:e?W_(n,a):n},z2:100})}function Di(a,r){for(var e=!0,n=0;n<r.ends.length;n++)if(a.contain(r.ends[n][0],r.ends[n][1])){e=!1;break}return e}function iu(a,r,e,n){var o=r.getItemModel(e);a.useStyle(r.getItemVisual(e,"style")),a.style.strokeNoScale=!0,a.__simpleBox=n,Object(ar.I)(a,o)}function W_(a,r){return g.H(a,function(e){return e=e.slice(),e[1]=r.initBaseline,e})}var k_=function(){function a(){}return a}(),h0=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new k_},r.prototype.buildPath=function(e,n){for(var o=n.points,s=0;s<o.length;)if(this.__sign===o[s++]){var u=o[s++];e.moveTo(u,o[s++]),e.lineTo(u,o[s++])}else s+=3},r}(ot.b);function v0(a,r,e,n){var o=a.getData(),s=o.getLayout("largePoints"),u=new h0({shape:{points:s},__sign:1});r.add(u);var c=new h0({shape:{points:s},__sign:-1});r.add(c),d0(1,u,a,o),d0(-1,c,a,o),n&&(u.incremental=!0,c.incremental=!0),e&&e.push(u,c)}function d0(a,r,e,n){var o=e.get(["itemStyle",a>0?"borderColor":"borderColor0"])||e.get(["itemStyle",a>0?"color":"color0"]),s=e.getModel("itemStyle").getItemStyle(yi);r.useStyle(s),r.style.fill=null,r.style.stroke=o}var X_=xi,p0=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(e,n,o){var s=n.getItemLayout(e);return s&&o.rect(s.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(Mn.b);Object(g.K)(p0,Ge,!0);var Z_=p0;function Y_(a){!a||!g.t(a.series)||g.k(a.series,function(r){g.A(r)&&r.type==="k"&&(r.type="candlestick")})}var K_=["itemStyle","borderColor"],Q_=["itemStyle","borderColor0"],J_=["itemStyle","color"],$_=["itemStyle","color0"],q_={seriesType:"candlestick",plan:Object(Bi.a)(),performRawSeries:!0,reset:function(a,r){function e(s,u){return u.get(s>0?J_:$_)}function n(s,u){return u.get(s>0?K_:Q_)}if(!r.isSeriesFiltered(a)){var o=a.pipelineContext.large;return!o&&{progress:function(s,u){for(var c;(c=s.next())!=null;){var v=u.getItemModel(c),d=u.getItemLayout(c).sign,m=v.getItemStyle();m.fill=e(d,v),m.stroke=n(d,v)||m.fill;var x=u.ensureUniqueItemVisual(c,"style");Object(g.m)(x,m)}}}}}},tb=q_,eb={seriesType:"candlestick",plan:Object(Bi.a)(),reset:function(a){var r=a.coordinateSystem,e=a.getData(),n=rb(a,e),o=0,s=1,u=["x","y"],c=e.getDimensionIndex(e.mapDimension(u[o])),v=Object(g.H)(e.mapDimensionsAll(u[s]),e.getDimensionIndex,e),d=v[0],m=v[1],x=v[2],T=v[3];if(e.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),c<0||v.length<4)return;return{progress:a.pipelineContext.large?w:D};function D(R,Q){for(var rt,pt=Q.getStore();(rt=R.next())!=null;){var mt=pt.get(c,rt),Dt=pt.get(d,rt),Lt=pt.get(m,rt),wt=pt.get(x,rt),Nt=pt.get(T,rt),Gt=Math.min(Dt,Lt),Kt=Math.max(Dt,Lt),te=_e(Gt,mt),ne=_e(Kt,mt),pe=_e(wt,mt),me=_e(Nt,mt),xe=[];Ne(xe,ne,0),Ne(xe,te,1),xe.push(Xe(me),Xe(ne),Xe(pe),Xe(te)),Q.setItemLayout(rt,{sign:g0(pt,rt,Dt,Lt,m),initBaseline:Dt>Lt?ne[s]:te[s],ends:xe,brushRect:Je(wt,Nt,mt)})}function _e(or,Tr){var Mr=[];return Mr[o]=Tr,Mr[s]=or,isNaN(Tr)||isNaN(or)?[NaN,NaN]:r.dataToPoint(Mr)}function Ne(or,Tr,Mr){var Ur=Tr.slice(),Yr=Tr.slice();Ur[o]=Object(_r.subPixelOptimize)(Ur[o]+n/2,1,!1),Yr[o]=Object(_r.subPixelOptimize)(Yr[o]-n/2,1,!0),Mr?or.push(Ur,Yr):or.push(Yr,Ur)}function Je(or,Tr,Mr){var Ur=_e(or,Mr),Yr=_e(Tr,Mr);return Ur[o]-=n/2,Yr[o]-=n/2,{x:Ur[0],y:Ur[1],width:s?n:Yr[0]-Ur[0],height:s?Yr[1]-Ur[1]:n}}function Xe(or){return or[o]=Object(_r.subPixelOptimize)(or[o],1),or}}function w(R,Q){for(var rt=Object(wr.a)(R.count*4),pt=0,mt,Dt=[],Lt=[],wt,Nt=Q.getStore();(wt=R.next())!=null;){var Gt=Nt.get(c,wt),Kt=Nt.get(d,wt),te=Nt.get(m,wt),ne=Nt.get(x,wt),pe=Nt.get(T,wt);if(isNaN(Gt)||isNaN(ne)||isNaN(pe)){rt[pt++]=NaN,pt+=3;continue}rt[pt++]=g0(Nt,wt,Kt,te,m),Dt[o]=Gt,Dt[s]=ne,mt=r.dataToPoint(Dt,null,Lt),rt[pt++]=mt?mt[0]:NaN,rt[pt++]=mt?mt[1]:NaN,Dt[s]=pe,mt=r.dataToPoint(Dt,null,Lt),rt[pt++]=mt?mt[1]:NaN}Q.setLayout("largePoints",rt)}}};function g0(a,r,e,n,o){var s;return e>n?s=-1:e<n?s=1:s=r>0?a.get(o,r-1)<=n?1:-1:1,s}function rb(a,r){var e=a.getBaseAxis(),n,o=e.type==="category"?e.getBandWidth():(n=e.getExtent(),Math.abs(n[1]-n[0])/r.count()),s=Object(Le.p)(Object(g.P)(a.get("barMaxWidth"),o),o),u=Object(Le.p)(Object(g.P)(a.get("barMinWidth"),1),o),c=a.get("barWidth");return c!=null?Object(Le.p)(c,o):Math.max(Math.min(o/2,s),u)}var nb=eb;function ib(a){a.registerChartView(X_),a.registerSeriesModel(Z_),a.registerPreprocessor(Y_),a.registerVisual(tb),a.registerLayout(nb)}function m0(a,r){var e=r.rippleEffectColor||r.color;a.eachChild(function(n){n.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?e:null,fill:r.brushType==="fill"?e:null}})})}var ab=function(a){Object(Pe.a)(r,a);function r(e,n){var o=a.call(this)||this,s=new oa(e,n),u=new Pr.a;return o.add(s),o.add(u),o.updateData(e,n),o}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(e){for(var n=e.symbolType,o=e.color,s=e.rippleNumber,u=this.childAt(1),c=0;c<s;c++){var v=Object(cn.a)(n,-1,-1,2,2,o);v.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-c/s*e.period+e.effectOffset;v.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(d).start(),v.animateStyle(!0).when(e.period,{opacity:0}).delay(d).start(),u.add(v)}m0(u,e)},r.prototype.updateEffectAnimation=function(e){for(var n=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],u=0;u<s.length;u++){var c=s[u];if(n[c]!==e[c]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}m0(o,e)},r.prototype.highlight=function(){Object(ar.r)(this)},r.prototype.downplay=function(){Object(ar.C)(this)},r.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},r.prototype.updateData=function(e,n){var o=this,s=e.hostModel;this.childAt(0).updateData(e,n);var u=this.childAt(1),c=e.getItemModel(n),v=e.getItemVisual(n,"symbol"),d=Object(cn.c)(e.getItemVisual(n,"symbolSize")),m=e.getItemVisual(n,"style"),x=m&&m.fill,T=c.getModel("emphasis");u.setScale(d),u.traverse(function(Q){Q.setStyle("fill",x)});var D=Object(cn.b)(e.getItemVisual(n,"symbolOffset"),d);D&&(u.x=D[0],u.y=D[1]);var w=e.getItemVisual(n,"symbolRotate");u.rotation=(w||0)*Math.PI/180||0;var R={};R.showEffectOn=s.get("showEffectOn"),R.rippleScale=c.get(["rippleEffect","scale"]),R.brushType=c.get(["rippleEffect","brushType"]),R.period=c.get(["rippleEffect","period"])*1e3,R.effectOffset=n/e.count(),R.z=s.getShallow("z")||0,R.zlevel=s.getShallow("zlevel")||0,R.symbolType=v,R.color=x,R.rippleEffectColor=c.get(["rippleEffect","color"]),R.rippleNumber=c.get(["rippleEffect","number"]),R.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(R):this.startEffectAnimation(R),this._effectCfg=R):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Q){Q==="emphasis"?R.showEffectOn!=="render"&&o.startEffectAnimation(R):Q==="normal"&&R.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=R,Object(ar.J)(this,T.get("focus"),T.get("blurScope"),T.get("disabled"))},r.prototype.fadeOut=function(e){e&&e()},r}(Pr.a),ob=ab,sb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._symbolDraw=new Wr(ob)},r.prototype.render=function(e,n,o){var s=e.getData(),u=this._symbolDraw;u.updateData(s,{clipShape:this._getClipShape(e)}),this.group.add(u.group)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype.updateTransform=function(e,n,o){var s=e.getData();this.group.dirty();var u=Qn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(e){var n=e.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=xn.a(n.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(Ln.a),lb=sb,ub=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(Mn.b),fb=ub;function cb(a){a.registerChartView(lb),a.registerSeriesModel(fb),a.registerLayout(Qn("effectScatter"))}var hb=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this)||this;return s.add(s.createLine(e,n,o)),s._updateEffectSymbol(e,n),s}return r.prototype.createLine=function(e,n,o){return new Ii(e,n,o)},r.prototype._updateEffectSymbol=function(e,n){var o=e.getItemModel(n),s=o.getModel("effect"),u=s.get("symbolSize"),c=s.get("symbol");g.t(u)||(u=[u,u]);var v=e.getItemVisual(n,"style"),d=s.get("color")||v&&v.stroke,m=this.childAt(1);this._symbolType!==c&&(this.remove(m),m=Object(cn.a)(c,-.5,-.5,1,1,d),m.z2=100,m.culling=!0,this.add(m)),!!m&&(m.setStyle("shadowColor",d),m.setStyle(s.getItemStyle(["color"])),m.scaleX=u[0],m.scaleY=u[1],m.setColor(d),this._symbolType=c,this._symbolScale=u,this._updateEffectAnimation(e,s,n))},r.prototype._updateEffectAnimation=function(e,n,o){var s=this.childAt(1);if(!!s){var u=this,c=e.getItemLayout(o),v=n.get("period")*1e3,d=n.get("loop"),m=n.get("constantSpeed"),x=g.O(n.get("delay"),function(w){return w/e.count()*v/3});if(s.ignore=!0,this._updateAnimationPoints(s,c),m>0&&(v=this._getLineLength(s)/m*1e3),(v!==this._period||d!==this._loop)&&(s.stopAnimation(),v>0)){var T=void 0;g.w(x)?T=x(o):T=x,s.__t>0&&(T=-v*s.__t),s.__t=0;var D=s.animate("",d).when(v,{__t:1}).delay(T).during(function(){u._updateSymbolPosition(s)});d||D.done(function(){u.remove(s)}),D.start()}this._period=v,this._loop=d}},r.prototype._getLineLength=function(e){return Rr.f(e.__p1,e.__cp1)+Rr.f(e.__cp1,e.__p2)},r.prototype._updateAnimationPoints=function(e,n){e.__p1=n[0],e.__p2=n[1],e.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},r.prototype.updateData=function(e,n,o){this.childAt(0).updateData(e,n,o),this._updateEffectSymbol(e,n)},r.prototype._updateSymbolPosition=function(e){var n=e.__p1,o=e.__p2,s=e.__cp1,u=e.__t,c=[e.x,e.y],v=c.slice(),d=Br.h,m=Br.i;c[0]=d(n[0],s[0],o[0],u),c[1]=d(n[1],s[1],o[1],u);var x=m(n[0],s[0],o[0],u),T=m(n[1],s[1],o[1],u);e.rotation=-Math.atan2(T,x)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=Rr.f(v,c)*1.05,u===1&&(c[0]=v[0]+(c[0]-v[0])/2,c[1]=v[1]+(c[1]-v[1])/2)):e.__lastT===1?e.scaleY=2*Rr.f(n,c):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=c[0],e.y=c[1]},r.prototype.updateLayout=function(e,n){this.childAt(0).updateLayout(e,n);var o=e.getItemModel(n).getModel("effect");this._updateEffectAnimation(e,o,n)},r}(Pr.a),y0=hb,vb=function(a){Object(Pe.a)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createPolyline(e,n,o),s}return r.prototype._createPolyline=function(e,n,o){var s=e.getItemLayout(n),u=new Vi.a({shape:{points:s}});this.add(u),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childAt(0),c={shape:{points:e.getItemLayout(n)}};cr.h(u,c,s,n),this._updateCommonStl(e,n,o)},r.prototype._updateCommonStl=function(e,n,o){var s=this.childAt(0),u=e.getItemModel(n),c=o&&o.emphasisLineStyle,v=o&&o.focus,d=o&&o.blurScope,m=o&&o.emphasisDisabled;if(!o||e.hasItemOption){var x=u.getModel("emphasis");c=x.getModel("lineStyle").getLineStyle(),m=x.get("disabled"),v=x.get("focus"),d=x.get("blurScope")}s.useStyle(e.getItemVisual(n,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var T=s.ensureState("emphasis");T.style=c,Object(ar.J)(this,v,d,m)},r.prototype.updateLayout=function(e,n){var o=this.childAt(0);o.setShape("points",e.getItemLayout(n))},r}(Pr.a),x0=vb,db=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return r.prototype.createLine=function(e,n,o){return new x0(e,n,o)},r.prototype._updateAnimationPoints=function(e,n){this._points=n;for(var o=[0],s=0,u=1;u<n.length;u++){var c=n[u-1],v=n[u];s+=Rr.f(c,v),o.push(s)}if(s===0){this._length=0;return}for(var u=0;u<o.length;u++)o[u]/=s;this._offsets=o,this._length=s},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(e){var n=e.__t,o=this._points,s=this._offsets,u=o.length;if(!!s){var c=this._lastFrame,v;if(n<this._lastFramePercent){var d=Math.min(c+1,u-1);for(v=d;v>=0&&!(s[v]<=n);v--);v=Math.min(v,u-2)}else{for(v=c;v<u&&!(s[v]>n);v++);v=Math.min(v-1,u-2)}var m=(n-s[v])/(s[v+1]-s[v]),x=o[v],T=o[v+1];e.x=x[0]*(1-m)+m*T[0],e.y=x[1]*(1-m)+m*T[1];var D=T[0]-x[0],w=T[1]-x[1];e.rotation=-Math.atan2(w,D)-Math.PI/2,this._lastFrame=v,this._lastFramePercent=n,e.ignore=!1}},r}(y0),pb=db,_0=b("4ZEG"),gb=b("cdJk"),mb=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),yb=function(a){Object(Pe.a)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new mb},r.prototype.buildPath=function(e,n){var o=n.segs,s=n.curveness,u;if(n.polyline)for(u=this._off;u<o.length;){var c=o[u++];if(c>0){e.moveTo(o[u++],o[u++]);for(var v=1;v<c;v++)e.lineTo(o[u++],o[u++])}}else for(u=this._off;u<o.length;){var d=o[u++],m=o[u++],x=o[u++],T=o[u++];if(e.moveTo(d,m),s>0){var D=(d+x)/2-(m-T)*s,w=(m+T)/2-(x-d)*s;e.quadraticCurveTo(D,w,x,T)}else e.lineTo(x,T)}this.incremental&&(this._off=u,this.notClear=!0)},r.prototype.findDataIndex=function(e,n){var o=this.shape,s=o.segs,u=o.curveness,c=this.style.lineWidth;if(o.polyline)for(var v=0,d=0;d<s.length;){var m=s[d++];if(m>0)for(var x=s[d++],T=s[d++],D=1;D<m;D++){var w=s[d++],R=s[d++];if(_0.a(x,T,w,R,c,e,n))return v}v++}else for(var v=0,d=0;d<s.length;){var x=s[d++],T=s[d++],w=s[d++],R=s[d++];if(u>0){var Q=(x+w)/2-(T-R)*u,rt=(T+R)/2-(w-x)*u;if(gb.a(x,T,Q,rt,w,R,c,e,n))return v}else if(_0.a(x,T,w,R,c,e,n))return v;v++}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.segs,s=Infinity,u=Infinity,c=-Infinity,v=-Infinity,d=0;d<o.length;){var m=o[d++],x=o[d++];s=Math.min(m,s),c=Math.max(m,c),u=Math.min(x,u),v=Math.max(x,v)}e=this._rect=new Ar.a(s,u,c,v)}return e},r}(ot.b),xb=function(){function a(){this.group=new Pr.a}return a.prototype.updateData=function(r){this._clear();var e=this._create();e.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(e,r)},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(r,e){var n=this._newAdded[0],o=e.getLayout("linesPoints"),s=n&&n.shape.segs;if(s&&s.length<2e4){var u=s.length,c=new Float32Array(u+o.length);c.set(s),c.set(o,u),n.setShape({segs:c})}else{this._newAdded=[];var v=this._create();v.incremental=!0,v.setShape({segs:o}),this._setCommon(v,e),v.__startIndex=r.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new yb({cursor:"default"});return this._newAdded.push(r),this.group.add(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;r.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),r.useStyle(o.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var s=e.getVisual("style");s&&s.stroke&&r.setStyle("stroke",s.stroke),r.setStyle("fill",null);var u=Object(br.a)(r);u.seriesIndex=o.seriesIndex,r.on("mousemove",function(c){u.dataIndex=null;var v=r.hoverDataIdx;v>0&&(u.dataIndex=v+r.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),_b=xb,bb={seriesType:"lines",plan:Object(Bi.a)(),reset:function(a){var r=a.coordinateSystem;if(!!r){var e=a.get("polyline"),n=a.pipelineContext.large;return{progress:function(o,s){var u=[];if(n){var c=void 0,v=o.end-o.start;if(e){for(var d=0,m=o.start;m<o.end;m++)d+=a.getLineCoordsCount(m);c=new Float32Array(v+d*2)}else c=new Float32Array(v*4);for(var x=0,T=[],m=o.start;m<o.end;m++){var D=a.getLineCoords(m,u);e&&(c[x++]=D);for(var w=0;w<D;w++)T=r.dataToPoint(u[w],!1,T),c[x++]=T[0],c[x++]=T[1]}s.setLayout("linesPoints",c)}else for(var m=o.start;m<o.end;m++){var R=s.getItemModel(m),D=a.getLineCoords(m,u),Q=[];if(e)for(var rt=0;rt<D;rt++)Q.push(r.dataToPoint(u[rt]));else{Q[0]=r.dataToPoint(u[0]),Q[1]=r.dataToPoint(u[1]);var pt=R.get(["lineStyle","curveness"]);+pt&&(Q[2]=[(Q[0][0]+Q[1][0])/2-(Q[0][1]-Q[1][1])*pt,(Q[0][1]+Q[1][1])/2-(Q[1][0]-Q[0][0])*pt])}s.setItemLayout(m,Q)}}}}}},b0=bb,Sb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e),c=e.get("zlevel"),v=e.get(["effect","trailLength"]),d=o.getZr(),m=d.painter.getType()==="svg";m||d.painter.getLayer(c).clear(!0),this._lastZlevel!=null&&!m&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&v>0&&(m||d.configLayer(c,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(v/10+.9,1),0)})),u.updateData(s);var x=e.get("clip",!0)&&pa(e.coordinateSystem,!1,e);x?this.group.setClipPath(x):this.group.removeClipPath(),this._lastZlevel=c,this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e);u.incrementalPrepareUpdate(s),this._clearLayer(o),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._lineDraw.incrementalUpdate(e,n.getData()),this._finished=e.end===n.getData().count()},r.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},r.prototype.updateTransform=function(e,n,o){var s=e.getData(),u=e.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var c=b0.reset(e,n,o);c.progress&&c.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(o)},r.prototype._updateLineDraw=function(e,n){var o=this._lineDraw,s=this._showEffect(n),u=!!n.get("polyline"),c=n.pipelineContext,v=c.large;return(!o||s!==this._hasEffet||u!==this._isPolyline||v!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=v?new _b:new Xu(u?s?pb:x0:s?y0:Ii),this._hasEffet=s,this._isPolyline=u,this._isLargeDraw=v),this.group.add(o.group),o},r.prototype._showEffect=function(e){return!!e.get(["effect","show"])},r.prototype._clearLayer=function(e){var n=e.getZr(),o=n.painter.getType()==="svg";!o&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(e,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.type="lines",r}(Ln.a),Tb=Sb,Ob=typeof Uint32Array=="undefined"?Array:Uint32Array,Ab=typeof Float64Array=="undefined"?Array:Float64Array;function S0(a){var r=a.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(a.data=Object(g.H)(r,function(e){var n=[e[0].coord,e[1].coord],o={coords:n};return e[0].name&&(o.fromName=e[0].name),e[1].name&&(o.toName=e[1].name),Object(g.J)([o,e[0],e[1]])}))}var Mb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.init=function(e){e.data=e.data||[],S0(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),a.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(e){if(S0(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}a.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=Object(g.e)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=Object(g.e)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},r.prototype._getCoordsFromItemModel=function(e){var n=this.getData().getItemModel(e),o=n.option instanceof Array?n.option:n.getShallow("coords");return o},r.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},r.prototype.getLineCoords=function(e,n){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[e*2],s=this._flatCoordsOffset[e*2+1],u=0;u<s;u++)n[u]=n[u]||[],n[u][0]=this._flatCoords[o+u*2],n[u][1]=this._flatCoords[o+u*2+1];return s}else{for(var c=this._getCoordsFromItemModel(e),u=0;u<c.length;u++)n[u]=n[u]||[],n[u][0]=c[u][0],n[u][1]=c[u][1];return c.length}},r.prototype._processFlatCoordsArray=function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),Object(g.z)(e[0])){for(var o=e.length,s=new Ob(o),u=new Ab(o),c=0,v=0,d=0,m=0;m<o;){d++;var x=e[m++];s[v++]=c+n,s[v++]=x;for(var T=0;T<x;T++){var D=e[m++],w=e[m++];u[c++]=D,u[c++]=w,m>o}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,v),flatCoords:u,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},r.prototype.getInitialData=function(e,n){if(!1)var o;var s=new ue.a(["value"],this);return s.hasItemOption=!1,s.initData(e.data,[],function(u,c,v,d){if(u instanceof Array)return NaN;s.hasItemOption=!0;var m=u.value;if(m!=null)return m instanceof Array?m[d]:m}),s},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getItemModel(e),c=u.get("name");if(c)return c;var v=u.get("fromName"),d=u.get("toName"),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),Object(Xn.c)("nameValue",{name:m.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var e=this.option.progressive;return e==null?this.option.large?1e4:this.get("progressive"):e},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e==null?this.option.large?2e4:this.get("progressiveThreshold"):e},r.prototype.getZLevelKey=function(){var e=this.getModel("effect"),n=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&n>0?n+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(Mn.b),Db=Mb;function md(a){return a instanceof Array||(a=[a,a]),a}var Eb={seriesType:"lines",reset:function(a){var r=md(a.get("symbol")),e=md(a.get("symbolSize")),n=a.getData();n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",e&&e[0]),n.setVisual("toSymbolSize",e&&e[1]);function o(s,u){var c=s.getItemModel(u),v=md(c.getShallow("symbol",!0)),d=md(c.getShallow("symbolSize",!0));v[0]&&s.setItemVisual(u,"fromSymbol",v[0]),v[1]&&s.setItemVisual(u,"toSymbol",v[1]),d[0]&&s.setItemVisual(u,"fromSymbolSize",d[0]),d[1]&&s.setItemVisual(u,"toSymbolSize",d[1])}return{dataEach:n.hasItemOption?o:null}}},Cb=Eb;function Pb(a){a.registerChartView(Tb),a.registerSeriesModel(Db),a.registerLayout(b0),a.registerVisual(Cb)}var wb=256,Lb=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=be.d.createCanvas();this.canvas=r}return a.prototype.update=function(r,e,n,o,s,u){var c=this._getBrush(),v=this._getGradient(s,"inRange"),d=this._getGradient(s,"outOfRange"),m=this.pointSize+this.blurSize,x=this.canvas,T=x.getContext("2d"),D=r.length;x.width=e,x.height=n;for(var w=0;w<D;++w){var R=r[w],Q=R[0],rt=R[1],pt=R[2],mt=o(pt);T.globalAlpha=mt,T.drawImage(c,Q-m,rt-m)}if(!x.width||!x.height)return x;for(var Dt=T.getImageData(0,0,x.width,x.height),Lt=Dt.data,wt=0,Nt=Lt.length,Gt=this.minOpacity,Kt=this.maxOpacity,te=Kt-Gt;wt<Nt;){var mt=Lt[wt+3]/256,ne=Math.floor(mt*(wb-1))*4;if(mt>0){var pe=u(mt)?v:d;mt>0&&(mt=mt*te+Gt),Lt[wt++]=pe[ne],Lt[wt++]=pe[ne+1],Lt[wt++]=pe[ne+2],Lt[wt++]=pe[ne+3]*mt*256}else wt+=4}return T.putImageData(Dt,0,0),x},a.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=be.d.createCanvas()),e=this.pointSize+this.blurSize,n=e*2;r.width=n,r.height=n;var o=r.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),r},a.prototype._getGradient=function(r,e){for(var n=this._gradientPixels,o=n[e]||(n[e]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],u=0,c=0;c<256;c++)r[e](c/255,!0,s),o[u++]=s[0],o[u++]=s[1],o[u++]=s[2],o[u++]=s[3];return o},a}(),Ib=Lb;function Rb(a,r,e){var n=a[1]-a[0];r=g.H(r,function(u){return{interval:[(u.interval[0]-a[0])/n,(u.interval[1]-a[0])/n]}});var o=r.length,s=0;return function(u){var c;for(c=s;c<o;c++){var v=r[c].interval;if(v[0]<=u&&u<=v[1]){s=c;break}}if(c===o)for(c=s-1;c>=0;c--){var v=r[c].interval;if(v[0]<=u&&u<=v[1]){s=c;break}}return c>=0&&c<o&&e[c]}}function Nb(a,r){var e=a[1]-a[0];return r=[(r[0]-a[0])/e,(r[1]-a[0])/e],function(n){return n>=r[0]&&n<=r[1]}}function T0(a){var r=a.dimensions;return r[0]==="lng"&&r[1]==="lat"}var jb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s;n.eachComponent("visualMap",function(c){c.eachTargetSeries(function(v){v===e&&(s=c)})}),this._progressiveEls=null,this.group.removeAll();var u=e.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):T0(u)&&this._renderOnGeo(u,e,s,o)},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll()},r.prototype.incrementalRender=function(e,n,o,s){var u=n.coordinateSystem;u&&(T0(u)?this.render(n,o,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,s,e.start,e.end,!0)))},r.prototype.eachRendered=function(e){_r.traverseElements(this._progressiveEls||this.group,e)},r.prototype._renderOnCartesianAndCalendar=function(e,n,o,s,u){var c=e.coordinateSystem,v,d,m,x;if(Zi(c,"cartesian2d")){var T=c.getAxis("x"),D=c.getAxis("y");v=T.getBandWidth(),d=D.getBandWidth(),m=T.scale.getExtent(),x=D.scale.getExtent()}for(var w=this.group,R=e.getData(),Q=e.getModel(["emphasis","itemStyle"]).getItemStyle(),rt=e.getModel(["blur","itemStyle"]).getItemStyle(),pt=e.getModel(["select","itemStyle"]).getItemStyle(),mt=Object(xr.e)(e),Dt=e.getModel("emphasis"),Lt=Dt.get("focus"),wt=Dt.get("blurScope"),Nt=Dt.get("disabled"),Gt=Zi(c,"cartesian2d")?[R.mapDimension("x"),R.mapDimension("y"),R.mapDimension("value")]:[R.mapDimension("time"),R.mapDimension("value")],Kt=o;Kt<s;Kt++){var te=void 0,ne=R.getItemVisual(Kt,"style");if(Zi(c,"cartesian2d")){var pe=R.get(Gt[0],Kt),me=R.get(Gt[1],Kt);if(isNaN(R.get(Gt[2],Kt))||pe<m[0]||pe>m[1]||me<x[0]||me>x[1])continue;var xe=c.dataToPoint([pe,me]);te=new Qr.a({shape:{x:Math.floor(Math.round(xe[0])-v/2),y:Math.floor(Math.round(xe[1])-d/2),width:Math.ceil(v),height:Math.ceil(d)},style:ne})}else{if(isNaN(R.get(Gt[1],Kt)))continue;te=new Qr.a({z2:1,shape:c.dataToRect([R.get(Gt[0],Kt)]).contentShape,style:ne})}var _e=R.getItemModel(Kt);if(R.hasItemOption){var Ne=_e.getModel("emphasis");Q=Ne.getModel("itemStyle").getItemStyle(),rt=_e.getModel(["blur","itemStyle"]).getItemStyle(),pt=_e.getModel(["select","itemStyle"]).getItemStyle(),Lt=Ne.get("focus"),wt=Ne.get("blurScope"),Nt=Ne.get("disabled"),mt=Object(xr.e)(_e)}var Je=e.getRawValue(Kt),Xe="-";Je&&Je[2]!=null&&(Xe=Je[2]+""),Object(xr.g)(te,mt,{labelFetcher:e,labelDataIndex:Kt,defaultOpacity:ne.opacity,defaultText:Xe}),te.ensureState("emphasis").style=Q,te.ensureState("blur").style=rt,te.ensureState("select").style=pt,Object(ar.J)(te,Lt,wt,Nt),te.incremental=u,u&&(te.states.emphasis.hoverLayer=!0),w.add(te),R.setItemGraphicEl(Kt,te),this._progressiveEls&&this._progressiveEls.push(te)}},r.prototype._renderOnGeo=function(e,n,o,s){var u=o.targetVisuals.inRange,c=o.targetVisuals.outOfRange,v=n.getData(),d=this._hmLayer||this._hmLayer||new Ib;d.blurSize=n.get("blurSize"),d.pointSize=n.get("pointSize"),d.minOpacity=n.get("minOpacity"),d.maxOpacity=n.get("maxOpacity");var m=e.getViewRect().clone(),x=e.getRoamTransform();m.applyTransform(x);var T=Math.max(m.x,0),D=Math.max(m.y,0),w=Math.min(m.width+m.x,s.getWidth()),R=Math.min(m.height+m.y,s.getHeight()),Q=w-T,rt=R-D,pt=[v.mapDimension("lng"),v.mapDimension("lat"),v.mapDimension("value")],mt=v.mapArray(pt,function(Nt,Gt,Kt){var te=e.dataToPoint([Nt,Gt]);return te[0]-=T,te[1]-=D,te.push(Kt),te}),Dt=o.getExtent(),Lt=o.type==="visualMap.continuous"?Nb(Dt,o.option.range):Rb(Dt,o.getPieceList(),o.option.selected);d.update(mt,Q,rt,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:c.color.getColorMapper()},Lt);var wt=new gt.a({style:{width:Q,height:rt,x:T,y:D,image:d.canvas},silent:!0});this.group.add(wt)},r.type="heatmap",r}(Ln.a),Bb=jb,Fb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var e=al.a.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(Mn.b),zb=Fb;function Vb(a){a.registerChartView(Bb),a.registerSeriesModel(zb)}var Gb=["itemStyle","borderWidth"],O0=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Vm=new $o.a,Ub=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group,u=e.getData(),c=this._data,v=e.coordinateSystem,d=v.getBaseAxis(),m=d.isHorizontal(),x=v.master.getRect(),T={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:v,coordSysExtent:[[x.x,x.x+x.width],[x.y,x.y+x.height]],isHorizontal:m,valueDim:O0[+m],categoryDim:O0[1-+m]};return u.diff(c).add(function(D){if(!!u.hasValue(D)){var w=w0(u,D),R=A0(u,D,w,T),Q=L0(u,T,R);u.setItemGraphicEl(D,Q),s.add(Q),N0(Q,T,R)}}).update(function(D,w){var R=c.getItemGraphicEl(w);if(!u.hasValue(D)){s.remove(R);return}var Q=w0(u,D),rt=A0(u,D,Q,T),pt=R0(u,rt);R&&pt!==R.__pictorialShapeStr&&(s.remove(R),u.setItemGraphicEl(D,null),R=null),R?Kb(R,T,rt):R=L0(u,T,rt,!0),u.setItemGraphicEl(D,R),R.__pictorialSymbolMeta=rt,s.add(R),N0(R,T,rt)}).remove(function(D){var w=c.getItemGraphicEl(D);w&&I0(c,D,w.__pictorialSymbolMeta.animationModel,w)}).execute(),this._data=u,this.group},r.prototype.remove=function(e,n){var o=this.group,s=this._data;e.get("animation")?s&&s.eachItemGraphicEl(function(u){I0(s,Object(br.a)(u).dataIndex,e,u)}):o.removeAll()},r.type="pictorialBar",r}(Ln.a);function A0(a,r,e,n){var o=a.getItemLayout(r),s=e.get("symbolRepeat"),u=e.get("symbolClip"),c=e.get("symbolPosition")||"start",v=e.get("symbolRotate"),d=(v||0)*Math.PI/180||0,m=e.get("symbolPatternSize")||2,x=e.isAnimationEnabled(),T={dataIndex:r,layout:o,itemModel:e,symbolType:a.getItemVisual(r,"symbol")||"circle",style:a.getItemVisual(r,"style"),symbolClip:u,symbolRepeat:s,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:d,animationModel:x?e:null,hoverScale:x&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};Hb(e,s,o,n,T),Wb(a,r,o,s,u,T.boundingLength,T.pxSign,m,n,T),kb(e,T.symbolScale,d,n,T);var D=T.symbolSize,w=Object(cn.b)(e.get("symbolOffset"),D);return Xb(e,D,o,s,u,w,c,T.valueLineWidth,T.boundingLength,T.repeatCutLength,n,T),T}function Hb(a,r,e,n,o){var s=n.valueDim,u=a.get("symbolBoundingData"),c=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),v=c.toGlobalCoord(c.dataToCoord(0)),d=1-+(e[s.wh]<=0),m;if(g.t(u)){var x=[Gm(c,u[0])-v,Gm(c,u[1])-v];x[1]<x[0]&&x.reverse(),m=x[d]}else u!=null?m=Gm(c,u)-v:r?m=n.coordSysExtent[s.index][d]-v:m=e[s.wh];o.boundingLength=m,r&&(o.repeatCutLength=e[s.wh]),o.pxSign=m>0?1:-1}function Gm(a,r){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(r)))}function Wb(a,r,e,n,o,s,u,c,v,d){var m=v.valueDim,x=v.categoryDim,T=Math.abs(e[x.wh]),D=a.getItemVisual(r,"symbolSize"),w;g.t(D)?w=D.slice():D==null?w=["100%","100%"]:w=[D,D],w[x.index]=Object(Le.p)(w[x.index],T),w[m.index]=Object(Le.p)(w[m.index],n?T:Math.abs(s)),d.symbolSize=w;var R=d.symbolScale=[w[0]/c,w[1]/c];R[m.index]*=(v.isHorizontal?-1:1)*u}function kb(a,r,e,n,o){var s=a.get(Gb)||0;s&&(Vm.attr({scaleX:r[0],scaleY:r[1],rotation:e}),Vm.updateTransform(),s/=Vm.getLineScale(),s*=r[n.valueDim.index]),o.valueLineWidth=s}function Xb(a,r,e,n,o,s,u,c,v,d,m,x){var T=m.categoryDim,D=m.valueDim,w=x.pxSign,R=Math.max(r[D.index]+c,0),Q=R;if(n){var rt=Math.abs(v),pt=g.O(a.get("symbolMargin"),"15%")+"",mt=!1;pt.lastIndexOf("!")===pt.length-1&&(mt=!0,pt=pt.slice(0,pt.length-1));var Dt=Object(Le.p)(pt,r[D.index]),Lt=Math.max(R+Dt*2,0),wt=mt?0:Dt*2,Nt=Object(Le.j)(n),Gt=Nt?n:j0((rt+wt)/Lt),Kt=rt-Gt*R;Dt=Kt/2/(mt?Gt:Math.max(Gt-1,1)),Lt=R+Dt*2,wt=mt?0:Dt*2,!Nt&&n!=="fixed"&&(Gt=d?j0((Math.abs(d)+wt)/Lt):0),Q=Gt*Lt-wt,x.repeatTimes=Gt,x.symbolMargin=Dt}var te=w*(Q/2),ne=x.pathPosition=[];ne[T.index]=e[T.wh]/2,ne[D.index]=u==="start"?te:u==="end"?v-te:v/2,s&&(ne[0]+=s[0],ne[1]+=s[1]);var pe=x.bundlePosition=[];pe[T.index]=e[T.xy],pe[D.index]=e[D.xy];var me=x.barRectShape=g.m({},e);me[D.wh]=w*Math.max(Math.abs(e[D.wh]),Math.abs(ne[D.index]+te)),me[T.wh]=e[T.wh];var xe=x.clipShape={};xe[T.xy]=-e[T.xy],xe[T.wh]=m.ecSize[T.wh],xe[D.xy]=0,xe[D.wh]=e[D.wh]}function M0(a){var r=a.symbolPatternSize,e=Object(cn.a)(a.symbolType,-r/2,-r/2,r,r);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function D0(a,r,e,n){var o=a.__pictorialBundle,s=e.symbolSize,u=e.valueLineWidth,c=e.pathPosition,v=r.valueDim,d=e.repeatTimes||0,m=0,x=s[r.valueDim.index]+u+e.symbolMargin*2;for(Um(a,function(R){R.__pictorialAnimationIndex=m,R.__pictorialRepeatTimes=d,m<d?nf(R,null,w(m),e,n):nf(R,null,{scaleX:0,scaleY:0},e,n,function(){o.remove(R)}),m++});m<d;m++){var T=M0(e);T.__pictorialAnimationIndex=m,T.__pictorialRepeatTimes=d,o.add(T);var D=w(m);nf(T,{x:D.x,y:D.y,scaleX:0,scaleY:0},{scaleX:D.scaleX,scaleY:D.scaleY,rotation:D.rotation},e,n)}function w(R){var Q=c.slice(),rt=e.pxSign,pt=R;return(e.symbolRepeatDirection==="start"?rt>0:rt<0)&&(pt=d-1-R),Q[v.index]=x*(pt-d/2+.5)+c[v.index],{x:Q[0],y:Q[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function E0(a,r,e,n){var o=a.__pictorialBundle,s=a.__pictorialMainPath;s?nf(s,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,n):(s=a.__pictorialMainPath=M0(e),o.add(s),nf(s,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,n))}function C0(a,r,e){var n=g.m({},r.barRectShape),o=a.__pictorialBarRect;o?nf(o,null,{shape:n},r,e):(o=a.__pictorialBarRect=new Qr.a({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,a.add(o))}function P0(a,r,e,n){if(e.symbolClip){var o=a.__pictorialClipPath,s=g.m({},e.clipShape),u=r.valueDim,c=e.animationModel,v=e.dataIndex;if(o)cr.h(o,{shape:s},c,v);else{s[u.wh]=0,o=new Qr.a({shape:s}),a.__pictorialBundle.setClipPath(o),a.__pictorialClipPath=o;var d={};d[u.wh]=e.clipShape[u.wh],_r[n?"updateProps":"initProps"](o,{shape:d},c,v)}}}function w0(a,r){var e=a.getItemModel(r);return e.getAnimationDelayParams=Zb,e.isAnimationEnabled=Yb,e}function Zb(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function Yb(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function L0(a,r,e,n){var o=new Pr.a,s=new Pr.a;return o.add(s),o.__pictorialBundle=s,s.x=e.bundlePosition[0],s.y=e.bundlePosition[1],e.symbolRepeat?D0(o,r,e):E0(o,r,e),C0(o,e,n),P0(o,r,e,n),o.__pictorialShapeStr=R0(a,e),o.__pictorialSymbolMeta=e,o}function Kb(a,r,e){var n=e.animationModel,o=e.dataIndex,s=a.__pictorialBundle;cr.h(s,{x:e.bundlePosition[0],y:e.bundlePosition[1]},n,o),e.symbolRepeat?D0(a,r,e,!0):E0(a,r,e,!0),C0(a,e,!0),P0(a,r,e,!0)}function I0(a,r,e,n){var o=n.__pictorialBarRect;o&&o.removeTextContent();var s=[];Um(n,function(u){s.push(u)}),n.__pictorialMainPath&&s.push(n.__pictorialMainPath),n.__pictorialClipPath&&(e=null),g.k(s,function(u){cr.e(u,{scaleX:0,scaleY:0},e,r,function(){n.parent&&n.parent.remove(n)})}),a.setItemGraphicEl(r,null)}function R0(a,r){return[a.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function Um(a,r,e){g.k(a.__pictorialBundle.children(),function(n){n!==a.__pictorialBarRect&&r.call(e,n)})}function nf(a,r,e,n,o,s){r&&a.attr(r),n.symbolClip&&!o?e&&a.attr(e):e&&_r[o?"updateProps":"initProps"](a,e,n.animationModel,n.dataIndex,s)}function N0(a,r,e){var n=e.dataIndex,o=e.itemModel,s=o.getModel("emphasis"),u=s.getModel("itemStyle").getItemStyle(),c=o.getModel(["blur","itemStyle"]).getItemStyle(),v=o.getModel(["select","itemStyle"]).getItemStyle(),d=o.getShallow("cursor"),m=s.get("focus"),x=s.get("blurScope"),T=s.get("scale");Um(a,function(R){if(R instanceof gt.a){var Q=R.style;R.useStyle(g.m({image:Q.image,x:Q.x,y:Q.y,width:Q.width,height:Q.height},e.style))}else R.useStyle(e.style);var rt=R.ensureState("emphasis");rt.style=u,T&&(rt.scaleX=R.scaleX*1.1,rt.scaleY=R.scaleY*1.1),R.ensureState("blur").style=c,R.ensureState("select").style=v,d&&(R.cursor=d),R.z2=e.z2});var D=r.valueDim.posDesc[+(e.boundingLength>0)],w=a.__pictorialBarRect;Object(xr.g)(w,Object(xr.e)(o),{labelFetcher:r.seriesModel,labelDataIndex:n,defaultText:zn(r.seriesModel.getData(),n),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:D}),Object(ar.J)(a,m,x,s.get("disabled"))}function j0(a){var r=Math.round(a);return Math.abs(a-r)<1e-4?r:Math.ceil(a)}var Qb=Ub,Jb=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return r.prototype.getInitialData=function(e){return e.stack=null,a.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=Object(yn.d)(sa.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(sa),$b=Jb;function qb(a){a.registerChartView(Qb),a.registerSeriesModel($b),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,Object(g.h)(Fi.c,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Object(Fi.a)("pictorialBar"))}var tS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._layers=[],e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this,c=this.group,v=e.getLayerSeries(),d=s.getLayout("layoutInfo"),m=d.rect,x=d.boundaryGap;c.x=0,c.y=m.y+x[0];function T(Q){return Q.name}var D=new ea.a(this._layersSeries||[],v,T,T),w=[];D.add(Object(g.c)(R,this,"add")).update(Object(g.c)(R,this,"update")).remove(Object(g.c)(R,this,"remove")).execute();function R(Q,rt,pt){var mt=u._layers;if(Q==="remove"){c.remove(mt[rt]);return}for(var Dt=[],Lt=[],wt,Nt=v[rt].indices,Gt=0;Gt<Nt.length;Gt++){var Kt=s.getItemLayout(Nt[Gt]),te=Kt.x,ne=Kt.y0,pe=Kt.y;Dt.push(te,ne),Lt.push(te,ne+pe),wt=s.getItemVisual(Nt[Gt],"style")}var me,xe=s.getItemLayout(Nt[0]),_e=e.getModel("label"),Ne=_e.get("margin"),Je=e.getModel("emphasis");if(Q==="add"){var Xe=w[rt]=new Pr.a;me=new hu({shape:{points:Dt,stackedOnPoints:Lt,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Xe.add(me),c.add(Xe),e.isAnimationEnabled()&&me.setClipPath(eS(me.getBoundingRect(),e,function(){me.removeClipPath()}))}else{var Xe=mt[pt];me=Xe.childAt(0),c.add(Xe),w[rt]=Xe,cr.h(me,{shape:{points:Dt,stackedOnPoints:Lt}},e),Object(cr.g)(me)}Object(xr.g)(me,Object(xr.e)(e),{labelDataIndex:Nt[Gt-1],defaultText:s.getName(Nt[Gt-1]),inheritColor:wt.fill},{normal:{verticalAlign:"middle"}}),me.setTextConfig({position:null,local:!0});var or=me.getTextContent();or&&(or.x=xe.x-Ne,or.y=xe.y0+xe.y/2),me.useStyle(wt),s.setItemGraphicEl(rt,me),Object(ar.I)(me,e),Object(ar.J)(me,Je.get("focus"),Je.get("blurScope"),Je.get("disabled"))}this._layersSeries=v,this._layers=w},r.type="themeRiver",r}(Ln.a);function eS(a,r,e){var n=new Qr.a({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return cr.c(n,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},r,e),n}var rS=tS,Hm=2,nS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ye(g.c(this.getData,this),g.c(this.getRawData,this))},r.prototype.fixData=function(e){var n=e.length,o={},s=Object(Be.j)(e,function(T){return o.hasOwnProperty(T[0]+"")||(o[T[0]+""]=-1),T[2]}),u=[];s.buckets.each(function(T,D){u.push({name:D,dataList:T})});for(var c=u.length,v=0;v<c;++v){for(var d=u[v].name,m=0;m<u[v].dataList.length;++m){var x=u[v].dataList[m][0]+"";o[x]=v}for(var x in o)o.hasOwnProperty(x)&&o[x]!==v&&(o[x]=v,e[n]=[x,0,d],n++)}return e},r.prototype.getInitialData=function(e,n){for(var o=this.getReferringComponents("singleAxis",Be.b).models[0],s=o.get("type"),u=g.n(e.data,function(w){return w[2]!==void 0}),c=this.fixData(u||[]),v=[],d=this.nameMap=g.f(),m=0,x=0;x<c.length;++x)v.push(c[x][Hm]),d.get(c[x][Hm])||(d.set(c[x][Hm],m),m++);var T=Object(lr.b)(c,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Object(Ae.a)(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,D=new ue.a(T,this);return D.initData(c),D},r.prototype.getLayerSeries=function(){for(var e=this.getData(),n=e.count(),o=[],s=0;s<n;++s)o[s]=s;var u=e.mapDimension("single"),c=Object(Be.j)(o,function(d){return e.get("name",d)}),v=[];return c.buckets.each(function(d,m){d.sort(function(x,T){return e.get(u,x)-e.get(u,T)}),v.push({name:m,indices:d})}),v},r.prototype.getAxisTooltipData=function(e,n,o){g.t(e)||(e=e?[e]:[]);for(var s=this.getData(),u=this.getLayerSeries(),c=[],v=u.length,d,m=0;m<v;++m){for(var x=Number.MAX_VALUE,T=-1,D=u[m].indices.length,w=0;w<D;++w){var R=s.get(e[0],u[m].indices[w]),Q=Math.abs(R-n);Q<=x&&(d=R,x=Q,T=u[m].indices[w])}c.push(T)}return{dataIndices:c,nestestValue:d}},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getName(e),c=s.get(s.mapDimension("value"),e);return Object(Xn.c)("nameValue",{name:u,value:c})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(Mn.b),iS=nS;function aS(a,r){a.eachSeriesByType("themeRiver",function(e){var n=e.getData(),o=e.coordinateSystem,s={},u=o.getRect();s.rect=u;var c=e.get("boundaryGap"),v=o.getAxis();if(s.boundaryGap=c,v.orient==="horizontal"){c[0]=Le.p(c[0],u.height),c[1]=Le.p(c[1],u.height);var d=u.height-c[0]-c[1];B0(n,e,d)}else{c[0]=Le.p(c[0],u.width),c[1]=Le.p(c[1],u.width);var m=u.width-c[0]-c[1];B0(n,e,m)}n.setLayout("layoutInfo",s)})}function B0(a,r,e){if(!!a.count())for(var n=r.coordinateSystem,o=r.getLayerSeries(),s=a.mapDimension("single"),u=a.mapDimension("value"),c=g.H(o,function(Q){return g.H(Q.indices,function(rt){var pt=n.dataToPoint(a.get(s,rt));return pt[1]=a.get(u,rt),pt})}),v=oS(c),d=v.y0,m=e/v.max,x=o.length,T=o[0].indices.length,D,w=0;w<T;++w){D=d[w]*m,a.setItemLayout(o[0].indices[w],{layerIndex:0,x:c[0][w][0],y0:D,y:c[0][w][1]*m});for(var R=1;R<x;++R)D+=c[R-1][w][1]*m,a.setItemLayout(o[R].indices[w],{layerIndex:R,x:c[R][w][0],y0:D,y:c[R][w][1]*m})}}function oS(a){for(var r=a.length,e=a[0].length,n=[],o=[],s=0,u=0;u<e;++u){for(var c=0,v=0;v<r;++v)c+=a[v][u][1];c>s&&(s=c),n.push(c)}for(var d=0;d<e;++d)o[d]=(s-n[d])/2;s=0;for(var m=0;m<e;++m){var x=n[m]+o[m];x>s&&(s=x)}return{y0:o,max:s}}function sS(a){a.registerChartView(rS),a.registerSeriesModel(iS),a.registerLayout(aS),a.registerProcessor(Is("themeRiver"))}var lS=2,uS=4,fS=function(a){Object(Pe.a)(r,a);function r(e,n,o,s){var u=a.call(this)||this;u.z2=lS,u.textConfig={inside:!0},Object(br.a)(u).seriesIndex=n.seriesIndex;var c=new he.a({z2:uS,silent:e.getModel().get(["label","silent"])});return u.setTextContent(c),u.updateData(!0,e,n,o,s),u}return r.prototype.updateData=function(e,n,o,s,u){this.node=n,n.piece=this,o=o||this._seriesModel,s=s||this._ecModel;var c=this;Object(br.a)(c).dataIndex=n.dataIndex;var v=n.getModel(),d=v.getModel("emphasis"),m=n.getLayout(),x=g.m({},m);x.label=null;var T=n.getVisual("style");T.lineJoin="bevel";var D=n.getVisual("decal");D&&(T.decal=Object(Ys.a)(D,u));var w=ve(v.getModel("itemStyle"),x,!0);g.m(x,w),g.k(ar.g,function(pt){var mt=c.ensureState(pt),Dt=v.getModel([pt,"itemStyle"]);mt.style=Dt.getItemStyle();var Lt=ve(Dt,x);Lt&&(mt.shape=Lt)}),e?(c.setShape(x),c.shape.r=m.r0,cr.h(c,{shape:{r:m.r}},o,n.dataIndex)):(cr.h(c,{shape:x},o),Object(cr.g)(c)),c.useStyle(T),this._updateLabel(o);var R=v.getShallow("cursor");R&&c.attr("cursor",R),this._seriesModel=o||this._seriesModel,this._ecModel=s||this._ecModel;var Q=d.get("focus"),rt=Q==="ancestor"?n.getAncestorsIndices():Q==="descendant"?n.getDescendantIndices():Q;Object(ar.J)(this,rt,d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e){var n=this,o=this.node.getModel(),s=o.getModel("label"),u=this.node.getLayout(),c=u.endAngle-u.startAngle,v=(u.startAngle+u.endAngle)/2,d=Math.cos(v),m=Math.sin(v),x=this,T=x.getTextContent(),D=this.node.dataIndex,w=s.get("minAngle")/180*Math.PI,R=s.get("show")&&!(w!=null&&Math.abs(c)<w);T.ignore=!R,g.k(ar.a,function(rt){var pt=rt==="normal"?o.getModel("label"):o.getModel([rt,"label"]),mt=rt==="normal",Dt=mt?T:T.ensureState(rt),Lt=e.getFormattedLabel(D,rt);mt&&(Lt=Lt||n.node.name),Dt.style=Object(xr.c)(pt,{},null,rt!=="normal",!0),Lt&&(Dt.style.text=Lt);var wt=pt.get("show");wt!=null&&!mt&&(Dt.ignore=!wt);var Nt=Q(pt,"position"),Gt=mt?x:x.states[rt],Kt=Gt.style.fill;Gt.textConfig={outsideFill:pt.get("color")==="inherit"?Kt:null,inside:Nt!=="outside"};var te,ne=Q(pt,"distance")||0,pe=Q(pt,"align");Nt==="outside"?(te=u.r+ne,pe=v>Math.PI/2?"right":"left"):!pe||pe==="center"?(te=(u.r+u.r0)/2,pe="center"):pe==="left"?(te=u.r0+ne,v>Math.PI/2&&(pe="right")):pe==="right"&&(te=u.r-ne,v>Math.PI/2&&(pe="left")),Dt.style.align=pe,Dt.style.verticalAlign=Q(pt,"verticalAlign")||"middle",Dt.x=te*d+u.cx,Dt.y=te*m+u.cy;var me=Q(pt,"rotate"),xe=0;me==="radial"?(xe=-v,xe<-Math.PI/2&&(xe+=Math.PI)):me==="tangential"?(xe=Math.PI/2-v,xe>Math.PI/2?xe-=Math.PI:xe<-Math.PI/2&&(xe+=Math.PI)):g.z(me)&&(xe=me*Math.PI/180),Dt.rotation=xe});function Q(rt,pt){var mt=rt.get(pt);return mt==null?s.get(pt):mt}T.dirtyStyle()},r}(In.a),F0=fS,Wm="sunburstRootToNode",z0="sunburstHighlight",cS="sunburstUnhighlight";function hS(a){a.registerAction({type:Wm,update:"updateView"},function(r,e){e.eachComponent({mainType:"series",subType:"sunburst",query:r},n);function n(o,s){var u=Bl(r,[Wm],o);if(u){var c=o.getViewRoot();c&&(r.direction=Bu(c,u.node)?"rollUp":"drillDown"),o.resetViewRoot(u.node)}}}),a.registerAction({type:z0,update:"none"},function(r,e,n){r=Object(g.m)({},r),e.eachComponent({mainType:"series",subType:"sunburst",query:r},o);function o(s){var u=Bl(r,[z0],s);u&&(r.dataIndex=u.node.dataIndex)}n.dispatchAction(Object(g.m)(r,{type:"highlight"}))}),a.registerAction({type:cS,update:"updateView"},function(r,e,n){r=Object(g.m)({},r),n.dispatchAction(Object(g.m)(r,{type:"downplay"}))})}var vS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){var u=this;this.seriesModel=e,this.api=o,this.ecModel=n;var c=e.getData(),v=c.tree.root,d=e.getViewRoot(),m=this.group,x=e.get("renderLabelForZeroData"),T=[];d.eachNode(function(pt){T.push(pt)});var D=this._oldChildren||[];w(T,D),rt(v,d),this._initEvents(),this._oldChildren=T;function w(pt,mt){if(pt.length===0&&mt.length===0)return;new ea.a(mt,pt,Dt,Dt).add(Lt).update(Lt).remove(g.h(Lt,null)).execute();function Dt(wt){return wt.getId()}function Lt(wt,Nt){var Gt=wt==null?null:pt[wt],Kt=Nt==null?null:mt[Nt];R(Gt,Kt)}}function R(pt,mt){if(!x&&pt&&!pt.getValue()&&(pt=null),pt!==v&&mt!==v){if(mt&&mt.piece)pt?(mt.piece.updateData(!1,pt,e,n,o),c.setItemGraphicEl(pt.dataIndex,mt.piece)):Q(mt);else if(pt){var Dt=new F0(pt,e,n,o);m.add(Dt),c.setItemGraphicEl(pt.dataIndex,Dt)}}}function Q(pt){!pt||pt.piece&&(m.remove(pt.piece),pt.piece=null)}function rt(pt,mt){mt.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,pt,e,n,o):(u.virtualPiece=new F0(pt,e,n,o),m.add(u.virtualPiece)),mt.piece.off("click"),u.virtualPiece.on("click",function(Dt){u._rootToNode(mt.parentNode)})):u.virtualPiece&&(m.remove(u.virtualPiece),u.virtualPiece=null)}},r.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(n){var o=!1,s=e.seriesModel.getViewRoot();s.eachNode(function(u){if(!o&&u.piece&&u.piece===n.target){var c=u.getModel().get("nodeClick");if(c==="rootToNode")e._rootToNode(u);else if(c==="link"){var v=u.getModel(),d=v.get("link");if(d){var m=v.get("target",!0)||"_blank";Object(Vn.l)(d,m)}}o=!0}})})},r.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Wm,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,c=e[1]-s.cy,v=Math.sqrt(u*u+c*c);return v<=s.r&&v>=s.r0}},r.type="sunburst",r}(Ln.a),dS=vS,pS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};V0(o);var s=this._levelModels=g.H(e.levels||[],function(v){return new fi.a(v,this,n)},this),u=jl.createTree(o,this,c);function c(v){v.wrapMethod("getItemModel",function(d,m){var x=u.getNodeByDataIndex(m),T=s[x.depth];return T&&(d.parentModel=T),d})}return u.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=Oa(o,this),n},r.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){sv(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(Mn.b);function V0(a){var r=0;g.k(a.children,function(n){V0(n);var o=n.value;g.t(o)&&(o=o[0]),r+=o});var e=a.value;g.t(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.t(a.value)?a.value[0]=e:a.value=e}var gS=pS,G0=Math.PI/180;function mS(a,r,e){r.eachSeriesByType(a,function(n){var o=n.get("center"),s=n.get("radius");g.t(s)||(s=[0,s]),g.t(o)||(o=[o,o]);var u=e.getWidth(),c=e.getHeight(),v=Math.min(u,c),d=Object(Le.p)(o[0],u),m=Object(Le.p)(o[1],c),x=Object(Le.p)(s[0],v/2),T=Object(Le.p)(s[1],v/2),D=-n.get("startAngle")*G0,w=n.get("minAngle")*G0,R=n.getData().tree.root,Q=n.getViewRoot(),rt=Q.depth,pt=n.get("sort");pt!=null&&U0(Q,pt);var mt=0;g.k(Q.children,function(Ne){!isNaN(Ne.getValue())&&mt++});var Dt=Q.getValue(),Lt=Math.PI/(Dt||mt)*2,wt=Q.depth>0,Nt=Q.height-(wt?-1:1),Gt=(T-x)/(Nt||1),Kt=n.get("clockwise"),te=n.get("stillShowZeroSum"),ne=Kt?1:-1,pe=function(Ne,Je){if(!!Ne){var Xe=Je;if(Ne!==R){var or=Ne.getValue(),Tr=Dt===0&&te?Lt:or*Lt;Tr<w&&(Tr=w),Xe=Je+ne*Tr;var Mr=Ne.depth-rt-(wt?-1:1),Ur=x+Gt*Mr,Yr=x+Gt*(Mr+1),fn=n.getLevelModel(Ne);if(fn){var Yn=fn.get("r0",!0),Bn=fn.get("r",!0),sn=fn.get("radius",!0);sn!=null&&(Yn=sn[0],Bn=sn[1]),Yn!=null&&(Ur=Object(Le.p)(Yn,v/2)),Bn!=null&&(Yr=Object(Le.p)(Bn,v/2))}Ne.setLayout({angle:Tr,startAngle:Je,endAngle:Xe,clockwise:Kt,cx:d,cy:m,r0:Ur,r:Yr})}if(Ne.children&&Ne.children.length){var Vr=0;g.k(Ne.children,function(bn){Vr+=pe(bn,Je+Vr)})}return Xe-Je}};if(wt){var me=x,xe=x+Gt,_e=Math.PI*2;R.setLayout({angle:_e,startAngle:D,endAngle:D+_e,clockwise:Kt,cx:d,cy:m,r0:me,r:xe})}pe(Q,D)})}function U0(a,r){var e=a.children||[];a.children=yS(e,r),e.length&&g.k(a.children,function(n){U0(n,r)})}function yS(a,r){if(g.w(r)){var e=g.H(a,function(o,s){var u=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return u}},index:s}});return e.sort(function(o,s){return r(o.params,s.params)}),g.H(e,function(o){return a[o.index]})}else{var n=r==="asc";return a.sort(function(o,s){var u=(o.getValue()-s.getValue())*(n?1:-1);return u===0?(o.dataIndex-s.dataIndex)*(n?-1:1):u})}}function xS(a){var r={};function e(n,o,s){for(var u=n;u&&u.depth>1;)u=u.parentNode;var c=o.getColorFromPalette(u.name||u.dataIndex+"",r);return n.depth>1&&Object(g.C)(c)&&(c=Object(Ir.lift)(c,(n.depth-1)/(s-1)*.5)),c}a.eachSeriesByType("sunburst",function(n){var o=n.getData(),s=o.tree;s.eachNode(function(u){var c=u.getModel(),v=c.getModel("itemStyle").getItemStyle();v.fill||(v.fill=e(u,n,s.root.height));var d=o.ensureUniqueItemVisual(u.dataIndex,"style");Object(g.m)(d,v)})})}function _S(a){a.registerChartView(dS),a.registerSeriesModel(gS),a.registerLayout(Object(g.h)(mS,"sunburst")),a.registerProcessor(Object(g.h)(Is,"sunburst")),a.registerVisual(xS),hS(a)}var H0={color:"fill",borderColor:"stroke"},bS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ms=Object(Be.o)(),SS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(e,n){return Object(va.a)(null,this)},r.prototype.getDataParams=function(e,n,o){var s=a.prototype.getDataParams.call(this,e,n);return o&&(s.info=ms(o).info),s},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(Mn.b),TS=SS;function OS(a,r){return r=r||[0,0],g.H(["x","y"],function(e,n){var o=this.getAxis(e),s=r[n],u=a[n]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-u)-o.dataToCoord(s+u))},this)}function AS(a){var r=a.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:g.c(OS,a)}}}function MS(a,r){return r=r||[0,0],g.H([0,1],function(e){var n=r[e],o=a[e]/2,s=[],u=[];return s[e]=n-o,u[e]=n+o,s[1-e]=u[1-e]=r[1-e],Math.abs(this.dataToPoint(s)[e]-this.dataToPoint(u)[e])},this)}function DS(a){var r=a.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:a.getZoom()},api:{coord:function(e){return a.dataToPoint(e)},size:g.c(MS,a)}}}function ES(a,r){var e=this.getAxis(),n=r instanceof Array?r[0]:r,o=(a instanceof Array?a[0]:a)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(n-o)-e.dataToCoord(n+o))}function CS(a){var r=a.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:Object(g.c)(ES,a)}}}function PS(a,r){return r=r||[0,0],g.H(["Radius","Angle"],function(e,n){var o="get"+e+"Axis",s=this[o](),u=r[n],c=a[n]/2,v=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(u-c)-s.dataToCoord(u+c));return e==="Angle"&&(v=v*Math.PI/180),v},this)}function wS(a){var r=a.getRadiusAxis(),e=a.getAngleAxis(),n=r.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:n[1],r0:n[0]},api:{coord:function(o){var s=r.dataToRadius(o[0]),u=e.dataToAngle(o[1]),c=a.coordToPoint([s,u]);return c.push(s,u*Math.PI/180),c},size:g.c(PS,a)}}}function LS(a){var r=a.getRect(),e=a.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(n,o){return a.dataToPoint(n,o)}}}}var P2={};function W0(a,r,e,n){return a&&(a.legacy||a.legacy!==!1&&!e&&!n&&r!=="tspan"&&(r==="text"||Object(g.q)(a,"text")))}function k0(a,r,e){var n=a,o,s,u;if(r==="text")u=n;else{u={},Object(g.q)(n,"text")&&(u.text=n.text),Object(g.q)(n,"rich")&&(u.rich=n.rich),Object(g.q)(n,"textFill")&&(u.fill=n.textFill),Object(g.q)(n,"textStroke")&&(u.stroke=n.textStroke),Object(g.q)(n,"fontFamily")&&(u.fontFamily=n.fontFamily),Object(g.q)(n,"fontSize")&&(u.fontSize=n.fontSize),Object(g.q)(n,"fontStyle")&&(u.fontStyle=n.fontStyle),Object(g.q)(n,"fontWeight")&&(u.fontWeight=n.fontWeight),s={type:"text",style:u,silent:!0},o={};var c=Object(g.q)(n,"textPosition");e?o.position=c?n.textPosition:"inside":c&&(o.position=n.textPosition),Object(g.q)(n,"textPosition")&&(o.position=n.textPosition),Object(g.q)(n,"textOffset")&&(o.offset=n.textOffset),Object(g.q)(n,"textRotation")&&(o.rotation=n.textRotation),Object(g.q)(n,"textDistance")&&(o.distance=n.textDistance)}return X0(u,a),Object(g.k)(u.rich,function(v){X0(v,v)}),{textConfig:o,textContent:s}}function X0(a,r){!r||(r.font=r.textFont||r.font,Object(g.q)(r,"textStrokeWidth")&&(a.lineWidth=r.textStrokeWidth),Object(g.q)(r,"textAlign")&&(a.align=r.textAlign),Object(g.q)(r,"textVerticalAlign")&&(a.verticalAlign=r.textVerticalAlign),Object(g.q)(r,"textLineHeight")&&(a.lineHeight=r.textLineHeight),Object(g.q)(r,"textWidth")&&(a.width=r.textWidth),Object(g.q)(r,"textHeight")&&(a.height=r.textHeight),Object(g.q)(r,"textBackgroundColor")&&(a.backgroundColor=r.textBackgroundColor),Object(g.q)(r,"textPadding")&&(a.padding=r.textPadding),Object(g.q)(r,"textBorderColor")&&(a.borderColor=r.textBorderColor),Object(g.q)(r,"textBorderWidth")&&(a.borderWidth=r.textBorderWidth),Object(g.q)(r,"textBorderRadius")&&(a.borderRadius=r.textBorderRadius),Object(g.q)(r,"textBoxShadowColor")&&(a.shadowColor=r.textBoxShadowColor),Object(g.q)(r,"textBoxShadowBlur")&&(a.shadowBlur=r.textBoxShadowBlur),Object(g.q)(r,"textBoxShadowOffsetX")&&(a.shadowOffsetX=r.textBoxShadowOffsetX),Object(g.q)(r,"textBoxShadowOffsetY")&&(a.shadowOffsetY=r.textBoxShadowOffsetY))}function Z0(a,r,e){var n=a;n.textPosition=n.textPosition||e.position||"inside",e.offset!=null&&(n.textOffset=e.offset),e.rotation!=null&&(n.textRotation=e.rotation),e.distance!=null&&(n.textDistance=e.distance);var o=n.textPosition.indexOf("inside")>=0,s=a.fill||"#000";Y0(n,r);var u=n.textFill==null;return o?u&&(n.textFill=e.insideFill||"#fff",!n.textStroke&&e.insideStroke&&(n.textStroke=e.insideStroke),!n.textStroke&&(n.textStroke=s),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(u&&(n.textFill=a.fill||e.outsideFill||"#000"),!n.textStroke&&e.outsideStroke&&(n.textStroke=e.outsideStroke)),n.text=r.text,n.rich=r.rich,Object(g.k)(r.rich,function(c){Y0(c,c)}),n}function Y0(a,r){!r||(Object(g.q)(r,"fill")&&(a.textFill=r.fill),Object(g.q)(r,"stroke")&&(a.textStroke=r.fill),Object(g.q)(r,"lineWidth")&&(a.textStrokeWidth=r.lineWidth),Object(g.q)(r,"font")&&(a.font=r.font),Object(g.q)(r,"fontStyle")&&(a.fontStyle=r.fontStyle),Object(g.q)(r,"fontWeight")&&(a.fontWeight=r.fontWeight),Object(g.q)(r,"fontSize")&&(a.fontSize=r.fontSize),Object(g.q)(r,"fontFamily")&&(a.fontFamily=r.fontFamily),Object(g.q)(r,"align")&&(a.textAlign=r.align),Object(g.q)(r,"verticalAlign")&&(a.textVerticalAlign=r.verticalAlign),Object(g.q)(r,"lineHeight")&&(a.textLineHeight=r.lineHeight),Object(g.q)(r,"width")&&(a.textWidth=r.width),Object(g.q)(r,"height")&&(a.textHeight=r.height),Object(g.q)(r,"backgroundColor")&&(a.textBackgroundColor=r.backgroundColor),Object(g.q)(r,"padding")&&(a.textPadding=r.padding),Object(g.q)(r,"borderColor")&&(a.textBorderColor=r.borderColor),Object(g.q)(r,"borderWidth")&&(a.textBorderWidth=r.borderWidth),Object(g.q)(r,"borderRadius")&&(a.textBorderRadius=r.borderRadius),Object(g.q)(r,"shadowColor")&&(a.textBoxShadowColor=r.shadowColor),Object(g.q)(r,"shadowBlur")&&(a.textBoxShadowBlur=r.shadowBlur),Object(g.q)(r,"shadowOffsetX")&&(a.textBoxShadowOffsetX=r.shadowOffsetX),Object(g.q)(r,"shadowOffsetY")&&(a.textBoxShadowOffsetY=r.shadowOffsetY),Object(g.q)(r,"textShadowColor")&&(a.textShadowColor=r.textShadowColor),Object(g.q)(r,"textShadowBlur")&&(a.textShadowBlur=r.textShadowBlur),Object(g.q)(r,"textShadowOffsetX")&&(a.textShadowOffsetX=r.textShadowOffsetX),Object(g.q)(r,"textShadowOffsetY")&&(a.textShadowOffsetY=r.textShadowOffsetY))}function w2(a,r){if(!1)var e}var IS=b("k/Px"),K0={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Q0=Object(g.F)(K0),L2=Object(g.N)(dt.a,function(a,r){return a[r]=1,a},{}),I2=dt.a.join(", "),yd=["","style","shape","extra"],af=Object(Be.o)();function km(a,r,e,n,o){var s=a+"Animation",u=Object(cr.a)(a,n,o)||{},c=af(r).userDuring;return u.duration>0&&(u.during=c?Object(g.c)(FS,{el:r,userDuring:c}):null,u.setToFinal=!0,u.scope=a),Object(g.m)(u,e[s]),u}function xd(a,r,e,n){n=n||{};var o=n.dataIndex,s=n.isInit,u=n.clearStyle,c=e.isAnimationEnabled(),v=af(a),d=r.style;v.userDuring=r.during;var m={},x={};if(VS(a,r,x),q0("shape",r,x),q0("extra",r,x),!s&&c&&(zS(a,r,m),$0("shape",a,r,m),$0("extra",a,r,m),GS(a,r,d,m)),x.style=d,RS(a,x,u),jS(a,r),c)if(s){var T={};Object(g.k)(yd,function(w){var R=w?r[w]:r;R&&R.enterFrom&&(w&&(T[w]=T[w]||{}),Object(g.m)(w?T[w]:T,R.enterFrom))});var D=km("enter",a,r,e,o);D.duration>0&&a.animateFrom(T,D)}else NS(a,r,o||0,e,m);J0(a,r),d?a.dirty():a.markRedraw()}function J0(a,r){for(var e=af(a).leaveToProps,n=0;n<yd.length;n++){var o=yd[n],s=o?r[o]:r;s&&s.leaveTo&&(e||(e=af(a).leaveToProps={}),o&&(e[o]=e[o]||{}),Object(g.m)(o?e[o]:e,s.leaveTo))}}function _d(a,r,e,n){if(a){var o=a.parent,s=af(a).leaveToProps;if(s){var u=km("update",a,r,e,0);u.done=function(){o.remove(a),n&&n()},a.animateTo(s,u)}else o.remove(a),n&&n()}}function au(a){return a==="all"}function RS(a,r,e){var n=r.style;if(!a.isGroup&&n){if(e){a.useStyle({});for(var o=a.animators,s=0;s<o.length;s++){var u=o[s];u.targetName==="style"&&u.changeTarget(a.style)}}a.setStyle(n)}r&&(r.style=null,r&&a.attr(r),r.style=n)}function NS(a,r,e,n,o){if(o){var s=km("update",a,r,n,e);s.duration>0&&a.animateFrom(o,s)}}function jS(a,r){Object(g.q)(r,"silent")&&(a.silent=r.silent),Object(g.q)(r,"ignore")&&(a.ignore=r.ignore),a instanceof Oo.c&&Object(g.q)(r,"invisible")&&(a.invisible=r.invisible),a instanceof ot.b&&Object(g.q)(r,"autoBatch")&&(a.autoBatch=r.autoBatch)}var Ro={},BS={setTransform:function(a,r){return Ro.el[a]=r,this},getTransform:function(a){return Ro.el[a]},setShape:function(a,r){var e=Ro.el,n=e.shape||(e.shape={});return n[a]=r,e.dirtyShape&&e.dirtyShape(),this},getShape:function(a){var r=Ro.el.shape;if(r)return r[a]},setStyle:function(a,r){var e=Ro.el,n=e.style;return n&&(n[a]=r,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(a){var r=Ro.el.style;if(r)return r[a]},setExtra:function(a,r){var e=Ro.el.extra||(Ro.el.extra={});return e[a]=r,this},getExtra:function(a){var r=Ro.el.extra;if(r)return r[a]}};function R2(a){}function FS(){var a=this,r=a.el;if(!!r){var e=af(r).userDuring,n=a.userDuring;if(e!==n){a.el=a.userDuring=null;return}Ro.el=r,n(BS)}}function $0(a,r,e,n){var o=e[a];if(!!o){var s=r[a],u;if(s){var c=e.transition,v=o.transition;if(v)if(!u&&(u=n[a]={}),au(v))Object(g.m)(u,s);else for(var d=Object(Be.r)(v),m=0;m<d.length;m++){var x=d[m],T=s[x];u[x]=T}else if(au(c)||Object(g.r)(c,a)>=0){!u&&(u=n[a]={});for(var D=Object(g.F)(s),m=0;m<D.length;m++){var x=D[m],T=s[x];US(o[x],T)&&(u[x]=T)}}}}}function q0(a,r,e){var n=r[a];if(!!n)for(var o=e[a]={},s=Object(g.F)(n),u=0;u<s.length;u++){var c=s[u];o[c]=Object(IS.a)(n[c])}}function zS(a,r,e){for(var n=r.transition,o=au(n)?dt.a:Object(Be.r)(n||[]),s=0;s<o.length;s++){var u=o[s];if(!(u==="style"||u==="shape"||u==="extra")){var c=a[u];e[u]=c}}}function VS(a,r,e){for(var n=0;n<Q0.length;n++){var o=Q0[n],s=K0[o],u=r[o];u&&(e[s[0]]=u[0],e[s[1]]=u[1])}for(var n=0;n<dt.a.length;n++){var c=dt.a[n];r[c]!=null&&(e[c]=r[c])}}function GS(a,r,e,n){if(!!e){var o=a.style,s;if(o){var u=e.transition,c=r.transition;if(u&&!au(u)){var v=Object(Be.r)(u);!s&&(s=n.style={});for(var d=0;d<v.length;d++){var m=v[d],x=o[m];s[m]=x}}else if(a.getAnimationStyleProps&&(au(c)||au(u)||Object(g.r)(c,"style")>=0)){var T=a.getAnimationStyleProps(),D=T?T.style:null;if(D){!s&&(s=n.style={});for(var w=Object(g.F)(e),d=0;d<w.length;d++){var m=w[d];if(D[m]){var x=o[m];s[m]=x}}}}}}}function US(a,r){return Object(g.u)(a)?a!==r:a!=null&&isFinite(a)}var N2,t1=Object(Be.o)(),HS=["percent","easing","shape","style","extra"];function e1(a){a.stopAnimation("keyframe"),a.attr(t1(a))}function bd(a,r,e){if(!(!e.isAnimationEnabled()||!r)){if(Object(g.t)(r)){Object(g.k)(r,function(c){bd(a,c,e)});return}var n=r.keyframes,o=r.duration;if(e&&o==null){var s=Object(cr.a)("enter",e,0);o=s&&s.duration}if(!(!n||!o)){var u=t1(a);Object(g.k)(yd,function(c){if(!(c&&!a[c])){var v,d=!1;n.sort(function(m,x){return m.percent-x.percent}),Object(g.k)(n,function(m){var x=a.animators,T=c?m[c]:m;if(!!T){var D=Object(g.F)(T);if(c||(D=Object(g.n)(D,function(Q){return Object(g.r)(HS,Q)<0})),!!D.length){v||(v=a.animate(c,r.loop,!0),v.scope="keyframe");for(var w=0;w<x.length;w++)x[w]!==v&&x[w].targetName===v.targetName&&x[w].stopTracks(D);c&&(u[c]=u[c]||{});var R=c?u[c]:u;Object(g.k)(D,function(Q){R[Q]=((c?a[c]:a)||{})[Q]}),v.whenWithKeys(o*m.percent,T,D,m.easing)}}}),!!v&&v.delay(r.delay||0).duration(o).start(r.easing)}})}}}var ys="emphasis",ul="normal",Xm="blur",Zm="select",fl=[ul,ys,Xm,Zm],Ym={normal:["itemStyle"],emphasis:[ys,"itemStyle"],blur:[Xm,"itemStyle"],select:[Zm,"itemStyle"]},Km={normal:["label"],emphasis:[ys,"label"],blur:[Xm,"label"],select:[Zm,"label"]},WS=["x","y"],kS="e\0\0",Ha={normal:{},emphasis:{},blur:{},select:{}},XS={cartesian2d:AS,geo:DS,singleAxis:CS,polar:wS,calendar:LS};function Qm(a){return a instanceof ot.b}function Jm(a){return a instanceof Oo.c}function ZS(a,r){r.copyTransform(a),Jm(r)&&Jm(a)&&(r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r.invisible=a.invisible,r.ignore=a.ignore,Qm(r)&&Qm(a)&&r.setShape(a.shape))}var YS=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._data,c=e.getData(),v=this.group,d=n1(e,c,n,o);u||v.removeAll(),c.diff(u).add(function(x){ty(o,null,x,d(x,s),e,v,c)}).remove(function(x){var T=u.getItemGraphicEl(x);_d(T,ms(T).option,e)}).update(function(x,T){var D=u.getItemGraphicEl(T);ty(o,D,x,d(x,s),e,v,c)}).execute();var m=e.get("clip",!0)?pa(e.coordinateSystem,!1,e):null;m?v.setClipPath(m):v.removeClipPath(),this._data=c},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(e,n,o,s,u){var c=n.getData(),v=n1(n,c,o,s),d=this._progressiveEls=[];function m(D){D.isGroup||(D.incremental=!0,D.ensureState("emphasis").hoverLayer=!0)}for(var x=e.start;x<e.end;x++){var T=ty(null,null,x,v(x,u),n,this.group,c);T&&(T.traverse(m),d.push(T))}},r.prototype.eachRendered=function(e){_r.traverseElements(this._progressiveEls||this.group,e)},r.prototype.filterForExposedEvent=function(e,n,o,s){var u=n.element;if(u==null||o.name===u)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===u)return!0;return!1},r.type="custom",r}(Ln.a),KS=YS;function $m(a){var r=a.type,e;if(r==="path"){var n=a.shape,o=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,s=l1(n);e=_r.makePath(s,null,o,n.layout||"center"),ms(e).customPathData=s}else if(r==="image")e=new gt.a({}),ms(e).customImagePath=a.style.image;else if(r==="text")e=new he.a({});else if(r==="group")e=new Pr.a;else{if(r==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=_r.getShapeClass(r);if(!u){var c="";Object($r.c)(c)}e=new u}return ms(e).customGraphicType=r,e.name=a.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function qm(a,r,e,n,o,s,u){e1(r);var c=o&&o.normal.cfg;c&&r.setTextConfig(c),n&&n.transition==null&&(n.transition=WS);var v=n&&n.style;if(v){if(r.type==="text"){var d=v;Object(g.q)(d,"textFill")&&(d.fill=d.textFill),Object(g.q)(d,"textStroke")&&(d.stroke=d.textStroke)}var m=void 0,x=Qm(r)?v.decal:null;a&&x&&(x.dirty=!0,m=Object(Ys.a)(x,a)),v.__decalPattern=m}if(Jm(r)&&v){var m=v.__decalPattern;m&&(v.decal=m)}xd(r,n,s,{dataIndex:e,isInit:u,clearStyle:!0}),bd(r,n.keyframeAnimation,s)}function r1(a,r,e,n,o){var s=r.isGroup?null:r,u=o&&o[a].cfg;if(s){var c=s.ensureState(a);if(n===!1){var v=s.getState(a);v&&(v.style=null)}else c.style=n||null;u&&(c.textConfig=u),Object(ar.G)(s)}}function QS(a,r,e){if(!a.isGroup){var n=a,o=e.currentZ,s=e.currentZLevel;n.z=o,n.zlevel=s;var u=r.z2;u!=null&&(n.z2=u||0);for(var c=0;c<fl.length;c++)JS(n,r,fl[c])}}function JS(a,r,e){var n=e===ul,o=n?r:Sd(r,e),s=o?o.z2:null,u;s!=null&&(u=n?a:a.ensureState(e),u.z2=s||0)}function n1(a,r,e,n){var o=a.get("renderItem"),s=a.coordinateSystem,u={};s&&(u=s.prepareCustoms?s.prepareCustoms(s):XS[s.type](s));for(var c=Object(g.i)({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:Dt,style:wt,ordinalRawValue:Lt,styleEmphasis:Nt,visual:te,barLayout:ne,currentSeriesIndices:pe,font:me},u.api||{}),v={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:u.coordSys,dataInsideLength:r.count(),encode:$S(a.getData())},d,m,x={},T={},D={},w={},R=0;R<fl.length;R++){var Q=fl[R];D[Q]=a.getModel(Ym[Q]),w[Q]=a.getModel(Km[Q])}function rt(xe){return xe===d?m||(m=r.getItemModel(xe)):r.getItemModel(xe)}function pt(xe,_e){return r.hasItemOption?xe===d?x[_e]||(x[_e]=rt(xe).getModel(Ym[_e])):rt(xe).getModel(Ym[_e]):D[_e]}function mt(xe,_e){return r.hasItemOption?xe===d?T[_e]||(T[_e]=rt(xe).getModel(Km[_e])):rt(xe).getModel(Km[_e]):w[_e]}return function(xe,_e){return d=xe,m=null,x={},T={},o&&o(Object(g.i)({dataIndexInside:xe,dataIndex:r.getRawIndex(xe),actionType:_e?_e.type:null},v),c)};function Dt(xe,_e){return _e==null&&(_e=d),r.getStore().get(r.getDimensionIndex(xe||0),_e)}function Lt(xe,_e){_e==null&&(_e=d),xe=xe||0;var Ne=r.getDimensionInfo(xe);if(!Ne){var Je=r.getDimensionIndex(xe);return Je>=0?r.getStore().get(Je,_e):void 0}var Xe=r.get(Ne.name,_e),or=Ne&&Ne.ordinalMeta;return or?or.categories[Xe]:Xe}function wt(xe,_e){_e==null&&(_e=d);var Ne=r.getItemVisual(_e,"style"),Je=Ne&&Ne.fill,Xe=Ne&&Ne.opacity,or=pt(_e,ul).getItemStyle();Je!=null&&(or.fill=Je),Xe!=null&&(or.opacity=Xe);var Tr={inheritColor:Object(g.C)(Je)?Je:"#000"},Mr=mt(_e,ul),Ur=xr.c(Mr,null,Tr,!1,!0);Ur.text=Mr.getShallow("show")?Object(g.P)(a.getFormattedLabel(_e,ul),zn(r,_e)):null;var Yr=xr.b(Mr,Tr,!1);return Kt(xe,or),or=Z0(or,Ur,Yr),xe&&Gt(or,xe),or.legacy=!0,or}function Nt(xe,_e){_e==null&&(_e=d);var Ne=pt(_e,ys).getItemStyle(),Je=mt(_e,ys),Xe=xr.c(Je,null,null,!0,!0);Xe.text=Je.getShallow("show")?Object(g.Q)(a.getFormattedLabel(_e,ys),a.getFormattedLabel(_e,ul),zn(r,_e)):null;var or=xr.b(Je,null,!0);return Kt(xe,Ne),Ne=Z0(Ne,Xe,or),xe&&Gt(Ne,xe),Ne.legacy=!0,Ne}function Gt(xe,_e){for(var Ne in _e)Object(g.q)(_e,Ne)&&(xe[Ne]=_e[Ne])}function Kt(xe,_e){xe&&(xe.textFill&&(_e.textFill=xe.textFill),xe.textPosition&&(_e.textPosition=xe.textPosition))}function te(xe,_e){if(_e==null&&(_e=d),Object(g.q)(H0,xe)){var Ne=r.getItemVisual(_e,"style");return Ne?Ne[H0[xe]]:null}if(Object(g.q)(bS,xe))return r.getItemVisual(_e,xe)}function ne(xe){if(s.type==="cartesian2d"){var _e=s.getBaseAxis();return Object(Fi.b)(Object(g.i)({axis:_e},xe))}}function pe(){return e.getCurrentSeriesIndices()}function me(xe){return xr.d(xe,e)}}function $S(a){var r={};return Object(g.k)(a.dimensions,function(e){var n=a.getDimensionInfo(e);if(!n.isExtraCoord){var o=n.coordDim,s=r[o]=r[o]||[];s[n.coordDimIndex]=a.getDimensionIndex(e)}}),r}function ty(a,r,e,n,o,s,u){if(!n){s.remove(r);return}var c=ey(a,r,e,n,o,s);return c&&u.setItemGraphicEl(e,c),c&&Object(ar.J)(c,n.focus,n.blurScope,n.emphasisDisabled),c}function ey(a,r,e,n,o,s){var u=-1,c=r;r&&i1(r,n,o)&&(u=Object(g.r)(s.childrenRef(),r),r=null);var v=!r,d=r;d?d.clearStates():(d=$m(n),c&&ZS(c,d)),n.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),Ha.normal.cfg=Ha.normal.conOpt=Ha.emphasis.cfg=Ha.emphasis.conOpt=Ha.blur.cfg=Ha.blur.conOpt=Ha.select.cfg=Ha.select.conOpt=null,Ha.isLegacy=!1,tT(d,e,n,o,v,Ha),qS(d,e,n,o,v),qm(a,d,e,n,Ha,o,v),Object(g.q)(n,"info")&&(ms(d).info=n.info);for(var m=0;m<fl.length;m++){var x=fl[m];if(x!==ul){var T=Sd(n,x),D=ry(n,T,x);r1(x,d,T,D,Ha)}}return QS(d,n,o),n.type==="group"&&eT(a,d,e,n,o),u>=0?s.replaceAt(d,u):s.add(d),d}function i1(a,r,e){var n=ms(a),o=r.type,s=r.shape,u=r.style;return e.isUniversalTransitionEnabled()||o!=null&&o!==n.customGraphicType||o==="path"&&iT(s)&&l1(s)!==n.customPathData||o==="image"&&Object(g.q)(u,"image")&&u.image!==n.customImagePath}function qS(a,r,e,n,o){var s=e.clipPath;if(s===!1)a&&a.getClipPath()&&a.removeClipPath();else if(s){var u=a.getClipPath();u&&i1(u,s,n)&&(u=null),u||(u=$m(s),a.setClipPath(u)),qm(null,u,r,s,null,n,o)}}function tT(a,r,e,n,o,s){if(!a.isGroup){a1(e,null,s),a1(e,ys,s);var u=s.normal.conOpt,c=s.emphasis.conOpt,v=s.blur.conOpt,d=s.select.conOpt;if(u!=null||c!=null||d!=null||v!=null){var m=a.getTextContent();if(u===!1)m&&a.removeTextContent();else{u=s.normal.conOpt=u||{type:"text"},m?m.clearStates():(m=$m(u),a.setTextContent(m)),qm(null,m,r,u,null,n,o);for(var x=u&&u.style,T=0;T<fl.length;T++){var D=fl[T];if(D!==ul){var w=s[D].conOpt;r1(D,m,w,ry(u,w,D),null)}}x?m.dirty():m.markRedraw()}}}}function a1(a,r,e){var n=r?Sd(a,r):a,o=r?ry(a,n,ys):a.style,s=a.type,u=n?n.textConfig:null,c=a.textContent,v=c?r?Sd(c,r):c:null;if(o&&(e.isLegacy||W0(o,s,!!u,!!v))){e.isLegacy=!0;var d=k0(o,s,!r);!u&&d.textConfig&&(u=d.textConfig),!v&&d.textContent&&(v=d.textContent)}if(!r&&v){var m=v;!m.type&&(m.type="text")}var x=r?e[r]:e.normal;x.cfg=u,x.conOpt=v}function Sd(a,r){return r?a?a[r]:null:a}function ry(a,r,e){var n=r&&r.style;return n==null&&e===ys&&a&&(n=a.styleEmphasis),n}function eT(a,r,e,n,o){var s=n.children,u=s?s.length:0,c=n.$mergeChildren,v=c==="byName"||n.diffChildrenByName,d=c===!1;if(!(!u&&!v&&!d)){if(v){rT({api:a,oldChildren:r.children()||[],newChildren:s||[],dataIndex:e,seriesModel:o,group:r});return}d&&r.removeAll();for(var m=0;m<u;m++)s[m]&&ey(a,r.childAt(m),e,s[m],o,r);for(var x=r.childCount()-1;x>=m;x--){var T=r.childAt(x);_d(T,ms(r).option,o)}}}function rT(a){new ea.a(a.oldChildren,a.newChildren,o1,o1,a).add(s1).update(s1).remove(nT).execute()}function o1(a,r){var e=a&&a.name;return e!=null?e:kS+r}function s1(a,r){var e=this.context,n=a!=null?e.newChildren[a]:null,o=r!=null?e.oldChildren[r]:null;ey(e.api,o,e.dataIndex,n,e.seriesModel,e.group)}function nT(a){var r=this.context,e=r.oldChildren[a];_d(e,ms(e).option,r.seriesModel)}function l1(a){return a&&(a.pathData||a.d)}function iT(a){return a&&(Object(g.q)(a,"pathData")||Object(g.q)(a,"d"))}function aT(a){a.registerChartView(KS),a.registerSeriesModel(TS)}var ou=Object(Be.o)(),u1=g.d,ny=g.c,oT=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(r,e,n,o){var s=e.get("value"),u=e.get("status");if(this._axisModel=r,this._axisPointerModel=e,this._api=n,!(!o&&this._lastValue===s&&this._lastStatus===u)){this._lastValue=s,this._lastStatus=u;var c=this._group,v=this._handle;if(!u||u==="hide"){c&&c.hide(),v&&v.hide();return}c&&c.show(),v&&v.show();var d={};this.makeElOption(d,s,r,e,n);var m=d.graphicKey;m!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=m;var x=this._moveAnimation=this.determineAnimation(r,e);if(!c)c=this._group=new Pr.a,this.createPointerEl(c,d,r,e),this.createLabelEl(c,d,r,e),n.getZr().add(c);else{var T=g.h(f1,e,x);this.updatePointerEl(c,d,T),this.updateLabelEl(c,d,T,e)}v1(c,e,!0),this._renderHandle(s)}},a.prototype.remove=function(r){this.clear(r)},a.prototype.dispose=function(r){this.clear(r)},a.prototype.determineAnimation=function(r,e){var n=e.get("animation"),o=r.axis,s=o.type==="category",u=e.get("snap");if(!u&&!s)return!1;if(n==="auto"||n==null){var c=this.animationThreshold;if(s&&o.getBandWidth()>c)return!0;if(u){var v=Of(r).seriesDataCount,d=o.getExtent();return Math.abs(d[0]-d[1])/v>c}return!1}return n===!0},a.prototype.makeElOption=function(r,e,n,o,s){},a.prototype.createPointerEl=function(r,e,n,o){var s=e.pointer;if(s){var u=ou(r).pointerEl=new _r[s.type](u1(e.pointer));r.add(u)}},a.prototype.createLabelEl=function(r,e,n,o){if(e.label){var s=ou(r).labelEl=new he.a(u1(e.label));r.add(s),h1(s,o)}},a.prototype.updatePointerEl=function(r,e,n){var o=ou(r).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),n(o,{shape:e.pointer.shape}))},a.prototype.updateLabelEl=function(r,e,n,o){var s=ou(r).labelEl;s&&(s.setStyle(e.label.style),n(s,{x:e.label.x,y:e.label.y}),h1(s,o))},a.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,n=this._api.getZr(),o=this._handle,s=e.getModel("handle"),u=e.get("status");if(!s.get("show")||!u||u==="hide"){o&&n.remove(o),this._handle=null;return}var c;this._handle||(c=!0,o=this._handle=_r.createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){ae.g(d.event)},onmousedown:ny(this._onHandleDragMove,this,0,0),drift:ny(this._onHandleDragMove,this),ondragend:ny(this._onHandleDragEnd,this)}),n.add(o)),v1(o,e,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var v=s.get("size");g.t(v)||(v=[v,v]),o.scaleX=v[0]/2,o.scaleY=v[1]/2,Gn.b(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,c)}},a.prototype._moveHandleToValue=function(r,e){f1(this._axisPointerModel,!e&&this._moveAnimation,this._handle,iy(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(r,e){var n=this._handle;if(!!n){this._dragging=!0;var o=this.updateHandleTransform(iy(n),[r,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(iy(o)),ou(n).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(!!r){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(!!r){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var e=r.getZr(),n=this._group,o=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),Gn.a(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(r,e,n){return n=n||0,{x:r[n],y:r[1-n],width:e[n],height:e[1-n]}},a}();function f1(a,r,e,n){c1(ou(e).lastProp,n)||(ou(e).lastProp=n,r?cr.h(e,n,a):(e.stopAnimation(),e.attr(n)))}function c1(a,r){if(g.A(a)&&g.A(r)){var e=!0;return g.k(r,function(n,o){e=e&&c1(a[o],n)}),!!e}else return a===r}function h1(a,r){a[r.get(["label","show"])?"show":"hide"]()}function iy(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function v1(a,r,e){var n=r.get("z"),o=r.get("zlevel");a&&a.traverse(function(s){s.type!=="group"&&(n!=null&&(s.z=n),o!=null&&(s.zlevel=o),s.silent=e)})}var ay=oT;function oy(a){var r=a.get("type"),e=a.getModel(r+"Style"),n;return r==="line"?(n=e.getLineStyle(),n.fill=null):r==="shadow"&&(n=e.getAreaStyle(),n.stroke=null),n}function d1(a,r,e,n,o){var s=e.get("value"),u=p1(s,r.axis,r.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),c=e.getModel("label"),v=Vn.j(c.get("padding")||0),d=c.getFont(),m=lt.d(u,d),x=o.position,T=m.width+v[1]+v[3],D=m.height+v[0]+v[2],w=o.align;w==="right"&&(x[0]-=T),w==="center"&&(x[0]-=T/2);var R=o.verticalAlign;R==="bottom"&&(x[1]-=D),R==="middle"&&(x[1]-=D/2),sT(x,T,D,n);var Q=c.get("backgroundColor");(!Q||Q==="auto")&&(Q=r.get(["axisLine","lineStyle","color"])),a.label={x:x[0],y:x[1],style:Object(xr.c)(c,{text:u,font:d,fill:c.getTextColor(),padding:v,backgroundColor:Q}),z2:10}}function sT(a,r,e,n){var o=n.getWidth(),s=n.getHeight();a[0]=Math.min(a[0]+r,o)-r,a[1]=Math.min(a[1]+e,s)-e,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function p1(a,r,e,n,o){a=r.scale.parse(a);var s=r.scale.getLabel({value:a},{precision:o.precision}),u=o.formatter;if(u){var c={value:di.c(r,{value:a}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};g.k(n,function(v){var d=e.getSeriesByIndex(v.seriesIndex),m=v.dataIndexInside,x=d&&d.getDataParams(m);x&&c.seriesData.push(x)}),g.C(u)?s=u.replace("{value}",s):g.w(u)&&(s=u(c))}return s}function sy(a,r,e){var n=xn.c();return xn.g(n,n,e.rotation),xn.i(n,n,e.position),_r.applyTransform([a.dataToCoord(r),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],n)}function g1(a,r,e,n,o,s){var u=$a.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=o.get(["label","margin"]),d1(r,n,o,s,{position:sy(n.axis,a,e),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function ly(a,r,e){return e=e||0,{x1:a[e],y1:a[1-e],x2:r[e],y2:r[1-e]}}function m1(a,r,e){return e=e||0,{x:a[e],y:a[1-e],width:r[e],height:r[1-e]}}function y1(a,r,e,n,o,s){return{cx:a,cy:r,r0:e,r:n,startAngle:o,endAngle:s,clockwise:!0}}var lT=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var c=o.axis,v=c.grid,d=s.get("type"),m=x1(v,c).getOtherAxis(c).getGlobalExtent(),x=c.toGlobalCoord(c.dataToCoord(n,!0));if(d&&d!=="none"){var T=oy(s),D=uT[d](c,x,m);D.style=T,e.graphicKey=D.type,e.pointer=D}var w=_f(v.model,o);g1(n,e,w,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=_f(n.axis.grid.model,n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=sy(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,c=u.grid,v=u.getGlobalExtent(!0),d=x1(c,u).getOtherAxis(u).getGlobalExtent(),m=u.dim==="x"?0:1,x=[e.x,e.y];x[m]+=n[m],x[m]=Math.min(v[1],x[m]),x[m]=Math.max(v[0],x[m]);var T=(d[1]+d[0])/2,D=[T,T];D[m]=x[m];var w=[{verticalAlign:"middle"},{align:"center"}];return{x:x[0],y:x[1],rotation:e.rotation,cursorPoint:D,tooltipOption:w[m]}},r}(ay);function x1(a,r){var e={};return e[r.dim+"AxisIndex"]=r.index,a.getCartesian(e)}var uT={line:function(a,r,e){var n=ly([r,e[0]],[r,e[1]],_1(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=Math.max(1,a.getBandWidth()),o=e[1]-e[0];return{type:"Rect",shape:m1([r-n/2,e[0]],[n,o],_1(a))}}};function _1(a){return a.dim==="x"?0:1}var fT=lT,cT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}($n.a),hT=cT,ia=b("QO9Q"),xs=Object(Be.o)(),vT=g.k;function b1(a,r,e){if(!ia.a.node){var n=r.getZr();xs(n).records||(xs(n).records={}),dT(n,r);var o=xs(n).records[a]||(xs(n).records[a]={});o.handler=e}}function dT(a,r){if(xs(a).initialized)return;xs(a).initialized=!0,e("click",g.h(S1,"click")),e("mousemove",g.h(S1,"mousemove")),e("globalout",gT);function e(n,o){a.on(n,function(s){var u=mT(r);vT(xs(a).records,function(c){c&&o(c,s,u.dispatchAction)}),pT(u.pendings,r)})}}function pT(a,r){var e=a.showTip.length,n=a.hideTip.length,o;e?o=a.showTip[e-1]:n&&(o=a.hideTip[n-1]),o&&(o.dispatchAction=null,r.dispatchAction(o))}function gT(a,r,e){a.handler("leave",null,e)}function S1(a,r,e,n){r.handler(a,e,n)}function mT(a){var r={showTip:[],hideTip:[]},e=function(n){var o=r[n.type];o?o.push(n):(n.dispatchAction=e,a.dispatchAction(n))};return{dispatchAction:e,pendings:r}}function uy(a,r){if(!ia.a.node){var e=r.getZr(),n=(xs(e).records||{})[a];n&&(xs(e).records[a]=null)}}var yT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=n.getComponent("tooltip"),u=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";b1("axisPointer",o,function(c,v,d){u!=="none"&&(c==="leave"||u.indexOf(c)>=0)&&d({type:"updateAxisPointer",currTrigger:c,x:v&&v.offsetX,y:v&&v.offsetY})})},r.prototype.remove=function(e,n){uy("axisPointer",n)},r.prototype.dispose=function(e,n){uy("axisPointer",n)},r.type="axisPointer",r}(gn.a),xT=yT;function T1(a,r){var e=[],n=a.seriesIndex,o;if(n==null||!(o=r.getSeriesByIndex(n)))return{point:[]};var s=o.getData(),u=Be.u(s,a);if(u==null||u<0||g.t(u))return{point:[]};var c=s.getItemGraphicEl(u),v=o.coordinateSystem;if(o.getTooltipPosition)e=o.getTooltipPosition(u)||[];else if(v&&v.dataToPoint)if(a.isStacked){var d=v.getBaseAxis(),m=v.getOtherAxis(d),x=m.dim,T=d.dim,D=x==="x"||x==="radius"?1:0,w=s.mapDimension(T),R=[];R[D]=s.get(w,u),R[1-D]=s.get(s.getCalculationInfo("stackResultDimension"),u),e=v.dataToPoint(R)||[]}else e=v.dataToPoint(s.getValues(g.H(v.dimensions,function(rt){return s.mapDimension(rt)}),u))||[];else if(c){var Q=c.getBoundingRect().clone();Q.applyTransform(c.transform),e=[Q.x+Q.width/2,Q.y+Q.height/2]}return{point:e,el:c}}var O1=Object(Be.o)();function _T(a,r,e){var n=a.currTrigger,o=[a.x,a.y],s=a,u=a.dispatchAction||Object(g.c)(e.dispatchAction,e),c=r.getComponent("axisPointer").coordSysAxesInfo;if(!!c){Td(o)&&(o=T1({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},r).point);var v=Td(o),d=s.axesInfo,m=c.axesInfo,x=n==="leave"||Td(o),T={},D={},w={list:[],map:{}},R={showPointer:Object(g.h)(ST,D),showTooltip:Object(g.h)(TT,w)};Object(g.k)(c.coordSysMap,function(rt,pt){var mt=v||rt.containPoint(o);Object(g.k)(c.coordSysAxesInfo[pt],function(Dt,Lt){var wt=Dt.axis,Nt=DT(d,Dt);if(!x&&mt&&(!d||Nt)){var Gt=Nt&&Nt.value;Gt==null&&!v&&(Gt=wt.pointToData(o)),Gt!=null&&A1(Dt,Gt,R,!1,T)}})});var Q={};return Object(g.k)(m,function(rt,pt){var mt=rt.linkGroup;mt&&!D[pt]&&Object(g.k)(mt.axesInfo,function(Dt,Lt){var wt=D[Lt];if(Dt!==rt&&wt){var Nt=wt.value;mt.mapper&&(Nt=rt.axis.scale.parse(mt.mapper(Nt,M1(Dt),M1(rt)))),Q[rt.key]=Nt}})}),Object(g.k)(Q,function(rt,pt){A1(m[pt],rt,R,!0,T)}),OT(D,m,T),AT(w,o,a,u),MT(m,u,e),T}}function A1(a,r,e,n,o){var s=a.axis;if(!(s.scale.isBlank()||!s.containData(r))){if(!a.involveSeries){e.showPointer(a,r);return}var u=bT(r,a),c=u.payloadBatch,v=u.snapToValue;c[0]&&o.seriesIndex==null&&Object(g.m)(o,c[0]),!n&&a.snap&&s.containData(v)&&v!=null&&(r=v),e.showPointer(a,r,c),e.showTooltip(a,u,v)}}function bT(a,r){var e=r.axis,n=e.dim,o=a,s=[],u=Number.MAX_VALUE,c=-1;return Object(g.k)(r.seriesModels,function(v,d){var m=v.getData().mapDimensionsAll(n),x,T;if(v.getAxisTooltipData){var D=v.getAxisTooltipData(m,a,e);T=D.dataIndices,x=D.nestestValue}else{if(T=v.getData().indicesOfNearest(m[0],a,e.type==="category"?.5:null),!T.length)return;x=v.getData().get(m[0],T[0])}if(!(x==null||!isFinite(x))){var w=a-x,R=Math.abs(w);R<=u&&((R<u||w>=0&&c<0)&&(u=R,c=w,o=x,s.length=0),Object(g.k)(T,function(Q){s.push({seriesIndex:v.seriesIndex,dataIndexInside:Q,dataIndex:v.getData().getRawIndex(Q)})}))}}),{payloadBatch:s,snapToValue:o}}function ST(a,r,e,n){a[r.key]={value:e,payloadBatch:n}}function TT(a,r,e,n){var o=e.payloadBatch,s=r.axis,u=s.model,c=r.axisPointerModel;if(!(!r.triggerTooltip||!o.length)){var v=r.coordSys.model,d=El(v),m=a.map[d];m||(m=a.map[d]={coordSysId:v.id,coordSysIndex:v.componentIndex,coordSysType:v.type,coordSysMainType:v.mainType,dataByAxis:[]},a.list.push(m)),m.dataByAxis.push({axisDim:s.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:n,valueLabelOpt:{precision:c.get(["label","precision"]),formatter:c.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function OT(a,r,e){var n=e.axesInfo=[];Object(g.k)(r,function(o,s){var u=o.axisPointerModel.option,c=a[s];c?(!o.useHandle&&(u.status="show"),u.value=c.value,u.seriesDataIndices=(c.payloadBatch||[]).slice()):!o.useHandle&&(u.status="hide"),u.status==="show"&&n.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:u.value})})}function AT(a,r,e,n){if(Td(r)||!a.list.length){n({type:"hideTip"});return}var o=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:a.list})}function MT(a,r,e){var n=e.getZr(),o="axisPointerLastHighlights",s=O1(n)[o]||{},u=O1(n)[o]={};Object(g.k)(a,function(d,m){var x=d.axisPointerModel.option;x.status==="show"&&Object(g.k)(x.seriesDataIndices,function(T){var D=T.seriesIndex+" | "+T.dataIndex;u[D]=T})});var c=[],v=[];Object(g.k)(s,function(d,m){!u[m]&&v.push(d)}),Object(g.k)(u,function(d,m){!s[m]&&c.push(d)}),v.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:v}),c.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:c})}function DT(a,r){for(var e=0;e<(a||[]).length;e++){var n=a[e];if(r.axis.dim===n.axisDim&&r.axis.model.componentIndex===n.axisIndex)return n}}function M1(a){var r=a.axis.model,e={},n=e.axisDim=a.axis.dim;return e.axisIndex=e[n+"AxisIndex"]=r.componentIndex,e.axisName=e[n+"AxisName"]=r.name,e.axisId=e[n+"AxisId"]=r.id,e}function Td(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Zc(a){Jo.registerAxisPointerClass("CartesianAxisPointer",fT),a.registerComponentModel(hT),a.registerComponentView(xT),a.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var e=r.axisPointer.link;e&&!Object(g.t)(e)&&(r.axisPointer.link=[e])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(r,e){r.getComponent("axisPointer").coordSysAxesInfo=sp(r,e)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},_T)}function ET(a){Object(B.a)(wi),Object(B.a)(Zc)}var CT=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var c=o.axis;c.dim==="angle"&&(this.animationThreshold=Math.PI/18);var v=c.polar,d=v.getOtherAxis(c),m=d.getExtent(),x=c.dataToCoord(n),T=s.get("type");if(T&&T!=="none"){var D=oy(s),w=wT[T](c,v,x,m);w.style=D,e.graphicKey=w.type,e.pointer=w}var R=s.get(["label","margin"]),Q=PT(n,o,s,v,R);d1(e,o,s,u,Q)},r}(ay);function PT(a,r,e,n,o){var s=r.axis,u=s.dataToCoord(a),c=n.getAngleAxis().getExtent()[0];c=c/180*Math.PI;var v=n.getRadiusAxis().getExtent(),d,m,x;if(s.dim==="radius"){var T=xn.c();xn.g(T,T,c),xn.i(T,T,[n.cx,n.cy]),d=_r.applyTransform([u,-o],T);var D=r.getModel("axisLabel").get("rotate")||0,w=$a.innerTextLayout(c,D*Math.PI/180,-1);m=w.textAlign,x=w.textVerticalAlign}else{var R=v[1];d=n.coordToPoint([R+o,u]);var Q=n.cx,rt=n.cy;m=Math.abs(d[0]-Q)/R<.3?"center":d[0]>Q?"left":"right",x=Math.abs(d[1]-rt)/R<.3?"middle":d[1]>rt?"top":"bottom"}return{position:d,align:m,verticalAlign:x}}var wT={line:function(a,r,e,n){return a.dim==="angle"?{type:"Line",shape:ly(r.coordToPoint([n[0],e]),r.coordToPoint([n[1],e]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:e}}},shadow:function(a,r,e,n){var o=Math.max(1,a.getBandWidth()),s=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:y1(r.cx,r.cy,n[0],n[1],(-e-o/2)*s,(-e+o/2)*s)}:{type:"Sector",shape:y1(r.cx,r.cy,e-o/2,e+o/2,0,Math.PI*2)}}},LT=CT,IT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.findAxisModel=function(e){var n,o=this.ecModel;return o.eachComponent(e,function(s){s.getCoordSysModel()===this&&(n=s)},this),n},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}($n.a),RT=IT,fy=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Be.b).models[0]},r.type="polarAxis",r}($n.a);g.K(fy,Rs.a);var NT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="angleAxis",r}(fy),jT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="radiusAxis",r}(fy),cy=function(a){Object(Pe.a)(r,a);function r(e,n){return a.call(this,"radius",e,n)||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r}(ba.a);cy.prototype.dataToRadius=ba.a.prototype.dataToCoord,cy.prototype.radiusToData=ba.a.prototype.coordToData;var BT=cy,FT=Object(Be.o)(),hy=function(a){Object(Pe.a)(r,a);function r(e,n){return a.call(this,"angle",e,n||[0,360])||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var e=this,n=e.getLabelModel(),o=e.scale,s=o.getExtent(),u=o.count();if(s[1]-s[0]<1)return 0;var c=s[0],v=e.dataToCoord(c+1)-e.dataToCoord(c),d=Math.abs(v),m=lt.d(c==null?"":c+"",n.getFont(),"center","top"),x=Math.max(m.height,7),T=x/d;isNaN(T)&&(T=Infinity);var D=Math.max(0,Math.floor(T)),w=FT(e.model),R=w.lastAutoInterval,Q=w.lastTickCount;return R!=null&&Q!=null&&Math.abs(R-D)<=1&&Math.abs(Q-u)<=1&&R>D?D=R:(w.lastTickCount=u,w.lastAutoInterval=D),D},r}(ba.a);hy.prototype.dataToAngle=ba.a.prototype.dataToCoord,hy.prototype.angleToData=ba.a.prototype.coordToData;var zT=hy,D1=["radius","angle"],VT=function(){function a(r){this.dimensions=D1,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new BT,this._angleAxis=new zT,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var e=this.pointToCoord(r);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var e="_"+r+"Axis";return this[e]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var e=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===r&&e.push(n),o.scale.type===r&&e.push(o),e},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var e=this._angleAxis;return r===e?this._radiusAxis:e},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var e=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},a.prototype.dataToPoint=function(r,e){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],e),this._angleAxis.dataToAngle(r[1],e)])},a.prototype.pointToData=function(r,e){var n=this.pointToCoord(r);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},a.prototype.pointToCoord=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=this.getAngleAxis(),s=o.getExtent(),u=Math.min(s[0],s[1]),c=Math.max(s[0],s[1]);o.inverse?u=c-360:c=u+360;var v=Math.sqrt(e*e+n*n);e/=v,n/=v;for(var d=Math.atan2(-n,e)/Math.PI*180,m=d<u?1:-1;d<u||d>c;)d+=m*360;return[v,d]},a.prototype.coordToPoint=function(r){var e=r[0],n=r[1]/180*Math.PI,o=Math.cos(n)*e+this.cx,s=-Math.sin(n)*e+this.cy;return[o,s]},a.prototype.getArea=function(){var r=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var o=r.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:r.inverse,contain:function(u,c){var v=u-this.cx,d=c-this.cy,m=v*v+d*d-1e-4,x=this.r,T=this.r0;return m<=x*x&&m>=T*T}}},a.prototype.convertToPixel=function(r,e,n){var o=E1(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=E1(e);return o===this?this.pointToData(n):null},a}();function E1(a){var r=a.seriesModel,e=a.polarModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var GT=VT;function UT(a,r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight();a.cx=Object(Le.p)(n[0],o),a.cy=Object(Le.p)(n[1],s);var u=a.getRadiusAxis(),c=Math.min(o,s)/2,v=r.get("radius");v==null?v=[0,"100%"]:g.t(v)||(v=[0,v]);var d=[Object(Le.p)(v[0],c),Object(Le.p)(v[1],c)];u.inverse?u.setExtent(d[1],d[0]):u.setExtent(d[0],d[1])}function HT(a,r){var e=this,n=e.getAngleAxis(),o=e.getRadiusAxis();if(n.scale.setExtent(Infinity,-Infinity),o.scale.setExtent(Infinity,-Infinity),a.eachSeries(function(c){if(c.coordinateSystem===e){var v=c.getData();g.k(Object(di.d)(v,"radius"),function(d){o.scale.unionExtentFromData(v,d)}),g.k(Object(di.d)(v,"angle"),function(d){n.scale.unionExtentFromData(v,d)})}}),Object(di.i)(n.scale,n.model),Object(di.i)(o.scale,o.model),n.type==="category"&&!n.onBand){var s=n.getExtent(),u=360/n.scale.count();n.inverse?s[1]+=u:s[1]-=u,n.setExtent(s[0],s[1])}}function WT(a){return a.mainType==="angleAxis"}function C1(a,r){if(a.type=r.get("type"),a.scale=Object(di.a)(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),WT(r)){a.inverse=a.inverse!==r.get("clockwise");var e=r.get("startAngle");a.setExtent(e,e+(a.inverse?-360:360))}r.axis=a,a.model=r}var kT={dimensions:D1,create:function(a,r){var e=[];return a.eachComponent("polar",function(n,o){var s=new GT(o+"");s.update=HT;var u=s.getRadiusAxis(),c=s.getAngleAxis(),v=n.findAxisModel("radiusAxis"),d=n.findAxisModel("angleAxis");C1(u,v),C1(c,d),UT(s,n,r),e.push(s),n.coordinateSystem=s,s.model=n}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var o=n.getReferringComponents("polar",Be.b).models[0];n.coordinateSystem=o.coordinateSystem}}),e}},XT=kT,ZT=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Od(a,r,e){r[1]>r[0]&&(r=r.slice().reverse());var n=a.coordToPoint([r[0],e]),o=a.coordToPoint([r[1],e]);return{x1:n[0],y1:n[1],x2:o[0],y2:o[1]}}function Ad(a){var r=a.getRadiusAxis();return r.inverse?0:1}function P1(a){var r=a[0],e=a[a.length-1];r&&e&&Math.abs(Math.abs(r.coord-e.coord)-360)<1e-4&&a.pop()}var YT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=e.axis,s=o.polar,u=s.getRadiusAxis().getExtent(),c=o.getTicksCoords(),v=o.getMinorTicksCoords(),d=g.H(o.getViewLabels(),function(m){m=g.d(m);var x=o.scale,T=x.type==="ordinal"?x.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=o.dataToCoord(T),m});P1(d),P1(c),g.k(ZT,function(m){e.get([m,"show"])&&(!o.scale.isBlank()||m==="axisLine")&&KT[m](this.group,e,s,c,v,u,d)},this)}},r.type="angleAxis",r}(Jo),KT={axisLine:function(a,r,e,n,o,s){var u=r.getModel(["axisLine","lineStyle"]),c=Ad(e),v=c?0:1,d;s[v]===0?d=new $o.a({shape:{cx:e.cx,cy:e.cy,r:s[c]},style:u.getLineStyle(),z2:1,silent:!0}):d=new mh.a({shape:{cx:e.cx,cy:e.cy,r:s[c],r0:s[v]},style:u.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,a.add(d)},axisTick:function(a,r,e,n,o,s){var u=r.getModel("axisTick"),c=(u.get("inside")?-1:1)*u.get("length"),v=s[Ad(e)],d=g.H(n,function(m){return new Ui.a({shape:Od(e,[v,v+c],m.coord)})});a.add(_r.mergePath(d,{style:g.i(u.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,e,n,o,s){if(!!o.length){for(var u=r.getModel("axisTick"),c=r.getModel("minorTick"),v=(u.get("inside")?-1:1)*c.get("length"),d=s[Ad(e)],m=[],x=0;x<o.length;x++)for(var T=0;T<o[x].length;T++)m.push(new Ui.a({shape:Od(e,[d,d+v],o[x][T].coord)}));a.add(_r.mergePath(m,{style:g.i(c.getModel("lineStyle").getLineStyle(),g.i(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,e,n,o,s,u){var c=r.getCategories(!0),v=r.getModel("axisLabel"),d=v.get("margin"),m=r.get("triggerEvent");g.k(u,function(x,T){var D=v,w=x.tickValue,R=s[Ad(e)],Q=e.coordToPoint([R+d,x.coord]),rt=e.cx,pt=e.cy,mt=Math.abs(Q[0]-rt)/R<.3?"center":Q[0]>rt?"left":"right",Dt=Math.abs(Q[1]-pt)/R<.3?"middle":Q[1]>pt?"top":"bottom";if(c&&c[w]){var Lt=c[w];g.A(Lt)&&Lt.textStyle&&(D=new fi.a(Lt.textStyle,v,v.ecModel))}var wt=new he.a({silent:$a.isLabelSilent(r),style:Object(xr.c)(D,{x:Q[0],y:Q[1],fill:D.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:x.formattedLabel,align:mt,verticalAlign:Dt})});if(a.add(wt),m){var Nt=$a.makeAxisEventDataBase(r);Nt.targetType="axisLabel",Nt.value=x.rawLabel,Object(br.a)(wt).eventData=Nt}},this)},splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),v=c.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],x=0;x<n.length;x++){var T=d++%v.length;m[T]=m[T]||[],m[T].push(new Ui.a({shape:Od(e,s,n[x].coord)}))}for(var x=0;x<m.length;x++)a.add(_r.mergePath(m[x],{style:g.i({stroke:v[x%v.length]},c.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,e,n,o,s){if(!!o.length){for(var u=r.getModel("minorSplitLine"),c=u.getModel("lineStyle"),v=[],d=0;d<o.length;d++)for(var m=0;m<o[d].length;m++)v.push(new Ui.a({shape:Od(e,s,o[d][m].coord)}));a.add(_r.mergePath(v,{style:c.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,e,n,o,s){if(!!n.length){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),v=c.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],x=Math.PI/180,T=-n[0].coord*x,D=Math.min(s[0],s[1]),w=Math.max(s[0],s[1]),R=r.get("clockwise"),Q=1,rt=n.length;Q<=rt;Q++){var pt=Q===rt?n[0].coord:n[Q].coord,mt=d++%v.length;m[mt]=m[mt]||[],m[mt].push(new In.a({shape:{cx:e.cx,cy:e.cy,r0:D,r:w,startAngle:T,endAngle:-pt*x,clockwise:R},silent:!0})),T=-pt*x}for(var Q=0;Q<m.length;Q++)a.add(_r.mergePath(m[Q],{style:g.i({fill:v[Q%v.length]},c.getAreaStyle()),silent:!0}))}}},QT=YT,JT=["axisLine","axisTickLabel","axisName"],$T=["splitLine","splitArea","minorSplitLine"],qT=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=this._axisGroup,s=this._axisGroup=new Pr.a;this.group.add(s);var u=e.axis,c=u.polar,v=c.getAngleAxis(),d=u.getTicksCoords(),m=u.getMinorTicksCoords(),x=v.getExtent()[0],T=u.getExtent(),D=eO(c,e,x),w=new $a(e,D);g.k(JT,w.add,w),s.add(w.getGroup()),_r.groupTransition(o,s,e),g.k($T,function(R){e.get([R,"show"])&&!u.scale.isBlank()&&tO[R](this.group,e,c,x,T,d,m)},this)}},r.type="radiusAxis",r}(Jo),tO={splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),v=c.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],x=0;x<s.length;x++){var T=d++%v.length;m[T]=m[T]||[],m[T].push(new $o.a({shape:{cx:e.cx,cy:e.cy,r:s[x].coord}}))}for(var x=0;x<m.length;x++)a.add(_r.mergePath(m[x],{style:g.i({stroke:v[x%v.length],fill:null},c.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,e,n,o,s,u){if(!!u.length){for(var c=r.getModel("minorSplitLine"),v=c.getModel("lineStyle"),d=[],m=0;m<u.length;m++)for(var x=0;x<u[m].length;x++)d.push(new $o.a({shape:{cx:e.cx,cy:e.cy,r:u[m][x].coord}}));a.add(_r.mergePath(d,{style:g.i({fill:null},v.getLineStyle()),silent:!0}))}},splitArea:function(a,r,e,n,o,s){if(!!s.length){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),v=c.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],x=s[0].coord,T=1;T<s.length;T++){var D=d++%v.length;m[D]=m[D]||[],m[D].push(new In.a({shape:{cx:e.cx,cy:e.cy,r0:x,r:s[T].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),x=s[T].coord}for(var T=0;T<m.length;T++)a.add(_r.mergePath(m[T],{style:g.i({fill:v[T%v.length]},c.getAreaStyle()),silent:!0}))}}};function eO(a,r,e){return{position:[a.cx,a.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}var rO=qT;function w1(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function L1(a,r){return r.dim+a.model.componentIndex}function nO(a,r,e){var n={},o=iO(g.n(r.getSeriesByType(a),function(s){return!r.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(s){if(s.coordinateSystem.type==="polar"){var u=s.getData(),c=s.coordinateSystem,v=c.getBaseAxis(),d=L1(c,v),m=w1(s),x=o[d][m],T=x.offset,D=x.width,w=c.getOtherAxis(v),R=s.coordinateSystem.cx,Q=s.coordinateSystem.cy,rt=s.get("barMinHeight")||0,pt=s.get("barMinAngle")||0;n[m]=n[m]||[];for(var mt=u.mapDimension(w.dim),Dt=u.mapDimension(v.dim),Lt=Object(mr.c)(u,mt),wt=v.dim!=="radius"||!s.get("roundCap",!0),Nt=w.dataToCoord(0),Gt=0,Kt=u.count();Gt<Kt;Gt++){var te=u.get(mt,Gt),ne=u.get(Dt,Gt),pe=te>=0?"p":"n",me=Nt;Lt&&(n[m][ne]||(n[m][ne]={p:Nt,n:Nt}),me=n[m][ne][pe]);var xe=void 0,_e=void 0,Ne=void 0,Je=void 0;if(w.dim==="radius"){var Xe=w.dataToCoord(te)-Nt,or=v.dataToCoord(ne);Math.abs(Xe)<rt&&(Xe=(Xe<0?-1:1)*rt),xe=me,_e=me+Xe,Ne=or-T,Je=Ne-D,Lt&&(n[m][ne][pe]=_e)}else{var Tr=w.dataToCoord(te,wt)-Nt,Mr=v.dataToCoord(ne);Math.abs(Tr)<pt&&(Tr=(Tr<0?-1:1)*pt),xe=Mr+T,_e=xe+D,Ne=me,Je=me+Tr,Lt&&(n[m][ne][pe]=Je)}u.setItemLayout(Gt,{cx:R,cy:Q,r0:xe,r:_e,startAngle:-Ne*Math.PI/180,endAngle:-Je*Math.PI/180,clockwise:Ne>=Je})}}})}function iO(a){var r={};g.k(a,function(n,o){var s=n.getData(),u=n.coordinateSystem,c=u.getBaseAxis(),v=L1(u,c),d=c.getExtent(),m=c.type==="category"?c.getBandWidth():Math.abs(d[1]-d[0])/s.count(),x=r[v]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},T=x.stacks;r[v]=x;var D=w1(n);T[D]||x.autoWidthCount++,T[D]=T[D]||{width:0,maxWidth:0};var w=Object(Le.p)(n.get("barWidth"),m),R=Object(Le.p)(n.get("barMaxWidth"),m),Q=n.get("barGap"),rt=n.get("barCategoryGap");w&&!T[D].width&&(w=Math.min(x.remainedWidth,w),T[D].width=w,x.remainedWidth-=w),R&&(T[D].maxWidth=R),Q!=null&&(x.gap=Q),rt!=null&&(x.categoryGap=rt)});var e={};return g.k(r,function(n,o){e[o]={};var s=n.stacks,u=n.bandWidth,c=Object(Le.p)(n.categoryGap,u),v=Object(Le.p)(n.gap,1),d=n.remainedWidth,m=n.autoWidthCount,x=(d-c)/(m+(m-1)*v);x=Math.max(x,0),g.k(s,function(R,Q){var rt=R.maxWidth;rt&&rt<x&&(rt=Math.min(rt,d),R.width&&(rt=Math.min(rt,R.width)),d-=rt,R.width=rt,m--)}),x=(d-c)/(m+(m-1)*v),x=Math.max(x,0);var T=0,D;g.k(s,function(R,Q){R.width||(R.width=x),D=R,T+=R.width*(1+v)}),D&&(T-=D.width*v);var w=-T/2;g.k(s,function(R,Q){e[o][Q]=e[o][Q]||{offset:w,width:R.width},w+=R.width*(1+v)})}),e}var aO=nO,oO={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},sO={splitNumber:5},lO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="polar",r}(gn.a);function uO(a){Object(B.a)(Zc),Jo.registerAxisPointerClass("PolarAxisPointer",LT),a.registerCoordinateSystem("polar",XT),a.registerComponentModel(RT),a.registerComponentView(lO),Ns(a,"angle",NT,oO),Ns(a,"radius",jT,sO),a.registerComponentView(QT),a.registerComponentView(rO),a.registerLayout(Object(g.h)(aO,"bar"))}function vy(a,r){r=r||{};var e=a.coordinateSystem,n=a.axis,o={},s=n.position,u=n.orient,c=e.getRect(),v=[c.x,c.x+c.width,c.y,c.y+c.height],d={horizontal:{top:v[2],bottom:v[3]},vertical:{left:v[0],right:v[1]}};o.position=[u==="vertical"?d.vertical[s]:v[0],u==="horizontal"?d.horizontal[s]:v[3]];var m={horizontal:0,vertical:1};o.rotation=Math.PI/2*m[u];var x={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=x[s],a.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),g.O(r.labelInside,a.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var T=r.rotate;return T==null&&(T=a.get(["axisLabel","rotate"])),o.labelRotation=s==="top"?-T:T,o.z2=1,o}var fO=["axisLine","axisTickLabel","axisName"],cO=["splitArea","splitLine"],hO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="SingleAxisPointer",e}return r.prototype.render=function(e,n,o,s){var u=this.group;u.removeAll();var c=this._axisGroup;this._axisGroup=new Pr.a;var v=vy(e),d=new $a(e,v);g.k(fO,d.add,d),u.add(this._axisGroup),u.add(d.getGroup()),g.k(cO,function(m){e.get([m,"show"])&&vO[m](this,this.group,this._axisGroup,e)},this),_r.groupTransition(c,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)},r.prototype.remove=function(){ph(this)},r.type="singleAxis",r}(Jo),vO={splitLine:function(a,r,e,n){var o=n.axis;if(!o.scale.isBlank()){var s=n.getModel("splitLine"),u=s.getModel("lineStyle"),c=u.get("color");c=c instanceof Array?c:[c];for(var v=n.coordinateSystem.getRect(),d=o.isHorizontal(),m=[],x=0,T=o.getTicksCoords({tickModel:s}),D=[],w=[],R=0;R<T.length;++R){var Q=o.toGlobalCoord(T[R].coord);d?(D[0]=Q,D[1]=v.y,w[0]=Q,w[1]=v.y+v.height):(D[0]=v.x,D[1]=Q,w[0]=v.x+v.width,w[1]=Q);var rt=x++%c.length;m[rt]=m[rt]||[],m[rt].push(new Ui.a({subPixelOptimize:!0,shape:{x1:D[0],y1:D[1],x2:w[0],y2:w[1]},silent:!0}))}for(var pt=u.getLineStyle(["color"]),R=0;R<m.length;++R)r.add(_r.mergePath(m[R],{style:g.i({stroke:c[R%c.length]},pt),silent:!0}))}},splitArea:function(a,r,e,n){dh(a,e,n,n)}},dO=hO,I1=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}($n.a);Object(g.K)(I1,Rs.a.prototype);var dy=I1,pO=function(a){Object(Pe.a)(r,a);function r(e,n,o,s,u){var c=a.call(this,e,n,o)||this;return c.type=s||"value",c.position=u||"bottom",c}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.pointToData=function(e,n){return this.coordinateSystem.pointToData(e)[0]},r}(ba.a),gO=pO,R1=["single"],mO=function(){function a(r,e,n){this.type="single",this.dimension="single",this.dimensions=R1,this.axisPointerEnabled=!0,this.model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=this.dimension,s=new gO(o,di.a(r),[0,0],r.get("type"),r.get("position")),u=s.type==="category";s.onBand=u&&r.get("boundaryGap"),s.inverse=r.get("inverse"),s.orient=r.get("orient"),r.axis=s,s.model=r,s.coordinateSystem=this,this._axis=s},a.prototype.update=function(r,e){r.eachSeries(function(n){if(n.coordinateSystem===this){var o=n.getData();Object(g.k)(o.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(o,s)},this),di.i(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(r,e){this._rect=Object(kr.g)({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var r=this._rect,e=this._axis,n=e.isHorizontal(),o=n?[0,r.width]:[0,r.height],s=e.reverse?1:0;e.setExtent(o[s],o[1-s]),this._updateAxisTransform(e,n?r.x:r.y)},a.prototype._updateAxisTransform=function(r,e){var n=r.getExtent(),o=n[0]+n[1],s=r.isHorizontal();r.toGlobalCoord=s?function(u){return u+e}:function(u){return o-u+e},r.toLocalCoord=s?function(u){return u-e}:function(u){return o-u+e}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(r){var e=this.getRect(),n=this.getAxis(),o=n.orient;return o==="horizontal"?n.contain(n.toLocalCoord(r[0]))&&r[1]>=e.y&&r[1]<=e.y+e.height:n.contain(n.toLocalCoord(r[1]))&&r[0]>=e.y&&r[0]<=e.y+e.height},a.prototype.pointToData=function(r){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(r[e.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(r){var e=this.getAxis(),n=this.getRect(),o=[],s=e.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),o[s]=e.toGlobalCoord(e.dataToCoord(+r)),o[1-s]=s===0?n.y+n.height/2:n.x+n.width/2,o},a.prototype.convertToPixel=function(r,e,n){var o=N1(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=N1(e);return o===this?this.pointToData(n):null},a}();function N1(a){var r=a.seriesModel,e=a.singleAxisModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var yO=mO;function xO(a,r){var e=[];return a.eachComponent("singleAxis",function(n,o){var s=new yO(n,a,r);s.name="single_"+o,s.resize(n,r),n.coordinateSystem=s,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var o=n.getReferringComponents("singleAxis",Be.b).models[0];n.coordinateSystem=o&&o.coordinateSystem}}),e}var _O={create:xO,dimensions:R1},bO=_O,j1=["x","y"],SO=["width","height"],TO=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var c=o.axis,v=c.coordinateSystem,d=py(v,1-Md(c)),m=v.dataToPoint(n)[0],x=s.get("type");if(x&&x!=="none"){var T=oy(s),D=OO[x](c,m,d);D.style=T,e.graphicKey=D.type,e.pointer=D}var w=vy(o);g1(n,e,w,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=vy(n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=sy(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,c=u.coordinateSystem,v=Md(u),d=py(c,v),m=[e.x,e.y];m[v]+=n[v],m[v]=Math.min(d[1],m[v]),m[v]=Math.max(d[0],m[v]);var x=py(c,1-v),T=(x[1]+x[0])/2,D=[T,T];return D[v]=m[v],{x:m[0],y:m[1],rotation:e.rotation,cursorPoint:D,tooltipOption:{verticalAlign:"middle"}}},r}(ay),OO={line:function(a,r,e){var n=ly([r,e[0]],[r,e[1]],Md(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=a.getBandWidth(),o=e[1]-e[0];return{type:"Rect",shape:m1([r-n/2,e[0]],[n,o],Md(a))}}};function Md(a){return a.isHorizontal()?0:1}function py(a,r){var e=a.getRect();return[e[j1[r]],e[j1[r]]+e[SO[r]]]}var AO=TO,MO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="single",r}(gn.a);function DO(a){Object(B.a)(Zc),Jo.registerAxisPointerClass("SingleAxisPointer",AO),a.registerComponentView(MO),a.registerComponentView(dO),a.registerComponentModel(dy),Ns(a,"single",dy,dy.defaultOption),a.registerCoordinateSystem("single",bO)}var EO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=Object(kr.f)(e);a.prototype.init.apply(this,arguments),B1(e,s)},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),B1(this.option,e)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}($n.a);function B1(a,r){var e=a.cellSize,n;g.t(e)?n=e:n=a.cellSize=[e,e],n.length===1&&(n[1]=n[0]);var o=g.H([0,1],function(s){return Object(kr.j)(r,s)&&(n[s]="auto"),n[s]!=null&&n[s]!=="auto"});Object(kr.h)(a,r,{type:"box",ignoreSize:o})}var CO=EO,F1=b("qB7j"),PO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll();var u=e.coordinateSystem,c=u.getRangeInfo(),v=u.getOrient(),d=n.getLocaleModel();this._renderDayRect(e,c,s),this._renderLines(e,c,v,s),this._renderYearText(e,c,v,s),this._renderMonthText(e,d,v,s),this._renderWeekText(e,d,c,v,s)},r.prototype._renderDayRect=function(e,n,o){for(var s=e.coordinateSystem,u=e.getModel("itemStyle").getItemStyle(),c=s.getCellWidth(),v=s.getCellHeight(),d=n.start.time;d<=n.end.time;d=s.getNextNDay(d,1).time){var m=s.dataToRect([d],!1).tl,x=new Qr.a({shape:{x:m[0],y:m[1],width:c,height:v},cursor:"default",style:u});o.add(x)}},r.prototype._renderLines=function(e,n,o,s){var u=this,c=e.coordinateSystem,v=e.getModel(["splitLine","lineStyle"]).getLineStyle(),d=e.get(["splitLine","show"]),m=v.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var x=n.start,T=0;x.time<=n.end.time;T++){w(x.formatedDate),T===0&&(x=c.getDateInfo(n.start.y+"-"+n.start.m));var D=x.date;D.setMonth(D.getMonth()+1),x=c.getDateInfo(D)}w(c.getNextNDay(n.end.time,1).formatedDate);function w(R){u._firstDayOfMonth.push(c.getDateInfo(R)),u._firstDayPoints.push(c.dataToRect([R],!1).tl);var Q=u._getLinePointsOfOneWeek(e,R,o);u._tlpoints.push(Q[0]),u._blpoints.push(Q[Q.length-1]),d&&u._drawSplitline(Q,v,s)}d&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,m,o),v,s),d&&this._drawSplitline(u._getEdgesPoints(u._blpoints,m,o),v,s)},r.prototype._getEdgesPoints=function(e,n,o){var s=[e[0].slice(),e[e.length-1].slice()],u=o==="horizontal"?0:1;return s[0][u]=s[0][u]-n/2,s[1][u]=s[1][u]+n/2,s},r.prototype._drawSplitline=function(e,n,o){var s=new Vi.a({z2:20,shape:{points:e},style:n});o.add(s)},r.prototype._getLinePointsOfOneWeek=function(e,n,o){for(var s=e.coordinateSystem,u=s.getDateInfo(n),c=[],v=0;v<7;v++){var d=s.getNextNDay(u.time,v),m=s.dataToRect([d.time],!1);c[2*d.day]=m.tl,c[2*d.day+1]=m[o==="horizontal"?"bl":"tr"]}return c},r.prototype._formatterLabel=function(e,n){return Object(g.C)(e)&&e?Object(Vn.g)(e,n):Object(g.w)(e)?e(n):n.nameMap},r.prototype._yearTextPositionControl=function(e,n,o,s,u){var c=n[0],v=n[1],d=["center","bottom"];s==="bottom"?(v+=u,d=["center","top"]):s==="left"?c-=u:s==="right"?(c+=u,d=["center","top"]):v-=u;var m=0;return(s==="left"||s==="right")&&(m=Math.PI/2),{rotation:m,x:c,y:v,style:{align:d[0],verticalAlign:d[1]}}},r.prototype._renderYearText=function(e,n,o,s){var u=e.getModel("yearLabel");if(!!u.get("show")){var c=u.get("margin"),v=u.get("position");v||(v=o!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(d[0][0]+d[1][0])/2,x=(d[0][1]+d[1][1])/2,T=o==="horizontal"?0:1,D={top:[m,d[T][1]],bottom:[m,d[1-T][1]],left:[d[1-T][0],x],right:[d[T][0],x]},w=n.start.y;+n.end.y>+n.start.y&&(w=w+"-"+n.end.y);var R=u.get("formatter"),Q={start:n.start.y,end:n.end.y,nameMap:w},rt=this._formatterLabel(R,Q),pt=new he.a({z2:30,style:Object(xr.c)(u,{text:rt})});pt.attr(this._yearTextPositionControl(pt,D[v],o,v,c)),s.add(pt)}},r.prototype._monthTextPositionControl=function(e,n,o,s,u){var c="left",v="top",d=e[0],m=e[1];return o==="horizontal"?(m=m+u,n&&(c="center"),s==="start"&&(v="bottom")):(d=d+u,n&&(v="middle"),s==="start"&&(c="right")),{x:d,y:m,align:c,verticalAlign:v}},r.prototype._renderMonthText=function(e,n,o,s){var u=e.getModel("monthLabel");if(!!u.get("show")){var c=u.get("nameMap"),v=u.get("margin"),d=u.get("position"),m=u.get("align"),x=[this._tlpoints,this._blpoints];(!c||Object(g.C)(c))&&(c&&(n=Object(F1.d)(c)||n),c=n.get(["time","monthAbbr"])||[]);var T=d==="start"?0:1,D=o==="horizontal"?0:1;v=d==="start"?-v:v;for(var w=m==="center",R=0;R<x[T].length-1;R++){var Q=x[T][R].slice(),rt=this._firstDayOfMonth[R];if(w){var pt=this._firstDayPoints[R];Q[D]=(pt[D]+x[0][R+1][D])/2}var mt=u.get("formatter"),Dt=c[+rt.m-1],Lt={yyyy:rt.y,yy:(rt.y+"").slice(2),MM:rt.m,M:+rt.m,nameMap:Dt},wt=this._formatterLabel(mt,Lt),Nt=new he.a({z2:30,style:Object(g.m)(Object(xr.c)(u,{text:wt}),this._monthTextPositionControl(Q,w,o,d,v))});s.add(Nt)}}},r.prototype._weekTextPositionControl=function(e,n,o,s,u){var c="center",v="middle",d=e[0],m=e[1],x=o==="start";return n==="horizontal"?(d=d+s+(x?1:-1)*u[0]/2,c=x?"right":"left"):(m=m+s+(x?1:-1)*u[1]/2,v=x?"bottom":"top"),{x:d,y:m,align:c,verticalAlign:v}},r.prototype._renderWeekText=function(e,n,o,s,u){var c=e.getModel("dayLabel");if(!!c.get("show")){var v=e.coordinateSystem,d=c.get("position"),m=c.get("nameMap"),x=c.get("margin"),T=v.getFirstDayOfWeek();if(!m||Object(g.C)(m)){m&&(n=Object(F1.d)(m)||n);var D=n.get(["time","dayOfWeekShort"]);m=D||Object(g.H)(n.get(["time","dayOfWeekAbbr"]),function(Lt){return Lt[0]})}var w=v.getNextNDay(o.end.time,7-o.lweek).time,R=[v.getCellWidth(),v.getCellHeight()];x=Object(Le.p)(x,Math.min(R[1],R[0])),d==="start"&&(w=v.getNextNDay(o.start.time,-(7+o.fweek)).time,x=-x);for(var Q=0;Q<7;Q++){var rt=v.getNextNDay(w,Q),pt=v.dataToRect([rt.time],!1).center,mt=Q;mt=Math.abs((Q+T)%7);var Dt=new he.a({z2:30,style:Object(g.m)(Object(xr.c)(c,{text:m[mt]}),this._weekTextPositionControl(pt,s,d,x,R))});u.add(Dt)}}},r.type="calendar",r}(gn.a),wO=PO,gy=864e5,LO=function(){function a(r,e,n){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=r}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(r){r=Le.o(r);var e=r.getFullYear(),n=r.getMonth()+1,o=n<10?"0"+n:""+n,s=r.getDate(),u=s<10?"0"+s:""+s,c=r.getDay();return c=Math.abs((c+7-this.getFirstDayOfWeek())%7),{y:e+"",m:o,d:u,day:c,time:r.getTime(),formatedDate:e+"-"+o+"-"+u,date:r}},a.prototype.getNextNDay=function(r,e){return e=e||0,e===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+e),this.getDateInfo(r))},a.prototype.update=function(r,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],s=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),c=this._orient==="horizontal"?[n,7]:[7,n];g.k([0,1],function(x){m(s,x)&&(u[o[x]]=s[x]*c[x])});var v={width:e.getWidth(),height:e.getHeight()},d=this._rect=kr.g(u,v);g.k([0,1],function(x){m(s,x)||(s[x]=d[o[x]]/c[x])});function m(x,T){return x[T]!=null&&x[T]!=="auto"}this._sw=s[0],this._sh=s[1]},a.prototype.dataToPoint=function(r,e){g.t(r)&&(r=r[0]),e==null&&(e=!0);var n=this.getDateInfo(r),o=this._rangeInfo,s=n.formatedDate;if(e&&!(n.time>=o.start.time&&n.time<o.end.time+gy))return[NaN,NaN];var u=n.day,c=this._getRangeInfo([o.start.time,s]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]:[this._rect.x+c*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},a.prototype.pointToData=function(r){var e=this.pointToDate(r);return e&&e.time},a.prototype.dataToRect=function(r,e){var n=this.dataToPoint(r,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},a.prototype.pointToDate=function(r){var e=Math.floor((r[0]-this._rect.x)/this._sw)+1,n=Math.floor((r[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,e-1,o):this._getDateByWeeksAndDay(e,n-1,o)},a.prototype.convertToPixel=function(r,e,n){var o=z1(e);return o===this?o.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=z1(e);return o===this?o.pointToData(n):null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var r=this._model.get("range"),e;if(g.t(r)&&r.length===1&&(r=r[0]),g.t(r))e=r;else{var n=r.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),s=o.date;s.setMonth(s.getMonth()+1);var u=this.getNextNDay(s,-1);e=[o.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return r;var c=this._getRangeInfo(e);return c.start.time>c.end.time&&e.reverse(),e},a.prototype._getRangeInfo=function(r){var e=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],n;e[0].time>e[1].time&&(n=!0,e.reverse());var o=Math.floor(e[1].time/gy)-Math.floor(e[0].time/gy)+1,s=new Date(e[0].time),u=s.getDate(),c=e[1].date.getDate();s.setDate(u+o-1);var v=s.getDate();if(v!==c)for(var d=s.getTime()-e[1].time>0?1:-1;(v=s.getDate())!==c&&(s.getTime()-e[1].time)*d>0;)o-=d,s.setDate(v-d);var m=Math.floor((o+e[0].day+6)/7),x=n?-m+1:m-1;return n&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:o,weeks:m,nthWeek:x,fweek:e[0].day,lweek:e[1].day}},a.prototype._getDateByWeeksAndDay=function(r,e,n){var o=this._getRangeInfo(n);if(r>o.weeks||r===0&&e<o.fweek||r===o.weeks&&e>o.lweek)return null;var s=(r-1)*7-o.fweek+e,u=new Date(o.start.time);return u.setDate(+o.start.d+s),this.getDateInfo(u)},a.create=function(r,e){var n=[];return r.eachComponent("calendar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},a.dimensions=["time","value"],a}();function z1(a){var r=a.calendarModel,e=a.seriesModel,n=r?r.coordinateSystem:e?e.coordinateSystem:null;return n}var IO=LO;function RO(a){a.registerComponentModel(CO),a.registerComponentView(wO),a.registerCoordinateSystem("calendar",IO)}function NO(a,r){var e=a.existing;if(r.id=a.keyInfo.id,!r.type&&e&&(r.type=e.type),r.parentId==null){var n=r.parentOption;n?r.parentId=n.id:e&&(r.parentId=e.parentId)}r.parentOption=null}function V1(a,r){var e;return g.k(r,function(n){a[n]!=null&&a[n]!=="auto"&&(e=!0)}),e}function jO(a,r,e){var n=g.m({},e),o=a[r],s=e.$action||"merge";if(s==="merge")if(o){if(!1)var u;g.I(o,n,!0),Object(kr.h)(o,n,{ignoreSize:!0}),Object(kr.c)(e,o),Dd(e,o),Dd(e,o,"shape"),Dd(e,o,"style"),Dd(e,o,"extra"),e.clipPath=o.clipPath}else a[r]=n;else s==="replace"?a[r]=n:s==="remove"&&o&&(a[r]=null)}var G1=["transition","enterFrom","leaveTo"],BO=G1.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Dd(a,r,e){if(e&&(!a[e]&&r[e]&&(a[e]={}),a=a[e],r=r[e]),!(!a||!r))for(var n=e?G1:BO,o=0;o<n.length;o++){var s=n[o];a[s]==null&&r[s]!=null&&(a[s]=r[s])}}function FO(a,r){if(!!a&&(a.hv=r.hv=[V1(r,["left","right"]),V1(r,["top","bottom"])],a.type==="group")){var e=a,n=r;e.width==null&&(e.width=n.width=0),e.height==null&&(e.height=n.height=0)}}var zO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventAutoZ=!0,e}return r.prototype.mergeOption=function(e,n){var o=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,e,n),this.option.elements=o},r.prototype.optionUpdated=function(e,n){var o=this.option,s=(n?o:e).elements,u=o.elements=n?[]:o.elements,c=[];this._flatten(s,c,null);var v=Be.q(u,c,"normalMerge"),d=this._elOptionsToUpdate=[];g.k(v,function(m,x){var T=m.newOption;!T||(d.push(T),NO(m,T),jO(u,x,T),FO(u[x],T))},this),o.elements=g.n(u,function(m){return m&&delete m.$action,m!=null})},r.prototype._flatten=function(e,n,o){g.k(e,function(s){if(!!s){o&&(s.parentOption=o),n.push(s);var u=s.children;s.type==="group"&&u&&this._flatten(u,n,s),delete s.children}},this)},r.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},r.type="graphic",r.defaultOption={elements:[]},r}($n.a),U1={path:null,compoundPath:null,group:Pr.a,image:gt.a,text:he.a},Wa=Be.o(),VO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._elMap=g.f()},r.prototype.render=function(e,n,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},r.prototype._updateElements=function(e){var n=e.useElOptionsToUpdate();if(!!n){var o=this._elMap,s=this.group,u=e.get("z"),c=e.get("zlevel");g.k(n,function(v){var d=Be.e(v.id,null),m=d!=null?o.get(d):null,x=Be.e(v.parentId,null),T=x!=null?o.get(x):s,D=v.type,w=v.style;D==="text"&&w&&v.hv&&v.hv[1]&&(w.textVerticalAlign=w.textBaseline=w.verticalAlign=w.align=null);var R=v.textContent,Q=v.textConfig;if(w&&W0(w,D,!!Q,!!R)){var rt=k0(w,D,!0);!Q&&rt.textConfig&&(Q=v.textConfig=rt.textConfig),!R&&rt.textContent&&(R=rt.textContent)}var pt=GO(v),mt=v.$action||"merge",Dt=mt==="merge",Lt=mt==="replace";if(Dt){var wt=!m,Nt=m;wt?Nt=H1(d,T,v.type,o):(Nt&&(Wa(Nt).isNew=!1),e1(Nt)),Nt&&(xd(Nt,pt,e,{isInit:wt}),W1(Nt,v,u,c))}else if(Lt){Ed(m,v,o,e);var Gt=H1(d,T,v.type,o);Gt&&(xd(Gt,pt,e,{isInit:!0}),W1(Gt,v,u,c))}else mt==="remove"&&(J0(m,v),Ed(m,v,o,e));var Kt=o.get(d);if(Kt&&R)if(Dt){var te=Kt.getTextContent();te?te.attr(R):Kt.setTextContent(new he.a(R))}else Lt&&Kt.setTextContent(new he.a(R));if(Kt){var ne=v.clipPath;if(ne){var pe=ne.type,me=void 0,wt=!1;if(Dt){var xe=Kt.getClipPath();wt=!xe||Wa(xe).type!==pe,me=wt?my(pe):xe}else Lt&&(wt=!0,me=my(pe));Kt.setClipPath(me),xd(me,ne,e,{isInit:wt}),bd(me,ne.keyframeAnimation,e)}var _e=Wa(Kt);Kt.setTextConfig(Q),_e.option=v,UO(Kt,e,v),_r.setTooltipConfig({el:Kt,componentModel:e,itemName:Kt.name,itemTooltipOption:v.tooltip}),bd(Kt,v.keyframeAnimation,e)}})}},r.prototype._relocate=function(e,n){for(var o=e.option.elements,s=this.group,u=this._elMap,c=n.getWidth(),v=n.getHeight(),d=["x","y"],m=0;m<o.length;m++){var x=o[m],T=Be.e(x.id,null),D=T!=null?u.get(T):null;if(!(!D||!D.isGroup)){var w=D.parent,R=w===s,Q=Wa(D),rt=Wa(w);Q.width=Object(Le.p)(Q.option.width,R?c:rt.width)||0,Q.height=Object(Le.p)(Q.option.height,R?v:rt.height)||0}}for(var m=o.length-1;m>=0;m--){var x=o[m],T=Be.e(x.id,null),D=T!=null?u.get(T):null;if(!!D){var w=D.parent,rt=Wa(w),pt=w===s?{width:c,height:v}:{width:rt.width,height:rt.height},mt={},Dt=kr.i(D,x,pt,null,{hv:x.hv,boundingMode:x.bounding},mt);if(!Wa(D).isNew&&Dt){for(var Lt=x.transition,wt={},Nt=0;Nt<d.length;Nt++){var Gt=d[Nt],Kt=mt[Gt];Lt&&(au(Lt)||g.r(Lt,Gt)>=0)?wt[Gt]=Kt:D[Gt]=Kt}Object(cr.h)(D,wt,e,0)}else D.attr(mt)}}},r.prototype._clear=function(){var e=this,n=this._elMap;n.each(function(o){Ed(o,Wa(o).option,n,e._lastGraphicModel)}),this._elMap=g.f()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(gn.a);function my(a){var r=g.q(U1,a)?U1[a]:_r.getShapeClass(a),e=new r({});return Wa(e).type=a,e}function H1(a,r,e,n){var o=my(e);return r.add(o),n.set(a,o),Wa(o).id=a,Wa(o).isNew=!0,o}function Ed(a,r,e,n){var o=a&&a.parent;o&&(a.type==="group"&&a.traverse(function(s){Ed(s,r,e,n)}),_d(a,r,n),e.removeKey(Wa(a).id))}function W1(a,r,e,n){if(!a.isGroup){var o=a;o.z=g.P(r.z,e||0),o.zlevel=g.P(r.zlevel,n||0);var s=r.z2;s!=null&&(o.z2=s||0)}g.k(g.F(r),function(u){var c=r[u];u.indexOf("on")===0&&g.w(c)&&(a[u]=c)}),a.draggable=r.draggable,r.name!=null&&(a.name=r.name),r.id!=null&&(a.id=r.id)}function GO(a){return a=g.m({},a),g.k(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(kr.a),function(r){delete a[r]}),a}function UO(a,r,e){var n=Object(br.a)(a).eventData;!a.silent&&!a.ignore&&!n&&(n=Object(br.a)(a).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:a.name}),n&&(n.info=e.info)}function HO(a){a.registerComponentModel(zO),a.registerComponentView(VO),a.registerPreprocessor(function(r){var e=r.graphic;Object(g.t)(e)?!e[0]||!e[0].elements?r.graphic=[{elements:e}]:r.graphic=[r.graphic[0]]:e&&!e.elements&&(r.graphic=[{elements:[e]}])})}var k1=["x","y","radius","angle","single"],WO=["cartesian2d","polar","singleAxis"];function kO(a){var r=a.get("coordinateSystem");return Object(g.r)(WO,r)>=0}function cl(a){return a+"Axis"}function j2(a){return a+"AxisIndex"}function B2(a){return a+"AxisId"}function XO(a,r){var e=Object(g.f)(),n=[],o=Object(g.f)();a.eachComponent({mainType:"dataZoom",query:r},function(m){o.get(m.uid)||c(m)});var s;do s=!1,a.eachComponent("dataZoom",u);while(s);function u(m){!o.get(m.uid)&&v(m)&&(c(m),s=!0)}function c(m){o.set(m.uid,!0),n.push(m),d(m)}function v(m){var x=!1;return m.eachTargetAxis(function(T,D){var w=e.get(T);w&&w[D]&&(x=!0)}),x}function d(m){m.eachTargetAxis(function(x,T){(e.get(x)||e.set(x,[]))[T]=!0})}return n}function X1(a){var r=a.ecModel,e={infoList:[],infoMap:Object(g.f)()};return a.eachTargetAxis(function(n,o){var s=r.getComponent(cl(n),o);if(!!s){var u=s.getCoordSysModel();if(!!u){var c=u.uid,v=e.infoMap.get(c);v||(v={model:u,axisModels:[]},e.infoList.push(v),e.infoMap.set(c,v)),v.axisModels.push(s)}}}),e}var yy=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},a}(),ZO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,n,o){var s=Z1(e);this.settledOption=s,this.mergeDefaultAndTheme(e,o),this._doInit(s)},r.prototype.mergeOption=function(e){var n=Z1(e);Object(g.I)(this.option,e,!0),Object(g.I)(this.settledOption,n,!0),this._doInit(n)},r.prototype._doInit=function(e){var n=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;Object(g.k)([["start","startValue"],["end","endValue"]],function(s,u){this._rangePropMode[u]==="value"&&(n[s[0]]=o[s[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),n=this._targetAxisInfoMap=Object(g.f)(),o=this._fillSpecifiedTargetAxis(n);o?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var n=!1;return Object(g.k)(k1,function(o){var s=this.getReferringComponents(cl(o),Be.a);if(!!s.specified){n=!0;var u=new yy;Object(g.k)(s.models,function(c){u.add(c.componentIndex)}),e.set(o,u)}},this),n},r.prototype._fillAutoTargetAxisByOrient=function(e,n){var o=this.ecModel,s=!0;if(s){var u=n==="vertical"?"y":"x",c=o.findComponents({mainType:u+"Axis"});v(c,u)}if(s){var c=o.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===n}});v(c,"single")}function v(d,m){var x=d[0];if(!!x){var T=new yy;if(T.add(x.componentIndex),e.set(m,T),s=!1,m==="x"||m==="y"){var D=x.getReferringComponents("grid",Be.b).models[0];D&&Object(g.k)(d,function(w){x.componentIndex!==w.componentIndex&&D===w.getReferringComponents("grid",Be.b).models[0]&&T.add(w.componentIndex)})}}}s&&Object(g.k)(k1,function(d){if(!!s){var m=o.findComponents({mainType:cl(d),filter:function(T){return T.get("type",!0)==="category"}});if(m[0]){var x=new yy;x.add(m[0].componentIndex),e.set(d,x),s=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(n){!e&&(e=n)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var n=this._rangePropMode,o=this.get("rangeMode");Object(g.k)([["start","startValue"],["end","endValue"]],function(s,u){var c=e[s[0]]!=null,v=e[s[1]]!=null;c&&!v?n[u]="percent":!c&&v?n[u]="value":o?n[u]=o[u]:c&&(n[u]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(n,o){e==null&&(e=this.ecModel.getComponent(cl(n),o))},this),e},r.prototype.eachTargetAxis=function(e,n){this._targetAxisInfoMap.each(function(o,s){Object(g.k)(o.indexList,function(u){e.call(n,s,u)})})},r.prototype.getAxisProxy=function(e,n){var o=this.getAxisModel(e,n);if(o)return o.__dzAxisProxy},r.prototype.getAxisModel=function(e,n){var o=this._targetAxisInfoMap.get(e);if(o&&o.indexMap[n])return this.ecModel.getComponent(cl(e),n)},r.prototype.setRawRange=function(e){var n=this.option,o=this.settledOption;Object(g.k)([["start","startValue"],["end","endValue"]],function(s){(e[s[0]]!=null||e[s[1]]!=null)&&(n[s[0]]=o[s[0]]=e[s[0]],n[s[1]]=o[s[1]]=e[s[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var n=this.option;Object(g.k)(["start","startValue","end","endValue"],function(o){n[o]=e[o]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,n){if(e==null&&n==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(e,n).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var n,o=this._targetAxisInfoMap.keys(),s=0;s<o.length;s++)for(var u=o[s],c=this._targetAxisInfoMap.get(u),v=0;v<c.indexList.length;v++){var d=this.getAxisProxy(u,c.indexList[v]);if(d.hostedBy(this))return d;n||(n=d)}return n},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}($n.a);function Z1(a){var r={};return Object(g.k)(["start","end","startValue","endValue","throttle"],function(e){a.hasOwnProperty(e)&&(r[e]=a[e])}),r}var Yc=ZO,YO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}(Yc),KO=YO,QO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.dataZoomModel=e,this.ecModel=n,this.api=o},r.type="dataZoom",r}(gn.a),xy=QO,JO=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}(xy),$O=JO,qO=b("9jB8"),of=g.k,Y1=Le.c,tA=function(){function a(r,e,n,o){this._dimName=r,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=n}return a.prototype.hostedBy=function(r){return this._dataZoomModel===r},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(kO(e)){var n=cl(this._dimName),o=e.getReferringComponents(n,Be.b).models[0];o&&this._axisIndex===o.componentIndex&&r.push(e)}},this),r},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return g.d(this._minMaxSpan)},a.prototype.calculateDataWindow=function(r){var e=this._dataExtent,n=this.getAxisModel(),o=n.axis.scale,s=this._dataZoomModel.getRangePropMode(),u=[0,100],c=[],v=[],d;of(["start","end"],function(T,D){var w=r[T],R=r[T+"Value"];s[D]==="percent"?(w==null&&(w=u[D]),R=o.parse(Le.l(w,u,e))):(d=!0,R=R==null?e[D]:o.parse(R),w=Le.l(R,e,u)),v[D]=R,c[D]=w}),Y1(v),Y1(c);var m=this._minMaxSpan;d?x(v,c,e,u,!1):x(c,v,u,e,!0);function x(T,D,w,R,Q){var rt=Q?"Span":"ValueSpan";Nn(0,T,w,"all",m["min"+rt],m["max"+rt]);for(var pt=0;pt<2;pt++)D[pt]=Le.l(T[pt],w,R,!0),Q&&(D[pt]=o.parse(D[pt]))}return{valueWindow:v,percentWindow:c}},a.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=eA(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(r.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var n=this._dimName,o=this.getTargetSeriesModels(),s=r.get("filterMode"),u=this._valueWindow;if(s==="none")return;of(o,function(v){var d=v.getData(),m=d.mapDimensionsAll(n);if(!!m.length){if(s==="weakFilter"){var x=d.getStore(),T=g.H(m,function(D){return d.getDimensionIndex(D)},d);d.filterSelf(function(D){for(var w,R,Q,rt=0;rt<m.length;rt++){var pt=x.get(T[rt],D),mt=!isNaN(pt),Dt=pt<u[0],Lt=pt>u[1];if(mt&&!Dt&&!Lt)return!0;mt&&(Q=!0),Dt&&(w=!0),Lt&&(R=!0)}return Q&&w&&R})}else of(m,function(D){if(s==="empty")v.setData(d=d.map(D,function(R){return c(R)?R:NaN}));else{var w={};w[D]=u,d.selectRange(w)}});of(m,function(D){d.setApproximateExtent(u,D)})}});function c(v){return v>=u[0]&&v<=u[1]}},a.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;of(["min","max"],function(o){var s=e.get(o+"Span"),u=e.get(o+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?s=Le.l(n[0]+u,n,[0,100],!0):s!=null&&(u=Le.l(s,[0,100],n,!0)-n[0]),r[o+"Span"]=s,r[o+"ValueSpan"]=u},this)},a.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(!!e){var o=Le.f(n,[0,500]);o=Math.min(o,20);var s=r.axis.scale.rawExtentInfo;e[0]!==0&&s.setDeterminedMinMax("min",+n[0].toFixed(o)),e[1]!==100&&s.setDeterminedMinMax("max",+n[1].toFixed(o)),s.freeze()}},a}();function eA(a,r,e){var n=[Infinity,-Infinity];of(e,function(u){Object(di.k)(n,u.getData(),r)});var o=a.getAxisModel(),s=Object(qO.a)(o.axis.scale,o,n).calculate();return[s.min,s.max]}var rA=tA,nA={getTargetSeries:function(a){function r(o){a.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(u,c){var v=a.getComponent(cl(u),c);o(u,c,v,s)})})}r(function(o,s,u,c){u.__dzAxisProxy=null});var e=[];r(function(o,s,u,c){u.__dzAxisProxy||(u.__dzAxisProxy=new rA(o,s,c,a),e.push(u.__dzAxisProxy))});var n=Object(g.f)();return Object(g.k)(e,function(o){Object(g.k)(o.getTargetSeriesModels(),function(s){n.set(s.uid,s)})}),n},overallReset:function(a,r){a.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).reset(e)}),e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).filterData(e,r)})}),a.eachComponent("dataZoom",function(e){var n=e.findRepresentativeAxisProxy();if(n){var o=n.getDataPercentWindow(),s=n.getDataValueWindow();e.setCalculatedRange({start:o[0],end:o[1],startValue:s[0],endValue:s[1]})}})}},iA=nA;function aA(a){a.registerAction("dataZoom",function(r,e){var n=XO(e,r);Object(g.k)(n,function(o){o.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var K1=!1;function _y(a){K1||(K1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,iA),aA(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function oA(a){a.registerComponentModel(KO),a.registerComponentView($O),_y(a)}var ka=function(){function a(){}return a}(),Q1={};function sf(a,r){Q1[a]=r}function J1(a){return Q1[a]}var sA=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;g.k(this.option.feature,function(n,o){var s=J1(o);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(e)),g.I(n,s.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}($n.a),lA=sA;function uA(a,r,e){var n=r.getBoxLayoutParams(),o=r.get("padding"),s={width:e.getWidth(),height:e.getHeight()},u=Object(kr.g)(n,s,o);Object(kr.b)(r.get("orient"),a,r.get("itemGap"),u.width,u.height),Object(kr.i)(a,n,s,o)}function $1(a,r){var e=Vn.j(r.get("padding")),n=r.getItemStyle(["color","opacity"]);return n.fill=r.get("backgroundColor"),a=new Qr.a({shape:{x:a.x-e[3],y:a.y-e[0],width:a.width+e[1]+e[3],height:a.height+e[0]+e[2],r:r.get("borderRadius")},style:n,silent:!0,z2:-1}),a}var fA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){var u=this.group;if(u.removeAll(),!e.get("show"))return;var c=+e.get("itemSize"),v=e.get("feature")||{},d=this._features||(this._features={}),m=[];g.k(v,function(D,w){m.push(w)}),new ea.a(this._featureNames||[],m).add(x).update(x).remove(g.h(x,null)).execute(),this._featureNames=m;function x(D,w){var R=m[D],Q=m[w],rt=v[R],pt=new fi.a(rt,e,e.ecModel),mt;if(s&&s.newTitle!=null&&s.featureName===R&&(rt.title=s.newTitle),R&&!Q){if(cA(R))mt={onclick:pt.option.onclick,featureName:R};else{var Dt=J1(R);if(!Dt)return;mt=new Dt}d[R]=mt}else if(mt=d[Q],!mt)return;mt.uid=Object(yn.c)("toolbox-feature"),mt.model=pt,mt.ecModel=n,mt.api=o;var Lt=mt instanceof ka;if(!R&&Q){Lt&&mt.dispose&&mt.dispose(n,o);return}if(!pt.get("show")||Lt&&mt.unusable){Lt&&mt.remove&&mt.remove(n,o);return}T(pt,mt,R),pt.setIconStatus=function(wt,Nt){var Gt=this.option,Kt=this.iconPaths;Gt.iconStatus=Gt.iconStatus||{},Gt.iconStatus[wt]=Nt,Kt[wt]&&(Nt==="emphasis"?ar.r:ar.C)(Kt[wt])},mt instanceof ka&&mt.render&&mt.render(pt,n,o,s)}function T(D,w,R){var Q=D.getModel("iconStyle"),rt=D.getModel(["emphasis","iconStyle"]),pt=w instanceof ka&&w.getIcons?w.getIcons():D.get("icon"),mt=D.get("title")||{},Dt,Lt;g.C(pt)?(Dt={},Dt[R]=pt):Dt=pt,g.C(mt)?(Lt={},Lt[R]=mt):Lt=mt;var wt=D.iconPaths={};g.k(Dt,function(Nt,Gt){var Kt=_r.createIcon(Nt,{},{x:-c/2,y:-c/2,width:c,height:c});Kt.setStyle(Q.getItemStyle());var te=Kt.ensureState("emphasis");te.style=rt.getItemStyle();var ne=new he.a({style:{text:Lt[Gt],align:rt.get("textAlign"),borderRadius:rt.get("textBorderRadius"),padding:rt.get("textPadding"),fill:null},ignore:!0});Kt.setTextContent(ne),_r.setTooltipConfig({el:Kt,componentModel:e,itemName:Gt,formatterParamsExtra:{title:Lt[Gt]}}),Kt.__title=Lt[Gt],Kt.on("mouseover",function(){var pe=rt.getItemStyle(),me=e.get("orient")==="vertical"?e.get("right")==null?"right":"left":e.get("bottom")==null?"bottom":"top";ne.setStyle({fill:rt.get("textFill")||pe.fill||pe.stroke||"#000",backgroundColor:rt.get("textBackgroundColor")}),Kt.setTextConfig({position:rt.get("textPosition")||me}),ne.ignore=!e.get("showTitle"),Object(ar.r)(this)}).on("mouseout",function(){D.get(["iconStatus",Gt])!=="emphasis"&&Object(ar.C)(this),ne.hide()}),(D.get(["iconStatus",Gt])==="emphasis"?ar.r:ar.C)(Kt),u.add(Kt),Kt.on("click",g.c(w.onclick,w,n,o,Gt)),wt[Gt]=Kt})}uA(u,e,o),u.add($1(u.getBoundingRect(),e)),u.eachChild(function(D){var w=D.__title,R=D.ensureState("emphasis"),Q=R.textConfig||(R.textConfig={}),rt=D.getTextContent(),pt=rt&&rt.states.emphasis;if(pt&&!g.w(pt)&&w){var mt=pt.style||(pt.style={}),Dt=lt.d(w,he.a.makeFont(mt)),Lt=D.x+u.x,wt=D.y+u.y+c,Nt=!1;wt+Dt.height>o.getHeight()&&(Q.position="top",Nt=!0);var Gt=Nt?-5-Dt.height:c+8;Lt+Dt.width/2>o.getWidth()?(Q.position=["100%",Gt],mt.align="right"):Lt-Dt.width/2<0&&(Q.position=[0,Gt],mt.align="left")}})},r.prototype.updateView=function(e,n,o,s){g.k(this._features,function(u){u instanceof ka&&u.updateView&&u.updateView(u.model,n,o,s)})},r.prototype.remove=function(e,n){g.k(this._features,function(o){o instanceof ka&&o.remove&&o.remove(e,n)}),this.group.removeAll()},r.prototype.dispose=function(e,n){g.k(this._features,function(o){o instanceof ka&&o.dispose&&o.dispose(e,n)})},r.type="toolbox",r}(gn.a);function cA(a){return a.indexOf("my")===0}var hA=fA,vA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){var o=this.model,s=o.get("name")||e.get("title.0.text")||"echarts",u=n.getZr().painter.getType()==="svg",c=u?"svg":o.get("type",!0)||"png",v=n.getConnectedDataURL({type:c,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),d=ia.a.browser;if(Object(g.w)(MouseEvent)&&(d.newEdge||!d.ie&&!d.edge)){var m=document.createElement("a");m.download=s+"."+c,m.target="_blank",m.href=v;var x=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});m.dispatchEvent(x)}else if(window.navigator.msSaveOrOpenBlob||u){var T=v.split(","),D=T[0].indexOf("base64")>-1,w=u?decodeURIComponent(T[1]):T[1];D&&(w=window.atob(w));var R=s+"."+c;if(window.navigator.msSaveOrOpenBlob){for(var Q=w.length,rt=new Uint8Array(Q);Q--;)rt[Q]=w.charCodeAt(Q);var pt=new Blob([rt]);window.navigator.msSaveOrOpenBlob(pt,R)}else{var mt=document.createElement("iframe");document.body.appendChild(mt);var Dt=mt.contentWindow,Lt=Dt.document;Lt.open("image/svg+xml","replace"),Lt.write(w),Lt.close(),Dt.focus(),Lt.execCommand("SaveAs",!0,R),document.body.removeChild(mt)}}else{var wt=o.get("lang"),Nt='<body style="margin:0;"><img src="'+v+'" style="max-width:100%;" title="'+(wt&&wt[0]||"")+'" /></body>',Gt=window.open();Gt.document.write(Nt),Gt.document.title=s}},r.getDefaultOption=function(e){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},r}(ka),dA=vA,q1="__ec_magicType_stack__",F2=["line","bar","stack"],z2=["line","bar","stack","tiled"],pA=[["line","bar"],["stack"]],gA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getIcons=function(){var e=this.model,n=e.get("icon"),o={};return g.k(e.get("type"),function(s){n[s]&&(o[s]=n[s])}),o},r.getDefaultOption=function(e){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},r.prototype.onclick=function(e,n,o){var s=this.model,u=s.get(["seriesIndex",o]);if(!!tx[o]){var c={series:[]},v=function(x){var T=x.subType,D=x.id,w=tx[o](T,D,x,s);w&&(g.i(w,x.option),c.series.push(w));var R=x.coordinateSystem;if(R&&R.type==="cartesian2d"&&(o==="line"||o==="bar")){var Q=R.getAxesByScale("ordinal")[0];if(Q){var rt=Q.dim,pt=rt+"Axis",mt=x.getReferringComponents(pt,Be.b).models[0],Dt=mt.componentIndex;c[pt]=c[pt]||[];for(var Lt=0;Lt<=Dt;Lt++)c[pt][Dt]=c[pt][Dt]||{};c[pt][Dt].boundaryGap=o==="bar"}}};g.k(pA,function(x){g.r(x,o)>=0&&g.k(x,function(T){s.setIconStatus(T,"normal")})}),s.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},v);var d,m=o;o==="stack"&&(d=g.I({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",o])!=="emphasis"&&(m="tiled")),n.dispatchAction({type:"changeMagicType",currentType:m,newOption:c,newTitle:d,featureName:"magicType"})}},r}(ka),tx={line:function(a,r,e,n){if(a==="bar")return g.I({id:r,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(a,r,e,n){if(a==="line")return g.I({id:r,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(a,r,e,n){var o=e.get("stack")===q1;if(a==="line"||a==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),g.I({id:r,stack:o?"":q1},n.get(["option","stack"])||{},!0)}};Vs.e({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,r){r.mergeOption(a.newOption)});var mA=gA,Cd=new Array(60).join("-"),lf="	";function yA(a){var r={},e=[],n=[];return a.eachRawSeries(function(o){var s=o.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var u=s.getBaseAxis();if(u.type==="category"){var c=u.dim+"_"+u.index;r[c]||(r[c]={categoryAxis:u,valueAxis:s.getOtherAxis(u),series:[]},n.push({axisDim:u.dim,axisIndex:u.index})),r[c].series.push(o)}else e.push(o)}else e.push(o)}),{seriesGroupByCategoryAxis:r,other:e,meta:n}}function xA(a){var r=[];return g.k(a,function(e,n){var o=e.categoryAxis,s=e.valueAxis,u=s.dim,c=[" "].concat(g.H(e.series,function(D){return D.name})),v=[o.model.getCategories()];g.k(e.series,function(D){var w=D.getRawData();v.push(D.getRawData().mapArray(w.mapDimension(u),function(R){return R}))});for(var d=[c.join(lf)],m=0;m<v[0].length;m++){for(var x=[],T=0;T<v.length;T++)x.push(v[T][m]);d.push(x.join(lf))}r.push(d.join(`
`))}),r.join(`

`+Cd+`

`)}function _A(a){return g.H(a,function(r){var e=r.getRawData(),n=[r.name],o=[];return e.each(e.dimensions,function(){for(var s=arguments.length,u=arguments[s-1],c=e.getName(u),v=0;v<s-1;v++)o[v]=arguments[v];n.push((c?c+lf:"")+o.join(lf))}),n.join(`
`)}).join(`

`+Cd+`

`)}function bA(a){var r=yA(a);return{value:g.n([xA(r.seriesGroupByCategoryAxis),_A(r.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+Cd+`

`),meta:r.meta}}function Pd(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function SA(a){var r=a.slice(0,a.indexOf(`
`));if(r.indexOf(lf)>=0)return!0}var by=new RegExp("["+lf+"]+","g");function TA(a){for(var r=a.split(/\n+/g),e=Pd(r.shift()).split(by),n=[],o=g.H(e,function(v){return{name:v,data:[]}}),s=0;s<r.length;s++){var u=Pd(r[s]).split(by);n.push(u.shift());for(var c=0;c<u.length;c++)o[c]&&(o[c].data[s]=u[c])}return{series:o,categories:n}}function OA(a){for(var r=a.split(/\n+/g),e=Pd(r.shift()),n=[],o=0;o<r.length;o++){var s=Pd(r[o]);if(!!s){var u=s.split(by),c="",v=void 0,d=!1;isNaN(u[0])?(d=!0,c=u[0],u=u.slice(1),n[o]={name:c,value:[]},v=n[o].value):v=n[o]=[];for(var m=0;m<u.length;m++)v.push(+u[m]);v.length===1&&(d?n[o].value=v[0]:n[o]=v[0])}}return{name:e,data:n}}function AA(a,r){var e=a.split(new RegExp(`
*`+Cd+`
*`,"g")),n={series:[]};return g.k(e,function(o,s){if(SA(o)){var u=TA(o),c=r[s],v=c.axisDim+"Axis";c&&(n[v]=n[v]||[],n[v][c.axisIndex]={data:u.categories},n.series=n.series.concat(u.series))}else{var u=OA(o);n.series.push(u)}}),n}var MA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){var o=n.getDom(),s=this.model;this._dom&&o.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",u.style.backgroundColor=s.get("backgroundColor")||"#fff";var c=document.createElement("h4"),v=s.get("lang")||[];c.innerHTML=v[0]||s.get("title"),c.style.cssText="margin: 10px 20px;",c.style.color=s.get("textColor");var d=document.createElement("div"),m=document.createElement("textarea");d.style.cssText="display:block;width:100%;overflow:auto;";var x=s.get("optionToContent"),T=s.get("contentToOption"),D=bA(e);if(g.w(x)){var w=x(n.getOption());g.C(w)?d.innerHTML=w:g.v(w)&&d.appendChild(w)}else d.appendChild(m),m.readOnly=s.get("readOnly"),m.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",m.style.color=s.get("textColor"),m.style.borderColor=s.get("textareaBorderColor"),m.style.backgroundColor=s.get("textareaColor"),m.value=D.value;var R=D.meta,Q=document.createElement("div");Q.style.cssText="position:absolute;bottom:0;left:0;right:0;";var rt="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",pt=document.createElement("div"),mt=document.createElement("div");rt+=";background-color:"+s.get("buttonColor"),rt+=";color:"+s.get("buttonTextColor");var Dt=this;function Lt(){o.removeChild(u),Dt._dom=null}Object(ae.a)(pt,"click",Lt),Object(ae.a)(mt,"click",function(){if(T==null&&x!=null||T!=null&&x==null){Lt();return}var wt;try{g.w(T)?wt=T(d,n.getOption()):wt=AA(m.value,R)}catch(Nt){throw Lt(),new Error("Data view format error "+Nt)}wt&&n.dispatchAction({type:"changeDataView",newOption:wt}),Lt()}),pt.innerHTML=v[1],mt.innerHTML=v[2],mt.style.cssText=rt,pt.style.cssText=rt,!s.get("readOnly")&&Q.appendChild(mt),Q.appendChild(pt),u.appendChild(c),u.appendChild(d),u.appendChild(Q),d.style.height=o.clientHeight-80+"px",o.appendChild(u),this._dom=u},r.prototype.remove=function(e,n){this._dom&&n.getDom().removeChild(this._dom)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.getDefaultOption=function(e){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},r}(ka);function DA(a,r){return g.H(a,function(e,n){var o=r&&r[n];if(g.A(o)&&!g.t(o)){var s=g.A(e)&&!g.t(e);s||(e={value:e});var u=o.name!=null&&e.name==null;return e=g.i(e,o),u&&delete e.name,e}else return e})}Vs.e({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,r){var e=[];g.k(a.newOption.series,function(n){var o=r.getSeriesByName(n.name)[0];if(!o)e.push(g.m({type:"scatter"},n));else{var s=o.get("data");e.push({name:n.name,data:DA(n.data,s)})}}),r.mergeOption(g.i({series:e},a.newOption))});var EA=MA,ex=g.k,rx=Object(Be.o)();function CA(a,r){var e=Sy(a);ex(r,function(n,o){for(var s=e.length-1;s>=0;s--){var u=e[s];if(u[o])break}if(s<0){var c=a.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(c){var v=c.getPercentRange();e[0][o]={dataZoomId:o,start:v[0],end:v[1]}}}}),e.push(r)}function PA(a){var r=Sy(a),e=r[r.length-1];r.length>1&&r.pop();var n={};return ex(e,function(o,s){for(var u=r.length-1;u>=0;u--)if(o=r[u][s],o){n[s]=o;break}}),n}function wA(a){rx(a).snapshots=null}function LA(a){return Sy(a).length}function Sy(a){var r=rx(a);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var IA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){wA(e),n.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(e){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return n},r}(ka);Vs.e({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,r){r.resetOption("recreate")});var RA=IA,NA=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],jA=function(){function a(r,e,n){var o=this;this._targetInfoList=[];var s=nx(e,r);Object(g.k)(BA,function(u,c){(!n||!n.include||Object(g.r)(n.include,c)>=0)&&u(s,o._targetInfoList)})}return a.prototype.setOutputRanges=function(r,e){return this.matchOutputRanges(r,e,function(n,o,s){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var u=Oy[n.brushType](0,s,o);n.__rangeOffset={offset:sx[n.brushType](u.values,n.range,[1,1]),xyMinMax:u.xyMinMax}}}),r},a.prototype.matchOutputRanges=function(r,e,n){Object(g.k)(r,function(o){var s=this.findTargetInfo(o,e);s&&s!==!0&&Object(g.k)(s.coordSyses,function(u){var c=Oy[o.brushType](1,u,o.range,!0);n(o,c.values,u,e)})},this)},a.prototype.setInputRanges=function(r,e){Object(g.k)(r,function(n){var o=this.findTargetInfo(n,e);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var s=Oy[n.brushType](0,o.coordSys,n.coordRange),u=n.__rangeOffset;n.range=u?sx[n.brushType](s.values,u.offset,FA(s.xyMinMax,u.xyMinMax)):s.values}},this)},a.prototype.makePanelOpts=function(r,e){return Object(g.H)(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:Hc(o),isTargetByCursor:dd(o,r,n.coordSysModel),getLinearBrushOtherExtent:vd(o)}})},a.prototype.controlSeries=function(r,e,n){var o=this.findTargetInfo(r,n);return o===!0||o&&Object(g.r)(o.coordSyses,e.coordinateSystem)>=0},a.prototype.findTargetInfo=function(r,e){for(var n=this._targetInfoList,o=nx(e,r),s=0;s<n.length;s++){var u=n[s],c=r.panelId;if(c){if(u.panelId===c)return u}else for(var v=0;v<ix.length;v++)if(ix[v](o,u))return u}return!0},a}();function Ty(a){return a[0]>a[1]&&a.reverse(),a}function nx(a,r){return Object(Be.s)(a,r,{includeMainTypes:NA})}var BA={grid:function(a,r){var e=a.xAxisModels,n=a.yAxisModels,o=a.gridModels,s=Object(g.f)(),u={},c={};!e&&!n&&!o||(Object(g.k)(e,function(v){var d=v.axis.grid.model;s.set(d.id,d),u[d.id]=!0}),Object(g.k)(n,function(v){var d=v.axis.grid.model;s.set(d.id,d),c[d.id]=!0}),Object(g.k)(o,function(v){s.set(v.id,v),u[v.id]=!0,c[v.id]=!0}),s.each(function(v){var d=v.coordinateSystem,m=[];Object(g.k)(d.getCartesians(),function(x,T){(Object(g.r)(e,x.getAxis("x").model)>=0||Object(g.r)(n,x.getAxis("y").model)>=0)&&m.push(x)}),r.push({panelId:"grid--"+v.id,gridModel:v,coordSysModel:v,coordSys:m[0],coordSyses:m,getPanelRect:ax.grid,xAxisDeclared:u[v.id],yAxisDeclared:c[v.id]})}))},geo:function(a,r){Object(g.k)(a.geoModels,function(e){var n=e.coordinateSystem;r.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:ax.geo})})}},ix=[function(a,r){var e=a.xAxisModel,n=a.yAxisModel,o=a.gridModel;return!o&&e&&(o=e.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===r.gridModel},function(a,r){var e=a.geoModel;return e&&e===r.geoModel}],ax={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,r=a.getBoundingRect().clone();return r.applyTransform(_r.getTransform(a)),r}},Oy={lineX:Object(g.h)(ox,0),lineY:Object(g.h)(ox,1),rect:function(a,r,e,n){var o=a?r.pointToData([e[0][0],e[1][0]],n):r.dataToPoint([e[0][0],e[1][0]],n),s=a?r.pointToData([e[0][1],e[1][1]],n):r.dataToPoint([e[0][1],e[1][1]],n),u=[Ty([o[0],s[0]]),Ty([o[1],s[1]])];return{values:u,xyMinMax:u}},polygon:function(a,r,e,n){var o=[[Infinity,-Infinity],[Infinity,-Infinity]],s=Object(g.H)(e,function(u){var c=a?r.pointToData(u,n):r.dataToPoint(u,n);return o[0][0]=Math.min(o[0][0],c[0]),o[1][0]=Math.min(o[1][0],c[1]),o[0][1]=Math.max(o[0][1],c[0]),o[1][1]=Math.max(o[1][1],c[1]),c});return{values:s,xyMinMax:o}}};function ox(a,r,e,n){var o=e.getAxis(["x","y"][a]),s=Ty(Object(g.H)([0,1],function(c){return r?o.coordToData(o.toLocalCoord(n[c]),!0):o.toGlobalCoord(o.dataToCoord(n[c]))})),u=[];return u[a]=s,u[1-a]=[NaN,NaN],{values:s,xyMinMax:u}}var sx={lineX:Object(g.h)(lx,0),lineY:Object(g.h)(lx,1),rect:function(a,r,e){return[[a[0][0]-e[0]*r[0][0],a[0][1]-e[0]*r[0][1]],[a[1][0]-e[1]*r[1][0],a[1][1]-e[1]*r[1][1]]]},polygon:function(a,r,e){return Object(g.H)(a,function(n,o){return[n[0]-e[0]*r[o][0],n[1]-e[1]*r[o][1]]})}};function lx(a,r,e,n){return[r[0]-n[a]*e[0],r[1]-n[a]*e[1]]}function FA(a,r){var e=ux(a),n=ux(r),o=[e[0]/n[0],e[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function ux(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var Ay=jA,zA=b("GBOm"),My=g.k,VA=Object(Be.p)("toolbox-dataZoom_"),V2=["zoom","back"],GA=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){this._brushController||(this._brushController=new ki(o.getZr()),this._brushController.on("brush",g.c(this._onBrush,this)).mount()),WA(e,n,this,s,o),HA(e,n)},r.prototype.onclick=function(e,n,o){UA[o].call(this)},r.prototype.remove=function(e,n){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(e,n){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(e){var n=e.areas;if(!e.isEnd||!n.length)return;var o={},s=this.ecModel;this._brushController.updateCovers([]);var u=new Ay(Dy(this.model),s,{include:["grid"]});u.matchOutputRanges(n,s,function(d,m,x){if(x.type==="cartesian2d"){var T=d.brushType;T==="rect"?(c("x",x,m[0]),c("y",x,m[1])):c({lineX:"x",lineY:"y"}[T],x,m)}}),CA(s,o),this._dispatchZoomAction(o);function c(d,m,x){var T=m.getAxis(d),D=T.model,w=v(d,D,s),R=w.findRepresentativeAxisProxy(D).getMinMaxSpan();(R.minValueSpan!=null||R.maxValueSpan!=null)&&(x=Nn(0,x.slice(),T.scale.getExtent(),0,R.minValueSpan,R.maxValueSpan)),w&&(o[w.id]={dataZoomId:w.id,startValue:x[0],endValue:x[1]})}function v(d,m,x){var T;return x.eachComponent({mainType:"dataZoom",subType:"select"},function(D){var w=D.getAxisModel(d,m.componentIndex);w&&(T=D)}),T}},r.prototype._dispatchZoomAction=function(e){var n=[];My(e,function(o,s){n.push(g.d(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},r.getDefaultOption=function(e){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},r}(ka),UA={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(PA(this.ecModel))}};function Dy(a){var r={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function HA(a,r){a.setIconStatus("back",LA(r)>1?"emphasis":"normal")}function WA(a,r,e,n,o){var s=e._isZoomActive;n&&n.type==="takeGlobalCursor"&&(s=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),e._isZoomActive=s,a.setIconStatus("zoom",s?"emphasis":"normal");var u=new Ay(Dy(a),r,{include:["grid"]}),c=u.makePanelOpts(o,function(v){return v.xAxisDeclared&&!v.yAxisDeclared?"lineX":!v.xAxisDeclared&&v.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(c).enableBrush(s&&c.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}Object(zA.b)("dataZoom",function(a){var r=a.getComponent("toolbox",0),e=["feature","dataZoom"];if(!r||r.get(e)==null)return;var n=r.getModel(e),o=[],s=Dy(n),u=Object(Be.s)(a,s);My(u.xAxisModels,function(v){return c(v,"xAxis","xAxisIndex")}),My(u.yAxisModels,function(v){return c(v,"yAxis","yAxisIndex")});function c(v,d,m){var x=v.componentIndex,T={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:VA+d+x};T[m]=x,o.push(T)}return o});var kA=GA;function XA(a){a.registerComponentModel(lA),a.registerComponentView(hA),sf("saveAsImage",dA),sf("magicType",mA),sf("dataView",EA),sf("dataZoom",kA),sf("restore",RA),Object(B.a)(oA)}var ZA=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}($n.a),YA=ZA,KA=b("tMOh");function fx(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function cx(a){if(!!ia.a.domSupported){for(var r=document.documentElement.style,e=0,n=a.length;e<n;e++)if(a[e]in r)return a[e]}}var hx=cx(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),QA=cx(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function vx(a,r){if(!a)return r;r=Object(Vn.k)(r,!0);var e=a.indexOf(r);return a=e===-1?r:"-"+a.slice(0,e)+"-"+r,a.toLowerCase()}function JA(a,r){var e=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return e?r?e[r]:e:null}var $A=vx(QA,"transition"),Ey=vx(hx,"transform"),qA="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ia.a.transform3dSupported?"will-change:transform;":"");function tM(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function eM(a,r,e){if(!Object(g.C)(e)||e==="inside")return"";var n=a.get("backgroundColor"),o=a.get("borderWidth");r=Object(Vn.c)(r);var s=tM(e),u=Math.max(Math.round(o)*1.5,6),c="",v=Ey+":",d;Object(g.r)(["left","right"],s)>-1?(c+="top:50%",v+="translateY(-50%) rotate("+(d=s==="left"?-225:-45)+"deg)"):(c+="left:50%",v+="translateX(-50%) rotate("+(d=s==="top"?225:45)+"deg)");var m=d*Math.PI/180,x=u+o,T=x*Math.abs(Math.cos(m))+x*Math.abs(Math.sin(m)),D=Math.round(((T-Math.SQRT2*o)/2+Math.SQRT2*o-(T-x)/2)*100)/100;c+=";"+s+":-"+D+"px";var w=r+" solid "+o+"px;",R=["position:absolute;width:"+u+"px;height:"+u+"px;",c+";"+v+";","border-bottom:"+w,"border-right:"+w,"background-color:"+n+";"];return'<div style="'+R.join("")+'"></div>'}function rM(a,r){var e="cubic-bezier(0.23,1,0.32,1)",n=" "+a/2+"s "+e,o="opacity"+n+",visibility"+n;return r||(n=" "+a+"s "+e,o+=ia.a.transformSupported?","+Ey+n:",left"+n+",top"+n),$A+":"+o}function dx(a,r,e){var n=a.toFixed(0)+"px",o=r.toFixed(0)+"px";if(!ia.a.transformSupported)return e?"top:"+o+";left:"+n+";":[["top",o],["left",n]];var s=ia.a.transform3dSupported,u="translate"+(s?"3d":"")+"("+n+","+o+(s?",0":"")+")";return e?"top:0;left:0;"+Ey+":"+u+";":[["top",0],["left",0],[hx,u]]}function nM(a){var r=[],e=a.get("fontSize"),n=a.getTextColor();n&&r.push("color:"+n),r.push("font:"+a.getFont()),e&&r.push("line-height:"+Math.round(e*3/2)+"px");var o=a.get("textShadowColor"),s=a.get("textShadowBlur")||0,u=a.get("textShadowOffsetX")||0,c=a.get("textShadowOffsetY")||0;return o&&s&&r.push("text-shadow:"+u+"px "+c+"px "+s+"px "+o),Object(g.k)(["decoration","align"],function(v){var d=a.get(v);d&&r.push("text-"+v+":"+d)}),r.join(";")}function iM(a,r,e){var n=[],o=a.get("transitionDuration"),s=a.get("backgroundColor"),u=a.get("shadowBlur"),c=a.get("shadowColor"),v=a.get("shadowOffsetX"),d=a.get("shadowOffsetY"),m=a.getModel("textStyle"),x=Object(Xn.d)(a,"html"),T=v+"px "+d+"px "+u+"px "+c;return n.push("box-shadow:"+T),r&&o&&n.push(rM(o,e)),s&&n.push("background-color:"+s),Object(g.k)(["width","color","radius"],function(D){var w="border-"+D,R=Object(Vn.k)(w),Q=a.get(R);Q!=null&&n.push(w+":"+Q+(D==="color"?"":"px"))}),n.push(nM(m)),x!=null&&n.push("padding:"+Object(Vn.j)(x).join("px ")+"px"),n.join(";")+";"}function px(a,r,e,n,o){var s=r&&r.painter;if(e){var u=s&&s.getViewportRoot();u&&Object(KA.c)(a,u,document.body,n,o)}else{a[0]=n,a[1]=o;var c=s&&s.getViewportRootOffset();c&&(a[0]+=c.offsetLeft,a[1]+=c.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var aM=function(){function a(r,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,ia.a.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=e.getZr(),u=this._appendToBody=n&&n.appendToBody;px(this._styleCoord,s,u,e.getWidth()/2,e.getHeight()/2),u?document.body.appendChild(o):r.appendChild(o),this._container=r;var c=this;o.onmouseenter=function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0},o.onmousemove=function(v){if(v=v||window.event,!c._enterable){var d=s.handler,m=s.painter.getViewportRoot();Object(ae.e)(m,v,!0),d.dispatch("mousemove",v)}},o.onmouseleave=function(){c._inContent=!1,c._enterable&&c._show&&c.hideLater(c._hideDelay)}}return a.prototype.update=function(r){var e=this._container,n=JA(e,"position"),o=e.style;o.position!=="absolute"&&n!=="absolute"&&(o.position="relative");var s=r.get("alwaysShowContent");s&&this._moveIfResized(),this.el.className=r.get("className")||""},a.prototype.show=function(r,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,o=n.style,s=this._styleCoord;n.innerHTML?o.cssText=qA+iM(r,!this._firstShow,this._longHide)+dx(s[0],s[1],!0)+("border-color:"+Object(Vn.c)(e)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,e,n,o,s){var u=this.el;if(r==null){u.innerHTML="";return}var c="";if(Object(g.C)(s)&&n.get("trigger")==="item"&&!fx(n)&&(c=eM(n,o,s)),Object(g.C)(r))u.innerHTML=r+c;else if(r){u.innerHTML="",Object(g.t)(r)||(r=[r]);for(var v=0;v<r.length;v++)Object(g.v)(r[v])&&r[v].parentNode!==u&&u.appendChild(r[v]);if(c&&u.childNodes.length){var d=document.createElement("div");d.innerHTML=c,u.appendChild(d)}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},a.prototype.moveTo=function(r,e){var n=this._styleCoord;if(px(n,this._zr,this._appendToBody,r,e),n[0]!=null&&n[1]!=null){var o=this.el.style,s=dx(n[0],n[1]);Object(g.k)(s,function(u){o[u[0]]=u[1]})}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){var r=this,e=this.el.style;e.visibility="hidden",e.opacity="0",ia.a.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(Object(g.c)(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},a}(),oM=aM,sM=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=r.getZr(),mx(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var e=r.get("alwaysShowContent");e&&this._moveIfResized()},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,e,n,o,s){var u=this;g.A(r)&&Object($r.c)(""),this.el&&this._zr.remove(this.el);var c=n.getModel("textStyle");this.el=new he.a({style:{rich:e.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:c.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:Object(Xn.d)(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),g.k(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){u.el.style[d]=n.get(d)}),g.k(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){u.el.style[d]=c.get(d)||0}),this._zr.add(this.el);var v=this;this.el.on("mouseover",function(){v._enterable&&(clearTimeout(v._hideTimeout),v._show=!0),v._inContent=!0}),this.el.on("mouseout",function(){v._enterable&&v._show&&v.hideLater(v._hideDelay),v._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,e=this.el.getBoundingRect(),n=gx(r.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},a.prototype.moveTo=function(r,e){var n=this.el;if(n){var o=this._styleCoord;mx(o,this._zr,r,e),r=o[0],e=o[1];var s=n.style,u=hl(s.borderWidth||0),c=gx(s);n.x=r+u+c.left,n.y=e+u+c.top,n.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(g.c(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function hl(a){return Math.max(0,a)}function gx(a){var r=hl(a.shadowBlur||0),e=hl(a.shadowOffsetX||0),n=hl(a.shadowOffsetY||0);return{left:hl(r-e),right:hl(r+e),top:hl(r-n),bottom:hl(r+n)}}function mx(a,r,e,n){a[0]=e,a[1]=n,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var lM=sM,uM=b("c/nf"),wd=b("1OoA"),fM=new Qr.a({shape:{x:-1,y:-1,width:2,height:2}}),cM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){if(!(ia.a.node||!n.getDom())){var o=e.getComponent("tooltip"),s=this._renderMode=Object(Be.i)(o.get("renderMode"));this._tooltipContent=s==="richText"?new lM(n):new oM(n.getDom(),n,{appendToBody:o.get("appendToBody",!0)})}},r.prototype.render=function(e,n,o){if(!(ia.a.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=n,this._api=o,this._alwaysShowContent=e.get("alwaysShowContent");var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?Object(Gn.b)(this,"_updatePosition",50,"fixRate"):Object(Gn.a)(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var e=this._tooltipModel,n=e.get("triggerOn");b1("itemTooltip",this._api,Object(g.c)(function(o,s,u){n!=="none"&&(n.indexOf(o)>=0?this._tryShow(s,u):o==="leave"&&this._hide(u))},this))},r.prototype._keepShow=function(){var e=this._tooltipModel,n=this._ecModel,o=this._api;if(this._lastX!=null&&this._lastY!=null&&e.get("triggerOn")!=="none"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&s.manuallyShowTip(e,n,o,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(e,n,o,s){if(!(s.from===this.uid||ia.a.node||!o.getDom())){var u=yx(s,o);this._ticket="";var c=s.dataByCoordSys,v=pM(s,n,o);if(v){var d=v.el.getBoundingRect().clone();d.applyTransform(v.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:v.el,position:s.position,positionDefault:"bottom"},u)}else if(s.tooltip&&s.x!=null&&s.y!=null){var m=fM;m.x=s.x,m.y=s.y,m.update(),Object(br.a)(m).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:m},u)}else if(c)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:c,tooltipOption:s.tooltipOption},u);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,n,o,s))return;var x=T1(s,n),T=x.point[0],D=x.point[1];T!=null&&D!=null&&this._tryShow({offsetX:T,offsetY:D,target:x.el,position:s.position,positionDefault:"bottom"},u)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},u))}},r.prototype.manuallyHideTip=function(e,n,o,s){var u=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(yx(s,o))},r.prototype._manuallyAxisShowTip=function(e,n,o,s){var u=s.seriesIndex,c=s.dataIndex,v=n.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||c==null||v==null)){var d=n.getSeriesByIndex(u);if(!!d){var m=d.getData(),x=Kc([m.getItemModel(c),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(x.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:c,position:s.position}),!0}}},r.prototype._tryShow=function(e,n){var o=e.target,s=this._tooltipModel;if(!!s){this._lastX=e.offsetX,this._lastY=e.offsetY;var u=e.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,e);else if(o){this._lastDataByCoordSys=null;var c,v;Object(Xh.a)(o,function(d){if(Object(br.a)(d).dataIndex!=null)return c=d,!0;if(Object(br.a)(d).tooltipConfig!=null)return v=d,!0},!0),c?this._showSeriesItemTooltip(e,c,n):v?this._showComponentItemTooltip(e,v,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},r.prototype._showOrMove=function(e,n){var o=e.get("showDelay");n=Object(g.c)(n,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(n,o):n()},r.prototype._showAxisTooltip=function(e,n){var o=this._ecModel,s=this._tooltipModel,u=[n.offsetX,n.offsetY],c=Kc([n.tooltipOption],s),v=this._renderMode,d=[],m=Object(Xn.c)("section",{blocks:[],noHeader:!0}),x=[],T=new Xn.a;Object(g.k)(e,function(pt){Object(g.k)(pt.dataByAxis,function(mt){var Dt=o.getComponent(mt.axisDim+"Axis",mt.axisIndex),Lt=mt.value;if(!(!Dt||Lt==null)){var wt=p1(Lt,Dt.axis,o,mt.seriesDataIndices,mt.valueLabelOpt),Nt=Object(Xn.c)("section",{header:wt,noHeader:!Object(g.T)(wt),sortBlocks:!0,blocks:[]});m.blocks.push(Nt),Object(g.k)(mt.seriesDataIndices,function(Gt){var Kt=o.getSeriesByIndex(Gt.seriesIndex),te=Gt.dataIndexInside,ne=Kt.getDataParams(te);if(!(ne.dataIndex<0)){ne.axisDim=mt.axisDim,ne.axisIndex=mt.axisIndex,ne.axisType=mt.axisType,ne.axisId=mt.axisId,ne.axisValue=di.c(Dt.axis,{value:Lt}),ne.axisValueLabel=wt,ne.marker=T.makeTooltipMarker("item",Object(Vn.c)(ne.color),v);var pe=Object(wd.b)(Kt.formatTooltip(te,!0,null)),me=pe.frag;if(me){var xe=Kc([Kt],s).get("valueFormatter");Nt.blocks.push(xe?Object(g.m)({valueFormatter:xe},me):me)}pe.text&&x.push(pe.text),d.push(ne)}})}})}),m.blocks.reverse(),x.reverse();var D=n.position,w=c.get("order"),R=Object(Xn.b)(m,T,v,w,o.get("useUTC"),c.get("textStyle"));R&&x.unshift(R);var Q=v==="richText"?`

`:"<br/>",rt=x.join(Q);this._showOrMove(c,function(){this._updateContentNotChangedOnAxis(e,d)?this._updatePosition(c,D,u[0],u[1],this._tooltipContent,d):this._showTooltipContent(c,rt,d,Math.random()+"",u[0],u[1],D,null,T)})},r.prototype._showSeriesItemTooltip=function(e,n,o){var s=this._ecModel,u=Object(br.a)(n),c=u.seriesIndex,v=s.getSeriesByIndex(c),d=u.dataModel||v,m=u.dataIndex,x=u.dataType,T=d.getData(x),D=this._renderMode,w=e.positionDefault,R=Kc([T.getItemModel(m),d,v&&(v.coordinateSystem||{}).model],this._tooltipModel,w?{position:w}:null),Q=R.get("trigger");if(!(Q!=null&&Q!=="item")){var rt=d.getDataParams(m,x),pt=new Xn.a;rt.marker=pt.makeTooltipMarker("item",Object(Vn.c)(rt.color),D);var mt=Object(wd.b)(d.formatTooltip(m,!1,x)),Dt=R.get("order"),Lt=R.get("valueFormatter"),wt=mt.frag,Nt=wt?Object(Xn.b)(Lt?Object(g.m)({valueFormatter:Lt},wt):wt,pt,D,Dt,s.get("useUTC"),R.get("textStyle")):mt.text,Gt="item_"+d.name+"_"+m;this._showOrMove(R,function(){this._showTooltipContent(R,Nt,rt,Gt,e.offsetX,e.offsetY,e.position,e.target,pt)}),o({type:"showTip",dataIndexInside:m,dataIndex:T.getRawIndex(m),seriesIndex:c,from:this.uid})}},r.prototype._showComponentItemTooltip=function(e,n,o){var s=Object(br.a)(n),u=s.tooltipConfig,c=u.option||{};if(Object(g.C)(c)){var v=c;c={content:v,formatter:v}}var d=[c],m=this._ecModel.getComponent(s.componentMainType,s.componentIndex);m&&d.push(m),d.push({formatter:c.content});var x=e.positionDefault,T=Kc(d,this._tooltipModel,x?{position:x}:null),D=T.get("content"),w=Math.random()+"",R=new Xn.a;this._showOrMove(T,function(){var Q=Object(g.d)(T.get("formatterParams")||{});this._showTooltipContent(T,D,Q,w,e.offsetX,e.offsetY,e.position,n,R)}),o({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(e,n,o,s,u,c,v,d,m){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var x=this._tooltipContent,T=e.get("formatter");v=v||e.get("position");var D=n,w=this._getNearestPoint([u,c],o,e.get("trigger"),e.get("borderColor")),R=w.color;if(T)if(Object(g.C)(T)){var Q=e.ecModel.get("useUTC"),rt=Object(g.t)(o)?o[0]:o,pt=rt&&rt.axisType&&rt.axisType.indexOf("time")>=0;D=T,pt&&(D=Object(uM.h)(rt.axisValue,D,Q)),D=Object(Vn.f)(D,o,!0)}else if(Object(g.w)(T)){var mt=Object(g.c)(function(Dt,Lt){Dt===this._ticket&&(x.setContent(Lt,m,e,R,v),this._updatePosition(e,v,u,c,x,o,d))},this);this._ticket=s,D=T(o,s,mt)}else D=T;x.setContent(D,m,e,R,v),x.show(e,R),this._updatePosition(e,v,u,c,x,o,d)}},r.prototype._getNearestPoint=function(e,n,o,s){if(o==="axis"||Object(g.t)(n))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!Object(g.t)(n))return{color:s||n.color||n.borderColor}},r.prototype._updatePosition=function(e,n,o,s,u,c,v){var d=this._api.getWidth(),m=this._api.getHeight();n=n||e.get("position");var x=u.getSize(),T=e.get("align"),D=e.get("verticalAlign"),w=v&&v.getBoundingRect().clone();if(v&&w.applyTransform(v.transform),Object(g.w)(n)&&(n=n([o,s],c,u.el,w,{viewSize:[d,m],contentSize:x.slice()})),Object(g.t)(n))o=Object(Le.p)(n[0],d),s=Object(Le.p)(n[1],m);else if(Object(g.A)(n)){var R=n;R.width=x[0],R.height=x[1];var Q=Object(kr.g)(R,{width:d,height:m});o=Q.x,s=Q.y,T=null,D=null}else if(Object(g.C)(n)&&v){var rt=dM(n,w,x,e.get("borderWidth"));o=rt[0],s=rt[1]}else{var rt=hM(o,s,u,d,m,T?null:20,D?null:20);o=rt[0],s=rt[1]}if(T&&(o-=xx(T)?x[0]/2:T==="right"?x[0]:0),D&&(s-=xx(D)?x[1]/2:D==="bottom"?x[1]:0),fx(e)){var rt=vM(o,s,u,d,m);o=rt[0],s=rt[1]}u.moveTo(o,s)},r.prototype._updateContentNotChangedOnAxis=function(e,n){var o=this._lastDataByCoordSys,s=this._cbParamsList,u=!!o&&o.length===e.length;return u&&Object(g.k)(o,function(c,v){var d=c.dataByAxis||[],m=e[v]||{},x=m.dataByAxis||[];u=u&&d.length===x.length,u&&Object(g.k)(d,function(T,D){var w=x[D]||{},R=T.seriesDataIndices||[],Q=w.seriesDataIndices||[];u=u&&T.value===w.value&&T.axisType===w.axisType&&T.axisId===w.axisId&&R.length===Q.length,u&&Object(g.k)(R,function(rt,pt){var mt=Q[pt];u=u&&rt.seriesIndex===mt.seriesIndex&&rt.dataIndex===mt.dataIndex}),s&&Object(g.k)(T.seriesDataIndices,function(rt){var pt=rt.seriesIndex,mt=n[pt],Dt=s[pt];mt&&Dt&&Dt.data!==mt.data&&(u=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=n,!!u},r.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},r.prototype.dispose=function(e,n){ia.a.node||!n.getDom()||(Object(Gn.a)(this,"_updatePosition"),this._tooltipContent.dispose(),uy("itemTooltip",n))},r.type="tooltip",r}(gn.a);function Kc(a,r,e){var n=r.ecModel,o;e?(o=new fi.a(e,n,n),o=new fi.a(r.option,o,n)):o=r;for(var s=a.length-1;s>=0;s--){var u=a[s];u&&(u instanceof fi.a&&(u=u.get("tooltip",!0)),Object(g.C)(u)&&(u={formatter:u}),u&&(o=new fi.a(u,o,n)))}return o}function yx(a,r){return a.dispatchAction||Object(g.c)(r.dispatchAction,r)}function hM(a,r,e,n,o,s,u){var c=e.getSize(),v=c[0],d=c[1];return s!=null&&(a+v+s+2>n?a-=v+s:a+=s),u!=null&&(r+d+u>o?r-=d+u:r+=u),[a,r]}function vM(a,r,e,n,o){var s=e.getSize(),u=s[0],c=s[1];return a=Math.min(a+u,n)-u,r=Math.min(r+c,o)-c,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function dM(a,r,e,n){var o=e[0],s=e[1],u=Math.ceil(Math.SQRT2*n)+8,c=0,v=0,d=r.width,m=r.height;switch(a){case"inside":c=r.x+d/2-o/2,v=r.y+m/2-s/2;break;case"top":c=r.x+d/2-o/2,v=r.y-s-u;break;case"bottom":c=r.x+d/2-o/2,v=r.y+m+u;break;case"left":c=r.x-o-u,v=r.y+m/2-s/2;break;case"right":c=r.x+d+u,v=r.y+m/2-s/2}return[c,v]}function xx(a){return a==="center"||a==="middle"}function pM(a,r,e){var n=Object(Be.t)(a).queryOptionMap,o=n.keys()[0];if(!(!o||o==="series")){var s=Object(Be.v)(r,o,n.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),u=s.models[0];if(!!u){var c=e.getViewOfComponentModel(u),v;if(c.group.traverse(function(d){var m=Object(br.a)(d).tooltipConfig;if(m&&m.name===a.name)return v=d,!0}),v)return{componentMainType:o,componentIndex:u.componentIndex,el:v}}}}var gM=cM;function mM(a){Object(B.a)(Zc),a.registerComponentModel(YA),a.registerComponentView(gM),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},g.L),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},g.L)}var yM=["rect","polygon","keep","clear"];function xM(a,r){var e=Object(Be.r)(a?a.brush:[]);if(!!e.length){var n=[];g.k(e,function(v){var d=v.hasOwnProperty("toolbox")?v.toolbox:[];d instanceof Array&&(n=n.concat(d))});var o=a&&a.toolbox;g.t(o)&&(o=o[0]),o||(o={feature:{}},a.toolbox=[o]);var s=o.feature||(o.feature={}),u=s.brush||(s.brush={}),c=u.type||(u.type=[]);c.push.apply(c,n),_M(c),r&&!c.length&&c.push.apply(c,yM)}}function _M(a){var r={};g.k(a,function(e){r[e]=1}),a.length=0,g.k(r,function(e,n){a.push(n)})}var vl=b("c51C"),_x=g.k;function bx(a){if(a){for(var r in a)if(a.hasOwnProperty(r))return!0}}function Cy(a,r,e){var n={};return _x(r,function(s){var u=n[s]=o();_x(a[s],function(c,v){if(!!Ai.isValidType(v)){var d={type:v,visual:c};e&&e(d,s),u[v]=new Ai(d),v==="opacity"&&(d=g.d(d),d.type="colorAlpha",u.__hidden.__alphaForOpacity=new Ai(d))}})}),n;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var u=new s;return u}}function Sx(a,r,e){var n;g.k(e,function(o){r.hasOwnProperty(o)&&bx(r[o])&&(n=!0)}),n&&g.k(e,function(o){r.hasOwnProperty(o)&&bx(r[o])?a[o]=g.d(r[o]):delete a[o]})}function bM(a,r,e,n,o,s){var u={};g.k(a,function(x){var T=Ai.prepareVisualTypes(r[x]);u[x]=T});var c;function v(x){return Object(vl.a)(e,c,x)}function d(x,T){Object(vl.c)(e,c,x,T)}s==null?e.each(m):e.each([s],m);function m(x,T){c=s==null?x:T;var D=e.getRawDataItem(c);if(!(D&&D.visualMap===!1))for(var w=n.call(o,x),R=r[w],Q=u[w],rt=0,pt=Q.length;rt<pt;rt++){var mt=Q[rt];R[mt]&&R[mt].applyVisual(x,v,d)}}}function SM(a,r,e,n){var o={};return g.k(a,function(s){var u=Ai.prepareVisualTypes(r[s]);o[s]=u}),{progress:function(u,c){var v;n!=null&&(v=c.getDimensionIndex(n));function d(Lt){return Object(vl.a)(c,x,Lt)}function m(Lt,wt){Object(vl.c)(c,x,Lt,wt)}for(var x,T=c.getStore();(x=u.next())!=null;){var D=c.getRawDataItem(x);if(!(D&&D.visualMap===!1))for(var w=n!=null?T.get(v,x):x,R=e(w),Q=r[R],rt=o[R],pt=0,mt=rt.length;pt<mt;pt++){var Dt=rt[pt];Q[Dt]&&Q[Dt].applyVisual(w,d,m)}}}}}var Qc=b("v6/b");function TM(a){var r=a.brushType,e={point:function(n){return Py[r].point(n,e,a)},rect:function(n){return Py[r].rect(n,e,a)}};return e}var Py={lineX:Tx(0),lineY:Tx(1),rect:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])},rect:function(a,r,e){return a&&e.boundingRect.intersect(a)}},polygon:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])&&Qc.a(e.range,a[0],a[1])},rect:function(a,r,e){var n=e.range;if(!a||n.length<=1)return!1;var o=a.x,s=a.y,u=a.width,c=a.height,v=n[0];if(Qc.a(n,o,s)||Qc.a(n,o+u,s)||Qc.a(n,o,s+c)||Qc.a(n,o+u,s+c)||Ar.a.create(a).contain(v[0],v[1])||Object(_r.linePolygonIntersect)(o,s,o+u,s,n)||Object(_r.linePolygonIntersect)(o,s,o,s+c,n)||Object(_r.linePolygonIntersect)(o+u,s,o+u,s+c,n)||Object(_r.linePolygonIntersect)(o,s+c,o+u,s+c,n))return!0}}};function Tx(a){var r=["x","y"],e=["width","height"];return{point:function(n,o,s){if(n){var u=s.range,c=n[a];return Jc(c,u)}},rect:function(n,o,s){if(n){var u=s.range,c=[n[r[a]],n[r[a]]+n[e[a]]];return c[1]<c[0]&&c.reverse(),Jc(c[0],u)||Jc(c[1],u)||Jc(u[0],c)||Jc(u[1],c)}}}}function Jc(a,r){return r[0]<=a&&a<=r[1]}var G2=Py,Ox=["inBrush","outOfBrush"],wy="__ecBrushSelect",Ly="__ecInBrushSelectEvent";function Ax(a){a.eachComponent({mainType:"brush"},function(r){var e=r.brushTargetManager=new Ay(r.option,a);e.setInputRanges(r.areas,a)})}function OM(a,r,e){var n=[],o,s;a.eachComponent({mainType:"brush"},function(u){e&&e.type==="takeGlobalCursor"&&u.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),Ax(a),a.eachComponent({mainType:"brush"},function(u,c){var v={brushId:u.id,brushIndex:c,brushName:u.name,areas:g.d(u.areas),selected:[]};n.push(v);var d=u.option,m=d.brushLink,x=[],T=[],D=[],w=!1;c||(o=d.throttleType,s=d.throttleDelay);var R=g.H(u.areas,function(Lt){var wt=EM[Lt.brushType],Nt=g.i({boundingRect:wt?wt(Lt):void 0},Lt);return Nt.selectors=TM(Nt),Nt}),Q=Cy(u.option,Ox,function(Lt){Lt.mappingMethod="fixed"});g.t(m)&&g.k(m,function(Lt){x[Lt]=1});function rt(Lt){return m==="all"||!!x[Lt]}function pt(Lt){return!!Lt.length}a.eachSeries(function(Lt,wt){var Nt=D[wt]=[];Lt.subType==="parallel"?mt(Lt,wt):Dt(Lt,wt,Nt)});function mt(Lt,wt){var Nt=Lt.coordinateSystem;w=w||Nt.hasAxisBrushed(),rt(wt)&&Nt.eachActiveState(Lt.getData(),function(Gt,Kt){Gt==="active"&&(T[Kt]=1)})}function Dt(Lt,wt,Nt){if(!(!Lt.brushSelector||DM(u,wt))&&(g.k(R,function(Kt){u.brushTargetManager.controlSeries(Kt,Lt,a)&&Nt.push(Kt),w=w||pt(Nt)}),rt(wt)&&pt(Nt))){var Gt=Lt.getData();Gt.each(function(Kt){Mx(Lt,Nt,Gt,Kt)&&(T[Kt]=1)})}}a.eachSeries(function(Lt,wt){var Nt={seriesId:Lt.id,seriesIndex:wt,seriesName:Lt.name,dataIndex:[]};v.selected.push(Nt);var Gt=D[wt],Kt=Lt.getData(),te=rt(wt)?function(ne){return T[ne]?(Nt.dataIndex.push(Kt.getRawIndex(ne)),"inBrush"):"outOfBrush"}:function(ne){return Mx(Lt,Gt,Kt,ne)?(Nt.dataIndex.push(Kt.getRawIndex(ne)),"inBrush"):"outOfBrush"};(rt(wt)?w:pt(Gt))&&bM(Ox,Q,Kt,te)})}),AM(r,o,s,n,e)}function AM(a,r,e,n,o){if(!!o){var s=a.getZr();if(!s[Ly]){s[wy]||(s[wy]=MM);var u=Gn.b(s,wy,e,r);u(a,n)}}}function MM(a,r){if(!a.isDisposed()){var e=a.getZr();e[Ly]=!0,a.dispatchAction({type:"brushSelect",batch:r}),e[Ly]=!1}}function Mx(a,r,e,n){for(var o=0,s=r.length;o<s;o++){var u=r[o];if(a.brushSelector(n,e,u.selectors,u))return!0}}function DM(a,r){var e=a.option.seriesIndex;return e!=null&&e!=="all"&&(g.t(e)?g.r(e,r)<0:r!==e)}var EM={rect:function(a){return Dx(a.range)},polygon:function(a){for(var r,e=a.range,n=0,o=e.length;n<o;n++){r=r||[[Infinity,-Infinity],[Infinity,-Infinity]];var s=e[n];s[0]<r[0][0]&&(r[0][0]=s[0]),s[0]>r[0][1]&&(r[0][1]=s[0]),s[1]<r[1][0]&&(r[1][0]=s[1]),s[1]>r[1][1]&&(r[1][1]=s[1])}return r&&Dx(r)}};function Dx(a){return new Ar.a(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var CM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new ki(n.getZr())).on("brush",g.c(this._onBrush,this)).mount()},r.prototype.render=function(e,n,o,s){this.model=e,this._updateController(e,n,o,s)},r.prototype.updateTransform=function(e,n,o,s){Ax(n),this._updateController(e,n,o,s)},r.prototype.updateVisual=function(e,n,o,s){this.updateTransform(e,n,o,s)},r.prototype.updateView=function(e,n,o,s){this._updateController(e,n,o,s)},r.prototype._updateController=function(e,n,o,s){(!s||s.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(e){var n=this.model.id,o=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:g.d(o),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:g.d(o),$from:n})},r.type="brush",r}(gn.a),PM=CM,wM="#ddd",LM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.areas=[],e.brushOption={},e}return r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&Sx(o,e,["inBrush","outOfBrush"]);var s=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:wM},s.hasOwnProperty("liftZ")||(s.liftZ=5)},r.prototype.setAreas=function(e){!e||(this.areas=g.H(e,function(n){return Ex(this.option,n)},this))},r.prototype.setBrushOption=function(e){this.brushOption=Ex(this.option,e),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}($n.a);function Ex(a,r){return g.I({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new fi.a(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},r,!0)}var IM=LM,RM=["rect","polygon","lineX","lineY","keep","clear"],NM=function(a){Object(Pe.a)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o){var s,u,c;n.eachComponent({mainType:"brush"},function(v){s=v.brushType,u=v.brushOption.brushMode||"single",c=c||!!v.areas.length}),this._brushType=s,this._brushMode=u,g.k(e.get("type",!0),function(v){e.setIconStatus(v,(v==="keep"?u==="multiple":v==="clear"?c:v===s)?"emphasis":"normal")})},r.prototype.updateView=function(e,n,o){this.render(e,n,o)},r.prototype.getIcons=function(){var e=this.model,n=e.get("icon",!0),o={};return g.k(e.get("type",!0),function(s){n[s]&&(o[s]=n[s])}),o},r.prototype.onclick=function(e,n,o){var s=this._brushType,u=this._brushMode;o==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?s:s===o?!1:o,brushMode:o==="keep"?u==="multiple"?"single":"multiple":u}})},r.getDefaultOption=function(e){var n={show:!0,type:RM.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return n},r}(ka),jM=NM;function BM(a){a.registerComponentView(PM),a.registerComponentModel(IM),a.registerPreprocessor(xM),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,OM),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,e){e.eachComponent({mainType:"brush",query:r},function(n){n.setAreas(r.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},g.L),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},g.L),sf("brush",jM)}var FM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}($n.a),zM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){if(this.group.removeAll(),!!e.get("show")){var s=this.group,u=e.getModel("textStyle"),c=e.getModel("subtextStyle"),v=e.get("textAlign"),d=g.P(e.get("textBaseline"),e.get("textVerticalAlign")),m=new he.a({style:Object(xr.c)(u,{text:e.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),x=m.getBoundingRect(),T=e.get("subtext"),D=new he.a({style:Object(xr.c)(c,{text:T,fill:c.getTextColor(),y:x.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),w=e.get("link"),R=e.get("sublink"),Q=e.get("triggerEvent",!0);m.silent=!w&&!Q,D.silent=!R&&!Q,w&&m.on("click",function(){Object(Vn.l)(w,"_"+e.get("target"))}),R&&D.on("click",function(){Object(Vn.l)(R,"_"+e.get("subtarget"))}),Object(br.a)(m).eventData=Object(br.a)(D).eventData=Q?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(m),T&&s.add(D);var rt=s.getBoundingRect(),pt=e.getBoxLayoutParams();pt.width=rt.width,pt.height=rt.height;var mt=Object(kr.g)(pt,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));v||(v=e.get("left")||e.get("right"),v==="middle"&&(v="center"),v==="right"?mt.x+=mt.width:v==="center"&&(mt.x+=mt.width/2)),d||(d=e.get("top")||e.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?mt.y+=mt.height:d==="middle"&&(mt.y+=mt.height/2),d=d||"top"),s.x=mt.x,s.y=mt.y,s.markRedraw();var Dt={align:v,verticalAlign:d};m.setStyle(Dt),D.setStyle(Dt),rt=s.getBoundingRect();var Lt=mt.margin,wt=e.getItemStyle(["color","opacity"]);wt.fill=e.get("backgroundColor");var Nt=new Qr.a({shape:{x:rt.x-Lt[3],y:rt.y-Lt[0],width:rt.width+Lt[1]+Lt[3],height:rt.height+Lt[0]+Lt[2],r:e.get("borderRadius")},style:wt,subPixelOptimize:!0,silent:!0});s.add(Nt)}},r.type="title",r}(gn.a);function VM(a){a.registerComponentModel(FM),a.registerComponentView(zM)}var GM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode="box",e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._initData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var n=this._data.count();this.option.loop?e=(e%n+n)%n:(e>=n&&(e=n-1),e<0&&(e=0)),this.option.currentIndex=e},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(e){this.option.autoPlay=!!e},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var e=this.option,n=e.data||[],o=e.axisType,s=this._names=[],u;o==="category"?(u=[],Object(g.k)(n,function(d,m){var x=Object(Be.e)(Object(Be.h)(d),""),T;Object(g.A)(d)?(T=Object(g.d)(d),T.value=m):T=m,u.push(T),s.push(x)})):u=n;var c={category:"ordinal",time:"time",value:"number"}[o]||"number",v=this._data=new ue.a([{name:"value",type:c}],this);v.initData(u,s)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}($n.a),Cx=GM,Px=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline.slider",r.defaultOption=Object(yn.d)(Cx.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(Cx);Object(g.K)(Px,wd.a.prototype);var UM=Px,HM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline",r}(gn.a),WM=HM,kM=function(a){Object(Pe.a)(r,a);function r(e,n,o,s){var u=a.call(this,e,n,o)||this;return u.type=s||"value",u}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(ba.a),XM=kM,ZM=b("UNs0"),YM=b("caCy"),Iy=Math.PI,Lx=Object(Be.o)(),KM=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.api=n},r.prototype.render=function(e,n,o){if(this.model=e,this.api=o,this.ecModel=n,this.group.removeAll(),e.get("show",!0)){var s=this._layout(e,o),u=this._createGroup("_mainGroup"),c=this._createGroup("_labelGroup"),v=this._axis=this._createAxis(s,e);e.formatTooltip=function(d){var m=v.scale.getLabel({value:d});return Object(Xn.c)("nameValue",{noName:!0,value:m})},Object(g.k)(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](s,u,v,e)},this),this._renderAxisLabel(s,c,v,e),this._position(s,e)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(e,n){var o=e.get(["label","position"]),s=e.get("orient"),u=JM(e,n),c;o==null||o==="auto"?c=s==="horizontal"?u.y+u.height/2<n.getHeight()/2?"-":"+":u.x+u.width/2<n.getWidth()/2?"+":"-":Object(g.C)(o)?c={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:c=o;var v={horizontal:"center",vertical:c>=0||c==="+"?"left":"right"},d={horizontal:c>=0||c==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:Iy/2},x=s==="vertical"?u.height:u.width,T=e.getModel("controlStyle"),D=T.get("show",!0),w=D?T.get("itemSize"):0,R=D?T.get("itemGap"):0,Q=w+R,rt=e.get(["label","rotate"])||0;rt=rt*Iy/180;var pt,mt,Dt,Lt=T.get("position",!0),wt=D&&T.get("showPlayBtn",!0),Nt=D&&T.get("showPrevBtn",!0),Gt=D&&T.get("showNextBtn",!0),Kt=0,te=x;Lt==="left"||Lt==="bottom"?(wt&&(pt=[0,0],Kt+=Q),Nt&&(mt=[Kt,0],Kt+=Q),Gt&&(Dt=[te-w,0],te-=Q)):(wt&&(pt=[te-w,0],te-=Q),Nt&&(mt=[0,0],Kt+=Q),Gt&&(Dt=[te-w,0],te-=Q));var ne=[Kt,te];return e.get("inverse")&&ne.reverse(),{viewRect:u,mainLength:x,orient:s,rotation:m[s],labelRotation:rt,labelPosOpt:c,labelAlign:e.get(["label","align"])||v[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||d[s],playPosition:pt,prevBtnPosition:mt,nextBtnPosition:Dt,axisExtent:ne,controlSize:w,controlGap:R}},r.prototype._position=function(e,n){var o=this._mainGroup,s=this._labelGroup,u=e.viewRect;if(e.orient==="vertical"){var c=xn.c(),v=u.x,d=u.y+u.height;xn.i(c,c,[-v,-d]),xn.g(c,c,-Iy/2),xn.i(c,c,[v,d]),u=u.clone(),u.applyTransform(c)}var m=pt(u),x=pt(o.getBoundingRect()),T=pt(s.getBoundingRect()),D=[o.x,o.y],w=[s.x,s.y];w[0]=D[0]=m[0][0];var R=e.labelPosOpt;if(R==null||Object(g.C)(R)){var Q=R==="+"?0:1;mt(D,x,m,1,Q),mt(w,T,m,1,1-Q)}else{var Q=R>=0?0:1;mt(D,x,m,1,Q),w[1]=D[1]+R}o.setPosition(D),s.setPosition(w),o.rotation=s.rotation=e.rotation,rt(o),rt(s);function rt(Dt){Dt.originX=m[0][0]-Dt.x,Dt.originY=m[1][0]-Dt.y}function pt(Dt){return[[Dt.x,Dt.x+Dt.width],[Dt.y,Dt.y+Dt.height]]}function mt(Dt,Lt,wt,Nt,Gt){Dt[Nt]+=wt[Nt][Gt]-Lt[Nt][Gt]}},r.prototype._createAxis=function(e,n){var o=n.getData(),s=n.get("axisType"),u=QM(n,s);u.getTicks=function(){return o.mapArray(["value"],function(d){return{value:d}})};var c=o.getDataExtent("value");u.setExtent(c[0],c[1]),u.calcNiceTicks();var v=new XM("value",u,e.axisExtent,s);return v.model=n,v},r.prototype._createGroup=function(e){var n=this[e]=new Pr.a;return this.group.add(n),n},r.prototype._renderAxisLine=function(e,n,o,s){var u=o.getExtent();if(!!s.get(["lineStyle","show"])){var c=new Ui.a({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:Object(g.m)({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(c);var v=this._progressLine=new Ui.a({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:Object(g.i)({lineCap:"round",lineWidth:c.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(v)}},r.prototype._renderAxisTick=function(e,n,o,s){var u=this,c=s.getData(),v=o.scale.getTicks();this._tickSymbols=[],Object(g.k)(v,function(d){var m=o.dataToCoord(d.value),x=c.getItemModel(d.value),T=x.getModel("itemStyle"),D=x.getModel(["emphasis","itemStyle"]),w=x.getModel(["progress","itemStyle"]),R={x:m,y:0,onclick:Object(g.c)(u._changeTimeline,u,d.value)},Q=Ix(x,T,n,R);Q.ensureState("emphasis").style=D.getItemStyle(),Q.ensureState("progress").style=w.getItemStyle(),Object(ar.o)(Q);var rt=Object(br.a)(Q);x.get("tooltip")?(rt.dataIndex=d.value,rt.dataModel=s):rt.dataIndex=rt.dataModel=null,u._tickSymbols.push(Q)})},r.prototype._renderAxisLabel=function(e,n,o,s){var u=this,c=o.getLabelModel();if(!!c.get("show")){var v=s.getData(),d=o.getViewLabels();this._tickLabels=[],Object(g.k)(d,function(m){var x=m.tickValue,T=v.getItemModel(x),D=T.getModel("label"),w=T.getModel(["emphasis","label"]),R=T.getModel(["progress","label"]),Q=o.dataToCoord(m.tickValue),rt=new he.a({x:Q,y:0,rotation:e.labelRotation-e.rotation,onclick:Object(g.c)(u._changeTimeline,u,x),silent:!1,style:Object(xr.c)(D,{text:m.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});rt.ensureState("emphasis").style=Object(xr.c)(w),rt.ensureState("progress").style=Object(xr.c)(R),n.add(rt),Object(ar.o)(rt),Lx(rt).dataIndex=x,u._tickLabels.push(rt)})}},r.prototype._renderControl=function(e,n,o,s){var u=e.controlSize,c=e.rotation,v=s.getModel("controlStyle").getItemStyle(),d=s.getModel(["emphasis","controlStyle"]).getItemStyle(),m=s.getPlayState(),x=s.get("inverse",!0);T(e.nextBtnPosition,"next",Object(g.c)(this._changeTimeline,this,x?"-":"+")),T(e.prevBtnPosition,"prev",Object(g.c)(this._changeTimeline,this,x?"+":"-")),T(e.playPosition,m?"stop":"play",Object(g.c)(this._handlePlayClick,this,!m),!0);function T(D,w,R,Q){if(!!D){var rt=Object(lt.g)(Object(g.P)(s.get(["controlStyle",w+"BtnSize"]),u),u),pt=[0,-rt/2,rt,rt],mt=$M(s,w+"Icon",pt,{x:D[0],y:D[1],originX:u/2,originY:0,rotation:Q?-c:0,rectHover:!0,style:v,onclick:R});mt.ensureState("emphasis").style=d,n.add(mt),Object(ar.o)(mt)}}},r.prototype._renderCurrentPointer=function(e,n,o,s){var u=s.getData(),c=s.getCurrentIndex(),v=u.getItemModel(c).getModel("checkpointStyle"),d=this,m={onCreate:function(x){x.draggable=!0,x.drift=Object(g.c)(d._handlePointerDrag,d),x.ondragend=Object(g.c)(d._handlePointerDragend,d),Rx(x,d._progressLine,c,o,s,!0)},onUpdate:function(x){Rx(x,d._progressLine,c,o,s)}};this._currentPointer=Ix(v,v,this._mainGroup,{},this._currentPointer,m)},r.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},r.prototype._handlePointerDrag=function(e,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},r.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},r.prototype._pointerChangeTimeline=function(e,n){var o=this._toAxisCoord(e)[0],s=this._axis,u=Le.c(s.getExtent().slice());o>u[1]&&(o=u[1]),o<u[0]&&(o=u[0]),this._currentPointer.x=o,this._currentPointer.markRedraw(),this._progressLine.shape.x2=o,this._progressLine.dirty();var c=this._findNearestTick(o),v=this.model;(n||c!==v.getCurrentIndex()&&v.get("realtime"))&&this._changeTimeline(c)},r.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=e.model;e._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(e){var n=this._mainGroup.getLocalTransform();return _r.applyTransform(e,n,!0)},r.prototype._findNearestTick=function(e){var n=this.model.getData(),o=Infinity,s,u=this._axis;return n.each(["value"],function(c,v){var d=u.dataToCoord(c),m=Math.abs(d-e);m<o&&(o=m,s=v)}),s},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(e){var n=this.model.getCurrentIndex();e==="+"?e=n+1:e==="-"&&(e=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},r.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",s<e);if(o)for(var s=0;s<o.length;s++)o&&o[s]&&o[s].toggleState("progress",Lx(o[s]).dataIndex<=e)},r.type="timeline.slider",r}(WM);function QM(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new ZM.a({ordinalMeta:a.getCategories(),extent:[Infinity,-Infinity]});case"time":return new YM.a({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new Su.a}}function JM(a,r){return kr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},a.get("padding"))}function $M(a,r,e,n){var o=n.style,s=_r.createIcon(a.get(["controlStyle",r]),n||{},new Ar.a(e[0],e[1],e[2],e[3]));return o&&s.setStyle(o),s}function Ix(a,r,e,n,o,s){var u=r.get("color");if(o)o.setColor(u),e.add(o),s&&s.onUpdate(o);else{var c=a.get("symbol");o=Object(cn.a)(c,-1,-1,2,2,u),o.setStyle("strokeNoScale",!0),e.add(o),s&&s.onCreate(o)}var v=r.getItemStyle(["color"]);o.setStyle(v),n=Object(g.I)({rectHover:!0,z2:100},n,!0);var d=Object(cn.c)(a.get("symbolSize"));n.scaleX=d[0]/2,n.scaleY=d[1]/2;var m=Object(cn.b)(a.get("symbolOffset"),d);m&&(n.x=(n.x||0)+m[0],n.y=(n.y||0)+m[1]);var x=a.get("symbolRotate");return n.rotation=(x||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function Rx(a,r,e,n,o,s){if(!a.dragging){var u=o.getModel("checkpointStyle"),c=n.dataToCoord(o.getData().get("value",e));if(s||!u.get("animation",!0))a.attr({x:c,y:0}),r&&r.attr({shape:{x2:c}});else{var v={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:c,y:0},v),r&&r.animateTo({shape:{x2:c}},v)}}}var qM=KM;function tD(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,e,n){var o=e.getComponent("timeline");return o&&r.currentIndex!=null&&(o.setCurrentIndex(r.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),e.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),Object(g.i)({currentIndex:o.option.currentIndex},r)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,e){var n=e.getComponent("timeline");n&&r.playState!=null&&n.setPlayState(r.playState)})}function eD(a){var r=a&&a.timeline;g.t(r)||(r=r?[r]:[]),g.k(r,function(e){!e||rD(e)})}function rD(a){var r=a.type,e={number:"value",time:"time"};if(e[r]&&(a.axisType=e[r],delete a.type),Nx(a),su(a,"controlPosition")){var n=a.controlStyle||(a.controlStyle={});su(n,"position")||(n.position=a.controlPosition),n.position==="none"&&!su(n,"show")&&(n.show=!1,delete n.position),delete a.controlPosition}g.k(a.data||[],function(o){g.A(o)&&!g.t(o)&&(!su(o,"value")&&su(o,"name")&&(o.value=o.name),Nx(o))})}function Nx(a){var r=a.itemStyle||(a.itemStyle={}),e=r.emphasis||(r.emphasis={}),n=a.label||a.label||{},o=n.normal||(n.normal={}),s={normal:1,emphasis:1};g.k(n,function(u,c){!s[c]&&!su(o,c)&&(o[c]=u)}),e.label&&!su(n,"emphasis")&&(n.emphasis=e.label,delete e.label)}function su(a,r){return a.hasOwnProperty(r)}function nD(a){a.registerComponentModel(UM),a.registerComponentView(qM),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),tD(a),a.registerPreprocessor(eD)}function Ry(a,r){if(!a)return!1;for(var e=Object(g.t)(a)?a:[a],n=0;n<e.length;n++)if(e[n]&&e[n][r])return!0;return!1}function Ld(a){Object(Be.f)(a,"label",["show"])}var Id=Object(Be.o)(),jx=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.createdBySelf=!1,e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},r.prototype.isAnimationEnabled=function(){if(ia.a.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},r.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},r.prototype._mergeOption=function(e,n,o,s){var u=this.mainType;o||n.eachSeries(function(c){var v=c.get(this.mainType,!0),d=Id(c)[u];if(!v||!v.data){Id(c)[u]=null;return}d?d._mergeOption(v,n,!0):(s&&Ld(v),g.k(v.data,function(m){m instanceof Array?(Ld(m[0]),Ld(m[1])):Ld(m)}),d=this.createMarkerModelFromSeries(v,this,n),g.m(d,{mainType:this.mainType,seriesIndex:c.seriesIndex,name:c.name,createdBySelf:!0}),d.__hostSeries=c),Id(c)[u]=d},this)},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),c=s.getName(e);return Object(Xn.c)("section",{header:this.name,blocks:[Object(Xn.c)("nameValue",{name:c,value:u,noName:!c,noValue:u==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(e){this._data=e},r.getMarkerModelFromSeries=function(e,n){return Id(e)[n]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}($n.a);g.K(jx,wd.a.prototype);var dl=jx,iD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(dl),aD=iD,pl=b("Nsp3");function oD(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function sD(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Rd(a,r,e,n,o,s){var u=[],c=Object(mr.c)(r,n),v=c?r.getCalculationInfo("stackResultDimension"):n,d=jy(r,v,a),m=r.indicesOfNearest(v,d)[0];u[o]=r.get(e,m),u[s]=r.get(v,m);var x=r.get(n,m),T=Le.g(r.get(n,m));return T=Math.min(T,20),T>=0&&(u[s]=+u[s].toFixed(T)),[u,x]}var Ny={min:Object(g.h)(Rd,"min"),max:Object(g.h)(Rd,"max"),average:Object(g.h)(Rd,"average"),median:Object(g.h)(Rd,"median")};function $c(a,r){var e=a.getData(),n=a.coordinateSystem;if(r&&!sD(r)&&!Object(g.t)(r.coord)&&n){var o=n.dimensions,s=Bx(r,e,n,a);if(r=Object(g.d)(r),r.type&&Ny[r.type]&&s.baseAxis&&s.valueAxis){var u=Object(g.r)(o,s.baseAxis.dim),c=Object(g.r)(o,s.valueAxis.dim),v=Ny[r.type](e,s.baseDataDim,s.valueDataDim,u,c);r.coord=v[0],r.value=v[1]}else{for(var d=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis],m=0;m<2;m++)Ny[d[m]]&&(d[m]=jy(e,e.mapDimension(o[m]),d[m]));r.coord=d}}return r}function Bx(a,r,e,n){var o={};return a.valueIndex!=null||a.valueDim!=null?(o.valueDataDim=a.valueIndex!=null?r.getDimension(a.valueIndex):a.valueDim,o.valueAxis=e.getAxis(lD(n,o.valueDataDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim),o.valueDataDim=r.mapDimension(o.valueAxis.dim)),o}function lD(a,r){var e=a.getData().getDimensionInfo(r);return e&&e.coordDim}function qc(a,r){return a&&a.containData&&r.coord&&!oD(r)?a.containData(r.coord):!0}function Fx(a,r){return a?function(e,n,o,s){var u=s<2?e.coord&&e.coord[s]:e.value;return Object(pl.d)(u,r[s])}:function(e,n,o,s){return Object(pl.d)(e.value,r[s])}}function jy(a,r,e){if(e==="average"){var n=0,o=0;return a.each(r,function(s,u){isNaN(s)||(n+=s,o++)}),n/o}else return e==="median"?a.getMedian(r):a.getDataExtent(r)[e==="max"?1:0]}var By=Object(Be.o)(),uD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this.markerGroupMap=Object(g.f)()},r.prototype.render=function(e,n,o){var s=this,u=this.markerGroupMap;u.each(function(c){By(c).keep=!1}),n.eachSeries(function(c){var v=dl.getMarkerModelFromSeries(c,s.type);v&&s.renderSeries(c,v,n,o)}),u.each(function(c){!By(c).keep&&s.group.remove(c.group)})},r.prototype.markKeep=function(e){By(e).keep=!0},r.prototype.blurSeries=function(e){var n=this;Object(g.k)(e,function(o){var s=dl.getMarkerModelFromSeries(o,n.type);if(s){var u=s.getData();u.eachItemGraphicEl(function(c){c&&Object(ar.q)(c)})}})},r.type="marker",r}(gn.a),Fy=uD;function zx(a,r,e){var n=r.coordinateSystem;a.each(function(o){var s=a.getItemModel(o),u,c=Le.p(s.get("x"),e.getWidth()),v=Le.p(s.get("y"),e.getHeight());if(!isNaN(c)&&!isNaN(v))u=[c,v];else if(r.getMarkerPosition)u=r.getMarkerPosition(a.getValues(a.dimensions,o));else if(n){var d=a.get(n.dimensions[0],o),m=a.get(n.dimensions[1],o);u=n.dataToPoint([d,m])}isNaN(c)||(u[0]=c),isNaN(v)||(u[1]=v),a.setItemLayout(o,u)})}var fD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=dl.getMarkerModelFromSeries(s,"markPoint");u&&(zx(u.getData(),s,o),this.markerGroupMap.get(s.id).updateLayout())},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,c=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(c)||d.set(c,new Wr),x=cD(u,e,n);n.setData(x),zx(n.getData(),e,s),x.each(function(T){var D=x.getItemModel(T),w=D.getShallow("symbol"),R=D.getShallow("symbolSize"),Q=D.getShallow("symbolRotate"),rt=D.getShallow("symbolOffset"),pt=D.getShallow("symbolKeepAspect");if(Object(g.w)(w)||Object(g.w)(R)||Object(g.w)(Q)||Object(g.w)(rt)){var mt=n.getRawValue(T),Dt=n.getDataParams(T);Object(g.w)(w)&&(w=w(mt,Dt)),Object(g.w)(R)&&(R=R(mt,Dt)),Object(g.w)(Q)&&(Q=Q(mt,Dt)),Object(g.w)(rt)&&(rt=rt(mt,Dt))}var Lt=D.getModel("itemStyle").getItemStyle(),wt=Object(vl.b)(v,"color");Lt.fill||(Lt.fill=wt),x.setItemVisual(T,{symbol:w,symbolSize:R,symbolRotate:Q,symbolOffset:rt,symbolKeepAspect:pt,style:Lt})}),m.updateData(x),this.group.add(m.group),x.eachItemGraphicEl(function(T){T.traverse(function(D){Object(br.a)(D).dataModel=n})}),this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markPoint",r}(Fy);function cD(a,r,e){var n;a?n=Object(g.H)(a&&a.dimensions,function(c){var v=r.getData().getDimensionInfo(r.getData().mapDimension(c))||{};return Object(g.m)(Object(g.m)({},v),{name:c,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new ue.a(n,e),s=Object(g.H)(e.get("data"),Object(g.h)($c,r));a&&(s=Object(g.n)(s,Object(g.h)(qc,a)));var u=Fx(!!a,n);return o.initData(s,null,u),o}var hD=fD;function vD(a){a.registerComponentModel(aD),a.registerComponentView(hD),a.registerPreprocessor(function(r){Ry(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var dD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(dl),pD=dD,Nd=Object(Be.o)(),gD=function(a,r,e,n){var o=a.getData(),s;if(Object(g.t)(n))s=n;else{var u=n.type;if(u==="min"||u==="max"||u==="average"||u==="median"||n.xAxis!=null||n.yAxis!=null){var c=void 0,v=void 0;if(n.yAxis!=null||n.xAxis!=null)c=r.getAxis(n.yAxis!=null?"y":"x"),v=Object(g.O)(n.yAxis,n.xAxis);else{var d=Bx(n,o,r,a);c=d.valueAxis;var m=Object(mr.b)(o,d.valueDataDim);v=jy(o,m,u)}var x=c.dim==="x"?0:1,T=1-x,D=Object(g.d)(n),w={coord:[]};D.type=null,D.coord=[],D.coord[T]=-Infinity,w.coord[T]=Infinity;var R=e.get("precision");R>=0&&Object(g.z)(v)&&(v=+v.toFixed(Math.min(R,20))),D.coord[x]=w.coord[x]=v,s=[D,w,{type:u,valueIndex:n.valueIndex,value:v}]}else s=[]}var Q=[$c(a,s[0]),$c(a,s[1]),Object(g.m)({},s[2])];return Q[2].type=Q[2].type||null,Object(g.I)(Q[2],Q[0]),Object(g.I)(Q[2],Q[1]),Q};function jd(a){return!isNaN(a)&&!isFinite(a)}function Vx(a,r,e,n){var o=1-a,s=n.dimensions[a];return jd(r[o])&&jd(e[o])&&r[a]===e[a]&&n.getAxis(s).containData(r[a])}function mD(a,r){if(a.type==="cartesian2d"){var e=r[0].coord,n=r[1].coord;if(e&&n&&(Vx(1,e,n,a)||Vx(0,e,n,a)))return!0}return qc(a,r[0])&&qc(a,r[1])}function zy(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),c,v=Le.p(u.get("x"),o.getWidth()),d=Le.p(u.get("y"),o.getHeight());if(!isNaN(v)&&!isNaN(d))c=[v,d];else{if(n.getMarkerPosition)c=n.getMarkerPosition(a.getValues(a.dimensions,r));else{var m=s.dimensions,x=a.get(m[0],r),T=a.get(m[1],r);c=s.dataToPoint([x,T])}if(Zi(s,"cartesian2d")){var D=s.getAxis("x"),w=s.getAxis("y"),m=s.dimensions;jd(a.get(m[0],r))?c[0]=D.toGlobalCoord(D.getExtent()[e?0:1]):jd(a.get(m[1],r))&&(c[1]=w.toGlobalCoord(w.getExtent()[e?0:1]))}isNaN(v)||(c[0]=v),isNaN(d)||(c[1]=d)}a.setItemLayout(r,c)}var yD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=dl.getMarkerModelFromSeries(s,"markLine");if(u){var c=u.getData(),v=Nd(u).from,d=Nd(u).to;v.each(function(m){zy(v,m,!0,s,o),zy(d,m,!1,s,o)}),c.each(function(m){c.setItemLayout(m,[v.getItemLayout(m),d.getItemLayout(m)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,c=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(c)||d.set(c,new Xu);this.group.add(m.group);var x=xD(u,e,n),T=x.from,D=x.to,w=x.line;Nd(n).from=T,Nd(n).to=D,n.setData(w);var R=n.get("symbol"),Q=n.get("symbolSize"),rt=n.get("symbolRotate"),pt=n.get("symbolOffset");Object(g.t)(R)||(R=[R,R]),Object(g.t)(Q)||(Q=[Q,Q]),Object(g.t)(rt)||(rt=[rt,rt]),Object(g.t)(pt)||(pt=[pt,pt]),x.from.each(function(Dt){mt(T,Dt,!0),mt(D,Dt,!1)}),w.each(function(Dt){var Lt=w.getItemModel(Dt).getModel("lineStyle").getLineStyle();w.setItemLayout(Dt,[T.getItemLayout(Dt),D.getItemLayout(Dt)]),Lt.stroke==null&&(Lt.stroke=T.getItemVisual(Dt,"style").fill),w.setItemVisual(Dt,{fromSymbolKeepAspect:T.getItemVisual(Dt,"symbolKeepAspect"),fromSymbolOffset:T.getItemVisual(Dt,"symbolOffset"),fromSymbolRotate:T.getItemVisual(Dt,"symbolRotate"),fromSymbolSize:T.getItemVisual(Dt,"symbolSize"),fromSymbol:T.getItemVisual(Dt,"symbol"),toSymbolKeepAspect:D.getItemVisual(Dt,"symbolKeepAspect"),toSymbolOffset:D.getItemVisual(Dt,"symbolOffset"),toSymbolRotate:D.getItemVisual(Dt,"symbolRotate"),toSymbolSize:D.getItemVisual(Dt,"symbolSize"),toSymbol:D.getItemVisual(Dt,"symbol"),style:Lt})}),m.updateData(w),x.line.eachItemGraphicEl(function(Dt,Lt){Dt.traverse(function(wt){Object(br.a)(wt).dataModel=n})});function mt(Dt,Lt,wt){var Nt=Dt.getItemModel(Lt);zy(Dt,Lt,wt,e,s);var Gt=Nt.getModel("itemStyle").getItemStyle();Gt.fill==null&&(Gt.fill=Object(vl.b)(v,"color")),Dt.setItemVisual(Lt,{symbolKeepAspect:Nt.get("symbolKeepAspect"),symbolOffset:Object(g.P)(Nt.get("symbolOffset",!0),pt[wt?0:1]),symbolRotate:Object(g.P)(Nt.get("symbolRotate",!0),rt[wt?0:1]),symbolSize:Object(g.P)(Nt.get("symbolSize"),Q[wt?0:1]),symbol:Object(g.P)(Nt.get("symbol",!0),R[wt?0:1]),style:Gt})}this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markLine",r}(Fy);function xD(a,r,e){var n;a?n=Object(g.H)(a&&a.dimensions,function(d){var m=r.getData().getDimensionInfo(r.getData().mapDimension(d))||{};return Object(g.m)(Object(g.m)({},m),{name:d,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new ue.a(n,e),s=new ue.a(n,e),u=new ue.a([],e),c=Object(g.H)(e.get("data"),Object(g.h)(gD,r,a,e));a&&(c=Object(g.n)(c,Object(g.h)(mD,a)));var v=Fx(!!a,n);return o.initData(Object(g.H)(c,function(d){return d[0]}),null,v),s.initData(Object(g.H)(c,function(d){return d[1]}),null,v),u.initData(Object(g.H)(c,function(d){return d[2]})),u.hasItemOption=!0,{from:o,to:s,line:u}}var _D=yD;function bD(a){a.registerComponentModel(pD),a.registerComponentView(_D),a.registerPreprocessor(function(r){Ry(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var SD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(dl),TD=SD,Bd=Object(Be.o)(),OD=function(a,r,e,n){var o=$c(a,n[0]),s=$c(a,n[1]),u=o.coord,c=s.coord;u[0]=Object(g.O)(u[0],-Infinity),u[1]=Object(g.O)(u[1],-Infinity),c[0]=Object(g.O)(c[0],Infinity),c[1]=Object(g.O)(c[1],Infinity);var v=Object(g.J)([{},o,s]);return v.coord=[o.coord,s.coord],v.x0=o.x,v.y0=o.y,v.x1=s.x,v.y1=s.y,v};function Fd(a){return!isNaN(a)&&!isFinite(a)}function Gx(a,r,e,n){var o=1-a;return Fd(r[o])&&Fd(e[o])}function AD(a,r){var e=r.coord[0],n=r.coord[1];return Zi(a,"cartesian2d")&&e&&n&&(Gx(1,e,n,a)||Gx(0,e,n,a))?!0:qc(a,{coord:e,x:r.x0,y:r.y0})||qc(a,{coord:n,x:r.x1,y:r.y1})}function Ux(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),c,v=Le.p(u.get(e[0]),o.getWidth()),d=Le.p(u.get(e[1]),o.getHeight());if(!isNaN(v)&&!isNaN(d))c=[v,d];else{if(n.getMarkerPosition)c=n.getMarkerPosition(a.getValues(e,r));else{var m=a.get(e[0],r),x=a.get(e[1],r),T=[m,x];s.clampData&&s.clampData(T,T),c=s.dataToPoint(T,!0)}if(Zi(s,"cartesian2d")){var D=s.getAxis("x"),w=s.getAxis("y"),m=a.get(e[0],r),x=a.get(e[1],r);Fd(m)?c[0]=D.toGlobalCoord(D.getExtent()[e[0]==="x0"?0:1]):Fd(x)&&(c[1]=w.toGlobalCoord(w.getExtent()[e[1]==="y0"?0:1]))}isNaN(v)||(c[0]=v),isNaN(d)||(c[1]=d)}return c}var Hx=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=dl.getMarkerModelFromSeries(s,"markArea");if(u){var c=u.getData();c.each(function(v){var d=Object(g.H)(Hx,function(x){return Ux(c,v,x,s,o)});c.setItemLayout(v,d);var m=c.getItemGraphicEl(v);m.setShape("points",d)})}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,c=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(c)||d.set(c,{group:new Pr.a});this.group.add(m.group),this.markKeep(m);var x=DD(u,e,n);n.setData(x),x.each(function(T){var D=Object(g.H)(Hx,function(Gt){return Ux(x,T,Gt,e,s)}),w=u.getAxis("x").scale,R=u.getAxis("y").scale,Q=w.getExtent(),rt=R.getExtent(),pt=[w.parse(x.get("x0",T)),w.parse(x.get("x1",T))],mt=[R.parse(x.get("y0",T)),R.parse(x.get("y1",T))];Le.c(pt),Le.c(mt);var Dt=!(Q[0]>pt[1]||Q[1]<pt[0]||rt[0]>mt[1]||rt[1]<mt[0]),Lt=!Dt;x.setItemLayout(T,{points:D,allClipped:Lt});var wt=x.getItemModel(T).getModel("itemStyle").getItemStyle(),Nt=Object(vl.b)(v,"color");wt.fill||(wt.fill=Nt,Object(g.C)(wt.fill)&&(wt.fill=Ir.modifyAlpha(wt.fill,.4))),wt.stroke||(wt.stroke=Nt),x.setItemVisual(T,"style",wt)}),x.diff(Bd(m).data).add(function(T){var D=x.getItemLayout(T);if(!D.allClipped){var w=new _n.a({shape:{points:D.points}});x.setItemGraphicEl(T,w),m.group.add(w)}}).update(function(T,D){var w=Bd(m).data.getItemGraphicEl(D),R=x.getItemLayout(T);R.allClipped?w&&m.group.remove(w):(w?cr.h(w,{shape:{points:R.points}},n,T):w=new _n.a({shape:{points:R.points}}),x.setItemGraphicEl(T,w),m.group.add(w))}).remove(function(T){var D=Bd(m).data.getItemGraphicEl(T);m.group.remove(D)}).execute(),x.eachItemGraphicEl(function(T,D){var w=x.getItemModel(D),R=x.getItemVisual(D,"style");T.useStyle(x.getItemVisual(D,"style")),Object(xr.g)(T,Object(xr.e)(w),{labelFetcher:n,labelDataIndex:D,defaultText:x.getName(D)||"",inheritColor:Object(g.C)(R.fill)?Ir.modifyAlpha(R.fill,1):"#000"}),Object(ar.I)(T,w),Object(ar.J)(T,null,null,w.get(["emphasis","disabled"])),Object(br.a)(T).dataModel=n}),Bd(m).data=x,m.group.silent=n.get("silent")||e.get("silent")},r.type="markArea",r}(Fy);function DD(a,r,e){var n,o,s=["x0","y0","x1","y1"];if(a){var u=Object(g.H)(a&&a.dimensions,function(d){var m=r.getData(),x=m.getDimensionInfo(m.mapDimension(d))||{};return Object(g.m)(Object(g.m)({},x),{name:d,ordinalMeta:null})});o=Object(g.H)(s,function(d,m){return{name:d,type:u[m%2].type}}),n=new ue.a(o,e)}else o=[{name:"value",type:"float"}],n=new ue.a(o,e);var c=Object(g.H)(e.get("data"),Object(g.h)(OD,r,a,e));a&&(c=Object(g.n)(c,Object(g.h)(AD,a)));var v=a?function(d,m,x,T){var D=d.coord[Math.floor(T/2)][T%2];return Object(pl.d)(D,o[T])}:function(d,m,x,T){return Object(pl.d)(d.value,o[T])};return n.initData(c,null,v),n.hasItemOption=!0,n}var ED=MD;function CD(a){a.registerComponentModel(TD),a.registerComponentView(ED),a.registerPreprocessor(function(r){Ry(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var PD=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},wD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},r.prototype._updateSelector=function(e){var n=e.selector,o=this.ecModel;n===!0&&(n=e.selector=["all","inverse"]),g.t(n)&&g.k(n,function(s,u){g.C(s)&&(s={type:s}),n[u]=g.I(s,PD(o,s.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var n=!1,o=0;o<e.length;o++){var s=e[o].get("name");if(this.isSelected(s)){this.select(s),n=!0;break}}!n&&this.select(e[0].get("name"))}},r.prototype._updateData=function(e){var n=[],o=[];e.eachRawSeries(function(c){var v=c.name;o.push(v);var d;if(c.legendVisualProvider){var m=c.legendVisualProvider,x=m.getAllNames();e.isSeriesFiltered(c)||(o=o.concat(x)),x.length?n=n.concat(x):d=!0}else d=!0;d&&Object(Be.n)(c)&&n.push(c.name)}),this._availableNames=o;var s=this.get("data")||n,u=g.H(s,function(c){return(g.C(c)||g.z(c))&&(c={name:c}),new fi.a(c,this,this.ecModel)},this);this._data=u},r.prototype.getData=function(){return this._data},r.prototype.select=function(e){var n=this.option.selected,o=this.get("selectedMode");if(o==="single"){var s=this._data;g.k(s,function(u){n[u.get("name")]=!1})}n[e]=!0},r.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},r.prototype.toggleSelected=function(e){var n=this.option.selected;n.hasOwnProperty(e)||(n[e]=!0),this[n[e]?"unSelect":"select"](e)},r.prototype.allSelect=function(){var e=this._data,n=this.option.selected;g.k(e,function(o){n[o.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var e=this._data,n=this.option.selected;g.k(e,function(o){var s=o.get("name",!0);n.hasOwnProperty(s)||(n[s]=!0),n[s]=!n[s]})},r.prototype.isSelected=function(e){var n=this.option.selected;return!(n.hasOwnProperty(e)&&!n[e])&&g.r(this._availableNames,e)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}($n.a),Vy=wD,uf=g.h,Gy=g.k,zd=Pr.a,LD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!1,e}return r.prototype.init=function(){this.group.add(this._contentGroup=new zd),this.group.add(this._selectorGroup=new zd),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(e,n,o){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var u=e.get("align"),c=e.get("orient");(!u||u==="auto")&&(u=e.get("left")==="right"&&c==="vertical"?"right":"left");var v=e.get("selector",!0),d=e.get("selectorPosition",!0);v&&(!d||d==="auto")&&(d=c==="horizontal"?"end":"start"),this.renderInner(u,e,n,o,v,c,d);var m=e.getBoxLayoutParams(),x={width:o.getWidth(),height:o.getHeight()},T=e.get("padding"),D=kr.g(m,x,T),w=this.layoutInner(e,u,D,s,v,d),R=kr.g(g.i({width:w.width,height:w.height},m),x,T);this.group.x=R.x-w.x,this.group.y=R.y-w.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$1(w,e))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(e,n,o,s,u,c,v){var d=this.getContentGroup(),m=g.f(),x=n.get("selectedMode"),T=[];o.eachRawSeries(function(D){!D.get("legendHoverLink")&&T.push(D.id)}),Gy(n.getData(),function(D,w){var R=D.get("name");if(!this.newlineDisabled&&(R===""||R===`
`)){var Q=new zd;Q.newline=!0,d.add(Q);return}var rt=o.getSeriesByName(R)[0];if(!m.get(R))if(rt){var pt=rt.getData(),mt=pt.getVisual("legendLineStyle")||{},Dt=pt.getVisual("legendIcon"),Lt=pt.getVisual("style"),wt=this._createItem(rt,R,w,D,n,e,mt,Lt,Dt,x);wt.on("click",uf(Wx,R,null,s,T)).on("mouseover",uf(Uy,rt.name,null,s,T)).on("mouseout",uf(Hy,rt.name,null,s,T)),m.set(R,!0)}else o.eachRawSeries(function(Nt){if(!m.get(R)&&Nt.legendVisualProvider){var Gt=Nt.legendVisualProvider;if(!Gt.containName(R))return;var Kt=Gt.indexOfName(R),te=Gt.getItemVisual(Kt,"style"),ne=Gt.getItemVisual(Kt,"legendIcon"),pe=Object(Ir.parse)(te.fill);pe&&pe[3]===0&&(pe[3]=.2,te=g.m(g.m({},te),{fill:Object(Ir.stringify)(pe,"rgba")}));var me=this._createItem(Nt,R,w,D,n,e,{},te,ne,x);me.on("click",uf(Wx,null,R,s,T)).on("mouseover",uf(Uy,null,R,s,T)).on("mouseout",uf(Hy,null,R,s,T)),m.set(R,!0)}},this)},this),u&&this._createSelector(u,n,s,c,v)},r.prototype._createSelector=function(e,n,o,s,u){var c=this.getSelectorGroup();Gy(e,function(d){var m=d.type,x=new he.a({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:m==="all"?"legendAllSelect":"legendInverseSelect"})}});c.add(x);var T=n.getModel("selectorLabel"),D=n.getModel(["emphasis","selectorLabel"]);Object(xr.g)(x,{normal:T,emphasis:D},{defaultText:d.title}),Object(ar.o)(x)})},r.prototype._createItem=function(e,n,o,s,u,c,v,d,m,x){var T=e.visualDrawType,D=u.get("itemWidth"),w=u.get("itemHeight"),R=u.isSelected(n),Q=s.get("symbolRotate"),rt=s.get("symbolKeepAspect"),pt=s.get("icon");m=pt||m||"roundRect";var mt=ID(m,s,v,d,T,R),Dt=new zd,Lt=s.getModel("textStyle");if(g.w(e.getLegendIcon)&&(!pt||pt==="inherit"))Dt.add(e.getLegendIcon({itemWidth:D,itemHeight:w,icon:m,iconRotate:Q,itemStyle:mt.itemStyle,lineStyle:mt.lineStyle,symbolKeepAspect:rt}));else{var wt=pt==="inherit"&&e.getData().getVisual("symbol")?Q==="inherit"?e.getData().getVisual("symbolRotate"):Q:0;Dt.add(RD({itemWidth:D,itemHeight:w,icon:m,iconRotate:wt,itemStyle:mt.itemStyle,lineStyle:mt.lineStyle,symbolKeepAspect:rt}))}var Nt=c==="left"?D+5:-5,Gt=c,Kt=u.get("formatter"),te=n;g.C(Kt)&&Kt?te=Kt.replace("{name}",n!=null?n:""):g.w(Kt)&&(te=Kt(n));var ne=s.get("inactiveColor");Dt.add(new he.a({style:Object(xr.c)(Lt,{text:te,x:Nt,y:w/2,fill:R?Lt.getTextColor():ne,align:Gt,verticalAlign:"middle"})}));var pe=new Qr.a({shape:Dt.getBoundingRect(),invisible:!0}),me=s.getModel("tooltip");return me.get("show")&&_r.setTooltipConfig({el:pe,componentModel:u,itemName:n,itemTooltipOption:me.option}),Dt.add(pe),Dt.eachChild(function(xe){xe.silent=!0}),pe.silent=!x,this.getContentGroup().add(Dt),Object(ar.o)(Dt),Dt.__legendDataIndex=o,Dt},r.prototype.layoutInner=function(e,n,o,s,u,c){var v=this.getContentGroup(),d=this.getSelectorGroup();kr.b(e.get("orient"),v,e.get("itemGap"),o.width,o.height);var m=v.getBoundingRect(),x=[-m.x,-m.y];if(d.markRedraw(),v.markRedraw(),u){kr.b("horizontal",d,e.get("selectorItemGap",!0));var T=d.getBoundingRect(),D=[-T.x,-T.y],w=e.get("selectorButtonGap",!0),R=e.getOrient().index,Q=R===0?"width":"height",rt=R===0?"height":"width",pt=R===0?"y":"x";c==="end"?D[R]+=m[Q]+w:x[R]+=T[Q]+w,D[1-R]+=m[rt]/2-T[rt]/2,d.x=D[0],d.y=D[1],v.x=x[0],v.y=x[1];var mt={x:0,y:0};return mt[Q]=m[Q]+w+T[Q],mt[rt]=Math.max(m[rt],T[rt]),mt[pt]=Math.min(0,T[pt]+D[1-R]),mt}else return v.x=x[0],v.y=x[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(gn.a);function ID(a,r,e,n,o,s){function u(w,R){w.lineWidth==="auto"&&(w.lineWidth=R.lineWidth>0?2:0),Gy(w,function(Q,rt){w[rt]==="inherit"&&(w[rt]=R[rt])})}var c=r.getModel("itemStyle"),v=c.getItemStyle(),d=a.lastIndexOf("empty",0)===0?"fill":"stroke";v.decal=n.decal,v.fill==="inherit"&&(v.fill=n[o]),v.stroke==="inherit"&&(v.stroke=n[d]),v.opacity==="inherit"&&(v.opacity=(o==="fill"?n:e).opacity),u(v,n);var m=r.getModel("lineStyle"),x=m.getLineStyle();if(u(x,e),v.fill==="auto"&&(v.fill=n.fill),v.stroke==="auto"&&(v.stroke=n.fill),x.stroke==="auto"&&(x.stroke=n.fill),!s){var T=r.get("inactiveBorderWidth"),D=v[d];v.lineWidth=T==="auto"?n.lineWidth>0&&D?2:0:v.lineWidth,v.fill=r.get("inactiveColor"),v.stroke=r.get("inactiveBorderColor"),x.stroke=m.get("inactiveColor"),x.lineWidth=m.get("inactiveWidth")}return{itemStyle:v,lineStyle:x}}function RD(a){var r=a.icon||"roundRect",e=Object(cn.a)(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return e.setStyle(a.itemStyle),e.rotation=(a.iconRotate||0)*Math.PI/180,e.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function Wx(a,r,e,n){Hy(a,r,e,n),e.dispatchAction({type:"legendToggleSelect",name:a!=null?a:r}),Uy(a,r,e,n)}function kx(a){for(var r=a.getZr().storage.getDisplayList(),e,n=0,o=r.length;n<o&&!(e=r[n].states.emphasis);)n++;return e&&e.hoverLayer}function Uy(a,r,e,n){kx(e)||e.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:n})}function Hy(a,r,e,n){kx(e)||e.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:n})}var Xx=LD;function ND(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(e){for(var n=0;n<r.length;n++)if(!r[n].isSelected(e.name))return!1;return!0})}function th(a,r,e){var n={},o=a==="toggleSelected",s;return e.eachComponent("legend",function(u){o&&s!=null?u[s?"select":"unSelect"](r.name):a==="allSelect"||a==="inverseSelect"?u[a]():(u[a](r.name),s=u.isSelected(r.name));var c=u.getData();Object(g.k)(c,function(v){var d=v.get("name");if(!(d===`
`||d==="")){var m=u.isSelected(d);n.hasOwnProperty(d)?n[d]=n[d]&&m:n[d]=m}})}),a==="allSelect"||a==="inverseSelect"?{selected:n}:{name:r.name,selected:n}}function jD(a){a.registerAction("legendToggleSelect","legendselectchanged",Object(g.h)(th,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",Object(g.h)(th,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",Object(g.h)(th,"inverseSelect")),a.registerAction("legendSelect","legendselected",Object(g.h)(th,"select")),a.registerAction("legendUnSelect","legendunselected",Object(g.h)(th,"unSelect"))}function Zx(a){a.registerComponentModel(Vy),a.registerComponentView(Xx),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,ND),a.registerSubTypeDefaulter("legend",function(){return"plain"}),jD(a)}var BD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},r.prototype.init=function(e,n,o){var s=Object(kr.f)(e);a.prototype.init.call(this,e,n,o),Yx(this,e,s)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),Yx(this,this.option,e)},r.type="legend.scroll",r.defaultOption=Object(yn.d)(Vy.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(Vy);function Yx(a,r,e){var n=a.getOrient(),o=[1,1];o[n.index]=0,Object(kr.h)(r,e,{type:"box",ignoreSize:!!o})}var FD=BD,Kx=Pr.a,Wy=["width","height"],ky=["x","y"],zD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!0,e._currentIndex=0,e}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Kx),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Kx)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(e,n,o,s,u,c,v){var d=this;a.prototype.renderInner.call(this,e,n,o,s,u,c,v);var m=this._controllerGroup,x=n.get("pageIconSize",!0),T=g.t(x)?x:[x,x];w("pagePrev",0);var D=n.getModel("pageTextStyle");m.add(new he.a({name:"pageText",style:{text:"xx/xx",fill:D.getTextColor(),font:D.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),w("pageNext",1);function w(R,Q){var rt=R+"DataIndex",pt=_r.createIcon(n.get("pageIcons",!0)[n.getOrient().name][Q],{onclick:g.c(d._pageGo,d,rt,n,s)},{x:-T[0]/2,y:-T[1]/2,width:T[0],height:T[1]});pt.name=R,m.add(pt)}},r.prototype.layoutInner=function(e,n,o,s,u,c){var v=this.getSelectorGroup(),d=e.getOrient().index,m=Wy[d],x=ky[d],T=Wy[1-d],D=ky[1-d];u&&kr.b("horizontal",v,e.get("selectorItemGap",!0));var w=e.get("selectorButtonGap",!0),R=v.getBoundingRect(),Q=[-R.x,-R.y],rt=g.d(o);u&&(rt[m]=o[m]-R[m]-w);var pt=this._layoutContentAndController(e,s,rt,d,m,T,D,x);if(u){if(c==="end")Q[d]+=pt[m]+w;else{var mt=R[m]+w;Q[d]-=mt,pt[x]-=mt}pt[m]+=R[m]+w,Q[1-d]+=pt[D]+pt[T]/2-R[T]/2,pt[T]=Math.max(pt[T],R[T]),pt[D]=Math.min(pt[D],R[D]+Q[1-d]),v.x=Q[0],v.y=Q[1],v.markRedraw()}return pt},r.prototype._layoutContentAndController=function(e,n,o,s,u,c,v,d){var m=this.getContentGroup(),x=this._containerGroup,T=this._controllerGroup;kr.b(e.get("orient"),m,e.get("itemGap"),s?o.width:null,s?null:o.height),kr.b("horizontal",T,e.get("pageButtonItemGap",!0));var D=m.getBoundingRect(),w=T.getBoundingRect(),R=this._showController=D[u]>o[u],Q=[-D.x,-D.y];n||(Q[s]=m[d]);var rt=[0,0],pt=[-w.x,-w.y],mt=g.P(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(R){var Dt=e.get("pageButtonPosition",!0);Dt==="end"?pt[s]+=o[u]-w[u]:rt[s]+=w[u]+mt}pt[1-s]+=D[c]/2-w[c]/2,m.setPosition(Q),x.setPosition(rt),T.setPosition(pt);var Lt={x:0,y:0};if(Lt[u]=R?o[u]:D[u],Lt[c]=Math.max(D[c],w[c]),Lt[v]=Math.min(0,w[v]+pt[1-s]),x.__rectSize=o[u],R){var wt={x:0,y:0};wt[u]=Math.max(o[u]-w[u]-mt,0),wt[c]=Lt[c],x.setClipPath(new Qr.a({shape:wt})),x.__rectSize=wt[u]}else T.eachChild(function(Gt){Gt.attr({invisible:!0,silent:!0})});var Nt=this._getPageInfo(e);return Nt.pageIndex!=null&&cr.h(m,{x:Nt.contentPosition[0],y:Nt.contentPosition[1]},R?e:null),this._updatePageInfoView(e,Nt),Lt},r.prototype._pageGo=function(e,n,o){var s=this._getPageInfo(n)[e];s!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:n.id})},r.prototype._updatePageInfoView=function(e,n){var o=this._controllerGroup;g.k(["pagePrev","pageNext"],function(m){var x=m+"DataIndex",T=n[x]!=null,D=o.childOfName(m);D&&(D.setStyle("fill",T?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),D.cursor=T?"pointer":"default")});var s=o.childOfName("pageText"),u=e.get("pageFormatter"),c=n.pageIndex,v=c!=null?c+1:0,d=n.pageCount;s&&u&&s.setStyle("text",g.C(u)?u.replace("{current}",v==null?"":v+"").replace("{total}",d==null?"":d+""):u({current:v,total:d}))},r.prototype._getPageInfo=function(e){var n=e.get("scrollDataIndex",!0),o=this.getContentGroup(),s=this._containerGroup.__rectSize,u=e.getOrient().index,c=Wy[u],v=ky[u],d=this._findTargetItemIndex(n),m=o.children(),x=m[d],T=m.length,D=T?1:0,w={contentPosition:[o.x,o.y],pageCount:D,pageIndex:D-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!x)return w;var R=Dt(x);w.contentPosition[u]=-R.s;for(var Q=d+1,rt=R,pt=R,mt=null;Q<=T;++Q)mt=Dt(m[Q]),(!mt&&pt.e>rt.s+s||mt&&!Lt(mt,rt.s))&&(pt.i>rt.i?rt=pt:rt=mt,rt&&(w.pageNextDataIndex==null&&(w.pageNextDataIndex=rt.i),++w.pageCount)),pt=mt;for(var Q=d-1,rt=R,pt=R,mt=null;Q>=-1;--Q)mt=Dt(m[Q]),(!mt||!Lt(pt,mt.s))&&rt.i<pt.i&&(pt=rt,w.pagePrevDataIndex==null&&(w.pagePrevDataIndex=rt.i),++w.pageCount,++w.pageIndex),rt=mt;return w;function Dt(wt){if(wt){var Nt=wt.getBoundingRect(),Gt=Nt[v]+wt[v];return{s:Gt,e:Gt+Nt[c],i:wt.__legendDataIndex}}}function Lt(wt,Nt){return wt.e>=Nt&&wt.s<=Nt+s}},r.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var n,o=this.getContentGroup(),s;return o.eachChild(function(u,c){var v=u.__legendDataIndex;s==null&&v!=null&&(s=c),v===e&&(n=c)}),n!=null?n:s},r.type="legend.scroll",r}(Xx),VD=zD;function GD(a){a.registerAction("legendScroll","legendscroll",function(r,e){var n=r.scrollDataIndex;n!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:r},function(o){o.setScrollDataIndex(n)})})}function UD(a){Object(B.a)(Zx),a.registerComponentModel(FD),a.registerComponentView(VD),GD(a)}function HD(a){Object(B.a)(Zx),Object(B.a)(UD)}var WD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=Object(yn.d)(Yc.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Yc),kD=WD,Xy=Object(Be.o)();function XD(a,r,e){Xy(a).coordSysRecordMap.each(function(n){var o=n.dataZoomInfoMap.get(r.uid);o&&(o.getRange=e)})}function ZD(a,r){for(var e=Xy(a).coordSysRecordMap,n=e.keys(),o=0;o<n.length;o++){var s=n[o],u=e.get(s),c=u.dataZoomInfoMap;if(c){var v=r.uid,d=c.get(v);d&&(c.removeKey(v),c.keys().length||Qx(e,u))}}}function Qx(a,r){if(r){a.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function YD(a,r){var e={model:r,containsPoint:Object(g.h)(QD,r),dispatchAction:Object(g.h)(KD,a),dataZoomInfoMap:null,controller:null},n=e.controller=new qa(a.getZr());return Object(g.k)(["pan","zoom","scrollMove"],function(o){n.on(o,function(s){var u=[];e.dataZoomInfoMap.each(function(c){if(!!s.isAvailableBehavior(c.model.option)){var v=(c.getRange||{})[o],d=v&&v(c.dzReferCoordSysInfo,e.model.mainType,e.controller,s);!c.model.get("disabled",!0)&&d&&u.push({dataZoomId:c.model.id,start:d[0],end:d[1]})}}),u.length&&e.dispatchAction(u)})}),e}function KD(a,r){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function QD(a,r,e,n){return a.coordinateSystem.containPoint([e,n])}function JD(a){var r,e="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return a.each(function(s){var u=s.model,c=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;n[e+c]>n[e+r]&&(r=c),o=o&&u.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function $D(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(r,e){var n=Xy(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=Object(g.f)());o.each(function(s){s.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var u=X1(s);Object(g.k)(u.infoList,function(c){var v=c.model.uid,d=o.get(v)||o.set(v,YD(e,c.model)),m=d.dataZoomInfoMap||(d.dataZoomInfoMap=Object(g.f)());m.set(s.uid,{dzReferCoordSysInfo:c,model:s,getRange:null})})}),o.each(function(s){var u=s.controller,c,v=s.dataZoomInfoMap;if(v){var d=v.keys()[0];d!=null&&(c=v.get(d))}if(!c){Qx(o,s);return}var m=JD(v);u.enable(m.controlType,m.opt),u.setPointerChecker(s.containsPoint),Gn.b(s,"dispatchAction",c.model.get("throttle",!0),"fixRate")})})}var qD=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,n,o){if(a.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),XD(o,e,{pan:Object(g.c)(Zy.pan,this),zoom:Object(g.c)(Zy.zoom,this),scrollMove:Object(g.c)(Zy.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){ZD(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(xy),Zy={zoom:function(a,r,e,n){var o=this.range,s=o.slice(),u=a.axisModels[0];if(!!u){var c=Yy[r](null,[n.originX,n.originY],u,e,a),v=(c.signal>0?c.pixelStart+c.pixelLength-c.pixel:c.pixel-c.pixelStart)/c.pixelLength*(s[1]-s[0])+s[0],d=Math.max(1/n.scale,0);s[0]=(s[0]-v)*d+v,s[1]=(s[1]-v)*d+v;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Nn(0,s,[0,100],0,m.minSpan,m.maxSpan),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}},pan:Jx(function(a,r,e,n,o,s){var u=Yy[n]([s.oldX,s.oldY],[s.newX,s.newY],r,o,e);return u.signal*(a[1]-a[0])*u.pixel/u.pixelLength}),scrollMove:Jx(function(a,r,e,n,o,s){var u=Yy[n]([0,0],[s.scrollDelta,s.scrollDelta],r,o,e);return u.signal*(a[1]-a[0])*s.scrollDelta})};function Jx(a){return function(r,e,n,o){var s=this.range,u=s.slice(),c=r.axisModels[0];if(!!c){var v=a(u,c,r,e,n,o);if(Nn(v,u,[0,100],"all"),this.range=u,s[0]!==u[0]||s[1]!==u[1])return u}}}var Yy={grid:function(a,r,e,n,o){var s=e.axis,u={},c=o.model.coordinateSystem.getRect();return a=a||[0,0],s.dim==="x"?(u.pixel=r[0]-a[0],u.pixelLength=c.width,u.pixelStart=c.x,u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=c.height,u.pixelStart=c.y,u.signal=s.inverse?-1:1),u},polar:function(a,r,e,n,o){var s=e.axis,u={},c=o.model.coordinateSystem,v=c.getRadiusAxis().getExtent(),d=c.getAngleAxis().getExtent();return a=a?c.pointToCoord(a):[0,0],r=c.pointToCoord(r),e.mainType==="radiusAxis"?(u.pixel=r[0]-a[0],u.pixelLength=v[1]-v[0],u.pixelStart=v[0],u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=d[1]-d[0],u.pixelStart=d[0],u.signal=s.inverse?-1:1),u},singleAxis:function(a,r,e,n,o){var s=e.axis,u=o.model.coordinateSystem.getRect(),c={};return a=a||[0,0],s.orient==="horizontal"?(c.pixel=r[0]-a[0],c.pixelLength=u.width,c.pixelStart=u.x,c.signal=s.inverse?1:-1):(c.pixel=r[1]-a[1],c.pixelLength=u.height,c.pixelStart=u.y,c.signal=s.inverse?-1:1),c}},tE=qD;function $x(a){_y(a),a.registerComponentModel(kD),a.registerComponentView(tE),$D(a)}var eE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Object(yn.d)(Yc.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Yc),rE=eE,eh=Qr.a,qx=7,nE=1,Ky=30,iE=7,rh="horizontal",t_="vertical",aE=5,oE=["line","bar","candlestick","scatter"],sE={easing:"cubicOut",duration:100,delay:0},lE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,n){this.api=n,this._onBrush=Object(g.c)(this._onBrush,this),this._onBrushEnd=Object(g.c)(this._onBrushEnd,this)},r.prototype.render=function(e,n,o,s){if(a.prototype.render.apply(this,arguments),Gn.b(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Gn.a(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Pr.a;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(n),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,n=this.api,o=e.get("brushSelect"),s=o?iE:0,u=this._findCoordRect(),c={width:n.getWidth(),height:n.getHeight()},v=this._orient===rh?{right:c.width-u.x-u.width,top:c.height-Ky-qx-s,width:u.width,height:Ky}:{right:qx,top:u.y,width:Ky,height:u.height},d=kr.f(e.option);Object(g.k)(["right","top","width","height"],function(x){d[x]==="ph"&&(d[x]=v[x])});var m=kr.g(d,c);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===t_&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,n=this._location,o=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),u=s&&s.get("inverse"),c=this._displayables.sliderGroup,v=(this._dataShadowInfo||{}).otherAxisInverse;c.attr(o===rh&&!u?{scaleY:v?1:-1,scaleX:1}:o===rh&&u?{scaleY:v?1:-1,scaleX:-1}:o===t_&&!u?{scaleY:v?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:v?-1:1,scaleX:-1,rotation:Math.PI/2});var d=e.getBoundingRect([c]);e.x=n.x-d.x,e.y=n.y-d.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,n=this._size,o=this._displayables.sliderGroup,s=e.get("brushSelect");o.add(new eh({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var u=new eh({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:Object(g.c)(this._onClickPanel,this)}),c=this.api.getZr();s?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",c.on("mousemove",this._onBrush),c.on("mouseup",this._onBrushEnd)):(c.off("mousemove",this._onBrush),c.off("mouseup",this._onBrushEnd)),o.add(u)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var n=this._size,o=this._shadowSize||[],s=e.series,u=s.getRawData(),c=s.getShadowDim?s.getShadowDim():e.otherDim;if(c==null)return;var v=this._shadowPolygonPts,d=this._shadowPolylinePts;if(u!==this._shadowData||c!==this._shadowDim||n[0]!==o[0]||n[1]!==o[1]){var m=u.getDataExtent(c),x=(m[1]-m[0])*.3;m=[m[0]-x,m[1]+x];var T=[0,n[1]],D=[0,n[0]],w=[[n[0],0],[0,0]],R=[],Q=D[1]/(u.count()-1),rt=0,pt=Math.round(u.count()/n[0]),mt;u.each([c],function(Gt,Kt){if(pt>0&&Kt%pt){rt+=Q;return}var te=Gt==null||isNaN(Gt)||Gt==="",ne=te?0:Object(Le.l)(Gt,m,T,!0);te&&!mt&&Kt?(w.push([w[w.length-1][0],0]),R.push([R[R.length-1][0],0])):!te&&mt&&(w.push([rt,0]),R.push([rt,0])),w.push([rt,ne]),R.push([rt,ne]),rt+=Q,mt=te}),v=this._shadowPolygonPts=w,d=this._shadowPolylinePts=R}this._shadowData=u,this._shadowDim=c,this._shadowSize=[n[0],n[1]];var Dt=this.dataZoomModel;function Lt(Gt){var Kt=Dt.getModel(Gt?"selectedDataBackground":"dataBackground"),te=new Pr.a,ne=new _n.a({shape:{points:v},segmentIgnoreThreshold:1,style:Kt.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),pe=new Vi.a({shape:{points:d},segmentIgnoreThreshold:1,style:Kt.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return te.add(ne),te.add(pe),te}for(var wt=0;wt<3;wt++){var Nt=Lt(wt===1);this._displayables.sliderGroup.add(Nt),this._displayables.dataShadowSegs.push(Nt)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,n=e.get("showDataShadow");if(n!==!1){var o,s=this.ecModel;return e.eachTargetAxis(function(u,c){var v=e.getAxisProxy(u,c).getTargetSeriesModels();Object(g.k)(v,function(d){if(!o&&!(n!==!0&&Object(g.r)(oE,d.get("type"))<0)){var m=s.getComponent(cl(u),c).axis,x=uE(u),T,D=d.coordinateSystem;x!=null&&D.getOtherAxis&&(T=D.getOtherAxis(m).inverse),x=d.getData().mapDimension(x),o={thisAxis:m,series:d,thisDim:u,otherDim:x,otherAxisInverse:T}}},this)},this),o}},r.prototype._renderHandle=function(){var e=this.group,n=this._displayables,o=n.handles=[null,null],s=n.handleLabels=[null,null],u=this._displayables.sliderGroup,c=this._size,v=this.dataZoomModel,d=this.api,m=v.get("borderRadius")||0,x=v.get("brushSelect"),T=n.filler=new eh({silent:x,style:{fill:v.get("fillerColor")},textConfig:{position:"inside"}});u.add(T),u.add(new eh({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:c[0],height:c[1],r:m},style:{stroke:v.get("dataBackgroundColor")||v.get("borderColor"),lineWidth:nE,fill:"rgba(0,0,0,0)"}})),Object(g.k)([0,1],function(mt){var Dt=v.get("handleIcon");!cn.d[Dt]&&Dt.indexOf("path://")<0&&Dt.indexOf("image://")<0&&(Dt="path://"+Dt);var Lt=Object(cn.a)(Dt,-1,0,2,2,null,!0);Lt.attr({cursor:e_(this._orient),draggable:!0,drift:Object(g.c)(this._onDragMove,this,mt),ondragend:Object(g.c)(this._onDragEnd,this),onmouseover:Object(g.c)(this._showDataInfo,this,!0),onmouseout:Object(g.c)(this._showDataInfo,this,!1),z2:5});var wt=Lt.getBoundingRect(),Nt=v.get("handleSize");this._handleHeight=Object(Le.p)(Nt,this._size[1]),this._handleWidth=wt.width/wt.height*this._handleHeight,Lt.setStyle(v.getModel("handleStyle").getItemStyle()),Lt.style.strokeNoScale=!0,Lt.rectHover=!0,Lt.ensureState("emphasis").style=v.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(ar.o)(Lt);var Gt=v.get("handleColor");Gt!=null&&(Lt.style.fill=Gt),u.add(o[mt]=Lt);var Kt=v.getModel("textStyle");e.add(s[mt]=new he.a({silent:!0,invisible:!0,style:Object(xr.c)(Kt,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Kt.getTextColor(),font:Kt.getFont()}),z2:10}))},this);var D=T;if(x){var w=Object(Le.p)(v.get("moveHandleSize"),c[1]),R=n.moveHandle=new Qr.a({style:v.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:c[1]-.5,height:w}}),Q=w*.8,rt=n.moveHandleIcon=Object(cn.a)(v.get("moveHandleIcon"),-Q/2,-Q/2,Q,Q,"#fff",!0);rt.silent=!0,rt.y=c[1]+w/2-.5,R.ensureState("emphasis").style=v.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var pt=Math.min(c[1]/2,Math.max(w,10));D=n.moveZone=new Qr.a({invisible:!0,shape:{y:c[1]-pt,height:w+pt}}),D.on("mouseover",function(){d.enterEmphasis(R)}).on("mouseout",function(){d.leaveEmphasis(R)}),u.add(R),u.add(rt),u.add(D)}D.attr({draggable:!0,cursor:e_(this._orient),drift:Object(g.c)(this._onDragMove,this,"all"),ondragstart:Object(g.c)(this._showDataInfo,this,!0),ondragend:Object(g.c)(this._onDragEnd,this),onmouseover:Object(g.c)(this._showDataInfo,this,!0),onmouseout:Object(g.c)(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[Object(Le.l)(e[0],[0,100],n,!0),Object(Le.l)(e[1],[0,100],n,!0)]},r.prototype._updateInterval=function(e,n){var o=this.dataZoomModel,s=this._handleEnds,u=this._getViewExtent(),c=o.findRepresentativeAxisProxy().getMinMaxSpan(),v=[0,100];Nn(n,s,u,o.get("zoomLock")?"all":e,c.minSpan!=null?Object(Le.l)(c.minSpan,v,u,!0):null,c.maxSpan!=null?Object(Le.l)(c.maxSpan,v,u,!0):null);var d=this._range,m=this._range=Object(Le.c)([Object(Le.l)(s[0],u,v,!0),Object(Le.l)(s[1],u,v,!0)]);return!d||d[0]!==m[0]||d[1]!==m[1]},r.prototype._updateView=function(e){var n=this._displayables,o=this._handleEnds,s=Object(Le.c)(o.slice()),u=this._size;Object(g.k)([0,1],function(D){var w=n.handles[D],R=this._handleHeight;w.attr({scaleX:R/2,scaleY:R/2,x:o[D]+(D?-1:1),y:u[1]/2-R/2})},this),n.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:u[1]});var c={x:s[0],width:s[1]-s[0]};n.moveHandle&&(n.moveHandle.setShape(c),n.moveZone.setShape(c),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",c.x+c.width/2));for(var v=n.dataShadowSegs,d=[0,s[0],s[1],u[0]],m=0;m<v.length;m++){var x=v[m],T=x.getClipPath();T||(T=new Qr.a,x.setClipPath(T)),T.setShape({x:d[m],y:0,width:d[m+1]-d[m],height:u[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var n=this.dataZoomModel,o=this._displayables,s=o.handleLabels,u=this._orient,c=["",""];if(n.get("showDetail")){var v=n.findRepresentativeAxisProxy();if(v){var d=v.getAxisModel().axis,m=this._range,x=e?v.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:v.getDataValueWindow();c=[this._formatLabel(x[0],d),this._formatLabel(x[1],d)]}}var T=Object(Le.c)(this._handleEnds.slice());D.call(this,0),D.call(this,1);function D(w){var R=_r.getTransform(o.handles[w].parent,this.group),Q=_r.transformDirection(w===0?"right":"left",R),rt=this._handleWidth/2+aE,pt=_r.applyTransform([T[w]+(w===0?-rt:rt),this._size[1]/2],R);s[w].setStyle({x:pt[0],y:pt[1],verticalAlign:u===rh?"middle":Q,align:u===rh?Q:"center",text:c[w]})}},r.prototype._formatLabel=function(e,n){var o=this.dataZoomModel,s=o.get("labelFormatter"),u=o.get("labelPrecision");(u==null||u==="auto")&&(u=n.getPixelPrecision());var c=e==null||isNaN(e)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(u,20));return Object(g.w)(s)?s(e,c):Object(g.C)(s)?s.replace("{value}",c):c},r.prototype._showDataInfo=function(e){e=this._dragging||e;var n=this._displayables,o=n.handleLabels;o[0].attr("invisible",!e),o[1].attr("invisible",!e),n.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},r.prototype._onDragMove=function(e,n,o,s){this._dragging=!0,ae.g(s.event);var u=this._displayables.sliderGroup.getLocalTransform(),c=_r.applyTransform([n,o],u,!0),v=this._updateInterval(e,c[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),v&&d&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var n=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){var s=this._handleEnds,u=(s[0]+s[1])/2,c=this._updateInterval("all",o[0]-u);this._updateView(),c&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var n=e.offsetX,o=e.offsetY;this._brushStart=new qi.a(n,o),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(!!this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var o=n.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(o.width)<5)){var u=this._getViewExtent(),c=[0,100];this._range=Object(Le.c)([Object(Le.l)(o.x,u,c,!0),Object(Le.l)(o.x+o.width,u,c,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(ae.g(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,n){var o=this._displayables,s=this.dataZoomModel,u=o.brushRect;u||(u=o.brushRect=new eh({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(u)),u.attr("ignore",!1);var c=this._brushStart,v=this._displayables.sliderGroup,d=v.transformCoordToLocal(e,n),m=v.transformCoordToLocal(c.x,c.y),x=this._size;d[0]=Math.max(Math.min(x[0],d[0]),0),u.setShape({x:m[0],y:0,width:d[0]-m[0],height:x[1]})},r.prototype._dispatchZoomAction=function(e){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?sE:null,start:n[0],end:n[1]})},r.prototype._findCoordRect=function(){var e,n=X1(this.dataZoomModel).infoList;if(!e&&n.length){var o=n[0].model.coordinateSystem;e=o.getRect&&o.getRect()}if(!e){var s=this.api.getWidth(),u=this.api.getHeight();e={x:s*.2,y:u*.2,width:s*.6,height:u*.6}}return e},r.type="dataZoom.slider",r}(xy);function uE(a){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[a]}function e_(a){return a==="vertical"?"ns-resize":"ew-resize"}var fE=lE;function r_(a){a.registerComponentModel(rE),a.registerComponentView(fE),_y(a)}function cE(a){Object(B.a)($x),Object(B.a)(r_)}var hE={get:function(a,r,e){var n=g.d((vE[a]||{})[r]);return e&&g.t(n)?n[n.length-1]:n}},vE={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},n_=hE,i_=Ai.mapVisual,dE=Ai.eachVisual,pE=g.t,a_=g.k,gE=Le.c,mE=Le.l,yE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-Infinity,Infinity],e.targetVisuals={},e.controllerVisuals={},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o)},r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&Sx(o,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var n=this.stateList;e=g.c(e,this),this.controllerVisuals=Cy(this.option.controller,n,e),this.targetVisuals=Cy(this.option.target,n,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,n=[];return e==null||e==="all"?this.ecModel.eachSeries(function(o,s){n.push(s)}):n=Be.r(e),n},r.prototype.eachTargetSeries=function(e,n){g.k(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&e.call(n,s)},this)},r.prototype.isTargetSeries=function(e){var n=!1;return this.eachTargetSeries(function(o){o===e&&(n=!0)}),n},r.prototype.formatValueText=function(e,n,o){var s=this.option,u=s.precision,c=this.dataBound,v=s.formatter,d;o=o||["<",">"],g.t(e)&&(e=e.slice(),d=!0);var m=n?e:d?[x(e[0]),x(e[1])]:x(e);if(g.C(v))return v.replace("{value}",d?m[0]:m).replace("{value2}",d?m[1]:m);if(g.w(v))return d?v(e[0],e[1]):v(e);if(d)return e[0]===c[0]?o[0]+" "+m[1]:e[1]===c[1]?o[1]+" "+m[0]:m[0]+" - "+m[1];return m;function x(T){return T===c[0]?"min":T===c[1]?"max":(+T).toFixed(Math.min(u,20))}},r.prototype.resetExtent=function(){var e=this.option,n=gE([e.min,e.max]);this._dataExtent=n},r.prototype.getDataDimensionIndex=function(e){var n=this.option.dimension;if(n!=null)return e.getDimensionIndex(n);for(var o=e.dimensions,s=o.length-1;s>=0;s--){var u=o[s],c=e.getDimensionInfo(u);if(!c.isCalculationCoord)return c.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,n=this.option,o={inRange:n.inRange,outOfRange:n.outOfRange},s=n.target||(n.target={}),u=n.controller||(n.controller={});g.I(s,o),g.I(u,o);var c=this.isCategory();v.call(this,s),v.call(this,u),d.call(this,s,"inRange","outOfRange"),m.call(this,u);function v(x){pE(n.color)&&!x.inRange&&(x.inRange={color:n.color.slice().reverse()}),x.inRange=x.inRange||{color:e.get("gradientColor")}}function d(x,T,D){var w=x[T],R=x[D];w&&!R&&(R=x[D]={},a_(w,function(Q,rt){if(!!Ai.isValidType(rt)){var pt=n_.get(rt,"inactive",c);pt!=null&&(R[rt]=pt,rt==="color"&&!R.hasOwnProperty("opacity")&&!R.hasOwnProperty("colorAlpha")&&(R.opacity=[0,0]))}}))}function m(x){var T=(x.inRange||{}).symbol||(x.outOfRange||{}).symbol,D=(x.inRange||{}).symbolSize||(x.outOfRange||{}).symbolSize,w=this.get("inactiveColor"),R=this.getItemSymbol(),Q=R||"roundRect";a_(this.stateList,function(rt){var pt=this.itemSize,mt=x[rt];mt||(mt=x[rt]={color:c?w:[w]}),mt.symbol==null&&(mt.symbol=T&&g.d(T)||(c?Q:[Q])),mt.symbolSize==null&&(mt.symbolSize=D&&g.d(D)||(c?pt[0]:[pt[0],pt[0]])),mt.symbol=i_(mt.symbol,function(wt){return wt==="none"?Q:wt});var Dt=mt.symbolSize;if(Dt!=null){var Lt=-Infinity;dE(Dt,function(wt){wt>Lt&&(Lt=wt)}),mt.symbolSize=i_(Dt,function(wt){return mE(wt,[0,Lt],[0,pt[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}($n.a),Vd=yE,o_=[20,140],xE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=o_[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=o_[1])},r.prototype._resetRange=function(){var e=this.getExtent(),n=this.option.range;!n||n.auto?(e.auto=1,this.option.range=e):g.t(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],e[0]),n[1]=Math.min(n[1],e[1]))},r.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),g.k(this.stateList,function(e){var n=this.option.controller[e].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),n=Le.c((this.get("range")||[]).slice());return n[0]>e[1]&&(n[0]=e[1]),n[1]>e[1]&&(n[1]=e[1]),n[0]<e[0]&&(n[0]=e[0]),n[1]<e[0]&&(n[1]=e[0]),n},r.prototype.getValueState=function(e){var n=this.option.range,o=this.getExtent();return(n[0]<=o[0]||n[0]<=e)&&(n[1]>=o[1]||e<=n[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[];return this.eachTargetSeries(function(o){var s=[],u=o.getData();u.each(this.getDataDimensionIndex(u),function(c,v){e[0]<=c&&c<=e[1]&&s.push(v)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},r.prototype.getVisualMeta=function(e){var n=s_(this,"outOfRange",this.getExtent()),o=s_(this,"inRange",this.option.range.slice()),s=[];function u(D,w){s.push({value:D,color:e(D,w)})}for(var c=0,v=0,d=o.length,m=n.length;v<m&&(!o.length||n[v]<=o[0]);v++)n[v]<o[c]&&u(n[v],"outOfRange");for(var x=1;c<d;c++,x=0)x&&s.length&&u(o[c],"outOfRange"),u(o[c],"inRange");for(var x=1;v<m;v++)(!o.length||o[o.length-1]<n[v])&&(x&&(s.length&&u(s[s.length-1].value,"outOfRange"),x=0),u(n[v],"outOfRange"));var T=s.length;return{stops:s,outerColors:[T?s[0].color:"transparent",T?s[T-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Object(yn.d)(Vd.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Vd);function s_(a,r,e){if(e[0]===e[1])return e.slice();for(var n=200,o=(e[1]-e[0])/n,s=e[0],u=[],c=0;c<=n&&s<e[1];c++)u.push(s),s+=o;return u.push(e[1]),u}var _E=xE,bE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n},r.prototype.render=function(e,n,o,s){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,n,o,s)},r.prototype.renderBackground=function(e){var n=this.visualMapModel,o=Vn.j(n.get("padding")||0),s=e.getBoundingRect();e.add(new Qr.a({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,n,o){o=o||{};var s=o.forceState,u=this.visualMapModel,c={};if(n==="color"){var v=u.get("contentColor");c.color=v}function d(D){return c[D]}function m(D,w){c[D]=w}var x=u.controllerVisuals[s||u.getValueState(e)],T=Ai.prepareVisualTypes(x);return g.k(T,function(D){var w=x[D];o.convertOpacityToAlpha&&D==="opacity"&&(D="colorAlpha",w=x.__alphaForOpacity),Ai.dependsOn(D,n)&&w&&w.applyVisual(e,d,m)}),c[n]},r.prototype.positionGroup=function(e){var n=this.visualMapModel,o=this.api;kr.i(e,n.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},r.prototype.doRender=function(e,n,o,s){},r.type="visualMap",r}(gn.a),l_=bE,u_=[["left","right","width"],["top","bottom","height"]];function f_(a,r,e){var n=a.option,o=n.align;if(o!=null&&o!=="auto")return o;for(var s={width:r.getWidth(),height:r.getHeight()},u=n.orient==="horizontal"?1:0,c=u_[u],v=[0,null,10],d={},m=0;m<3;m++)d[u_[1-u][m]]=v[m],d[c[m]]=m===2?e[0]:n[c[m]];var x=[["x","width",3],["y","height",0]][u],T=Object(kr.g)(d,s,n.padding);return c[(T.margin[x[2]]||0)+T[x[0]]+T[x[1]]*.5<s[x[1]]*.5?0:1]}function Gd(a,r){return g.k(a||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),a}var No=Le.l,SE=g.k,c_=Math.min,Qy=Math.max,TE=12,OE=6,AE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return r.prototype.doRender=function(e,n,o,s){this._api=o,(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,n=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(n);var o=e.get("text");this._renderEndsText(n,o,0),this._renderEndsText(n,o,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},r.prototype._renderEndsText=function(e,n,o){if(!!n){var s=n[1-o];s=s!=null?s+"":"";var u=this.visualMapModel,c=u.get("textGap"),v=u.itemSize,d=this._shapes.mainGroup,m=this._applyTransform([v[0]/2,o===0?-c:v[1]+c],d),x=this._applyTransform(o===0?"bottom":"top",d),T=this._orient,D=this.visualMapModel.textStyleModel;this.group.add(new he.a({style:{x:m[0],y:m[1],verticalAlign:T==="horizontal"?"middle":x,align:T==="horizontal"?x:"center",text:s,font:D.getFont(),fill:D.getTextColor()}}))}},r.prototype._renderBar=function(e){var n=this.visualMapModel,o=this._shapes,s=n.itemSize,u=this._orient,c=this._useHandle,v=f_(n,this.api,s),d=o.mainGroup=this._createBarGroup(v),m=new Pr.a;d.add(m),m.add(o.outOfRange=h_()),m.add(o.inRange=h_(null,c?d_(this._orient):null,g.c(this._dragHandle,this,"all",!1),g.c(this._dragHandle,this,"all",!0))),m.setClipPath(new Qr.a({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var x=n.textStyleModel.getTextRect("\u56FD"),T=Qy(x.width,x.height);c&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(n,d,0,s,T,u),this._createHandle(n,d,1,s,T,u)),this._createIndicator(n,d,s,T,u),e.add(d)},r.prototype._createHandle=function(e,n,o,s,u,c){var v=g.c(this._dragHandle,this,o,!1),d=g.c(this._dragHandle,this,o,!0),m=Object(lt.g)(e.get("handleSize"),s[0]),x=Object(cn.a)(e.get("handleIcon"),-m/2,-m/2,m,m,null,!0),T=d_(this._orient);x.attr({cursor:T,draggable:!0,drift:v,ondragend:d,onmousemove:function(rt){ae.g(rt.event)}}),x.x=s[0]/2,x.useStyle(e.getModel("handleStyle").getItemStyle()),x.setStyle({strokeNoScale:!0,strokeFirst:!0}),x.style.lineWidth*=2,x.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(ar.F)(x,!0),n.add(x);var D=this.visualMapModel.textStyleModel,w=new he.a({cursor:T,draggable:!0,drift:v,onmousemove:function(rt){ae.g(rt.event)},ondragend:d,style:{x:0,y:0,text:"",font:D.getFont(),fill:D.getTextColor()}});w.ensureState("blur").style={opacity:.1},w.stateTransition={duration:200},this.group.add(w);var R=[m,0],Q=this._shapes;Q.handleThumbs[o]=x,Q.handleLabelPoints[o]=R,Q.handleLabels[o]=w},r.prototype._createIndicator=function(e,n,o,s,u){var c=Object(lt.g)(e.get("indicatorSize"),o[0]),v=Object(cn.a)(e.get("indicatorIcon"),-c/2,-c/2,c,c,null,!0);v.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var d=e.getModel("indicatorStyle").getItemStyle();if(v instanceof gt.a){var m=v.style;v.useStyle(g.m({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},d))}else v.useStyle(d);n.add(v);var x=this.visualMapModel.textStyleModel,T=new he.a({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:x.getFont(),fill:x.getTextColor()}});this.group.add(T);var D=[(u==="horizontal"?s/2:OE)+o[0]/2,0],w=this._shapes;w.indicator=v,w.indicatorLabel=T,w.indicatorLabelPoint=D,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,n,o,s){if(!!this._useHandle){if(this._dragging=!n,!n){var u=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(e,u[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():v_(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,n=this._dataInterval=e.getSelected(),o=e.getExtent(),s=[0,e.itemSize[1]];this._handleEnds=[No(n[0],o,s,!0),No(n[1],o,s,!0)]},r.prototype._updateInterval=function(e,n){n=n||0;var o=this.visualMapModel,s=this._handleEnds,u=[0,o.itemSize[1]];Nn(n,s,u,e,0);var c=o.getExtent();this._dataInterval=[No(s[0],u,c,!0),No(s[1],u,c,!0)]},r.prototype._updateView=function(e){var n=this.visualMapModel,o=n.getExtent(),s=this._shapes,u=[0,n.itemSize[1]],c=e?u:this._handleEnds,v=this._createBarVisual(this._dataInterval,o,c,"inRange"),d=this._createBarVisual(o,o,u,"outOfRange");s.inRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),s.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(c,v)},r.prototype._createBarVisual=function(e,n,o,s){var u={forceState:s,convertOpacityToAlpha:!0},c=this._makeColorGradient(e,u),v=[this.getControllerVisual(e[0],"symbolSize",u),this.getControllerVisual(e[1],"symbolSize",u)],d=this._createBarPoints(o,v);return{barColor:new co.a(0,0,0,1,c),barPoints:d,handlesColor:[c[0].color,c[c.length-1].color]}},r.prototype._makeColorGradient=function(e,n){var o=100,s=[],u=(e[1]-e[0])/o;s.push({color:this.getControllerVisual(e[0],"color",n),offset:0});for(var c=1;c<o;c++){var v=e[0]+u*c;if(v>e[1])break;s.push({color:this.getControllerVisual(v,"color",n),offset:c/o})}return s.push({color:this.getControllerVisual(e[1],"color",n),offset:1}),s},r.prototype._createBarPoints=function(e,n){var o=this.visualMapModel.itemSize;return[[o[0]-n[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-n[1],e[1]]]},r.prototype._createBarGroup=function(e){var n=this._orient,o=this.visualMapModel.get("inverse");return new Pr.a(n==="horizontal"&&!o?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&o?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!o?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},r.prototype._updateHandle=function(e,n){if(!!this._useHandle){var o=this._shapes,s=this.visualMapModel,u=o.handleThumbs,c=o.handleLabels,v=s.itemSize,d=s.getExtent();SE([0,1],function(m){var x=u[m];x.setStyle("fill",n.handlesColor[m]),x.y=e[m];var T=No(e[m],[0,v[1]],d,!0),D=this.getControllerVisual(T,"symbolSize");x.scaleX=x.scaleY=D/v[0],x.x=v[0]-D/2;var w=_r.applyTransform(o.handleLabelPoints[m],_r.getTransform(x,this.group));c[m].setStyle({x:w[0],y:w[1],text:s.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,n,o,s){var u=this.visualMapModel,c=u.getExtent(),v=u.itemSize,d=[0,v[1]],m=this._shapes,x=m.indicator;if(!!x){x.attr("invisible",!1);var T={convertOpacityToAlpha:!0},D=this.getControllerVisual(e,"color",T),w=this.getControllerVisual(e,"symbolSize"),R=No(e,c,d,!0),Q=v[0]-w/2,rt={x:x.x,y:x.y};x.y=R,x.x=Q;var pt=_r.applyTransform(m.indicatorLabelPoint,_r.getTransform(x,this.group)),mt=m.indicatorLabel;mt.attr("invisible",!1);var Dt=this._applyTransform("left",m.mainGroup),Lt=this._orient,wt=Lt==="horizontal";mt.setStyle({text:(o||"")+u.formatValueText(n),verticalAlign:wt?Dt:"middle",align:wt?"center":Dt});var Nt={x:Q,y:R,style:{fill:D}},Gt={style:{x:pt[0],y:pt[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Kt={duration:100,easing:"cubicInOut",additive:!0};x.x=rt.x,x.y=rt.y,x.animateTo(Nt,Kt),mt.animateTo(Gt,Kt)}else x.attr(Nt),mt.attr(Gt);this._firstShowIndicator=!1;var te=this._shapes.handleLabels;if(te)for(var ne=0;ne<te.length;ne++)this._api.enterBlur(te[ne])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(n){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,s=e._applyTransform([n.offsetX,n.offsetY],e._shapes.mainGroup,!0,!0);s[1]=c_(Qy(0,s[1]),o[1]),e._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,n){var o=this.visualMapModel,s=o.itemSize;if(!!o.option.hoverLink){var u=[0,s[1]],c=o.getExtent();e=c_(Qy(u[0],e),u[1]);var v=ME(o,c,u),d=[e-v,e+v],m=No(e,u,c,!0),x=[No(d[0],u,c,!0),No(d[1],u,c,!0)];d[0]<u[0]&&(x[0]=-Infinity),d[1]>u[1]&&(x[1]=Infinity),n&&(x[0]===-Infinity?this._showIndicator(m,x[1],"< ",v):x[1]===Infinity?this._showIndicator(m,x[0],"> ",v):this._showIndicator(m,m,"\u2248 ",v));var T=this._hoverLinkDataIndices,D=[];(n||v_(o))&&(D=this._hoverLinkDataIndices=o.findTargetDataIndices(x));var w=Be.d(T,D);this._dispatchHighDown("downplay",Gd(w[0],o)),this._dispatchHighDown("highlight",Gd(w[1],o))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var n=e.target,o=this.visualMapModel;if(!(!n||Object(br.a)(n).dataIndex==null)){var s=Object(br.a)(n),u=this.ecModel.getSeriesByIndex(s.seriesIndex);if(!!o.isTargetSeries(u)){var c=u.getData(s.dataType),v=c.getStore().get(o.getDataDimensionIndex(c),s.dataIndex);isNaN(v)||this._showIndicator(v,v)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var o=0;o<n.length;o++)this._api.leaveBlur(n[o])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Gd(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,n,o,s){var u=_r.getTransform(n,s?null:this.group);return g.t(e)?_r.applyTransform(e,u,o):_r.transformDirection(e,u,o)},r.prototype._dispatchHighDown=function(e,n){n&&n.length&&this.api.dispatchAction({type:e,batch:n})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(l_);function h_(a,r,e,n){return new _n.a({shape:{points:a},draggable:!!e,cursor:r,drift:e,onmousemove:function(o){ae.g(o.event)},ondragend:n})}function ME(a,r,e){var n=TE/2,o=a.get("hoverLinkDataSize");return o&&(n=No(o,r,e,!0)/2),n}function v_(a){var r=a.get("hoverLinkOnHandle");return!!(r==null?a.get("realtime"):r)}function d_(a){return a==="vertical"?"ns-resize":"ew-resize"}var DE=AE,EE={type:"selectDataRange",event:"dataRangeSelected",update:"update"},CE=function(a,r){r.eachComponent({mainType:"visualMap",query:a},function(e){e.setSelected(a.selected)})},PE=[{createOnAllSeries:!0,reset:function(a,r){var e=[];return r.eachComponent("visualMap",function(n){var o=a.pipelineContext;!n.isTargetSeries(a)||o&&o.large||e.push(SM(n.stateList,n.targetVisuals,g.c(n.getValueState,n),n.getDataDimensionIndex(a.getData())))}),e}},{createOnAllSeries:!0,reset:function(a,r){var e=a.getData(),n=[];r.eachComponent("visualMap",function(o){if(o.isTargetSeries(a)){var s=o.getVisualMeta(g.c(wE,null,a,o))||{stops:[],outerColors:[]},u=o.getDataDimensionIndex(e);u>=0&&(s.dimension=u,n.push(s))}}),a.getData().setVisual("visualMeta",n)}}];function wE(a,r,e,n){for(var o=r.targetVisuals[n],s=Ai.prepareVisualTypes(o),u={color:Object(vl.b)(a.getData(),"color")},c=0,v=s.length;c<v;c++){var d=s[c],m=o[d==="opacity"?"__alphaForOpacity":d];m&&m.applyVisual(e,x,T)}return u.color;function x(D){return u[D]}function T(D,w){u[D]=w}}var p_=g.k;function LE(a){var r=a&&a.visualMap;g.t(r)||(r=r?[r]:[]),p_(r,function(e){if(!!e){ff(e,"splitList")&&!ff(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var n=e.pieces;n&&g.t(n)&&p_(n,function(o){g.A(o)&&(ff(o,"start")&&!ff(o,"min")&&(o.min=o.start),ff(o,"end")&&!ff(o,"max")&&(o.max=o.end))})}})}function ff(a,r){return a&&a.hasOwnProperty&&a.hasOwnProperty(r)}var g_=!1;function m_(a){g_||(g_=!0,a.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),a.registerAction(EE,CE),Object(g.k)(PE,function(r){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,r)}),a.registerPreprocessor(LE))}function y_(a){a.registerComponentModel(_E),a.registerComponentView(DE),m_(a)}var IE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],RE[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var s=this.option.categories;this.resetVisual(function(u,c){o==="categories"?(u.mappingMethod="category",u.categories=g.d(s)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=g.H(this._pieceList,function(v){return v=g.d(v),c!=="inRange"&&(v.visual=null),v}))})},r.prototype.completeVisualOption=function(){var e=this.option,n={},o=Ai.listVisualTypes(),s=this.isCategory();g.k(e.pieces,function(c){g.k(o,function(v){c.hasOwnProperty(v)&&(n[v]=1)})}),g.k(n,function(c,v){var d=!1;g.k(this.stateList,function(m){d=d||u(e,m,v)||u(e.target,m,v)},this),!d&&g.k(this.stateList,function(m){(e[m]||(e[m]={}))[v]=n_.get(v,m==="inRange"?"active":"inactive",s)})},this);function u(c,v,d){return c&&c[v]&&c[v].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,n){var o=this.option,s=this._pieceList,u=(n?o:e).selected||{};if(o.selected=u,g.k(s,function(v,d){var m=this.getSelectedMapKey(v);u.hasOwnProperty(m)||(u[m]=!0)},this),o.selectedMode==="single"){var c=!1;g.k(s,function(v,d){var m=this.getSelectedMapKey(v);u[m]&&(c?u[m]=!1:c=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=g.d(e)},r.prototype.getValueState=function(e){var n=Ai.findPieceIndex(e,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[],o=this._pieceList;return this.eachTargetSeries(function(s){var u=[],c=s.getData();c.each(this.getDataDimensionIndex(c),function(v,d){var m=Ai.findPieceIndex(v,o);m===e&&u.push(d)},this),n.push({seriesId:s.id,dataIndex:u})},this),n},r.prototype.getRepresentValue=function(e){var n;if(this.isCategory())n=e.value;else if(e.value!=null)n=e.value;else{var o=e.interval||[];n=o[0]===-Infinity&&o[1]===Infinity?0:(o[0]+o[1])/2}return n},r.prototype.getVisualMeta=function(e){if(this.isCategory())return;var n=[],o=["",""],s=this;function u(m,x){var T=s.getRepresentValue({interval:m});x||(x=s.getValueState(T));var D=e(T,x);m[0]===-Infinity?o[0]=D:m[1]===Infinity?o[1]=D:n.push({value:m[0],color:D},{value:m[1],color:D})}var c=this._pieceList.slice();if(!c.length)c.push({interval:[-Infinity,Infinity]});else{var v=c[0].interval[0];v!==-Infinity&&c.unshift({interval:[-Infinity,v]}),v=c[c.length-1].interval[1],v!==Infinity&&c.push({interval:[v,Infinity]})}var d=-Infinity;return g.k(c,function(m){var x=m.interval;x&&(x[0]>d&&u([d,x[0]],"outOfRange"),u(x.slice()),d=x[1])},this),{stops:n,outerColors:o}},r.type="visualMap.piecewise",r.defaultOption=Object(yn.d)(Vd.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Vd),RE={splitNumber:function(a){var r=this.option,e=Math.min(r.precision,20),n=this.getExtent(),o=r.splitNumber;o=Math.max(parseInt(o,10),1),r.splitNumber=o;for(var s=(n[1]-n[0])/o;+s.toFixed(e)!==s&&e<5;)e++;r.precision=e,s=+s.toFixed(e),r.minOpen&&a.push({interval:[-Infinity,n[0]],close:[0,0]});for(var u=0,c=n[0];u<o;c+=s,u++){var v=u===o-1?n[1]:c+s;a.push({interval:[c,v],close:[1,1]})}r.maxOpen&&a.push({interval:[n[1],Infinity],close:[0,0]}),Object(Le.t)(a),g.k(a,function(d,m){d.index=m,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var r=this.option;g.k(r.categories,function(e){a.push({text:this.formatValueText(e,!0),value:e})},this),x_(r,a)},pieces:function(a){var r=this.option;g.k(r.pieces,function(e,n){g.A(e)||(e={value:e});var o={text:"",index:n};if(e.label!=null&&(o.text=e.label),e.hasOwnProperty("value")){var s=o.value=e.value;o.interval=[s,s],o.close=[1,1]}else{for(var u=o.interval=[],c=o.close=[0,0],v=[1,0,1],d=[-Infinity,Infinity],m=[],x=0;x<2;x++){for(var T=[["gte","gt","min"],["lte","lt","max"]][x],D=0;D<3&&u[x]==null;D++)u[x]=e[T[D]],c[x]=v[D],m[x]=D===2;u[x]==null&&(u[x]=d[x])}m[0]&&u[1]===Infinity&&(c[0]=0),m[1]&&u[0]===-Infinity&&(c[1]=0),u[0]===u[1]&&c[0]&&c[1]&&(o.value=u[0])}o.visual=Ai.retrieveVisuals(e),a.push(o)},this),x_(r,a),Object(Le.t)(a),g.k(a,function(e){var n=e.close,o=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,o)},this)}};function x_(a,r){var e=a.inverse;(a.orient==="vertical"?!e:e)&&r.reverse()}var NE=IE,jE=function(a){Object(Pe.a)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.doRender=function(){var e=this.group;e.removeAll();var n=this.visualMapModel,o=n.get("textGap"),s=n.textStyleModel,u=s.getFont(),c=s.getTextColor(),v=this._getItemAlign(),d=n.itemSize,m=this._getViewData(),x=m.endsText,T=g.O(n.get("showLabel",!0),!x);x&&this._renderEndsText(e,x[0],d,T,v),g.k(m.viewPieceList,function(D){var w=D.piece,R=new Pr.a;R.onclick=g.c(this._onItemClick,this,w),this._enableHoverLink(R,D.indexInModelPieceList);var Q=n.getRepresentValue(w);if(this._createItemSymbol(R,Q,[0,0,d[0],d[1]]),T){var rt=this.visualMapModel.getValueState(Q);R.add(new he.a({style:{x:v==="right"?-o:d[0]+o,y:d[1]/2,text:w.text,verticalAlign:"middle",align:v,font:u,fill:c,opacity:rt==="outOfRange"?.5:1}}))}e.add(R)},this),x&&this._renderEndsText(e,x[1],d,T,v),kr.b(n.get("orient"),e,n.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,n){var o=this;e.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(u){var c=o.visualMapModel;c.option.hoverLink&&o.api.dispatchAction({type:u,batch:Gd(c.findTargetDataIndices(n),c)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,n=e.option;if(n.orient==="vertical")return f_(e,this.api,e.itemSize);var o=n.align;return(!o||o==="auto")&&(o="left"),o},r.prototype._renderEndsText=function(e,n,o,s,u){if(!!n){var c=new Pr.a,v=this.visualMapModel.textStyleModel;c.add(new he.a({style:{x:s?u==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?u:"center",text:n,font:v.getFont(),fill:v.getTextColor()}})),e.add(c)}},r.prototype._getViewData=function(){var e=this.visualMapModel,n=g.H(e.getPieceList(),function(c,v){return{piece:c,indexInModelPieceList:v}}),o=e.get("text"),s=e.get("orient"),u=e.get("inverse");return(s==="horizontal"?u:!u)?n.reverse():o&&(o=o.slice().reverse()),{viewPieceList:n,endsText:o}},r.prototype._createItemSymbol=function(e,n,o){e.add(Object(cn.a)(this.getControllerVisual(n,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(n,"color")))},r.prototype._onItemClick=function(e){var n=this.visualMapModel,o=n.option,s=g.d(o.selected),u=n.getSelectedMapKey(e);o.selectedMode==="single"?(s[u]=!0,g.k(s,function(c,v){s[v]=v===u})):s[u]=!s[u],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})},r.type="visualMap.piecewise",r}(l_),BE=jE;function __(a){a.registerComponentModel(NE),a.registerComponentView(BE),m_(a)}function FE(a){Object(B.a)(y_),Object(B.a)(__)}var zE={label:{enabled:!0},decal:{show:!1}},b_=Object(Be.o)(),VE={};function GE(a,r){var e=a.getModel("aria");if(!e.get("enabled"))return;var n=g.d(zE);g.I(n.label,a.getLocaleModel().get("aria"),!1),g.I(e.option,n,!1),o(),s();function o(){var d=e.getModel("decal"),m=d.get("show");if(m){var x=g.f();a.eachSeries(function(T){if(!T.isColorBySeries()){var D=x.get(T.type);D||(D={},x.set(T.type,D)),b_(T).scope=D}}),a.eachRawSeries(function(T){if(a.isSeriesFiltered(T))return;if(g.w(T.enableAriaDecal)){T.enableAriaDecal();return}var D=T.getData();if(T.isColorBySeries()){var pt=Object(Jf.b)(T.ecModel,T.name,VE,a.getSeriesCount()),mt=D.getVisual("decal");D.setVisual("decal",Dt(mt,pt))}else{var w=T.getRawData(),R={},Q=b_(T).scope;D.each(function(Lt){var wt=D.getRawIndex(Lt);R[wt]=Lt});var rt=w.count();w.each(function(Lt){var wt=R[Lt],Nt=w.getName(Lt)||Lt+"",Gt=Object(Jf.b)(T.ecModel,Nt,Q,rt),Kt=D.getItemVisual(wt,"decal");D.setItemVisual(wt,"decal",Dt(Kt,Gt))})}function Dt(Lt,wt){var Nt=Lt?g.m(g.m({},wt),Lt):wt;return Nt.dirty=!0,Nt}})}}function s(){var d=a.getLocaleModel().get("aria"),m=e.getModel("label");if(m.option=g.i(m.option,d),!!m.get("enabled")){var x=r.getZr().dom;if(m.get("description")){x.setAttribute("aria-label",m.get("description"));return}var T=a.getSeriesCount(),D=m.get(["data","maxCount"])||10,w=m.get(["series","maxCount"])||10,R=Math.min(T,w),Q;if(!(T<1)){var rt=c();if(rt){var pt=m.get(["general","withTitle"]);Q=u(pt,{title:rt})}else Q=m.get(["general","withoutTitle"]);var mt=[],Dt=T>1?m.get(["series","multiple","prefix"]):m.get(["series","single","prefix"]);Q+=u(Dt,{seriesCount:T}),a.eachSeries(function(Gt,Kt){if(Kt<R){var te=void 0,ne=Gt.get("name"),pe=ne?"withName":"withoutName";te=T>1?m.get(["series","multiple",pe]):m.get(["series","single",pe]),te=u(te,{seriesId:Gt.seriesIndex,seriesName:Gt.get("name"),seriesType:v(Gt.subType)});var me=Gt.getData();if(me.count()>D){var xe=m.get(["data","partialData"]);te+=u(xe,{displayCnt:D})}else te+=m.get(["data","allData"]);for(var _e=m.get(["data","separator","middle"]),Ne=m.get(["data","separator","end"]),Je=[],Xe=0;Xe<me.count();Xe++)if(Xe<D){var or=me.getName(Xe),Tr=me.getValues(Xe),Mr=m.get(["data",or?"withName":"withoutName"]);Je.push(u(Mr,{name:or,value:Tr.join(_e)}))}te+=Je.join(_e)+Ne,mt.push(te)}});var Lt=m.getModel(["series","multiple","separator"]),wt=Lt.get("middle"),Nt=Lt.get("end");Q+=mt.join(wt)+Nt,x.setAttribute("aria-label",Q)}}}function u(d,m){if(!g.C(d))return d;var x=d;return g.k(m,function(T,D){x=x.replace(new RegExp("\\{\\s*"+D+"\\s*\\}","g"),T)}),x}function c(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function v(d){return a.getLocaleModel().get(["series","typeNames"])[d]||"\u81EA\u5B9A\u4E49\u56FE"}}function UE(a){if(!(!a||!a.aria)){var r=a.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},g.k(["description","general","series","data"],function(e){r[e]!=null&&(r.label[e]=r[e])})}}function HE(a){a.registerPreprocessor(UE),a.registerVisual(a.PRIORITY.VISUAL.ARIA,GE)}var S_={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},WE=function(){function a(r){var e=this._condVal=Object(g.C)(r)?new RegExp(r):Object(g.B)(r)?r:null;if(e==null){var n="";Object($r.c)(n)}}return a.prototype.evaluate=function(r){var e=typeof r;return Object(g.C)(e)?this._condVal.test(r):Object(g.z)(e)?this._condVal.test(r+""):!1},a}(),kE=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),XE=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(!r[e].evaluate())return!1;return!0},a}(),ZE=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(r[e].evaluate())return!0;return!1},a}(),YE=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),KE=function(){function a(){}return a.prototype.evaluate=function(){for(var r=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),o=r?this.valueParser(n):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(r?o:n))return!1;return!0},a}();function Jy(a,r){if(a===!0||a===!1){var e=new kE;return e.value=a,e}var n="";return O_(a)||Object($r.c)(n),a.and?T_("and",a,r):a.or?T_("or",a,r):a.not?QE(a,r):JE(a,r)}function T_(a,r,e){var n=r[a],o="";Object(g.t)(n)||Object($r.c)(o),n.length||Object($r.c)(o);var s=a==="and"?new XE:new ZE;return s.children=Object(g.H)(n,function(u){return Jy(u,e)}),s.children.length||Object($r.c)(o),s}function QE(a,r){var e=a.not,n="";O_(e)||Object($r.c)(n);var o=new YE;return o.child=Jy(e,r),o.child||Object($r.c)(n),o}function JE(a,r){for(var e="",n=r.prepareGetValue(a),o=[],s=Object(g.F)(a),u=a.parser,c=u?Object(pl.c)(u):null,v=0;v<s.length;v++){var d=s[v];if(!(d==="parser"||r.valueGetterAttrMap.get(d))){var m=Object(g.q)(S_,d)?S_[d]:d,x=a[d],T=c?c(x):x,D=Object(pl.b)(m,T)||m==="reg"&&new WE(T);D||Object($r.c)(e),o.push(D)}}o.length||Object($r.c)(e);var w=new KE;return w.valueGetterParam=n,w.valueParser=c,w.getValue=r.getValue,w.subCondList=o,w}function O_(a){return Object(g.A)(a)&&!Object(g.u)(a)}var $E=function(){function a(r,e){this._cond=Jy(r,e)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function qE(a,r){return new $E(a,r)}var t2={type:"echarts:filter",transform:function(a){for(var r=a.upstream,e,n=qE(a.config,{valueGetterAttrMap:Object(g.f)({dimension:!0}),prepareGetValue:function(c){var v="",d=c.dimension;Object(g.q)(c,"dimension")||Object($r.c)(v);var m=r.getDimensionInfo(d);return m||Object($r.c)(v),{dimIdx:m.index}},getValue:function(c){return r.retrieveValueFromItem(e,c.dimIdx)}}),o=[],s=0,u=r.count();s<u;s++)e=r.getRawDataItem(s),n.evaluate()&&o.push(e);return{data:o}}},U2="",e2={type:"echarts:sort",transform:function(a){var r=a.upstream,e=a.config,n="",o=Object(Be.r)(e);o.length||Object($r.c)(n);var s=[];Object(g.k)(o,function(m){var x=m.dimension,T=m.order,D=m.parser,w=m.incomparable;if(x==null&&Object($r.c)(n),T!=="asc"&&T!=="desc"&&Object($r.c)(n),w&&w!=="min"&&w!=="max"){var R="";Object($r.c)(R)}if(T!=="asc"&&T!=="desc"){var Q="";Object($r.c)(Q)}var rt=r.getDimensionInfo(x);rt||Object($r.c)(n);var pt=D?Object(pl.c)(D):null;D&&!pt&&Object($r.c)(n),s.push({dimIdx:rt.index,parser:pt,comparator:new pl.a(T,w)})});var u=r.sourceFormat;u!==jn.c&&u!==jn.e&&Object($r.c)(n);for(var c=[],v=0,d=r.count();v<d;v++)c.push(r.getRawDataItem(v));return c.sort(function(m,x){for(var T=0;T<s.length;T++){var D=s[T],w=r.retrieveValueFromItem(m,D.dimIdx),R=r.retrieveValueFromItem(x,D.dimIdx);D.parser&&(w=D.parser(w),R=D.parser(R));var Q=D.comparator.evaluate(w,R);if(Q!==0)return Q}return 0}),{data:c}}};function r2(a){a.registerTransform(t2),a.registerTransform(e2)}var n2=b("X0MA"),jo=St.a.CMD;function cf(a,r){return Math.abs(a-r)<1e-5}function $y(a){var r=a.data,e=a.len(),n=[],o,s=0,u=0,c=0,v=0;function d(me,xe){o&&o.length>2&&n.push(o),o=[me,xe]}function m(me,xe,_e,Ne){cf(me,_e)&&cf(xe,Ne)||o.push(me,xe,_e,Ne,_e,Ne)}function x(me,xe,_e,Ne,Je,Xe){var or=Math.abs(xe-me),Tr=Math.tan(or/4)*4/3,Mr=xe<me?-1:1,Ur=Math.cos(me),Yr=Math.sin(me),fn=Math.cos(xe),Yn=Math.sin(xe),Bn=Ur*Je+_e,sn=Yr*Xe+Ne,Vr=fn*Je+_e,bn=Yn*Xe+Ne,mn=Je*Tr*Mr,On=Xe*Tr*Mr;o.push(Bn-mn*Yr,sn+On*Ur,Vr+mn*Yn,bn-On*fn,Vr,bn)}for(var T,D,w,R,Q=0;Q<e;){var rt=r[Q++],pt=Q===1;switch(pt&&(s=r[Q],u=r[Q+1],c=s,v=u,(rt===jo.L||rt===jo.C||rt===jo.Q)&&(o=[c,v])),rt){case jo.M:s=c=r[Q++],u=v=r[Q++],d(c,v);break;case jo.L:T=r[Q++],D=r[Q++],m(s,u,T,D),s=T,u=D;break;case jo.C:o.push(r[Q++],r[Q++],r[Q++],r[Q++],s=r[Q++],u=r[Q++]);break;case jo.Q:T=r[Q++],D=r[Q++],w=r[Q++],R=r[Q++],o.push(s+2/3*(T-s),u+2/3*(D-u),w+2/3*(T-w),R+2/3*(D-R),w,R),s=w,u=R;break;case jo.A:var mt=r[Q++],Dt=r[Q++],Lt=r[Q++],wt=r[Q++],Nt=r[Q++],Gt=r[Q++]+Nt;Q+=1;var Kt=!r[Q++];T=Math.cos(Nt)*Lt+mt,D=Math.sin(Nt)*wt+Dt,pt?(c=T,v=D,d(c,v)):m(s,u,T,D),s=Math.cos(Gt)*Lt+mt,u=Math.sin(Gt)*wt+Dt;for(var te=(Kt?-1:1)*Math.PI/2,ne=Nt;Kt?ne>Gt:ne<Gt;ne+=te){var pe=Kt?Math.max(ne+te,Gt):Math.min(ne+te,Gt);x(ne,pe,mt,Dt,Lt,wt)}break;case jo.R:c=s=r[Q++],v=u=r[Q++],T=c+r[Q++],D=v+r[Q++],d(T,v),m(T,v,T,D),m(T,D,c,D),m(c,D,c,v),m(c,v,T,v);break;case jo.Z:o&&m(s,u,c,v),s=c,u=v;break}}return o&&o.length>2&&n.push(o),n}function qy(a,r,e,n,o,s,u,c,v,d){if(cf(a,e)&&cf(r,n)&&cf(o,u)&&cf(s,c)){v.push(u,c);return}var m=2/d,x=m*m,T=u-a,D=c-r,w=Math.sqrt(T*T+D*D);T/=w,D/=w;var R=e-a,Q=n-r,rt=o-u,pt=s-c,mt=R*R+Q*Q,Dt=rt*rt+pt*pt;if(mt<x&&Dt<x){v.push(u,c);return}var Lt=T*R+D*Q,wt=-T*rt-D*pt,Nt=mt-Lt*Lt,Gt=Dt-wt*wt;if(Nt<x&&Lt>=0&&Gt<x&&wt>=0){v.push(u,c);return}var Kt=[],te=[];Object(Br.g)(a,e,o,u,.5,Kt),Object(Br.g)(r,n,s,c,.5,te),qy(Kt[0],te[0],Kt[1],te[1],Kt[2],te[2],Kt[3],te[3],v,d),qy(Kt[4],te[4],Kt[5],te[5],Kt[6],te[6],Kt[7],te[7],v,d)}function i2(a,r){var e=$y(a),n=[];r=r||1;for(var o=0;o<e.length;o++){var s=e[o],u=[],c=s[0],v=s[1];u.push(c,v);for(var d=2;d<s.length;){var m=s[d++],x=s[d++],T=s[d++],D=s[d++],w=s[d++],R=s[d++];qy(c,v,m,x,T,D,w,R,u,r),c=w,v=R}n.push(u)}return n}function A_(a,r,e){var n=a[r],o=a[1-r],s=Math.abs(n/o),u=Math.ceil(Math.sqrt(s*e)),c=Math.floor(e/u);c===0&&(c=1,u=e);for(var v=[],d=0;d<u;d++)v.push(c);var m=u*c,x=e-m;if(x>0)for(var d=0;d<x;d++)v[d%u]+=1;return v}function M_(a,r,e){for(var n=a.r0,o=a.r,s=a.startAngle,u=a.endAngle,c=Math.abs(u-s),v=c*o,d=o-n,m=v>Math.abs(d),x=A_([v,d],m?0:1,r),T=(m?c:d)/x.length,D=0;D<x.length;D++)for(var w=(m?d:c)/x[D],R=0;R<x[D];R++){var Q={};m?(Q.startAngle=s+T*D,Q.endAngle=s+T*(D+1),Q.r0=n+w*R,Q.r=n+w*(R+1)):(Q.startAngle=s+w*R,Q.endAngle=s+w*(R+1),Q.r0=n+T*D,Q.r=n+T*(D+1)),Q.clockwise=a.clockwise,Q.cx=a.cx,Q.cy=a.cy,e.push(Q)}}function a2(a,r,e){for(var n=a.width,o=a.height,s=n>o,u=A_([n,o],s?0:1,r),c=s?"width":"height",v=s?"height":"width",d=s?"x":"y",m=s?"y":"x",x=a[c]/u.length,T=0;T<u.length;T++)for(var D=a[v]/u[T],w=0;w<u[T];w++){var R={};R[d]=T*x,R[m]=w*D,R[c]=x,R[v]=D,R.x+=a.x,R.y+=a.y,e.push(R)}}function D_(a,r,e,n){return a*n-e*r}function o2(a,r,e,n,o,s,u,c){var v=e-a,d=n-r,m=u-o,x=c-s,T=D_(m,x,v,d);if(Math.abs(T)<1e-6)return null;var D=a-o,w=r-s,R=D_(D,w,m,x)/T;return R<0||R>1?null:new qi.a(R*v+a,R*d+r)}function s2(a,r,e){var n=new qi.a;qi.a.sub(n,e,r),n.normalize();var o=new qi.a;qi.a.sub(o,a,r);var s=o.dot(n);return s}function hf(a,r){var e=a[a.length-1];e&&e[0]===r[0]&&e[1]===r[1]||a.push(r)}function l2(a,r,e){for(var n=a.length,o=[],s=0;s<n;s++){var u=a[s],c=a[(s+1)%n],v=o2(u[0],u[1],c[0],c[1],r.x,r.y,e.x,e.y);v&&o.push({projPt:s2(v,r,e),pt:v,idx:s})}if(o.length<2)return[{points:a},{points:a}];o.sort(function(Q,rt){return Q.projPt-rt.projPt});var d=o[0],m=o[o.length-1];if(m.idx<d.idx){var x=d;d=m,m=x}for(var T=[d.pt.x,d.pt.y],D=[m.pt.x,m.pt.y],w=[T],R=[D],s=d.idx+1;s<=m.idx;s++)hf(w,a[s].slice());hf(w,D),hf(w,T);for(var s=m.idx+1;s<=d.idx+n;s++)hf(R,a[s%n].slice());return hf(R,T),hf(R,D),[{points:w},{points:R}]}function E_(a){var r=a.points,e=[],n=[];Object(ju.d)(r,e,n);var o=new Ar.a(e[0],e[1],n[0]-e[0],n[1]-e[1]),s=o.width,u=o.height,c=o.x,v=o.y,d=new qi.a,m=new qi.a;return s>u?(d.x=m.x=c+s/2,d.y=v,m.y=v+u):(d.y=m.y=v+u/2,d.x=c,m.x=c+s),l2(r,d,m)}function Ud(a,r,e,n){if(e===1)n.push(r);else{var o=Math.floor(e/2),s=a(r);Ud(a,s[0],o,n),Ud(a,s[1],e-o,n)}return n}function u2(a,r){for(var e=[],n=0;n<r;n++)e.push(Object(qo.a)(a));return e}function f2(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function c2(a){for(var r=[],e=0;e<a.length;)r.push([a[e++],a[e++]]);return r}function h2(a,r){var e=[],n=a.shape,o;switch(a.type){case"rect":a2(n,r,e),o=Qr.a;break;case"sector":M_(n,r,e),o=In.a;break;case"circle":M_({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},r,e),o=In.a;break;default:var s=a.getComputedTransform(),u=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,c=Object(g.H)(i2(a.getUpdatedPathProxy(),u),function(rt){return c2(rt)}),v=c.length;if(v===0)Ud(E_,{points:c[0]},r,e);else if(v===r)for(var d=0;d<v;d++)e.push({points:c[d]});else{var m=0,x=Object(g.H)(c,function(rt){var pt=[],mt=[];Object(ju.d)(rt,pt,mt);var Dt=(mt[1]-pt[1])*(mt[0]-pt[0]);return m+=Dt,{poly:rt,area:Dt}});x.sort(function(rt,pt){return pt.area-rt.area});for(var T=r,d=0;d<v;d++){var D=x[d];if(T<=0)break;var w=d===v-1?T:Math.ceil(D.area/m*r);w<0||(Ud(E_,{points:D.poly},w,e),T-=w)}}o=_n.a;break}if(!o)return u2(a,r);for(var R=[],d=0;d<e.length;d++){var Q=new o;Q.setShape(e[d]),f2(a,Q),R.push(Q)}return R}function v2(a,r){var e=a.length,n=r.length;if(e===n)return[a,r];for(var o=[],s=[],u=e<n?a:r,c=Math.min(e,n),v=Math.abs(n-e)/6,d=(c-2)/6,m=Math.ceil(v/d)+1,x=[u[0],u[1]],T=v,D=2;D<c;){var w=u[D-2],R=u[D-1],Q=u[D++],rt=u[D++],pt=u[D++],mt=u[D++],Dt=u[D++],Lt=u[D++];if(T<=0){x.push(Q,rt,pt,mt,Dt,Lt);continue}for(var wt=Math.min(T,m-1)+1,Nt=1;Nt<=wt;Nt++){var Gt=Nt/wt;Object(Br.g)(w,Q,pt,Dt,Gt,o),Object(Br.g)(R,rt,mt,Lt,Gt,s),w=o[3],R=s[3],x.push(o[1],s[1],o[2],s[2],w,R),Q=o[5],rt=s[5],pt=o[6],mt=s[6]}T-=wt-1}return u===a?[x,r]:[a,x]}function C_(a,r){for(var e=a.length,n=a[e-2],o=a[e-1],s=[],u=0;u<r.length;)s[u++]=n,s[u++]=o;return s}function d2(a,r){for(var e,n,o,s=[],u=[],c=0;c<Math.max(a.length,r.length);c++){var v=a[c],d=r[c],m=void 0,x=void 0;v?d?(e=v2(v,d),m=e[0],x=e[1],n=m,o=x):(x=C_(o||v,v),m=v):(m=C_(n||d,d),x=d),s.push(m),u.push(x)}return[s,u]}function P_(a){for(var r=0,e=0,n=0,o=a.length,s=0,u=o-2;s<o;u=s,s+=2){var c=a[u],v=a[u+1],d=a[s],m=a[s+1],x=c*m-d*v;r+=x,e+=(c+d)*x,n+=(v+m)*x}return r===0?[a[0]||0,a[1]||0]:[e/r/3,n/r/3,r]}function p2(a,r,e,n){for(var o=(a.length-2)/6,s=Infinity,u=0,c=a.length,v=c-2,d=0;d<o;d++){for(var m=d*6,x=0,T=0;T<c;T+=2){var D=T===0?m:(m+T-2)%v+2,w=a[D]-e[0],R=a[D+1]-e[1],Q=r[T]-n[0],rt=r[T+1]-n[1],pt=Q-w,mt=rt-R;x+=pt*pt+mt*mt}x<s&&(s=x,u=d)}return u}function g2(a){for(var r=[],e=a.length,n=0;n<e;n+=2)r[n]=a[e-n-2],r[n+1]=a[e-n-1];return r}function m2(a,r,e,n){for(var o=[],s,u=0;u<a.length;u++){var c=a[u],v=r[u],d=P_(c),m=P_(v);s==null&&(s=d[2]<0!=m[2]<0);var x=[],T=[],D=0,w=Infinity,R=[],Q=c.length;s&&(c=g2(c));for(var rt=p2(c,v,d,m)*6,pt=Q-2,mt=0;mt<pt;mt+=2){var Dt=(rt+mt)%pt+2;x[mt+2]=c[Dt]-d[0],x[mt+3]=c[Dt+1]-d[1]}if(x[0]=c[rt]-d[0],x[1]=c[rt+1]-d[1],e>0)for(var Lt=n/e,wt=-n/2;wt<=n/2;wt+=Lt){for(var Nt=Math.sin(wt),Gt=Math.cos(wt),Kt=0,mt=0;mt<c.length;mt+=2){var te=x[mt],ne=x[mt+1],pe=v[mt]-m[0],me=v[mt+1]-m[1],xe=pe*Gt-me*Nt,_e=pe*Nt+me*Gt;R[mt]=xe,R[mt+1]=_e;var Ne=xe-te,Je=_e-ne;Kt+=Ne*Ne+Je*Je}if(Kt<w){w=Kt,D=wt;for(var Xe=0;Xe<R.length;Xe++)T[Xe]=R[Xe]}}else for(var or=0;or<Q;or+=2)T[or]=v[or]-m[0],T[or+1]=v[or+1]-m[1];o.push({from:x,to:T,fromCp:d,toCp:m,rotation:-D})}return o}function Hd(a){return a.__isCombineMorphing}function H2(a){return a.__morphT>=0}var w_="__mOriginal_";function Wd(a,r,e){var n=w_+r,o=a[n]||a[r];a[n]||(a[n]=a[r]);var s=e.replace,u=e.after,c=e.before;a[r]=function(){var v=arguments,d;return c&&c.apply(this,v),s?d=s.apply(this,v):d=o.apply(this,v),u&&u.apply(this,v),d}}function nh(a,r){var e=w_+r;a[e]&&(a[r]=a[e],a[e]=null)}function L_(a,r){for(var e=0;e<a.length;e++)for(var n=a[e],o=0;o<n.length;){var s=n[o],u=n[o+1];n[o++]=r[0]*s+r[2]*u+r[4],n[o++]=r[1]*s+r[3]*u+r[5]}}function I_(a,r){var e=a.getUpdatedPathProxy(),n=r.getUpdatedPathProxy(),o=d2($y(e),$y(n)),s=o[0],u=o[1],c=a.getComputedTransform(),v=r.getComputedTransform();function d(){this.transform=null}c&&L_(s,c),v&&L_(u,v),Wd(r,"updateTransform",{replace:d}),r.transform=null;var m=m2(s,u,10,Math.PI),x=[];Wd(r,"buildPath",{replace:function(T){for(var D=r.__morphT,w=1-D,R=[],Q=0;Q<m.length;Q++){var rt=m[Q],pt=rt.from,mt=rt.to,Dt=rt.rotation*D,Lt=rt.fromCp,wt=rt.toCp,Nt=Math.sin(Dt),Gt=Math.cos(Dt);Object(Rr.j)(R,Lt,wt,D);for(var Kt=0;Kt<pt.length;Kt+=2){var te=pt[Kt],ne=pt[Kt+1],pe=mt[Kt],me=mt[Kt+1],xe=te*w+pe*D,_e=ne*w+me*D;x[Kt]=xe*Gt-_e*Nt+R[0],x[Kt+1]=xe*Nt+_e*Gt+R[1]}var Ne=x[0],Je=x[1];T.moveTo(Ne,Je);for(var Kt=2;Kt<pt.length;){var pe=x[Kt++],me=x[Kt++],Xe=x[Kt++],or=x[Kt++],Tr=x[Kt++],Mr=x[Kt++];Ne===pe&&Je===me&&Xe===Tr&&or===Mr?T.lineTo(Tr,Mr):T.bezierCurveTo(pe,me,Xe,or,Tr,Mr),Ne=Tr,Je=Mr}}}})}function t0(a,r,e){if(!a||!r)return r;var n=e.done,o=e.during;I_(a,r),r.__morphT=0;function s(){nh(r,"buildPath"),nh(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},Object(g.i)({during:function(u){r.dirtyShape(),o&&o(u)},done:function(){s(),n&&n()}},e)),r}function y2(a,r,e,n,o,s){var u=16;a=o===e?0:Math.round(32767*(a-e)/(o-e)),r=s===n?0:Math.round(32767*(r-n)/(s-n));for(var c=0,v,d=(1<<u)/2;d>0;d/=2){var m=0,x=0;(a&d)>0&&(m=1),(r&d)>0&&(x=1),c+=d*d*(3*m^x),x===0&&(m===1&&(a=d-1-a,r=d-1-r),v=a,a=r,r=v)}return c}function kd(a){var r=Infinity,e=Infinity,n=-Infinity,o=-Infinity,s=Object(g.H)(a,function(c){var v=c.getBoundingRect(),d=c.getComputedTransform(),m=v.x+v.width/2+(d?d[4]:0),x=v.y+v.height/2+(d?d[5]:0);return r=Math.min(m,r),e=Math.min(x,e),n=Math.max(m,n),o=Math.max(x,o),[m,x]}),u=Object(g.H)(s,function(c,v){return{cp:c,z:y2(c[0],c[1],r,e,n,o),path:a[v]}});return u.sort(function(c,v){return c.z-v.z}).map(function(c){return c.path})}function R_(a){return h2(a.path,a.count)}function e0(){return{fromIndividuals:[],toIndividuals:[],count:0}}function x2(a,r,e){var n=[];function o(Lt){for(var wt=0;wt<Lt.length;wt++){var Nt=Lt[wt];Hd(Nt)?o(Nt.childrenRef()):Nt instanceof ot.b&&n.push(Nt)}}o(a);var s=n.length;if(!s)return e0();var u=e.dividePath||R_,c=u({path:r,count:s});if(c.length!==s)return console.error("Invalid morphing: unmatched splitted path"),e0();n=kd(n),c=kd(c);for(var v=e.done,d=e.during,m=e.individualDelay,x=new dt.c,T=0;T<s;T++){var D=n[T],w=c[T];w.parent=r,w.copyTransform(x),m||I_(D,w)}r.__isCombineMorphing=!0,r.childrenRef=function(){return c};function R(Lt){for(var wt=0;wt<c.length;wt++)c[wt].addSelfToZr(Lt)}Wd(r,"addSelfToZr",{after:function(Lt){R(Lt)}}),Wd(r,"removeSelfFromZr",{after:function(Lt){for(var wt=0;wt<c.length;wt++)c[wt].removeSelfFromZr(Lt)}});function Q(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,nh(r,"addSelfToZr"),nh(r,"removeSelfFromZr")}var rt=c.length;if(m)for(var pt=rt,mt=function(){pt--,pt===0&&(Q(),v&&v())},T=0;T<rt;T++){var Dt=m?Object(g.i)({delay:(e.delay||0)+m(T,rt,n[T],c[T]),done:mt},e):e;t0(n[T],c[T],Dt)}else r.__morphT=0,r.animateTo({__morphT:1},Object(g.i)({during:function(Lt){for(var wt=0;wt<rt;wt++){var Nt=c[wt];Nt.__morphT=r.__morphT,Nt.dirtyShape()}d&&d(Lt)},done:function(){Q();for(var Lt=0;Lt<a.length;Lt++)nh(a[Lt],"updateTransform");v&&v()}},e));return r.__zr&&R(r.__zr),{fromIndividuals:n,toIndividuals:c,count:rt}}function _2(a,r,e){var n=r.length,o=[],s=e.dividePath||R_;function u(D){for(var w=0;w<D.length;w++){var R=D[w];Hd(R)?u(R.childrenRef()):R instanceof ot.b&&o.push(R)}}if(Hd(a)){u(a.childrenRef());var c=o.length;if(c<n)for(var v=0,d=c;d<n;d++)o.push(Object(qo.a)(o[v++%c]));o.length=n}else{o=s({path:a,count:n});for(var m=a.getComputedTransform(),d=0;d<o.length;d++)o[d].setLocalTransform(m);if(o.length!==n)return console.error("Invalid morphing: unmatched splitted path"),e0()}o=kd(o),r=kd(r);for(var x=e.individualDelay,d=0;d<n;d++){var T=x?Object(g.i)({delay:(e.delay||0)+x(d,n,o[d],r[d])},e):e;t0(o[d],r[d],T)}return{fromIndividuals:o,toIndividuals:r,count:r.length}}function N_(a){return Object(g.t)(a[0])}function j_(a,r){for(var e=[],n=a.length,o=0;o<n;o++)e.push({one:a[o],many:[]});for(var o=0;o<r.length;o++){var s=r[o].length,u=void 0;for(u=0;u<s;u++)e[u%n].many.push(r[o][u])}for(var c=0,o=n-1;o>=0;o--)if(!e[o].many.length){var v=e[c].many;if(v.length<=1)if(c)c=0;else return e;var s=v.length,d=Math.ceil(s/2);e[o].many=v.slice(d,s),e[c].many=v.slice(0,d),c++}return e}var b2={clone:function(a){for(var r=[],e=1-Math.pow(1-a.path.style.opacity,1/a.count),n=0;n<a.count;n++){var o=Object(qo.a)(a.path);o.setStyle("opacity",e),r.push(o)}return r},split:null};function r0(a,r,e,n,o,s){if(!a.length||!r.length)return;var u=Object(cr.a)("update",n,o);if(!(u&&u.duration>0))return;var c=n.getModel("universalTransition").get("delay"),v=Object.assign({setToFinal:!0},u),d,m;N_(a)&&(d=a,m=r),N_(r)&&(d=r,m=a);function x(rt,pt,mt,Dt,Lt){var wt=rt.many,Nt=rt.one;if(wt.length===1&&!Lt){var Gt=pt?wt[0]:Nt,Kt=pt?Nt:wt[0];if(Hd(Gt))x({many:[Gt],one:Kt},!0,mt,Dt,!0);else{var te=c?Object(g.i)({delay:c(mt,Dt)},v):v;t0(Gt,Kt,te),s(Gt,Kt,Gt,Kt,te)}}else for(var ne=Object(g.i)({dividePath:b2[e],individualDelay:c&&function(Je,Xe,or,Tr){return c(Je+mt,Dt)}},v),pe=pt?x2(wt,Nt,ne):_2(Nt,wt,ne),me=pe.fromIndividuals,xe=pe.toIndividuals,_e=me.length,Ne=0;Ne<_e;Ne++){var te=c?Object(g.i)({delay:c(Ne,_e)},v):v;s(me[Ne],xe[Ne],pt?wt[Ne]:rt.one,pt?rt.one:wt[Ne],te)}}for(var T=d?d===a:a.length>r.length,D=d?j_(m,d):j_(T?r:a,[T?a:r]),w=0,R=0;R<D.length;R++)w+=D[R].many.length;for(var Q=0,R=0;R<D.length;R++)x(D[R],T,Q,w),Q+=D[R].many.length}function lu(a){if(!a)return[];if(Object(g.t)(a)){for(var r=[],e=0;e<a.length;e++)r.push(lu(a[e]));return r}var n=[];return a.traverse(function(o){o instanceof ot.b&&!o.disableMorphing&&!o.invisible&&!o.ignore&&n.push(o)}),n}var B_=1e4,S2=Object(Be.o)();function T2(a){for(var r=a.dimensions,e=0;e<r.length;e++){var n=a.getDimensionInfo(r[e]);if(n&&n.otherDims.itemGroupId===0)return r[e]}}function F_(a){var r=[];return Object(g.k)(a,function(e){var n=e.data;if(!(n.count()>B_))for(var o=n.getIndices(),s=T2(n),u=0;u<o.length;u++)r.push({data:n,dim:e.dim||s,divide:e.divide,dataIndex:u})}),r}function n0(a,r,e){a.traverse(function(n){n instanceof ot.b&&Object(cr.c)(n,{style:{opacity:0}},r,{dataIndex:e,isFrom:!0})})}function i0(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function vf(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function O2(a,r,e){var n=Object(cr.a)("update",e,r);n&&a.traverse(function(o){if(o instanceof Oo.c){var s=Object(cr.b)(o);s&&o.animateFrom({style:s},n)}})}function A2(a,r){var e=a.length;if(e!==r.length)return!1;for(var n=0;n<e;n++){var o=a[n],s=r[n];if(o.data.getId(o.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function z_(a,r,e){var n=F_(a),o=F_(r);function s(rt,pt,mt,Dt,Lt){(mt||rt)&&pt.animateFrom({style:mt&&mt!==rt?Object(g.m)(Object(g.m)({},mt.style),rt.style):rt.style},Lt)}function u(rt){for(var pt=0;pt<rt.length;pt++)if(rt[pt].dim)return rt[pt].dim}var c=u(n),v=u(o),d=!1;function m(rt,pt){return function(mt){var Dt=mt.data,Lt=mt.dataIndex;if(pt)return Dt.getId(Lt);var wt=Dt.hostModel&&Dt.hostModel.get("dataGroupId"),Nt=rt?c||v:v||c,Gt=Nt&&Dt.getDimensionInfo(Nt),Kt=Gt&&Gt.ordinalMeta;if(Gt){var te=Dt.get(Gt.name,Lt);return Kt&&Kt.categories[te]||te+""}var ne=Dt.getRawDataItem(Lt);return ne&&ne.groupId?ne.groupId+"":wt||Dt.getId(Lt)}}var x=A2(n,o),T={};if(!x)for(var D=0;D<o.length;D++){var w=o[D],R=w.data.getItemGraphicEl(w.dataIndex);R&&(T[R.id]=!0)}function Q(rt,pt){var mt=n[pt],Dt=o[rt],Lt=Dt.data.hostModel,wt=mt.data.getItemGraphicEl(mt.dataIndex),Nt=Dt.data.getItemGraphicEl(Dt.dataIndex);if(wt===Nt){Nt&&O2(Nt,Dt.dataIndex,Lt);return}wt&&T[wt.id]||Nt&&(vf(Nt),wt?(vf(wt),i0(wt),d=!0,r0(lu(wt),lu(Nt),Dt.divide,Lt,rt,s)):n0(Nt,Lt,rt))}new ea.a(n,o,m(!0,x),m(!1,x),null,"multiple").update(Q).updateManyToOne(function(rt,pt){var mt=o[rt],Dt=mt.data,Lt=Dt.hostModel,wt=Dt.getItemGraphicEl(mt.dataIndex),Nt=Object(g.n)(Object(g.H)(pt,function(Gt){return n[Gt].data.getItemGraphicEl(n[Gt].dataIndex)}),function(Gt){return Gt&&Gt!==wt&&!T[Gt.id]});wt&&(vf(wt),Nt.length?(Object(g.k)(Nt,function(Gt){vf(Gt),i0(Gt)}),d=!0,r0(lu(Nt),lu(wt),mt.divide,Lt,rt,s)):n0(wt,Lt,mt.dataIndex))}).updateOneToMany(function(rt,pt){var mt=n[pt],Dt=mt.data.getItemGraphicEl(mt.dataIndex);if(!(Dt&&T[Dt.id])){var Lt=Object(g.n)(Object(g.H)(rt,function(Nt){return o[Nt].data.getItemGraphicEl(o[Nt].dataIndex)}),function(Nt){return Nt&&Nt!==Dt}),wt=o[rt[0]].data.hostModel;Lt.length&&(Object(g.k)(Lt,function(Nt){return vf(Nt)}),Dt?(vf(Dt),i0(Dt),d=!0,r0(lu(Dt),lu(Lt),mt.divide,wt,rt[0],s)):Object(g.k)(Lt,function(Nt){return n0(Nt,wt,rt[0])}))}}).updateManyToMany(function(rt,pt){new ea.a(pt,rt,function(mt){return n[mt].data.getId(n[mt].dataIndex)},function(mt){return o[mt].data.getId(o[mt].dataIndex)}).update(function(mt,Dt){Q(rt[mt],pt[Dt])}).execute()}).execute(),d&&Object(g.k)(r,function(rt){var pt=rt.data,mt=pt.hostModel,Dt=mt&&e.getViewOfSeriesModel(mt),Lt=Object(cr.a)("update",mt,0);Dt&&mt.isAnimationEnabled()&&Lt&&Lt.duration>0&&Dt.group.traverse(function(wt){wt instanceof ot.b&&!wt.animators.length&&wt.animateFrom({style:{opacity:0}},Lt)})})}function V_(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function G_(a){return Object(g.t)(a)?a.sort().join(","):a}function gl(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function M2(a,r){var e=Object(g.f)(),n=Object(g.f)(),o=Object(g.f)();Object(g.k)(a.oldSeries,function(u,c){var v=a.oldData[c],d=V_(u),m=G_(d);n.set(m,v),Object(g.t)(d)&&Object(g.k)(d,function(x){o.set(x,{data:v,key:m})})});function s(u){e.get(u)&&Object($r.d)("Duplicated seriesKey in universalTransition "+u)}return Object(g.k)(r.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var c=u.getData(),v=V_(u),d=G_(v),m=n.get(d);if(m)e.set(d,{oldSeries:[{divide:gl(m),data:m}],newSeries:[{divide:gl(c),data:c}]});else if(Object(g.t)(v)){var x=[];Object(g.k)(v,function(w){var R=n.get(w);R&&x.push({divide:gl(R),data:R})}),x.length&&e.set(d,{oldSeries:x,newSeries:[{data:c,divide:gl(c)}]})}else{var T=o.get(v);if(T){var D=e.get(T.key);D||(D={oldSeries:[{data:T.data,divide:gl(T.data)}],newSeries:[]},e.set(T.key,D)),D.newSeries.push({data:c,divide:gl(c)})}}}}),e}function U_(a,r){for(var e=0;e<a.length;e++){var n=r.seriesIndex!=null&&r.seriesIndex===a[e].seriesIndex||r.seriesId!=null&&r.seriesId===a[e].id;if(n)return e}}function D2(a,r,e,n){var o=[],s=[];Object(g.k)(Object(Be.r)(a.from),function(u){var c=U_(r.oldSeries,u);c>=0&&o.push({data:r.oldData[c],divide:gl(r.oldData[c]),dim:u.dimension})}),Object(g.k)(Object(Be.r)(a.to),function(u){var c=U_(e.updatedSeries,u);if(c>=0){var v=e.updatedSeries[c].getData();s.push({data:v,divide:gl(v),dim:u.dimension})}}),o.length>0&&s.length>0&&z_(o,s,n)}function E2(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,e,n){Object(g.k)(Object(Be.r)(n.seriesTransition),function(o){Object(g.k)(Object(Be.r)(o.to),function(s){for(var u=n.updatedSeries,c=0;c<u.length;c++)(s.seriesIndex!=null&&s.seriesIndex===u[c].seriesIndex||s.seriesId!=null&&s.seriesId===u[c].id)&&(u[c][Mn.a]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,e,n){var o=S2(e);if(o.oldSeries&&n.updatedSeries&&n.optionChanged){var s=n.seriesTransition;if(s)Object(g.k)(Object(Be.r)(s),function(T){D2(T,o,n,e)});else{var u=M2(o,n);Object(g.k)(u.keys(),function(T){var D=u.get(T);z_(D.oldSeries,D.newSeries,e)})}Object(g.k)(n.updatedSeries,function(T){T[Mn.a]&&(T[Mn.a]=!1)})}for(var c=r.getSeries(),v=o.oldSeries=[],d=o.oldData=[],m=0;m<c.length;m++){var x=c[m].getData();x.count()<B_&&(v.push(c[m]),d.push(x))}})}var C2=b("ZEdI");Object(B.a)([k.a]),Object(B.a)([fu]),Object(B.a)([Ti,Ra,yr,dp,xh,Zp,Qf,ao,Gg,Yg,$g,kc,we,Mi,ib,cb,Pb,Vb,qb,sS,_S,aT]),Object(B.a)(ET),Object(B.a)(uO),Object(B.a)(Zh),Object(B.a)(DO),Object(B.a)(pd),Object(B.a)(RO),Object(B.a)(HO),Object(B.a)(XA),Object(B.a)(mM),Object(B.a)(Zc),Object(B.a)(BM),Object(B.a)(VM),Object(B.a)(nD),Object(B.a)(vD),Object(B.a)(bD),Object(B.a)(CD),Object(B.a)(HD),Object(B.a)(cE),Object(B.a)($x),Object(B.a)(r_),Object(B.a)(FE),Object(B.a)(y_),Object(B.a)(__),Object(B.a)(HE),Object(B.a)(r2),Object(B.a)(n2.a),Object(B.a)(E2),Object(B.a)(C2.a)},mSnZ:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=function(ft){Object(B.a)(ot,ft);function ot(){var gt=ft!==null&&ft.apply(this,arguments)||this;return gt.type="compound",gt}return ot.prototype._updatePathDirty=function(){for(var gt=this.shape.paths,lt=this.shapeChanged(),z=0;z<gt.length;z++)lt=lt||gt[z].shapeChanged();lt&&this.dirtyShape()},ot.prototype.beforeBrush=function(){this._updatePathDirty();for(var gt=this.shape.paths||[],lt=this.getGlobalScale(),z=0;z<gt.length;z++)gt[z].path||gt[z].createPathProxy(),gt[z].path.setScale(lt[0],lt[1],gt[z].segmentIgnoreThreshold)},ot.prototype.buildPath=function(gt,lt){for(var z=lt.paths||[],X=0;X<z.length;X++)z[X].buildPath(gt,z[X].shape,!0)},ot.prototype.afterBrush=function(){for(var gt=this.shape.paths||[],lt=0;lt<gt.length;lt++)gt[lt].pathUpdated()},ot.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),bt.b.prototype.getBoundingRect.call(this)},ot}(bt.b);nt.a=k},mjKY:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=function(){function ot(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return ot}(),ft=function(ot){Object(B.a)(gt,ot);function gt(lt){return ot.call(this,lt)||this}return gt.prototype.getDefaultShape=function(){return new k},gt.prototype.buildPath=function(lt,z){var X=.5522848,J=z.cx,at=z.cy,F=z.rx,Z=z.ry,W=F*X,ht=Z*X;lt.moveTo(J-F,at),lt.bezierCurveTo(J-F,at-ht,J-W,at-Z,J,at-Z),lt.bezierCurveTo(J+W,at-Z,J+F,at-ht,J+F,at),lt.bezierCurveTo(J+F,at+ht,J+W,at+Z,J,at+Z),lt.bezierCurveTo(J-W,at+Z,J-F,at+ht,J-F,at),lt.closePath()},gt}(bt.b);ft.prototype.type="ellipse",nt.a=ft},o7EO:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=b("bPXU");function bt(k,ft){for(var ot=0;ot<k.length;ot++)k[ot][1]||(k[ot][1]=k[ot][0]);return ft=ft||!1,function(gt,lt,z){for(var X={},J=0;J<k.length;J++){var at=k[J][1];if(!(lt&&B.r(lt,at)>=0||z&&B.r(z,at)<0)){var F=gt.getShallow(at,ft);F!=null&&(X[k[J][0]]=F)}}return X}}},oYrp:function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft});var B=b("IyL0"),bt=b("bPXU"),k=/cubic-bezier\(([0-9,\.e ]+)\)/;function ft(ot){var gt=ot&&k.exec(ot);if(gt){var lt=gt[1].split(","),z=+Object(bt.T)(lt[0]),X=+Object(bt.T)(lt[1]),J=+Object(bt.T)(lt[2]),at=+Object(bt.T)(lt[3]);if(isNaN(z+X+J+at))return;var F=[];return function(Z){return Z<=0?0:Z>=1?1:Object(B.f)(0,z,J,1,Z,F)&&Object(B.a)(0,X,at,1,F[0])}}}},pA6B:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt});var B=b("ZXNb");function bt(){var k=Object(B.o)();return function(ft){var ot=k(ft),gt=ft.pipelineContext,lt=!!ot.large,z=!!ot.progressiveRender,X=ot.large=!!(gt&&gt.large),J=ot.progressiveRender=!!(gt&&gt.progressiveRender);return(lt!==X||z!==J)&&"reset"}}},q1fN:function(je,nt,b){"use strict";var B=b("bPXU"),bt=b("J94c"),k=b("dk5l"),ft=b("PFVZ"),ot=b("ZXNb"),gt=b("JFDN"),lt=function(){function Y(K){this.coordSysDims=[],this.axisMap=Object(B.f)(),this.categoryAxisMap=Object(B.f)(),this.coordSysName=K}return Y}();function z(Y){var K=Y.get("coordinateSystem"),V=new lt(K),G=X[K];if(G)return G(Y,V,V.axisMap,V.categoryAxisMap),V}var X={cartesian2d:function(Y,K,V,G){var I=Y.getReferringComponents("xAxis",ot.b).models[0],A=Y.getReferringComponents("yAxis",ot.b).models[0];K.coordSysDims=["x","y"],V.set("x",I),V.set("y",A),J(I)&&(G.set("x",I),K.firstCategoryDimIndex=0),J(A)&&(G.set("y",A),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=1))},singleAxis:function(Y,K,V,G){var I=Y.getReferringComponents("singleAxis",ot.b).models[0];K.coordSysDims=["single"],V.set("single",I),J(I)&&(G.set("single",I),K.firstCategoryDimIndex=0)},polar:function(Y,K,V,G){var I=Y.getReferringComponents("polar",ot.b).models[0],A=I.findAxisModel("radiusAxis"),C=I.findAxisModel("angleAxis");K.coordSysDims=["radius","angle"],V.set("radius",A),V.set("angle",C),J(A)&&(G.set("radius",A),K.firstCategoryDimIndex=0),J(C)&&(G.set("angle",C),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=1))},geo:function(Y,K,V,G){K.coordSysDims=["lng","lat"]},parallel:function(Y,K,V,G){var I=Y.ecModel,A=I.getComponent("parallel",Y.get("parallelIndex")),C=K.coordSysDims=A.dimensions.slice();Object(B.k)(A.parallelAxisIndex,function(E,O){var M=I.getComponent("parallelAxis",E),L=C[O];V.set(L,M),J(M)&&(G.set(L,M),K.firstCategoryDimIndex==null&&(K.firstCategoryDimIndex=O))})}};function J(Y){return Y.get("type")==="category"}var at=b("iYbX"),F=b("70Nz"),Z=b("ZlUk"),W=b("BkaA");function ht(Y,K){var V=Y.get("coordinateSystem"),G=gt.a.get(V),I;return K&&K.coordSysDims&&(I=B.H(K.coordSysDims,function(A){var C={name:A},E=K.axisMap.get(A);if(E){var O=E.get("type");C.type=Object(ft.a)(O)}return C})),I||(I=G&&(G.getDimensionsInfo?G.getDimensionsInfo():G.dimensions.slice())||["x","y"]),I}function q(Y,K,V){var G,I;return V&&B.k(Y,function(A,C){var E=A.coordDim,O=V.categoryAxisMap.get(E);O&&(G==null&&(G=C),A.ordinalMeta=O.getOrdinalMeta(),K&&(A.createInvertedIndices=!0)),A.otherDims.itemName!=null&&(I=!0)}),!I&&G!=null&&(Y[G].otherDims.itemName=0),G}function g(Y,K,V){V=V||{};var G=K.getSourceManager(),I,A=!1;Y?(A=!0,I=Object(at.c)(Y)):(I=G.getSource(),A=I.sourceFormat===W.f);var C=z(K),E=ht(K,C),O=V.useEncodeDefaulter,M=B.w(O)?O:O?B.h(Z.c,E,K):null,L={coordDimensions:E,generateCoord:V.generateCoord,encodeDefine:K.getEncode(),encodeDefaulter:M,canOmitUnusedDimensions:!A},H=Object(k.b)(I,L),U=q(H.dimensions,V.createInvertedIndices,C),ct=A?null:G.getSharedDataStore(H),st=Object(F.a)(K,{schema:H,store:ct}),vt=new bt.a(H,K);vt.setCalculationInfo(st);var it=U!=null&&et(I)?function(dt,St,ut,yt){return yt===U?ut:this.defaultDimValueGetter(dt,St,ut,yt)}:null;return vt.hasItemOption=!1,vt.initData(A?I:ct,null,it),vt}function et(Y){if(Y.sourceFormat===W.f){var K=$(Y.data||[]);return!B.t(Object(ot.h)(K))}}function $(Y){for(var K=0;K<Y.length&&Y[K]==null;)K++;return Y[K]}var N=nt.a=g},qB7j:function(je,nt,b){"use strict";b.d(nt,"a",function(){return at}),b.d(nt,"b",function(){return Z}),b.d(nt,"d",function(){return W}),b.d(nt,"c",function(){return ht});var B=b("PWZQ"),bt=b("QO9Q"),k={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},ft={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}},ot=b("bPXU"),gt="ZH",lt="EN",z=lt,X={},J={},at=bt.a.domSupported?function(){var q=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return q.indexOf(gt)>-1?gt:z}():z;function F(q,g){q=q.toUpperCase(),J[q]=new B.a(g),X[q]=g}function Z(q){if(Object(ot.C)(q)){var g=X[q.toUpperCase()]||{};return q===gt||q===lt?Object(ot.d)(g):Object(ot.I)(Object(ot.d)(g),Object(ot.d)(X[z]),!1)}else return Object(ot.I)(Object(ot.d)(q),Object(ot.d)(X[z]),!1)}function W(q){return J[q]}function ht(){return J[z]}F(lt,k),F(gt,ft)},qQml:function(je,nt,b){"use strict";b.d(nt,"a",function(){return bt}),b.d(nt,"b",function(){return ft});var B=b("o7EO"),bt=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],k=Object(B.a)(bt),ft=function(){function ot(){}return ot.prototype.getLineStyle=function(gt){return k(this,gt)},ot}()},rU8e:function(je,nt,b){"use strict";var B=function(){function bt(k){this.colorStops=k||[]}return bt.prototype.addColorStop=function(k,ft){this.colorStops.push({offset:k,color:ft})},bt}();nt.a=B},ryx4:function(je,nt,b){"use strict";b.d(nt,"a",function(){return M});var B=b("c5Gk"),bt=b("v+az"),k=b("I0j4"),ft=b("4ZEG"),ot=b("IyL0");function gt(st,vt,it,dt,St,ut,yt,Ot,At,It,Ct){if(At===0)return!1;var Ft=At;if(Ct>vt+Ft&&Ct>dt+Ft&&Ct>ut+Ft&&Ct>Ot+Ft||Ct<vt-Ft&&Ct<dt-Ft&&Ct<ut-Ft&&Ct<Ot-Ft||It>st+Ft&&It>it+Ft&&It>St+Ft&&It>yt+Ft||It<st-Ft&&It<it-Ft&&It<St-Ft&&It<yt-Ft)return!1;var zt=ot.e(st,vt,it,dt,St,ut,yt,Ot,It,Ct,null);return zt<=Ft/2}var lt=b("cdJk"),z=b("BubE"),X=Math.PI*2;function J(st,vt,it,dt,St,ut,yt,Ot,At){if(yt===0)return!1;var It=yt;Ot-=st,At-=vt;var Ct=Math.sqrt(Ot*Ot+At*At);if(Ct-It>it||Ct+It<it)return!1;if(Math.abs(dt-St)%X<1e-4)return!0;if(ut){var Ft=dt;dt=Object(z.a)(St),St=Object(z.a)(Ft)}else dt=Object(z.a)(dt),St=Object(z.a)(St);dt>St&&(St+=X);var zt=Math.atan2(At,Ot);return zt<0&&(zt+=X),zt>=dt&&zt<=St||zt+X>=dt&&zt+X<=St}var at=b("/pJh"),F=k.a.CMD,Z=Math.PI*2,W=1e-4;function ht(st,vt){return Math.abs(st-vt)<W}var q=[-1,-1,-1],g=[-1,-1];function et(){var st=g[0];g[0]=g[1],g[1]=st}function $(st,vt,it,dt,St,ut,yt,Ot,At,It){if(It>vt&&It>dt&&It>ut&&It>Ot||It<vt&&It<dt&&It<ut&&It<Ot)return 0;var Ct=ot.f(vt,dt,ut,Ot,It,q);if(Ct===0)return 0;for(var Ft=0,zt=-1,Xt=void 0,ie=void 0,oe=0;oe<Ct;oe++){var he=q[oe],be=he===0||he===1?.5:1,Ce=ot.a(st,it,St,yt,he);Ce<At||(zt<0&&(zt=ot.c(vt,dt,ut,Ot,g),g[1]<g[0]&&zt>1&&et(),Xt=ot.a(vt,dt,ut,Ot,g[0]),zt>1&&(ie=ot.a(vt,dt,ut,Ot,g[1]))),zt===2?he<g[0]?Ft+=Xt<vt?be:-be:he<g[1]?Ft+=ie<Xt?be:-be:Ft+=Ot<ie?be:-be:he<g[0]?Ft+=Xt<vt?be:-be:Ft+=Ot<Xt?be:-be)}return Ft}function N(st,vt,it,dt,St,ut,yt,Ot){if(Ot>vt&&Ot>dt&&Ot>ut||Ot<vt&&Ot<dt&&Ot<ut)return 0;var At=ot.m(vt,dt,ut,Ot,q);if(At===0)return 0;var It=ot.j(vt,dt,ut);if(It>=0&&It<=1){for(var Ct=0,Ft=ot.h(vt,dt,ut,It),zt=0;zt<At;zt++){var Xt=q[zt]===0||q[zt]===1?.5:1,ie=ot.h(st,it,St,q[zt]);ie<yt||(q[zt]<It?Ct+=Ft<vt?Xt:-Xt:Ct+=ut<Ft?Xt:-Xt)}return Ct}else{var Xt=q[0]===0||q[0]===1?.5:1,ie=ot.h(st,it,St,q[0]);return ie<yt?0:ut<vt?Xt:-Xt}}function Y(st,vt,it,dt,St,ut,yt,Ot){if(Ot-=vt,Ot>it||Ot<-it)return 0;var At=Math.sqrt(it*it-Ot*Ot);q[0]=-At,q[1]=At;var It=Math.abs(dt-St);if(It<1e-4)return 0;if(It>=Z-1e-4){dt=0,St=Z;var Ct=ut?1:-1;return yt>=q[0]+st&&yt<=q[1]+st?Ct:0}if(dt>St){var Ft=dt;dt=St,St=Ft}dt<0&&(dt+=Z,St+=Z);for(var zt=0,Xt=0;Xt<2;Xt++){var ie=q[Xt];if(ie+st>yt){var oe=Math.atan2(Ot,ie),Ct=ut?1:-1;oe<0&&(oe=Z+oe),(oe>=dt&&oe<=St||oe+Z>=dt&&oe+Z<=St)&&(oe>Math.PI/2&&oe<Math.PI*1.5&&(Ct=-Ct),zt+=Ct)}}return zt}function K(st,vt,it,dt,St){for(var ut=st.data,yt=st.len(),Ot=0,At=0,It=0,Ct=0,Ft=0,zt,Xt,ie=0;ie<yt;){var oe=ut[ie++],he=ie===1;switch(oe===F.M&&ie>1&&(it||(Ot+=Object(at.a)(At,It,Ct,Ft,dt,St))),he&&(At=ut[ie],It=ut[ie+1],Ct=At,Ft=It),oe){case F.M:Ct=ut[ie++],Ft=ut[ie++],At=Ct,It=Ft;break;case F.L:if(it){if(ft.a(At,It,ut[ie],ut[ie+1],vt,dt,St))return!0}else Ot+=Object(at.a)(At,It,ut[ie],ut[ie+1],dt,St)||0;At=ut[ie++],It=ut[ie++];break;case F.C:if(it){if(gt(At,It,ut[ie++],ut[ie++],ut[ie++],ut[ie++],ut[ie],ut[ie+1],vt,dt,St))return!0}else Ot+=$(At,It,ut[ie++],ut[ie++],ut[ie++],ut[ie++],ut[ie],ut[ie+1],dt,St)||0;At=ut[ie++],It=ut[ie++];break;case F.Q:if(it){if(lt.a(At,It,ut[ie++],ut[ie++],ut[ie],ut[ie+1],vt,dt,St))return!0}else Ot+=N(At,It,ut[ie++],ut[ie++],ut[ie],ut[ie+1],dt,St)||0;At=ut[ie++],It=ut[ie++];break;case F.A:var be=ut[ie++],Ce=ut[ie++],Fe=ut[ie++],Bt=ut[ie++],Tt=ut[ie++],Mt=ut[ie++];ie+=1;var Ut=!!(1-ut[ie++]);zt=Math.cos(Tt)*Fe+be,Xt=Math.sin(Tt)*Bt+Ce,he?(Ct=zt,Ft=Xt):Ot+=Object(at.a)(At,It,zt,Xt,dt,St);var se=(dt-be)*Bt/Fe+be;if(it){if(J(be,Ce,Bt,Tt,Tt+Mt,Ut,vt,se,St))return!0}else Ot+=Y(be,Ce,Bt,Tt,Tt+Mt,Ut,se,St);At=Math.cos(Tt+Mt)*Fe+be,It=Math.sin(Tt+Mt)*Bt+Ce;break;case F.R:Ct=At=ut[ie++],Ft=It=ut[ie++];var ge=ut[ie++],He=ut[ie++];if(zt=Ct+ge,Xt=Ft+He,it){if(ft.a(Ct,Ft,zt,Ft,vt,dt,St)||ft.a(zt,Ft,zt,Xt,vt,dt,St)||ft.a(zt,Xt,Ct,Xt,vt,dt,St)||ft.a(Ct,Xt,Ct,Ft,vt,dt,St))return!0}else Ot+=Object(at.a)(zt,Ft,zt,Xt,dt,St),Ot+=Object(at.a)(Ct,Xt,Ct,Ft,dt,St);break;case F.Z:if(it){if(ft.a(At,It,Ct,Ft,vt,dt,St))return!0}else Ot+=Object(at.a)(At,It,Ct,Ft,dt,St);At=Ct,It=Ft;break}}return!it&&!ht(It,Ft)&&(Ot+=Object(at.a)(At,It,Ct,Ft,dt,St)||0),Ot!==0}function V(st,vt,it){return K(st,0,!1,vt,it)}function G(st,vt,it,dt){return K(st,vt,!0,it,dt)}var I=b("bPXU"),A=b("Xy3h"),C=b("y9SG"),E=b("teyC"),O=b("eASH"),M=Object(I.i)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},bt.b),L={style:Object(I.i)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},bt.a.style)},H=O.a.concat(["invisible","culling","z","z2","zlevel","parent"]),U=function(st){Object(B.a)(vt,st);function vt(it){return st.call(this,it)||this}return vt.prototype.update=function(){var it=this;st.prototype.update.call(this);var dt=this.style;if(dt.decal){var St=this._decalEl=this._decalEl||new vt;St.buildPath===vt.prototype.buildPath&&(St.buildPath=function(At){it.buildPath(At,it.shape)}),St.silent=!0;var ut=St.style;for(var yt in dt)ut[yt]!==dt[yt]&&(ut[yt]=dt[yt]);ut.fill=dt.fill?dt.decal:null,ut.decal=null,ut.shadowColor=null,dt.strokeFirst&&(ut.stroke=null);for(var Ot=0;Ot<H.length;++Ot)St[H[Ot]]=this[H[Ot]];St.__dirty|=E.a}else this._decalEl&&(this._decalEl=null)},vt.prototype.getDecalElement=function(){return this._decalEl},vt.prototype._init=function(it){var dt=Object(I.F)(it);this.shape=this.getDefaultShape();var St=this.getDefaultStyle();St&&this.useStyle(St);for(var ut=0;ut<dt.length;ut++){var yt=dt[ut],Ot=it[yt];yt==="style"?this.style?Object(I.m)(this.style,Ot):this.useStyle(Ot):yt==="shape"?Object(I.m)(this.shape,Ot):st.prototype.attrKV.call(this,yt,Ot)}this.style||this.useStyle({})},vt.prototype.getDefaultStyle=function(){return null},vt.prototype.getDefaultShape=function(){return{}},vt.prototype.canBeInsideText=function(){return this.hasFill()},vt.prototype.getInsideTextFill=function(){var it=this.style.fill;if(it!=="none"){if(Object(I.C)(it)){var dt=Object(A.lum)(it,0);return dt>.5?C.a:dt>.2?C.c:C.d}else if(it)return C.d}return C.a},vt.prototype.getInsideTextStroke=function(it){var dt=this.style.fill;if(Object(I.C)(dt)){var St=this.__zr,ut=!!(St&&St.isDarkMode()),yt=Object(A.lum)(it,0)<C.b;if(ut===yt)return dt}},vt.prototype.buildPath=function(it,dt,St){},vt.prototype.pathUpdated=function(){this.__dirty&=~E.b},vt.prototype.getUpdatedPathProxy=function(it){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,it),this.path},vt.prototype.createPathProxy=function(){this.path=new k.a(!1)},vt.prototype.hasStroke=function(){var it=this.style,dt=it.stroke;return!(dt==null||dt==="none"||!(it.lineWidth>0))},vt.prototype.hasFill=function(){var it=this.style,dt=it.fill;return dt!=null&&dt!=="none"},vt.prototype.getBoundingRect=function(){var it=this._rect,dt=this.style,St=!it;if(St){var ut=!1;this.path||(ut=!0,this.createPathProxy());var yt=this.path;(ut||this.__dirty&E.b)&&(yt.beginPath(),this.buildPath(yt,this.shape,!1),this.pathUpdated()),it=yt.getBoundingRect()}if(this._rect=it,this.hasStroke()&&this.path&&this.path.len()>0){var Ot=this._rectStroke||(this._rectStroke=it.clone());if(this.__dirty||St){Ot.copy(it);var At=dt.strokeNoScale?this.getLineScale():1,It=dt.lineWidth;if(!this.hasFill()){var Ct=this.strokeContainThreshold;It=Math.max(It,Ct==null?4:Ct)}At>1e-10&&(Ot.width+=It/At,Ot.height+=It/At,Ot.x-=It/At/2,Ot.y-=It/At/2)}return Ot}return it},vt.prototype.contain=function(it,dt){var St=this.transformCoordToLocal(it,dt),ut=this.getBoundingRect(),yt=this.style;if(it=St[0],dt=St[1],ut.contain(it,dt)){var Ot=this.path;if(this.hasStroke()){var At=yt.lineWidth,It=yt.strokeNoScale?this.getLineScale():1;if(It>1e-10&&(this.hasFill()||(At=Math.max(At,this.strokeContainThreshold)),G(Ot,At/It,it,dt)))return!0}if(this.hasFill())return V(Ot,it,dt)}return!1},vt.prototype.dirtyShape=function(){this.__dirty|=E.b,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},vt.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},vt.prototype.animateShape=function(it){return this.animate("shape",it)},vt.prototype.updateDuringAnimation=function(it){it==="style"?this.dirtyStyle():it==="shape"?this.dirtyShape():this.markRedraw()},vt.prototype.attrKV=function(it,dt){it==="shape"?this.setShape(dt):st.prototype.attrKV.call(this,it,dt)},vt.prototype.setShape=function(it,dt){var St=this.shape;return St||(St=this.shape={}),typeof it=="string"?St[it]=dt:Object(I.m)(St,it),this.dirtyShape(),this},vt.prototype.shapeChanged=function(){return!!(this.__dirty&E.b)},vt.prototype.createStyle=function(it){return Object(I.g)(M,it)},vt.prototype._innerSaveToNormal=function(it){st.prototype._innerSaveToNormal.call(this,it);var dt=this._normalState;it.shape&&!dt.shape&&(dt.shape=Object(I.m)({},this.shape))},vt.prototype._applyStateObj=function(it,dt,St,ut,yt,Ot){st.prototype._applyStateObj.call(this,it,dt,St,ut,yt,Ot);var At=!(dt&&ut),It;if(dt&&dt.shape?yt?ut?It=dt.shape:(It=Object(I.m)({},St.shape),Object(I.m)(It,dt.shape)):(It=Object(I.m)({},ut?this.shape:St.shape),Object(I.m)(It,dt.shape)):At&&(It=St.shape),It)if(yt){this.shape=Object(I.m)({},this.shape);for(var Ct={},Ft=Object(I.F)(It),zt=0;zt<Ft.length;zt++){var Xt=Ft[zt];typeof It[Xt]=="object"?this.shape[Xt]=It[Xt]:Ct[Xt]=It[Xt]}this._transitionState(it,{shape:Ct},Ot)}else this.shape=It,this.dirtyShape()},vt.prototype._mergeStates=function(it){for(var dt=st.prototype._mergeStates.call(this,it),St,ut=0;ut<it.length;ut++){var yt=it[ut];yt.shape&&(St=St||{},this._mergeStyle(St,yt.shape))}return St&&(dt.shape=St),dt},vt.prototype.getAnimationStyleProps=function(){return L},vt.prototype.isZeroArea=function(){return!1},vt.extend=function(it){var dt=function(ut){Object(B.a)(yt,ut);function yt(Ot){var At=ut.call(this,Ot)||this;return it.init&&it.init.call(At,Ot),At}return yt.prototype.getDefaultStyle=function(){return Object(I.d)(it.style)},yt.prototype.getDefaultShape=function(){return Object(I.d)(it.shape)},yt}(vt);for(var St in it)typeof it[St]=="function"&&(dt.prototype[St]=it[St]);return dt},vt.initDefaultProps=function(){var it=vt.prototype;it.type="path",it.strokeContainThreshold=5,it.segmentIgnoreThreshold=0,it.subPixelOptimize=!1,it.autoBatch=!1,it.__dirty=E.a|E.c|E.b}(),vt}(bt.c),ct=nt.b=U},s9sj:function(je,nt,b){"use strict";b.d(nt,"a",function(){return k});var B=b("FLFE");function bt(ft,ot,gt,lt){var z=[],X=[],J=[],at=[],F,Z,W,ht;if(lt){W=[Infinity,Infinity],ht=[-Infinity,-Infinity];for(var q=0,g=ft.length;q<g;q++)Object(B.l)(W,W,ft[q]),Object(B.k)(ht,ht,ft[q]);Object(B.l)(W,W,lt[0]),Object(B.k)(ht,ht,lt[1])}for(var q=0,g=ft.length;q<g;q++){var et=ft[q];if(gt)F=ft[q?q-1:g-1],Z=ft[(q+1)%g];else if(q===0||q===g-1){z.push(Object(B.c)(ft[q]));continue}else F=ft[q-1],Z=ft[q+1];Object(B.q)(X,Z,F),Object(B.n)(X,X,ot);var $=Object(B.h)(et,F),N=Object(B.h)(et,Z),Y=$+N;Y!==0&&($/=Y,N/=Y),Object(B.n)(J,X,-$),Object(B.n)(at,X,N);var K=Object(B.a)([],et,J),V=Object(B.a)([],et,at);lt&&(Object(B.k)(K,K,W),Object(B.l)(K,K,ht),Object(B.k)(V,V,W),Object(B.l)(V,V,ht)),z.push(K),z.push(V)}return gt&&z.push(z.shift()),z}function k(ft,ot,gt){var lt=ot.smooth,z=ot.points;if(z&&z.length>=2){if(lt){var X=bt(z,lt,gt,ot.smoothConstraint);ft.moveTo(z[0][0],z[0][1]);for(var J=z.length,at=0;at<(gt?J:J-1);at++){var F=X[at*2],Z=X[at*2+1],W=z[(at+1)%J];ft.bezierCurveTo(F[0],F[1],Z[0],Z[1],W[0],W[1])}}else{ft.moveTo(z[0][0],z[0][1]);for(var at=1,ht=z.length;at<ht;at++)ft.lineTo(z[at][0],z[at][1])}gt&&ft.closePath()}}},skrI:function(je,nt,b){"use strict";b.d(nt,"a",function(){return z}),b.d(nt,"b",function(){return X});var B=b("bPXU"),bt=b("iYbX"),k=b("BkaA"),ft=b("ZlUk"),ot=b("LiF8"),gt=b("zm8D"),lt=b("Jx7q"),z=function(){function F(Z){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=Z}return F.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},F.prototype._setLocalSource=function(Z,W){this._sourceList=Z,this._upstreamSignList=W,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},F.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},F.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},F.prototype._createSource=function(){this._setLocalSource([],[]);var Z=this._sourceHost,W=this._getUpstreamSourceManagers(),ht=!!W.length,q,g;if(J(Z)){var et=Z,$=void 0,N=void 0,Y=void 0;if(ht){var K=W[0];K.prepareSource(),Y=K.getSource(),$=Y.data,N=Y.sourceFormat,g=[K._getVersionSign()]}else $=et.get("data",!0),N=Object(B.E)($)?k.g:k.f,g=[];var V=this._getSourceMetaRawOption()||{},G=Y&&Y.metaRawOption||{},I=Object(B.P)(V.seriesLayoutBy,G.seriesLayoutBy)||null,A=Object(B.P)(V.sourceHeader,G.sourceHeader),C=Object(B.P)(V.dimensions,G.dimensions),E=I!==G.seriesLayoutBy||!!A!=!!G.sourceHeader||C;q=E?[Object(bt.b)($,{seriesLayoutBy:I,sourceHeader:A,dimensions:C},N)]:[]}else{var O=Z;if(ht){var M=this._applyTransform(W);q=M.sourceList,g=M.upstreamSignList}else{var L=O.get("source",!0);q=[Object(bt.b)(L,this._getSourceMetaRawOption(),null)],g=[]}}this._setLocalSource(q,g)},F.prototype._applyTransform=function(Z){var W=this._sourceHost,ht=W.get("transform",!0),q=W.get("fromTransformResult",!0);if(q!=null){var g="";Z.length!==1&&at(g)}var et,$=[],N=[];return Object(B.k)(Z,function(Y){Y.prepareSource();var K=Y.getSource(q||0),V="";q!=null&&!K&&at(V),$.push(K),N.push(Y._getVersionSign())}),ht?et=Object(ot.a)(ht,$,{datasetIndex:W.componentIndex}):q!=null&&(et=[Object(bt.a)($[0])]),{sourceList:et,upstreamSignList:N}},F.prototype._isDirty=function(){if(this._dirty)return!0;for(var Z=this._getUpstreamSourceManagers(),W=0;W<Z.length;W++){var ht=Z[W];if(ht._isDirty()||this._upstreamSignList[W]!==ht._getVersionSign())return!0}},F.prototype.getSource=function(Z){Z=Z||0;var W=this._sourceList[Z];if(!W){var ht=this._getUpstreamSourceManagers();return ht[0]&&ht[0].getSource(Z)}return W},F.prototype.getSharedDataStore=function(Z){var W=Z.makeStoreSchema();return this._innerGetDataStore(W.dimensions,Z.source,W.hash)},F.prototype._innerGetDataStore=function(Z,W,ht){var q=0,g=this._storeList,et=g[q];et||(et=g[q]={});var $=et[ht];if(!$){var N=this._getUpstreamSourceManagers()[0];J(this._sourceHost)&&N?$=N._innerGetDataStore(Z,W,ht):($=new gt.b,$.initData(new lt.a(W,Z.length),Z)),et[ht]=$}return $},F.prototype._getUpstreamSourceManagers=function(){var Z=this._sourceHost;if(J(Z)){var W=Object(ft.f)(Z);return W?[W.getSourceManager()]:[]}else return Object(B.H)(Object(ft.e)(Z),function(ht){return ht.getSourceManager()})},F.prototype._getSourceMetaRawOption=function(){var Z=this._sourceHost,W,ht,q;if(J(Z))W=Z.get("seriesLayoutBy",!0),ht=Z.get("sourceHeader",!0),q=Z.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var g=Z;W=g.get("seriesLayoutBy",!0),ht=g.get("sourceHeader",!0),q=g.get("dimensions",!0)}return{seriesLayoutBy:W,sourceHeader:ht,dimensions:q}},F}();function X(F){var Z=F.option.transform;Z&&Object(B.R)(F.option.transform)}function J(F){return F.mainType==="series"}function at(F){throw new Error(F)}},syXZ:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=b("s9sj"),ft=function(){function gt(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return gt}(),ot=function(gt){Object(B.a)(lt,gt);function lt(z){return gt.call(this,z)||this}return lt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},lt.prototype.getDefaultShape=function(){return new ft},lt.prototype.buildPath=function(z,X){k.a(z,X,!1)},lt}(bt.b);ot.prototype.type="polyline",nt.a=ot},"t+3m":function(je,nt,b){"use strict";b.d(nt,"b",function(){return F}),b.d(nt,"a",function(){return Z}),b.d(nt,"c",function(){return W}),b.d(nt,"d",function(){return ht});var B=b("c5Gk"),bt=b("uSNo"),k=b("FLFE"),ft=b("v6/b"),ot=b("OjCH"),gt=b("bPXU"),lt=[];function z(q,g){for(var et=0;et<q.length;et++)k.b(q[et],q[et],g)}function X(q,g,et,$){for(var N=0;N<q.length;N++){var Y=q[N];$&&(Y=$.project(Y)),Y&&isFinite(Y[0])&&isFinite(Y[1])&&(k.l(g,g,Y),k.k(et,et,Y))}}function J(q){for(var g=0,et=0,$=0,N=q.length,Y=q[N-1][0],K=q[N-1][1],V=0;V<N;V++){var G=q[V][0],I=q[V][1],A=Y*I-G*K;g+=A,et+=(Y+G)*A,$+=(K+I)*A,Y=G,K=I}return g?[et/g/3,$/g/3,g]:[q[0][0]||0,q[0][1]||0]}var at=function(){function q(g){this.name=g}return q.prototype.setCenter=function(g){this._center=g},q.prototype.getCenter=function(){var g=this._center;return g||(g=this._center=this.calcCenter()),g},q}(),F=function(){function q(g,et){this.type="polygon",this.exterior=g,this.interiors=et}return q}(),Z=function(){function q(g){this.type="linestring",this.points=g}return q}(),W=function(q){Object(B.a)(g,q);function g(et,$,N){var Y=q.call(this,et)||this;return Y.type="geoJSON",Y.geometries=$,Y._center=N&&[N[0],N[1]],Y}return g.prototype.calcCenter=function(){for(var et=this.geometries,$,N=0,Y=0;Y<et.length;Y++){var K=et[Y],V=K.exterior,G=V&&V.length;G>N&&($=K,N=G)}if($)return J($.exterior);var I=this.getBoundingRect();return[I.x+I.width/2,I.y+I.height/2]},g.prototype.getBoundingRect=function(et){var $=this._rect;if($&&!et)return $;var N=[Infinity,Infinity],Y=[-Infinity,-Infinity],K=this.geometries;return Object(gt.k)(K,function(V){V.type==="polygon"?X(V.exterior,N,Y,et):Object(gt.k)(V.points,function(G){X(G,N,Y,et)})}),isFinite(N[0])&&isFinite(N[1])&&isFinite(Y[0])&&isFinite(Y[1])||(N[0]=N[1]=Y[0]=Y[1]=0),$=new bt.a(N[0],N[1],Y[0]-N[0],Y[1]-N[1]),et||(this._rect=$),$},g.prototype.contain=function(et){var $=this.getBoundingRect(),N=this.geometries;if(!$.contain(et[0],et[1]))return!1;t:for(var Y=0,K=N.length;Y<K;Y++){var V=N[Y];if(V.type==="polygon"){var G=V.exterior,I=V.interiors;if(ft.a(G,et[0],et[1])){for(var A=0;A<(I?I.length:0);A++)if(ft.a(I[A],et[0],et[1]))continue t;return!0}}}return!1},g.prototype.transformTo=function(et,$,N,Y){var K=this.getBoundingRect(),V=K.width/K.height;N?Y||(Y=N/V):N=V*Y;for(var G=new bt.a(et,$,N,Y),I=K.calculateTransform(G),A=this.geometries,C=0;C<A.length;C++){var E=A[C];E.type==="polygon"?(z(E.exterior,I),Object(gt.k)(E.interiors,function(O){z(O,I)})):Object(gt.k)(E.points,function(O){z(O,I)})}K=this._rect,K.copy(G),this._center=[K.x+K.width/2,K.y+K.height/2]},g.prototype.cloneShallow=function(et){et==null&&(et=this.name);var $=new g(et,this.geometries,this._center);return $._rect=this._rect,$.transformTo=null,$},g}(at),ht=function(q){Object(B.a)(g,q);function g(et,$){var N=q.call(this,et)||this;return N.type="geoSVG",N._elOnlyForCalculate=$,N}return g.prototype.calcCenter=function(){for(var et=this._elOnlyForCalculate,$=et.getBoundingRect(),N=[$.x+$.width/2,$.y+$.height/2],Y=ot.d(lt),K=et;K&&!K.isGeoSVGGraphicRoot;)ot.f(Y,K.getLocalTransform(),Y),K=K.parent;return ot.e(Y,Y),k.b(N,N,Y),N},g}(at)},tMOh:function(je,nt,b){"use strict";b.d(nt,"c",function(){return lt}),b.d(nt,"b",function(){return z}),b.d(nt,"a",function(){return at});var B=b("QO9Q"),bt=Math.log(2);function k(F,Z,W,ht,q,g){var et=ht+"-"+q,$=F.length;if(g.hasOwnProperty(et))return g[et];if(Z===1){var N=Math.round(Math.log((1<<$)-1&~q)/bt);return F[W][N]}for(var Y=ht|1<<W,K=W+1;ht&1<<K;)K++;for(var V=0,G=0,I=0;G<$;G++){var A=1<<G;A&q||(V+=(I%2?-1:1)*F[W][G]*k(F,Z-1,K,Y,q|A,g),I++)}return g[et]=V,V}function ft(F,Z){var W=[[F[0],F[1],1,0,0,0,-Z[0]*F[0],-Z[0]*F[1]],[0,0,0,F[0],F[1],1,-Z[1]*F[0],-Z[1]*F[1]],[F[2],F[3],1,0,0,0,-Z[2]*F[2],-Z[2]*F[3]],[0,0,0,F[2],F[3],1,-Z[3]*F[2],-Z[3]*F[3]],[F[4],F[5],1,0,0,0,-Z[4]*F[4],-Z[4]*F[5]],[0,0,0,F[4],F[5],1,-Z[5]*F[4],-Z[5]*F[5]],[F[6],F[7],1,0,0,0,-Z[6]*F[6],-Z[6]*F[7]],[0,0,0,F[6],F[7],1,-Z[7]*F[6],-Z[7]*F[7]]],ht={},q=k(W,8,0,0,0,ht);if(q!==0){for(var g=[],et=0;et<8;et++)for(var $=0;$<8;$++)g[$]==null&&(g[$]=0),g[$]+=((et+$)%2?-1:1)*k(W,7,et===0?1:0,1<<et,1<<$,ht)/q*Z[et];return function(N,Y,K){var V=Y*g[6]+K*g[7]+1;N[0]=(Y*g[0]+K*g[1]+g[2])/V,N[1]=(Y*g[3]+K*g[4]+g[5])/V}}}var ot="___zrEVENTSAVED",gt=[];function lt(F,Z,W,ht,q){return z(gt,Z,ht,q,!0)&&z(F,W,gt[0],gt[1])}function z(F,Z,W,ht,q){if(Z.getBoundingClientRect&&B.a.domSupported&&!at(Z)){var g=Z[ot]||(Z[ot]={}),et=X(Z,g),$=J(et,g,q);if($)return $(F,W,ht),!0}return!1}function X(F,Z){var W=Z.markers;if(W)return W;W=Z.markers=[];for(var ht=["left","right"],q=["top","bottom"],g=0;g<4;g++){var et=document.createElement("div"),$=et.style,N=g%2,Y=(g>>1)%2;$.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",ht[N]+":0",q[Y]+":0",ht[1-N]+":auto",q[1-Y]+":auto",""].join("!important;"),F.appendChild(et),W.push(et)}return W}function J(F,Z,W){for(var ht=W?"invTrans":"trans",q=Z[ht],g=Z.srcCoords,et=[],$=[],N=!0,Y=0;Y<4;Y++){var K=F[Y].getBoundingClientRect(),V=2*Y,G=K.left,I=K.top;et.push(G,I),N=N&&g&&G===g[V]&&I===g[V+1],$.push(F[Y].offsetLeft,F[Y].offsetTop)}return N&&q?q:(Z.srcCoords=et,Z[ht]=W?ft($,et):ft(et,$))}function at(F){return F.nodeName.toUpperCase()==="CANVAS"}},teyC:function(je,nt,b){"use strict";b.d(nt,"a",function(){return B}),b.d(nt,"c",function(){return bt}),b.d(nt,"b",function(){return k});var B=1,bt=2,k=4},u1in:function(je,nt,b){"use strict";b.d(nt,"g",function(){return X}),b.d(nt,"e",function(){return J}),b.d(nt,"c",function(){return at}),b.d(nt,"b",function(){return F}),b.d(nt,"d",function(){return $}),b.d(nt,"f",function(){return N}),b.d(nt,"h",function(){return Y}),b.d(nt,"a",function(){return K});var B=b("To/5"),bt=b("bPXU"),k=b("GUjm"),ft=b("ZXNb"),ot=b("eV5c"),gt={};function lt(V,G){for(var I=0;I<k.g.length;I++){var A=k.g[I],C=G[A],E=V.ensureState(A);E.style=E.style||{},E.style.text=C}var O=V.currentStates.slice();V.clearStates(!0),V.setStyle({text:G.normal}),V.useStates(O,!0)}function z(V,G,I){var A=V.labelFetcher,C=V.labelDataIndex,E=V.labelDimIndex,O=G.normal,M;A&&(M=A.getFormattedLabel(C,"normal",null,E,O&&O.get("formatter"),I!=null?{interpolatedValue:I}:null)),M==null&&(M=Object(bt.w)(V.defaultText)?V.defaultText(C,V,I):V.defaultText);for(var L={normal:M},H=0;H<k.g.length;H++){var U=k.g[H],ct=G[U];L[U]=Object(bt.P)(A?A.getFormattedLabel(C,U,null,E,ct&&ct.get("formatter")):null,M)}return L}function X(V,G,I,A){I=I||gt;for(var C=V instanceof B.a,E=!1,O=0;O<k.a.length;O++){var M=G[k.a[O]];if(M&&M.getShallow("show")){E=!0;break}}var L=C?V:V.getTextContent();if(E){C||(L||(L=new B.a,V.setTextContent(L)),V.stateProxy&&(L.stateProxy=V.stateProxy));var H=z(I,G),U=G.normal,ct=!!U.getShallow("show"),st=at(U,A&&A.normal,I,!1,!C);st.text=H.normal,C||V.setTextConfig(F(U,I,!1));for(var O=0;O<k.g.length;O++){var vt=k.g[O],M=G[vt];if(M){var it=L.ensureState(vt),dt=!!Object(bt.P)(M.getShallow("show"),ct);if(dt!==ct&&(it.ignore=!dt),it.style=at(M,A&&A[vt],I,!0,!C),it.style.text=H[vt],!C){var St=V.ensureState(vt);St.textConfig=F(M,I,!0)}}}L.silent=!!U.getShallow("silent"),L.style.x!=null&&(st.x=L.style.x),L.style.y!=null&&(st.y=L.style.y),L.ignore=!ct,L.useStyle(st),L.dirty(),I.enableTextSetter&&(N(L).setLabelText=function(ut){var yt=z(I,G,ut);lt(L,yt)})}else L&&(L.ignore=!0);V.dirty()}function J(V,G){G=G||"label";for(var I={normal:V.getModel(G)},A=0;A<k.g.length;A++){var C=k.g[A];I[C]=V.getModel([C,G])}return I}function at(V,G,I,A,C){var E={};return Z(E,V,I,A,C),G&&Object(bt.m)(E,G),E}function F(V,G,I){G=G||{};var A={},C,E=V.getShallow("rotate"),O=Object(bt.P)(V.getShallow("distance"),I?null:5),M=V.getShallow("offset");return C=V.getShallow("position")||(I?null:"inside"),C==="outside"&&(C=G.defaultOutsidePosition||"top"),C!=null&&(A.position=C),M!=null&&(A.offset=M),E!=null&&(E*=Math.PI/180,A.rotation=E),O!=null&&(A.distance=O),A.outsideFill=V.get("color")==="inherit"?G.inheritColor||null:"auto",A}function Z(V,G,I,A,C){I=I||gt;var E=G.ecModel,O=E&&E.option.textStyle,M=W(G),L;if(M){L={};for(var H in M)if(M.hasOwnProperty(H)){var U=G.getModel(["rich",H]);et(L[H]={},U,O,I,A,C,!1,!0)}}L&&(V.rich=L);var ct=G.get("overflow");ct&&(V.overflow=ct);var st=G.get("minMargin");st!=null&&(V.margin=st),et(V,G,O,I,A,C,!0,!1)}function W(V){for(var G;V&&V!==V.ecModel;){var I=(V.option||gt).rich;if(I){G=G||{};for(var A=Object(bt.F)(I),C=0;C<A.length;C++){var E=A[C];G[E]=1}}V=V.parentModel}return G}var ht=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],q=["align","lineHeight","width","height","tag","verticalAlign"],g=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function et(V,G,I,A,C,E,O,M){I=!C&&I||gt;var L=A&&A.inheritColor,H=G.getShallow("color"),U=G.getShallow("textBorderColor"),ct=Object(bt.P)(G.getShallow("opacity"),I.opacity);(H==="inherit"||H==="auto")&&(L?H=L:H=null),(U==="inherit"||U==="auto")&&(L?U=L:U=null),E||(H=H||I.color,U=U||I.textBorderColor),H!=null&&(V.fill=H),U!=null&&(V.stroke=U);var st=Object(bt.P)(G.getShallow("textBorderWidth"),I.textBorderWidth);st!=null&&(V.lineWidth=st);var vt=Object(bt.P)(G.getShallow("textBorderType"),I.textBorderType);vt!=null&&(V.lineDash=vt);var it=Object(bt.P)(G.getShallow("textBorderDashOffset"),I.textBorderDashOffset);it!=null&&(V.lineDashOffset=it),!C&&ct==null&&!M&&(ct=A&&A.defaultOpacity),ct!=null&&(V.opacity=ct),!C&&!E&&V.fill==null&&A.inheritColor&&(V.fill=A.inheritColor);for(var dt=0;dt<ht.length;dt++){var St=ht[dt],ut=Object(bt.P)(G.getShallow(St),I[St]);ut!=null&&(V[St]=ut)}for(var dt=0;dt<q.length;dt++){var St=q[dt],ut=G.getShallow(St);ut!=null&&(V[St]=ut)}if(V.verticalAlign==null){var yt=G.getShallow("baseline");yt!=null&&(V.verticalAlign=yt)}if(!O||!A.disableBox){for(var dt=0;dt<g.length;dt++){var St=g[dt],ut=G.getShallow(St);ut!=null&&(V[St]=ut)}var Ot=G.getShallow("borderType");Ot!=null&&(V.borderDash=Ot),(V.backgroundColor==="auto"||V.backgroundColor==="inherit")&&L&&(V.backgroundColor=L),(V.borderColor==="auto"||V.borderColor==="inherit")&&L&&(V.borderColor=L)}}function $(V,G){var I=G&&G.getModel("textStyle");return Object(bt.T)([V.fontStyle||I&&I.getShallow("fontStyle")||"",V.fontWeight||I&&I.getShallow("fontWeight")||"",(V.fontSize||I&&I.getShallow("fontSize")||12)+"px",V.fontFamily||I&&I.getShallow("fontFamily")||"sans-serif"].join(" "))}var N=Object(ft.o)();function Y(V,G,I,A){if(!!V){var C=N(V);C.prevValue=C.value,C.value=I;var E=G.normal;C.valueAnimation=E.get("valueAnimation"),C.valueAnimation&&(C.precision=E.get("precision"),C.defaultInterpolatedText=A,C.statesModels=G)}}function K(V,G,I,A,C){var E=N(V);if(!E.valueAnimation||E.prevValue===E.value)return;var O=E.defaultInterpolatedText,M=Object(bt.P)(E.interpolatedValue,E.prevValue),L=E.value;function H(U){var ct=Object(ft.k)(I,E.precision,M,L,U);E.interpolatedValue=U===1?null:ct;var st=z({labelDataIndex:G,labelFetcher:C,defaultText:O?O(ct):ct+""},E.statesModels,ct);lt(V,st)}V.percent=0,(E.prevValue==null?ot.c:ot.h)(V,{percent:1},A,G,null,H)}},uSNo:function(je,nt,b){"use strict";var B=b("OjCH"),bt=b("iAFd"),k=Math.min,ft=Math.max,ot=new bt.a,gt=new bt.a,lt=new bt.a,z=new bt.a,X=new bt.a,J=new bt.a,at=function(){function F(Z,W,ht,q){ht<0&&(Z=Z+ht,ht=-ht),q<0&&(W=W+q,q=-q),this.x=Z,this.y=W,this.width=ht,this.height=q}return F.prototype.union=function(Z){var W=k(Z.x,this.x),ht=k(Z.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=ft(Z.x+Z.width,this.x+this.width)-W:this.width=Z.width,isFinite(this.y)&&isFinite(this.height)?this.height=ft(Z.y+Z.height,this.y+this.height)-ht:this.height=Z.height,this.x=W,this.y=ht},F.prototype.applyTransform=function(Z){F.applyTransform(this,this,Z)},F.prototype.calculateTransform=function(Z){var W=this,ht=Z.width/W.width,q=Z.height/W.height,g=B.c();return B.i(g,g,[-W.x,-W.y]),B.h(g,g,[ht,q]),B.i(g,g,[Z.x,Z.y]),g},F.prototype.intersect=function(Z,W){if(!Z)return!1;Z instanceof F||(Z=F.create(Z));var ht=this,q=ht.x,g=ht.x+ht.width,et=ht.y,$=ht.y+ht.height,N=Z.x,Y=Z.x+Z.width,K=Z.y,V=Z.y+Z.height,G=!(g<N||Y<q||$<K||V<et);if(W){var I=Infinity,A=0,C=Math.abs(g-N),E=Math.abs(Y-q),O=Math.abs($-K),M=Math.abs(V-et),L=Math.min(C,E),H=Math.min(O,M);g<N||Y<q?L>A&&(A=L,C<E?bt.a.set(J,-C,0):bt.a.set(J,E,0)):L<I&&(I=L,C<E?bt.a.set(X,C,0):bt.a.set(X,-E,0)),$<K||V<et?H>A&&(A=H,O<M?bt.a.set(J,0,-O):bt.a.set(J,0,M)):L<I&&(I=L,O<M?bt.a.set(X,0,O):bt.a.set(X,0,-M))}return W&&bt.a.copy(W,G?X:J),G},F.prototype.contain=function(Z,W){var ht=this;return Z>=ht.x&&Z<=ht.x+ht.width&&W>=ht.y&&W<=ht.y+ht.height},F.prototype.clone=function(){return new F(this.x,this.y,this.width,this.height)},F.prototype.copy=function(Z){F.copy(this,Z)},F.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},F.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},F.prototype.isZero=function(){return this.width===0||this.height===0},F.create=function(Z){return new F(Z.x,Z.y,Z.width,Z.height)},F.copy=function(Z,W){Z.x=W.x,Z.y=W.y,Z.width=W.width,Z.height=W.height},F.applyTransform=function(Z,W,ht){if(!ht){Z!==W&&F.copy(Z,W);return}if(ht[1]<1e-5&&ht[1]>-1e-5&&ht[2]<1e-5&&ht[2]>-1e-5){var q=ht[0],g=ht[3],et=ht[4],$=ht[5];Z.x=W.x*q+et,Z.y=W.y*g+$,Z.width=W.width*q,Z.height=W.height*g,Z.width<0&&(Z.x+=Z.width,Z.width=-Z.width),Z.height<0&&(Z.y+=Z.height,Z.height=-Z.height);return}ot.x=lt.x=W.x,ot.y=z.y=W.y,gt.x=z.x=W.x+W.width,gt.y=lt.y=W.y+W.height,ot.transform(ht),z.transform(ht),gt.transform(ht),lt.transform(ht),Z.x=k(ot.x,gt.x,lt.x,z.x),Z.y=k(ot.y,gt.y,lt.y,z.y);var N=ft(ot.x,gt.x,lt.x,z.x),Y=ft(ot.y,gt.y,lt.y,z.y);Z.width=N-Z.x,Z.height=Y-Z.y},F}();nt.a=at},"v+az":function(je,nt,b){"use strict";b.d(nt,"b",function(){return lt}),b.d(nt,"a",function(){return z});var B=b("c5Gk"),bt=b("iXYE"),k=b("uSNo"),ft=b("bPXU"),ot=b("teyC"),gt="__zr_style_"+Math.round(Math.random()*10),lt={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},z={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};lt[gt]=!0;var X=["z","z2","invisible"],J=["invisible"],at=function(ht){Object(B.a)(q,ht);function q(g){return ht.call(this,g)||this}return q.prototype._init=function(g){for(var et=Object(ft.F)(g),$=0;$<et.length;$++){var N=et[$];N==="style"?this.useStyle(g[N]):ht.prototype.attrKV.call(this,N,g[N])}this.style||this.useStyle({})},q.prototype.beforeBrush=function(){},q.prototype.afterBrush=function(){},q.prototype.innerBeforeBrush=function(){},q.prototype.innerAfterBrush=function(){},q.prototype.shouldBePainted=function(g,et,$,N){var Y=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&W(this,g,et)||Y&&!Y[0]&&!Y[3])return!1;if($&&this.__clipPaths){for(var K=0;K<this.__clipPaths.length;++K)if(this.__clipPaths[K].isZeroArea())return!1}if(N&&this.parent)for(var V=this.parent;V;){if(V.ignore)return!1;V=V.parent}return!0},q.prototype.contain=function(g,et){return this.rectContain(g,et)},q.prototype.traverse=function(g,et){g.call(et,this)},q.prototype.rectContain=function(g,et){var $=this.transformCoordToLocal(g,et),N=this.getBoundingRect();return N.contain($[0],$[1])},q.prototype.getPaintRect=function(){var g=this._paintRect;if(!this._paintRect||this.__dirty){var et=this.transform,$=this.getBoundingRect(),N=this.style,Y=N.shadowBlur||0,K=N.shadowOffsetX||0,V=N.shadowOffsetY||0;g=this._paintRect||(this._paintRect=new k.a(0,0,0,0)),et?k.a.applyTransform(g,$,et):g.copy($),(Y||K||V)&&(g.width+=Y*2+Math.abs(K),g.height+=Y*2+Math.abs(V),g.x=Math.min(g.x,g.x+K-Y),g.y=Math.min(g.y,g.y+V-Y));var G=this.dirtyRectTolerance;g.isZero()||(g.x=Math.floor(g.x-G),g.y=Math.floor(g.y-G),g.width=Math.ceil(g.width+1+G*2),g.height=Math.ceil(g.height+1+G*2))}return g},q.prototype.setPrevPaintRect=function(g){g?(this._prevPaintRect=this._prevPaintRect||new k.a(0,0,0,0),this._prevPaintRect.copy(g)):this._prevPaintRect=null},q.prototype.getPrevPaintRect=function(){return this._prevPaintRect},q.prototype.animateStyle=function(g){return this.animate("style",g)},q.prototype.updateDuringAnimation=function(g){g==="style"?this.dirtyStyle():this.markRedraw()},q.prototype.attrKV=function(g,et){g!=="style"?ht.prototype.attrKV.call(this,g,et):this.style?this.setStyle(et):this.useStyle(et)},q.prototype.setStyle=function(g,et){return typeof g=="string"?this.style[g]=et:Object(ft.m)(this.style,g),this.dirtyStyle(),this},q.prototype.dirtyStyle=function(g){g||this.markRedraw(),this.__dirty|=ot.c,this._rect&&(this._rect=null)},q.prototype.dirty=function(){this.dirtyStyle()},q.prototype.styleChanged=function(){return!!(this.__dirty&ot.c)},q.prototype.styleUpdated=function(){this.__dirty&=~ot.c},q.prototype.createStyle=function(g){return Object(ft.g)(lt,g)},q.prototype.useStyle=function(g){g[gt]||(g=this.createStyle(g)),this.__inHover?this.__hoverStyle=g:this.style=g,this.dirtyStyle()},q.prototype.isStyleObject=function(g){return g[gt]},q.prototype._innerSaveToNormal=function(g){ht.prototype._innerSaveToNormal.call(this,g);var et=this._normalState;g.style&&!et.style&&(et.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(g,et,X)},q.prototype._applyStateObj=function(g,et,$,N,Y,K){ht.prototype._applyStateObj.call(this,g,et,$,N,Y,K);var V=!(et&&N),G;if(et&&et.style?Y?N?G=et.style:(G=this._mergeStyle(this.createStyle(),$.style),this._mergeStyle(G,et.style)):(G=this._mergeStyle(this.createStyle(),N?this.style:$.style),this._mergeStyle(G,et.style)):V&&(G=$.style),G)if(Y){var I=this.style;if(this.style=this.createStyle(V?{}:I),V)for(var A=Object(ft.F)(I),C=0;C<A.length;C++){var E=A[C];E in G&&(G[E]=G[E],this.style[E]=I[E])}for(var O=Object(ft.F)(G),C=0;C<O.length;C++){var E=O[C];this.style[E]=this.style[E]}this._transitionState(g,{style:G},K,this.getAnimationStyleProps())}else this.useStyle(G);for(var M=this.__inHover?J:X,C=0;C<M.length;C++){var E=M[C];et&&et[E]!=null?this[E]=et[E]:V&&$[E]!=null&&(this[E]=$[E])}},q.prototype._mergeStates=function(g){for(var et=ht.prototype._mergeStates.call(this,g),$,N=0;N<g.length;N++){var Y=g[N];Y.style&&($=$||{},this._mergeStyle($,Y.style))}return $&&(et.style=$),et},q.prototype._mergeStyle=function(g,et){return Object(ft.m)(g,et),g},q.prototype.getAnimationStyleProps=function(){return z},q.initDefaultProps=function(){var g=q.prototype;g.type="displayable",g.invisible=!1,g.z=0,g.z2=0,g.zlevel=0,g.culling=!1,g.cursor="pointer",g.rectHover=!1,g.incremental=!1,g._rect=null,g.dirtyRectTolerance=0,g.__dirty=ot.a|ot.c}(),q}(bt.a),F=new k.a(0,0,0,0),Z=new k.a(0,0,0,0);function W(ht,q,g){return F.copy(ht.getBoundingRect()),ht.transform&&F.applyTransform(ht.transform),Z.width=q,Z.height=g,!F.intersect(Z)}nt.c=at},"v6/b":function(je,nt,b){"use strict";b.d(nt,"a",function(){return ft});var B=b("/pJh"),bt=1e-8;function k(ot,gt){return Math.abs(ot-gt)<bt}function ft(ot,gt,lt){var z=0,X=ot[0];if(!X)return!1;for(var J=1;J<ot.length;J++){var at=ot[J];z+=Object(B.a)(X[0],X[1],at[0],at[1],gt,lt),X=at}var F=ot[0];return(!k(X[0],F[0])||!k(X[1],F[1]))&&(z+=Object(B.a)(X[0],X[1],F[0],F[1],gt,lt)),z!==0}},vliS:function(je,nt,b){"use strict";b.d(nt,"a",function(){return at});var B=b("XZR5"),bt=b("U3bR"),k=b("IsQr"),ft=b("/PGm"),ot=b("I79D"),gt=b("bPXU"),lt=b("WsGc"),z=b("08kU"),X=[],J={registerPreprocessor:B.l,registerProcessor:B.m,registerPostInit:B.j,registerPostUpdate:B.k,registerUpdateLifecycle:B.o,registerAction:B.e,registerCoordinateSystem:B.f,registerLayout:B.g,registerVisual:B.p,registerTransform:B.n,registerLoading:B.h,registerMap:B.i,registerImpl:lt.b,PRIORITY:B.a,ComponentModel:ft.a,ComponentView:bt.a,SeriesModel:ot.b,ChartView:k.a,registerComponentModel:function(F){ft.a.registerClass(F)},registerComponentView:function(F){bt.a.registerClass(F)},registerSeriesModel:function(F){ot.b.registerClass(F)},registerChartView:function(F){k.a.registerClass(F)},registerSubTypeDefaulter:function(F,Z){ft.a.registerSubTypeDefaulter(F,Z)},registerPainter:function(F,Z){Object(z.registerPainter)(F,Z)}};function at(F){if(Object(gt.t)(F)){Object(gt.k)(F,function(Z){at(Z)});return}Object(gt.r)(X,F)>=0||(X.push(F),Object(gt.w)(F)&&(F={install:F}),F.install(J))}},wHov:function(je,nt,b){"use strict";b.d(nt,"a",function(){return k}),b.d(nt,"b",function(){return ot});var B=b("bPXU"),bt=b("ZXNb");function k(gt,lt){function z(X,J){var at=[];return X.eachComponent({mainType:"series",subType:gt,query:J},function(F){at.push(F.seriesIndex)}),at}Object(B.k)([[gt+"ToggleSelect","toggleSelect"],[gt+"Select","select"],[gt+"UnSelect","unselect"]],function(X){lt(X[0],function(J,at,F){J=Object(B.m)({},J),F.dispatchAction(Object(B.m)(J,{type:X[1],seriesIndex:z(at,J)}))})})}function ft(gt,lt,z,X,J){var at=gt+lt;z.isSilent(at)||X.eachComponent({mainType:"series",subType:"pie"},function(F){for(var Z=F.seriesIndex,W=F.option.selectedMap,ht=J.selected,q=0;q<ht.length;q++)if(ht[q].seriesIndex===Z){var g=F.getData(),et=Object(bt.u)(g,J.fromActionPayload);z.trigger(at,{type:at,seriesId:F.id,name:Object(B.t)(et)?g.getName(et[0]):g.getName(et),selected:Object(B.C)(W)?W:Object(B.m)({},W)})}})}function ot(gt,lt,z){gt.on("selectchanged",function(X){var J=z.getModel();X.isFromClick?(ft("map","selectchanged",lt,J,X),ft("pie","selectchanged",lt,J,X)):X.fromAction==="select"?(ft("map","selected",lt,J,X),ft("pie","selected",lt,J,X)):X.fromAction==="unselect"&&(ft("map","unselected",lt,J,X),ft("pie","unselected",lt,J,X))})}},xrhB:function(je,nt,b){"use strict";b.d(nt,"a",function(){return gt}),b.d(nt,"d",function(){return lt}),b.d(nt,"b",function(){return z}),b.d(nt,"c",function(){return X}),b.d(nt,"e",function(){return J});var B=b("bPXU"),bt=b("ZXNb"),k=b("iYbX"),ft=Object(bt.o)(),ot={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},gt=function(){function at(F){this.dimensions=F.dimensions,this._dimOmitted=F.dimensionOmitted,this.source=F.source,this._fullDimCount=F.fullDimensionCount,this._updateDimOmitted(F.dimensionOmitted)}return at.prototype.isDimensionOmitted=function(){return this._dimOmitted},at.prototype._updateDimOmitted=function(F){this._dimOmitted=F,!!F&&(this._dimNameMap||(this._dimNameMap=X(this.source)))},at.prototype.getSourceDimensionIndex=function(F){return Object(B.P)(this._dimNameMap.get(F),-1)},at.prototype.getSourceDimension=function(F){var Z=this.source.dimensionsDefine;if(Z)return Z[F]},at.prototype.makeStoreSchema=function(){for(var F=this._fullDimCount,Z=Object(k.f)(this.source),W=!J(F),ht="",q=[],g=0,et=0;g<F;g++){var $=void 0,N=void 0,Y=void 0,K=this.dimensions[et];if(K&&K.storeDimIndex===g)$=Z?K.name:null,N=K.type,Y=K.ordinalMeta,et++;else{var V=this.getSourceDimension(g);V&&($=Z?V.name:null,N=V.type)}q.push({property:$,type:N,ordinalMeta:Y}),Z&&$!=null&&(!K||!K.isCalculationCoord)&&(ht+=W?$.replace(/\`/g,"`1").replace(/\$/g,"`2"):$),ht+="$",ht+=ot[N]||"f",Y&&(ht+=Y.uid),ht+="$"}var G=this.source,I=[G.seriesLayoutBy,G.startIndex,ht].join("$$");return{dimensions:q,hash:I}},at.prototype.makeOutputDimensionNames=function(){for(var F=[],Z=0,W=0;Z<this._fullDimCount;Z++){var ht=void 0,q=this.dimensions[W];if(q&&q.storeDimIndex===Z)q.isCalculationCoord||(ht=q.name),W++;else{var g=this.getSourceDimension(Z);g&&(ht=g.name)}F.push(ht)}return F},at.prototype.appendCalculationDimension=function(F){this.dimensions.push(F),F.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},at}();function lt(at){return at instanceof gt}function z(at){for(var F=Object(B.f)(),Z=0;Z<(at||[]).length;Z++){var W=at[Z],ht=Object(B.A)(W)?W.name:W;ht!=null&&F.get(ht)==null&&F.set(ht,Z)}return F}function X(at){var F=ft(at);return F.dimNameMap||(F.dimNameMap=z(at.dimensionsDefine))}function J(at){return at>30}},y9SG:function(je,nt,b){"use strict";b.d(nt,"e",function(){return ft}),b.d(nt,"b",function(){return ot}),b.d(nt,"a",function(){return gt}),b.d(nt,"d",function(){return lt}),b.d(nt,"c",function(){return z});var B=b("QO9Q"),bt=1;B.a.hasGlobalWindow&&(bt=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var k=0,ft=bt,ot=.4,gt="#333",lt="#ccc",z="#eee"},ykqw:function(je,nt,b){"use strict";nt.byteLength=z,nt.toByteArray=J,nt.fromByteArray=Z;for(var B=[],bt=[],k=typeof Uint8Array!="undefined"?Uint8Array:Array,ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot=0,gt=ft.length;ot<gt;++ot)B[ot]=ft[ot],bt[ft.charCodeAt(ot)]=ot;bt["-".charCodeAt(0)]=62,bt["_".charCodeAt(0)]=63;function lt(W){var ht=W.length;if(ht%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=W.indexOf("=");q===-1&&(q=ht);var g=q===ht?0:4-q%4;return[q,g]}function z(W){var ht=lt(W),q=ht[0],g=ht[1];return(q+g)*3/4-g}function X(W,ht,q){return(ht+q)*3/4-q}function J(W){var ht,q=lt(W),g=q[0],et=q[1],$=new k(X(W,g,et)),N=0,Y=et>0?g-4:g,K;for(K=0;K<Y;K+=4)ht=bt[W.charCodeAt(K)]<<18|bt[W.charCodeAt(K+1)]<<12|bt[W.charCodeAt(K+2)]<<6|bt[W.charCodeAt(K+3)],$[N++]=ht>>16&255,$[N++]=ht>>8&255,$[N++]=ht&255;return et===2&&(ht=bt[W.charCodeAt(K)]<<2|bt[W.charCodeAt(K+1)]>>4,$[N++]=ht&255),et===1&&(ht=bt[W.charCodeAt(K)]<<10|bt[W.charCodeAt(K+1)]<<4|bt[W.charCodeAt(K+2)]>>2,$[N++]=ht>>8&255,$[N++]=ht&255),$}function at(W){return B[W>>18&63]+B[W>>12&63]+B[W>>6&63]+B[W&63]}function F(W,ht,q){for(var g,et=[],$=ht;$<q;$+=3)g=(W[$]<<16&16711680)+(W[$+1]<<8&65280)+(W[$+2]&255),et.push(at(g));return et.join("")}function Z(W){for(var ht,q=W.length,g=q%3,et=[],$=16383,N=0,Y=q-g;N<Y;N+=$)et.push(F(W,N,N+$>Y?Y:N+$));return g===1?(ht=W[q-1],et.push(B[ht>>2]+B[ht<<4&63]+"==")):g===2&&(ht=(W[q-2]<<8)+W[q-1],et.push(B[ht>>10]+B[ht>>4&63]+B[ht<<2&63]+"=")),et.join("")}},yuVo:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("ryx4"),k=function(){function ot(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return ot}(),ft=function(ot){Object(B.a)(gt,ot);function gt(lt){return ot.call(this,lt)||this}return gt.prototype.getDefaultShape=function(){return new k},gt.prototype.buildPath=function(lt,z){var X=z.cx,J=z.cy,at=Math.PI*2;lt.moveTo(X+z.r,J),lt.arc(X,J,z.r,0,at,!1),lt.moveTo(X+z.r0,J),lt.arc(X,J,z.r0,0,at,!0)},gt}(bt.b);ft.prototype.type="ring",nt.a=ft},z80y:function(je,nt,b){"use strict";b.d(nt,"a",function(){return at});var B=32,bt=7,k=256;function ft(F){for(var Z=0;F>=B;)Z|=F&1,F>>=1;return F+Z}function ot(F,Z,W,ht){var q=Z+1;if(q===W)return 1;if(ht(F[q++],F[Z])<0){for(;q<W&&ht(F[q],F[q-1])<0;)q++;gt(F,Z,q)}else for(;q<W&&ht(F[q],F[q-1])>=0;)q++;return q-Z}function gt(F,Z,W){for(W--;Z<W;){var ht=F[Z];F[Z++]=F[W],F[W--]=ht}}function lt(F,Z,W,ht,q){for(ht===Z&&ht++;ht<W;ht++){for(var g=F[ht],et=Z,$=ht,N;et<$;)N=et+$>>>1,q(g,F[N])<0?$=N:et=N+1;var Y=ht-et;switch(Y){case 3:F[et+3]=F[et+2];case 2:F[et+2]=F[et+1];case 1:F[et+1]=F[et];break;default:for(;Y>0;)F[et+Y]=F[et+Y-1],Y--}F[et]=g}}function z(F,Z,W,ht,q,g){var et=0,$=0,N=1;if(g(F,Z[W+q])>0){for($=ht-q;N<$&&g(F,Z[W+q+N])>0;)et=N,N=(N<<1)+1,N<=0&&(N=$);N>$&&(N=$),et+=q,N+=q}else{for($=q+1;N<$&&g(F,Z[W+q-N])<=0;)et=N,N=(N<<1)+1,N<=0&&(N=$);N>$&&(N=$);var Y=et;et=q-N,N=q-Y}for(et++;et<N;){var K=et+(N-et>>>1);g(F,Z[W+K])>0?et=K+1:N=K}return N}function X(F,Z,W,ht,q,g){var et=0,$=0,N=1;if(g(F,Z[W+q])<0){for($=q+1;N<$&&g(F,Z[W+q-N])<0;)et=N,N=(N<<1)+1,N<=0&&(N=$);N>$&&(N=$);var Y=et;et=q-N,N=q-Y}else{for($=ht-q;N<$&&g(F,Z[W+q+N])>=0;)et=N,N=(N<<1)+1,N<=0&&(N=$);N>$&&(N=$),et+=q,N+=q}for(et++;et<N;){var K=et+(N-et>>>1);g(F,Z[W+K])<0?N=K:et=K+1}return N}function J(F,Z){var W=bt,ht=0,q=k,g=0,et,$,N=0;ht=F.length,ht<2*k&&(q=ht>>>1);var Y=[];g=ht<120?5:ht<1542?10:ht<119151?19:40,et=[],$=[];function K(E,O){et[N]=E,$[N]=O,N+=1}function V(){for(;N>1;){var E=N-2;if(E>=1&&$[E-1]<=$[E]+$[E+1]||E>=2&&$[E-2]<=$[E]+$[E-1])$[E-1]<$[E+1]&&E--;else if($[E]>$[E+1])break;I(E)}}function G(){for(;N>1;){var E=N-2;E>0&&$[E-1]<$[E+1]&&E--,I(E)}}function I(E){var O=et[E],M=$[E],L=et[E+1],H=$[E+1];$[E]=M+H,E===N-3&&(et[E+1]=et[E+2],$[E+1]=$[E+2]),N--;var U=X(F[L],F,O,M,0,Z);O+=U,M-=U,M!==0&&(H=z(F[O+M-1],F,L,H,H-1,Z),H!==0&&(M<=H?A(O,M,L,H):C(O,M,L,H)))}function A(E,O,M,L){var H=0;for(H=0;H<O;H++)Y[H]=F[E+H];var U=0,ct=M,st=E;if(F[st++]=F[ct++],--L==0){for(H=0;H<O;H++)F[st+H]=Y[U+H];return}if(O===1){for(H=0;H<L;H++)F[st+H]=F[ct+H];F[st+L]=Y[U];return}for(var vt=W,it,dt,St;;){it=0,dt=0,St=!1;do if(Z(F[ct],Y[U])<0){if(F[st++]=F[ct++],dt++,it=0,--L==0){St=!0;break}}else if(F[st++]=Y[U++],it++,dt=0,--O==1){St=!0;break}while((it|dt)<vt);if(St)break;do{if(it=X(F[ct],Y,U,O,0,Z),it!==0){for(H=0;H<it;H++)F[st+H]=Y[U+H];if(st+=it,U+=it,O-=it,O<=1){St=!0;break}}if(F[st++]=F[ct++],--L==0){St=!0;break}if(dt=z(Y[U],F,ct,L,0,Z),dt!==0){for(H=0;H<dt;H++)F[st+H]=F[ct+H];if(st+=dt,ct+=dt,L-=dt,L===0){St=!0;break}}if(F[st++]=Y[U++],--O==1){St=!0;break}vt--}while(it>=bt||dt>=bt);if(St)break;vt<0&&(vt=0),vt+=2}if(W=vt,W<1&&(W=1),O===1){for(H=0;H<L;H++)F[st+H]=F[ct+H];F[st+L]=Y[U]}else{if(O===0)throw new Error;for(H=0;H<O;H++)F[st+H]=Y[U+H]}}function C(E,O,M,L){var H=0;for(H=0;H<L;H++)Y[H]=F[M+H];var U=E+O-1,ct=L-1,st=M+L-1,vt=0,it=0;if(F[st--]=F[U--],--O==0){for(vt=st-(L-1),H=0;H<L;H++)F[vt+H]=Y[H];return}if(L===1){for(st-=O,U-=O,it=st+1,vt=U+1,H=O-1;H>=0;H--)F[it+H]=F[vt+H];F[st]=Y[ct];return}for(var dt=W;;){var St=0,ut=0,yt=!1;do if(Z(Y[ct],F[U])<0){if(F[st--]=F[U--],St++,ut=0,--O==0){yt=!0;break}}else if(F[st--]=Y[ct--],ut++,St=0,--L==1){yt=!0;break}while((St|ut)<dt);if(yt)break;do{if(St=O-X(Y[ct],F,E,O,O-1,Z),St!==0){for(st-=St,U-=St,O-=St,it=st+1,vt=U+1,H=St-1;H>=0;H--)F[it+H]=F[vt+H];if(O===0){yt=!0;break}}if(F[st--]=Y[ct--],--L==1){yt=!0;break}if(ut=L-z(F[U],Y,0,L,L-1,Z),ut!==0){for(st-=ut,ct-=ut,L-=ut,it=st+1,vt=ct+1,H=0;H<ut;H++)F[it+H]=Y[vt+H];if(L<=1){yt=!0;break}}if(F[st--]=F[U--],--O==0){yt=!0;break}dt--}while(St>=bt||ut>=bt);if(yt)break;dt<0&&(dt=0),dt+=2}if(W=dt,W<1&&(W=1),L===1){for(st-=O,U-=O,it=st+1,vt=U+1,H=O-1;H>=0;H--)F[it+H]=F[vt+H];F[st]=Y[ct]}else{if(L===0)throw new Error;for(vt=st-(L-1),H=0;H<L;H++)F[vt+H]=Y[H]}}return{mergeRuns:V,forceMergeRuns:G,pushRun:K}}function at(F,Z,W,ht){W||(W=0),ht||(ht=F.length);var q=ht-W;if(!(q<2)){var g=0;if(q<B){g=ot(F,W,ht,Z),lt(F,W,ht,W+g,Z);return}var et=J(F,Z),$=ft(q);do{if(g=ot(F,W,ht,Z),g<$){var N=q;N>$&&(N=$),lt(F,W,W+N,W+g,Z),g=N}et.pushRun(W,g),et.mergeRuns(),q-=g,W+=g}while(q!==0);et.forceMergeRuns()}}},zLe5:function(je,nt,b){"use strict";var B=b("c5Gk"),bt=b("rU8e"),k=function(ft){Object(B.a)(ot,ft);function ot(gt,lt,z,X,J,at){var F=ft.call(this,J)||this;return F.x=gt==null?0:gt,F.y=lt==null?0:lt,F.x2=z==null?1:z,F.y2=X==null?0:X,F.type="linear",F.global=at||!1,F}return ot}(bt.a);nt.a=k},zhsV:function(je,nt,b){"use strict";var B=b("iAFd"),bt=[0,0],k=[0,0],ft=new B.a,ot=new B.a,gt=function(){function lt(z,X){this._corners=[],this._axes=[],this._origin=[0,0];for(var J=0;J<4;J++)this._corners[J]=new B.a;for(var J=0;J<2;J++)this._axes[J]=new B.a;z&&this.fromBoundingRect(z,X)}return lt.prototype.fromBoundingRect=function(z,X){var J=this._corners,at=this._axes,F=z.x,Z=z.y,W=F+z.width,ht=Z+z.height;if(J[0].set(F,Z),J[1].set(W,Z),J[2].set(W,ht),J[3].set(F,ht),X)for(var q=0;q<4;q++)J[q].transform(X);B.a.sub(at[0],J[1],J[0]),B.a.sub(at[1],J[3],J[0]),at[0].normalize(),at[1].normalize();for(var q=0;q<2;q++)this._origin[q]=at[q].dot(J[0])},lt.prototype.intersect=function(z,X){var J=!0,at=!X;return ft.set(Infinity,Infinity),ot.set(0,0),!this._intersectCheckOneSide(this,z,ft,ot,at,1)&&(J=!1,at)||!this._intersectCheckOneSide(z,this,ft,ot,at,-1)&&(J=!1,at)||at||B.a.copy(X,J?ft:ot),J},lt.prototype._intersectCheckOneSide=function(z,X,J,at,F,Z){for(var W=!0,ht=0;ht<2;ht++){var q=this._axes[ht];if(this._getProjMinMaxOnAxis(ht,z._corners,bt),this._getProjMinMaxOnAxis(ht,X._corners,k),bt[1]<k[0]||bt[0]>k[1]){if(W=!1,F)return W;var g=Math.abs(k[0]-bt[1]),et=Math.abs(bt[0]-k[1]);Math.min(g,et)>at.len()&&(g<et?B.a.scale(at,q,-g*Z):B.a.scale(at,q,et*Z))}else if(J){var g=Math.abs(k[0]-bt[1]),et=Math.abs(bt[0]-k[1]);Math.min(g,et)<J.len()&&(g<et?B.a.scale(J,q,g*Z):B.a.scale(J,q,-et*Z))}}return W},lt.prototype._getProjMinMaxOnAxis=function(z,X,J){for(var at=this._axes[z],F=this._origin,Z=X[0].dot(at)+F[z],W=Z,ht=Z,q=1;q<X.length;q++){var g=X[q].dot(at)+F[z];W=Math.min(g,W),ht=Math.max(g,ht)}J[0]=W,J[1]=ht},lt}();nt.a=gt},zm8D:function(je,nt,b){"use strict";b.d(nt,"a",function(){return lt});var B=b("bPXU"),bt=b("Nsp3"),k=b("iYbX"),ft="undefined",ot=typeof Uint32Array===ft?Array:Uint32Array,gt=typeof Uint16Array===ft?Array:Uint16Array,lt=typeof Int32Array===ft?Array:Int32Array,z=typeof Float64Array===ft?Array:Float64Array,X={float:z,int:lt,ordinal:Array,number:Array,time:z},J;function at(q){return q>65535?ot:gt}function F(){return[Infinity,-Infinity]}function Z(q){var g=q.constructor;return g===Array?q.slice():new g(q)}function W(q,g,et,$,N){var Y=X[et||"float"];if(N){var K=q[g],V=K&&K.length;if(V!==$){for(var G=new Y($),I=0;I<V;I++)G[I]=K[I];q[g]=G}}else q[g]=new Y($)}var ht=function(){function q(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Object(B.f)()}return q.prototype.initData=function(g,et,$){this._provider=g,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var N=g.getSource(),Y=this.defaultDimValueGetter=J[N.sourceFormat];this._dimValueGetter=$||Y,this._rawExtent=[];var K=Object(k.f)(N);this._dimensions=Object(B.H)(et,function(V){return{type:V.type,property:V.property}}),this._initDataFromProvider(0,g.count())},q.prototype.getProvider=function(){return this._provider},q.prototype.getSource=function(){return this._provider.getSource()},q.prototype.ensureCalculationDimension=function(g,et){var $=this._calcDimNameToIdx,N=this._dimensions,Y=$.get(g);if(Y!=null){if(N[Y].type===et)return Y}else Y=N.length;return N[Y]={type:et},$.set(g,Y),this._chunks[Y]=new X[et||"float"](this._rawCount),this._rawExtent[Y]=F(),Y},q.prototype.collectOrdinalMeta=function(g,et){var $=this._chunks[g],N=this._dimensions[g],Y=this._rawExtent,K=N.ordinalOffset||0,V=$.length;K===0&&(Y[g]=F());for(var G=Y[g],I=K;I<V;I++){var A=$[I]=et.parseAndCollect($[I]);G[0]=Math.min(A,G[0]),G[1]=Math.max(A,G[1])}N.ordinalMeta=et,N.ordinalOffset=V,N.type="ordinal"},q.prototype.getOrdinalMeta=function(g){var et=this._dimensions[g],$=et.ordinalMeta;return $},q.prototype.getDimensionProperty=function(g){var et=this._dimensions[g];return et&&et.property},q.prototype.appendData=function(g){var et=this._provider,$=this.count();et.appendData(g);var N=et.count();return et.persistent||(N+=$),$<N&&this._initDataFromProvider($,N,!0),[$,N]},q.prototype.appendValues=function(g,et){for(var $=this._chunks,N=this._dimensions,Y=N.length,K=this._rawExtent,V=this.count(),G=V+Math.max(g.length,et||0),I=0;I<Y;I++){var A=N[I];W($,I,A.type,G,!0)}for(var C=[],E=V;E<G;E++)for(var O=E-V,M=0;M<Y;M++){var A=N[M],L=J.arrayRows.call(this,g[O]||C,A.property,O,M);$[M][E]=L;var H=K[M];L<H[0]&&(H[0]=L),L>H[1]&&(H[1]=L)}return this._rawCount=this._count=G,{start:V,end:G}},q.prototype._initDataFromProvider=function(g,et,$){for(var N=this._provider,Y=this._chunks,K=this._dimensions,V=K.length,G=this._rawExtent,I=Object(B.H)(K,function(ct){return ct.property}),A=0;A<V;A++){var C=K[A];G[A]||(G[A]=F()),W(Y,A,C.type,et,$)}if(N.fillStorage)N.fillStorage(g,et,Y,G);else for(var E=[],O=g;O<et;O++){E=N.getItem(O,E);for(var M=0;M<V;M++){var L=Y[M],H=this._dimValueGetter(E,I[M],O,M);L[O]=H;var U=G[M];H<U[0]&&(U[0]=H),H>U[1]&&(U[1]=H)}}!N.persistent&&N.clean&&N.clean(),this._rawCount=this._count=et,this._extent=[]},q.prototype.count=function(){return this._count},q.prototype.get=function(g,et){if(!(et>=0&&et<this._count))return NaN;var $=this._chunks[g];return $?$[this.getRawIndex(et)]:NaN},q.prototype.getValues=function(g,et){var $=[],N=[];if(et==null){et=g,g=[];for(var Y=0;Y<this._dimensions.length;Y++)N.push(Y)}else N=g;for(var Y=0,K=N.length;Y<K;Y++)$.push(this.get(N[Y],et));return $},q.prototype.getByRawIndex=function(g,et){if(!(et>=0&&et<this._rawCount))return NaN;var $=this._chunks[g];return $?$[et]:NaN},q.prototype.getSum=function(g){var et=this._chunks[g],$=0;if(et)for(var N=0,Y=this.count();N<Y;N++){var K=this.get(g,N);isNaN(K)||($+=K)}return $},q.prototype.getMedian=function(g){var et=[];this.each([g],function(Y){isNaN(Y)||et.push(Y)});var $=et.sort(function(Y,K){return Y-K}),N=this.count();return N===0?0:N%2==1?$[(N-1)/2]:($[N/2]+$[N/2-1])/2},q.prototype.indexOfRawIndex=function(g){if(g>=this._rawCount||g<0)return-1;if(!this._indices)return g;var et=this._indices,$=et[g];if($!=null&&$<this._count&&$===g)return g;for(var N=0,Y=this._count-1;N<=Y;){var K=(N+Y)/2|0;if(et[K]<g)N=K+1;else if(et[K]>g)Y=K-1;else return K}return-1},q.prototype.indicesOfNearest=function(g,et,$){var N=this._chunks,Y=N[g],K=[];if(!Y)return K;$==null&&($=Infinity);for(var V=Infinity,G=-1,I=0,A=0,C=this.count();A<C;A++){var E=this.getRawIndex(A),O=et-Y[E],M=Math.abs(O);M<=$&&((M<V||M===V&&O>=0&&G<0)&&(V=M,G=O,I=0),O===G&&(K[I++]=A))}return K.length=I,K},q.prototype.getIndices=function(){var g,et=this._indices;if(et){var $=et.constructor,N=this._count;if($===Array){g=new $(N);for(var Y=0;Y<N;Y++)g[Y]=et[Y]}else g=new $(et.buffer,0,N)}else{var $=at(this._rawCount);g=new $(this.count());for(var Y=0;Y<g.length;Y++)g[Y]=Y}return g},q.prototype.filter=function(g,et){if(!this._count)return this;for(var $=this.clone(),N=$.count(),Y=at($._rawCount),K=new Y(N),V=[],G=g.length,I=0,A=g[0],C=$._chunks,E=0;E<N;E++){var O=void 0,M=$.getRawIndex(E);if(G===0)O=et(E);else if(G===1){var L=C[A][M];O=et(L,E)}else{for(var H=0;H<G;H++)V[H]=C[g[H]][M];V[H]=E,O=et.apply(null,V)}O&&(K[I++]=M)}return I<N&&($._indices=K),$._count=I,$._extent=[],$._updateGetRawIdx(),$},q.prototype.selectRange=function(g){var et=this.clone(),$=et._count;if(!$)return this;var N=Object(B.F)(g),Y=N.length;if(!Y)return this;var K=et.count(),V=at(et._rawCount),G=new V(K),I=0,A=N[0],C=g[A][0],E=g[A][1],O=et._chunks,M=!1;if(!et._indices){var L=0;if(Y===1){for(var H=O[N[0]],U=0;U<$;U++){var ct=H[U];(ct>=C&&ct<=E||isNaN(ct))&&(G[I++]=L),L++}M=!0}else if(Y===2){for(var H=O[N[0]],st=O[N[1]],vt=g[N[1]][0],it=g[N[1]][1],U=0;U<$;U++){var ct=H[U],dt=st[U];(ct>=C&&ct<=E||isNaN(ct))&&(dt>=vt&&dt<=it||isNaN(dt))&&(G[I++]=L),L++}M=!0}}if(!M)if(Y===1)for(var U=0;U<K;U++){var St=et.getRawIndex(U),ct=O[N[0]][St];(ct>=C&&ct<=E||isNaN(ct))&&(G[I++]=St)}else for(var U=0;U<K;U++){for(var ut=!0,St=et.getRawIndex(U),yt=0;yt<Y;yt++){var Ot=N[yt],ct=O[Ot][St];(ct<g[Ot][0]||ct>g[Ot][1])&&(ut=!1)}ut&&(G[I++]=et.getRawIndex(U))}return I<K&&(et._indices=G),et._count=I,et._extent=[],et._updateGetRawIdx(),et},q.prototype.map=function(g,et){var $=this.clone(g);return this._updateDims($,g,et),$},q.prototype.modify=function(g,et){this._updateDims(this,g,et)},q.prototype._updateDims=function(g,et,$){for(var N=g._chunks,Y=[],K=et.length,V=g.count(),G=[],I=g._rawExtent,A=0;A<et.length;A++)I[et[A]]=F();for(var C=0;C<V;C++){for(var E=g.getRawIndex(C),O=0;O<K;O++)G[O]=N[et[O]][E];G[K]=C;var M=$&&$.apply(null,G);if(M!=null){typeof M!="object"&&(Y[0]=M,M=Y);for(var A=0;A<M.length;A++){var L=et[A],H=M[A],U=I[L],ct=N[L];ct&&(ct[E]=H),H<U[0]&&(U[0]=H),H>U[1]&&(U[1]=H)}}}},q.prototype.lttbDownSample=function(g,et){var $=this.clone([g],!0),N=$._chunks,Y=N[g],K=this.count(),V=0,G=Math.floor(1/et),I=this.getRawIndex(0),A,C,E,O=new(at(this._rawCount))(Math.ceil(K/G)+2);O[V++]=I;for(var M=1;M<K-1;M+=G){for(var L=Math.min(M+G,K-1),H=Math.min(M+G*2,K),U=(H+L)/2,ct=0,st=L;st<H;st++){var vt=this.getRawIndex(st),it=Y[vt];isNaN(it)||(ct+=it)}ct/=H-L;var dt=M,St=Math.min(M+G,K),ut=M-1,yt=Y[I];A=-1,E=dt;for(var st=dt;st<St;st++){var vt=this.getRawIndex(st),it=Y[vt];isNaN(it)||(C=Math.abs((ut-U)*(it-yt)-(ut-st)*(ct-yt)),C>A&&(A=C,E=vt))}O[V++]=E,I=E}return O[V++]=this.getRawIndex(K-1),$._count=V,$._indices=O,$.getRawIndex=this._getRawIdx,$},q.prototype.downSample=function(g,et,$,N){for(var Y=this.clone([g],!0),K=Y._chunks,V=[],G=Math.floor(1/et),I=K[g],A=this.count(),C=Y._rawExtent[g]=F(),E=new(at(this._rawCount))(Math.ceil(A/G)),O=0,M=0;M<A;M+=G){G>A-M&&(G=A-M,V.length=G);for(var L=0;L<G;L++){var H=this.getRawIndex(M+L);V[L]=I[H]}var U=$(V),ct=this.getRawIndex(Math.min(M+N(V,U)||0,A-1));I[ct]=U,U<C[0]&&(C[0]=U),U>C[1]&&(C[1]=U),E[O++]=ct}return Y._count=O,Y._indices=E,Y._updateGetRawIdx(),Y},q.prototype.each=function(g,et){if(!!this._count)for(var $=g.length,N=this._chunks,Y=0,K=this.count();Y<K;Y++){var V=this.getRawIndex(Y);switch($){case 0:et(Y);break;case 1:et(N[g[0]][V],Y);break;case 2:et(N[g[0]][V],N[g[1]][V],Y);break;default:for(var G=0,I=[];G<$;G++)I[G]=N[g[G]][V];I[G]=Y,et.apply(null,I)}}},q.prototype.getDataExtent=function(g){var et=this._chunks[g],$=F();if(!et)return $;var N=this.count(),Y=!this._indices,K;if(Y)return this._rawExtent[g].slice();if(K=this._extent[g],K)return K.slice();K=$;for(var V=K[0],G=K[1],I=0;I<N;I++){var A=this.getRawIndex(I),C=et[A];C<V&&(V=C),C>G&&(G=C)}return K=[V,G],this._extent[g]=K,K},q.prototype.getRawDataItem=function(g){var et=this.getRawIndex(g);if(this._provider.persistent)return this._provider.getItem(et);for(var $=[],N=this._chunks,Y=0;Y<N.length;Y++)$.push(N[Y][et]);return $},q.prototype.clone=function(g,et){var $=new q,N=this._chunks,Y=g&&Object(B.N)(g,function(V,G){return V[G]=!0,V},{});if(Y)for(var K=0;K<N.length;K++)$._chunks[K]=Y[K]?Z(N[K]):N[K];else $._chunks=N;return this._copyCommonProps($),et||($._indices=this._cloneIndices()),$._updateGetRawIdx(),$},q.prototype._copyCommonProps=function(g){g._count=this._count,g._rawCount=this._rawCount,g._provider=this._provider,g._dimensions=this._dimensions,g._extent=Object(B.d)(this._extent),g._rawExtent=Object(B.d)(this._rawExtent)},q.prototype._cloneIndices=function(){if(this._indices){var g=this._indices.constructor,et=void 0;if(g===Array){var $=this._indices.length;et=new g($);for(var N=0;N<$;N++)et[N]=this._indices[N]}else et=new g(this._indices);return et}return null},q.prototype._getRawIdxIdentity=function(g){return g},q.prototype._getRawIdx=function(g){return g<this._count&&g>=0?this._indices[g]:-1},q.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},q.internalField=function(){function g(et,$,N,Y){return Object(bt.d)(et[Y],this._dimensions[Y])}J={arrayRows:g,objectRows:function(et,$,N,Y){return Object(bt.d)(et[$],this._dimensions[Y])},keyedColumns:g,original:function(et,$,N,Y){var K=et&&(et.value==null?et:et.value);return Object(bt.d)(K instanceof Array?K[Y]:K,this._dimensions[Y])},typedArray:function(et,$,N,Y){return et[Y]}}}(),q}();nt.b=ht}}]);
