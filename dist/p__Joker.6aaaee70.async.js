(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{aMux:function($,b,m){"use strict";m.r(b);var q=m("ld8g"),P=m("SJBw"),j=m("1QO0"),A=m("tWIW"),e=m("8GEk"),W=m("4DJe"),h=m("Ubne");function k(){var a=document.createElement("div"),x=document.createElement("p");a.appendChild(x),a.id="heart",a.innerHTML="<Card/>",a.style.padding="4px 10px",a.style.width="300px",a.style.fontSize="16px",a.style.position="absolute",a.style.backgroundColor="rgba(255,255,255,1)",a.style.borderRadius="3px",a.style.color="#000000",x.style.backgroundColor="rgba(255,255,255,1)",x.innerHTML="\u5FC3\u810F\uFF08\u82F1\u8BED\uFF1Aheart\uFF09\uFF0C\u5E38\u7B80\u79F0\u5FC3\uFF0C\u662F\u4E00\u79CD\u5728\u4EBA\u7C7B\u548C\u5176\u4ED6\u52A8\u7269\u90FD\u6709\u7684\u808C\u9020\u5668\u5B98",x.style.color="#000000";var p=new h.a(a);return a.style.pointerEvents="none",p.position.set(1,0,1),p}var d=new h.b;d.setSize(window.innerWidth,window.innerHeight),d.domElement.style.position="absolute",d.domElement.style.top="-16px",d.domElement.style.left="0px",d.domElement.style.pointerEvents="none",document.body.appendChild(d.domElement);var C=m("t12N"),z=k(),B=function(){var x={exposure:0,bloomStrength:0,bloomThreshold:0,bloomRadius:0},p=function(){var i,S,ee,re,te,oe,s,ae,ne,ie,le,c,ve,V,me,u,F,M,ue,g=document.getElementById("Subject"),L=function(){V=new A.a,s=new e.zb,s.position.y=-1,s.background=new e.q(0),S=new e.g(20),s.add(S),c=new e.Wb({antialias:!0}),c.setPixelRatio(window.devicePixelRatio),M=new e.p},N=function(){i=new e.nb(45,g.clientWidth/g.clientHeight,.1,1e3),i.position.y=1,i.position.x=0,i.position.z=4;var o=new e.pb(16776960,1);i.add(o)};function de(){return new e.t().load(new Array(6).fill("./start.jpg"))}function y(){var n=["varying vec3	vVertexWorldPosition;","varying vec3	vVertexNormal;","varying vec4	vFragColor;","void main(){","	vVertexNormal	= normalize(normalMatrix * normal);","	vVertexWorldPosition	= (modelMatrix * vec4(position, 1)).xyz;","	// set gl_Position","	gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1);","}"].join(`
`),o={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:.5},glowColor:{type:"c",value:new e.q("#51AEF4")}},vertexShader:n,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},l={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:1},glowColor:{type:"c",value:new e.q("#336AAC")}},vertexShader:n,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},r={uniforms:{coeficient:{type:"f",value:1},power:{type:"f",value:.2},glowColor:{type:"c",value:new e.q("red")}},vertexShader:n,fragmentShader:["uniform vec3	glowColor;","uniform float	coeficient;","uniform float	power;","varying vec3	vVertexNormal;","varying vec3	vVertexWorldPosition;","varying vec4	vFragColor;","void main(){","	vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;","	vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;","	viewCameraToVertex	= normalize(viewCameraToVertex);","	float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);","	gl_FragColor		= vec4(glowColor, intensity);","}"].join(`
`)},t=new e.Ab({uniforms:o.uniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:e.ib,transparent:!0,depthWrite:!1}),f=new e.Ab({uniforms:l.uniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:e.ib,transparent:!0,depthWrite:!1}),v=new e.Ab({uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,blending:e.ib,transparent:!0,depthWrite:!1});return{material1:t,material2:f,material3:v}}var R=function(o,l,r){r.traverse(function(t){t.isMesh&&t.name==="Body002"&&(t.material.visible=!1)})},I=function(o,l,r){r.traverse(function(t){t.isMesh&&t.name==="Body002"&&(t.material.visible=!0)})},O=function(o,l,r,t){var f=t;f.geometry.computeBoundingSphere();var v=f.geometry.boundingSphere.center;console.log("\u70B9\u51FB\u503C",t,v),i.lookAt(v),i.position.y=1,i.position.x=0,i.position.z=1.5,r.traverse(function(w){if(w.isMesh&&w.name==="Circulatory_Heart001"){var E=new e.Rb(10,0,6);E.normalize();var X=new e.Rb(0,0,0),Y=10,Z=16777215,T=new e.e(E,X,Y,Z);T.cone.material.visible=!1,w.add(T),w.add(z)}})},J=function(){V.load("./img/joker.gltf",function(o){var l=o.scene;l.traverse(function(r){if(r.isMesh)switch(r.name){case"Body002":r.material=y().material1,document.addEventListener("mouseover",function(v){R(v,t,r)}),document.addEventListener("mouseout",function(v){I(v,t,r)});break;case"Skeletal001":r.material=y().material2;break;case"Circulatory_Heart001":r.material=y().material3;var t=document.getElementById("Card"),f=document.getElementById("Heart");f.addEventListener("click",function(v){O(v,t,l,r)});break;default:break}}),s.add(l),l.matrixAutoUpdate=!1,l.updateMatrix()},void 0,function(o){console.error(o)})},G=function(){u=new W.a(i,c.domElement),u.autoRotate=!1,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.minDistance=0,u.maxDistance=Infinity,u.enablePan=!0,u.enableDamping=!0,u.dampingFactor=.5},U=function(){L(),N(),G(),c.setSize(g.clientWidth,g.clientHeight),g.appendChild(c.domElement),J()};function Q(){c.render(s,i),d.render(s,i)}var K=function n(){var o=M.getDelta();F&&F.update(o),Q(),requestAnimationFrame(n)};U(),K()},D=function(){console.log("")};return Object(j.useEffect)(function(){p()},[]),Object(C.jsxs)("div",{children:[Object(C.jsx)(P.a,{type:"primary",style:{position:"absolute"},id:"Heart",onClick:D,children:"\u5FC3\u810F"}),Object(C.jsx)("div",{id:"Subject",style:{height:"100vh"}})]})},_=b.default=B}}]);
